--
-- PostgreSQL database dump
--

\restrict xeGxYKtAxh6CcFnqWTaJPj3FIp9GVj0yGrz4aWkY6D6SmckWygbBt3rToZkRLQe

-- Dumped from database version 13.21 (Ubuntu 13.21-1.pgdg24.04+1)
-- Dumped by pg_dump version 18.3 (Debian 18.3-1.pgdg13+1)

-- Started on 2026-02-26 18:30:52 UTC

SET statement_timeout = 0;
SET lock_timeout = 0;

SET client_encoding = 'LATIN1';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 9 (class 2615 OID 25896)
-- Name: MySchema; Type: SCHEMA; Schema: -; Owner: -
--

CREATE SCHEMA "MySchema";

--
-- TOC entry 14 (class 2615 OID 67272662)
-- Name: etl_control; Type: SCHEMA; Schema: -; Owner: -
--

CREATE SCHEMA etl_control;

--
-- TOC entry 7 (class 2615 OID 2200)
-- Name: public; Type: SCHEMA; Schema: -; Owner: -
--

-- *not* creating schema, since initdb creates it

--
-- TOC entry 2 (class 3079 OID 25921)
-- Name: dblink; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS dblink WITH SCHEMA public;

--
-- TOC entry 12021 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION dblink; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON EXTENSION dblink IS 'connect to other PostgreSQL databases from within a database';

--
-- TOC entry 3 (class 3079 OID 25977)
-- Name: pg_similarity; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS pg_similarity WITH SCHEMA public;

--
-- TOC entry 12022 (class 0 OID 0)
-- Dependencies: 3
-- Name: EXTENSION pg_similarity; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON EXTENSION pg_similarity IS 'support similarity queries';

--
-- TOC entry 4 (class 3079 OID 26060)
-- Name: tablefunc; Type: EXTENSION; Schema: -; Owner: -
--

CREATE EXTENSION IF NOT EXISTS tablefunc WITH SCHEMA public;

--
-- TOC entry 12023 (class 0 OID 0)
-- Dependencies: 4
-- Name: EXTENSION tablefunc; Type: COMMENT; Schema: -; Owner: -
--

COMMENT ON EXTENSION tablefunc IS 'functions that manipulate whole tables, including crosstab';

--
-- TOC entry 2478 (class 1247 OID 26097)
-- Name: my_crosstab_result; Type: TYPE; Schema: public; Owner: -
--

CREATE TYPE public.my_crosstab_result AS (
	rowid text,
	rowdt timestamp without time zone,
	temperature integer,
	test_result text,
	test_startdate timestamp without time zone,
	volts double precision
);

--
-- TOC entry 1800 (class 1255 OID 26098)
-- Name: abs_cpf(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.abs_cpf(text) RETURNS text
    LANGUAGE sql IMMUTABLE
    AS $_$

       SELECT 

	CASE WHEN SUBSTR(
		LPAD(TRIM(SUBSTR(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text,  LENGTH(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text) - 14 )),15, '0')
		, 10,4) = '0000' THEN
		SUBSTR(
		LPAD(TRIM(SUBSTR(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text,  LENGTH(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text) - 14 )),15, '0')
		, 1,9) || SUBSTR(
		LPAD(TRIM(SUBSTR(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text,  LENGTH(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text) - 14 )),15, '0')
		, 14,2)
        WHEN LENGTH(trim(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text)) < 12 THEN
		LPAD(TRIM(SUBSTR(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text,  LENGTH(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text) - 10 )),11, '0')
	ELSE
		SUBSTR(
		LPAD(TRIM(SUBSTR(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text,  LENGTH(TO_NUMBER('0' || $1, '999999999999999999999999999999')::text) - 14 )),15, '0')
		, 2)
	END ;

$_$;

--
-- TOC entry 1801 (class 1255 OID 26102)
-- Name: atualiza_timestamp(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.atualiza_timestamp() RETURNS trigger
    LANGUAGE plpgsql
    AS $$                                                                                                                                                                                                  
DECLARE
BEGIN
 IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN
  new.tstamp = current_timestamp;
 END IF;

 return new;    
END;
$$;

--
-- TOC entry 1802 (class 1255 OID 26110)
-- Name: atualiza_tstampbi(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.atualiza_tstampbi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
BEGIN
	IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN
		new.tstamp = current_timestamp;
		new.tstampbi = current_timestamp;
	END IF;
	return new;    
END;
$$;

--
-- TOC entry 1803 (class 1255 OID 26111)
-- Name: blo_atualiza_situacaocontrato(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.blo_atualiza_situacaocontrato() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	                            DECLARE 
	                            registro RECORD;
				    OldSituacaoContrato INTEGER;		
	                            BEGIN
 
	                            IF TG_OP = 'UPDATE' THEN
		
		                            IF NEW.black_list_ouvidoria_int = 1 THEN 

		                               NEW.id_cbsituacaocontrato_int = 6;

					    ELSEIF NEW.black_list_ouvidoria_int = 0 THEN

						select id_cbsituacaocontrato_old_int INTO OldSituacaoContrato from cbsituacaocontratohistorico 
						where id_cbcontrato_int = NEW.id_cbcontrato_int  order by tstamp desc limit 1;
						NEW.id_cbsituacaocontrato_int = OldSituacaoContrato;

		                            END IF;

		                            RETURN NEW;
					 
		
	                            END IF;
	                            END;
                             $$;

--
-- TOC entry 1804 (class 1255 OID 26119)
-- Name: convert_to_integer(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.convert_to_integer(v_input text) RETURNS integer
    LANGUAGE plpgsql
    AS $$
DECLARE v_int_value INTEGER DEFAULT 0;
BEGIN
    BEGIN
        v_int_value := v_input::INTEGER;
    EXCEPTION WHEN OTHERS THEN
        RAISE NOTICE 'Caracter invalido: "%".  Returning NULL.', v_input;
        RETURN '0';
    END;
RETURN v_int_value;
END;
$$;

--
-- TOC entry 1805 (class 1255 OID 26121)
-- Name: create_if_not_exists(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.create_if_not_exists() RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN

	IF EXISTS (SELECT * FROM pg_catalog.pg_tables WHERE tablename = 'tmp_atualiza_dsc_status') THEN
		RAISE NOTICE 'A tabela ja existe.';
	ELSE
		CREATE TABLE tmp_atualiza_dsc_status (id_cbcontrato_int bigint, id_gecliente_int bigint);

		--Cria os indice na tabela temporaria
		CREATE INDEX tmp_atualiza_dsc_status_idx1
		ON tmp_atualiza_dsc_status
		USING btree
		(id_cbcontrato_int);
		
		CREATE INDEX tmp_atualiza_dsc_status_idx2
		ON tmp_atualiza_dsc_status
		USING btree
		(id_gecliente_int);
	END IF;

END;
$$;

--
-- TOC entry 1806 (class 1255 OID 26131)
-- Name: cria_usuariocliente(text, text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.cria_usuariocliente(banco text, ip text, carteira bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
registro	      RECORD;
registro2	      RECORD;
comando             TEXT;
sql                 TEXT;
	
BEGIN
        --verifica todas as tabela que utiliza o campo id_gecliente_int
for registro in execute 'select distinct sp.ip_str, sp.senha_str, sp.banco_str, sp.porta_str,        c.id_gecliente_int
                         from geparametroservidor sp
			 join geclienteservidor cs on cs.id_geparametroservidor_int = sp.id_geparametroservidor_int
			 join gecliente c on c.id_gecliente_int = cs.id_gecliente_int
			 where (sp.banco_str<> ''' || banco || ''' or sp.ip_str<> ''' || ip || ''') and c.ativo_str = ''1'''
loop
raise notice '%,%, %', registro.banco_str , registro.ip_str, registro.senha_str ;
sql = 'select count(remoto.id_geusuariocliente_int) as cont 
	from geusuariocliente tabela
	join dblink(''dbname=' || registro.banco_str || ' port=' || registro.porta_str || ' host=' || registro.ip_str || ' 
				user=postgres password=' || registro.senha_str || '''::text,
''select id_geusuario_int, id_gecliente_int, id_geusuariocliente_int 
  from geusuariocliente 
  where id_gecliente_int = ' || carteira || ' and id_geusuario_int = 1195'')
  
as remoto (id_geusuario_int bigint, id_gecliente_int bigint, id_geusuariocliente_int bigint)
				on tabela.id_geusuario_int = remoto.id_geusuario_int
				and tabela.id_gecliente_int = remoto.id_gecliente_int			
				where tabela.id_gecliente_int = ' || carteira;
for registro2 in execute sql
loop
if registro2.cont < 1 then
comando = 'insert into geusuariocliente (id_geusuario_int, id_gecliente_int, tipo_contato_str, turno_str, usuario_int, tstamp, horas_trabalho_int, ramal_int, faixa_atuacao_str, atuacao_str, horario_entrada_str, horario_saida_str, id_geclassificacaocontato_int)
values(1195, ' || carteira || ' , ''''R'''', ''''I'''', 1195, current_timestamp, 0, 3519, ''''0'''', ''''0'''', ''''0'''', ''''0'''', 1)';

					raise notice 'EXECUTOU: Carteira % IP %',registro.banco_str, registro.ip_str;
					EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=postgres password=' || registro.senha_str || '''::text,''' || comando || '''); ';
				end if;
			end loop;
		end loop;
	
		return 'OK';
END;
$$;

--
-- TOC entry 1807 (class 1255 OID 26135)
-- Name: criatemp(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.criatemp(text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
declare
	tabela alias for $1;
Begin
    	Execute 'create temporary table ' ||  tabela || '_temp as select * from ' || tabela || ' where idreplicacao = -1 ';
        return 'OK';
end;
$_$;

--
-- TOC entry 1808 (class 1255 OID 26143)
-- Name: crosstab_named(text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.crosstab_named(text, text) RETURNS SETOF public.my_crosstab_result
    LANGUAGE c STABLE STRICT
    AS '$libdir/tablefunc', 'crosstab_hash';

--
-- TOC entry 1809 (class 1255 OID 26145)
-- Name: crosstab_out(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.crosstab_out(text, OUT rowid text, OUT att1 text, OUT att2 text, OUT att3 text) RETURNS SETOF record
    LANGUAGE c STABLE STRICT
    AS '$libdir/tablefunc', 'crosstab';

--
-- TOC entry 1810 (class 1255 OID 26153)
-- Name: crosstab_out(text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.crosstab_out(text, text, OUT rowid text, OUT rowdt timestamp without time zone, OUT temperature integer, OUT test_result text, OUT test_startdate timestamp without time zone, OUT volts double precision) RETURNS SETOF record
    LANGUAGE c STABLE STRICT
    AS '$libdir/tablefunc', 'crosstab_hash';

--
-- TOC entry 1811 (class 1255 OID 26155)
-- Name: dax(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.dax(bigint) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select CASE WHEN $1 < 181 THEN 0.50 ELSE 1 END;

$_$;

--
-- TOC entry 1812 (class 1255 OID 26165)
-- Name: dmaxp(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.dmaxp(bigint) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select CASE WHEN $1 < 181 THEN 0.50 ELSE 1 END;

$_$;

--
-- TOC entry 1813 (class 1255 OID 26172)
-- Name: droptemp(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.droptemp(text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
declare
	tabela alias for $1;
Begin
	Execute 'drop table ' || tabela || '_temp';
	return 'OK';
end;
$_$;

--
-- TOC entry 1814 (class 1255 OID 26179)
-- Name: dx1(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.dx1(bigint) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select CASE WHEN $1 < 30 THEN 0 WHEN $1 < 181 THEN 0.50 ELSE 1 END;

$_$;

--
-- TOC entry 1815 (class 1255 OID 26188)
-- Name: dx2(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.dx2(bigint) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select 
	CASE WHEN $1 < 181 THEN 0
	WHEN $1 < 361 THEN 0.25 
	ELSE 0.5 END;

$_$;

--
-- TOC entry 1816 (class 1255 OID 26197)
-- Name: dx3(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.dx3(bigint) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select 
	CASE 
	WHEN $1 > 720 THEN 0.5
	WHEN $1 > 360 THEN 0.4
	WHEN $1 > 180 THEN 0.15
	WHEN $1 > 120 THEN 0.6
	WHEN $1 > 45 THEN 0.5
	WHEN $1 > 30 THEN 0.1
	ELSE 0
	END;

$_$;

--
-- TOC entry 1817 (class 1255 OID 26200)
-- Name: dx4(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.dx4(bigint) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select 
	CASE 
	WHEN $1 > 180 THEN 1
	WHEN $1 > 120 THEN 0.6
	WHEN $1 > 45 THEN 0.5
	WHEN $1 > 30 THEN 0.1
	ELSE 0
	END;

$_$;

--
-- TOC entry 1818 (class 1255 OID 26208)
-- Name: f_accountcodeaspect(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_accountcodeaspect(idcontrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  vaccount 	      text;

BEGIN

	/*vaccount := (SELECT id_gecliente_int || '.' || id_cbtiponegocio_int || '.' || id_cbcontrato_int
		     FROM cbcontratosantander
		     WHERE id_cbcontrato_int = idcontrato);*/

	vaccount := idcontrato;
	
	RETURN vaccount;
END;
$$;

--
-- TOC entry 1819 (class 1255 OID 26210)
-- Name: f_acerta_sequences(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_acerta_sequences() RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
rsSequence	RECORD;
rsTabela	RECORD;
rsDados	RECORD;
vtabela	varchar;
vsequence	varchar;
vcoluna	varchar;
valor		bigint;
	
BEGIN
	FOR rsSequence IN EXECUTE 'SELECT sequence_name FROM information_schema.sequences'
	LOOP

		vsequence := rsSequence.sequence_name;
		vtabela := replace(rsSequence.sequence_name,'_seq', '');
		vcoluna := 'id_' || vtabela || '_int';

		/*raise notice 'vsequence %', vsequence;
		raisenotice 'vtabela %', vtabela;
		raisenotice 'vcoluna %', vcoluna;*/

		FOR rsTabela IN EXECUTE 'SELECT * 
					FROM information_schema.columns
					where table_name = ''' || vtabela || ''' and 
					column_name = ''' || vcoluna || ''' order by table_name'
		LOOP	
			--raisenotice 'SELECT COALESCE(MAX(%),0)valormaximo FROM %', vcoluna, vtabela;

			FOR rsDados IN EXECUTE 'SELECT COALESCE(MAX(' || vcoluna || ' ),0)::bigint valormaximo FROM ' || vtabela
			LOOP	
				--raisenotice 'a';
				--raisenotice '%', rsDados.valormaximo;
				valor := rsDados.valormaximo + 1;
				
				--raisenotice 'Sequencia: %, valor: %, valormaximo: %, vtabela: % ', vsequence, valor, rsDados.valormaximo, vtabela;

				EXECUTE 'ALTER sequence ' || vsequence || ' restart ' || valor || '';

				

			END LOOP;

		END LOOP;	

	END LOOP;

	RETURN  'OK';
END;
$$;

--
-- TOC entry 1820 (class 1255 OID 26215)
-- Name: f_ajustaparcelamento_calculo(text, text, text, text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_ajustaparcelamento_calculo(tempcalculoparcela text, tempcalculoparcelamento text, scalculo text, plano text, idcontrato bigint, idparcela bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro            RECORD;
  registroparc        RECORD;
  idcalcpar           TEXT;

BEGIN
	FOR registro IN EXECUTE 'SELECT id_cbcalculoparcelaparcelamento_int 
                                   FROM ' || tempcalculoparcelamento || ' 
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND plano_acordo_int = ' || plano || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela || '
                                  ORDER BY data_vencimento_dat DESC LIMIT 1'
        LOOP
		idcalcpar = registro.id_cbcalculoparcelaparcelamento_int;
        END LOOP;

        RAISE NOTICE 'scalculo % ', scalculo;
	FOR registro IN EXECUTE 'SELECT SUM(valor_total_num) AS valor_parcelamento_num,
                                        SUM(desconto_num) AS desconto_num,
                                        SUM(principal_num) AS principal_num,
                                        SUM(cp_num) AS cp_num,
                                        SUM(multa_num) AS multa_num,
                                        SUM(juros_mora_num) AS juros_num,
                                        SUM(notificacao_num) AS despesas_num,
                                        SUM(honorarios_num) AS ho_num,
                                        SUM(comissionamento_num) comissionamento_num
                                   FROM ' || tempcalculoparcela || '
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela || '
                                 GROUP BY id_cbparcela_int'
	LOOP
		FOR registroparc IN EXECUTE 'SELECT SUM(valor_parcelamento_num) AS valor_parcelamento_num,
                                                    SUM(desconto_num) AS desconto_num,
                                                    SUM(principal_num) AS principal_num,
                                                    SUM(cp_num) AS cp_num,
                                                    SUM(multa_num) AS multa_num,
                                                    SUM(juros_num) AS juros_num,
                                                    SUM(despesas_num) AS despesas_num,
                                                    SUM(ho_num) AS ho_num,
                                                    SUM(comissionamento_num) comissionamento_num
                                               FROM ' || tempcalculoparcelamento || '
                                              WHERE plano_acordo_int = ' || plano || '
                                                AND id_cbcontrato_int = ' || idcontrato || '
						AND id_cbparcela_int = ' || idparcela || '
                                                AND id_cbcalculoparcela_int = ' || scalculo
		LOOP
			--valor_parcelamento_num
			IF registro.valor_parcelamento_num - registroparc.valor_parcelamento_num <> 0 AND
			   registro.valor_parcelamento_num - registroparc.valor_parcelamento_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET valor_parcelamento_num = valor_parcelamento_num + ' || (registro.valor_parcelamento_num - registroparc.valor_parcelamento_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca valor_parcelamento_num: %', registro.valor_parcelamento_num - registroparc.valor_parcelamento_num;
													                                                       
			END IF;

			--desconto_num
			IF registro.desconto_num - registroparc.desconto_num <> 0 AND
			   registro.desconto_num - registroparc.desconto_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET desconto_num = desconto_num + ' || (registro.desconto_num - registroparc.desconto_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca desconto_num: %', registro.desconto_num - registroparc.desconto_num;
								                                                      
			END IF;

			--principal_num
			IF registro.principal_num - registroparc.principal_num <> 0 AND 
			   registro.principal_num - registroparc.principal_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET principal_num = principal_num + ' || (registro.principal_num - registroparc.principal_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca principal_num: %', registro.principal_num - registroparc.principal_num;
								                                                      
			END IF;

			--cp_num
			IF registro.cp_num - registroparc.cp_num <> 0 AND
			   registro.cp_num - registroparc.cp_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET cp_num = cp_num + ' || (registro.cp_num - registroparc.cp_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca cp_num: %', registro.cp_num - registroparc.cp_num;
											
			END IF;

			--multa_num
			IF registro.multa_num - registroparc.multa_num <> 0 AND
			   registro.multa_num - registroparc.multa_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET multa_num = multa_num + ' || (registro.multa_num - registroparc.multa_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;
				            
				raise notice 'diferenca multa_num: %', registro.multa_num - registroparc.multa_num;	
							                                                      
			END IF;

			--juros_num
			IF registro.juros_num - registroparc.juros_num <> 0 AND
			   registro.juros_num - registroparc.juros_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET juros_num = juros_num + ' || (registro.juros_num - registroparc.juros_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca juros_num: %', registro.juros_num - registroparc.juros_num;
								                                                      
			END IF;

			--despesas_num
			IF registro.despesas_num - registroparc.despesas_num <> 0 AND
			   registro.despesas_num - registroparc.despesas_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET despesas_num = despesas_num + ' || (registro.despesas_num - registroparc.despesas_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca despesas_num: %', registro.despesas_num - registroparc.despesas_num;
								                                                      
			END IF;

			--ho_num
			IF registro.ho_num - registroparc.ho_num <> 0 AND
			   registro.ho_num - registroparc.ho_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET ho_num = ho_num + ' || (registro.ho_num - registroparc.ho_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca ho_num: %', registro.ho_num - registroparc.ho_num;
								                                                      
			END IF;

			--comissionamento_num
			IF registro.comissionamento_num - registroparc.comissionamento_num <> 0 AND
			   registro.comissionamento_num - registroparc.comissionamento_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET comissionamento_num = comissionamento_num + ' || (registro.comissionamento_num - registroparc.comissionamento_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca comissionamento_num: %', registro.comissionamento_num - registroparc.comissionamento_num;
								                                                      
			END IF;
		END LOOP;
		
	END LOOP;

	RETURN '';
END;
$$;

--
-- TOC entry 1821 (class 1255 OID 26220)
-- Name: f_ajustaparcelamento_calculo_entrada(text, text, text, text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_ajustaparcelamento_calculo_entrada(tempcalculoparcela text, tempcalculoparcelamento text, scalculo text, plano text, idcontrato bigint, idparcela bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro            RECORD;
  registroparc        RECORD;
  idcalcpar           TEXT;

BEGIN
	FOR registro IN EXECUTE 'SELECT id_cbcalculoparcelaparcelamento_int 
                                   FROM ' || tempcalculoparcelamento || ' 
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND plano_acordo_int = ' || plano || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela || '
                                  ORDER BY data_vencimento_dat DESC LIMIT 1'
        LOOP
		idcalcpar = registro.id_cbcalculoparcelaparcelamento_int;
        END LOOP;

        RAISE NOTICE 'scalculo % ', scalculo;
	FOR registro IN EXECUTE 'SELECT SUM(valor_total_num) AS valor_parcelamento_num,
                                        SUM(desconto_num) AS desconto_num,
                                        SUM(principal_num) AS principal_num,
                                        SUM(cp_num) AS cp_num,
                                        SUM(multa_num) AS multa_num,
                                        SUM(juros_mora_num) AS juros_num,
                                        SUM(notificacao_num) AS despesas_num,
                                        SUM(honorarios_num) AS ho_num,
                                        SUM(comissionamento_num) comissionamento_num
                                   FROM ' || tempcalculoparcela || '
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela || '
                                 GROUP BY id_cbparcela_int'
	LOOP
		FOR registroparc IN EXECUTE 'SELECT SUM(valor_parcelamento_num) AS valor_parcelamento_num,
                                                    SUM(desconto_num) AS desconto_num,
                                                    SUM(principal_num) AS principal_num,
                                                    SUM(cp_num) AS cp_num,
                                                    SUM(multa_num) AS multa_num,
                                                    SUM(juros_num) AS juros_num,
                                                    SUM(despesas_num) AS despesas_num,
                                                    SUM(ho_num) AS ho_num,
                                                    SUM(comissionamento_num) comissionamento_num
                                               FROM ' || tempcalculoparcelamento || '
                                              WHERE plano_acordo_int = ' || plano || '
                                                AND id_cbcontrato_int = ' || idcontrato || '
						AND id_cbparcela_int = ' || idparcela || '
                                                AND id_cbcalculoparcela_int = ' || scalculo
		LOOP
			--valor_parcelamento_num
			IF registro.valor_parcelamento_num - registroparc.valor_parcelamento_num <> 0 AND
			   registro.valor_parcelamento_num - registroparc.valor_parcelamento_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET valor_parcelamento_num = valor_parcelamento_num + ' || (registro.valor_parcelamento_num - registroparc.valor_parcelamento_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca valor_parcelamento_num: %', registro.valor_parcelamento_num - registroparc.valor_parcelamento_num;
													                                                       
			END IF;

			--desconto_num
			IF registro.desconto_num - registroparc.desconto_num <> 0 AND
			   registro.desconto_num - registroparc.desconto_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET desconto_num = desconto_num + ' || (registro.desconto_num - registroparc.desconto_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca desconto_num: %', registro.desconto_num - registroparc.desconto_num;
								                                                      
			END IF;

			--principal_num
			IF registro.principal_num - registroparc.principal_num <> 0 AND 
			   registro.principal_num - registroparc.principal_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET principal_num = principal_num + ' || (registro.principal_num - registroparc.principal_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca principal_num: %', registro.principal_num - registroparc.principal_num;
								                                                      
			END IF;

			--cp_num
			IF registro.cp_num - registroparc.cp_num <> 0 AND
			   registro.cp_num - registroparc.cp_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET cp_num = cp_num + ' || (registro.cp_num - registroparc.cp_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca cp_num: %', registro.cp_num - registroparc.cp_num;
											
			END IF;

			--multa_num
			IF registro.multa_num - registroparc.multa_num <> 0 AND
			   registro.multa_num - registroparc.multa_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET multa_num = multa_num + ' || (registro.multa_num - registroparc.multa_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;
				            
				raise notice 'diferenca multa_num: %', registro.multa_num - registroparc.multa_num;	
							                                                      
			END IF;

			--juros_num
			IF registro.juros_num - registroparc.juros_num <> 0 AND
			   registro.juros_num - registroparc.juros_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET juros_num = juros_num + ' || (registro.juros_num - registroparc.juros_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca juros_num: %', registro.juros_num - registroparc.juros_num;
								                                                      
			END IF;

			--despesas_num
			IF registro.despesas_num - registroparc.despesas_num <> 0 AND
			   registro.despesas_num - registroparc.despesas_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET despesas_num = despesas_num + ' || (registro.despesas_num - registroparc.despesas_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca despesas_num: %', registro.despesas_num - registroparc.despesas_num;
								                                                      
			END IF;

			--ho_num
			IF registro.ho_num - registroparc.ho_num <> 0 AND
			   registro.ho_num - registroparc.ho_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET ho_num = ho_num + ' || (registro.ho_num - registroparc.ho_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca ho_num: %', registro.ho_num - registroparc.ho_num;
								                                                      
			END IF;

			--comissionamento_num
			IF registro.comissionamento_num - registroparc.comissionamento_num <> 0 AND
			   registro.comissionamento_num - registroparc.comissionamento_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET comissionamento_num = comissionamento_num + ' || (registro.comissionamento_num - registroparc.comissionamento_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca comissionamento_num: %', registro.comissionamento_num - registroparc.comissionamento_num;
								                                                      
			END IF;
		END LOOP;
		
	END LOOP;

	RETURN '';
END;
$$;

--
-- TOC entry 1822 (class 1255 OID 26227)
-- Name: f_ajustaparcelamento_padrao(text, text, text, text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_ajustaparcelamento_padrao(tempcalculoparcela text, tempcalculoparcelamento text, scalculo text, plano text, idcontrato bigint, idparcela bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$

DECLARE
  registro            RECORD;
  registroparc        RECORD;
  idcalcpar           TEXT;

BEGIN
	FOR registro IN EXECUTE 'SELECT id_cbcalculoparcelaparcelamento_int 
                                   FROM ' || tempcalculoparcelamento || ' 
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND plano_acordo_int = ' || plano || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela || '
                                  ORDER BY data_vencimento_dat DESC LIMIT 1'
        LOOP
		idcalcpar = registro.id_cbcalculoparcelaparcelamento_int;
        END LOOP;

        RAISE NOTICE 'scalculo % ', scalculo;
	FOR registro IN EXECUTE 'SELECT SUM(valor_total_num) AS valor_parcelamento_num,
                                        SUM(desconto_num) AS desconto_num,
                                        SUM(principal_num) AS principal_num,
                                        SUM(cp_num) AS cp_num,
                                        SUM(multa_num) AS multa_num,
                                        SUM(juros_mora_num) AS juros_num,
                                        SUM(notificacao_num) AS despesas_num,
                                        SUM(honorarios_num) AS ho_num,
                                        SUM(comissionamento_num) comissionamento_num
                                   FROM ' || tempcalculoparcela || '
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela || '
                                 GROUP BY id_cbparcela_int'
	LOOP
		FOR registroparc IN EXECUTE 'SELECT SUM(valor_parcelamento_num) AS valor_parcelamento_num,
                                                    SUM(desconto_num) AS desconto_num,
                                                    SUM(principal_num) AS principal_num,
                                                    SUM(cp_num) AS cp_num,
                                                    SUM(multa_num) AS multa_num,
                                                    SUM(juros_num) AS juros_num,
                                                    SUM(despesas_num) AS despesas_num,
                                                    SUM(ho_num) AS ho_num,
                                                    SUM(comissionamento_num) comissionamento_num
                                               FROM ' || tempcalculoparcelamento || '
                                              WHERE plano_acordo_int = ' || plano || '
                                                AND id_cbcontrato_int = ' || idcontrato || '
						AND id_cbparcela_int = ' || idparcela || '
                                                AND id_cbcalculoparcela_int = ' || scalculo
		LOOP
			--valor_parcelamento_num
			IF registro.valor_parcelamento_num - registroparc.valor_parcelamento_num <> 0 AND
			   registro.valor_parcelamento_num - registroparc.valor_parcelamento_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET valor_parcelamento_num = valor_parcelamento_num + ' || (registro.valor_parcelamento_num - registroparc.valor_parcelamento_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca valor_parcelamento_num: %', registro.valor_parcelamento_num - registroparc.valor_parcelamento_num;
													                                                       
			END IF;

			--desconto_num
			IF registro.desconto_num - registroparc.desconto_num <> 0 AND
			   registro.desconto_num - registroparc.desconto_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET desconto_num = desconto_num + ' || (registro.desconto_num - registroparc.desconto_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca desconto_num: %', registro.desconto_num - registroparc.desconto_num;
								                                                      
			END IF;

			--principal_num
			IF registro.principal_num - registroparc.principal_num <> 0 AND 
			   registro.principal_num - registroparc.principal_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET principal_num = principal_num + ' || (registro.principal_num - registroparc.principal_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca principal_num: %', registro.principal_num - registroparc.principal_num;
								                                                      
			END IF;

			--cp_num
			IF registro.cp_num - registroparc.cp_num <> 0 AND
			   registro.cp_num - registroparc.cp_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET cp_num = cp_num + ' || (registro.cp_num - registroparc.cp_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca cp_num: %', registro.cp_num - registroparc.cp_num;
											
			END IF;

			--multa_num
			IF registro.multa_num - registroparc.multa_num <> 0 AND
			   registro.multa_num - registroparc.multa_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET multa_num = multa_num + ' || (registro.multa_num - registroparc.multa_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;
				            
				raise notice 'diferenca multa_num: %', registro.multa_num - registroparc.multa_num;	
							                                                      
			END IF;

			--juros_num
			IF registro.juros_num - registroparc.juros_num <> 0 AND
			   registro.juros_num - registroparc.juros_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET juros_num = juros_num + ' || (registro.juros_num - registroparc.juros_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca juros_num: %', registro.juros_num - registroparc.juros_num;
								                                                      
			END IF;

			--despesas_num
			IF registro.despesas_num - registroparc.despesas_num <> 0 AND
			   registro.despesas_num - registroparc.despesas_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET despesas_num = despesas_num + ' || (registro.despesas_num - registroparc.despesas_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca despesas_num: %', registro.despesas_num - registroparc.despesas_num;
								                                                      
			END IF;

			--ho_num
			IF registro.ho_num - registroparc.ho_num <> 0 AND
			   registro.ho_num - registroparc.ho_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET ho_num = ho_num + ' || (registro.ho_num - registroparc.ho_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca ho_num: %', registro.ho_num - registroparc.ho_num;
								                                                      
			END IF;

			--comissionamento_num
			IF registro.comissionamento_num - registroparc.comissionamento_num <> 0 AND
			   registro.comissionamento_num - registroparc.comissionamento_num > 0 THEN
				EXECUTE 'UPDATE ' || tempcalculoparcelamento || ' 
				            SET comissionamento_num = comissionamento_num + ' || (registro.comissionamento_num - registroparc.comissionamento_num) || '
				          WHERE plano_acordo_int = ' || plano || '
				            AND id_cbcalculoparcela_int = ' || scalculo || '
				            --AND id_cbcalculoparcelaparcelamento_int = ' || idcalcpar;

				raise notice 'diferenca comissionamento_num: %', registro.comissionamento_num - registroparc.comissionamento_num;
								                                                      
			END IF;
		END LOOP;
		
	END LOOP;

	RETURN '';
END;
$$;

--
-- TOC entry 1823 (class 1255 OID 26232)
-- Name: f_atualiza_registros_duplicados(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_atualiza_registros_duplicados() RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
	qtde		INT;
BEGIN
  
  	--Achar os CPFs duplicados da geqlcliente
  	CREATE TABLE geqlcliente_tmp AS
  		SELECT
  					RANK() OVER (PARTITION BY ABS_CPF(cpf_str) ORDER BY id_geqlcliente_int) AS Ranking
  				,	ABS_CPF(cpf_str) AS Cpf
  				,	id_geqlcliente_int AS ID
  			FROM
  				geqlcliente
  			WHERE
  				ABS_CPF(cpf_str) IN
  								(
  									SELECT
  											ABS_CPF(cpf_str) AS Cpf
  										FROM
  											geqlcliente
  										GROUP BY
  											ABS_CPF(Cpf_str)
  										HAVING
  											COUNT(1) > 1
  								)
  			GROUP BY
  					ABS_CPF(cpf_str)
  				,	id_geqlcliente_int;
  
  	CREATE TABLE geqlcliente_duplicados AS 
		SELECT
					a.Cpf
				,	a.ID AS ID_Antigo
				,	b.ID AS ID_Novo
			FROM
				(
					SELECT DISTINCT
								Cpf
							,	ID
						FROM
							geqlcliente_tmp
						WHERE
							Ranking = 1
				) a
			JOIN
				(
					SELECT DISTINCT
								Cpf
							,	ID
						FROM
							geqlcliente_tmp
						WHERE
							Ranking = 2
				) b
					ON (a.Cpf = b.Cpf);
  
  	--Atualiza os dados da geqlcontato, geqlemail, geqlendereco e geqlcontrato
  	FOR registro IN
  		EXECUTE
  			'
  				SELECT
  						*
  					FROM
  						geqlcliente_duplicados
  			'
  	LOOP
  		--geqlcontato
  		UPDATE
  				geqlcontato
  			SET
  				id_geqlcliente_int = registro.id_antigo
  			WHERE
					id_geqlcliente_int = registro.id_novo
				AND	fcformatatelefone(contato_str) IS NOT NULL;
  
  		--geqlemail
  		UPDATE
  				geqlemail
  			SET
  				id_geqlcliente_int = registro.id_antigo
  			WHERE
  				id_geqlcliente_int = registro.id_novo;
  
  		--geqlendereco
  		UPDATE
  				geqlendereco
  			SET
  				id_geqlcliente_int = registro.id_antigo
  			WHERE
  				id_geqlcliente_int = registro.id_novo;
  
  		--geqlcontrato
  		UPDATE
  				geqlcontrato
  			SET
  				id_geqlcliente_int = registro.id_antigo
  			WHERE
  				id_geqlcliente_int = registro.id_novo;

		--geqltratamento
  		UPDATE
  				geqltratamento
  			SET
  				id_geqlcliente_int = registro.id_antigo
  			WHERE
  				id_geqlcliente_int = registro.id_novo;
  
  	END LOOP;

	qtde := (SELECT COUNT(1) FROM geqlcliente_duplicados);

	--Drop de tabelas existentes
	DROP TABLE IF EXISTS geqlcliente_tmp;
	DROP TABLE IF EXISTS geqlcliente_duplicados;

	RETURN qtde::TEXT || ' CPFs duplicados';
END;
$$;

--
-- TOC entry 1824 (class 1255 OID 26241)
-- Name: f_atualiza_score(character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_atualiza_score(chave_str character varying) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
BEGIN
	RETURN NULL;
END;	
$$;

--
-- TOC entry 1825 (class 1255 OID 26245)
-- Name: f_atualizascore(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_atualizascore() RETURNS void
    LANGUAGE plpgsql
    AS $$
                    DECLARE
	                    intQtde	INT;
	                    intCorte	INT;
                    BEGIN

	                    intCorte = 10000;
	                    intQtde = ((SELECT COUNT(1) FROM tempScoreFinal WHERE rodou_bln = FALSE)/intCorte)+1;

	                    RAISE NOTICE 'intQtde: %', intQtde;

	                    FOR i IN 0..intQtde LOOP

		                    PERFORM dblink_exec(	'dbname=eleva'
						                    ,	'DROP TABLE IF EXISTS tempScoreLote;
                    CREATE TABLE
	                    tempScoreLote AS
		                    SELECT
					                    t.id_geqlcontato_int
				                    ,	t.score_int
				                    ,	t.data_score_dat
			                    FROM tempScoreFinal t
			                    WHERE t.rodou_bln = FALSE
			                    ORDER BY t.id_geqlcontato_int
			                    LIMIT ' || intCorte || ';
                        CREATE INDEX tempScoreLote_idx1
                          ON public.tempScoreLote
                          USING btree
                          (id_geqlcontato_int);');

		                    PERFORM dblink_exec(	'dbname=eleva'
						                    ,	'UPDATE geqlcontato tel
	                    SET
			                    score_int = s.score_int
		                    ,	data_score_dat = s.data_score_dat
	                    FROM tempScoreLote s
	                    WHERE s.id_geqlcontato_int = tel.id_geqlcontato_int;');

		                    PERFORM dblink_exec(	'dbname=eleva'
						                    ,	'UPDATE tempScoreFinal t
	                    SET rodou_bln = TRUE
	                    FROM tempScoreLote l
	                    WHERE t.id_geqlcontato_int = l.id_geqlcontato_int');
			

		                    RAISE NOTICE 'Finalizado %/%', i, intQtde;

	                    END LOOP;

                    END;
                    $$;

--
-- TOC entry 1826 (class 1255 OID 26254)
-- Name: f_basao_2_disseminar_email_cliente(integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_2_disseminar_email_cliente(idcliente integer) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
  clientes            RECORD;
  servidores	      RECORD;
  registro 	      RECORD;
  sql		      varchar;
  qtde		      integer;
BEGIN
	
	RAISE NOTICE 'Inicio Cliente %',idcliente;

	DROP TABLE IF EXISTS geqlemail_basao;

	CREATE TEMPORARY TABLE geqlemail_basao
	(
	  id_geqlcliente_int bigint,
	  cpf_str character varying(30),
	  geqltipoemail_str character varying(30),
	  email_str character varying(255),
	  classificacao_str character varying(15),
	  tabela_origem_str character varying(60),
	  tstamp timestamp with time zone DEFAULT now(),
	  id_gecliente_int bigint
	)
	WITH (
	  OIDS=FALSE
	);
	ALTER TABLE geqlemail_basao
	  OWNER TO postgres;

	-- Index: geqlemail_idx1

	-- DROP INDEX geqlemail_idx1;

	CREATE INDEX geqlemail_basao_idx1
	  ON geqlemail_basao
	  USING btree
	  (cpf_str);
	
	
	RAISE NOTICE 'Insert temporï¿½ria';
	INSERT INTO geqlemail_basao(id_geqlcliente_int, cpf_str, geqltipoemail_str, email_str, classificacao_str,tabela_origem_str, tstamp, id_gecliente_int)
	select distinct on (cpf_str,email_str) * from 
	dblink('dbname=dw port=5432 host=10.20.11.147 user=movera-user password=vnW7wuEz1p'::text,
	     '
		SELECT 
			geqlemail.id_geqlcliente_int, geqlemail.cpf_str, geqlemail.geqltipoemail_str, trim(lower(geqlemail.email_str)), 
			geqlemail.classificacao_str,geqlemail.tabela_origem_str, geqlemail.tstamp, geqlemail.id_gecliente_int
		FROM geqlemail,cpf_filtro
		where 
                geqlemail.cpf_str = cpf_filtro.cpf_str and
		id_gecliente_int <> ' || idcliente || ' and
		coalesce(email_str,'''') <> '''' and
		f_validaemail(email_str) = true 
	    '
	    )l(id_geqlcliente_int int8,cpf_str varchar,codigo_str varchar,email_str varchar,classificacao_str varchar,tabela_origem_str varchar,tstamp timestamp,id_gecliente_int int8)
	where exists (select 1 from geqlcliente t where t.cpf_str = l.cpf_str)
	order by cpf_str,email_str,classificacao_str;

	
	RAISE NOTICE 'Insert geqlemail';

	INSERT INTO geqlemail(
		    id_geqlcliente_int, id_geqltipoemail_int, email_str, 
		    classificacao_str, tabela_origem_str, id_geusuario_int, tstamp, 
		    observacao_str, nome_contato_str, id_geusuario_inclusao_int, id_gecliente_original_int )
	select * from
	(
		select distinct on (cpf_str,email_str)
			    (select t.id_geqlcliente_int from geqlcliente t where t.cpf_str =geqlemail_basao.cpf_str) as id_geqlcliente_int, 
			    coalesce((select t.id_geqltipoemail_int from geqltipoemail t where t.codigo_str = geqlemail_basao.geqltipoemail_str),4) as  id_geqltipoemail_int, 
			     email_str, 
			     classificacao_str, case when tabela_origem_str = '2.0' then '2.0' else 'basao' end, 1195, current_timestamp, 
			     'carteira origem: ' || id_gecliente_int::text, '', 1195, id_gecliente_int
		from geqlemail_basao
		order by cpf_str,email_str
	) as t
	where
	not exists (select 1 from geqlemail e 
		    where e.id_geqlcliente_int = t.id_geqlcliente_int 
		    and e.email_str = t.email_str);
	
	
	qtde := (select count(1) from geqlemail where (tabela_origem_str = 'basao' or tabela_origem_str = '2.0') and tstamp::date = current_date);
	
	RAISE NOTICE 'FIM Qtde: %',qtde;
	
	RETURN qtde::varchar;

END;
$$;

--
-- TOC entry 1827 (class 1255 OID 26261)
-- Name: f_basao_2_disseminar_telefone_cliente(integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_2_disseminar_telefone_cliente(idcliente integer) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
  clientes            RECORD;
  servidores	      RECORD;
  registro 	      RECORD;
  sql		      varchar;
  qtde		      integer;
BEGIN
	
	RAISE NOTICE 'Inicio Cliente 2 %',idcliente;
	
	DROP TABLE IF EXISTS geqlcontato_basao;

	CREATE  TABLE geqlcontato_basao
	(
	  id_geqlcliente_int bigint,
	  cpf_str character varying(30),
	  geqltipocontato_str character varying(30),
	  contato_str character varying(256),
	  classificacao_str character varying(15),
	  tabela_origem_str character varying(60),
	  tstamp timestamp with time zone DEFAULT now(),
	  id_gecliente_int bigint,
          score_int bigint,
          data_score_dat date
	)
	WITH (
	  OIDS=FALSE
	);
	ALTER TABLE geqlcontato_basao
	  OWNER TO postgres;

	-- Index: geqlcontato_idx1

	-- DROP INDEX geqlcontato_idx1;

	CREATE INDEX geqlcontato_basao_idx1
	  ON geqlcontato_basao
	  USING btree
	  (cpf_str);
	
	
	RAISE NOTICE 'Insert temporï¿½ria';
	INSERT INTO geqlcontato_basao(id_geqlcliente_int, cpf_str, geqltipocontato_str, contato_str,classificacao_str, tabela_origem_str, tstamp, id_gecliente_int, score_int, data_score_dat)
	select distinct on (cpf_str,contato_str) * from 
	      dblink('dbname=dw port=5432 host=10.20.11.147 user=movera-user password=vnW7wuEz1p'::text,
		     '
			SELECT geqlcontato.id_geqlcliente_int, geqlcontato.cpf_str, geqlcontato.geqltipocontato_str, 
                        geqlcontato.contato_str,geqlcontato.classificacao_str, geqlcontato.tabela_origem_str, geqlcontato.tstamp, 
                        geqlcontato.id_gecliente_int, geqlcontato.score_int, geqlcontato.data_score_dat
			FROM geqlcontato,cpf_filtro
			where  
                        geqlcontato.cpf_str = cpf_filtro.cpf_str and
			coalesce(contato_str,'''') <> '''' 
		    '
		    )l(id_geqlcliente_int int8,cpf_str varchar,codigo_str varchar,contato_str varchar,classificacao_str varchar,tabela_origem_str varchar,tstamp timestamp,id_gecliente_int int8, score_int bigint, data_score_dat date)
	where 	exists (select 1 from geqlcliente t where t.cpf_str = l.cpf_str)
	order by cpf_str,contato_str,classificacao_str;

	RAISE NOTICE 'Insert geqlcontato';

	INSERT INTO geqlcontato(id_geqlcliente_int,id_geqltipocontato_int, contato_str, 
                                classificacao_str, tabela_origem_str, observacao_str,
                                score,data_score_dat,
		                id_geusuario_int, tstamp, tstamp_inclusao, 
                                id_geusuario_inclusao_int, id_gecliente_original_int )
	select * from
	(
		select distinct on (cpf_str,contato_str)
		       (select max(t.id_geqlcliente_int) from geqlcliente t where t.cpf_str =geqlcontato_basao.cpf_str) as id_geqlcliente_int, 
		       coalesce((select t.id_geqltipocontato_int from geqltipocontato t where t.codigo_str = geqlcontato_basao.geqltipocontato_str limit 1),1) as  id_geqltipocontato_int, 
			contato_str, classificacao_str, 
			case when tabela_origem_str = '2.0' then '2.0' else 'basao' end as tabela_origem_str, 
                        'basao novo carteira origem: ' || id_gecliente_int::text,
                        score_int,data_score_dat,  
			1195, current_timestamp, current_timestamp, 1195, id_gecliente_int
		from geqlcontato_basao
		order by cpf_str,contato_str
	) as t
	where
	not exists (select 1 from geqlcontato e 
		    where e.id_geqlcliente_int = t.id_geqlcliente_int 
		    and e.contato_str = t.contato_str);
	
	qtde := (select count(1) from geqlcontato where (tabela_origem_str = 'basao' or tabela_origem_str = '2.0') and tstamp::date = current_date);

	RAISE NOTICE 'Atualiza Score';
	update geqlcontato set 
			score = geqlcontato_basao.score_int,
			data_score_dat = geqlcontato_basao.data_score_dat
	from geqlcontato_basao, geqlcliente
	where
	geqlcontato.id_geqlcliente_int = geqlcliente.id_geqlcliente_int and
        geqlcliente.cpf_str  = geqlcontato_basao.cpf_str and
	geqlcontato.contato_str = geqlcontato_basao.contato_str and
	coalesce(geqlcontato.score,-99) <> coalesce(geqlcontato_basao.score_int,-99);
	
	DROP TABLE IF EXISTS geqlcontato_basao;

	RAISE NOTICE 'FIM Qtde: %',qtde;
	
	RETURN qtde::varchar;

END;
$$;

--
-- TOC entry 1828 (class 1255 OID 26267)
-- Name: f_basao_2_disseminar_telefone_cliente_26062017(integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_2_disseminar_telefone_cliente_26062017(idcliente integer) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
  clientes            RECORD;
  servidores	      RECORD;
  registro 	      RECORD;
  sql		      varchar;
  qtde		      integer;
BEGIN
	
	RAISE NOTICE 'Inicio Cliente 2 %',idcliente;
	
	DROP TABLE IF EXISTS geqlcontato_basao;

	CREATE  TABLE geqlcontato_basao
	(
	  id_geqlcliente_int bigint,
	  cpf_str character varying(30),
	  geqltipocontato_str character varying(30),
	  contato_str character varying(256),
	  classificacao_str character varying(15),
	  tabela_origem_str character varying(60),
	  tstamp timestamp with time zone DEFAULT now(),
	  id_gecliente_int bigint,
          score_int bigint,
          data_score_dat date
	)
	WITH (
	  OIDS=FALSE
	);
	ALTER TABLE geqlcontato_basao
	  OWNER TO postgres;

	-- Index: geqlcontato_idx1

	-- DROP INDEX geqlcontato_idx1;

	CREATE INDEX geqlcontato_basao_idx1
	  ON geqlcontato_basao
	  USING btree
	  (cpf_str);
	
	
	RAISE NOTICE 'Insert temporï¿½ria';
	INSERT INTO geqlcontato_basao(id_geqlcliente_int, cpf_str, geqltipocontato_str, contato_str,classificacao_str, tabela_origem_str, tstamp, id_gecliente_int, score_int, data_score_dat)
	select distinct on (cpf_str,contato_str) * from 
	      dblink('dbname=dw port=5432 host=10.20.11.135 user=dw-user password=fohR4kuTahngahr8Ga5h'::text,
		     '
			SELECT geqlcontato.id_geqlcliente_int, geqlcontato.cpf_str, geqlcontato.geqltipocontato_str, 
                        geqlcontato.contato_str,geqlcontato.classificacao_str, geqlcontato.tabela_origem_str, geqlcontato.tstamp, 
                        geqlcontato.id_gecliente_int, geqlcontato.score_int, geqlcontato.data_score_dat
			FROM geqlcontato,cpf_filtro
			where  
                        geqlcontato.cpf_str = cpf_filtro.cpf_str and
			coalesce(contato_str,'''') <> '''' 
		    '
		    )l(id_geqlcliente_int int8,cpf_str varchar,codigo_str varchar,contato_str varchar,classificacao_str varchar,tabela_origem_str varchar,tstamp timestamp,id_gecliente_int int8, score_int bigint, data_score_dat date)
	where 	exists (select 1 from geqlcliente t where t.cpf_str = l.cpf_str)
	order by cpf_str,contato_str,classificacao_str;

	RAISE NOTICE 'Insert geqlcontato';

	INSERT INTO geqlcontato(id_geqlcliente_int,id_geqltipocontato_int, contato_str, 
                                classificacao_str, tabela_origem_str, observacao_str,
                                score,data_score_dat,
		                id_geusuario_int, tstamp, tstamp_inclusao, 
                                id_geusuario_inclusao_int, id_gecliente_original_int )
	select * from
	(
		select distinct on (cpf_str,contato_str)
		       (select max(t.id_geqlcliente_int) from geqlcliente t where t.cpf_str =geqlcontato_basao.cpf_str) as id_geqlcliente_int, 
		       coalesce((select t.id_geqltipocontato_int from geqltipocontato t where t.codigo_str = geqlcontato_basao.geqltipocontato_str limit 1),1) as  id_geqltipocontato_int, 
			contato_str, classificacao_str, 
			case when tabela_origem_str = '2.0' then '2.0' else 'basao' end as tabela_origem_str, 
                        'basao novo carteira origem: ' || id_gecliente_int::text,
                        score_int,data_score_dat,  
			1195, current_timestamp, current_timestamp, 1195, id_gecliente_int
		from geqlcontato_basao
		order by cpf_str,contato_str
	) as t
	where
	not exists (select 1 from geqlcontato e 
		    where e.id_geqlcliente_int = t.id_geqlcliente_int 
		    and e.contato_str = t.contato_str);
	
	qtde := (select count(1) from geqlcontato where (tabela_origem_str = 'basao' or tabela_origem_str = '2.0') and tstamp::date = current_date);

	RAISE NOTICE 'Atualiza Score';
	update geqlcontato set 
			score = geqlcontato_basao.score_int,
			data_score_dat = geqlcontato_basao.data_score_dat
	from geqlcontato_basao, geqlcliente
	where
	geqlcontato.id_geqlcliente_int = geqlcliente.id_geqlcliente_int and
        geqlcliente.cpf_str  = geqlcontato_basao.cpf_str and
	geqlcontato.contato_str = geqlcontato_basao.contato_str and
	coalesce(geqlcontato.score,0) <> coalesce(geqlcontato_basao.score_int,0);
	
	DROP TABLE IF EXISTS geqlcontato_basao;

	RAISE NOTICE 'FIM Qtde: %',qtde;
	
	RETURN qtde::varchar;

END;
$$;

--
-- TOC entry 1829 (class 1255 OID 26274)
-- Name: f_basao_2_disseminar_telefone_cliente_old(integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_2_disseminar_telefone_cliente_old(idcliente integer) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
  clientes            RECORD;
  servidores	      RECORD;
  registro 	      RECORD;
  sql		      varchar;
  qtde		      integer;
BEGIN
	
	RAISE NOTICE 'Inicio Cliente %',idcliente;
	
	DROP TABLE IF EXISTS geqlcontato_basao;

	CREATE TEMPORARY TABLE geqlcontato_basao
	(
	  id_geqlcliente_int bigint,
	  cpf_str character varying(30),
	  geqltipocontato_str character varying(30),
	  contato_str character varying(256),
	  classificacao_str character varying(15),
	  tabela_origem_str character varying(60),
	  tstamp timestamp with time zone DEFAULT now(),
	  id_gecliente_int bigint
	)
	WITH (
	  OIDS=FALSE
	);
	ALTER TABLE geqlcontato_basao
	  OWNER TO postgres;

	-- Index: geqlcontato_idx1

	-- DROP INDEX geqlcontato_idx1;

	CREATE INDEX geqlcontato_basao_idx1
	  ON geqlcontato_basao
	  USING btree
	  (cpf_str);
	
	
	RAISE NOTICE 'Insert temporï¿½ria';
	INSERT INTO geqlcontato_basao(id_geqlcliente_int, cpf_str, geqltipocontato_str, contato_str,classificacao_str, tabela_origem_str, tstamp, id_gecliente_int)
	select distinct on (cpf_str,contato_str) * from 
	      dblink('dbname=dw port=5432 host=10.20.10.202 user=postgres password=c4Poqdkn'::text,
		     '
			SELECT id_geqlcliente_int, cpf_str, geqltipocontato_str, contato_str,classificacao_str, tabela_origem_str, tstamp, id_gecliente_int
			FROM geqlcontato
			where  
                        geqlcontato.cpf_str = cpf_filtro.cpf_str and
			id_gecliente_int <> ' || idcliente || ' and
			coalesce(contato_str,'''') <> '''' 
		    '
		    )l(id_geqlcliente_int int8,cpf_str varchar,codigo_str varchar,contato_str varchar,classificacao_str varchar,tabela_origem_str varchar,tstamp timestamp,id_gecliente_int int8)
	where 	exists (select 1 from geqlcliente t where t.cpf_str = l.cpf_str)
	order by cpf_str,contato_str,classificacao_str;

	RAISE NOTICE 'Insert geqlcontato';

	INSERT INTO geqlcontato(id_geqlcliente_int,id_geqltipocontato_int, contato_str, 
                                classificacao_str, tabela_origem_str, observacao_str,
		                id_geusuario_int, tstamp, tstamp_inclusao, 
                                id_geusuario_inclusao_int, id_gecliente_original_int )
	select * from
	(
		select distinct on (cpf_str,contato_str)
		       (select max(t.id_geqlcliente_int) from geqlcliente t where t.cpf_str =geqlcontato_basao.cpf_str) as id_geqlcliente_int, 
		       coalesce((select t.id_geqltipocontato_int from geqltipocontato t where t.codigo_str = geqlcontato_basao.geqltipocontato_str limit 1),1) as  id_geqltipocontato_int, 
			contato_str, classificacao_str, 
			case when tabela_origem_str = '2.0' then '2.0' else 'basao' end as tabela_origem_str, 
                        'basao novo carteira origem: ' || id_gecliente_int::text,
			1195, current_timestamp, current_timestamp, 1195, id_gecliente_int
		from geqlcontato_basao
		order by cpf_str,contato_str
	) as t
	where
	not exists (select 1 from geqlcontato e 
		    where e.id_geqlcliente_int = t.id_geqlcliente_int 
		    and e.contato_str = t.contato_str);
	
	
	qtde := (select count(1) from geqlcontato where (tabela_origem_str = 'basao' or tabela_origem_str = '2.0') and tstamp::date = current_date);
	
	DROP TABLE IF EXISTS geqlcontato_basao;

	RAISE NOTICE 'FIM Qtde: %',qtde;
	
	RETURN qtde::varchar;

END;
$$;

--
-- TOC entry 1830 (class 1255 OID 26277)
-- Name: f_basao_atualiza_score_telefones_carteiras(integer, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_atualiza_score_telefones_carteiras(idgecliente integer, dataultscore text, nomebanco text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro		RECORD;
  tSqlF			TEXT;
  horaInicioSelectDW	TIME(0);    
  horaFimSelectDW	TIME(0);
  horaInicioUpdateBase	TIME(0);    
  horaFimUpdateBase	TIME(0);
  registro2 		record;
  cont 			int;
  max 			int;
  
BEGIN
	
	tSqlF := '';
	
	horaInicioSelectDW = clock_timestamp();
	RAISE NOTICE 'Inicio Select DW: %',horaInicioSelectDW;
	
	tSqlF := '' ||
	'
	WITH dblink_dw AS(
		SELECT * FROM dblink(''dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv ''::text,

	''
		SELECT 
			c.id_gecliente_int, 
			abs_cpf(c.cpf_str) as cpf_str,
			g.contato_str,
			g.score_int,
			g.data_score_dat
		FROM geqlcontato g
		JOIN cbcontrato c ON (c.cpf_str = g.cpf_str)
		WHERE g.data_score_dat >= to_date(''''' || dataUltScore || ''''', ''''DD/MM/YYYY hh24:mi:ss'''')
		--AND c.id_gecliente_int = ' || idgecliente || ' 

	'') l (				
		id_gecliente_int	int,
		cpf_str			text,
		contato_str		character varying(60),
		score_int		text,
		data_score_dat		date
	))
	SELECT
	    DISTINCT
		qc.id_geqlcontato_int
	,    	tmp.score_int
	,    	tmp.data_score_dat
	FROM
		dblink_dw tmp
	INNER JOIN
		geqlcliente gl ON (ABS_CPF(gl.cpf_str) = tmp.cpf_str)
	INNER JOIN
		geqlcontato qc ON (qc.id_geqlcliente_int = gl.id_geqlcliente_int AND qc.contato_str = tmp.contato_str)
	WHERE
		tmp.data_score_dat > qc.data_score_dat';
											
	EXECUTE 'CREATE TEMPORARY TABLE tmp_atualiza_score_telefones AS ' || tSqlF;		
	EXECUTE 'CREATE INDEX idx_tmp_atualiza_score_telefones_01 ON tmp_atualiza_score_telefones(id_geqlcontato_int);';

	horaFimSelectDW = clock_timestamp();
	RAISE NOTICE 'Fim Select DW: %',horaFimSelectDW;

	horaInicioUpdateBase = clock_timestamp();
	RAISE NOTICE 'Inicio Update Base: %',horaInicioUpdateBase;	

	-- Update Score
	cont :=0;
	SELECT COUNT(1) INTO max FROM tmp_atualiza_score_telefones;
	FOR registro2 IN SELECT 
				id_geqlcontato_int
			,    	score_int
			,    	data_score_dat
			FROM
				tmp_atualiza_score_telefones
	LOOP

		tSqlF := 'UPDATE geqlcontato SET
			score_int = '||registro2.score_int::bigint ||',
			data_score_dat = ''' || registro2.data_score_dat ||'''		
		WHERE 
			id_geqlcontato_int = '|| registro2.id_geqlcontato_int || '';
		
		RAISE NOTICE ' =========INICIO % ==============FINAL %  ', cont, max;

		PERFORM dblink_exec('dbname=' || nomebanco, '' || tSqlF || '');
                --execute ssql;

                cont := cont + 1;
	END LOOP;

		
	horaFimUpdateBase = clock_timestamp();
	RAISE NOTICE 'Fim Update Base: %',horaFimUpdateBase;
	
	EXECUTE 'DROP TABLE tmp_atualiza_score_telefones';

	-- Gera log na eslogdw no servidor 10.20.11.147 base dw
	PERFORM 
		dblink_exec
			(
				'dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv '
			,	'INSERT INTO eslogdw(
					    id_estipologdw_int, 
						id_gecliente_int, 
						data_log_dat, 
						inicio_tim, 
						fim_tim)
				 VALUES (6,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioUpdateBase || ''', 
					''' || horaFimUpdateBase || ''') '
			);
	
	RETURN '';

END;
$$;

--
-- TOC entry 1831 (class 1255 OID 26283)
-- Name: f_basao_atualizafila(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_atualizafila(lote_int bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
  DECLARE
  	registro 	RECORD;        
  BEGIN
  	FOR registro IN EXECUTE 'SELECT f.id_geqlbasaofila_int,
                                          f.id_geqlcliente_int,
                                          c.id_geqlcontato_int,
                                          e.id_geqlemail_int
                                     FROM geqlbasaofila f
                                     LEFT JOIN geqlcontato c
                                       ON c.id_geqlcliente_int = f.id_geqlcliente_int
                                      AND c.contato_str = f.telefone_str
                                     LEFT JOIN geqlemail e
                                       ON e.id_geqlcliente_int = f.id_geqlcliente_int
                                      AND e.email_str = f.email_str
                                    WHERE lote_int = ' || lote_int
  	LOOP
  		--Atualiza geqlcontato
                  IF registro.id_geqlcontato_int IS NOT NULL THEN
  			EXECUTE 'UPDATE geqlcontato SET tstamp_envio = CURRENT_DATE WHERE id_geqlcontato_int = ' || registro.id_geqlcontato_int;
  		END IF;
  		--Atualiza geqlemail
                  IF registro.id_geqlemail_int IS NOT NULL THEN
  			EXECUTE 'UPDATE geqlemail SET tstamp_envio = CURRENT_DATE WHERE id_geqlemail_int = ' || registro.id_geqlemail_int;
  		END IF;
  		--Atualiza fila
  		EXECUTE 'UPDATE geqlbasaofila SET id_transmite_str = ''E'' WHERE id_geqlbasaofila_int = ' || registro.id_geqlbasaofila_int;
  	END LOOP;
  
  	
  
  	RETURN '';
  
  END;
  $$;

--
-- TOC entry 1832 (class 1255 OID 26292)
-- Name: f_basao_atualizageqlcliente(text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_atualizageqlcliente(cpf text, idpessoa bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
	idgeqlcliente   TEXT;
BEGIN
	FOR registro IN EXECUTE 'SELECT id_geqlcliente_int
	                           FROM geqlcliente
                                  WHERE ABS_CPF(cpf_str) = ''' || cpf || ''''
	LOOP
		EXECUTE 'UPDATE geqlcliente SET id_pessoa_int = ' || idpessoa || '
                                                 WHERE id_geqlcliente_int = ' || registro.id_geqlcliente_int;
		idgeqlcliente = registro.id_geqlcliente_int;
	END LOOP;

	RETURN idgeqlcliente;

END;
$$;

--
-- TOC entry 1833 (class 1255 OID 26294)
-- Name: f_basao_busca_fila(text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_busca_fila(carteira text, quantidade bigint, lotep bigint) RETURNS SETOF refcursor
    LANGUAGE plpgsql
    AS $$
    DECLARE
      pessoafisica    refcursor;
      pessoajuridica  refcursor;
      pessoatelefone  refcursor;                            
      pessoaemail     refcursor;
      loteInt         BIGINT;
      registro        RECORD;
      totalPaginacao  BIGINT;
    BEGIN
      
                IF COALESCE(loteP, 0) = 0 THEN

                               -- verifica se existem registros pendentes 
                               -- o suficiente para retornar a quantidade solicitada
                               --SELECT COUNT(1) INTO totalPaginacao 
                               SELECT SUM(CASE WHEN tstamp::date < current_date THEN quantidade 
                                               ELSE 1
                                          END) INTO totalPaginacao 
                               FROM geqlbasaofila b
                               WHERE 
                                               COALESCE(b.id_transmite_str, '') = ''
                                               AND COALESCE(b.lote_int,0) = 0;

                               -- se existirem registros suficientes realiza o fluxo normal
                               IF totalPaginacao >= COALESCE (quantidade, 0) THEN
                               
                                               loteInt = (SELECT NEXTVAL('lotebasao_seq'));

                                               IF COALESCE (quantidade, 0) > 0 THEN
                                                               EXECUTE 'UPDATE geqlbasaofila SET lote_int = ' || loteInt || ' 
                                                                                                                  WHERE id_geqlcliente_int IN (SELECT DISTINCT b.id_geqlcliente_int                                      
                                                                                                                                                                                FROM geqlbasaofila b
                                                                                                                                                                               WHERE COALESCE(b.id_transmite_str, '''') = ''''
                                                                                                                                                                                 AND COALESCE(lote_int,0) = 0
                                                                                                                                                                               LIMIT ' || quantidade || ')';
                                                               
                                               ELSE
                                                               EXECUTE 'UPDATE geqlbasaofila SET lote_int = ' || loteInt || ' 
                                                                                                                  WHERE COALESCE(id_transmite_str, '''') = '''' 
                                                                                                                    AND COALESCE(lote_int,0) = 0';
                                               END IF;
                               ELSE
                                               loteInt = 0;
                               END IF;
        ELSE
                               loteInt = loteP;
                END IF;

                OPEN pessoafisica FOR SELECT DISTINCT ON (b.id_geqlcliente_int) '1'::TEXT AS tiporegistro,       
                                   b.id_geqlcliente_int AS idpessoa,
                                   b.nome_str AS nome,
                                   regexp_replace(b.cpf_tratado_str, '[^0-9]', '', 'g') AS cpf,
                                   b.dt_nascimento_dat AS datanascimento,
                                   regexp_replace(b.rg_str, '[^0-9]', '', 'g') AS rg,
                                   NULL::TEXT AS datafalecimento,
                                   b.sexo_str AS sexo,
                                   '0'::TEXT AS estadocivil, 
                                   b.lote_int AS lote
                              FROM geqlbasaofila b
                             WHERE b.tipo_pessoa_str = 'F'
                               AND COALESCE(b.id_transmite_str, '') = ''
                               AND lote_int = loteInt;
                RETURN NEXT pessoafisica;

                OPEN pessoajuridica FOR SELECT DISTINCT ON (b.id_geqlcliente_int) '2'::TEXT AS tiporegistro,       
                                     b.id_geqlcliente_int AS idpessoa,
                                     b.nome_str AS nome,
                                     regexp_replace(b.cpf_tratado_str, '[^0-9]', '', 'g') AS cnpj,
                                     NULL::TEXT AS ie,
                                     b.nome_str AS nomefantasia,
                                     NULL::TEXT AS dataabertura,
                                     NULL::TEXT AS datafechamento,
                                     b.lote_int AS lote
                                FROM geqlbasaofila b
                               WHERE b.tipo_pessoa_str = 'J'
                                 AND COALESCE(b.id_transmite_str, '') = ''
                                 AND lote_int = loteInt;
                RETURN NEXT pessoajuridica;

                OPEN pessoatelefone FOR SELECT DISTINCT ON (b.id_geqlcliente_int, b.telefone_str) '3'::TEXT AS tiporegistro,       
                                       b.id_geqlcliente_int AS idpessoa,
                                       regexp_replace(b.telefone_str, '[^0-9]', '', 'g') AS telefone,
                                       b.cpf_usuario_str AS cpf_cnpj_usuario,
                                       b.nome_usuario_str AS nome_usuario,
                                       CASE WHEN b.classificacao = 3 THEN NULL
                                            ELSE b.classificacao
                                       END AS classificacao
                                  FROM geqlbasaofila b
                                 WHERE COALESCE(b.id_transmite_str, '') = ''
                                   AND COALESCE(b.telefone_str, '') <> ''
                                   AND lote_int = loteInt;
                RETURN NEXT pessoatelefone;

                OPEN pessoaemail FOR SELECT DISTINCT ON (b.id_geqlcliente_int, b.telefone_str) '4'::TEXT AS tiporegistro,       
                                    b.id_geqlcliente_int AS idpessoa,
                                    b.email_str AS email,
                                    b.cpf_usuario_str AS cpf_cnpj_usuario,
                                    b.nome_usuario_str AS nome_usuario,
                                    CASE WHEN b.classificacao = 3 THEN NULL
                                         ELSE b.classificacao
                                    END AS classificacao
                               FROM geqlbasaofila b
                              WHERE COALESCE(b.id_transmite_str, '') = ''
                                AND COALESCE(b.email_str, '') <> ''
                                AND lote_int = loteInt;
                RETURN NEXT pessoaemail;
    END;
    $$;

--
-- TOC entry 1834 (class 1255 OID 26301)
-- Name: f_basao_dw(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_dw() RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro	RECORD;
	tSql		TEXT;
BEGIN
	--Drop da tabela temporaria da geqlcontato
	DROP TABLE IF EXISTS tmp_geqlcontato;

	--Criar a tabela temporaria da geqlcontato
	CREATE TABLE tmp_geqlcontato
		(
			cpf_str			VARCHAR(30)
		,	contato_str		VARCHAR(256)
		,	geqltipocontato_str	VARCHAR(10)
		,	score_int			INT
		,	data_score_dat		DATE
		);

	--Insere os telefones da geqlcontato do dw que tem o CPF nesta carteira e a situaï¿½ï¿½o estï¿½ diferente de 6 (Baixado)
	INSERT INTO tmp_geqlcontato
		SELECT
				*
			FROM
				dblink
					(
						'dbname=dw port=5432 host=10.20.11.147 user=movera-user password=vnW7wuEz1p'
					,	'SELECT
									gtel.cpf_str
								,	gtel.contato_str
								,	gtel.geqltipocontato_str
								,	gtel.score_int
								,	gtel.data_score_dat
							FROM
								geqlcontato_teste gtel
							JOIN
								cpf_filtro_basao cfb ON (gtel.cpf_str = cfb.cpf_str)'
					) AS t
						(
							cpf_str			VARCHAR(30)
						,	contato_str		VARCHAR(256)
						,	geqltipocontato_str	VARCHAR(10)
						,	score_int			INT
						,	data_score_dat		DATE
						);

	--Faz o Select para fazer o insert na geqlcontato (apenas onde estiver na temporï¿½ria da geqlcontato e nï¿½o estiver na geqlcontato)
	tSql:= '
			SELECT
						gcli.id_geqlcliente_int AS id_geqlcliente_int
					,	gtc.id_geqltipocontato_int AS id_geqltipocontato_int
					,	TRIM(tg.contato_str) AS contato_str
					,	''9 - Indefinido'' AS classificacao_str
					,	''Basao'' AS tabela_origem_str
					,	tg.score_int AS score_int
					,	tg.data_score_dat AS data_score_dat
					,	1195 AS id_geusuario_int
					,	CURRENT_TIMESTAMP AS tstamp
					,	CURRENT_TIMESTAMP AS tstamp_inclusao
					,	1195 AS id_geusuario_inclusao_int
				FROM
					tmp_geqlcontato tg
				JOIN
					geqltipocontato gtc ON (gtc.codigo_str = tg.geqltipocontato_str)
				JOIN
					geqlcliente gcli ON (tg.cpf_str = ABS_CPF(gcli.cpf_str))
				LEFT JOIN
					geqlcontato gtel ON (gcli.id_geqlcliente_int = gtel.id_geqlcliente_int AND tg.contato_str = gtel.contato_str)
				WHERE
						gtel.id_geqlcliente_int IS NULL
					AND	gtel.contato_str IS NULL;
		';

	--Faz o insert na tabela geqlcontato do Select feito acima. Feito em modo de Loop devido ï¿½s triggers, pois ficam ias lento se fazer tudo de uma vez.
	FOR registro IN
		EXECUTE
			tSql
	LOOP
		INSERT INTO
			geqlcontato
				(
					id_geqlcliente_int
				,	id_geqltipocontato_int
				,	contato_str
				,	classificacao_str
				,	tabela_origem_str
				,	score
				,	data_score_dat
				,	id_geusuario_int
				,	tstamp
				,	tstamp_inclusao
				,	id_geusuario_inclusao_int
				)
			VALUES
				(
					registro.id_geqlcliente_int
				,	registro.id_geqltipocontato_int
				,	registro.contato_str
				,	registro.classificacao_str
				,	registro.tabela_origem_str
				,	registro.score_int
				,	registro.data_score_dat
				,	registro.id_geusuario_int
				,	registro.tstamp
				,	registro.tstamp_inclusao
				,	registro.id_geusuario_inclusao_int
				);
	END LOOP;

	--Faz o Select para fazer o update na geqlcontato (apenas se a data do score for diferente OU se o score da geqlcontato for vazio e o da temporaria da geqlcontato nï¿½o)
	tSql := '
			SELECT
						gcli.id_geqlcliente_int
					,	gtel.contato_str
					,	tg.score_int
					,	tg.data_score_dat
				FROM
					tmp_geqlcontato tg
				JOIN
					geqlcliente gcli ON (tg.cpf_str = ABS_CPF(gcli.cpf_str))
				JOIN
					geqlcontato gtel ON (gcli.id_geqlcliente_int = gtel.id_geqlcliente_int AND tg.contato_str = gtel.contato_str)
				WHERE
						gtel.data_score_dat != tg.data_score_dat
					OR	(
							gtel.score_int IS NULL
						AND	tg.score_int IS NOT NULL
						);
		';

	--Faz o update na tabela geqlcontato do Select feito acima. Feito em modo de Loop devido ï¿½s triggers, pois ficam ias lento se fazer tudo de uma vez.
	FOR registro IN
		EXECUTE
			tSql
	LOOP
		UPDATE
				geqlcontato
			SET
					score_int = registro.score_int
				,	data_score_dat = registro.data_score_dat
			WHERE
					id_geqlcliente_int = registro.id_geqlcliente_int
				AND	contato_str = registro.contato_str;
	END LOOP;

	RETURN 'OK';

END;
$$;

--
-- TOC entry 1835 (class 1255 OID 26302)
-- Name: f_basao_geqlcontato(bigint, text, bigint, text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_geqlcontato(idgeqlcliente bigint, contato text, idpessoatelefone bigint, nome text, score bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
        idgeqlcontato   BIGINT;
BEGIN
	idgeqlcontato = 0;
	FOR registro IN EXECUTE 'SELECT id_geqlcontato_int
                                   FROM geqlcontato 
                                  WHERE id_geqlcliente_int = ' || idgeqlcliente || '
                                    AND contato_str = ''' || contato || ''''
	LOOP
		idgeqlcontato = registro.id_geqlcontato_int;
		EXECUTE 'UPDATE geqlcontato SET id_pessoa_telefone_int = ' || idpessoatelefone || ',
                                                score_int = ' || score || ',
                                                tstamp_retorno = CURRENT_TIMESTAMP
                                          WHERE id_geqlcontato_int = ' || registro.id_geqlcontato_int;
	END LOOP;

	--CASO Nï¿½O EXISTE INSERE UM NOVO CONTATO
	IF idgeqlcontato = 0 THEN
		EXECUTE 'INSERT INTO geqlcontato (id_geqlcliente_int, 
                                                  id_geqltipocontato_int, 
                                                  contato_str, 
                                                  classificacao_str, 
                                                  nome_contato_str,  
                                                  tabela_origem_str,
                                                  id_pessoa_telefone_int,
                                                  score_int,
                                                  tstamp_retorno,
                                                  tstamp_inclusao,
                                                  observacao_str) 
                                           VALUES(' || idgeqlcliente || ', 
                                                  (SELECT id_geqltipocontato_int
                                                     FROM geqltipocontato
	                                            WHERE codigo_str LIKE ''RES%'' 
                                                    LIMIT 1),
						 ''' || contato || ''',
                                                 ''9 - Indefinido'',
                                                 ''' || nome || ''',
                                                 ''basao'',
				                 ' || idpessoatelefone || ',
                                                 ' || score || ',
                                                 CURRENT_TIMESTAMP,
                                                 CURRENT_TIMESTAMP,
                                                 ''BasaoU'')';
	END IF;

	RETURN '';

END;
$$;

--
-- TOC entry 1836 (class 1255 OID 26311)
-- Name: f_basao_geqlcontato(bigint, text, bigint, text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_geqlcontato(idgeqlcliente bigint, contato text, idpessoatelefone bigint, nome text, score bigint, classificacao bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
        idgeqlcontato   BIGINT;
        classificacao_str TEXT;
BEGIN
	idgeqlcontato = 0;
        
	IF COALESCE(classificacao,0) = 0 OR COALESCE(classificacao,0) = 3 THEN
		classificacao_str = '9 - Indefinido';
        END IF;
        IF COALESCE(classificacao,0) = 1 THEN
		classificacao_str = '1 - Excelente';
        END IF;
        IF COALESCE(classificacao,0) = 2 THEN
		classificacao_str = '2 - Bom';
        END IF;
        IF COALESCE(classificacao,0) = 4 THEN
		classificacao_str = '3 - Ruim';
        END IF;
        
	FOR registro IN EXECUTE 'SELECT id_geqlcontato_int
                                   FROM geqlcontato 
                                  WHERE id_geqlcliente_int = ' || idgeqlcliente || '
                                    AND contato_str = ''' || contato || ''''
	LOOP
		idgeqlcontato = registro.id_geqlcontato_int;
		EXECUTE 'UPDATE geqlcontato SET id_pessoa_telefone_int = ' || idpessoatelefone || ',
                                                score_int = ' || score || ',
                                                tstamp_retorno = CURRENT_TIMESTAMP
                                                --classificacao_str = ''' || classificacao_str || '''
                                          WHERE id_geqlcontato_int = ' || registro.id_geqlcontato_int;
	END LOOP;

	--CASO Nï¿½O EXISTE INSERE UM NOVO CONTATO
	IF idgeqlcontato = 0 THEN
		EXECUTE 'INSERT INTO geqlcontato (id_geqlcliente_int, 
                                                  id_geqltipocontato_int, 
                                                  contato_str, 
                                                  classificacao_str, 
                                                  nome_contato_str,  
                                                  tabela_origem_str,
                                                  id_pessoa_telefone_int,
                                                  score_int,
                                                  tstamp_retorno,
                                                  tstamp_inclusao,
                                                  observacao_str) 
                                           VALUES(' || idgeqlcliente || ', 
                                                  (SELECT id_geqltipocontato_int
                                                     FROM geqltipocontato
	                                            WHERE codigo_str LIKE ''RES%'' 
                                                    LIMIT 1),
						 ''' || contato || ''',
                                                 ''' || classificacao_str || ''',
                                                 ''' || nome || ''',
                                                 ''basao'',
				                 ' || idpessoatelefone || ',
                                                 ' || score || ',
                                                 CURRENT_TIMESTAMP,
                                                 CURRENT_TIMESTAMP,
                                                 ''BasaoU'')';
	END IF;

	RETURN '';

END;
$$;

--
-- TOC entry 1837 (class 1255 OID 26313)
-- Name: f_basao_geqlemail(bigint, text, bigint, text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_geqlemail(idgeqlcliente bigint, email text, idpessoaemail bigint, nome text, score bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
        idgeqlemail   BIGINT;
BEGIN
  
	idgeqlemail = 0;
	FOR registro IN EXECUTE 'SELECT id_geqlemail_int
                                   FROM geqlemail
                                  WHERE id_geqlcliente_int = ' || idgeqlcliente || '
                                    AND UPPER(email_str) = ''' || UPPER(email) || ''''
	LOOP
		idgeqlemail = registro.id_geqlemail_int;
		EXECUTE 'UPDATE geqlemail SET id_pessoa_email_int = ' || idpessoaemail || ',
                                                score_int = ''' || score || ''',
                                                tstamp_retorno = CURRENT_TIMESTAMP
                                          WHERE id_geqlemail_int = ' || registro.id_geqlemail_int;
	END LOOP;

	--CASO Nï¿½O EXISTE INSERE UM NOVO CONTATO
	IF idgeqlemail = 0 THEN
		EXECUTE 'INSERT INTO geqlemail (id_geqlcliente_int, 
                                                id_geqltipoemail_int, 
                                                email_str, 
                                                classificacao_str, 
                                                nome_contato_str,  
                                                tabela_origem_str,
                                                id_pessoa_email_int,
                                                score_int,
                                                tstamp_retorno,
                                                tstamp,
                                                observacao_str) 
                                         VALUES(' || idgeqlcliente || ', 
                                                (SELECT id_geqltipoemail_int
                                                   FROM geqltipoemail
	                                          WHERE codigo_str LIKE ''RES%'' 
                                                  LIMIT 1),
					        ''' || email || ''',
                                                ''9 - Indefinido'',
                                                ''' || nome || ''',
                                                ''basao'',
				                ' || idpessoaemail || ',
                                                ' || score || ',
                                                CURRENT_TIMESTAMP,
                                                CURRENT_TIMESTAMP,
                                                ''BasaoU'')';
	END IF;

	RETURN '';

END;
$$;

--
-- TOC entry 1838 (class 1255 OID 26321)
-- Name: f_basao_geqlemail(bigint, text, bigint, text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_geqlemail(idgeqlcliente bigint, email text, idpessoaemail bigint, nome text, score bigint, classificacao bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
        idgeqlemail   BIGINT;
	classificacao_str TEXT;
BEGIN
  
	idgeqlemail = 0;
	IF COALESCE(classificacao,0) = 0 OR COALESCE(classificacao,0) = 3 THEN
		classificacao_str = '9 - Indefinido';
        END IF;
        IF COALESCE(classificacao,0) = 1 THEN
		classificacao_str = '1 - Excelente';
        END IF;
        IF COALESCE(classificacao,0) = 2 THEN
		classificacao_str = '2 - Bom';
        END IF;
        IF COALESCE(classificacao,0) = 4 THEN
		classificacao_str = '3 - Ruim';
        END IF;

	FOR registro IN EXECUTE 'SELECT id_geqlemail_int
                                   FROM geqlemail
                                  WHERE id_geqlcliente_int = ' || idgeqlcliente || '
                                    AND UPPER(email_str) = ''' || UPPER(email) || ''''
	LOOP
		idgeqlemail = registro.id_geqlemail_int;
		EXECUTE 'UPDATE geqlemail SET id_pessoa_email_int = ' || idpessoaemail || ',
                                                score_int = ''' || score || ''',
                                                tstamp_retorno = CURRENT_TIMESTAMP
                                                --classificacao_str = ''' || classificacao_str || '''
                                          WHERE id_geqlemail_int = ' || registro.id_geqlemail_int;
	END LOOP;

	--CASO Nï¿½O EXISTE INSERE UM NOVO CONTATO
	IF idgeqlemail = 0 THEN
		EXECUTE 'INSERT INTO geqlemail (id_geqlcliente_int, 
                                                id_geqltipoemail_int, 
                                                email_str, 
                                                classificacao_str, 
                                                nome_contato_str,  
                                                tabela_origem_str,
                                                id_pessoa_email_int,
                                                score_int,
                                                tstamp_retorno,
                                                tstamp,
                                                observacao_str) 
                                         VALUES(' || idgeqlcliente || ', 
                                                (SELECT id_geqltipoemail_int
                                                   FROM geqltipoemail
	                                          WHERE codigo_str LIKE ''RES%'' 
                                                  LIMIT 1),
					        ''' || email || ''',
                                                ''' || classificacao_str || ''',
                                                ''' || nome || ''',
                                                ''basao'',
				                ' || idpessoaemail || ',
                                                ' || score || ',
                                                CURRENT_TIMESTAMP,
                                                CURRENT_TIMESTAMP,
                                                ''BasaoU'')';
	END IF;

	RETURN '';

END;
$$;

--
-- TOC entry 1839 (class 1255 OID 26326)
-- Name: f_basao_replica_emails_carteiras(integer, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_replica_emails_carteiras(idgecliente integer, ultidcontrato bigint, ultidemail bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro		RECORD;
  tSqlF			TEXT;
  horaInicioSelectDW	TIME(0);    
  horaFimSelectDW	TIME(0);
  horaInicioInsertBase	TIME(0);    
  horaFimInsertBase	TIME(0);
  
BEGIN
	tSqlF := '';

	horaInicioSelectDW = clock_timestamp();

	--AND (c.id_cbcontratodw_int > ' || ultIdContrato || ' OR g.id_geqlemaildw_int > ' || ultIdEmail || ')
	
	tSqlF := '' ||
	'
		SELECT * FROM dblink(''dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv ''::text,

	''
		SELECT 
			c.id_gecliente_int, 
			abs_cpf(c.cpf_str) as cpf_str,
			g.email_str,
			COALESCE(g.geqltipoemail_str, ''''EMAIL'''') AS geqltipoemail_str,
			''''9 - Indefinido'''' as classificacao_str
		FROM cbcontrato c
		JOIN geqlemail g ON g.cpf_str = c.cpf_str
		WHERE c.id_gecliente_int = ' || idgecliente || ' 
		AND (g.id_geqlemaildw_int > ' || ultIdEmail || ')

	'') l (				
		id_gecliente_int	bigint,
		cpf_str			text,
		email_str		character varying(255),
		geqltipoemail_str	character varying(30),
		classificacao_str	text
	)
	';
											
	EXECUTE 'CREATE TEMPORARY TABLE tmp_replica_email AS ' || tSqlF;		
	EXECUTE 'CREATE INDEX idx_tmp_replica_email_01 ON tmp_replica_email(cpf_str, email_str);';

	horaFimSelectDW = clock_timestamp();
	
	horaInicioInsertBase = clock_timestamp();
	
	-- Insert telefones
	INSERT INTO geqlemail(
			id_geqlcliente_int,
			id_geqltipoemail_int,
			email_str,
			classificacao_str,
			tabela_origem_str,
			id_geusuario_int,
			tstamp,
			excluido_bit
	)
	(
		SELECT DISTINCT ON (gc.id_geqlcliente_int, tmp.email_str)
			gc.id_geqlcliente_int,
			COALESCE((select id_geqltipoemail_int from geqltipoemail gt where trim(gt.codigo_str) = trim(tmp.geqltipoemail_str) limit 1), (select id_geqltipoemail_int from geqltipoemail where codigo_str = 'EMAIL' limit 1)) as id_geqltipoemail_int,
			tmp.email_str,
			tmp.classificacao_str,
			'basao' as tabela_origem_str,
			1195 as id_geusuario_int,
			statement_timestamp(),
			'0'::bit
		FROM tmp_replica_email tmp
		JOIN geqlcliente gc on abs_cpf(gc.cpf_str) = tmp.cpf_str
		WHERE NOT EXISTS (select 1 from geqlemail t
					where t.id_geqlcliente_int = gc.id_geqlcliente_int
					and t.email_str = tmp.email_str)
	);
					
	EXECUTE 'DROP TABLE tmp_replica_email';

	horaFimInsertBase = clock_timestamp();

	-- Gera log na eslogdw no servidor 10.20.11.147 base dw
	PERFORM 
		dblink_exec
			(
				'dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv'
			,	'INSERT INTO eslogdw(
						id_estipologdw_int, 
						id_gecliente_int, 
						data_log_dat, 
						inicio_tim, 
						fim_tim)
				 VALUES (
				 	10,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioSelectDW || ''', 
					''' || horaFimSelectDW || '''),
					(11,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioInsertBase || ''', 
					''' || horaFimInsertBase || ''')'
			);
	
	RETURN '';

END;
$$;

--
-- TOC entry 1840 (class 1255 OID 26330)
-- Name: f_basao_replica_telefones_carteiras(integer, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_replica_telefones_carteiras(idgecliente integer, ultidcontrato bigint, ultidtelefone bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro		RECORD;
  tSqlF			TEXT;
  horaInicioSelectDW	TIME(0);    
  horaFimSelectDW	TIME(0);  
  horaInicioInsertBase	TIME(0);    
  horaFimInsertBase	TIME(0);
  
BEGIN
	tSqlF := '';
	
	horaInicioSelectDW = clock_timestamp();
	RAISE NOTICE 'Inicio Select DW: %',horaInicioSelectDW;

	--AND (c.id_cbcontratodw_int > ' || ultIdContrato || ' OR g.id_geqlcontatodw_int > ' || ultIdTelefone || ') AND g.id_gecliente_int < 20000 AND g.tabela_origem_str NOT IN (''''SINCRONIZACAO'''')
	
	tSqlF := '' ||
	'
		SELECT * FROM dblink(''dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv ''::text,

	''
		SELECT 
			c.id_gecliente_int, 
			abs_cpf(c.cpf_str) as cpf_str,
			g.contato_str,
			CASE
				WHEN g.id_gecliente_int >= 20000 THEN (CASE WHEN SUBSTRING(g.contato_str,3,1)::INT >= 7 THEN ''''CEL'''' ELSE ''''RES'''' END)
				ELSE g.geqltipocontato_str 
			END AS geqltipocontato_str, 
			''''9 - Indefinido'''' as classificacao_str
		FROM cbcontrato c
		JOIN geqlcontato g ON g.cpf_str = c.cpf_str
		WHERE c.id_gecliente_int = ' || idgecliente || '
		AND (g.id_geqlcontatodw_int > ' || ultIdTelefone || ') AND g.id_gecliente_int < 20000 AND g.tabela_origem_str NOT IN (''''SINCRONIZACAO'''')

	'') l (				
		id_gecliente_int	int,
		cpf_str			text,
		contato_str		character varying(60),
		geqltipocontato_str	character varying(60),
		classificacao_str	text
	)
	';
											
	EXECUTE 'CREATE TEMPORARY TABLE tmp_replica_telefones AS ' || tSqlF;		
	EXECUTE 'CREATE INDEX idx_tmp_replica_telefones_01 ON tmp_replica_telefones(cpf_str, contato_str);';

	horaFimSelectDW = clock_timestamp();
	RAISE NOTICE 'Fim Select DW: %',horaFimSelectDW;

	horaInicioInsertBase = clock_timestamp();
	RAISE NOTICE 'Inicio Insert Base: %',horaInicioInsertBase;

	-- Insert telefones
	EXECUTE 'INSERT INTO geqlcontato(
			id_geqlcliente_int,
			id_geqltipocontato_int,
			contato_str,
			classificacao_str,
			tabela_origem_str,
			id_geusuario_int,
			tstamp,
			tstamp_inclusao,
			excluido_bit
	)
	(
		SELECT DISTINCT ON (gc.id_geqlcliente_int, tmp.contato_str)
			gc.id_geqlcliente_int,
			COALESCE((select id_geqltipocontato_int from geqltipocontato gt WHERE trim(gt.codigo_str) = trim(tmp.geqltipocontato_str) ORDER BY ativo_bit DESC LIMIT 1), (select id_geqltipocontato_int from geqltipocontato gt WHERE trim(gt.codigo_str) = trim(CASE WHEN SUBSTRING(tmp.contato_str,3,1)::INT >= 7 THEN ''CEL'' ELSE ''RES'' END) ORDER BY ativo_bit DESC LIMIT 1)) as id_geqltipocontato_int,
			tmp.contato_str,
			tmp.classificacao_str,
			''basao'' as tabela_origem_str,
			1195 as id_geusuario_int,
			statement_timestamp(),
			statement_timestamp(),
			''0''::bit
		FROM tmp_replica_telefones tmp
		JOIN geqlcliente gc on abs_cpf(gc.cpf_str) = tmp.cpf_str
		WHERE NOT EXISTS (select 1 from geqlcontato t
					where t.id_geqlcliente_int = gc.id_geqlcliente_int
					and t.contato_str = tmp.contato_str)
	)
	';
					
	EXECUTE 'DROP TABLE tmp_replica_telefones';

	horaFimInsertBase = clock_timestamp();
	RAISE NOTICE 'Fim Insert Base %',horaFimInsertBase;

	-- Gera log na eslogdw no servidor 10.20.11.147 base dw
	PERFORM 
		dblink_exec
			(
				'dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv '
			,	'INSERT INTO eslogdw(
						id_estipologdw_int, 
						id_gecliente_int, 
						data_log_dat, 
						inicio_tim, 
						fim_tim)
				 VALUES (
				 	5,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioSelectDW || ''', 
					''' || horaFimSelectDW || '''),
					(7,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioInsertBase || ''', 
					''' || horaFimInsertBase || ''') '
			);
	
	RETURN '';

END;
$$;

--
-- TOC entry 1841 (class 1255 OID 26332)
-- Name: f_basao_retorno(text, bigint, bigint, text, bigint, text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_retorno(cpf text, idpessoa bigint, idpessoatelefone bigint, telefone text, idpessoaemail bigint, email text, score bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
        existe          BOOLEAN;	
BEGIN
	existe = false;
	--Verifica se existe a fila
        FOR registro IN EXECUTE 'SELECT COUNT(id_geqlbasaofila_int) AS reg
                                   FROM geqlbasaofila
                                  WHERE cpf_tratado_str = ''' || cpf || '''
                                  AND (( ' || COALESCE(idpessoatelefone, 0) || ' > 0 AND telefone_str = ''' || COALESCE(telefone,'') || ''' ) OR 
                                       ( ' || COALESCE(idpessoaemail, 0) || ' > 0 AND email_str = ''' || COALESCE(email,'') || ''') )'
	LOOP
		IF registro.reg = 0 THEN
			existe = false;
                ELSE
			existe = true;
		END IF;
	END LOOP;
	
	RAISE NOTICE '%', existe;
	IF existe THEN
		FOR registro IN EXECUTE 'SELECT id_geqlbasaofila_int,
                                                COALESCE(telefone_str,'''') AS telefone_str,
                                                COALESCE(email_str,'''') AS email_str
                                           FROM geqlbasaofila
                                          WHERE cpf_tratado_str = ''' || cpf || '''
                                            AND (telefone_str = ''' || COALESCE(telefone,'') || ''' OR email_str = ''' || COALESCE(email,'') || ''')'
		LOOP
			IF COALESCE(idpessoatelefone, 0) <> 0 THEN
				IF registro.telefone_str <> '' THEN
					EXECUTE 'UPDATE geqlbasaofila SET id_transmite_str = ''R'',
                                                                          id_pessoa_int = ' || idpessoa || ', 
                                                                          id_pessoa_telefone_int = ' || idpessoatelefone || ',
                                                                          score_int = ' || COALESCE(score,0) || '
                                                                          WHERE id_geqlbasaofila_int = ' || registro.id_geqlbasaofila_int;
				END IF;			
			END IF;
		
			IF COALESCE(idpessoaemail, 0) <> 0 THEN
				IF registro.email_str <> '' THEN
					EXECUTE 'UPDATE geqlbasaofila SET id_transmite_str = ''R'',
                                                                          id_pessoa_int = ' || idpessoa || ', 
                                                                          id_pessoa_email_int = ' || idpessoaemail || ',
                                                                          score_int = ' || COALESCE(score,0) || '
                                                                    WHERE id_geqlbasaofila_int = ' || registro.id_geqlbasaofila_int;
				END IF;			
			END IF;
		END LOOP;
	ELSE
		FOR registro IN EXECUTE 'SELECT COUNT(*) total
					   FROM geqlcliente
                                             WHERE ABS_CPF(cpf_str) = ''' || cpf || ''''
		LOOP 
			IF registro.total > 0 THEN
				EXECUTE 'INSERT INTO geqlbasaofila(id_geqlcliente_int,
                                                                   id_pessoa_int,
                                                                   cpf_str,
                                                                   cpf_tratado_str,
                                                                   id_pessoa_telefone_int,
                                                                   telefone_str,
                                                                   id_pessoa_email_int,
                                                                   email_str,
                                                                   score_int,
                                                                   id_transmite_str)
                                                            SELECT id_geqlcliente_int,
                                                                   ' || idpessoa || ',
                                                                   cpf_str,
                                                                   ''' || cpf || ''',
                                                                   ' || COALESCE(idpessoatelefone,0) || ',
                                                                   ''' || COALESCE(telefone,'') || ''',
                                                                   ' || COALESCE(idpessoaemail,0) || ',
                                                                   ''' || COALESCE(email,'') || ''',
                                                                   ' || COALESCE(score,0) || ',
                                                                   ''R''
                                                              FROM geqlcliente
                                                             WHERE ABS_CPF(cpf_str) = ''' || cpf || ''' LIMIT 1';
			END IF;
		END LOOP;
	END IF;

	RETURN '';

END;
$$;

--
-- TOC entry 1842 (class 1255 OID 26341)
-- Name: f_basao_retorno(text, bigint, bigint, text, bigint, text, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basao_retorno(cpf text, idpessoa bigint, idpessoatelefone bigint, telefone text, idpessoaemail bigint, email text, score bigint, classificacao bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
        existe          BOOLEAN;	
BEGIN
	existe = false;
	--Verifica se existe a fila
        FOR registro IN EXECUTE 'SELECT COUNT(id_geqlbasaofila_int) AS reg
                                   FROM geqlbasaofila
                                  WHERE cpf_tratado_str = ''' || cpf || '''
                                  AND (( ' || COALESCE(idpessoatelefone, 0) || ' > 0 AND telefone_str = ''' || COALESCE(telefone,'') || ''' ) OR 
                                       ( ' || COALESCE(idpessoaemail, 0) || ' > 0 AND email_str = ''' || COALESCE(email,'') || ''') )'
	LOOP
		IF registro.reg = 0 THEN
			existe = false;
                ELSE
			existe = true;
		END IF;
	END LOOP;
	
	RAISE NOTICE '%', existe;
	IF existe THEN
		FOR registro IN EXECUTE 'SELECT id_geqlbasaofila_int,
                                                COALESCE(telefone_str,'''') AS telefone_str,
                                                COALESCE(email_str,'''') AS email_str
                                           FROM geqlbasaofila
                                          WHERE cpf_tratado_str = ''' || cpf || '''
                                            AND (telefone_str = ''' || COALESCE(telefone,'') || ''' OR email_str = ''' || COALESCE(email,'') || ''')'
		LOOP
			RAISE NOTICE 'UPDATE %', 'UPDATE geqlbasaofila SET id_transmite_str = ''R'',
                                                                    id_pessoa_int = ' || idpessoa || ', 
                                                                    id_pessoa_telefone_int = ' || idpessoatelefone || ',
                                                                    score_int = ' || COALESCE(score,0) || ',
                                                                    classificacao = ' || COALESCE(classificacao,0) || '
                                                              WHERE id_geqlbasaofila_int = ' || registro.id_geqlbasaofila_int;
			IF COALESCE(idpessoatelefone, 0) <> 0 THEN
				IF registro.telefone_str <> '' THEN
					EXECUTE 'UPDATE geqlbasaofila SET id_transmite_str = ''R'',
                                                                          id_pessoa_int = ' || idpessoa || ', 
                                                                          id_pessoa_telefone_int = ' || idpessoatelefone || ',
                                                                          score_int = ' || COALESCE(score,0) || ',
                                                                          classificacao = ' || COALESCE(classificacao,0) || '
                                                                          WHERE id_geqlbasaofila_int = ' || registro.id_geqlbasaofila_int || '
                                                                            AND COALESCE(id_transmite_str , '''') <> ''R''';
				END IF;			
			END IF;

			RAISE NOTICE 'CONCLUIDO %', '';
		
			IF COALESCE(idpessoaemail, 0) <> 0 THEN
				IF registro.email_str <> '' THEN
					EXECUTE 'UPDATE geqlbasaofila SET id_transmite_str = ''R'',
                                                                          id_pessoa_int = ' || idpessoa || ', 
                                                                          id_pessoa_email_int = ' || idpessoaemail || ',
                                                                          score_int = ' || COALESCE(score,0) || ',
                                                                          classificacao = ' || COALESCE(classificacao,0) || '
                                                                    WHERE id_geqlbasaofila_int = ' || registro.id_geqlbasaofila_int || '
                                                                      AND COALESCE(id_transmite_str , '''') <> ''R''';
				END IF;			
			END IF;
		END LOOP;
	ELSE
		FOR registro IN EXECUTE 'SELECT COUNT(*) total
					   FROM geqlcliente
                                             WHERE ABS_CPF(cpf_str) = ''' || cpf || ''''
		LOOP 
			IF registro.total > 0 THEN
				EXECUTE 'INSERT INTO geqlbasaofila(id_geqlcliente_int,
                                                                   id_pessoa_int,
                                                                   cpf_str,
                                                                   cpf_tratado_str,
                                                                   id_pessoa_telefone_int,
                                                                   telefone_str,
                                                                   id_pessoa_email_int,
                                                                   email_str,
                                                                   score_int,
                                                                   id_transmite_str,
                                                                   classificacao)
                                                            SELECT id_geqlcliente_int,
                                                                   ' || idpessoa || ',
                                                                   cpf_str,
                                                                   ''' || cpf || ''',
                                                                   ' || COALESCE(idpessoatelefone,0) || ',
                                                                   ''' || COALESCE(telefone,'') || ''',
                                                                   ' || COALESCE(idpessoaemail,0) || ',
                                                                   ''' || COALESCE(email,'') || ''',
                                                                   ' || COALESCE(score,0) || ',
                                                                   ''R'',
                                                                   ' || COALESCE(classificacao,0) || '
                                                              FROM geqlcliente
                                                             WHERE ABS_CPF(cpf_str) = ''' || cpf || ''' LIMIT 1';
			END IF;
		END LOOP;
	END IF;

	RETURN '';

END;
$$;

--
-- TOC entry 1843 (class 1255 OID 26343)
-- Name: f_basaofila_email_trigger(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basaofila_email_trigger() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	
	BEGIN
 
	IF TG_OP = 'INSERT' THEN
		
		INSERT INTO geqlbasaofila (id_gecliente_int,
		                           id_geqlcliente_int,
                                           nome_str,
                                           dt_nascimento_dat,
                                           cpf_str,
                                           cpf_tratado_str,
                                           tipo_pessoa_str,
                                           rg_str,
                                           sexo_str,                                                                                 
                                           email_str,         
					   tstamp,
                                           cpf_usuario_str,
                                           nome_usuario_str,
                                           classificacao)
                                   SELECT  DISTINCT ON (cli.id_geqlcliente_int, NEW.email_str)
                                           c.id_gecliente_int,
                                           cli.id_geqlcliente_int,
				           c.nome_str,
				           c.dt_nascimento_dat,
				           cli.cpf_str,
				           ABS_CPF(cli.cpf_str),
				           CASE WHEN LENGTH(ABS_CPF(cli.cpf_str)) = 11 
				                THEN 'F'
				                ELSE 'J'
				           END,
				           cli.rg_str,    
				           CASE WHEN c.sexo_str = 'M'
				                THEN '1'
				                WHEN c.sexo_str = 'F'
				                THEN '2'
				   	        ELSE '0'
				           END,
				           NEW.email_str,
				           NOW(),
                                           CASE WHEN NEW.tabela_origem_str = 'CB002'
                                               THEN COALESCE((SELECT u.cpf_str
                                                                FROM geusuario u
                                                               WHERE u.id_geusuario_int = NEW.id_geusuario_int), '05500934000106')
					       ELSE '05500934000106'
				           END,
                                           CASE WHEN NEW.tabela_origem_str = 'CB002'
                                               THEN COALESCE((SELECT UPPER(u.nomecompleto_str)
                                                                FROM geusuario u
                                                               WHERE u.id_geusuario_int = NEW.id_geusuario_int), 'PASCHOALOTTO')
					       ELSE 'PASCHOALOTTO'
				           END,
                                           CASE WHEN new.classificacao_str = '1 - Excelente' THEN 1
                                               WHEN new.classificacao_str = '2 - Bom' THEN 2
                                               WHEN new.classificacao_str = '3 - Ruim' THEN 4
                                               WHEN new.classificacao_str = '9 - Indefinido' THEN 3
                                          END
				      FROM geqlcliente cli
				      JOIN geqlcontrato qc
				        ON qc.id_geqlcliente_int = cli.id_geqlcliente_int
				      JOIN cbcontrato c
				        ON c.id_cbcontrato_int = qc.id_cbcontrato_int
                                    WHERE cli.id_geqlcliente_int = NEW.id_geqlcliente_int
                                      AND COALESCE(new.id_pessoa_email_int,0) = 0
                                      AND COALESCE(new.excluido_bit::BIGINT, 0) = 0;

	END IF;
	RETURN NEW;
 END;
 $$;

--
-- TOC entry 1844 (class 1255 OID 26351)
-- Name: f_basaofila_telefone_trigger(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_basaofila_telefone_trigger() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	
	BEGIN
 
	IF TG_OP = 'INSERT' THEN
		
		INSERT INTO geqlbasaofila (id_gecliente_int,
		                           id_geqlcliente_int,
                                           nome_str,
                                           dt_nascimento_dat,
                                           cpf_str,
                                           cpf_tratado_str,
                                           tipo_pessoa_str,
                                           rg_str,
                                           sexo_str,
                                           telefone_str,         
					   tstamp,
                                           cpf_usuario_str,
                                           nome_usuario_str,
                                           classificacao)
                                   SELECT DISTINCT ON (cli.id_geqlcliente_int, NEW.contato_str) 
                                          c.id_gecliente_int,
                                          cli.id_geqlcliente_int,
                                          c.nome_str,
                                          c.dt_nascimento_dat,
                                          cli.cpf_str,
                                          ABS_CPF(cli.cpf_str),
                                          CASE WHEN LENGTH(ABS_CPF(cli.cpf_str)) = 11 
                                               THEN 'F'
                                               ELSE 'J'
                                          END,
                                          cli.rg_str,    
                                          CASE WHEN c.sexo_str = 'M'
                                               THEN '1'
                                               WHEN c.sexo_str = 'F'
                                               THEN '2'
	                                       ELSE '0'
                                          END,
                                          NEW.contato_str,
                                          NOW(),
                                          CASE WHEN NEW.tabela_origem_str = 'CB002'
                                               THEN COALESCE((SELECT u.cpf_str
                                                                FROM geusuario u
                                                               WHERE u.id_geusuario_int = NEW.id_geusuario_int), '05500934000106')
					       ELSE '05500934000106'
				           END,
                                           CASE WHEN NEW.tabela_origem_str = 'CB002'
                                               THEN COALESCE((SELECT UPPER(u.nomecompleto_str)
                                                                FROM geusuario u
                                                               WHERE u.id_geusuario_int = NEW.id_geusuario_int), 'PASCHOALOTTO')
					       ELSE 'PASCHOALOTTO'
				           END,
                                          CASE WHEN new.classificacao_str = '1 - Excelente' THEN 1
                                               WHEN new.classificacao_str = '2 - Bom' THEN 2
                                               WHEN new.classificacao_str = '3 - Ruim' THEN 4
                                               WHEN new.classificacao_str = '9 - Indefinido' THEN 3
                                          END     
                                     FROM geqlcliente cli
                                     JOIN geqlcontrato qc
                                       ON qc.id_geqlcliente_int = cli.id_geqlcliente_int
                                     JOIN cbcontrato c
                                       ON c.id_cbcontrato_int = qc.id_cbcontrato_int                                     
                                    WHERE cli.id_geqlcliente_int = NEW.id_geqlcliente_int
                                      AND COALESCE(new.id_pessoa_telefone_int,0) = 0
                                      AND COALESCE(new.excluido_bit::BIGINT, 0) = 0
									  AND COALESCE(new.bloqueado_bit::BIGINT, 0) = 0;
	
	END IF;
	RETURN NEW;
 END;
 $$;

--
-- TOC entry 1845 (class 1255 OID 26359)
-- Name: f_bloqueio_telefone(bigint, bit); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_bloqueio_telefone(id_cbfollowup bigint, contatopreview bit) RETURNS bit
    LANGUAGE plpgsql
    AS $$
DECLARE
	id_geqlcontato  		BIGINT;
	id_geqltipocontato		BIGINT;
	id_geqltipocontato_anterior	BIGINT;
	id_tipoter      		BIGINT;
	id_gebloqueiotelefonecontato	BIGINT;
	uf				VARCHAR;
	ddd				VARCHAR;
	tipoContato     		VARCHAR;
	qtdeAcionamento 		INTEGER;
	qtdeOcorridas			INTEGER;
	contato        			VARCHAR;
	
	TERCEIRO_VALUE CONSTANT 	VARCHAR := 'TERCEIRO';
	CPC_VALUE CONSTANT 		VARCHAR := 'CPC';
	
BEGIN

	-- Se foi um contato preview, entï¿½o saimos do processo
	IF contatoPreview = '1' THEN
	
		RETURN '0';
		
	END IF;
	
	--Recuperamos os dados do contato do follow
	SELECT f.id_geqlcontato_int,
	       COALESCE(co.estado_str, ''),
	       LEFT(TRIM(c.contato_str), 2),
	       CASE WHEN cpc_bit = '1' THEN CPC_VALUE
	            WHEN terceiro_bit = '1' THEN TERCEIRO_VALUE
                    ELSE ''
                END,
               c.contato_str,
               id_geqltipocontato_int
          INTO id_geqlcontato,
               uf,
               ddd,
               tipoContato,
               contato,
               id_geqltipocontato
	  FROM cbfollowup f
	       INNER JOIN geqlcontato c
	               ON c.id_geqlcontato_int = f.id_geqlcontato_int
	       INNER JOIN cbcontrato co
	               ON co.id_cbcontrato_int = f.id_cbcontrato_int
	       INNER JOIN cbsitcontato sc
	               ON sc.id_cbsitcontato_int = f.id_cbsitcontato_int
	 WHERE f.id_cbfollowup_int = id_cbfollowup;

        -- Se nï¿½o ter contato vinculado ao follow, podemos sair do processo
	IF id_geqlcontato IS NULL OR
	   tipoContato = '' THEN

		-- Retornamos 0 para quando o contato nao foi alterado
		RETURN '0';
		
	END IF;

	-- Se o contato nï¿½o foi do tipo terceiro e nï¿½o um CPC, saimos do processo
	IF tipoContato NOT IN (TERCEIRO_VALUE, CPC_VALUE) THEN
	
		RETURN '0';
		
	END IF;
	
	-- Verificamos se existe alguma regra de bloqueio cadastrado para UF ou para o DDD
	SELECT qtde_acionamento_int INTO qtdeAcionamento
	  FROM geregrabloqueiotelefone
	 WHERE (tipo_bloqueio_str = 'UF' AND uf_rg_str = uf)
	    OR (tipo_bloqueio_str = 'DDD' AND ddd_str = ddd)
	 ORDER BY qtde_acionamento_int
	 LIMIT 1;

	-- Se a quantidade de acionamento for nula ou igual a zero, quer dizer que nï¿½o tem regra alguma para ser utilizada
	IF qtdeAcionamento IS NULL OR
	   qtdeAcionamento = 0 THEN

		-- Retornamos 0 para quando o contato nao foi alterado
		RETURN '0';
		
	END IF;

	-- Inserimos na tabela de controle de bloqueio
	INSERT INTO gebloqueiotelefonecontato(
		id_cbfollowup_int,
		id_geqlcontato_int,
		tstamp,
		terceiro_bit)
	VALUES(
		id_cbfollowup,
		id_geqlcontato,
		now(),
		CASE WHEN tipoContato = TERCEIRO_VALUE THEN '1'::BIT
		     ELSE '0'::BIT
		 END) RETURNING id_gebloqueiotelefonecontato_int INTO id_gebloqueiotelefonecontato;

	-- Recuperamos o tipo de contato TERCEIRO
	id_tipoter := COALESCE((SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'TERC' ORDER BY id_geqltipocontato_int ASC LIMIT 1), 0);
               
	-- Se o tipo de contato for igual a terceiro e o tipo do contato atual for diferente de terceiro e se encontrou o tipo de terceiro
	IF tipoContato = TERCEIRO_VALUE AND
	   id_tipoter <> id_geqltipocontato AND 
	   id_tipoter > 0 THEN

		-- Verificamos quantas vezes jï¿½ ocorreu contato com terceiro nesse contato
		SELECT COUNT(1) INTO qtdeOcorridas
		  FROM gebloqueiotelefonecontato
		 WHERE id_geqlcontato_int = id_geqlcontato
		   AND terceiro_bit = '1';

		-- Se a quantidade for maior ou igual que a quantidade da regra de bloqueio
		IF COALESCE(qtdeOcorridas, 0) >= qtdeAcionamento THEN

			-- Gravamos o tipo de contato atual
			INSERT INTO gebloqueiotelefonecontatoanterior(
				id_gebloqueiotelefonecontato_int,
				id_geqltipocontato_anterior_int)
			VALUES (
				id_gebloqueiotelefonecontato,
				id_geqltipocontato);

			-- Atualizamos o contato para terceiro
			UPDATE geqlcontato
			   SET id_geqltipocontato_int = id_tipoter
			 WHERE id_geqlcontato_int = id_geqlcontato;

			-- Retornamos 1 para indicar que o contato foi alterado
			RETURN '1';
			
		END IF;

	-- Se foi um contato CPC e o tipo de contato atual ï¿½ igual a Terceiro
	ELSIF tipoContato = CPC_VALUE AND
	      id_geqltipocontato = id_tipoter THEN

		-- Recuperamos o tipo de contato anterior 
		SELECT a.id_geqltipocontato_anterior_int INTO id_geqltipocontato_anterior
		  FROM gebloqueiotelefonecontatoanterior a
		       INNER JOIN gebloqueiotelefonecontato b
		               on a.id_gebloqueiotelefonecontato_int = b.id_gebloqueiotelefonecontato_int
		 WHERE b.id_geqlcontato_int = id_geqlcontato
		 ORDER BY b.id_gebloqueiotelefonecontato_int DESC
		 LIMIT 1;

		-- Se nï¿½o encontou um tipo de contato anterior
		IF id_geqltipocontato_anterior IS NULL THEN
			
			-- Verificamos se ï¿½ um celular
			IF fctipofone(contato) = 'CEL' THEN

				-- Recuperamos o tipo de contato CELULAR
				id_geqltipocontato_anterior := (SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'CEL' ORDER BY id_geqltipocontato_int ASC LIMIT 1);

			-- Senao
			ELSE

				-- Recuperamos o tipo de contato RESIDENCIAL
				id_geqltipocontato_anterior := (SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'RES' ORDER BY id_geqltipocontato_int ASC LIMIT 1);
				
			END IF;
			
		END IF;

		-- Se foi definida a variavel, ï¿½ que podemos atualizar
		IF id_geqltipocontato_anterior IS NOT NULL THEN

			-- Atualizamos o contato
			UPDATE geqlcontato
			   SET id_geqltipocontato_int = id_geqltipocontato_anterior
			 WHERE id_geqlcontato_int = id_geqlcontato;

			-- Retornamos 1 para indicar que o contato foi alterado
			RETURN '1';
			
		END IF;
	      
	END IF;

	-- Retornamos 0 para quando o contato nao foi alterado
	RETURN '0';

END;
$$;

--
-- TOC entry 1846 (class 1255 OID 26363)
-- Name: f_boletagem_geracao(bigint, bigint, bigint, text, bigint, bigint, text, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_boletagem_geracao(p_idcbblconfiguracao bigint, p_idcampanha bigint, p_idcliente bigint, p_tabelafilha text, p_idusuario bigint, p_idbordero bigint, p_tempparcela text, p_tempboletagem text, p_tempcustas text, p_chave text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registroConfig  RECORD; 
	registroCalc    RECORD;
	registroTemp    RECORD;
	tabtempCalc     TEXT;
	tabtempParc     TEXT;  
        parcelas        BIGINT;
BEGIN

	-- ################################################################################################
	-- 
	--                                        DOC SQL
	-- Desenvolvido por: plourenco 
	-- Em: 19/08/2016
	-- Local: 
	-- Funï¿½ao criada para chamar rotina de cï¿½lculo por funï¿½ï¿½o e carregar as temporï¿½rias utilizadas na tela CB167
	-- chamada CB166.pcProcessa
	-- 
	-- - REVISï¿½ES:
	-- 
	-- 
	-- ################################################################################################

	--Busca dados de configuraï¿½ï¿½es realizadas na CB166 e informaï¿½ï¿½es do tipo de pagamento.

	FOR registroConfig IN EXECUTE 'SELECT cbl.sequencia_int,       
                                              cbli.id_cbtipopagamento_int,
                                              cbli.id_cbblconfiguracaoitem_int,                                              
                                              cbli.calculo_dat,
                                              cbli.vencimento_dat,
                                              cbli.entrada_int,
                                              cbli.parcelas_int,
                                              --(cbli.desconto_int::DOUBLE PRECISION / 100::DOUBLE PRECISION)::DOUBLE PRECISION AS desconto_int,
                                              cbli.desconto_int::DOUBLE PRECISION,
                                              cbli.minimo_parcela_int,
                                              sf.subformula_str
                                         FROM cbblconfiguracao cbl    
                                         JOIN cbblconfiguracaoitem cbli
                                           ON cbli.id_cbblconfiguracao_int = cbl.id_cbblconfiguracao_int
                                         JOIN cbtipopagamento tp
                                           ON tp.id_cbtipopagamento_int = cbli.id_cbtipopagamento_int
                                         JOIN cbsubformula sf
                                           ON UPPER(TRIM(sf.codigo_subformula_str)) = UPPER(TRIM(tp.formula_valorpagar_txt))
                                        WHERE cbl.id_cbblconfiguracao_int = ' || p_idcbblconfiguracao || '
                                        ORDER BY cbl.sequencia_int'
	LOOP			
		--Cria am temporarias utilizadas no cï¿½lculo
		tabtempCalc =(SELECT ('cbcalculoparcela_' || REPLACE(p_chave, '.','_') || (SELECT TO_CHAR(CURRENT_TIMESTAMP, 'DD_MM_YYYY_hh24missms'))));
		tabtempParc = (SELECT ('cbcalculoparcelaparcelamento_' || REPLACE(p_chave, '.','_') || (SELECT TO_CHAR(CURRENT_TIMESTAMP, 'DD_MM_YYYY_hh24missms'))));		

		--Create
		EXECUTE 'CREATE TEMPORARY TABLE IF NOT EXISTS ' || tabtempCalc || ' AS SELECT * FROM cbcalculoparcela WHERE 1=2';
		EXECUTE 'CREATE TEMPORARY TABLE IF NOT EXISTS ' || tabtempParc || ' AS SELECT * FROM cbcalculoparcelaparcelamento WHERE 1=2';
		
		EXECUTE 'TRUNCATE ' || tabtempCalc;
		EXECUTE 'TRUNCATE ' || tabtempParc;

		parcelas = registroConfig.parcelas_int;
		IF COALESCE(registroConfig.entrada_int, 0) > 0 AND parcelas = 1 THEN
			parcelas = parcelas + 1;
		END IF;

		IF parcelas > 1 THEN
			parcelas = parcelas + 1;
		END IF;

		RAISE NOTICE 'CHAMANDO CALCULO: parcela = %',parcelas;
		
		FOR registroCalc IN EXECUTE 'SELECT ' || registroConfig.subformula_str || '(' || registroConfig.id_cbtipopagamento_int || '::BIGINT,
                                                                                            bar.id_cbcontrato_int::BIGINT,                                                                                            
                                                                                            (SELECT f_boletagem_idparcelas(bar.id_cbblbaseregistro_int))::TEXT,
                                                                                            ''' || registroConfig.calculo_dat || '''::DATE,
                                                                                            ' || registroConfig.desconto_int || '::DOUBLE PRECISION,
                                                                                            ''''::TEXT,
                                                                                            ' || parcelas || '::BIGINT,
                                                                                            0::DOUBLE PRECISION,
                                                                                            0::DOUBLE PRECISION,
                                                                                            ' || p_idcliente || '::BIGINT,
                                                                                            ''' || p_tabelafilha || '''::TEXT,
                                                                                            ' || p_idusuario || '::BIGINT,
                                                                                            ' || p_idcampanha || '::BIGINT,
                                                                                            ' || registroConfig.entrada_int || '::DOUBLE PRECISION,
                                                                                            0::DOUBLE PRECISION,
                                                                                            ''' || tabtempCalc || '''::TEXT,
                                                                                            ''' || tabtempParc || '''::TEXT,
                                                                                            ''S''::TEXT) as calculo,
                                                                                            bar.id_cbcontrato_int,
                                                                                            bar.id_cbblbaseregistro_int
                                               FROM cbblbase ba
                                               JOIN cbblbaseregistro bar
                                                 ON bar.id_cbblbase_int = ba.id_cbblbase_int
                                              WHERE ba.id_cbblconfiguracao_int = ' || p_idcbblconfiguracao || '                                               
                                               AND bar.gera_boleto_str = ''S''
                                               AND (SELECT f_boletagem_idparcelas(bar.id_cbblbaseregistro_int)) <> '''''		
		LOOP	
			RAISE NOTICE 'DENTRO DO LOOP: f_boletagem_geracao';
			IF left(registroCalc.calculo,11)='ERRO BANCO:' THEN
				EXECUTE 'UPDATE cbblbaseregistro SET status_str = '''|| registroCalc.calculo ||'''
		                                    WHERE id_cbblbaseregistro_int = ' || registroCalc.id_cbblbaseregistro_int || ';';
			ELSE
				EXECUTE 'INSERT INTO ' || p_tempparcela || ' (chave_str,
	                                                                      id_tmpblboletagem_int,
	                                                                      id_cbcontrato_int,
	                                                                      id_cbparcela_int,
	                                                                      id_cbblconfiguracaoitem_int,
	                                                                      total_original_num,
	                                                                      entrada_num,
	                                                                      parcela_num,
	                                                                      data_vencimento_dat,
	                                                                      principal_num,
	                                                                      cp_num,
								              multa_num,
				  			                      notificacao_num,
									      despesa_banco_num,
									      desconto_num,
									      abatimento_num,
									      juros_mora_num,
									      honorarios_num,
									      comissionamento_num,
									      valor_total_num,
									      retido_num,
									      acrescimo_num,
									      perc_desc_num,
									      principal_original_num,
									      cp_original_num,
									      desconto_original_num)
								       SELECT ''' || p_chave || ''',
									      ' || registroCalc.id_cbcontrato_int ||',
									      ' || registroCalc.id_cbblbaseregistro_int || ',
									      t.id_cbparcela_int,
									      ' || registroConfig.id_cbblconfiguracaoitem_int || ', 				
									      (t.valor_total_num + t.desconto_num),--Valor Atualizado								      
									      COALESCE(tpe.valor_parcelamento_num, 0),--Entrada								      
									      COALESCE(tpp.valor_parcelamento_num, t.valor_total_num),--Parcela
									      p.data_vencimento_dat,
									      COALESCE(tpe.principal_num, t.principal_num),
									      COALESCE(tpe.cp_num, t.cp_num),
									      COALESCE(tpe.multa_num, t.multa_num),
									      COALESCE(tpe.despesas_num, t.notificacao_num),
									      (t.despesa_banco_num / ' || registroConfig.parcelas_int || '::BIGINT),
									      COALESCE(tpe.desconto_num, t.desconto_num),
									      (t.abatimento_num / ' || registroConfig.parcelas_int || '::BIGINT),
									      COALESCE(tpe.juros_num, t.juros_mora_num),
									      COALESCE(tpe.ho_num, t.honorarios_num),
									      COALESCE(tpe.comissionamento_num, t.comissionamento_num),
									      COALESCE(tpe.valor_parcelamento_num, t.valor_total_num), 
									      COALESCE(tpe.retido_num, t.retido_num), 
									      COALESCE(tpe.acrescimo_num, t.acrescimo_num), 
									      COALESCE(tpe.perc_desconto_num, t.percentual_desconto_num), 
									      t.principal_num, 
									      t.cp_num, 
									      t.desconto_num
									 FROM ' || tabtempCalc || ' t
									 JOIN cbparcela p
									   ON p.id_cbparcela_int = t.id_cbparcela_int
									 --Parcelamento Entrada
									 LEFT JOIN (SELECT tp.*
	                                                                              FROM ' || tabtempParc || ' tp
	                                                                             WHERE tp.parcela_parcelamento_int = 0) tpe                                                                       
	                                                                   ON tpe.id_cbcontrato_int = t.id_cbcontrato_int
	                                                                  AND tpe.id_cbparcela_int = t.id_cbparcela_int
	                                                                  AND tpe.id_cbcalculoparcela_int = t.id_cbcalculoparcela_int
	                                                                 --Parcelamento Demais parcelas
	                                                                 LEFT JOIN (SELECT tp.*
	                                                                              FROM ' || tabtempParc || ' tp
	                                                                             WHERE tp.parcela_parcelamento_int = 1) tpp                                                                       
	                                                                   ON tpp.id_cbcontrato_int = t.id_cbcontrato_int
	                                                                  AND tpp.id_cbparcela_int = t.id_cbparcela_int
	                                                                  AND tpp.id_cbcalculoparcela_int = t.id_cbcalculoparcela_int                                                                  
									WHERE t.id_cbcontrato_int = ' || registroCalc.id_cbcontrato_int || ';';
			END IF;
		END LOOP;

		FOR registroCalc IN EXECUTE 'SELECT SUM(valor_total_num) AS valor_total_num,
		                                    id_tmpblboletagem_int
		                               FROM ' || p_tempparcela || '
		                               GROUP BY id_tmpblboletagem_int'
		LOOP
			IF registroCalc.valor_total_num < registroConfig.minimo_parcela_int THEN
				--Retira os casos que nï¿½o entraram na boletagem por causa de valor minimo				
			        EXECUTE 'UPDATE cbblbaseregistro SET status_str = ''Valor Mï¿½nimo Invï¿½lido'' 		                                
		                                       WHERE id_cbblbaseregistro_int = ' || registroCalc.id_tmpblboletagem_int || ';';
		                EXECUTE 'DELETE FROM ' || p_tempparcela || ' WHERE id_tmpblboletagem_int = ' || registroCalc.id_tmpblboletagem_int || ';';
		        ELSE 
				--Casos Calculdados Coloca OK no status da boletagem			
				EXECUTE 'UPDATE cbblbaseregistro SET status_str = ''OK'' 		                                
		                               WHERE id_cbblbaseregistro_int = ' || registroCalc.id_tmpblboletagem_int || ';';
		        END IF;
		END LOOP;            
		
	END LOOP;

	 --Insere na temporï¿½ria de boletagem.
		EXECUTE 'INSERT INTO ' || p_tempboletagem || '(chave_str,
						      id_cbblconfiguracaoitem_int,
						      id_tmpblboletagem_int,
						      id_cbblbase_int,                   
						      id_cbcontrato_int,                 
						      total_original_num,                
						      entrada_num,                       
						      parcela_num,                       
						      parcelas_int,
						      principal_num,                      
						      cp_num,                             
						      multa_num,                          
						      notificacao_num,                    
						      despesa_banco_num,                  
						      desconto_num,                       
						      abatimento_num,                     
						      juros_mora_num,                     
						      honorarios_num,                     
						      comissionamento_num,                
						      valor_total_num,                    
						      retido_num,                         
						      acrescimo_num,                      
						      perc_desc_num,                      
						      principal_original_num,             
						      cp_original_num,                    
						      desconto_original_num)
				               SELECT t.chave_str,
                                                      t.id_cbblconfiguracaoitem_int,
                                                      t.id_tmpblboletagem_int,
						      ba.id_cbblbase_int,
						      p.id_cbcontrato_int,
						      SUM(t.total_original_num),
						      SUM(t.entrada_num),
						      SUM(t.parcela_num),
						      ' || registroConfig.parcelas_int || ',
						      SUM(t.principal_num),
						      SUM(t.cp_num),
						      SUM(t.multa_num),
						      SUM(t.notificacao_num),
						      SUM(t.despesa_banco_num),
						      SUM(t.desconto_num),
						      SUM(t.abatimento_num),
						      SUM(t.juros_mora_num),
						      SUM(t.honorarios_num),
						      SUM(t.comissionamento_num),
						      SUM(t.valor_total_num),
						      SUM(t.retido_num),
						      SUM(t.acrescimo_num),
						      SUM(t.perc_desc_num),
						      SUM(t.principal_original_num),
						      SUM(t.cp_original_num),
						      SUM(t.desconto_original_num)
					         FROM ' || p_tempparcela || ' t
					         JOIN cbparcela p
					           ON p.id_cbparcela_int = t.id_cbparcela_int
					         JOIN cbblbaseregistro br
                                                   ON br.id_cbcontrato_int = p.id_cbcontrato_int
                                                 JOIN cbblbase ba
                                                   ON ba.id_cbblbase_int  = br.id_cbblbase_int
                                                  AND ba.id_cbblconfiguracao_int = ' || p_idcbblconfiguracao || '
					        GROUP BY t.chave_str, 
						      t.id_cbblconfiguracaoitem_int,
						      t.id_tmpblboletagem_int,  
						      ba.id_cbblbase_int,
						      p.id_cbcontrato_int';

		--Insere temporï¿½ria com dados de custas e despesas processadas.
		EXECUTE 'INSERT INTO ' || p_tempcustas || '(id_tmpblboletagemcusta_int,
                                                            id_tmpblboletagem_int,
                                                            chave_str,
                                                            id_cbblconfiguracaoitem_int,
                                                            id_cbblbase_int,
                                                            id_cbcontrato_int,
                                                            id_cbdespesa_int,
                                                            valor_total_num,
                                                            desconto_num,
                                                            tstamp,
                                                            id_geusuario_int)
                                                     SELECT NEXTVAL(''auxboletagemcusta_seq''),        
                                                            t.id_tmpblboletagem_int,
                                                            t.chave_str,
                                                            ' || registroConfig.id_cbblconfiguracaoitem_int || ',
                                                            ba.id_cbblbase_int,
                                                            p.id_cbcontrato_int,
                                                            d.id_cbdespesa_int,
                                                            d.valor_num,
                                                            0.00,
                                                            CURRENT_TIMESTAMP,
                                                            ' || p_idusuario || '
                                                       FROM ' || p_tempparcela || ' t
                                                       JOIN cbparcela p
                                                         ON p.id_cbparcela_int = t.id_cbparcela_int
                                                       JOIN cbdespesa d
                                                         ON d.id_cbcontrato_int = p.id_cbcontrato_int
                                                       JOIN cbblbaseregistro br
                                                         ON br.id_cbcontrato_int = p.id_cbcontrato_int
                                                       JOIN cbblbase ba
                                                         ON ba.id_cbblbase_int  = br.id_cbblbase_int
                                                        AND ba.id_cbblconfiguracao_int = ' || p_idcbblconfiguracao || '
                                                      WHERE d.situacao_str = ''A''
                                                      GROUP BY t.chave_str, 
                                                            t.id_tmpblboletagem_int,  
                                                            p.id_cbcontrato_int,
                                                            ba.id_cbblbase_int,
                                                            d.id_cbdespesa_int,
                                                            d.valor_num;';

	

	--Manutenï¿½ï¿½o das "temporï¿½rias" de boletagem: irï¿½ "DROPAR" todas as temporï¿½rias "ANTIGAS" caso existir.

    EXECUTE 'SELECT f_boletagem_manutencao()';
            RETURN '';

            END;
$$;

--
-- TOC entry 1847 (class 1255 OID 26372)
-- Name: f_boletagem_idparcelas(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_boletagem_idparcelas(idbaseregistro bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro       RECORD;
  parcelas       TEXT;	
BEGIN
	-- ################################################################################################
	-- 
	--                                        DOC SQL
	-- Desenvolvido por: plourenco 
	-- Em: 19/08/2016
	-- Local: 
	-- Buscar e devolver os id_cbparcela_int, das parcelas carregadas pela CB166, como texto (separado por , entre um id e outro) para enviar para o cï¿½lculo
	-- chamada: f_boletagem_geracao 
	-- 
	-- - REVISï¿½ES:
	-- 
	-- 
	-- ################################################################################################
		
	parcelas = '';
	FOR registro IN EXECUTE 'SELECT id_cbparcela_int                               
                                      FROM cbblbaseregistroparcela 
                                     WHERE id_cbblbaseregistro_int = ' || idbaseregistro
	LOOP
		parcelas = parcelas || registro.id_cbparcela_int || ', ';
	END LOOP;

	IF parcelas <> '' THEN
		parcelas = SUBSTRING(parcelas, 1, LENGTH(parcelas) - 2);
	END IF;
	
	RETURN  parcelas;
END;
$$;

--
-- TOC entry 1848 (class 1255 OID 26375)
-- Name: f_boletagem_idparcelas(bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_boletagem_idparcelas(idbaseregistro bigint, qtdeparcela text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  registro       RECORD;
  parcelas       TEXT;
  Total		 INT;
BEGIN
	-- ################################################################################################
	-- 
	--                                        DOC SQL
	-- Desenvolvido por: plourenco 
	-- Em: 19/08/2016
	-- Local: 
	-- Buscar e devolver os id_cbparcela_int, das parcelas carregadas pela CB166, como texto (separado por , entre um id e outro) para enviar para o cï¿½lculo
	-- chamada: f_boletagem_geracao 
	-- 
	-- - REVISï¿½ES: 
	-- 
	-- 
	-- ################################################################################################
	
	EXECUTE 'SELECT COUNT(*) FROM cbblbaseregistroparcela WHERE id_cbblbaseregistro_int = ' || idbaseregistro INTO Total;
	
	parcelas = '';
	FOR registro IN EXECUTE 'SELECT row_number() over () as linha,
					b.id_cbparcela_int, p.data_vencimento_dat, p.tipo_str
                                      FROM cbblbaseregistroparcela b
                                      JOIN cbparcela p ON p.id_cbparcela_int = b.id_cbparcela_int
                                     WHERE id_cbblbaseregistro_int = ' || idbaseregistro || '
                                     ORDER BY p.data_vencimento_dat, p.tipo_str, p.id_cbparcela_int'
	LOOP
		parcelas = parcelas || registro.id_cbparcela_int || ', ';
		IF qtdeparcela = 'P' THEN
			EXIT;
		ELSIF qtdeparcela = 'M' THEN
			IF  (registro.linha > (Total / 2)::bigint) THEN
				EXIT;
			END IF;
		ELSIF (SELECT NOT SUBSTRING(qtdeparcela,'^[0-9]+$') IS NULL) THEN -- valida se ï¿½ numerico
			IF registro.linha >= SUBSTRING(qtdeparcela,'^[0-9]+$')::bigint THEN
				EXIT;
			END IF;
		END IF;
	END LOOP;

	IF parcelas <> '' THEN
		parcelas = SUBSTRING(parcelas, 1, LENGTH(parcelas) - 2);
	END IF;
	
	RETURN  parcelas;
END;
$_$;

--
-- TOC entry 1849 (class 1255 OID 26376)
-- Name: f_boletagem_manutencao(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_boletagem_manutencao() RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro  RECORD; 
  
BEGIN

  -- ################################################################################################
  -- 
  --                                        DOC SQL
  -- Desenvolvido por: plourenco 
  -- Em: 23/08/2016
  -- Local: 
  -- Funï¿½ao criada para dar manutenï¿½ï¿½o em todas as tabelas temporï¿½ras da boletagem que podem ficar criadas
  -- desnecessï¿½riamente
  -- chamada CB166.pcProcessa, f_boletagem_geracao
  -- 
  -- - REVISï¿½ES:
  -- 
  -- 
  -- ################################################################################################

  

  --Manutenï¿½ï¿½o das "temporï¿½rias" de boletagem: irï¿½ "DROPAR" todas as temporï¿½rias "ANTIGAS" caso existir.
  FOR registro IN EXECUTE 'SELECT tablename,
                                        TO_DATE(SUBSTRING(tablename, 22, 10), ''dd_MM_yyyy'')
                                   FROM pg_tables
                                  WHERE tablename LIKE ''tmpblboletagemparcela % ''
                                    AND tablename NOT IN(''tmpblboletagem_seq'', ''tmpblboletagem'', ''tmpblboletagemparcela'', ''tmpblcalculosauc'', ''auxblboletagemcusta'')
                                    AND TO_DATE(SUBSTRING(tablename, 22, 10), ''dd_MM_yyyy'') <= CURRENT_DATE - 3'
        LOOP
    EXECUTE 'DROP TABLE ' || registro.tablename || ';';
            END LOOP;

            FOR registro IN EXECUTE 'SELECT tablename,
                                        CASE WHEN tablename NOT LIKE ''tmpblboletagemparcela % ''
                                             THEN TO_DATE(SUBSTRING(tablename, 15, 10), ''dd_MM_yyyy'')
                                             ELSE CURRENT_DATE
                                        END
                                   FROM pg_tables
                                  WHERE tablename LIKE ''tmpblboletagem % ''
                                    AND tablename NOT IN(''tmpblboletagem_seq'', ''tmpblboletagem'', ''tmpblboletagemparcela'', ''tmpblcalculosauc'', ''auxblboletagemcusta'') 
                                    AND CASE WHEN tablename NOT LIKE ''tmpblboletagemparcela % ''
                                             THEN TO_DATE(SUBSTRING(tablename, 15, 10), ''dd_MM_yyyy'')
                                             ELSE CURRENT_DATE
                                         END <= CURRENT_DATE - 3'
        LOOP
    EXECUTE 'DROP TABLE ' || registro.tablename || ';';
            END LOOP;

            FOR registro IN EXECUTE 'SELECT tablename,
                                        TO_DATE(SUBSTRING(tablename, 17, 10), ''dd_MM_yyyy'')
                                   FROM pg_tables
                                  WHERE tablename LIKE ''tmpblcalculosauc % ''
                                    AND tablename NOT IN(''tmpblboletagem_seq'', ''tmpblboletagem'', ''tmpblboletagemparcela'', ''tmpblcalculosauc'', ''auxblboletagemcusta'') 
                                    AND TO_DATE(SUBSTRING(tablename, 17, 10), ''dd_MM_yyyy'') <= CURRENT_DATE - 3'
        LOOP
    EXECUTE 'DROP TABLE ' || registro.tablename || ';';
            END LOOP;

            FOR registro IN EXECUTE 'SELECT tablename,
                                        TO_DATE(SUBSTRING(tablename, 20, 10), ''dd_MM_yyyy'')
                                   FROM pg_tables
                                  WHERE tablename LIKE ''auxblboletagemcusta % ''
                                    AND tablename NOT IN(''tmpblboletagem_seq'', ''tmpblboletagem'', ''tmpblboletagemparcela'', ''tmpblcalculosauc'', ''auxblboletagemcusta'') 
                                    AND TO_DATE(SUBSTRING(tablename, 20, 10), ''dd_MM_yyyy'') <= CURRENT_DATE - 3'
        LOOP
    EXECUTE 'DROP TABLE ' || registro.tablename || ';';
            END LOOP;

            RETURN '';

            END;
$$;

--
-- TOC entry 1850 (class 1255 OID 26385)
-- Name: f_busca_destino(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_busca_destino(idcbcontrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE 
	idqlcliente bigint;
	email text;
	endereco text;
	retorno text;

BEGIN	
	
	/*ID CLIENTE*/
	idqlcliente := (SELECT COALESCE(id_geqlcliente_int, 0) FROM geqlcontrato WHERE id_cbcontrato_int = idcbcontrato);

	IF idqlcliente = 0 THEN
	
		RETURN 'Cliente nï¿½o localizado.';
		
	ELSE
		/*Email*/
		EXECUTE 'SELECT COALESCE(qle.email_str, '''')
		           FROM geqlemail qle 
			  WHERE qle.id_geqlcliente_int = '|| idqlcliente ||'
			    AND qle.classificacao_str != ''3 - Ruim''
			  ORDER BY qle.classificacao_str' INTO retorno;

		IF retorno = '' THEN
	
			/*Endereï¿½o*/
			EXECUTE 'SELECT COALESCE(qle.endereco_str,'''')  || '', '' ||
				        COALESCE(qle.complemento_str,'') || '', '' || 
				        COALESCE(qle.bairro_str,'')      || '', '' || 
					COALESCE(qle.cidade_str,'')      || '', '' || 
					COALESCE(qle.estado_str,'')      || '', '' || 
					COALESCE(qle.cep_str,'')
				   FROM geqlendereco qle
				  WHERE qle.id_geqlcliente_int = '|| idqlcliente ||'
				    AND qle.classificacao_str != ''3 - Ruim''
				  ORDER BY qle.classificacao_str)' INTO retorno;
		END IF;

	END IF;	

	RETURN retorno;
 
END;
$$;

--
-- TOC entry 1851 (class 1255 OID 26393)
-- Name: f_calc_eleva(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $$
/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;
		

		--MULTA
		multa = 0;

		multa = round(principal*(pcmulta / 100), 2);

		--JUROS
		juros = round((principal*(pcjuros / 100)) * dias, 2);

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
		percdesc = 0;
		cp = 0;
		
		
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal + multa + ho + despesa + notificacao + juros + dcp - vldesctotal, 2);
		
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	        RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || vldesctotal || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

		IF iparcelas > 1 THEN

			EXECUTE 'SELECT f_parcelamento_calculo(''' || tabtemp || '''::TEXT, 
									       ''' || tabtempparcelamento || '''::TEXT, 
									       ' || idcontrato || '::BIGINT, 
									       ''' || registro.idparcela || '''::BIGINT,
									       ''' || scalculo || '''::TEXT, 
									       ''' || datacalculo || ''', 
									       ' || (iparcelas) || ')';	 

			--Arredondamento
			FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
									id_cbcalculoparcela_int
							FROM ' || tabtempparcelamento || ' 
							WHERE id_cbcalculoparcela_int = ' || scalculo || '
							AND id_cbparcela_int = ' || registro.idparcela
			LOOP
				EXECUTE 'SELECT f_ajustaparcelamento_calculo(''' || tabtemp || '''::TEXT, 
									     ''' || tabtempparcelamento || '''::TEXT, 
									     ''' || scalculo || '''::TEXT,
									     ''' || l_rsregistroaux.plano_acordo_int || ''', 
									     ' || idcontrato || ', 
									     ' || registro.idparcela || ' )';
			END LOOP;

		END IF;
	END LOOP;

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 200
				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo 200 reais.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 9 then
			retorno = tabtemp || '|' || tabtempparcelamento || '|' || 'SOLICITA SENHA:';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$$;

--
-- TOC entry 1852 (class 1255 OID 26397)
-- Name: f_calc_eleva_16122021_principal(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_16122021_principal(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;
		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		--MULTA
		multa = 0;
-- 		multa = round(principal*(pcmulta / 100), 2);

		--JUROS
-- 		juros = round((principal*(pcjuros / 100)) * dias, 2);
		juros = 0;

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;

		--CHAMADO 397247 - ANDRï¿½ CARLOS --CHAMADO 420187  - ANDRï¿½ CARLOS
		IF pesodesc > 0 THEN
			IF iparcelas < 2 THEN
				vldescprinc := ROUND((round(principal * 0.4, 2)) * pesodesc, 2); 
				percdesc = 0.4;
			ELSE
				vldescprinc := ROUND((round(principal  *0.2, 2)) * pesodesc, 2); 
				percdesc = 0.2;
			END IF;
		END IF;
		
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal + multa + ho + despesa + notificacao + juros + dcp - vldesctotal, 2);
		
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	        RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || vldesctotal || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

		IF iparcelas > 1 THEN

			EXECUTE 'SELECT f_parcelamento_calculo(''' || tabtemp || '''::TEXT, 
									       ''' || tabtempparcelamento || '''::TEXT, 
									       ' || idcontrato || '::BIGINT, 
									       ''' || registro.idparcela || '''::BIGINT,
									       ''' || scalculo || '''::TEXT, 
									       ''' || datacalculo || ''', 
									       ' || (iparcelas) || ')';	 

			--Arredondamento
			FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
									id_cbcalculoparcela_int
							FROM ' || tabtempparcelamento || ' 
							WHERE id_cbcalculoparcela_int = ' || scalculo || '
							AND id_cbparcela_int = ' || registro.idparcela
			LOOP
				EXECUTE 'SELECT f_ajustaparcelamento_calculo(''' || tabtemp || '''::TEXT, 
									     ''' || tabtempparcelamento || '''::TEXT, 
									     ''' || scalculo || '''::TEXT,
									     ''' || l_rsregistroaux.plano_acordo_int || ''', 
									     ' || idcontrato || ', 
									     ' || registro.idparcela || ' )';
			END LOOP;

		END IF;
	END LOOP;

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 200				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo R$ 200,00.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 12 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 12X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$_$;

--
-- TOC entry 1853 (class 1255 OID 26407)
-- Name: f_calc_eleva_19112021_juros(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_19112021_juros(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
 dia_som		double precision;
 dias_atraso   date;
   vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas	 DOUBLE PRECISION;
  vlr_total 	 DOUBLE PRECISION;
  num_parc 		 BIGINT;
 desconto_aux	 DOUBLE PRECISION;
 desconto_total  DOUBLE PRECISION;
 principal_Aux	 double precision;
 total_aux		 double precision;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

      pesodesc := ROUND(pesodesc,2);
	  dia_som = 0;
	  -- dias_atraso  = 0;
	  vlr_prim_parcela  = 0;
	  id_parcela    = 0;	
	  id_calc_parcelamento  = 0;
	  id_parcela_s    = 0;
	  vlr_parcelas	  = 0;
	  vlr_total 	  = 0;
	  num_parc 		  = 0;
	  desconto_aux	  = 0;
	  desconto_total  = 0;
	  principal_Aux	  = 0;
	  total_aux		  = 0;
        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	-- --Qtde de parcelas do contrato
	-- FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ')'
	-- LOOP
		-- nomealuno = registro.nome_aluno;
		-- nomealuno = replace(nomealuno,'''',' ');
		
                -- --RAISE NOTICE 'nome do aluno %',nomealuno;
		
	-- END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;
	RAISE NOTICE ' parcelas : %', parcelas;
	RAISE NOTICE ' totprinc : %', totprinc;
	
	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	-- FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 -- FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and replace(info_adicional_10_str,'''''''','' '')
 -- = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	-- LOOP
 		-- vencidas = registrocalc.vencidas;
 		-- --RAISE NOTICE 'teste_lu';

 	-- END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	-- FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					-- FROM cbparcela
						
				      -- WHERE data_vencimento_dat < current_date
				      -- AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	-- LOOP
		-- totvencidas = registrocalc.vencidas;
		
	-- END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str,
												p.data_vencimento_dat As daa
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			dias_atraso = registrocalc.daa;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			--pcmulta = 0.1;
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;
		
		---- DIAS 
		IF dias <> 0 THEN 
		   dia_som = (current_date - dias_atraso);
		ELSE 
		   dia_som = 0;
		END IF;
		--MULTA
		multa = 0;

		multa = principal*( pcmulta / 100);
		RAISE NOTICE 'pcmulta: %', pcmulta;
		--JUROS	
		--pcjuros = 0.002; --VALOR FIXO
		
		--juros = principal* (pcjuros / 100) * dia_som ;
		juros =ROUND(principal * (pcjuros / 100) * dia_som, 2);
		--juros = round(principal * pcjuros * dias, 2);

		--CP
		dcp = 0;
				
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		-- CHAMADO 397247 LEONARDO
		if pesodesc > 0 then
			multa = principal*(1.0 / 100) * 1 - pesodesc;
			juros = ((principal*(0.002 / 100)) * dia_som) * 1 - pesodesc;
			RAISE NOTICE 'principal:%',principal;
			RAISE NOTICE 'pcmulta:%',pcmulta;
			RAISE NOTICE 'pesodesc:%',pesodesc;
		end if;	

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;

		if pesodesc > 0 then
			vldesctotal := (vldescprinc + vldesccp + vldescmulta + vldescjuros);
		end if;
	

		vldesctotal := (vldescprinc + vldesccp + vldescmulta + vldescjuros);
		
		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		/*IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;*/

	
		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
		percdesc = 0;
		cp = 0;
		
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = principal  + ho + despesa + notificacao +  dcp - vldesctotal;
		desconto_total = vldesctotal;
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	        RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || desconto_total || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

		END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
			RAISE NOTICE 'vlr_parcelas: %', vlr_parcelas;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
			RAISE NOTICE 'num_parc: %', num_parc;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
					END LOOP;
			END LOOP;
	END IF;
	-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totvencidas = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
		--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);	
	END IF;	

	 IF iparcelas > 1 THEN

		  FOR registro IN EXECUTE 'WITH sub as (
				 select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				 )
				 Select count(1) as cont from sub where valor < 100
				 '
		 LOOP
			 IF registro.cont >=1 THEN
				 retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo 100 reais.';
			 END IF;
		 END LOOP;

		
	 END IF;

	IF retorno = '' THEN
		
		if iparcelas > 12 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 12X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$$;

--
-- TOC entry 1854 (class 1255 OID 26411)
-- Name: f_calc_eleva_19112021_principal(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_19112021_principal(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  principal_Aux double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  desconto_total DOUBLE PRECISION;
  calc_dias      DATE;
  dia_juros      BIGINT;
  total_aux		DOUBLE PRECISION;
  valor			DOUBLE PRECISION;
  vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas DOUBLE PRECISION;
  vlr_total  DOUBLE PRECISION;
  num_parc  BIGINT;
desconto_aux DOUBLE PRECISION;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);
		desconto_total := 0;
        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ') limit 1'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	--RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
												p.data_vencimento_dat AS daa,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			calc_dias = registrocalc.daa;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			--pcjuros = 0.02;
			--pcmulta = 0.1;

			IF dias < 0 THEN
				dias = 0;
			END IF;
		EXECUTE ' SELECT id_cbparcela_int As id 
					From cbparcela 
					Where id_cbcontrato_int = ' || idcontrato || ' limit 1' INTO id_parcela;

		-- SFMARQUES 
		IF dias <> 0 THEN 
			dia_juros = CURRENT_DATE - calc_dias ; 
		ELSE
			dia_juros = 0;
		END IF;
		
			
		END LOOP;
		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		-- Chamado para alteraï¿½ï¿½o DEV0000350 - sfmarques 05/04/2024
		--MULTA
		--multa = 0;
		multa = principal* (pcmulta/ 100);
		--multa = TRUNC(multa:: NUMERIC, 2):: DOUBLE PRECISION;
		raise notice 'principal:%', principal;
		--JUROS
		--juros =ROUND((principal*(pcjuros / 100)) * dias, 2);
		juros =ROUND(principal * (pcjuros /100) * dia_juros, 2);
		--juros = 0;

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := (principal*0.2) * pesodesc; 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;

		--CHAMADO 397247 - ANDRï¿½ CARLOS
		IF pesodesc > 0 THEN
			IF iparcelas < 2 THEN
				vldescprinc := (principal * 0.2) * pesodesc ; 
				percdesc = 0.2;
			ELSE
				vldescprinc := (principal  * 0.1) * pesodesc ; 
				percdesc = 0.1;
			END IF;
		END IF;
		
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		--vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		--vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := (vldescprinc + vldesccp  + vldescmulta + vldescjuros);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--RAISE NOTICE 'principal:%', principal;
		--TOTAL A PAGAR
		

		vldesctotal = ROUND (vldesctotal, 2);
		total = principal + ho + despesa + notificacao + dcp - vldesctotal;
		total = TRUNC (total:: NUMERIC, 2):: DOUBLE PRECISION;
		desconto_total = vldesctotal ;

		RAISE NOTICE 'total = %', total;
		--RAISE NOTICE 'TOTAL = % + % + % + % ;',vldesctotal, multa, juros, total ;
                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || desconto_total || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
	END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
													 
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
				
			END LOOP;
		END LOOP;
		
	END IF;
		--DESPESA SOMENTE PARA PRIMEIRA PARCELA ( ENTRADA )
		despesa = 0;
		-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totprinc = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
	--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);
			

	END IF;	

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo 100 reais.';
			END IF;
		END LOOP;

	
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 12 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 12X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
	
	RETURN retorno;
END;

$$;

--
-- TOC entry 1855 (class 1255 OID 26421)
-- Name: f_calc_eleva_2016_2018_pensi(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_2016_2018_pensi(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $_$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
 idparcelas bigint;
 dataverificacao date;
 contrato_pensi bigint;
 calc_dias		date;
 dia_juros		bigint;
 desconto_total double precision;
   vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas	 DOUBLE PRECISION;
  vlr_total 	 DOUBLE PRECISION;
  num_parc 		 BIGINT;
 desconto_aux	 DOUBLE PRECISION;
 principal_Aux	 double precision;
 total_aux		 double precision;
--bQuitacao		boolean;
  
BEGIN

	dataverificacao = current_date;

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ') LIMIT 1 '
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT valor_principal_num AS totprinc,
								data_vencimento_dat AS daa
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;
		calc_dias = registro.daa;
	END LOOP;
	
	
	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
    RAISE NOTICE '-----------------------------INICIO PARCELA--------------------------';
	            
	       FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			datacontrato = registrocalc.datvencimento;	
			--pcmulta = 0.1;
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;	
		
		FOR registrocalc IN EXECUTE 'SELECT p.id_cbparcela_int AS idparcelas,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbcontrato_int = ' || idcontrato  || ' AND data_vencimento_dat >= ''2020-01-01'' '
		LOOP
			idparcelas = registrocalc.idparcelas;
			
			IF parcelas  like '%' || idparcelas::text || '%' THEN			
				RAISE NOTICE 'parcelas = %', parcelas;

				RAISE NOTICE 'idparcelas = %', idparcelas;
				retorno = 'ERRO BANCO: As parcelas selecionadas nï¿½o podem ser negociadas nesta campanha, por nï¿½o atender(em) ao ano letivo correspondente. Selecione apenas as parcelas vigentes, que correspondem ao perï¿½odo apï¿½s *01/01/2020*. Em seguida, clique novamente em CARREGAR OPï¿½ï¿½ES.';			
			END IF;	
		END LOOP;	
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		
		-- SFMARQUES 
		IF dias <> 0 THEN 
			dia_juros = CURRENT_DATE - calc_dias ; 
		ELSE 
			dia_juros = 0;
		END IF;
		
		--MULTA
		--multa = 0;
 		multa = principal*(pcmulta/ 100);

		--JUROS
 		juros = round((principal* (pcjuros/100) * dia_juros), 2);
		--juros = 0;

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;

    RAISE NOTICE 'datacontrato = %', datacontrato;
	
	/*======================= DESCONTOS ï¿½ VISTA E ï¿½ PRAZO =======================
							  CHAMADO: 3413 (BGMMESQUITA)
	A campanha aplica um desconto elevado para contratos que possuem alguma percela pertencentes
	a escola Pensi. Para verificar  no NPCOB quais contratos possui esta marcaï¿½ï¿½o, basta entrar na tela de Contrato,
	Clicar em "Detalhes Extras" e na parte inferior onde estï¿½ "Detalhes Parcelas" marcar a opï¿½ï¿½o "Escola_Parcela" no combo box.
	Apï¿½s isso irï¿½ aparecer um Grid, indo para a direita do Grid tera a coluna "escola" com a informaï¿½ï¿½o.
	*/
	
	--Verificando se o contrato possui alguma parcela com a marcaï¿½ï¿½o Pensi
	FOR registrocalc IN EXECUTE 'SELECT COUNT (*) as escola FROM cbparcela
								WHERE id_cbcontrato_int = ' || idcontrato || 
								'AND info_adicional_11_str = ''Pensi'''
	LOOP 
		contrato_pensi = registrocalc.escola;
		RAISE NOTICE '===========CONTRATO COM MARCAï¿½ï¿½O PENSI:%', contrato_pensi;
		
	END LOOP;
	--Se alguma parcela tiver a Marcaï¿½ï¿½o Pensi, desconto ï¿½ vista: 60% e parcelado: 40%
	IF contrato_pensi > 1 THEN
		IF datacontrato > '2015-12-31'  AND  datacontrato < '2019-01-01' THEN
			
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.60, 2)) * pesodesc, 2); 
				percdesc = 0.6;				
			ELSE
				vldescprinc := ROUND((round(principal * 0.40, 2)) * pesodesc, 2); 	
				percdesc = 0.4;		
			END IF;
				
		END IF;
	
	ELSE
		--Se nï¿½o tiver marcaï¿½ï¿½o Pensi, desconto ï¿½ vista: 40% e parcelado: 20%
		IF datacontrato > '2015-12-31'  AND  datacontrato < '2019-01-01' THEN
			
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.40, 2)) * pesodesc, 2); 
				percdesc = 0.4;				
			ELSE
				vldescprinc := ROUND((round(principal * 0.20, 2)) * pesodesc, 2); 	
				percdesc = 0.2;		
			
			END IF;
		END IF;
	END IF;
	
	
 	RAISE NOTICE 'dataverificacao = %', dataverificacao;

	RAISE NOTICE 'vldescprinc = %', vldescprinc;
	RAISE NOTICE 'percdesc = %', percdesc;
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		--vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		--vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := vldescprinc + vldesccp + vldescmulta + vldescjuros;
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round((principal + ho + despesa + notificacao + dcp - vldesctotal), 2);
		desconto_total = vldesctotal ;
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	     RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || desconto_total || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;
END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
					END LOOP;
			END LOOP;
	END IF;
	-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totprinc = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
		--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);	
	END IF;	
	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo R$ 200,00.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 12 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 12X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$_$;

--
-- TOC entry 1856 (class 1255 OID 26426)
-- Name: f_calc_eleva_2016_2019_principal(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_2016_2019_principal(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $_$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
 idparcelas bigint;
 dataverificacao date;
 dias_c 	bigint;
 desc_total		double precision;
  desconto_total double precision;
   vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas	 DOUBLE PRECISION;
  vlr_total 	 DOUBLE PRECISION;
  num_parc 		 BIGINT;
 desconto_aux	 DOUBLE PRECISION;
 principal_Aux	 double precision;
 total_aux		 double precision;
--bQuitacao		boolean;
  
BEGIN

	dataverificacao = current_date;

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ') limit 1'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
    RAISE NOTICE '-----------------------------INICIO PARCELA--------------------------';
	            
	       FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			datacontrato = registrocalc.datvencimento;			
			--pcmulta = 0.1;
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;	
		
		FOR registrocalc IN EXECUTE 'SELECT p.id_cbparcela_int AS idparcelas,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbcontrato_int = ' || idcontrato  || ' AND data_vencimento_dat >= ''2020-01-01'' '
		LOOP
			idparcelas = registrocalc.idparcelas;
			
			IF parcelas  like '%' || idparcelas::text || '%' THEN			
				RAISE NOTICE 'parcelas = %', parcelas;

				RAISE NOTICE 'idparcelas = %', idparcelas;
				retorno = 'ERRO BANCO: As parcelas selecionadas nï¿½o podem ser negociadas nesta campanha, por nï¿½o atender(em) ao ano letivo correspondente. Selecione apenas as parcelas vigentes, que correspondem ao perï¿½odo apï¿½s *01/01/2020*. Em seguida, clique novamente em CARREGAR OPï¿½ï¿½ES.';			
			END IF;	
		END LOOP;	
		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		IF dias <> 0 THEN
			dias_c = (current_date - datacontrato);
		ELSE
			dias_c = 0;
		END IF;
		--MULTA
		multa = 0;
		multa = principal*(pcmulta / 100);

		--JUROS
		juros = 0;
 		juros = ROUND((principal* (pcjuros/100) * dias_c), 2);
		

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;

    RAISE NOTICE 'datacontrato = %', datacontrato;

	
	IF datacontrato < '2020-01-01' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.40, 2)) * pesodesc, 2); 
				percdesc = 0.4;				
			ELSE
				vldescprinc := ROUND((round(principal * 0.20, 2)) * pesodesc, 2); 	
			    percdesc = 0.2;		
			END IF;
	END IF;

	 IF dataverificacao < '2022-12-31' and  datacalculo < '2022-12-31' THEN		
	  	RAISE NOTICE 'entrou aqui = %', dataverificacao;
		IF datacontrato < '2020-01-01' THEN
				IF Iparcelas = 1 THEN
					vldescprinc := ROUND((round(principal * 0.60, 2)) * pesodesc, 2); 
					percdesc = 0.6;				
				ELSE
					vldescprinc := ROUND((round(principal * 0.40, 2)) * pesodesc, 2); 	
					percdesc = 0.4;		
				END IF;
		END IF;
	 END IF;
 	RAISE NOTICE 'dataverificacao = %', dataverificacao;

	RAISE NOTICE 'vldescprinc = %', vldescprinc;
	RAISE NOTICE 'percdesc = %', percdesc;
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		--vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		--vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal  + ho + despesa + notificacao  + dcp - vldesctotal, 2);
		desc_total = vldesctotal;
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	     RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || desc_total || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;
END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
					END LOOP;
			END LOOP;
	END IF;
	-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totprinc = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
		--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);	
	END IF;	

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo R$ 200,00.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 12 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 12X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$_$;

--
-- TOC entry 1857 (class 1255 OID 26437)
-- Name: f_calc_eleva_2020_2021_principal(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_2020_2021_principal(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $_$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  idparcelas  bigint;
  dataverificacao date;
  calc_dias	bigint;
  decont_total	double precision;
    vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas	 DOUBLE PRECISION;
  vlr_total 	 DOUBLE PRECISION;
  num_parc 		 BIGINT;
 desconto_aux	 DOUBLE PRECISION;
 desconto_total  DOUBLE PRECISION;
 principal_Aux	 double precision;
 total_aux		 double precision;
  --bQuitacao		boolean;
  
BEGIN
	dataverificacao = current_date;

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);
		
		RAISE NOTICE 'idcontrato = %', idcontrato;

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ') limit 1'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
    RAISE NOTICE '-----------------------------INICIO PARCELA--------------------------';
	            
	       FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			datacontrato = registrocalc.datvencimento;			
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;	
		
		FOR registrocalc IN EXECUTE 'SELECT p.id_cbparcela_int AS idparcelas,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbcontrato_int = ' || idcontrato  || ' AND data_vencimento_dat < ''2020-01-01'' '
		LOOP
			idparcelas = registrocalc.idparcelas;
			
			IF parcelas  like '%' || idparcelas::text || '%' THEN			
				RAISE NOTICE 'parcelas = %', parcelas;

				RAISE NOTICE 'idparcelas = %', idparcelas;
				retorno = 'ERRO BANCO: As parcelas selecionadas nï¿½o podem ser negociadas nesta campanha, por nï¿½o atender(em) ao ano letivo correspondente. Selecione apenas as parcelas vigentes, que correspondem ao perï¿½odo apï¿½s *01/01/2020*. Em seguida, clique novamente em CARREGAR OPï¿½ï¿½ES.';			
			END IF;	
		END LOOP;	
		
		IF dias <> 0 THEN
			calc_dias = (current_date - datacontrato);
		ELSE
			calc_dias = 0;
		END IF;
		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		--MULTA
		--multa = 0;
 		multa = principal* (pcmulta/ 100);

		--JUROS
 		juros = round((principal* (pcjuros/100) * calc_dias), 2);
		--juros = 0;

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;
		
 RAISE NOTICE 'datacontrato = %', datacontrato;

 -- Descontos para parcelas no ano de 2020 
		IF datacontrato >= '2020-01-01' AND datacontrato < '2021-01-01' THEN
				IF Iparcelas = 1 THEN
					vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2); 
					percdesc = 0.30;

				ELSE
					vldescprinc := ROUND((round(principal * 0.15, 2)) * pesodesc, 2);
					percdesc = 0.15;				
				END IF;
		END IF;
		
 -- Descontos para parcelas posterior de 2021  
		IF datacontrato >= '2021-01-01' THEN
				IF Iparcelas = 1 THEN
					vldescprinc := ROUND((round(principal * 0.20, 2)) * pesodesc, 2); 
					percdesc = 0.20;

				ELSE
					vldescprinc := ROUND((round(principal * 0.10, 2)) * pesodesc, 2);
					percdesc = 0.10;				
				END IF;
		END IF;
		RAISE NOTICE 'vldescprinc = %', vldescprinc;
		RAISE NOTICE 'percdesc = %', percdesc;
		
 -- Descontos para parcelas no ano de 2020 atï¿½ 31/12/2022
	 IF dataverificacao < '2022-12-31' and datacontrato < '2022-12-31' THEN			
		IF datacontrato >= '2020-01-01' AND datacontrato < '2021-01-01' THEN
				IF Iparcelas = 1 THEN
					vldescprinc := ROUND((round(principal * 0.45, 2)) * pesodesc, 2); 
					percdesc = 0.45;

				ELSE
					vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2);
					percdesc = 0.30;				
				END IF;
		END IF;
	 END IF;
	 
 -- Descontos para parcelas posterior de 2021 atï¿½ 31/12/2022
	 IF dataverificacao < '2022-12-31' and datacalculo < '2022-12-31' THEN		 	
			IF datacontrato >= '2021-01-01' THEN
				IF Iparcelas = 1 THEN
					vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2); 
					percdesc = 0.30;

				ELSE
					vldescprinc := ROUND((round(principal * 0.20, 2)) * pesodesc, 2);
					percdesc = 0.20;				
				END IF;
		END IF;
	 END IF;
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		--vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		--vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal + ho + despesa + notificacao  + dcp - vldesctotal, 2);
		decont_total =  vldesctotal;
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	        RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || decont_total || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

	END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
					END LOOP;
			END LOOP;
	END IF;
	-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totprinc = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
		--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);	
	END IF;	

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo R$ 100,00.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 15 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 15X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$_$;

--
-- TOC entry 1858 (class 1255 OID 26441)
-- Name: f_calc_eleva_23052022_principal(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_23052022_principal(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $_$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  dias_atraso	date;
  dia_som  double precision;
  vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas	 DOUBLE PRECISION;
  vlr_total 	 DOUBLE PRECISION;
  num_parc 		 BIGINT;
 desconto_aux	 DOUBLE PRECISION;
 desconto_total  DOUBLE PRECISION;
 principal_Aux	 double precision;
 total_aux		 double precision;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ') limit 1'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str,
												p.data_vencimento_dat As daa
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			dias_atraso = registrocalc.daa;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			--pcmulta = 0.1;
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;
		
			---- DIAS 
		IF dias <> 0 THEN
		   dia_som = (current_date - dias_atraso); 
		ELSE
		   dia_som = 0;
		END IF;
		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		--MULTA
		multa = 0;
			multa = principal*(pcmulta / 100);

		--JUROS
		juros = round(principal* (pcjuros/100) * dias, 2);
	

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;

		--CHAMADO 397247 - ANDRï¿½ CARLOS --CHAMADO 420187  - ANDRï¿½ CARLOS -- CHAMADO 544150  ANDRï¿½ CARLOS
		IF pesodesc > 0 THEN
			IF iparcelas < 2 THEN
				vldescprinc := ROUND((round(principal * 0.35, 2)) * pesodesc, 2); 
				percdesc = 0.35;
			ELSE
				vldescprinc := ROUND((round(principal  *0.2, 2)) * pesodesc, 2); 
				percdesc = 0.2;
			END IF;
		END IF;

		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		--vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		--vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal + ho + despesa + notificacao + dcp - vldesctotal , 2);
		vldesctotal = vldesctotal;
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	    RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || vldesctotal || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;
	
	END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
					END LOOP;
			END LOOP;
	END IF;
	-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totprinc = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
		--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);	
	END IF;	
	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo R$ 100,00.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 15 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 15X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$_$;

--
-- TOC entry 1859 (class 1255 OID 26452)
-- Name: f_calc_eleva_blackfriday_2023(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_blackfriday_2023(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $_$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno           TEXT;
  scalculo          TEXT;
  registro          RECORD; 
  registrocalc      RECORD;
  l_rsregistroaux   RECORD;
  total             DOUBLE PRECISION; 
  principal         DOUBLE PRECISION;
  multa             DOUBLE PRECISION;
  juros             DOUBLE PRECISION;
  sdesc             DOUBLE PRECISION;  
  ho                DOUBLE PRECISION;
  pcho              DOUBLE PRECISION;  
  despesa           DOUBLE PRECISION;
  dias              BIGINT;   
  totprinc          DOUBLE PRECISION;
  cp				double precision;
  datacontrato		DATE;
  estado			character varying;
  pcjuros			double precision;
  pcmulta			double precision;
  pcdesc			double precision;
  notificacao		double precision;
  valoresho			text;
  percho			double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas			bigint;
  vincendas			bigint;
  pesodesc			double precision;
  vldesccp			double precision;
  dcp				double precision;
  dcpmax			double precision;
  dcpmin			double precision;
  percdesc			double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas				double precision;
  nomealuno			text;
  idparcelas 	 	bigint;
  dataverificacao 	date;

  --bQuitacao		boolean;
  
BEGIN
	dataverificacao = current_date;

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        
	IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
	END IF;

	pesodesc := ROUND(pesodesc,2);
	
	--RAISE NOTICE 'idcontrato = %', idcontrato;

	scalculo = '';
	
	--Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
	FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
		LOOP
		scalculo = registro.calculo;
	END LOOP;

	total = 0;
	vencidas = 0;
	vincendas = 0;
	pcjuros = 0;
	
	--PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

	--DESPESA
	despesa = 0;
	FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
							   FROM cbdespesa d 
							   JOIN cbvalortipodespesa vtd
								 ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
							   JOIN cbtipodespesa td
								 ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
								AND td.cobrar_cliente_str = ''S''
							  WHERE id_cbcontrato_int = ' || idcontrato || '
								AND situacao_str = ''A''
								AND td.id_cbtipodespesa_int <> 1'
	LOOP
	despesa = registro.despesa;
	END LOOP;

	--NOTIFICACAO
	notificacao = 0;
	FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
							   FROM cbdespesa d 
							   JOIN cbvalortipodespesa vtd
								 ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
							   JOIN cbtipodespesa td
								 ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
								AND td.cobrar_cliente_str = ''S''
							  WHERE id_cbcontrato_int = ' || idcontrato || '
								AND situacao_str = ''A''
								AND td.id_cbtipodespesa_int = 1'
	LOOP
		notificacao = registro.notificacao;
	END LOOP;

	IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;
	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;
 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;
 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
	LOOP
		totvencidas = registrocalc.vencidas;
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
		RAISE NOTICE '-----------------------------INICIO PARCELA--------------------------';
	            
	       FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			datacontrato = registrocalc.datvencimento;			
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;	
		
		FOR registrocalc IN EXECUTE 'SELECT p.id_cbparcela_int AS idparcelas,
	                                            p.data_vencimento_dat as datvencimento
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbcontrato_int = ' || idcontrato  || ' AND data_vencimento_dat < ''2020-01-01'' '
		LOOP
			idparcelas = registrocalc.idparcelas;
			
			IF parcelas  like '%' || idparcelas::text || '%' THEN			
				RAISE NOTICE 'parcelas = %', parcelas;

				RAISE NOTICE 'idparcelas = %', idparcelas;
				retorno = 'ERRO BANCO: As parcelas selecionadas nï¿½o podem ser negociadas nesta campanha, por nï¿½o atender(em) ao ano letivo correspondente. Selecione apenas as parcelas vigentes, que correspondem ao perï¿½odo apï¿½s *01/01/2020*. Em seguida, clique novamente em CARREGAR OPï¿½ï¿½ES.';			
			END IF;	
		END LOOP;	

		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		--MULTA
		multa = 0;
		--multa = round(principal*(pcmulta / 100), 2);

		--JUROS
		--juros = round((principal*(pcjuros / 100)) * dias, 2);
		juros = 0;

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;
		
		 RAISE NOTICE 'datacontrato = %', datacontrato;

		--CHAMADO 4274 - 21/11/2023 - BGMMESQUITA - ATUALIZAï¿½ï¿½O DE DESCONTOS PARA BLACK FRIDAY
		
		--DESCONTO PARA PARCELAS ATï¿½ 2019
		IF datacontrato <= '2019-01-01' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.60, 2)) * pesodesc, 2); 
				percdesc = 0.60;
				ELSE
					vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2);
					percdesc = 0.30;				
				END IF;
		END IF;
		
		--DESCONTO PARA PARCELAS DE 2020
		IF datacontrato >= '2020-01-01' AND datacontrato < '2021-01-01' THEN
				IF Iparcelas = 1 THEN
					vldescprinc := ROUND((round(principal * 0.50, 2)) * pesodesc, 2); 
					percdesc = 0.50;

				ELSE
					vldescprinc := ROUND((round(principal * 0.25, 2)) * pesodesc, 2);
					percdesc = 0.25;				
				END IF;
		END IF;
				
		--DESCONTO PARA PARCELAS DE 2021
		IF datacontrato >= '2021-01-01' AND datacontrato < '2022-01-01' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.40, 2)) * pesodesc, 2); 
				percdesc = 0.40;
			ELSE
				vldescprinc := ROUND((round(principal * 0.20, 2)) * pesodesc, 2);
				percdesc = 0.20;				
			END IF;
		END IF;
				
		--DESCONTO PARA PARCELAS DE 2022
		IF datacontrato >= '2021-01-01' AND datacontrato < '2022-01-01' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2); 
				percdesc = 0.30;
			ELSE
				vldescprinc := ROUND((round(principal * 0.15, 2)) * pesodesc, 2);
				percdesc = 0.15;				
			END IF;
		END IF;
		
		RAISE NOTICE 'vldescprinc = %', vldescprinc;
		RAISE NOTICE 'percdesc = %', percdesc;
			 
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal + multa + ho + despesa + notificacao + juros + dcp - vldesctotal, 2);
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
		RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || vldesctotal || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

		IF iparcelas > 1 THEN

			EXECUTE 'SELECT f_parcelamento_calculo(''' || tabtemp || '''::TEXT, 
									       ''' || tabtempparcelamento || '''::TEXT, 
									       ' || idcontrato || '::BIGINT, 
									       ''' || registro.idparcela || '''::BIGINT,
									       ''' || scalculo || '''::TEXT, 
									       ''' || datacalculo || ''', 
									       ' || (iparcelas) || ')';	 

			--Arredondamento
			FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
									id_cbcalculoparcela_int
							FROM ' || tabtempparcelamento || ' 
							WHERE id_cbcalculoparcela_int = ' || scalculo || '
							AND id_cbparcela_int = ' || registro.idparcela
			LOOP
				EXECUTE 'SELECT f_ajustaparcelamento_calculo(''' || tabtemp || '''::TEXT, 
									     ''' || tabtempparcelamento || '''::TEXT, 
									     ''' || scalculo || '''::TEXT,
									     ''' || l_rsregistroaux.plano_acordo_int || ''', 
									     ' || idcontrato || ', 
									     ' || registro.idparcela || ' )';
			END LOOP;

		END IF;
	END LOOP;

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo R$ 100,00.';
			END IF;
		END LOOP;
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 15 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 15X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$_$;

--
-- TOC entry 1860 (class 1255 OID 26459)
-- Name: f_calc_eleva_blackfriday_2024(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_blackfriday_2024(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $$

/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  principal_Aux double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  desconto_total DOUBLE PRECISION;
  calc_dias      DATE;
  dia_juros      BIGINT;
  total_aux		DOUBLE PRECISION;
  valor			DOUBLE PRECISION;
  vlr_prim_parcela DOUBLE PRECISION;
  id_parcela    TEXT;	
  id_calc_parcelamento BIGINT;
  id_parcela_s   TEXT;
  vlr_parcelas DOUBLE PRECISION;
  vlr_total  DOUBLE PRECISION;
  num_parc  BIGINT;
desconto_aux DOUBLE PRECISION;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);
		desconto_total := 0;
        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ') limit 1'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	--RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
												p.data_vencimento_dat AS daa,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			calc_dias = registrocalc.daa;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			--pcjuros = 0.02;
			--pcmulta = 0.1;

			IF dias < 0 THEN
				dias = 0;
			END IF;
		EXECUTE ' SELECT id_cbparcela_int As id 
					From cbparcela 
					Where id_cbcontrato_int = ' || idcontrato || ' limit 1' INTO id_parcela;

		-- SFMARQUES 
		IF dias <> 0 THEN 
			dia_juros = CURRENT_DATE - calc_dias ; 
		ELSE
			dia_juros = 0;
		END IF;
		
			
		END LOOP;
		
		--CHAMADO 397247 - ANDRï¿½ CARLOS
		-- Chamado para alteraï¿½ï¿½o DEV0000350 - sfmarques 05/04/2024
		--MULTA
		--multa = 0;
		multa = principal*(pcmulta/ 100);
		--multa = TRUNC(multa:: NUMERIC, 2):: DOUBLE PRECISION;
		raise notice 'principal:%', principal;
		--JUROS
		--juros =ROUND((principal*(pcjuros / 100)) * dias, 2);
		juros =ROUND(principal * (pcjuros /100) * dia_juros, 2);
		--juros = 0;

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := (principal*0.2) * pesodesc; 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
 		percdesc = 0;
		cp = 0;

		--CHAMADO 397247 - ANDRï¿½ CARLOS
		IF pesodesc > 0 THEN
			IF iparcelas < 2 THEN
				vldescprinc := (principal * 0.2) * pesodesc ; 
				percdesc = 0.2;
			ELSE
				vldescprinc := (principal  * 0.1) * pesodesc ; 
				percdesc = 0.1;
			END IF;
		END IF;
		
		
		--Anos letivos iguais ou anteriores a 31/12/2020
		IF calc_dias <= '2021-01-01' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.60, 2)) * pesodesc, 2); 
				percdesc = 0.60;
				RAISE NOTICE 'entrou aqui no primeiro: %', vldescprinc; 
				ELSE
					vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2);
					percdesc = 0.30;
				RAISE NOTICE 'entrou aqui else primeiro: %', vldescprinc; 					
				END IF;
		END IF;
				
		--Ano letivo = 2021
		IF calc_dias >= '2021-01-01' AND calc_dias < '2022-01-01' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.50, 2)) * pesodesc, 2); 
				percdesc = 0.50;
				RAISE NOTICE 'entrou aqui no segundo: %', vldescprinc; 
			ELSE
				vldescprinc := ROUND((round(principal * 0.25, 2)) * pesodesc, 2);
				percdesc = 0.25;
				RAISE NOTICE 'entrou aqui else do segundo: %', vldescprinc; 
			END IF;
		END IF;
	
		--Anos letivos = 2022/2023
		IF calc_dias >= '2022-01-01' AND calc_dias <= '2023-12-31' THEN
			IF Iparcelas = 1 THEN
				vldescprinc := ROUND((round(principal * 0.30, 2)) * pesodesc, 2); 
				percdesc = 0.30;
				RAISE NOTICE 'entrou aqui no TERCEIRO: %', vldescprinc; 
			ELSE
				vldescprinc := ROUND((round(principal * 0.15, 2)) * pesodesc, 2);
				percdesc = 0.15;
				RAISE NOTICE 'entrou aqui no ELSE TERCEIRO: %', vldescprinc; 				
			END IF;
		END IF;
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		--vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		--vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := (vldescprinc + vldesccp  + vldescmulta + vldescjuros);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--RAISE NOTICE 'principal:%', principal;
		--TOTAL A PAGAR
		

		vldesctotal = ROUND (vldesctotal, 2);
		total = principal + ho + despesa + notificacao + dcp - vldesctotal;
		total = TRUNC (total:: NUMERIC, 2):: DOUBLE PRECISION;
		desconto_total = vldesctotal ;

		RAISE NOTICE 'total = %', total;
		--RAISE NOTICE 'TOTAL = % + % + % + % ;',vldesctotal, multa, juros, total ;
                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || desconto_total || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
	END LOOP;
	IF iparcelas > 1 THEN
			FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		LOOP
			EXECUTE 'SELECT f_parcelamento_entrada_padrao(''' || tabtemp || '''::TEXT, 
														   ''' || tabtempparcelamento || '''::TEXT, 
														   ' || idcontrato || '::BIGINT, 
														   ''' || registro.idparcela || '''::BIGINT,
														   ''' || scalculo || '''::TEXT, 
														   ''' || datacalculo || ''', 
														   ' || (iparcelas) || ',
														   ' || entrada || ',
														   ' || principal || ',
														   ' || pesodesc || ')';	
														   
				FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
													id_cbcalculoparcela_int
											FROM ' || tabtempparcelamento || ' 
											WHERE id_cbcalculoparcela_int = ' || scalculo || '
											AND id_cbparcela_int = ' || registro.idparcela
				LOOP
					EXECUTE 'SELECT f_ajustaparcelamento_padrao(''' || tabtemp || '''::TEXT, 
													 ''' || tabtempparcelamento || '''::TEXT, 
													 ''' || scalculo || '''::TEXT,
													 ''' || l_rsregistroaux.plano_acordo_int || ''', 
													 ' || idcontrato || ', 
													 ' || registro.idparcela || ' )';
													 
	--- AJUSTES DEVIDO A SOLICITAï¿½ï¿½O --- 96685 -- USER SFMARQUES -----  ATRIBUIR VALOR DE DIZIMA SOMENTE PARA A PRIMEIRA PARCELA (ENTRADA)
	--- SOMANDO OS VALORES DAS PARCELAS E ATRIBUINDO UM VALOR FIXO PARA TODAS
		EXECUTE 'SELECT SUM(valor_parcelamento_num)
			FROM '|| tabtempparcelamento ||'' INTO vlr_parcelas ;
	--- PEGANDO A QUANTIDADE DE id_cbcalculoparcelaparcelamento_int  
		EXECUTE 'SELECT COUNT(id_cbcalculoparcelaparcelamento_int)
			FROM '|| tabtempparcelamento ||'' INTO num_parc ;
	-- VALORES RECALCULADOS 	
		vlr_parcelas = vlr_parcelas / num_parc;
		vlr_parcelas = TRUNC(vlr_parcelas:: NUMERIC,2)::DOUBLE PRECISION;
		principal_Aux =	totprinc / num_parc;
		vlr_total = vlr_parcelas * num_parc;
	-- DESCONTO RECALCULADO CONFORME A BARRA 
		IF percdesc > 0 THEN
			desconto_aux = totprinc - (totprinc * percdesc);
			desconto_total = ROUND(totprinc,2) - desconto_aux;
		ELSE
			desconto_total = 0;
		END IF;	
	-- UPDATES PARA AJUSTAR O CALCULO COM A MODIFICAï¿½ï¿½O SOLICITADA 
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET principal_num = ' || principal_Aux || '  WHERE id_cbparcela_int in (' || parcelas || ')';
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || TRUNC(vlr_parcelas:: NUMERIC, 2):: DOUBLE PRECISION || '  WHERE id_cbparcela_int in (' || parcelas || ')';	
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET desconto_num = ' || desconto_total / num_parc || '  WHERE id_cbparcela_int in (' || parcelas || ')';
				
			END LOOP;
		END LOOP;
		
	END IF;
		--DESPESA SOMENTE PARA PRIMEIRA PARCELA ( ENTRADA )
		despesa = 0;
		-- INICIANDO COMANDOS PARA COLOCAR O RESTO DAS PARCELAS NO VALOR DA ENTRADA
	IF iparcelas > 1 THEN
	-- PEGANDO A PARCELA MAIS ANTIGA COM UM UNICO id_cbcalculoparcelaparcelamento_int PARA REALIZAR O UPDATE 
		EXECUTE 'SELECT id_cbparcela_int
				From ' || tabtempparcelamento || '
				Where id_cbcontrato_int = ' || idcontrato || ' ORDER BY id_cbparcela_int LIMIT 1' 
		INTO id_parcela;
		EXECUTE ' SELECT DISTINCT ON (id_cbparcela_int) id_cbcalculoparcelaparcelamento_int 
			FROM ' || tabtempparcelamento || '
			WHERE id_cbparcela_int = ' || id_parcela ||'
			ORDER BY id_cbparcela_int, id_cbcalculoparcelaparcelamento_int'
		INTO id_calc_parcelamento;		
	--- CASO TENHA DESCONTO PELA BARRA FOI NECESSARIO UM RECALCULO DO RESTO DAS PARCELAS 
		IF percdesc > 0 THEN
			totprinc = totprinc - (totprinc * percdesc);
			total_aux =  totprinc - vlr_total;
		ELSE
			total_aux =  totprinc - vlr_total;
		END IF;
	--- PEGANDO O VALOR DA PARCELA E RECALCULANDO COM O RESTO E REALIZANDO UM UPDATE LOGO EM SEGUIDA
		EXECUTE 'SELECT valor_parcelamento_num 
				FROM '|| tabtempparcelamento ||' 
				WHERE id_cbparcela_int = ' || id_parcela || '' INTO vlr_prim_parcela ;
		vlr_prim_parcela =  vlr_prim_parcela + total_aux ;
			
		EXECUTE 'UPDATE ' || tabtempparcelamento || ' SET valor_parcelamento_num = ' || ROUND(vlr_prim_parcela, 2) || ' WHERE id_cbcalculoparcelaparcelamento_int = ' || id_calc_parcelamento || '';
		RAISE NOTICE 'vlr_prim_parcela %',  ROUND(vlr_prim_parcela,2);
			

	END IF;	

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 100				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo 100 reais.';
			END IF;
		END LOOP;

	
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 12 then
			retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, parcela deve ser no mï¿½ximo atï¿½ 12X.';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
	
	RETURN retorno;
END;

$$;

--
-- TOC entry 1861 (class 1255 OID 26469)
-- Name: f_calc_eleva_entrada(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_entrada(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $$
/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  --bQuitacao		boolean;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	percho = -1;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;
		

		--MULTA
		multa = 0;

		multa = round(principal*(pcmulta / 100), 2);

		--JUROS
		juros = round((principal*(pcjuros / 100)) * dias, 2);

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
		percdesc = 0;
		cp = 0;
		
		
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;
		--TOTAL A PAGAR
		
		total = round(principal + multa + ho + despesa + notificacao + juros + dcp - vldesctotal, 2);
		
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	        RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || vldesctotal || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

		
	END LOOP;

	IF iparcelas > 1 THEN

		EXECUTE 'SELECT f_parcelamento_calculo_entrada(''' || tabtemp || '''::TEXT, 
								       ''' || tabtempparcelamento || '''::TEXT, 
								       ' || idcontrato || '::BIGINT, 
								       ''' || registro.idparcela || '''::BIGINT,
								       ''' || scalculo || '''::TEXT, 
								       ''' || datacalculo || ''', 
								       ' || (iparcelas) || ',
								       ' || entrada || ')';	

		--ARRUMA ARREDONDAMENTO DA ENTRADA
		--ESSA ##### Nï¿½O FUNCIONA, VOU DEIXAR FIXO

		FOR l_rsregistroaux in EXECUTE 'SELECT sum(valor_parcelamento_num) as valorentrada from ' || tabtempparcelamento || ' where parcela_parcelamento_int = 0'
		LOOP
			IF l_rsregistroaux.valorentrada <> entrada THEN
				EXECUTE 'UPDATE ' || tabtempparcelamento || ' set valor_parcelamento_num = valor_parcelamento_num - (' || l_rsregistroaux.valorentrada - entrada || ') 
					WHERE id_cbparcela_int = ' || registro.idparcela || ' AND  parcela_parcelamento_int = 0';
			END IF;
		END LOOP;

		--FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
		--LOOP

			--Arredondamento
			FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
									id_cbcalculoparcela_int
							FROM ' || tabtempparcelamento || ' 
							WHERE id_cbcalculoparcela_int = ' || scalculo || '
							AND id_cbparcela_int = ' || registro.idparcela
			LOOP
				EXECUTE 'SELECT f_ajustaparcelamento_calculo(''' || tabtemp || '''::TEXT, 
									     ''' || tabtempparcelamento || '''::TEXT, 
									     ''' || scalculo || '''::TEXT,
									     ''' || l_rsregistroaux.plano_acordo_int || ''', 
									     ' || idcontrato || ', 
									     ' || registro.idparcela || ' )';
			END LOOP;
		--END LOOP;
	END IF;

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 200
				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo 200 reais.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 9 then
			retorno = tabtemp || '|' || tabtempparcelamento || '|' || 'SOLICITA SENHA:';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$$;

--
-- TOC entry 1862 (class 1255 OID 26479)
-- Name: f_calc_eleva_excecao_072020(bigint, bigint, text, date, double precision, text, bigint, double precision, double precision, bigint, text, bigint, bigint, double precision, double precision, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_calc_eleva_excecao_072020(idtipopagamento bigint, idcontrato bigint, parcelas text, datacalculo date, desconto double precision, strvariavel text, iparcelas bigint, totalmanual double precision, entrada double precision, idcliente bigint, tabelafilha text, idusuario bigint, idcampanha bigint, pcentrada double precision, valorparcela double precision, tabtemp text, tabtempparcelamento text, boletagem text) RETURNS text
    LANGUAGE plpgsql
    AS $$
/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  retorno            TEXT;
  scalculo           TEXT;
  registro           RECORD; 
  registrocalc       RECORD;
  l_rsregistroaux    RECORD;
  total              DOUBLE PRECISION; 
  principal          DOUBLE PRECISION;
  multa              DOUBLE PRECISION;
  juros              DOUBLE PRECISION;
  sdesc              DOUBLE PRECISION;  
  ho                 DOUBLE PRECISION;
  pcho               DOUBLE PRECISION;  
  despesa            DOUBLE PRECISION;
  dias               BIGINT;   
  totprinc           DOUBLE PRECISION;
  cp			double precision;
  datacontrato		DATE;
  estado		character varying;
  pcjuros		double precision;
  pcmulta		double precision;
  pcdesc		double precision;
  notificacao		double precision;
  valoresho		text;
  percho		double precision;
  taxacadastro		double precision;
  taxacontrato		double precision;
  qtdparcela 		bigint;
  vencidas		bigint;
  vincendas		bigint;
  pesodesc		double precision;
  vldesccp		double precision;
  dcp			double precision;
  dcpmax		double precision;
  dcpmin		double precision;
  percdesc		double precision;
  vldescmulta		double precision;
  vldescjuros		double precision;
  vldesctotal		double precision;
  vldescprinc		double precision;
  tipoPagamento		bigint;
  totvencidas		double precision;
  totvincendas		double precision;
  taxas			double precision;
  nomealuno		text;
  --bQuitacao		boolean;

  l_svaloresho		text;
  l_sdespesa		text;
  l_smulta		text;
  l_sjurosmora		text;

  l_sdescmanual		text;
  l_stotmanual		text;
  l_dtotmanual		double precision;
  
BEGIN

	retorno = '';

	pesodesc = 0;
	pesodesc := desconto/100; -- percentual do desconto recebido por parametro (percentual da barra) dividido por 100  
        IF pesodesc > 1 THEN
		pesodesc = 1; -- 1 = cem por cento 
        END IF;

        pesodesc := ROUND(pesodesc,2);

        

	scalculo = '';
        --Pega o prï¿½ximo sequï¿½ncia do cï¿½lculo
        FOR registro IN EXECUTE 'SELECT NEXTVAL(''cbcalculos_seq'') AS calculo'
        LOOP
		scalculo = registro.calculo;
        END LOOP;

        total = 0;
        vencidas = 0;
        vincendas = 0;
        pcjuros = 0;
        
        --PRINCIPAL, DIAS ATRASO
	principal = 0;	 
	dias = -1;	

        --DESPESA
        despesa = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS despesa
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int <> 1'
        LOOP
		despesa = registro.despesa;
        END LOOP;

        --NOTIFICACAO
        notificacao = 0;
        FOR registro IN EXECUTE 'SELECT SUM(d.valor_num) AS notificacao
                                   FROM cbdespesa d 
                                   JOIN cbvalortipodespesa vtd
                                     ON vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
                                   JOIN cbtipodespesa td
                                     ON td.id_cbtipodespesa_int = vtd.id_cbtipodespesa_int  
                                    AND td.cobrar_cliente_str = ''S''
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                    AND situacao_str = ''A''
                                    AND td.id_cbtipodespesa_int = 1'
        LOOP
		notificacao = registro.notificacao;
        END LOOP;

        IF despesa IS NULL THEN
		despesa = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	IF notificacao IS NULL THEN
		notificacao = 0;
	ELSE
		IF iparcelas > 0 THEN
			--despesa = despesa / iparcelas;
		END IF;
	END IF;

	nomealuno = '';
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT distinct info_adicional_10_str AS nome_aluno FROM cbparcela  WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		nomealuno = registro.nome_aluno;		
	END LOOP;

	qtdparcela = 0;
	--Qtde de parcelas do contrato
	FOR registro IN EXECUTE 'SELECT COUNT(*) AS qtde_parcela FROM regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','')'
	LOOP
		qtdparcela = registro.qtde_parcela;		
	END LOOP;

	--Total de principal
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           FROM cbparcela
	                          WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;

	END LOOP;

	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vencidas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' and info_adicional_10_str = ''' || nomealuno || ''' AND data_vencimento_dat < CURRENT_DATE AND situacao_int not in (4,6)'
 	LOOP
 		vencidas = registrocalc.vencidas;

 	END LOOP;

 	--ACORDOS PERMITIDOS: ATUALIZAR, LIQUIDAR, AMORTIZAR
 	FOR registrocalc IN EXECUTE 'SELECT count(*) as vincendas
 					 FROM cbparcela WHERE id_cbcontrato_int = ' || idcontrato || ' AND data_vencimento_dat >= CURRENT_DATE'
 	LOOP
 		vincendas = registrocalc.vincendas;

 	END LOOP;
 	

 	--SOMA TOTAL VENCIDAS
 	totvencidas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vencidas
					FROM cbparcela
				      WHERE data_vencimento_dat < current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvencidas = registrocalc.vencidas;
		
	END LOOP;

	--SOMA TOTAL VINCENDAS
	totvincendas = 0;
	FOR registrocalc IN EXECUTE 'SELECT COALESCE(SUM(valor_principal_num),''0'') as vincendas
					FROM cbparcela
				      WHERE data_vencimento_dat >= current_date
				      AND id_cbcontrato_int = ' || idcontrato || ''
 					 
	LOOP
		totvincendas = registrocalc.vincendas;
		
	END LOOP;	

	--TOTAL PRINCIPAL
	totprinc = 0;
	FOR registro IN EXECUTE 'SELECT SUM(valor_principal_num) AS totprinc
	                           	 FROM cbparcela
	                          	 WHERE id_cbparcela_int in (' || parcelas || ')'
	LOOP
		totprinc = registro.totprinc;		
	END LOOP;
	RAISE NOTICE 'VALOR PRINCIPAL DO CONTRATO: %', totprinc;

	--******************************************
	--CAMPO VARIAVEL, SEGUE PADRï¿½O COMENï¿½ANDO COM HO=VALOR|PERCHO=VALOR|
	--ROTINA CRIADA PARA CALCULO MANUAL COM LIBERAï¿½ï¿½O DE HO E TOTALIZAR
	percho = -1;
	ho     = 0;
	IF COALESCE(strvariavel, '') != '' THEN
		IF strpos(upper(strvariavel),'LIBHO')>0 THEN
			IF split_part(split_part(strvariavel, '|', 19), '=', 2)='S' THEN
				RAISE NOTICE '1 -> %', (SELECT split_part(split_part(strvariavel, '|', 1), '=', 2)::TEXT);
				RAISE NOTICE '1.1 -> %', replace((SELECT split_part(split_part(strvariavel, '|', 2), '=', 2)::TEXT), ',', '.')::double precision / 100;
				valoresho = (SELECT split_part(split_part(strvariavel, '|', 1), '=', 2)::TEXT);
				percho = replace((SELECT split_part(split_part(strvariavel, '|', 2), '=', 2)::TEXT), ',', '.')::double precision / 100;
			END IF;
		ELSE
			RAISE NOTICE '2 -> %', (SELECT split_part(split_part(strvariavel, '|', 1), '=', 2)::TEXT);
			valoresho = (SELECT split_part(split_part(strvariavel, '|', 1), '=', 2)::TEXT);
			percho = replace((SELECT split_part(split_part(strvariavel, '|', 2), '=', 2)::TEXT), ',', '.')::double precision / 100;
		END IF;

		IF strpos(upper(strvariavel),'TOTALIZAR')>0 THEN
			IF split_part(split_part(strvariavel, '|', 20), '=', 2)='S' THEN
				RAISE NOTICE '3 -> %', (SELECT split_part(split_part(strvariavel, '|', 10), '=', 2)::TEXT);
				RAISE NOTICE '3.1 -> %', (SELECT split_part(split_part(strvariavel, '|', 8), '=', 2)::TEXT);
				RAISE NOTICE '3.2 -> %', (SELECT split_part(split_part(strvariavel, '|', 9), '=', 2)::TEXT);
				RAISE NOTICE '3.3 -> %', (SELECT split_part(split_part(strvariavel, '|', 5), '=', 2)::TEXT);
				RAISE NOTICE '3.4 -> %', (SELECT split_part(split_part(strvariavel, '|', 3), '=', 2)::TEXT);
				l_sdespesa= (SELECT split_part(split_part(strvariavel, '|', 10), '=', 2)::TEXT);
				l_smulta = (SELECT split_part(split_part(strvariavel, '|', 8), '=', 2)::TEXT);
				l_sjurosmora = (SELECT split_part(split_part(strvariavel, '|', 9), '=', 2)::TEXT);
				l_sdescmanual = (SELECT split_part(split_part(strvariavel, '|', 5), '=', 2)::TEXT);
				l_stotmanual = (SELECT split_part(split_part(strvariavel, '|', 3), '=', 2)::TEXT);
			END IF;
		END IF;
	END IF;
	--******************************************

	--VERIFICA VALORES POR PARCELA
	FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela,
						  regexp_split_to_table(''' || REPLACE(coalesce(valoresho, ''), ' ', '') || '''::TEXT, '','') AS valorho,
						  regexp_split_to_table(''' || REPLACE(coalesce(l_sdespesa, ''), ' ', '') || '''::TEXT, '','') AS despesa,
						  regexp_split_to_table(''' || REPLACE(coalesce(l_smulta, ''), ' ', '') || '''::TEXT, '','') AS multa,
						  regexp_split_to_table(''' || REPLACE(coalesce(l_sjurosmora, ''), ' ', '') || '''::TEXT, '','') AS jurosmora,
						  regexp_split_to_table(''' || REPLACE(coalesce(l_sdescmanual, ''), ' ', '') || '''::TEXT, '','') AS descmanual,
						  regexp_split_to_table(''' || REPLACE(coalesce(l_stotmanual, ''), ' ', '') || '''::TEXT, '','') AS totmanual'

	--percho = -1;
        --FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || REPLACE(parcelas, ' ', '') || '''::TEXT, '','') AS idparcela'
	LOOP
	            
	        FOR registrocalc IN EXECUTE 'SELECT p.valor_principal_num AS principal,
	                                            (''' || datacalculo || ''' - p.data_vencimento_dat) AS da,
	                                            p.juros_a_aplicar_ao_mes_prorata_dia_str,
	                                            p.multa_a_aplicar_str
	                                            
	                                       FROM cbparcela p
	                                       JOIN ' || tabelafilha || ' c
	                                         ON c.id_cbcontrato_int = p.id_cbcontrato_int
	                                      WHERE p.id_cbparcela_int = ' || registro.idparcela
		LOOP
			principal = registrocalc.principal;
			dias = registrocalc.da;
			pcmulta = replace(registrocalc.multa_a_aplicar_str, ',', '.')::double precision;
			pcjuros = replace(registrocalc.juros_a_aplicar_ao_mes_prorata_dia_str, ',', '.')::double precision;
			
			IF dias < 0 THEN
				dias = 0;
			END IF;
		END LOOP;
		

		--MULTA
		multa = 0;

		multa = round(principal*(pcmulta / 100), 2);

		--JUROS
		juros = round((principal*(pcjuros / 100)) * dias, 2);

		--CP
		dcp = 0;
		
		--VALOR DESCONTO PRINCIPAL
		vldescprinc := 0; 

		--SE FOR A VISTA E QUITAï¿½ï¿½O/ATUALIZAï¿½ï¿½O, PERMITE 20% NO PRINCIPAL
		IF iparcelas = 1 AND qtdparcela = vencidas THEN
			vldescprinc := ROUND((round(principal*0.2, 2)) * pesodesc, 2); 
		END IF;

		--PERCENTUAL DE DESCONTO (PRINCIPAL/CP)
		dcpmax = 0;
		dcpmin = 0;
		percdesc = 0;
		cp = 0;
		
		
		
		--VALOR DESCONTO CP
		vldesccp = 0;
		--vldesccp := ROUND((round(principal*dcpmax, 2) - round(principal*dcpmin, 2)) * pesodesc, 2); 

		--VALOR DESCONTO MULTA 
		vldescmulta := 0;  --(nesta politica nao tem)
		
		vldescmulta := ROUND(multa * pesodesc, 2); 
		
		--VALOR DESCONTO JUROS/MORA
		vldescjuros := 0; --(nesta politica nao tem)
		vldescjuros := ROUND(juros * pesodesc, 2); 
		
		--VALOR TOTAL DE DESCONTO
		vldesctotal := 0;
		vldesctotal := Round((vldescprinc + vldesccp + vldescmulta + vldescjuros),2);
		
		--PERCENTUAL DE HO
		percho = 0;
		ho = 0;
		
		taxas = 0;

		--CALCULO DESPESAS
		IF registro.despesa != '' THEN
			despesa := registro.despesa::NUMERIC; --+ despesa; --Soma a despesa com a despesa da parcela colocada manualmente
		END IF;
		raise notice 'despesa >>: %', despesa;

		IF registro.multa != '' THEN
			multa := registro.multa::NUMERIC;
		END IF;
		raise notice 'multa >>: %', multa;

		IF registro.jurosmora != '' THEN
			juros := registro.jurosmora::NUMERIC;
		END IF;
		raise notice 'juros >>: %', juros;

		IF registro.descmanual != '' THEN
			vldesctotal := registro.descmanual::NUMERIC;
		END IF;
		raise notice 'l_dvldesctotal MANUAL>>: %', vldesctotal;

		IF registro.valorho != '' THEN
			ho := registro.valorho::NUMERIC; 
		END IF;
		raise notice 'valorho MANUAL>>: %', ho;

		--TOTAL A PAGAR
		
		total = round(principal + multa + ho + despesa + notificacao + juros + dcp - vldesctotal, 2);

		IF totalmanual > 0 THEN
				
			vldesctotal = vldesctotal + (total - (totalmanual/qtdparcela));
			raise notice 'l_parcnegociadas>>>>>>: %', qtdparcela;
				
				
				
			total = totalmanual/qtdparcela;
				
				
		END IF;
		raise notice 'l_stotmanual: %', l_stotmanual;
		
		
		RAISE NOTICE 'scalculo = %', scalculo;
		RAISE NOTICE 'principal = %', principal;
	        RAISE NOTICE 'dias = %', dias;
		RAISE NOTICE 'pcho = %', percho;
		RAISE NOTICE 'ho = %', ho;
		RAISE NOTICE 'desc = %', vldesctotal;
		RAISE NOTICE 'juros = %', juros;
		RAISE NOTICE 'multa = %', multa;
		RAISE NOTICE 'cp = %', dcp;
		RAISE NOTICE 'total_vencidas = %', totvencidas;
		RAISE NOTICE 'total_vincendas %', totvincendas;
		RAISE NOTICE 'total = %', total;

                --GRAVA CBCALCULO PARCELA
		EXECUTE 'INSERT INTO ' || tabtemp || '(id_cbcalculoparcela_int,
                                                      id_cbcontrato_int,
                                                      id_cbparcela_int,
                                                      principal_num,
                                                      juros_mora_num,
                                                      multa_num,
                                                      cp_num,
                                                      despesa_banco_num,
                                                      honorarios_num,
                                                      desconto_num,
                                                      abatimento_num,
                                                      acrescimo_num,
                                                      valor_total_num,
                                                      notificacao_num,
                                                      data_calculo_dat,
                                                      id_geusuario_int,
                                                      tstamp,                                                      
                                                      comissionamento_num,
                                                      retido_num,
                                                      percentual_desconto_num,
                                                      descapitalizacao_num,
                                                      pc_ho_num,
                                                      pc_comissionamento_num,
                                                      pc_cp_num,
                                                      pc_multa_num,
                                                      pc_juros_num,
                                                      pc_mora_num,
                                                      taxa_financiamento_num)
                                              VALUES ( ' || scalculo || ',            --id_cbcalculoparcela_int
                                                       ' || idContrato || ',          --id_cbcontrato_int
                                                       ' || registro.idparcela || ',  --id_cbparcela_int
                                                       ' || principal || ',           --principal_num
                                                       ' || juros || ',               --juros_mora_num
                                                       ' || multa || ',               --multa_num
                                                       ' || cp || ',                  --cp_num
                                                       ' || despesa || ',             --despesa_banco_num
                                                       ' || ho || ',                  --honorarios_num
                                                       ' || vldesctotal || ',         --desconto_num
                                                       0,		              --abatimento_num
                                                       0, 			      --acrescimo_num
                                                       ' || total || ',               --valor_total_num
                                                       ' || notificacao || ',         --notificacao_num
                                                       ''' || datacalculo || ''',     --data_calculo_dat
                                                       ' || idusuario || ',           --id_geusuario_int
                                                       current_timestamp,             --tstamp                                                      
                                                       0,                             --comissionamento_num
                                                       0,                             --retido_num
                                                       ' || percdesc || ',            --percentual_desconto_num
                                                       0,                             --descapitalizacao_num
                                                       ' || percho || ',
                                                       0,
                                                       0,
                                                       0.02,
                                                       0,
                                                       0,
                                                       0);'; 
                --DESPESA SOMENTE PARA PRIMEIRA PARCELA
                despesa = 0;
		RAISE NOTICE 'iparcelas %', iparcelas;
		--RAISE NOTICE 'sidadecartao %', sidadecartao;
		RAISE NOTICE 'boletagem %', boletagem;

		IF iparcelas > 1 THEN

			EXECUTE 'SELECT f_parcelamento_calculo(''' || tabtemp || '''::TEXT, 
									       ''' || tabtempparcelamento || '''::TEXT, 
									       ' || idcontrato || '::BIGINT, 
									       ''' || registro.idparcela || '''::BIGINT,
									       ''' || scalculo || '''::TEXT, 
									       ''' || datacalculo || ''', 
									       ' || (iparcelas) || ')';	 

			--Arredondamento
			FOR l_rsregistroaux IN EXECUTE 'SELECT DISTINCT plano_acordo_int,
									id_cbcalculoparcela_int
							FROM ' || tabtempparcelamento || ' 
							WHERE id_cbcalculoparcela_int = ' || scalculo || '
							AND id_cbparcela_int = ' || registro.idparcela
			LOOP
				EXECUTE 'SELECT f_ajustaparcelamento_calculo(''' || tabtemp || '''::TEXT, 
									     ''' || tabtempparcelamento || '''::TEXT, 
									     ''' || scalculo || '''::TEXT,
									     ''' || l_rsregistroaux.plano_acordo_int || ''', 
									     ' || idcontrato || ', 
									     ' || registro.idparcela || ' )';
			END LOOP;

		END IF;
	END LOOP;

	IF iparcelas > 1 THEN

		 FOR registro IN EXECUTE 'WITH sub as (
				select sum(valor_parcelamento_num) as valor, parcela_parcelamento_int from ' || tabtempparcelamento || ' group by parcela_parcelamento_int order by parcela_parcelamento_int
				)
				Select count(1) as cont from sub where valor < 200
				'
		LOOP
			IF registro.cont >=1 THEN
				retorno = 'ERRO BANCO: Parcelamento nï¿½o permitido, valor da parcela deve ser no minimo 200 reais.';
			END IF;
		END LOOP;

		
	END IF;

	IF retorno = '' THEN
		
		if iparcelas > 9 then
			retorno = tabtemp || '|' || tabtempparcelamento || '|' || 'SOLICITA SENHA:';
		else
			retorno = tabtemp || '|' || tabtempparcelamento;
		end if;
		--retorno = tabtemp || '|' || tabtempparcelamento;
	END IF;
		
	RETURN retorno;
END;

$$;

--
-- TOC entry 1863 (class 1255 OID 26483)
-- Name: f_consolidamailing(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_consolidamailing(tabela character varying, codigofila character varying, bancodestino character varying, portadestino character varying, ipdestino character varying, senhadestino character varying, bancoorigem character varying, portaorigem character varying, iporigem character varying, senhaorigem character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  ret varchar;
  

BEGIN
	/*gbueno 15-08-2016 
	  trecho de codigo comentado apos a migracao de versao do banco. 
	  Aparentemente o MIS nao usa mais a view com estes dados. Qualquer reclamacao, basta descomentar.
	*/

	/* 
	ret := (SELECT * FROM dblink('dbname=' || bancodestino || ' port=' || portadestino || ' host=' || ipdestino || ' user=postgres  password=' || senhadestino || ''::text, 
			'SELECT * FROM fcreplicamailing(''' || codigofila || ''',
					 ''' || bancoorigem || ''', 
					 ''' || iporigem || ''', 
					 ''' || portaorigem || ''', 
					 ''' || senhaorigem || ''',
					 ''' || tabela || ''') t (valor varchar)'::text) t (valor varchar));
	*/
	EXECUTE 'DROP TABLE ' || tabela || ';';
	
	RETURN  'OK';
END;

$$;

--
-- TOC entry 1864 (class 1255 OID 26491)
-- Name: f_cpf_cnpj_formatted(text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_cpf_cnpj_formatted(cpf_cnpj text, mask text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	len          BIGINT;
	cont         BIGINT;
	result       TEXT;
	cpf_cnpj_abs TEXT;
	cpf_mask     TEXT;
	cnpj_mask    TEXT;
	aux_x_cpf    TEXT;
	aux_x_cnpj   TEXT;
	pos          INTEGER;	
	registro     RECORD;	
	registro2    RECORD;
BEGIN   
	--Primeiro registro sempre a mï¿½scara de cpf
	--Segundo  registro sempre a mï¿½scara de cnpj;
	cont = 0;
        FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || mask || ''', '';'') AS mask'		
        LOOP
		IF cont = 0 THEN
			cpf_mask = registro.mask;
		ELSE
			cnpj_mask = registro.mask;
		END IF;
		cont = cont + 1;
        END LOOP;

        --Para nï¿½o dar erro na hora de formatar
        cpf_mask := REPLACE(cpf_mask, '.', ':');
        cnpj_mask := REPLACE(cnpj_mask, '.', ':');
        
        aux_x_cpf = cpf_mask;
        aux_x_cnpj = cnpj_mask;

        --Retira os caracteres a serem escondidos para nï¿½o dar erro
	cpf_mask = REPLACE(cpf_mask, 'X','0');
	cnpj_mask = REPLACE (cnpj_mask, 'X', '0');	

	RAISE NOTICE 'cpf %', cpf_mask;
        RAISE NOTICE 'cnpj %', cnpj_mask;

        cpf_cnpj_abs = (SELECT abs_cpf(cpf_cnpj));

        --11 CPF
        --14 CNPJ
        len = LENGTH(cpf_cnpj_abs);        

        RAISE NOTICE 'length %', len;

        result = cpf_cnpj; 
        IF len = 11 THEN
                FOR registro IN EXECUTE 'SELECT TRIM(REPLACE(TO_CHAR(' || cpf_cnpj || ', ''' || cpf_mask || '''), '':'', ''.'')) AS res'
		LOOP
			result = registro.res;
		END LOOP;
	END IF;
	IF len = 14 THEN
                FOR registro IN EXECUTE 'SELECT TRIM(REPLACE(TO_CHAR(' || cpf_cnpj || ', ''' || cnpj_mask || '''), '':'', ''.'')) AS res'
		LOOP
			result = registro.res;
		END LOOP;
	END IF;

        --Ajusta mascara novamente colocando X caso tiver na mascara orignal
	pos = 1;
	IF len IN (11,14) THEN
		WHILE pos > 0 LOOP    
			IF len = 11 THEN
				FOR registro IN EXECUTE 'SELECT POSITION(''X'' IN ''' || aux_x_cpf || ''') res'
				LOOP
					IF registro.res > 0 THEN					        
						pos = registro.res;						
						result = SUBSTRING(result, 0, pos) || 'X' || SUBSTRING(result, pos + 1);
						aux_x_cpf = SUBSTRING(aux_x_cpf, 0, pos) || '0' || SUBSTRING(aux_x_cpf, pos + 1);
					ELSE					        
						pos = 0;
					END IF;
				END LOOP;
			END IF;
			IF len = 14 THEN
				FOR registro IN EXECUTE 'SELECT POSITION(''X'' IN ''' || aux_x_cnpj || ''') res'
				LOOP
					IF registro.res > 0 THEN					        
						pos = registro.res;						
						result = SUBSTRING(result, 0, pos) || 'X' || SUBSTRING(result, pos + 1);
						aux_x_cnpj = SUBSTRING(aux_x_cnpj, 0, pos) || '0' || SUBSTRING(aux_x_cnpj, pos + 1);
						RAISE NOTICE 'pos %', pos;
					ELSE
					        
						pos = 0;
					END IF;
				END LOOP;
			END IF;
		END LOOP;
	END IF;
	        
	RETURN result;
END;
$$;

--
-- TOC entry 1865 (class 1255 OID 26493)
-- Name: f_criabasefilaaltitudev8(character varying, character varying, bigint, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, date, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_criabasefilaaltitudev8(snomecampanha character varying, snomecampanhaativa character varying, idusuario bigint, stela character varying, chave character varying, idsitcontrato character varying, descsitcontrato character varying, sitparcelas character varying, idscores character varying, descscores character varying, classificacoes character varying, idtiponegocio character varying, desctiponegocio character varying, aplicagrupo character varying, idtiposfone character varying, desctiposfone character varying, idetapa character varying, descetapa character varying, prioridadeorigem character varying, sdatainicial character varying, sdatafinal character varying, squerytratados character varying, sapenastratados character varying, sexcecao character varying, datafila date, idcliente bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
/*gbueno 16/06/2014 - Reestruturacao processo de fila do Altitude V8 */  
DECLARE
  datacontrole	date;
  dataultimodomingo	date;
  sSql		varchar;
  sCodprocess	bigint;
  sclassificacoes varchar;
	
BEGIN
	--verifica qual foi o ultimo domingo.
	dataultimodomingo := (select current_date - (extract(DOW from current_date))::integer);
	raise notice 'dataultimodomingo %', dataultimodomingo;
	--verifica qual Ã© a data mais antiga de fila na tabela.
	--datacontrole := COALESCE((select min(datahora_geracaofila_tim) from escontrolefilaaltitudev8),'1900-01-01');
	datacontrole := '1900-01-01'::date;
	raise notice 'datacontrole %', datacontrole;
	--cofigo de identificacao da fila
	sCodprocess := (SELECT nextval('es307_seq'));
	raise notice 'sCodprocess %', sCodprocess;
	--replace para acertar quantidade de aspas
	raise notice 'classificacoes %', classificacoes;
	sclassificacoes := replace(classificacoes, '''', '''''');
	raise notice 'sclassificacoes %', sclassificacoes;

	--verifica se vai ser necessario dropar a tabela e recriar ou apenas inserir novos dados. A regra manda limpar a tabela uma vez por semana.
	IF datacontrole < dataultimodomingo THEN
	
		DROP TABLE IF EXISTS escontrolefilaaltitudev8;

		sSql := 'CREATE TABLE escontrolefilaaltitudev8 as ';

	ELSE
		sSql := ' INSERT INTO escontrolefilaaltitudev8(
		
				/* Campos para controle*/
				/*................................................................................*/
				id_cbcontrato_int,
				datahora_geracaofila_tim,
				id_cbsit_geracaofila_int,
				desc_cbsit_geracaofila_str,	
				nomecampanha,
				nomecampanhaativa,
				codfila_str,
				id_geusuario_int,
				datafila_dat,
				id_gecliente_int,
				tela_str,
				inconsistencia_txt,
				desc_inconsistencia_txt,

				id_situacoes_contrato_str,
				desc_situacoes_contrato_str,
				situacoes_parcela_str,
				id_scores_str,
				desc_scores_str,
				classificacoes_str,
				id_tipos_negocio_str,
				desc_tipos_negocio_str,
				aplica_grupo_str,
				id_tipos_fone_str,
				desc_tipos_fone_str,
				id_etapas_str,
				desc_etapas_str,
				prioridade_origem_str,

				
				data_inicial_tratamento_str,
				data_final_tratamento_str,
				query_tratados_str, 
				apenas_fones_tratados_str,
				/*................................................................................*/
				
				/* Campos que ajudrao a responder questionamentos sobre os fones que subiram na fila */
				/*................................................................................*/
				telefone01,
				telefone02,
				telefone03,
				telefone04,
				telefone05,
				telefone06,
				telefone07,
				telefone08,
				telefone09,
				telefone10,
				telefone11,
				telefone12,
				telefone13,
				telefone14,
				telefone15,
				
				classtelefone1,
				classtelefone2,
				classtelefone3,
				classtelefone4,
				classtelefone5,
				classtelefone6,
				classtelefone7,
				classtelefone8,
				classtelefone9,
				classtelefone10,
				classtelefone11,
				classtelefone12,
				classtelefone13,
				classtelefone14,
				classtelefone15,
				
				tipotelefone1,
				tipotelefone2,
				tipotelefone3,
				tipotelefone4,
				tipotelefone5,
				tipotelefone6,
				tipotelefone7,
				tipotelefone8,
				tipotelefone9,
				tipotelefone10,	
				tipotelefone11,
				tipotelefone12,
				tipotelefone13,
				tipotelefone14,
				tipotelefone15,

				score1,
				score2,
				score3,
				score4,
				score5,
				score6,
				score7,
				score8,
				score9,
				score10,
				score11,
				score12,
				score13,
				score14,
				score15,

				origem1,
				origem2,
				origem3,
				origem4,
				origem5,
				origem6,
				origem7,
				origem8,
				origem9,
				origem10,
				origem11,
				origem12,
				origem13,
				origem14,
				origem15,

				tratamento1,
				tratamento2,
				tratamento3,
				tratamento4,
				tratamento5,
				tratamento6,
				tratamento7,
				tratamento8,
				tratamento9,
				tratamento10,
				tratamento11,
				tratamento12,
				tratamento13,
				tratamento14,
				tratamento15,
				/*................................................................................*/
				
				/*campos obrigatorios para TODOS OS DISCADORES*/
				/*................................................................................*/
				IDTN,
				ID,
				NOME,
				CONTRATO,
				CPF,
				DIASEMATRASO,
				FAIXAATRASO,
				PRODUTO,
				ETAPA,
				DATADISTRIB,
				DATAHORATELEFONIA,
				STATUSTELEFONIA,
				MAILING,
				SITUACAO,
				OUTCOME,
				CORINGA1,
				CORINGA2,
				CORINGA3,
				CORINGA4,
				CORINGA5,
				/*................................................................................*/
				
				/*campos obrigatorios para V8*/
				/*................................................................................*/
				TIPOPESSOA,
				CHAVECONTATO,
				PRIORIDADE,
				CODPROCESSAMENTO,
				/*................................................................................*/

				/*campos de dados do negocio*/
				/*................................................................................*/
				CIDADE,
				UF,
				DDD,
				DATAVENCTOPARCELA,
				QTDPARCELAS,
				VALORPARCELA,
				DIASSEMCONTATO,
				REGIAO
				

				/*................................................................................*/
				) 

			';
	END IF;

	raise notice 'primeira parte';

		sSql := sSql || '
	
		SELECT  DISTINCT ON (c.id_cbcontrato_int)
		
		/* Campos para controle*/
		/*................................................................................*/
		 c.id_cbcontrato_Int,
		 current_timestamp as datahora_geracaofila_tim,
		 c.id_cbsituacaocontrato_int as id_cbsit_geracaofila_int,
		 s.descricao_str as desc_cbsit_geracaofila_str,
		 ''' || snomecampanha || '''::varchar as nomecampanha,
		 ''' || snomecampanhaativa || '''::varchar as nomecampanhaativa,
		 ''' || sCodprocess || '''::varchar as codfila_str,
		 ' || idusuario || '::bigint id_geusuario_int,
		 ''' || datafila || ''' as datafila_dat,
		 ' || idcliente || ' as id_gecliente_int,
		 ''' || stela || '''::varchar tela_str,
		 null::text inconsistencia_txt,
		 null::text desc_inconsistencia_txt,
		
		 ''' || idsitcontrato || '''::varchar as id_situacoes_contrato_str,
		 ''' || descsitcontrato || '''::varchar as desc_situacoes_contrato_str,
		 ''' || sitparcelas || '''::varchar as situacoes_parcela_str,
		 ''' || idscores || '''::varchar as id_scores_str,
		 ''' || descscores || '''::varchar as desc_scores_str,
		 ''' || sclassificacoes || '''::varchar as classificacoes_str,
		 ''' || idtiponegocio || '''::varchar as id_tipos_negocio_str,
		 ''' || desctiponegocio || '''::varchar as desc_tipos_negocio_str,
		 ''' || aplicagrupo || '''::varchar as aplica_grupo_str,
		 ''' || idtiposfone || '''::varchar as id_tipos_fone_str,
		 ''' || desctiposfone || '''::varchar as desc_tipos_fone_str,
		 ''' || idetapa || '''::varchar as id_etapas_str,
		''' || descetapa || '''::varchar as desc_etapas_str,
		''' || prioridadeorigem || '''::varchar as prioridade_origem_str,

		 
		 ''' || sDataInicial || '''::varchar as data_inicial_tratamento_str,
		 ''' || sDataFinal || '''::varchar as data_final_tratamento_str,
		 ''' || sQueryTratados || '''::varchar as query_tratados_str,
		 ''' || sApenasTratados || '''::varchar as apenas_fones_tratados_str,
		 /*................................................................................*/

		
		 /*Campos que ajudrao a responder questionamentos sobre os fones que subiram na fila */
		 /*................................................................................*/
		 null::varchar					as telefone01,
		 null::varchar					as telefone02,
		 null::varchar					as telefone03,
		 null::varchar					as telefone04,
		 null::varchar					as telefone05,
		 null::varchar					as telefone06,
		 null::varchar					as telefone07,
		 null::varchar					as telefone08,
		 null::varchar					as telefone09,
		 null::varchar					as telefone10,
		 null::varchar					as telefone11,
		 null::varchar					as telefone12,
		 null::varchar					as telefone13,
		 null::varchar					as telefone14,
		 null::varchar					as telefone15,
		 
		 null::varchar					as classtelefone1,
		 null::varchar					as classtelefone2,
		 null::varchar					as classtelefone3,
		 null::varchar					as classtelefone4,
		 null::varchar					as classtelefone5,
		 null::varchar					as classtelefone6,
		 null::varchar					as classtelefone7,
		 null::varchar					as classtelefone8,
		 null::varchar					as classtelefone9,
		 null::varchar					as classtelefone10,
		 null::varchar					as classtelefone11,
		 null::varchar					as classtelefone12,
		 null::varchar					as classtelefone13,
		 null::varchar					as classtelefone14,
		 null::varchar					as classtelefone15,		 

		 null::varchar					as tipotelefone1,
		 null::varchar					as tipotelefone2,
		 null::varchar					as tipotelefone3,
		 null::varchar					as tipotelefone4,
		 null::varchar					as tipotelefone5,
		 null::varchar					as tipotelefone6,
		 null::varchar					as tipotelefone7,
		 null::varchar					as tipotelefone8,
		 null::varchar					as tipotelefone9,
		 null::varchar					as tipotelefone10,	
		 null::varchar					as tipotelefone11,
		 null::varchar					as tipotelefone12,
		 null::varchar					as tipotelefone13,
		 null::varchar					as tipotelefone14,
		 null::varchar					as tipotelefone15,

		 null::varchar					as score1,
		 null::varchar					as score2,
		 null::varchar					as score3,
		 null::varchar					as score4,
		 null::varchar					as score5,
		 null::varchar					as score6,
		 null::varchar					as score7,
		 null::varchar					as score8,
		 null::varchar					as score9,
		 null::varchar					as score10,	
		 null::varchar					as score11,
		 null::varchar					as score12,
		 null::varchar					as score13,
		 null::varchar					as score14,
		 null::varchar					as score15,

		 null::varchar					as origem1,
		 null::varchar					as origem2,
		 null::varchar					as origem3,
		 null::varchar					as origem4,
		 null::varchar					as origem5,
		 null::varchar					as origem6,
		 null::varchar					as origem7,
		 null::varchar					as origem8,
		 null::varchar					as origem9,
		 null::varchar					as origem10,	
		 null::varchar					as origem11,
		 null::varchar					as origem12,
		 null::varchar					as origem13,
		 null::varchar					as origem14,
		 null::varchar					as origem15,

		 null::varchar					as tratamento1,
		 null::varchar					as tratamento2,
		 null::varchar					as tratamento3,
		 null::varchar					as tratamento4,
		 null::varchar					as tratamento5,
		 null::varchar					as tratamento6,
		 null::varchar					as tratamento7,
		 null::varchar					as tratamento8,
		 null::varchar					as tratamento9,
		 null::varchar					as tratamento10,	
		 null::varchar					as tratamento11,
		 null::varchar					as tratamento12,
		 null::varchar					as tratamento13,
		 null::varchar					as tratamento14,
		 null::varchar					as tratamento15,

		/*................................................................................*/
		/*campos obrigatorios para TODOS OS DISCADORES*/
		/*................................................................................*/

                 c.id_cbtiponegocio_int::varchar				as IDTN,
		 c.id_cbcontrato_int::varchar					as ID,
		 c.nome_str::varchar						as NOME,
		 c.contrato_str							as CONTRATO,
		 abs_cpf(c.cpf_str)						as CPF,
		 (CURRENT_DATE - p.data_vencimento_dat)   			as DIASEMATRASO,
		 null::varchar							as FAIXAATRASO,
		 null::varchar							as PRODUTO,
		 e.codigo_str                                                   as ETAPA,
		 to_char(c.data_ultima_distrib_dat, ''yyyy-mm-dd'') 		as DATADISTRIB,
		 null::text							as DATAHORATELEFONIA,
		 null::text							as STATUSTELEFONIA,
		 null::text							as MAILING,
		 1::bigint				  			as SITUACAO,
		 null::text                                                     as OUTCOME,
		 null::text							as CORINGA1,
		 null::text							as CORINGA2,
		 null::text							as CORINGA3,
		 null::text							as CORINGA4,
		 null::text							as CORINGA5,
		/*................................................................................*/
		/*campos obrigatorios para V8*/
		/*................................................................................*/
		CASE WHEN length(abs_cpf(c.cpf_str)) = 11 THEN ''F'' ELSE ''J'' END 		    as TIPOPESSOA,
		c.id_gecliente_int || ''.'' || c.id_cbcontrato_int || ''.'' || abs_cpf(c.cpf_str)   as CHAVECONTATO,
		0::bigint              								    as PRIORIDADE,
		''' || sCodprocess || '''::varchar	               				    as CODPROCESSAMENTO,

		/*................................................................................*/
		/*campos de dados do negocio*/
		/*................................................................................*/
		COALESCE(c.cidade_str,'''')					as CIDADE,
		COALESCE(c.estado_str,'''')					as UF,
		COALESCE(trim(c.ddd_str),'''')					as DDD,
		to_char(p.data_vencimento_dat, ''yyyy-mm-dd'')   		as DATAVENCTOPARCELA,
		(select count(*) from cbparcela p1 
		    where p1.id_cbcontrato_int = c.id_cbcontrato_int and 
		          p1.situacao_int not in (4,6))                         as QTDPARCELAS,
		COALESCE(p.valor_principal_num,0)				as VALORPARCELA,
		(CURRENT_DATE - ultima_data_contato_dat) 			as DIASSEMCONTATO,
		null::varchar							as REGIAO
		

	FROM    CBCONTRATOPIRELLI c
	INNER JOIN cbsituacaocontrato s ON s.id_cbsituacaocontrato_int = c.id_cbsituacaocontrato_int
	INNER JOIN cbtiponegocio tn ON tn.id_cbtiponegocio_int = c.id_cbtiponegocio_int AND c.id_cbtiponegocio_int in (' || idtiponegocio || ' )
	INNER JOIN cbparcela p ON
		 c.id_cbcontrato_int = p.id_cbcontrato_int 
		 and p.situacao_int in (' || sitparcelas || ')
	INNER JOIN cbsituacaocontrato r ON r.id_cbsituacaocontrato_int = c.id_cbsituacaocontrato_int
	LEFT JOIN cbetapa e on e.id_cbetapa_int = c.id_cbetapa_int

--	limit 5
		 ';

	raise notice 'segunda parte';
	-- fila por excecao Ã© quando a fila Ã© gerada com base em uma planilha de contratos e nao na base toda da carteira.
	IF sExcecao = 'S' THEN
		sSql = sSql || ' INNER JOIN gefilacobrancaimporta tmpcon ON 
					c.contrato_str = tmpcon.contrato_str AND
					tmpcon.chave_str = ''' || chave || '''';
	END IF;

	/*sSql = sSql || ' WHERE c.id_cbsituacaocontrato_int in (' || idsitcontrato || ') 
			   AND abs_cpf(c.cpf_str) is not null AND abs_cpf(c.cpf_str)::bigint > 0
			 ORDER by c.id_cbcontrato_int, p.data_vencimento_dat ';*/

	sSql = sSql || ' WHERE c.id_cbsituacaocontrato_int in (' || idsitcontrato || ') 
			   AND c.id_cbtiponegocio_int in (' || idtiponegocio || ')
			   AND abs_cpf(c.cpf_str) is not null AND abs_cpf(c.cpf_str)::bigint > 0';

	if idetapa <> '' Then
			sSql = sSql || ' AND c.id_cbetapa_int in (' || idetapa || ')';
	end if;
			  
	sSql = sSql || ' ORDER BY c.id_cbcontrato_int, p.data_vencimento_dat ';

	raise notice 'terceira parte';
	
	EXECUTE sSql;

	raise notice 'tabela criada';

	IF datacontrole < dataultimodomingo THEN

		CREATE INDEX escontrolefilaaltitudev8_idx1
		  ON escontrolefilaaltitudev8
		  USING btree
		  (id_cbcontrato_int); 

		raise notice 'idx1';

		CREATE INDEX escontrolefilaaltitudev8_idx2
		  ON escontrolefilaaltitudev8
		  USING btree
		  (tela_str); 

		raise notice 'idx2';
		

		CREATE INDEX escontrolefilaaltitudev8_idx3
		  ON escontrolefilaaltitudev8
		  USING btree
		  (datahora_geracaofila_tim); 

		raise notice 'idx3';

		CREATE INDEX escontrolefilaaltitudev8_idx4
		  ON escontrolefilaaltitudev8
		  USING btree
		  (codfila_str); 

		raise notice 'idx4';

		CREATE INDEX escontrolefilaaltitudev8_idx5
		  ON escontrolefilaaltitudev8
		  USING btree
		  (contrato); 

		raise notice 'idx5';

	END IF;

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1866 (class 1255 OID 26503)
-- Name: f_criabasefilaaspect(character varying, character varying, bigint, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, date, bigint, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_criabasefilaaspect(snomecampanha character varying, snomecampanhaativa character varying, idusuario bigint, stela character varying, chave character varying, idsitcontrato character varying, descsitcontrato character varying, sitparcelas character varying, idscores character varying, descscores character varying, classificacoes character varying, idtiponegocio character varying, desctiponegocio character varying, aplicagrupo character varying, idtiposfone character varying, desctiposfone character varying, idetapa character varying, descetapa character varying, prioridadeorigem character varying, sdatainicial character varying, sdatafinal character varying, squerytratados character varying, sapenastratados character varying, sexcecao character varying, datafila date, idcliente bigint, slimpa character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
/*gbueno 12/08/2014 - Reestruturacao processo de fila do ASPECT - Triare: 545934  */  
DECLARE
  datacontrole	date;
  dataultimodomingo	date;
  sSql		varchar;
  sCodprocess	bigint;
  sclassificacoes varchar;
	
BEGIN
	--verifica qual foi o ultimo domingo.
	dataultimodomingo := (select current_date - (extract(DOW from current_date))::integer);
	--dataultimodomingo := current_date;
	raise notice 'dataultimodomingo %', dataultimodomingo;
	--verifica qual Ã© a data mais antiga de fila na tabela.
	datacontrole := COALESCE((select min(datahora_geracaofila_tim) from escontrolefilaaspect),'1900-01-01');
	--datacontrole := '1900-01-01'::date;
	raise notice 'datacontrole %', datacontrole;
	--cofigo de identificacao da fila
	sCodprocess := (SELECT nextval('es307_seq'));
	raise notice 'sCodprocess %', sCodprocess;
	--replace para acertar quantidade de aspas
	raise notice 'classificacoes %', classificacoes;
	sclassificacoes := replace(classificacoes, '''', '''''');
	raise notice 'sclassificacoes %', sclassificacoes;

	--cria tabela de contrato_fila de acordo filtros para nao usar tabela filha no select principal
	EXECUTE'DROP TABLE IF EXISTS cbcontratoeleva_fila';
	raise notice 'drop _fila';

	EXECUTE'	
		CREATE TABLE cbcontratoeleva_fila AS 
			SELECT * 
			FROM cbcontratoeleva 
			WHERE id_cbsituacaocontrato_int IN(' || idsitcontrato || ')
			  AND id_cbtiponegocio_int IN (' || idtiponegocio || ')';
	raise notice 'CREATE _fila';

	EXECUTE'

		CREATE INDEX cbcontratoeleva_fila_idx1
		ON cbcontratoeleva_fila
		USING btree
		(id_cbcontrato_int);

		CREATE INDEX cbcontratoeleva_fila_idx2
		ON cbcontratoeleva_fila
		USING btree
		(id_cbtiponegocio_int);

		CREATE INDEX cbcontratoeleva_fila_idx3
		ON cbcontratoeleva_fila
		USING btree
		(id_cbsituacaocontrato_int);

		CREATE INDEX cbcontratoeleva_fila_idx4
		ON cbcontratoeleva_fila
		USING btree
		(CONTRATO_STR);
	';

	raise notice 'INDICES _fila';

	--verifica se vai ser necessario dropar a tabela e recriar ou apenas inserir novos dados. A regra manda limpar a tabela uma vez por semana.
-- 	  IF datacontrole < dataultimodomingo THEN
-- 	
-- 		DROP TABLE IF EXISTS escontrolefilaaspect;
-- 
 		sSql := 'CREATE TABLE escontrolefilaaspect as ';
-- 
-- 	  ELSE
	  IF datacontrole < dataultimodomingo OR sLimpa = 'S' THEN

		raise notice 'limpa';

		EXECUTE 'INSERT INTO escontrolelimpafilaaspect (id_geusuario_int, tstamp) VALUES (' || idusuario || ',current_timestamp)';
	  
		TRUNCATE TABLE escontrolefilaaspect;
		
	  END IF;
		sSql := ' INSERT INTO escontrolefilaaspect(
		
				/* Campos para controle da blacklist e fila */
				
				id_cbcontrato_Int,
				datahora_geracaofila_tim,
				id_cbsit_geracaofila_int,
				datahora_entradabl_tim,
				id_cbsit_entradabl_int,
				datahora_saidabl_tim,
				id_cbsit_saidabl_int,
				nomecampanha,
				nomecampanhaativa,
				codfila_str,
				id_geusuario_int,
				datafila_dat,
				id_gecliente_int,

				desc_cbsit_geracaofila_str,
				tela_str,
				inconsistencia_txt,
				desc_inconsistencia_txt,

				/* Campos para log de estrategia */
				id_situacoes_contrato_str,
				desc_situacoes_contrato_str,
				situacoes_parcela_str,
				id_scores_str,
				desc_scores_str,
				classificacoes_str,
				id_tipos_negocio_str,
				desc_tipos_negocio_str,
				aplica_grupo_str,
				id_tipos_fone_str,
				desc_tipos_fone_str,
				id_etapas_str,
				desc_etapas_str,
				prioridade_origem_str,
				sexcecao,

				/*novos campos estrategia 30/06/2014*/
				data_inicial_tratamento_str,
				data_final_tratamento_str,
				query_tratados_str, 
				apenas_fones_tratados_str,

				/*Campos que ajudrï¿½o a responder questionamentos sobre os fones que subiram na fila */
				
				telefone1,
				telefone2,
				telefone3,
				telefone4,
				telefone5,
				telefone6,
				telefone7,
				telefone8,
				telefone9,
				telefone10,
				
				classtelefone1,
				classtelefone2,
				classtelefone3,
				classtelefone4,
				classtelefone5,
				classtelefone6,
				classtelefone7,
				classtelefone8,
				classtelefone9,
				classtelefone10,
				
				tipotelefone1,
				tipotelefone2,
				tipotelefone3,
				tipotelefone4,
				tipotelefone5,
				tipotelefone6,
				tipotelefone7,
				tipotelefone8,
				tipotelefone9,
				tipotelefone10,	

				score1,
				score2,
				score3,
				score4,
				score5,
				score6,
				score7,
				score8,
				score9,
				score10,

				origem1,
				origem2,
				origem3,
				origem4,
				origem5,
				origem6,
				origem7,
				origem8,
				origem9,
				origem10,

				tratamento1,
				tratamento2,
				tratamento3,
				tratamento4,
				tratamento5,
				tratamento6,
				tratamento7,
				tratamento8,
				tratamento9,
				tratamento10,
				
				/* Campos da fila na ordem do layout excel enviado para configuraï¿½ï¿½o*/
				/* 10 primeiros campos*/
				idtn,
				id,
				nome,
				contrato,
				cpf,
				diasematraso,
				faixaatraso,
				produto,
				etapa,
				datadistrib,

				/*ordem demais campos*/
				datahoratelefonia,
				statustelefonia,
				situacao,
				outcome,
				codprocessamento,
				coringa1,
				coringa2,
				coringa3,
				coringa4,
				coringa5,
				tipopessoa,
				uf,
				valororiginal,
				saldopagar,
				cidade,
				datavencimento,

                                /*campos que jï¿½ estavam anteriormente e nï¿½o fazem mais parte do layout*/ 
				valormontante,
				valorematraso,
				parcela,
				ultimopagto,
				datavencto,

				 /*campos para agendamento fidelizado*/
				 
				mstatus,
				cbtime,
				cbnum,
				cbphone,
				owneragend
				) 
			
			';
	--END IF;

	raise notice 'primeira parte';

		sSql := sSql || '

		SELECT  DISTINCT ON (c.id_cbcontrato_int)
		
		/* Campos para controle da blacklist e fila*/
		
		c.id_cbcontrato_Int,
		current_timestamp as datahora_geracaofila_tim,
		c.id_cbsituacaocontrato_int as id_cbsit_geracaofila_int,
		null::timestamp as datahora_entradabl_tim,
		null::bigint as id_cbsit_entradabl_int,
		null::timestamp as datahora_saidabl_tim,
		null::bigint as id_cbsit_saidabl_int,
		''' || sNomeCampanha || '''::varchar as nomecampanha,
		''' || snomecampanhaativa || '''::varchar as nomecampanhaativa,
		''' || sCodprocess || '''::varchar as codfila_str,
		' || idusuario || '::bigint id_geusuario_int,
		''' || datafila || ''' as datafila_dat,
		' || idcliente || ' as id_gecliente_int,

		s.descricao_str as desc_cbsit_geracaofila_str,
		''' || stela || '''::varchar tela_str,
		null::text inconsistencia_txt,
		null::text desc_inconsistencia_txt,

		/* Campos para log de estrategia */
		''' || idsitcontrato || '''::varchar as id_situacoes_contrato_str,
		''' || descsitcontrato || '''::varchar as desc_situacoes_contrato_str,
		''' || sitparcelas || '''::varchar as situacoes_parcela_str,
		''' || idscores || '''::varchar as id_scores_str,
		''' || descscores || '''::varchar as desc_scores_str,
		''' || sclassificacoes || '''::varchar as classificacoes_str,
		''' || idtiponegocio || '''::varchar as id_tipos_negocio_str,
		''' || desctiponegocio || '''::varchar as desc_tipos_negocio_str,
		''' || aplicagrupo || '''::varchar as aplica_grupo_str,
		''' || idtiposfone || '''::varchar as id_tipos_fone_str,
		''' || desctiposfone || '''::varchar as desc_tipos_fone_str,
		''' || idetapa || '''::varchar as id_etapas_str,
		''' || descetapa || '''::varchar as desc_etapas_str,
		''' || prioridadeorigem || '''::varchar as prioridade_origem_str,
		''' || sExcecao || '''::varchar as sexcecao,

		/*novos campos estrategia 30/06/2014*/
		''' || sDataInicial || '''::varchar as data_inicial_tratamento_str,
		''' || sDataFinal || '''::varchar as data_final_tratamento_str,
		''' || sQueryTratados || '''::varchar as query_tratados_str,
		''' || sApenasTratados || '''::varchar as apenas_fones_tratados_str,

		/*Campos que ajudrï¿½o a responder questionamentos sobre os fones que subiram na fila */

		RPAD(''''::varchar,12,'' '')					as telefone1,
		RPAD(''''::varchar,12,'' '')					as telefone2,
		RPAD(''''::varchar,12,'' '')					as telefone3,
		RPAD(''''::varchar,12,'' '')					as telefone4,
		RPAD(''''::varchar,12,'' '')					as telefone5,
		RPAD(''''::varchar,12,'' '')					as telefone6,
		RPAD(''''::varchar,12,'' '')					as telefone7,
		RPAD(''''::varchar,12,'' '')					as telefone8,
		RPAD(''''::varchar,12,'' '')					as telefone9,
		RPAD(''''::varchar,12,'' '')					as telefone10,

		RPAD(''''::varchar,15,'' '')					as classtelefone1,
		RPAD(''''::varchar,15,'' '')					as classtelefone2,
		RPAD(''''::varchar,15,'' '')					as classtelefone3,
		RPAD(''''::varchar,15,'' '')					as classtelefone4,
		RPAD(''''::varchar,15,'' '')					as classtelefone5,
		RPAD(''''::varchar,15,'' '')					as classtelefone6,
		RPAD(''''::varchar,15,'' '')					as classtelefone7,
		RPAD(''''::varchar,15,'' '')					as classtelefone8,
		RPAD(''''::varchar,15,'' '')					as classtelefone9,
		RPAD(''''::varchar,15,'' '')					as classtelefone10,

		RPAD(''''::varchar,12,'' '')					as tipotelefone1,
		RPAD(''''::varchar,15,'' '')					as tipotelefone2,
		RPAD(''''::varchar,15,'' '')					as tipotelefone3,
		RPAD(''''::varchar,15,'' '')					as tipotelefone4,
		RPAD(''''::varchar,15,'' '')					as tipotelefone5,
		RPAD(''''::varchar,15,'' '')					as tipotelefone6,
		RPAD(''''::varchar,15,'' '')					as tipotelefone7,
		RPAD(''''::varchar,15,'' '')					as tipotelefone8,
		RPAD(''''::varchar,15,'' '')					as tipotelefone9,
		RPAD(''''::varchar,15,'' '')					as tipotelefone10,	

		RPAD(''''::varchar,15,'' '')					as score1,
		RPAD(''''::varchar,15,'' '')					as score2,
		RPAD(''''::varchar,15,'' '')					as score3,
		RPAD(''''::varchar,15,'' '')					as score4,
		RPAD(''''::varchar,15,'' '')					as score5,
		RPAD(''''::varchar,15,'' '')					as score6,
		RPAD(''''::varchar,15,'' '')					as score7,
		RPAD(''''::varchar,15,'' '')					as score8,
		RPAD(''''::varchar,15,'' '')					as score9,
		RPAD(''''::varchar,15,'' '')					as score10,

		RPAD(''''::varchar,12,'' '')					as origem1,
		RPAD(''''::varchar,12,'' '')					as origem2,
		RPAD(''''::varchar,12,'' '')					as origem3,
		RPAD(''''::varchar,12,'' '')					as origem4,
		RPAD(''''::varchar,12,'' '')					as origem5,
		RPAD(''''::varchar,12,'' '')					as origem6,
		RPAD(''''::varchar,12,'' '')					as origem7,
		RPAD(''''::varchar,12,'' '')					as origem8,
		RPAD(''''::varchar,12,'' '')					as origem9,
		RPAD(''''::varchar,12,'' '')					as origem10,

		RPAD(''''::varchar,12,'' '')					as tratamento1,
		RPAD(''''::varchar,15,'' '')					as tratamento2,
		RPAD(''''::varchar,15,'' '')					as tratamento3,
		RPAD(''''::varchar,15,'' '')					as tratamento4,
		RPAD(''''::varchar,15,'' '')					as tratamento5,
		RPAD(''''::varchar,15,'' '')					as tratamento6,
		RPAD(''''::varchar,15,'' '')					as tratamento7,
		RPAD(''''::varchar,15,'' '')					as tratamento8,
		RPAD(''''::varchar,15,'' '')					as tratamento9,
		RPAD(''''::varchar,15,'' '')					as tratamento10,	

		/* Campos da fila na ordem do layout excel enviado para configuraï¿½ï¿½o*/
		/*10 primeiros campos excel*/
		LPAD(c.id_cbtiponegocio_int::VARCHAR,10,''0'')			as idtn,
		LPAD(f_accountcodeaspect(c.id_cbcontrato_int)::VARCHAR,30,''0'')as id,
		RPAD(c.nome_str::VARCHAR,60,'' '') 				as nome,
		RPAD(c.contrato_str::VARCHAR,30,'' '')				as contrato,
		RPAD(COALESCE(c.cpf_str,'''')::VARCHAR,20,'' '')       	as cpf,
		LPAD(COALESCE((current_date - p.data_vencimento_dat),0)::VARCHAR,10,''0'') as diasematraso, 
		RPAD(''''::varchar,30,'' '')					as faixaatraso,								
		RPAD(''''::varchar,30,'' '')					as produto,
		RPAD(''''::varchar,30,'' '')					as etapa,
		RPAD(c.data_primeira_distrib_dat::VARCHAR,10,'' '')	 	as datadistrib,

		/*demais campos*/
		RPAD(''''::varchar,10,'' '')					as datahoratelefonia,
		RPAD(''''::varchar,60,'' '')					as statustelefonia,
		RPAD(s.codigo_str::VARCHAR,1,'' '')  				as situacao,	
		RPAD(''''::varchar,50,'' '')					as outcome,
		RPAD(''' || sCodprocess || '''::VARCHAR,30,'' '')		as codprocessamento,   
		RPAD(''''::varchar,100,'' '') 					as coringa1,
		RPAD(''''::varchar,100,'' '') 					as coringa2,
		RPAD(''''::varchar,100,'' '')					as coringa3,
		RPAD(''''::varchar,100,'' '')					as coringa4,
		RPAD(''''::varchar,100,'' '')					as coringa5,

		RPAD(c.tipo_pessoa_str::VARCHAR,1,'' '')			as tipopessoa,
		
		RPAD(COALESCE(c.estado_str,'''')::VARCHAR,2,'' '')    		as uf,

		
		replace(LPAD(trim(to_char(COALESCE(p.valor_principal_num,0),''0000000D99''))::VARCHAR,10,''0''),'','',''.'')
										as valororiginal, 

		replace(LPAD(trim(to_char(COALESCE(p.saldo_devedor_num,0),''0000000D99''))::VARCHAR,10,''0''),'','',''.'')			
										as saldodevedor,

		RPAD(COALESCE(c.cidade_str,'''')::VARCHAR,100,'' '')       	as cidade,

		RPAD(COALESCE(p.data_vencimento_dat,''1900-01-01''::date)::VARCHAR,10,'' '') 
										as datavencimento,
		

		/*campos que jï¿½ estavam anteriormente e nao fazem mais parte do layout*/

		LPAD(trim(to_char((SELECT COALESCE(SUM(valor_principal_num),0)
			FROM cbparcela par
			WHERE par.situacao_int NOT IN (4,6) 
			AND par.id_cbcontrato_int = c.id_cbcontrato_int),''0000000D99''))::VARCHAR,10,''0'') 
									as valormontante,

		LPAD(trim(to_char((SELECT COALESCE(SUM(valor_principal_num),0)
			FROM cbparcela par
			WHERE par.situacao_int NOT IN (4,6) 
			AND par.id_cbcontrato_int = c.id_cbcontrato_int),''0000000D99''))::VARCHAR,10,''0'') 
									as valorematraso,

		LPAD(''''::varchar,4,''0'')					as parcela,

		RPAD(COALESCE( (select max(pg.data_pagamento_dat) from cbpagamento pg
			 where pg.id_cbcontrato_int = c.id_cbcontrato_int) ,''1900-01-01''::date)::VARCHAR,10,'' '') 
									as ultimopagto,

		RPAD(COALESCE(p.data_vencimento_dat,''1900-01-01''::date)::VARCHAR,10,'' '')
									as datavencto,';

		IF sExcecao = 'A' THEN

			sSql = sSql || ' 

			 /*campos para agendamento fidelizado*/
			 
			 ''QCB''::varchar as mstatus,
			 
			 RPAD(trim(to_char(extract(year from (tmpcon.datahora_tim)::timestamp),''0000'')) || '':'' || 
				trim(to_char(extract(month from (tmpcon.datahora_tim)::timestamp),''00'')) || '':'' ||
				trim(to_char(extract(day from (tmpcon.datahora_tim)::timestamp),''00'')) || '':'' ||
				trim(to_char(extract(hour from (tmpcon.datahora_tim)::timestamp),''00'')) || '':'' ||
				trim(to_char(extract(minute from (tmpcon.datahora_tim)::timestamp),''00'')) || '':'' ||
				trim(to_char(trunc(extract(second from (tmpcon.datahora_tim)::timestamp)),''00''))::varchar,19,'' '')  as cbtime,
			 
			 ''10''::varchar as cbnum,
			 RPAD(tmpcon.contato_str::varchar,12,'' '') as cbphone,
			 RPAD(tmpcon.login_str::varchar,30,'' '') as owneragend ';

			 

		ELSE

			sSql = sSql || ' 
			
			/*campos para agendamento fidelizado*/
			 RPAD(''''::varchar,3,'' '') as mstatus,
			 RPAD(''''::varchar,19,'' '') as cbtime,
			 RPAD(''''::varchar,10,'' '') as cbnum,
			 RPAD(''''::varchar,12,'' '') as cbphone,
			 RPAD(''''::varchar,30,'' '') as owneragend ';
			

		END IF;

		sSql = sSql || ' 	

		FROM  cbcontratoeleva c
		 INNER JOIN cbtiponegocio t ON c.id_cbtiponegocio_int = t.id_cbtiponegocio_int
		 INNER JOIN cbparcela p ON c.id_cbcontrato_int = p.id_cbcontrato_int AND
			    p.situacao_int in (' || sitparcelas || ')
		 INNER JOIN cbsituacaocontrato s ON c.id_cbsituacaocontrato_int = s.id_cbsituacaocontrato_int
		 LEFT  JOIN cbetapa e ON c.id_cbetapa_int = e.id_cbetapa_int
		
		 ';

	raise notice 'segunda parte';

	/*
	Tratamento do tipo de fila atraves da variavel sExcecao:
		S: fila no modelo antigo, indica que ï¿½ uma excecao com base em uma planilha de contratos 
		C: fila no modelo novo, indica que ï¿½ uma excecao com base em uma planilha de contratos
		F: fila no modelo novo, indica que ï¿½ uma excecao com base em uma planilha de contratos + telefones
		A: fila no modelo novo, indica que ï¿½ uma fila de agendamento fidelizado
	*/
	IF sExcecao in ('S', 'C', 'F') THEN
	
		sSql = sSql || ' INNER JOIN gefilacobrancaimporta tmpcon ON 
					c.id_cbcontrato_Int = tmpcon.id_cbcontrato_Int AND
					tmpcon.chave_str = ''' || chave || '''';
	ELSIF sExcecao = 'A' THEN
	
		sSql = sSql || ' INNER JOIN esagendamentofidelizado tmpcon ON 
					c.id_cbcontrato_int = tmpcon.id_cbcontrato_int AND
					tmpcon.discador_str = ''ASPECT'' AND
					tmpcon.datahora_tim > current_timestamp
					';
	END IF;

	-- sSql = sSql || ' WHERE c.id_cbsituacaocontrato_int in (' || idsitcontrato || ') order by c.id_cbcontrato_int, p.data_vencimento_dat ';
	sSql = sSql || ' WHERE c.id_cbsituacaocontrato_int in (' || idsitcontrato || ') 
			   AND c.id_cbtiponegocio_int in (' || idtiponegocio || ')';

	if idetapa <> '' Then
			sSql = sSql || ' AND c.id_cbetapa_int in (' || idetapa || ')';
	end if;
			  
	sSql = sSql || ' ORDER BY c.id_cbcontrato_int, p.data_vencimento_dat ';
	--sSql = sSql || ' ORDER BY c.id_cbcontrato_int, p.data_vencimento_dat ';

	raise notice 'terceira parte';
	
	EXECUTE sSql;

	--raise notice '%', sSql;

	raise notice 'tabela criada';
-- 
-- 	IF datacontrole < dataultimodomingo THEN
-- 	
-- 		CREATE INDEX escontrolefilaaspect_idx1
-- 		  ON escontrolefilaaspect
-- 		  USING btree
-- 		  (id_cbcontrato_int); 
-- 
-- 		raise notice 'idx1';
-- 
-- 		CREATE INDEX escontrolefilaaspect_idx2
-- 		  ON escontrolefilaaspect
-- 		  USING btree
-- 		  (datahora_saidabl_tim); 
-- 
-- 		raise notice 'idx2';
-- 		
-- 		CREATE INDEX escontrolefilaaspect_idx3
-- 		  ON escontrolefilaaspect
-- 		  USING btree
-- 		  (datahora_entradabl_tim); 
-- 
-- 		raise notice 'idx3';
-- 
-- 		CREATE INDEX escontrolefilaaspect_idx4
-- 		  ON escontrolefilaaspect
-- 		  USING btree
-- 		  (datahora_geracaofila_tim); 
-- 
-- 		raise notice 'idx4';
-- 
-- 		CREATE INDEX escontrolefilaaspect_idx5
-- 		  ON escontrolefilaaspect
-- 		  USING btree
-- 		  (codfila_str); 
-- 
-- 		raise notice 'idx5';
-- 
-- 		CREATE INDEX escontrolefilaaspect_idx6
-- 		  ON escontrolefilaaspect
-- 		  USING btree
-- 		  (contrato); 
-- 
-- 		raise notice 'idx6';
-- 
-- 	END IF;

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1867 (class 1255 OID 26509)
-- Name: f_emailscontrato(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_emailscontrato(idcontrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   campos text;
   registro record;
   iTamanho integer;
   i	    integer;
Begin
 campos := '';

 /* Busca todos os emails cadastrado para o cliente, que nï¿½o seja ruim*/
 FOR registro in 
	select distinct e.email_str
	from geqlemail e
	inner join geqlcontrato con on con.id_geqlcliente_int = e.id_geqlcliente_int
	where con.id_cbcontrato_int = idcontrato and e.classificacao_str <> '3 - Ruim'
	and coalesce(e.excluido_bit, '0') <> '1'
 LOOP
   if campos = '' then
      campos :=  registro.email_str || ';';
   else
      campos := campos || registro.email_str || ';';
   end if;
   
 END LOOP;

 /* limita a 400 caracteres, que ï¿½ o limite do layout PLCOB_BOLETO_V102014 */
 campos := substr(campos,1,400);

 /* verifica se o ultimo email na string foi por completo, caso contratio, retira o email que ficou pela metade, mantendo atï¿½ o ultimo ';'*/
 IF substr(campos, length(campos), 1) <> ';' THEN
	raise notice 'substr(campos, length(campos), 1) = %', substr(campos, length(campos), 1);

	iTamanho := length(campos);

	raise notice 'iTamanho %', iTamanho;

	FOR i IN REVERSE iTamanho..1
	LOOP

		raise notice 'substr(campos, i, 1) =  %', substr(campos, i, 1) = ';';

		IF substr(campos, i, 1) = ';' THEN

			raise notice 'entrou i = %', i;

			campos := substr(campos,1,i);
			exit;
			
		END IF;

	END LOOP;
	
	
 END IF;

return campos;

end;
$$;

--
-- TOC entry 1868 (class 1255 OID 26517)
-- Name: f_executablacklist(text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_executablacklist(tipocontato text, contato text, situacaocontato text) RETURNS void
    LANGUAGE plpgsql
    AS $$
Declare
	strSql		TEXT;
	registro	RECORD;
Begin
	if tipoContato = 'T' then
		/*strSql = 'select * from geqlcontato where contato_str = ''' || contato || '''';
		for registro in execute strSql
		loop */
			strSql = 'update geqlcontato set excluido_bit = ' || case situacaoContato when 'I' then '''1''' else '''0''' end || ' where contato_str =  ''' || contato || '''';
			raise notice '%', strSql;
			execute strSql;
		--end loop;
	else --tipoContato = 'E'
		/*strSql = 'select * from geqlemail where email_str = ''' || contato || '''';
		for registro in execute strSql
		loop */
			strSql = 'update geqlemail set excluido_bit = ' || case situacaoContato when 'I' then '''1''' else '''0''' end || ' where email_str = ''' || contato || '''';
			raise notice '%', strSql;
			execute strSql;
		--end loop;
	end if;	
end;
$$;

--
-- TOC entry 1869 (class 1255 OID 26519)
-- Name: f_executablacklistcliente(text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_executablacklistcliente(contato text, idgecliente bigint) RETURNS void
    LANGUAGE plpgsql
    AS $$
Declare
	strSql		TEXT;
	registro	RECORD;
	resultado       text;
	sSituacao       TEXT;
	sTipoContato    TEXT;
	igecliente	bigint;
Begin
	
		select c.situacao_str, b.tipo_contato_str, c.id_gecliente_int into sSituacao, sTipoContato, igecliente 
                  from cbblacklist b
		  inner Join cbblacklistcliente c on (c.id_cbblacklist_int = b.id_cbblacklist_int) 		 
		 where b.contato_str =  contato 
		   and c.id_gecliente_int  =  idgecliente  order by  id_cbblacklistcliente_int desc;
   
            
                

		if sSituacao is not null then

			

			if sTipoContato = 'T' then

			
				strSql = 'update geqlcontato set excluido_bit = ' || case sSituacao when 'I' then '''1''' else '''0''' end || ' where contato_str =  ''' || contato || '''';
				raise notice '%', strSql;
				execute strSql;
		
			else 

			
				strSql = 'update geqlemail set excluido_bit = ' || case sSituacao when 'I' then '''1''' else '''0''' end || ' where email_str = ''' || contato || '''';
				raise notice '%', strSql;
				execute strSql;
			
			end if;	
		END IF;	
	--return  '';
end;
$$;

--
-- TOC entry 1870 (class 1255 OID 26527)
-- Name: f_gera_log_geqlcontato_bloqueiohistorico(bigint, bit, bit, bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_gera_log_geqlcontato_bloqueiohistorico(id_geqlcontato bigint, bloqueado bit, bloqueado_old bit, id_geusuario bigint, historico text) RETURNS void
    LANGUAGE plpgsql
    AS $$
BEGIN
    
	INSERT INTO geqlcontato_bloqueiohistorico 
	(
		id_geqlcontato_int,
		historico_str,
		bloqueado_bit,
		bloqueado_old_bit,
		id_geusuario_int
	) 
	VALUES 
	(
		id_geqlcontato, 
		historico, 
		bloqueado, 
		bloqueado_old, 
		id_geusuario
	);	
		
END;
$$;

--
-- TOC entry 1871 (class 1255 OID 26536)
-- Name: f_gravamailing(character varying, date, character varying, bigint, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_gravamailing(discador character varying, datafila date, codigofila character varying, idcliente bigint, login character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
/* funcao para replicar para a base centralizada, todos os mailings gerados na carteira*/  
DECLARE
  sSql		varchar;
  rsDados	record;
  cont		integer;
  tabela	varchar;

BEGIN

	tabela := '_tmp' || codigofila;

	EXECUTE 'CREATE TABLE ' || tabela || ' (chavemailing_str varchar(60),
							discador_str varchar(10),
							id_gecliente_int bigint,
							codfila_str varchar(10),
							data_fila_dat date,
							data_geracao_tim timestamp,
							login_str varchar(20),
							ip_geracao_str varchar(20),
							contrato_str varchar(60),
							telefone_str varchar(20),
							nomecampanhaativa_str varchar(100))';

			  

	ssql := ' SELECT (''' || idcliente || '.' || codigofila || '.' || ''' || trim(t.contrato))::varchar as chavemailing_str,
				 ''' || discador || '''::varchar as discador_str,
				 ' || idcliente || '::bigint as id_gecliente_int,
				 ''' || codigofila || '''::varchar as codfila_str,
				 ''' || datafila || '''::date as data_fila_dat,
				 t.datahora_geracaofila_tim as data_geracao_tim,
				 ''' || login || '''::varchar as login_str,
				 inet_client_addr() as ip_geracao_str,
				 trim(t.contrato) as contrato_str,
				 COALESCE(t.nomecampanhaativa,'''') as nomecampanhaativa_str,
				 
				 ';

	IF upper(discador) = 'ALTITUDE 7' THEN

		cont := 15;

		ssql := ssql || 'COALESCE(t.telefone1,'''') as telefone1,
				 COALESCE(t.telefone2,'''') as telefone2,
				 COALESCE(t.telefone3,'''') as telefone3,
				 COALESCE(t.telefone4,'''') as telefone4,
				 COALESCE(t.telefone5,'''') as telefone5,
				 COALESCE(t.telefone6,'''') as telefone6,
				 COALESCE(t.telefone7,'''') as telefone7,
				 COALESCE(t.telefone8,'''') as telefone8,
				 COALESCE(t.telefone9,'''') as telefone9,
				 COALESCE(t.telefone10,'''') as telefone10,
				 COALESCE(t.telefone11,'''') as telefone11,
				 COALESCE(t.telefone12,'''') as telefone12,
				 COALESCE(t.telefone13,'''') as telefone13,
				 COALESCE(t.telefone14,'''') as telefone14,
				 COALESCE(t.telefone15,'''') as telefone15

				FROM escontrolefilaaltitude t
		';

	ELSIF upper(discador) = 'ASPECT' THEN

		cont := 10;

		ssql := ssql || '
				COALESCE(t.telefone1,'''') as telefone1,
				COALESCE(t.telefone2,'''') as telefone2,
				COALESCE(t.telefone3,'''') as telefone3,
				COALESCE(t.telefone4,'''') as telefone4,
				COALESCE(t.telefone5,'''') as telefone5,
				COALESCE(t.telefone6,'''') as telefone6,
				COALESCE(t.telefone7,'''') as telefone7,
				COALESCE(t.telefone8,'''') as telefone8,
				COALESCE(t.telefone9,'''') as telefone9,
				COALESCE(t.telefone10,'''') as telefone10
				
				FROM escontrolefilaaspect t
				';

	ELSEIF upper(discador) = 'ALTITUDE 8' THEN
		cont := 15;
		
		ssql := ssql || 'COALESCE(t.telefone01,'''') as telefone1,
				 COALESCE(t.telefone02,'''') as telefone2,
				 COALESCE(t.telefone03,'''') as telefone3,
				 COALESCE(t.telefone04,'''') as telefone4,
				 COALESCE(t.telefone05,'''') as telefone5,
				 COALESCE(t.telefone06,'''') as telefone6,
				 COALESCE(t.telefone07,'''') as telefone7,
				 COALESCE(t.telefone08,'''') as telefone8,
				 COALESCE(t.telefone09,'''') as telefone9,
				 COALESCE(t.telefone10,'''') as telefone10,
				 COALESCE(t.telefone11,'''') as telefone11,
				 COALESCE(t.telefone12,'''') as telefone12,
				 COALESCE(t.telefone13,'''') as telefone13,
				 COALESCE(t.telefone14,'''') as telefone14,
				 COALESCE(t.telefone15,'''') as telefone15
 
				FROM escontrolefilaaltitudev8 t
		';
	ELSEIF upper(discador) = 'OLOS' THEN
		cont := 15;
		
		ssql := ssql || 'COALESCE(t.telefone01,'''') as telefone1,
				 COALESCE(t.telefone02,'''') as telefone2,
				 COALESCE(t.telefone03,'''') as telefone3,
				 COALESCE(t.telefone04,'''') as telefone4,
				 COALESCE(t.telefone05,'''') as telefone5,
				 COALESCE(t.telefone06,'''') as telefone6,
				 COALESCE(t.telefone07,'''') as telefone7,
				 COALESCE(t.telefone08,'''') as telefone8,
				 COALESCE(t.telefone09,'''') as telefone9,
				 COALESCE(t.telefone10,'''') as telefone10,
				 COALESCE(t.telefone11,'''') as telefone11,
				 COALESCE(t.telefone12,'''') as telefone12,
				 COALESCE(t.telefone13,'''') as telefone13,
				 COALESCE(t.telefone14,'''') as telefone14,
				 COALESCE(t.telefone15,'''') as telefone15
 
				FROM escontrolefilaolos t
		';

	END IF;

	ssql := ssql || '

		WHERE codfila_str = ''' || codigofila || '''
	';

	raise notice 'ssql %', ssql;

	
	FOR rsDados IN EXECUTE ssql
	LOOP
		--raise notice '%', rsdados;
		FOR i IN 1..cont
		LOOP
			ssql := '';
			IF length(trim(replace(split_part(rsDados::varchar,',',10+i),'"','')) )>=10 THEN
			
				ssql := 'INSERT INTO ' || tabela || ' (chavemailing_str,
										discador_str,
										id_gecliente_int,
										codfila_str,
										data_fila_dat,
										data_geracao_tim,
										login_str,
										ip_geracao_str,
										contrato_str,
										telefone_str,
										nomecampanhaativa_str)
					 VALUES (
						''' || rsDados.chavemailing_str || ''',
						''' || rsDados.discador_str || ''',
						' || rsDados.id_gecliente_int || ',
						''' || rsDados.codfila_str || ''',
						''' || rsDados.data_fila_dat || ''',
						''' || rsDados.data_geracao_tim || ''',
						''' || rsDados.login_str || ''',
						''' || rsDados.ip_geracao_str || ''',
						''' || rsDados.contrato_str || ''',
						''' || trim(replace(split_part(rsDados::varchar,',',10+i),'"','')) || ''',
						''' || rsDados.nomecampanhaativa_str || ''');

					

				';

				/*ssql := 'INSERT INTO mailingnpcobdiscador  (chavemailing_str,
										discador_str,
										id_gecliente_int,
										codfila_str,
										data_fila_dat,
										data_geracao_tim,
										login_str,
										ip_geracao_str,
										contrato_str,
										telefone_str)
					 VALUES (
						''''' || rsDados.chavemailing_str || ''''',
						''''' || rsDados.discador_str || ''''',
						' || rsDados.id_gecliente_int || ',
						''''' || rsDados.codfila_str || ''''',
						''''' || rsDados.data_fila_dat || ''''',
						''''' || rsDados.data_geracao_tim || ''''',
						''''' || rsDados.login_str || ''''',
						''''' || rsDados.ip_geracao_str || ''''',
						''''' || rsDados.contrato_str || ''''',
						''''' || trim(replace(split_part(rsDados::varchar,''',''',9+i),'''"''','''')) || ''''');

					

				';*/
				EXECUTE ssql;

			END IF;
		END LOOP;
		

	END LOOP;

	/* SELECT * FROM dblink('dbname=' || bancodestino || ' port=' || portadestino || ' host=' || ipdestino || ' user=postgres  password=' || senhadestino || ''::text, 
			'SELECT * FROM fcreplicamailing(''' || codigofila || ''',
					 ''' || bancoorigem || ''', 
					 ''' || iporigem || ''', 
					 ''' || portaorigem || ''', 
					 ''' || senhaorigem || ''',
					 ''' || tabela || ''') t (valor varchar)'::text) t (valor varchar);*/

	RETURN  'OK';
END;

$$;

--
-- TOC entry 1872 (class 1255 OID 26538)
-- Name: f_imp_ge212(integer, integer, integer, character varying, character varying, character varying, integer, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_imp_ge212(processo integer, idgeqlcliente integer, tipocontato integer, telefone character varying, classificacao character varying, origem character varying, idusuario integer, cpf bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE valores RECORD;

BEGIN
--Temporaria tela ge202tmp_CODIGOIMPORTACAO
	IF PROCESSO = 0 THEN 
	-- Demais carteiras com fluxo normal
		EXECUTE 'INSERT INTO GEQLCONTATO (
				ID_GEQLCLIENTE_INT,
				ID_GEQLTIPOCONTATO_INT,
				CONTATO_STR,
				CLASSIFICACAO_STR,
				TABELA_ORIGEM_STR,
				TSTAMP,
				ID_GEUSUARIO_INT,
				ID_GEUSUARIO_INCLUSAO_INT
				) VALUES (
				'  || IdGeQlCliente ||'  ,
				'  ||  TipoContato  ||'  ,
				'''||    Telefone   ||''',
				'''|| Classificacao ||''',
				'''||     Origem    ||''',
				    CURRENT_TIMESTAMP    ,
				'  ||   IdUsuario   ||  ',
				'  ||   IdUsuario   ||  ')';
	END IF;
RETURN '';
END;
$$;

--
-- TOC entry 1873 (class 1255 OID 26549)
-- Name: f_imp_ge212(integer, integer, integer, character varying, character varying, character varying, integer, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_imp_ge212(processo integer, idgeqlcliente integer, tipocontato integer, telefone character varying, classificacao character varying, origem character varying, idusuario integer, cpf character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE valores RECORD;

BEGIN
--Temporaria tela ge202tmp_CODIGOIMPORTACAO
	IF PROCESSO = 0 THEN 
	-- Demais carteiras com fluxo normal
		EXECUTE 'INSERT INTO GEQLCONTATO (
				ID_GEQLCLIENTE_INT,
				ID_GEQLTIPOCONTATO_INT,
				CONTATO_STR,
				CLASSIFICACAO_STR,
				TABELA_ORIGEM_STR,
				TSTAMP,
				ID_GEUSUARIO_INT,
				ID_GEUSUARIO_INCLUSAO_INT
				) VALUES (
				'  || IdGeQlCliente ||'  ,
				'  ||  TipoContato  ||'  ,
				'''||    Telefone   ||''',
				'''|| Classificacao ||''',
				'''||     Origem    ||''',
				    CURRENT_TIMESTAMP    ,
				'  ||   IdUsuario   ||  ',
				'  ||   IdUsuario   ||  ')';
	END IF;
RETURN '';
END;
$$;

--
-- TOC entry 1874 (class 1255 OID 26560)
-- Name: f_imp_ge212(integer, integer, integer, character varying, character varying, character varying, character varying, integer, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_imp_ge212(processo integer, idgeqlcliente integer, tipocontato integer, telefone character varying, classificacao character varying, origem character varying, origemcarteira character varying, idusuario integer, cpf bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE valores RECORD;

BEGIN
--Temporaria tela ge202tmp_CODIGOIMPORTACAO
	IF processo = 1 THEN 
	-- Excluï¿½do bit de acordo com o filtro de telefones XX para as carteiras 8,88,92,343
		EXECUTE 'INSERT INTO GEQLCONTATO (
				ID_GEQLCLIENTE_INT,
				ID_GEQLTIPOCONTATO_INT,
				CONTATO_STR,
				CLASSIFICACAO_STR,
				TABELA_ORIGEM_STR,
				ORIGEM_CARTEIRA_STR,
				TSTAMP,
				ID_GEUSUARIO_INT,
				ID_GEUSUARIO_INCLUSAO_INT,
				BLOQUEADO_BIT,
				--IGNORE_TRG_BIT,
				OBSERVACAO_STR
				) VALUES (
				'  || IdGeQlCliente ||'  ,
				'  ||  TipoContato  ||'  ,
				'''||    Telefone   ||''',
				'''|| Classificacao ||''',
				'''||     Origem    ||''',
				'''||ORIGEMCARTEIRA ||''',
				    CURRENT_TIMESTAMP    ,
				'  ||   IdUsuario   ||  ',
				'  ||   IdUsuario   ||  ',
				B''1'',
				--B''1'',
				(SELECT CASE WHEN FCVALIDATELEFONE('''|| Telefone ||''',ABS_CPF('''|| CPF ||''')) = B''1'' 
					THEN ''BLOQUEADO_BIT''::VARCHAR ELSE NULL END))';

	ELSEIF PROCESSO = 0 THEN 
	-- Demais carteiras com fluxo normal
		EXECUTE 'INSERT INTO GEQLCONTATO (
				ID_GEQLCLIENTE_INT,
				ID_GEQLTIPOCONTATO_INT,
				CONTATO_STR,
				CLASSIFICACAO_STR,
				TABELA_ORIGEM_STR,
				ORIGEM_CARTEIRA_STR,
				TSTAMP,
				ID_GEUSUARIO_INT,
				ID_GEUSUARIO_INCLUSAO_INT
				) VALUES (
				'  || IdGeQlCliente ||'  ,
				'  ||  TipoContato  ||'  ,
				'''||    Telefone   ||''',
				'''|| Classificacao ||''',
				'''||     Origem    ||''',
				'''||ORIGEMCARTEIRA ||''',
				    CURRENT_TIMESTAMP    ,
				'  ||   IdUsuario   ||  ',
				'  ||   IdUsuario   ||  ')';
	END IF;
RETURN '';
END;
$$;

--
-- TOC entry 1875 (class 1255 OID 26569)
-- Name: f_imp_ge212(integer, integer, integer, character varying, character varying, character varying, character varying, integer, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_imp_ge212(processo integer, idgeqlcliente integer, tipocontato integer, telefone character varying, classificacao character varying, origem character varying, origemcarteira character varying, idusuario integer, cpf character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE valores RECORD;

BEGIN
--Temporaria tela ge202tmp_CODIGOIMPORTACAO
	IF PROCESSO = 0 THEN 
	-- Demais carteiras com fluxo normal
		EXECUTE 'INSERT INTO GEQLCONTATO (
				ID_GEQLCLIENTE_INT,
				ID_GEQLTIPOCONTATO_INT,
				CONTATO_STR,
				CLASSIFICACAO_STR,
				TABELA_ORIGEM_STR,
				ORIGEM_CARTEIRA_STR,
				TSTAMP,
				ID_GEUSUARIO_INT,
				ID_GEUSUARIO_INCLUSAO_INT
				) VALUES (
				'  || IdGeQlCliente ||'  ,
				'  ||  TipoContato  ||'  ,
				'''||    Telefone   ||''',
				'''|| Classificacao ||''',
				'''||     Origem    ||''',
				'''||ORIGEMCARTEIRA ||''',
				    CURRENT_TIMESTAMP    ,
				'  ||   IdUsuario   ||  ',
				'  ||   IdUsuario   ||  ')';
	END IF;
RETURN '';
END;
$$;

--
-- TOC entry 1876 (class 1255 OID 26578)
-- Name: f_importa_logistica_reversa_endereco(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_importa_logistica_reversa_endereco(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		EXECUTE 'DROP TABLE IF EXISTS tmplogisticareversaendereco_retorno;
			CREATE TABLE tmplogisticareversaendereco_retorno AS 
		        SELECT tmp.carteira,
                               tmp.chave_acesso,
                               tmp.arquivo_remessa,
                               to_date(tmp.data_postagem, ''YYYY-MM-DD'') AS data_postagem,
                               to_date(tmp.data_devolucao, ''YYYY-MM-DD'') as data_devolucao,
                               tmp.codigo_devolucao,
                               tmp.motivo_devolucao,
                               tmp.id_postagem,
                               tmp.endereco,
                               tmp.numero,
                               tmp.complemento,
                               tmp.bairro,
                               tmp.cidade,
                               tmp.estado,
                               tmp.cep,
                               i.id_cbitembordero_int,
                               i.id_geqlendereco_int,
                               c.contrato_str
                          FROM ' || tabtemp || ' tmp
                          JOIN cbitembordero i
                            ON i.id_cbitembordero_int = SUBSTRING(tmp.chave_acesso, 1,LENGTH(tmp.chave_acesso) - 4)::BIGINT
                          JOIN geqlendereco e
                            ON e.id_geqlendereco_int = i.id_geqlendereco_int
                           AND e.classificacao_str <> ''3 - Ruim''
                          JOIN cbcontrato c
                            ON c.id_cbcontrato_int = i.id_cbcontrato_int                          
                         WHERE SUBSTRING(tmp.chave_acesso, LENGTH(tmp.chave_acesso) - 3,4)::BIGINT = ' || idgecliente;
                           
	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
 		--Grava Histï¿½rico para usuï¿½rio
 		RAISE NOTICE 'Historico %', '';
 		EXECUTE 'INSERT INTO gehistoricousuario (
		                     id_geusuario_int, 
		                     id_geaplicacao_int, 
		                     id_gecliente_int, 
		                     data_hora_dat, 
		                     evento_str, 
		                     contrato_str, 
		                     parcela_int, 
		                     obs_txt)                              
                               SELECT
                                        ' || idgeusuario || ',
					0,
					' || idgecliente || ',
					current_timestamp,
					''Logistica Reversa Boletagem'', 
					t.contrato_str,
					0,
					''Endereco, '' || t.endereco || '', colocado como Ruim pelo motivo de retorno dos Correios: '' || t.codigo_devolucao || '' - '' || t.motivo_devolucao
				FROM tmplogisticareversaendereco_retorno t';

		--Log do arquivo
		RAISE NOTICE 'Log Arquivo %', '';
		EXECUTE 'INSERT INTO cbitemborderoretorno(id_cbitembordero_int,
		                                          status_envio_str,
		                                          descricao_critica_str,
		                                          data_dat,
		                                          id_geusuario_int,
		                                          tela_str,
		                                          endereco_str,
                                                          complemento_str,
                                                          bairro_str,
                                                          cep_str,
                                                          cidade_str,
                                                          estado_str)
		                                          (SELECT id_cbitembordero_int,
		                                                  codigo_devolucao,
		                                                  motivo_devolucao,
		                                                  CURRENT_DATE,
		                                                  ' || idgeusuario || ',
		                                                  ''Processo logistica reversa'',
		                                                  endereco,
                                                                  complemento,
                                                                  bairro,
                                                                  cep,
                                                                  cidade,
                                                                  estado
		                                             FROM tmplogisticareversaendereco_retorno )';

		--Altera classificacao endereco para Ruim
		RAISE NOTICE 'Classificando como Ruim %', '';
		EXECUTE 'UPDATE geqlendereco SET classificacao_str = ''3 - Ruim'',
		                                 tstamp = CURRENT_TIMESTAMP,
		                                 id_geusuario_int = ' || idgeusuario || '
		           FROM tmplogisticareversaendereco_retorno t
		          WHERE t.id_geqlendereco_int = geqlendereco.id_geqlendereco_int';

		EXECUTE 'DROP TABLE IF EXISTS tmplogisticareversaendereco_retorno;';
		
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1877 (class 1255 OID 26580)
-- Name: f_importa_pirelli(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_importa_pirelli(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	cont     int8;
	rsDados RECORD;
	rsDados2 RECORD;
	sRetorno varchar;

BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN		

	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_contrato';
	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_parcela';
	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_qualidade';
			 
		-- **** CRIA TEMPORARIA DE CONTRATO e PARCELA
		EXECUTE 'CREATE TABLE ' || tabtemp || '_contrato AS

			SELECT  distinct on (abs_cpf(t.cgc_cpf))	
			(CASE WHEN c.id_cbcontrato_int IS NOT NULL THEN ''A'' 
				     ELSE ''I''
				     END)::varchar as inclui_altera_contrato_str,
				     
				CASE WHEN c.id_cbcontrato_int IS NOT NULL THEN c.id_cbcontrato_int 
				     ELSE nextval(''cbcontrato_seq'') 
				     END id_cbcontrato_int,
				
				1::bigint as id_cbtiponegocio_int,				     
				1::bigint AS id_cbetapa_int,
				1 as id_fimoeda_int, 
				' || idgecliente || '::bigint as id_gecliente_int,
  				CASE WHEN COALESCE(c.id_cbsituacaocontrato_int, 1) = 6 THEN 1 
  				     ELSE COALESCE(c.id_cbsituacaocontrato_int, 1) 
				END as id_cbsituacaocontrato_int, 

  				current_date as data_ultima_distrib_dat, 
  				CASE WHEN length(abs_cpf(t.cgc_cpf)) = 11 THEN ''F'' ELSE ''J'' END tipo_pessoa_str,
  				abs_cpf(t.cgc_cpf) as cpf_str,
  				abs_cpf(t.cgc_cpf) as contrato_str,
				upper(t.nome) as nome_str,
				t.inscr_estadual as rg_str,
				t.endereco as endereco_str,
				t.bairro as bairro_str,
				t.cidade as cidade_str, 
				t.reg as estado_str, 
				t.cep as cep_str,
				t.telefone as telefone_str,
				lower(t.email) as email_str,
				t.cliente as cod_cliente_str,
				t.filial as cod_filial_str,
				t.descricao_filial as descricao_filial_str,
				t.contato_loja as contato_loja_str,
				t.cidade_loja as cidade_loja_str,
				t.estado_loja as estado_loja_str,
				t.contato_loja_adm as contato_loja_adm_str,
				t.tipo as tipo_str,
				''' || chave || '''::character varying as chave_str

				FROM ' || tabtemp || ' t
				LEFT JOIN ' || tabelafilha || ' c ON abs_cpf(t.cgc_cpf) = c.contrato_str
				WHERE t.chave_str = ''' || chave || ''';
				

  				

			CREATE INDEX ' || tabtemp || '_contrato_idx1
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (contrato_str);

		        CREATE INDEX ' || tabtemp || '_contrato_idx2
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (id_cbcontrato_int);	

		        CREATE INDEX ' || tabtemp || '_contrato_idx3
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (inclui_altera_contrato_str);			

		';

		raise notice 'contrato';

		EXECUTE 'CREATE TABLE ' || tabtemp || '_parcela AS 

			SELECT 
  				(CASE WHEN p.id_cbparcela_int IS NOT NULL THEN ''A'' 
				     ELSE ''I''
				     END)::varchar as inclui_altera_parcela_str,
				     
				CASE WHEN p.id_cbparcela_int IS NOT NULL THEN p.id_cbparcela_int 
				     ELSE nextval(''cbparcela_seq'') 
				     END id_cbparcela_int,
				c.id_cbcontrato_int, 
				current_date as data_ultima_distrib_dat,
				p.parcela_int,
  				replace(replace(t.valor,''.'',''''),'','',''.'')::double precision as valor_principal_num,
  				to_date(substr(vencimento, 7,4) || ''-'' || substr(vencimento, 4,2) || ''-'' || substr(vencimento, 1,2),''yyyy-mm-dd'') as data_vencimento_dat,
  				(CASE WHEN COALESCE(p.situacao_int, 0) in (4, 6) THEN 0 ELSE COALESCE(p.situacao_int, 0) END)::bigint as situacao_int,
				''1''::varchar as tipo_str,
				1::bigint as id_esregua_int,
				t.nota_fiscal as nota_fiscal_str,
				t.atribuicao as atribuicao_str,
				t.segmento as segmento_str,
				to_date(substr(emissao, 7,4) || ''-'' || substr(emissao, 4,2) || ''-'' || substr(emissao, 1,2),''yyyy-mm-dd'') as emissao_dat,
				t.texto_contabil as texto_contabil_str,
				''' || chave || '''::character varying as chave_str
							

			FROM ' || tabtemp || ' t
			LEFT JOIN ' || tabtemp || '_contrato c ON abs_cpf(t.cgc_cpf) = c.contrato_str
			LEFT JOIN cbparcela p ON c.id_cbcontrato_int = p.id_cbcontrato_int
				             AND p.nota_fiscal_str = t.nota_fiscal
				             AND p.data_vencimento_dat = to_date(substr(vencimento, 7,4) || ''-'' || substr(vencimento, 4,2) || ''-'' || substr(vencimento, 1,2),''yyyy-mm-dd'') 
			WHERE t.chave_str = ''' || chave || ''';';

		raise notice 'parcela';

		/*acerta numero de parcelas */

		FOR rsDados IN EXECUTE '
			SELECT DISTINCT id_cbcontrato_int 
			FROM ' || tabtemp || '_parcela
			WHERE parcela_int is null
			  AND id_cbcontrato_int is not null
	
		'
		LOOP
			raise notice '---- %', rsDados.id_cbcontrato_int;
			
			--cont :=0;
			cont := COALESCE((SELECT MAX(parcela_int) from cbparcela where id_cbcontrato_int = rsDados.id_cbcontrato_int ),0);

			FOR rsDados2 IN EXECUTE ' SELECT id_cbparcela_int 
						  FROM ' || tabtemp || '_parcela 
						  WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int || '
						    AND parcela_int is null
						  ORDER BY data_vencimento_dat
						    
						  '
			LOOP

				raise notice '***';
				cont := cont + 1;

				EXECUTE 'UPDATE ' || tabtemp || '_parcela 
					 SET parcela_int = ' || cont || '
					 WHERE id_cbparcela_int = ' || rsDados2 || ';
				';
				
			END LOOP;

		END LOOP;

		raise notice 'numero de parcelas';

		EXECUTE 'CREATE TABLE ' || tabtemp || '_qualidade AS
			SELECT
				''' || chave || '''::character varying as chave_str, 
				' || idgecliente || '::bigint as id_gecliente_int,
				id_cbtiponegocio_int,
				contrato_str,
				null::character varying as rg_str,
				null::character varying as org_exp_rg_str,
				null::date as dt_exp_rg_dat,
				null::character varying as uf_rg_str,
				cpf_str,
				nome_str,
				id_cbcontrato_int,
				
				endereco_str,
				bairro_str,
				cep_str,
				cidade_str,
				estado_str,

				telefone_str,
				email_str
				
			FROM ' || tabtemp || ' t
			INNER JOIN ' || tabtemp || '_contrato c ON abs_cpf(t.cgc_cpf) = c.contrato_str

		';

		raise notice 'qualidade';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	
							
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN

			/*batimento*/
			
			EXECUTE 'UPDATE ' || tabelafilha || '
				 SET batimento_str = null
				 WHERE batimento_str is not null';

			EXECUTE 'UPDATE cbparcela
				 SET batimento_str = null
				 WHERE batimento_str is not null';
				 

			EXECUTE '
				INSERT
				INTO	' || tabelafilha || ' (

					id_gecliente_int,
					id_geusuario_int,
					id_geempresa_int,
					id_cbcontrato_int,
					id_cbtiponegocio_int,
					id_cbetapa_int,
					id_fimoeda_int, 
					id_cbsituacaocontrato_int, 
					data_primeira_distrib_dat, 
					data_ultima_distrib_dat, 
					contrato_str,
					cpf_str,
					nome_str,
					rg_str,
					endereco_str,
					bairro_str,
					cidade_str, 
					estado_str, 
					cep_str,
					email_str,
					telefone_str,
					cod_cliente_str,
					cod_filial_str,
					descricao_filial_str,				
					id_gefilial_int,
					contato_loja_str,
					cidade_loja_str,
					estado_loja_str,
					contato_loja_adm_str,
					tipo_str,

					batimento_str
					
					
				)

				select 
					' || idgecliente || ',
					' || idgeusuario || ',
					' || idgeempresa || ',
					id_cbcontrato_int,
					id_cbtiponegocio_int,
					id_cbetapa_int,
					id_fimoeda_int, 
					id_cbsituacaocontrato_int, 
					data_ultima_distrib_dat, 
					data_ultima_distrib_dat, 
					contrato_str,
					cpf_str,
					nome_str,
					rg_str,
					endereco_str,
					bairro_str,
					cidade_str, 
					estado_str, 
					cep_str,
					email_str,
					telefone_str,
					cod_cliente_str,
					cod_filial_str,
					descricao_filial_str,
					' || idgefilial || ',
					contato_loja_str,
					cidade_loja_str,
					estado_loja_str,
					contato_loja_adm_str,
					tipo_str,

					''X''			
				
				FROM	' || tabtemp || '_contrato c
				WHERE inclui_altera_contrato_str = ''I'' 
				  
			';

			raise notice 'contratos inseridos';

			EXECUTE 'UPDATE ' || tabelafilha || '
				    SET id_cbsituacaocontrato_int = t.id_cbsituacaocontrato_int,
					id_cbtiponegocio_int = t.id_cbtiponegocio_int,
					id_cbetapa_int = t.id_cbetapa_int,
					id_geusuario_int = ' || idgeusuario || ',
					tstamp = current_timestamp,
					data_ultima_distrib_dat = t.data_ultima_distrib_dat,
					endereco_str = t.endereco_str,
					bairro_str = t.bairro_str,
					cidade_str = t.cidade_str, 
					estado_str = t.estado_str, 
					cep_str = t.cep_str,
					email_str = t.email_str,
					telefone_str = t.telefone_str,
					cod_cliente_str = t.cod_cliente_str,
					cod_filial_str = t.cod_filial_str,
					descricao_filial_str = t.descricao_filial_str,	 	 	
					id_gefilial_int =  ' || idgefilial || '	,
					contato_loja_str = t.contato_loja_str,
					cidade_loja_str = t.cidade_loja_str,
					estado_loja_str = t.estado_loja_str,
					contato_loja_adm_str = t.contato_loja_adm_str,
					tipo_str = t.tipo_str,
					batimento_str = ''X''				
					
					
				FROM	' || tabtemp || '_contrato t
				WHERE	inclui_altera_contrato_str = ''A'' AND
					' || tabelafilha || '.id_cbcontrato_int = t.id_cbcontrato_int;
			';

			raise notice 'contratos alterados';

			EXECUTE '
				INSERT
				INTO	cbparcela (						
						id_cbparcela_int,
						id_cbcontrato_int, 
						parcela_int, 
						tipo_str, 
						data_vencimento_dat,
						valor_principal_num, 
						situacao_int, 
						data_primeira_distrib_dat, 
						data_ultima_distrib_dat, 
						id_esregua_int, 
						id_geusuario_int, 					
						tstamp,
						nota_fiscal_str,
						atribuicao_str,
						segmento_str,
						emissao_dat,
						texto_contabil_str,
						batimento_str
				)
				SELECT	
						
					       t.id_cbparcela_int,
					       t.id_cbcontrato_int,
					       parcela_int,
					       /*(COALESCE((SELECT MAX(p2.parcela_int) 
								  FROM cbparcela p2 
								  WHERE p2.id_cbcontrato_int = t.id_cbcontrato_int),0) + 1) as parcela_int,*/
					       t.tipo_str,
					       t.data_vencimento_dat,
					       t.valor_principal_num,
					       t.situacao_int,
					       t.data_ultima_distrib_dat,
					       t.data_ultima_distrib_dat,
					       t.id_esregua_int,
					       ' || idgeusuario || '::bigint as id_geusuario_int,
					       current_timestamp,
					       t.nota_fiscal_str,
					       t.atribuicao_str,
					       t.segmento_str,
					       t.emissao_dat,
					       texto_contabil_str,
					       ''X''
				FROM	' || tabtemp || '_parcela t
				WHERE	inclui_altera_parcela_str = ''I''
				; 
			';

			raise notice 'parcelas inseridas';

			EXECUTE '
				UPDATE	cbparcela
				SET	
					data_vencimento_dat = t.data_vencimento_dat,
					valor_principal_num = t.valor_principal_num, 
					situacao_int = t.situacao_int, 
					data_ultima_distrib_dat = t.data_ultima_distrib_dat,
					id_geusuario_int = ' || idgeusuario || ',					
					tstamp = current_timestamp,
					atribuicao_str = t.atribuicao_str,
					segmento_str = t.segmento_str,
					emissao_dat = t.emissao_dat,
					texto_contabil_str = t.texto_contabil_str,
					batimento_str = ''X''
				FROM	' || tabtemp || '_parcela t
				WHERE	t.inclui_altera_parcela_str = ''A'' AND
					cbparcela.id_cbcontrato_int = t.id_cbcontrato_int AND
					cbparcela.id_cbparcela_int = t.id_cbparcela_int;				
			';

			raise notice 'parcelas alteradas';
			
			EXECUTE '
				INSERT
				INTO	cbdistribparcela (
						id_cbparcela_int,
						id_cbcontrato_int,
						data_pre_distrib_dat)
				SELECT	DISTINCT ON (id_cbparcela_int)
					id_cbparcela_int,
					id_cbcontrato_int,
					data_ultima_distrib_dat
				FROM	' || tabtemp || '_parcela t ; 
			';

			raise notice 'cbdistribparcela';

			/*batimento*/
			
			FOR rsDados IN EXECUTE 'SELECT p.id_cbparcela_int,p.parcela_int, c.contrato_str
						FROM cbparcela p
						INNER JOIN ' || tabelafilha || ' c ON c.id_cbcontrato_int = p.id_cbcontrato_int
						WHERE p.batimento_str is null
						  AND p.situacao_int not in (4,6)'
			LOOP

				EXECUTE 'UPDATE cbparcela
					 SET situacao_int = 6
					 WHERE id_cbparcela_int = ' || rsDados.id_cbparcela_int;
				

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Parcela cancelada pelo batimento'',
							''' || rsDados.contrato_str || ''',
							' || rsDados.parcela_int || '::bigint,
							''Parcela nï¿½o citada no arquivo de hoje'')';

							raise notice 'baixando parcelas...';

			END LOOP;	

			FOR rsDados IN EXECUTE 'SELECT c.id_cbcontrato_int, c.contrato_str
						FROM  ' || tabelafilha || ' c
						WHERE batimento_str is null
						  AND id_cbsituacaocontrato_int <> 6 '
			LOOP

				EXECUTE 'UPDATE ' || tabelafilha || '
					 SET id_cbsituacaocontrato_int = 6
					 WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int;

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Contrato baixado pelo batimento'',
							''' || rsDados.contrato_str || ''',
							0::bigint,
							''Contrato nï¿½o citado no arquivo de hoje'')';

							raise notice 'baixando contratos...';

			END LOOP;

			FOR rsDados IN EXECUTE 'SELECT c.id_cbcontrato_int, c.contrato_str
						FROM  ' || tabelafilha || ' c
						WHERE id_cbsituacaocontrato_int <> 6 
						  AND (SELECT COUNT(*) FROM cbparcela p WHERE p.id_cbcontrato_int = c.id_cbcontrato_int and p.situacao_int not in (4,6) )= 0 '
			LOOP

				EXECUTE 'UPDATE ' || tabelafilha || '
					 SET id_cbsituacaocontrato_int = 6
					 WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int;

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Contrato baixado'',
							''' || rsDados.contrato_str || ''',
							0::bigint,
							''Contrato nï¿½o possuï¿½a parcelas em aberto, foi baixado'')';

							raise notice 'baixando contratos sem parcelas...';

			END LOOP;				

						
				    				    
	END IF;

	RETURN  'OK';
END;
$$;

--
-- TOC entry 1878 (class 1255 OID 26591)
-- Name: f_importa_pirelli_old(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_importa_pirelli_old(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	cont     int8;
	rsDados RECORD;
	rsDados2 RECORD;
	sRetorno varchar;

BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN		

	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_contrato';
	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_parcela';
	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_qualidade';
			 
		-- **** CRIA TEMPORARIA DE CONTRATO e PARCELA
		EXECUTE 'CREATE TABLE ' || tabtemp || '_contrato AS

			SELECT  distinct on (abs_cpf(t.cgc_cpf))	
			(CASE WHEN c.id_cbcontrato_int IS NOT NULL THEN ''A'' 
				     ELSE ''I''
				     END)::varchar as inclui_altera_contrato_str,
				     
				CASE WHEN c.id_cbcontrato_int IS NOT NULL THEN c.id_cbcontrato_int 
				     ELSE nextval(''cbcontrato_seq'') 
				     END id_cbcontrato_int,
				
				1::bigint as id_cbtiponegocio_int,				     
				1::bigint AS id_cbetapa_int,
				1 as id_fimoeda_int, 
				' || idgecliente || '::bigint as id_gecliente_int,
  				CASE WHEN COALESCE(c.id_cbsituacaocontrato_int, 1) = 6 THEN 1 
  				     ELSE COALESCE(c.id_cbsituacaocontrato_int, 1) 
				END as id_cbsituacaocontrato_int, 

  				current_date as data_ultima_distrib_dat, 
  				CASE WHEN length(abs_cpf(t.cgc_cpf)) = 11 THEN ''F'' ELSE ''J'' END tipo_pessoa_str,
  				abs_cpf(t.cgc_cpf) as cpf_str,
  				abs_cpf(t.cgc_cpf) as contrato_str,
				upper(t.nome) as nome_str,
				t.inscr_estadual as rg_str,
				t.endereco as endereco_str,
				t.bairro as bairro_str,
				t.cidade as cidade_str, 
				t.reg as estado_str, 
				t.cep as cep_str,
				t.telefone as telefone_str,
				lower(t.email) as email_str,
				t.cliente as cod_cliente_str,
				t.nome_func as nome_func_str,
				t.codigo_fun as cod_func_str,
				t.filial as cod_filial_str,
				t.descricao_filial as descricao_filial_str,
				t.filial_falt as cod_faturamento_str,
				t.descr_faturamento as descricao_faturamento_str,
				''' || chave || '''::character varying as chave_str

				FROM ' || tabtemp || ' t
				LEFT JOIN ' || tabelafilha || ' c ON abs_cpf(t.cgc_cpf) = c.contrato_str
				WHERE t.chave_str = ''' || chave || ''';
				

  				

			CREATE INDEX ' || tabtemp || '_contrato_idx1
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (contrato_str);

		        CREATE INDEX ' || tabtemp || '_contrato_idx2
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (id_cbcontrato_int);	

		        CREATE INDEX ' || tabtemp || '_contrato_idx3
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (inclui_altera_contrato_str);			

		';

		raise notice 'contrato';

		EXECUTE 'CREATE TABLE ' || tabtemp || '_parcela AS 

			SELECT 
  				(CASE WHEN p.id_cbparcela_int IS NOT NULL THEN ''A'' 
				     ELSE ''I''
				     END)::varchar as inclui_altera_parcela_str,
				     
				CASE WHEN p.id_cbparcela_int IS NOT NULL THEN p.id_cbparcela_int 
				     ELSE nextval(''cbparcela_seq'') 
				     END id_cbparcela_int,
				c.id_cbcontrato_int, 
				current_date as data_ultima_distrib_dat,
				p.parcela_int,
  				replace(t.valor,'','',''.'')::double precision as valor_principal_num,
  				to_date(substr(vencimento, 7,4) || ''-'' || substr(vencimento, 4,2) || ''-'' || substr(vencimento, 1,2),''yyyy-mm-dd'') as data_vencimento_dat,
  				(CASE WHEN COALESCE(p.situacao_int, 0) in (4, 6) THEN 0 ELSE COALESCE(p.situacao_int, 0) END)::bigint as situacao_int,
				''1''::varchar as tipo_str,
				1::bigint as id_esregua_int,
				t.nota_fiscal as nota_fiscal_str,
				t.atribuicao as atribuicao_str,
				t.segmento as segmento_str,
				to_date(substr(emissao, 7,4) || ''-'' || substr(emissao, 4,2) || ''-'' || substr(emissao, 1,2),''yyyy-mm-dd'') as emissao_dat,
				t.nosso_numero as nosso_numero_str,
				''' || chave || '''::character varying as chave_str
							

			FROM ' || tabtemp || ' t
			LEFT JOIN ' || tabtemp || '_contrato c ON abs_cpf(t.cgc_cpf) = c.contrato_str
			LEFT JOIN cbparcela p ON c.id_cbcontrato_int = p.id_cbcontrato_int
				             AND p.nota_fiscal_str = t.nota_fiscal
				             AND p.data_vencimento_dat = to_date(substr(vencimento, 7,4) || ''-'' || substr(vencimento, 4,2) || ''-'' || substr(vencimento, 1,2),''yyyy-mm-dd'') 
			WHERE t.chave_str = ''' || chave || ''';';

		raise notice 'parcela';

		/*acerta numero de parcelas */

		FOR rsDados IN EXECUTE '
			SELECT DISTINCT id_cbcontrato_int 
			FROM ' || tabtemp || '_parcela
			WHERE parcela_int is null
			  AND id_cbcontrato_int is not null
	
		'
		LOOP
			raise notice '---- %', rsDados.id_cbcontrato_int;
			
			--cont :=0;
			cont := COALESCE((SELECT MAX(parcela_int) from cbparcela where id_cbcontrato_int = rsDados.id_cbcontrato_int ),0);

			FOR rsDados2 IN EXECUTE ' SELECT id_cbparcela_int 
						  FROM ' || tabtemp || '_parcela 
						  WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int || '
						    AND parcela_int is null
						  ORDER BY data_vencimento_dat
						    
						  '
			LOOP

				raise notice '***';
				cont := cont + 1;

				EXECUTE 'UPDATE ' || tabtemp || '_parcela 
					 SET parcela_int = ' || cont || '
					 WHERE id_cbparcela_int = ' || rsDados2 || ';
				';
				
			END LOOP;

		END LOOP;

		raise notice 'numero de parcelas';

		EXECUTE 'CREATE TABLE ' || tabtemp || '_qualidade AS
			SELECT
				''' || chave || '''::character varying as chave_str, 
				' || idgecliente || '::bigint as id_gecliente_int,
				id_cbtiponegocio_int,
				contrato_str,
				null::character varying as rg_str,
				null::character varying as org_exp_rg_str,
				null::date as dt_exp_rg_dat,
				null::character varying as uf_rg_str,
				cpf_str,
				nome_str,
				id_cbcontrato_int,
				
				endereco_str,
				bairro_str,
				cep_str,
				cidade_str,
				estado_str,

				telefone_str,
				email_str
				
			FROM ' || tabtemp || ' t
			INNER JOIN ' || tabtemp || '_contrato c ON abs_cpf(t.cgc_cpf) = c.contrato_str

		';

		raise notice 'qualidade';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	
							
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN

			/*batimento*/
			
			EXECUTE 'UPDATE ' || tabelafilha || '
				 SET batimento_str = null
				 WHERE batimento_str is not null';

			EXECUTE 'UPDATE cbparcela
				 SET batimento_str = null
				 WHERE batimento_str is not null';
				 

			EXECUTE '
				INSERT
				INTO	' || tabelafilha || ' (

					id_gecliente_int,
					id_geusuario_int,
					id_geempresa_int,
					id_cbcontrato_int,
					id_cbtiponegocio_int,
					id_cbetapa_int,
					id_fimoeda_int, 
					id_cbsituacaocontrato_int, 
					data_primeira_distrib_dat, 
					data_ultima_distrib_dat, 
					contrato_str,
					cpf_str,
					nome_str,
					rg_str,
					endereco_str,
					bairro_str,
					cidade_str, 
					estado_str, 
					cep_str,
					email_str,
					telefone_str,
					cod_cliente_str,
					nome_func_str,
					cod_func_str,
					cod_filial_str,
					descricao_filial_str,
					cod_faturamento_str,					
					id_gefilial_int,

					batimento_str
					
					
				)

				select 
					' || idgecliente || ',
					' || idgeusuario || ',
					' || idgeempresa || ',
					id_cbcontrato_int,
					id_cbtiponegocio_int,
					id_cbetapa_int,
					id_fimoeda_int, 
					id_cbsituacaocontrato_int, 
					data_ultima_distrib_dat, 
					data_ultima_distrib_dat, 
					contrato_str,
					cpf_str,
					nome_str,
					rg_str,
					endereco_str,
					bairro_str,
					cidade_str, 
					estado_str, 
					cep_str,
					email_str,
					telefone_str,
					cod_cliente_str,
					nome_func_str,
					cod_func_str,
					cod_filial_str,
					descricao_filial_str,
					cod_faturamento_str,	
					' || idgefilial || ',

					''X''			
				
				FROM	' || tabtemp || '_contrato c
				WHERE inclui_altera_contrato_str = ''I'' 
				  
			';

			raise notice 'contratos inseridos';

			EXECUTE 'UPDATE ' || tabelafilha || '
				    SET id_cbsituacaocontrato_int = t.id_cbsituacaocontrato_int,
					id_cbtiponegocio_int = t.id_cbtiponegocio_int,
					id_cbetapa_int = t.id_cbetapa_int,
					id_geusuario_int = ' || idgeusuario || ',
					tstamp = current_timestamp,
					data_ultima_distrib_dat = t.data_ultima_distrib_dat,
					endereco_str = t.endereco_str,
					bairro_str = t.bairro_str,
					cidade_str = t.cidade_str, 
					estado_str = t.estado_str, 
					cep_str = t.cep_str,
					email_str = t.email_str,
					telefone_str = t.telefone_str,
					cod_cliente_str = t.cod_cliente_str,
					nome_func_str = t.nome_func_str,
					cod_func_str = t.cod_func_str,
					cod_filial_str = t.cod_filial_str,
					descricao_filial_str = t.descricao_filial_str,
					cod_faturamento_str = t.cod_faturamento_str,	
					id_gefilial_int =  ' || idgefilial || '	,
					batimento_str = ''X''				
					
					
				FROM	' || tabtemp || '_contrato t
				WHERE	inclui_altera_contrato_str = ''A'' AND
					' || tabelafilha || '.id_cbcontrato_int = t.id_cbcontrato_int;
			';

			raise notice 'contratos alterados';

			EXECUTE '
				INSERT
				INTO	cbparcela (						
						id_cbparcela_int,
						id_cbcontrato_int, 
						parcela_int, 
						tipo_str, 
						data_vencimento_dat,
						valor_principal_num, 
						situacao_int, 
						data_primeira_distrib_dat, 
						data_ultima_distrib_dat, 
						id_esregua_int, 
						id_geusuario_int, 					
						tstamp,
						nota_fiscal_str,
						atribuicao_str,
						segmento_str,
						emissao_dat,
						nosso_numero_str,
						batimento_str
				)
				SELECT	
						
					       t.id_cbparcela_int,
					       t.id_cbcontrato_int,
					       parcela_int,
					       /*(COALESCE((SELECT MAX(p2.parcela_int) 
								  FROM cbparcela p2 
								  WHERE p2.id_cbcontrato_int = t.id_cbcontrato_int),0) + 1) as parcela_int,*/
					       t.tipo_str,
					       t.data_vencimento_dat,
					       t.valor_principal_num,
					       t.situacao_int,
					       t.data_ultima_distrib_dat,
					       t.data_ultima_distrib_dat,
					       t.id_esregua_int,
					       ' || idgeusuario || '::bigint as id_geusuario_int,
					       current_timestamp,
					       t.nota_fiscal_str,
					       t.atribuicao_str,
					       t.segmento_str,
					       t.emissao_dat,
					       t.nosso_numero_str,
					       ''X''
				FROM	' || tabtemp || '_parcela t
				WHERE	inclui_altera_parcela_str = ''I''
				; 
			';

			raise notice 'parcelas inseridas';

			EXECUTE '
				UPDATE	cbparcela
				SET	
					data_vencimento_dat = t.data_vencimento_dat,
					valor_principal_num = t.valor_principal_num, 
					situacao_int = t.situacao_int, 
					data_ultima_distrib_dat = t.data_ultima_distrib_dat,
					id_geusuario_int = ' || idgeusuario || ',					
					tstamp = current_timestamp,
					atribuicao_str = t.atribuicao_str,
					segmento_str = t.segmento_str,
					emissao_dat = t.emissao_dat,
					nosso_numero_str = t.nosso_numero_str,
					batimento_str = ''X''
				FROM	' || tabtemp || '_parcela t
				WHERE	t.inclui_altera_parcela_str = ''A'' AND
					cbparcela.id_cbcontrato_int = t.id_cbcontrato_int AND
					cbparcela.id_cbparcela_int = t.id_cbparcela_int;				
			';

			raise notice 'parcelas alteradas';
			
			EXECUTE '
				INSERT
				INTO	cbdistribparcela (
						id_cbparcela_int,
						id_cbcontrato_int,
						data_pre_distrib_dat)
				SELECT	DISTINCT ON (id_cbparcela_int)
					id_cbparcela_int,
					id_cbcontrato_int,
					data_ultima_distrib_dat
				FROM	' || tabtemp || '_parcela t ; 
			';

			raise notice 'cbdistribparcela';

			/*batimento*/
			
			FOR rsDados IN EXECUTE 'SELECT p.id_cbparcela_int,p.parcela_int, c.contrato_str
						FROM cbparcela p
						INNER JOIN ' || tabelafilha || ' c ON c.id_cbcontrato_int = p.id_cbcontrato_int
						WHERE p.batimento_str is null
						  AND p.situacao_int not in (4,6)'
			LOOP

				EXECUTE 'UPDATE cbparcela
					 SET situacao_int = 6
					 WHERE id_cbparcela_int = ' || rsDados.id_cbparcela_int;
				

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Parcela cancelada pelo batimento'',
							''' || rsDados.contrato_str || ''',
							' || rsDados.parcela_int || '::bigint,
							''Parcela nï¿½o citada no arquivo de hoje'')';

							raise notice 'baixando parcelas...';

			END LOOP;	

			FOR rsDados IN EXECUTE 'SELECT c.id_cbcontrato_int, c.contrato_str
						FROM  ' || tabelafilha || ' c
						WHERE batimento_str is null
						  AND id_cbsituacaocontrato_int <> 6 '
			LOOP

				EXECUTE 'UPDATE ' || tabelafilha || '
					 SET id_cbsituacaocontrato_int = 6
					 WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int;

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Contrato baixado pelo batimento'',
							''' || rsDados.contrato_str || ''',
							0::bigint,
							''Contrato nï¿½o citado no arquivo de hoje'')';

							raise notice 'baixando contratos...';

			END LOOP;

			FOR rsDados IN EXECUTE 'SELECT c.id_cbcontrato_int, c.contrato_str
						FROM  ' || tabelafilha || ' c
						WHERE id_cbsituacaocontrato_int <> 6 
						  AND (SELECT COUNT(*) FROM cbparcela p WHERE p.id_cbcontrato_int = c.id_cbcontrato_int and p.situacao_int not in (4,6) )= 0 '
			LOOP

				EXECUTE 'UPDATE ' || tabelafilha || '
					 SET id_cbsituacaocontrato_int = 6
					 WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int;

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Contrato baixado'',
							''' || rsDados.contrato_str || ''',
							0::bigint,
							''Contrato nï¿½o possuï¿½a parcelas em aberto, foi baixado'')';

							raise notice 'baixando contratos sem parcelas...';

			END LOOP;				

						
				    				    
	END IF;

	RETURN  'OK';
END;
$$;

--
-- TOC entry 1879 (class 1255 OID 26594)
-- Name: f_importa_score(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_importa_score(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
     rsTemp record;

BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
	    EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_tmp ';
	     EXECUTE 'CREATE TABLE ' || tabtemp || '_tmp AS '
	             'SELECT s.cpf, s.fonte_score, s.score  FROM ' || tabtemp || ' s';

	-- ***** INCONSISTENCIAS RECEBIDAS	
	ELSEIF processo = 1 THEN 

	-- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
		FOR rsTemp IN EXECUTE  'SELECT cpf, fonte_score, score  FROM ' || tabtemp || '_tmp '
		LOOP
			EXECUTE 'UPDATE ' || tabelafilha || ' c set fonte_score_str = ''' || rsTemp.fonte_score || ''' , score_str =  ''' || rsTemp.score || ''' 
				 FROM
				 geqlcontrato gc
				 JOIN geqlcliente cli ON gc.id_geqlcliente_int = cli.id_geqlcliente_int
				 WHERE
				 ABS_CPF(COALESCE(c.cpf_Str, cli.cpf_str)) = ''' || rsTemp.cpf || '''
				 and c.id_cbcontrato_int = gc.id_cbcontrato_int';		
		END LOOP;
	END IF;
	RETURN  '';
END;
$$;

--
-- TOC entry 1880 (class 1255 OID 26602)
-- Name: f_importacao_coringa_md2(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_importacao_coringa_md2(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	rsRegistro	RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN

		/* O campo 'tabela' da tabela temporï¿½ria sï¿½ pode receber os campos abaixo
			
			- Contrato | 50 Coringas
			- Parcela | 20 Coringas
			- Telefone | 10 Coringas
			- Endereco | 10 Coringas
			- E-mail | 10 Coringas
		*/

		--Delete da tabela de controle
		BEGIN
			EXECUTE 'DELETE FROM ' || tabtemp || '_controle WHERE chave_str = ''' || chave || '''';
		EXCEPTION
			WHEN OTHERS THEN
				RAISE NOTICE 'Tabela de controle nï¿½o existe';
				EXECUTE
					'CREATE TABLE
						' || tabtemp || '_controle
							(
								chave_str			VARCHAR(20)
							,	tabela_coringa_str	VARCHAR(50)
							,	coringa_int			INT
							,	id_tabela_str		VARCHAR(30)
							,	tabela_temp_str		VARCHAR(70)
							,	tabela_responsavel_str	VARCHAR(50)
							)';
		END;

		--CONTRATO

			--Traz os campos
			FOR rsRegistro
				IN EXECUTE
					'SELECT DISTINCT
							t.coringa
						FROM
							' || tabtemp || ' t
						WHERE
								UPPER(t.tabela) = ''CONTRATO''
							AND	t.coringa::INT BETWEEN 1 AND 50
						ORDER BY
							1'
			LOOP

				--Insere a tabela na tabela de controle
				EXECUTE
					'INSERT INTO
						' || tabtemp || '_controle
							(
								chave_str
							,	tabela_coringa_str
							,	coringa_int
							,	id_tabela_str
							,	tabela_temp_str
							,	tabela_responsavel_str
							)
						VALUES
							(
								''' || chave || '''
							,	''CoringaCbContratoMD2''
							,	' || rsRegistro.coringa || '
							,	''id_cbcontrato_int''
							,	''' || tabtemp || '_' || REPLACE(chave, '.', '') || '_contrato_' || rsRegistro.coringa || '''
							,	''' || tabelafilha || '''
							)';

				--Cria a temporï¿½ria de contrato
				EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_' || REPLACE(chave, '.', '') || '_contrato_' || rsRegistro.coringa;
				EXECUTE
					'CREATE TABLE
						' || tabtemp || '_' || REPLACE(chave, '.', '') || '_contrato_' || rsRegistro.coringa || ' AS
							SELECT
										c.id_cbcontrato_int AS id_tabela_str
									,	CASE
											WHEN cor.id_cbcontrato_int IS NULL THEN ''I''
											ELSE ''A''
										END AS Inclui_Altera
									,	t.marcacao
								FROM
									' || tabtemp || ' t
								JOIN
									cbtiponegocio tn ON (tn.codigo_str = t.chave1)
								JOIN
									' || tabelafilha || ' c ON (c.contrato_str = t.chave2 AND c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int)
								LEFT JOIN
									CoringaCbContratoMD2 cor ON (c.id_cbcontrato_int = cor.id_cbcontrato_int)
								WHERE
										UPPER(t.tabela) = ''CONTRATO''
									AND	t.coringa::INT = ' || rsRegistro.coringa || '
									AND	t.chave_str = ''' || chave || '''
									AND	tn.id_gecliente_int = ' || idgecliente;

			END LOOP;

		--PARCELA

			--Traz os campos
			FOR rsRegistro
				IN EXECUTE
					'SELECT DISTINCT
							t.coringa
						FROM
							' || tabtemp || ' t
						WHERE
								UPPER(t.tabela) = ''PARCELA''
							AND	t.coringa::INT BETWEEN 1 AND 20
						ORDER BY
							1'
			LOOP

				--Insere a tabela na tabela de controle
				EXECUTE
					'INSERT INTO
						' || tabtemp || '_controle
							(
								chave_str
							,	tabela_coringa_str
							,	coringa_int
							,	id_tabela_str
							,	tabela_temp_str
							,	tabela_responsavel_str
							)
						VALUES
							(
								''' || chave || '''
							,	''CoringaCbParcelaMD2''
							,	' || rsRegistro.coringa || '
							,	''id_cbparcela_int''
							,	''' || tabtemp || '_' || REPLACE(chave, '.', '') || '_parcela_' || rsRegistro.coringa || '''
							,	''cbparcela''
							)';

				--Cria a temporï¿½ria de parcela
				EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_' || REPLACE(chave, '.', '') || '_parcela_' || rsRegistro.coringa;
				EXECUTE
					'CREATE TABLE
						' || tabtemp || '_' || REPLACE(chave, '.', '') || '_parcela_' || rsRegistro.coringa || ' AS
							SELECT
										p.id_cbparcela_int AS id_tabela_str
									,	CASE
											WHEN cor.id_cbparcela_int IS NULL THEN ''I''
											ELSE ''A''
										END AS Inclui_Altera
									,	t.marcacao
								FROM
									' || tabtemp || ' t
								JOIN
									cbtiponegocio tn ON (tn.codigo_str = t.chave1)
								JOIN
									' || tabelafilha || ' c ON (c.contrato_str = t.chave2 AND c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int)
								JOIN
									cbparcela p ON (p.parcela_int = t.chave3::INT AND p.id_cbcontrato_int = c.id_cbcontrato_int)
								LEFT JOIN
									CoringaCbParcelaMD2 cor ON (p.id_cbparcela_int = cor.id_cbparcela_int)
								WHERE
										UPPER(t.tabela) = ''PARCELA''
									AND	t.coringa::INT = ' || rsRegistro.coringa || '
									AND	t.chave_str = ''' || chave || '''
									AND	tn.id_gecliente_int = ' || idgecliente;

			END LOOP;

		--TELEFONE

			--Traz os campos
			FOR rsRegistro
				IN EXECUTE
					'SELECT DISTINCT
							t.coringa
						FROM
							' || tabtemp || ' t
						WHERE
								UPPER(t.tabela) = ''TELEFONE''
							AND	t.coringa::INT BETWEEN 1 AND 10
						ORDER BY
							1'
			LOOP

				--Insere a tabela na tabela de controle
				EXECUTE
					'INSERT INTO
						' || tabtemp || '_controle
							(
								chave_str
							,	tabela_coringa_str
							,	coringa_int
							,	id_tabela_str
							,	tabela_temp_str
							,	tabela_responsavel_str
							)
						VALUES
							(
								''' || chave || '''
							,	''CoringaGeQlContatoMD2''
							,	' || rsRegistro.coringa || '
							,	''id_geqlcontato_int''
							,	''' || tabtemp || '_' || REPLACE(chave, '.', '') || '_telefone_' || rsRegistro.coringa || '''
							,	''geqlcontato''
							)';

				--Cria a temporï¿½ria de telefone
				EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_' || REPLACE(chave, '.', '') || '_telefone_' || rsRegistro.coringa;
				EXECUTE
					'CREATE TABLE
						' || tabtemp || '_' || REPLACE(chave, '.', '') || '_telefone_' || rsRegistro.coringa || ' AS
							SELECT
										tel.id_geqlcontato_int AS id_tabela_str
									,	CASE
											WHEN cor.id_geqlcontato_int IS NULL THEN ''I''
											ELSE ''A''
										END AS Inclui_Altera
									,	t.marcacao
								FROM
									' || tabtemp || ' t
								JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								JOIN
									geqlcontato tel ON (tel.contato_str = t.chave2 AND tel.id_geqlcliente_int = cli.id_geqlcliente_int)
								LEFT JOIN
									CoringaGeQlContatoMD2 cor ON (tel.id_geqlcontato_int = cor.id_geqlcontato_int)
								WHERE
										UPPER(t.tabela) = ''TELEFONE''
									AND	t.coringa::INT = ' || rsRegistro.coringa || '
									AND	t.chave_str = ''' || chave || '''';

			END LOOP;

		--ENDERECO

			--Traz os campos
			FOR rsRegistro
				IN EXECUTE
					'SELECT DISTINCT
							t.coringa
						FROM
							' || tabtemp || ' t
						WHERE
								UPPER(t.tabela) = ''ENDERECO''
							AND	t.coringa::INT BETWEEN 1 AND 10
						ORDER BY
							1'
			LOOP

				--Insere a tabela na tabela de controle
				EXECUTE
					'INSERT INTO
						' || tabtemp || '_controle
							(
								chave_str
							,	tabela_coringa_str
							,	coringa_int
							,	id_tabela_str
							,	tabela_temp_str
							,	tabela_responsavel_str
							)
						VALUES
							(
								''' || chave || '''
							,	''CoringaGeQlEnderecoMD2''
							,	' || rsRegistro.coringa || '
							,	''id_geqlendereco_int''
							,	''' || tabtemp || '_' || REPLACE(chave, '.', '') || '_endereco_' || rsRegistro.coringa || '''
							,	''geqlendereco''
							)';

				--Cria a temporï¿½ria de endereco
				EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_' || REPLACE(chave, '.', '') || '_endereco_' || rsRegistro.coringa;
				EXECUTE
					'CREATE TABLE
						' || tabtemp || '_' || REPLACE(chave, '.', '') || '_endereco_' || rsRegistro.coringa || ' AS
							SELECT
										ende.id_geqlendereco_int AS id_tabela_str
									,	CASE
											WHEN cor.id_geqlendereco_int IS NULL THEN ''I''
											ELSE ''A''
										END AS Inclui_Altera
									,	t.marcacao
								FROM
									' || tabtemp || ' t
								JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								JOIN
									geqlendereco ende ON (ende.endereco_str = t.chave2 AND ende.id_geqlcliente_int = cli.id_geqlcliente_int)
								LEFT JOIN
									CoringaGeQlEnderecoMD2 cor ON (ende.id_geqlendereco_int = cor.id_geqlendereco_int)
								WHERE
										UPPER(t.tabela) = ''ENDERECO''
									AND	t.coringa::INT = ' || rsRegistro.coringa || '
									AND	t.chave_str = ''' || chave || '''';

			END LOOP;

		--E-MAIL

			--Traz os campos
			FOR rsRegistro
				IN EXECUTE
					'SELECT DISTINCT
							t.coringa
						FROM
							' || tabtemp || ' t
						WHERE
								UPPER(t.tabela) = ''EMAIL''
							AND	t.coringa::INT BETWEEN 1 AND 10
						ORDER BY
							1'
			LOOP

				--Insere a tabela na tabela de controle
				EXECUTE
					'INSERT INTO
						' || tabtemp || '_controle
							(
								chave_str
							,	tabela_coringa_str
							,	coringa_int
							,	id_tabela_str
							,	tabela_temp_str
							,	tabela_responsavel_str
							)
						VALUES
							(
								''' || chave || '''
							,	''CoringaGeQlEmailMD2''
							,	' || rsRegistro.coringa || '
							,	''id_geqlemail_int''
							,	''' || tabtemp || '_' || REPLACE(chave, '.', '') || '_email_' || rsRegistro.coringa || '''
							,	''geqlemail''
							)';

				--Cria a temporï¿½ria de email
				EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_' || REPLACE(chave, '.', '')|| '_email_' || rsRegistro.coringa;
				EXECUTE
					'CREATE TABLE
						' || tabtemp || '_' || REPLACE(chave, '.', '') || '_email_' || rsRegistro.coringa || ' AS
							SELECT
										email.id_geqlemail_int AS id_tabela_str
									,	CASE
											WHEN cor.id_geqlemail_int IS NULL THEN ''I''
											ELSE ''A''
										END AS Inclui_Altera
									,	t.marcacao
								FROM
									' || tabtemp || ' t
								JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								JOIN
									geqlemail email ON (email.email_str = t.chave2 AND email.id_geqlcliente_int = cli.id_geqlcliente_int)
								LEFT JOIN
									CoringaGeQlEmailMD2 cor ON (email.id_geqlemail_int = cor.id_geqlemail_int)
								WHERE
										UPPER(t.tabela) = ''EMAIL''
									AND	t.coringa::INT = ' || rsRegistro.coringa || '
									AND	t.chave_str = ''' || chave || '''';

			END LOOP;

	-- ***** INCONSISTENCIAS RECEBIDAS
	ELSEIF processo = 1 THEN

		--Campos "Tabela" diferente do que deve ser
		EXECUTE
			'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''A tabela precisa ser um dos items CONTRATO | PARCELA | TELEFONE | ENDERECO | EMAIL''
				WHERE
						UPPER(tabela) NOT IN (''CONTRATO'', ''PARCELA'', ''TELEFONE'', ''ENDERECO'', ''EMAIL'')
					AND	chave_str = ''' || chave || '''';

		--Coringas diferentes
		EXECUTE
			'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''CONTRATO - 1 a 50 coringas | PARCELA - 1 a 20 coringas | TELEFONE - 1 a 10 coringas | ENDERECO - 1 a 10 coringas | EMAIL - 1 a 10 coringas''
				WHERE
						CASE
							WHEN UPPER(tabela) = ''CONTRATO'' THEN (coringa::INT < 1 OR coringa::INT > 50)
							WHEN UPPER(tabela) = ''PARCELA'' THEN (coringa::INT < 1 OR coringa::INT > 20)
							WHEN UPPER(tabela) = ''TELEFONE'' THEN (coringa::INT < 1 OR coringa::INT > 10)
							WHEN UPPER(tabela) = ''ENDERECO'' THEN (coringa::INT < 1 OR coringa::INT > 10)
							WHEN UPPER(tabela) = ''EMAIL'' THEN (coringa::INT < 1 OR coringa::INT > 10)
						END
					AND	chave_str = ''' || chave || '''
					AND	_inconsistencia IS NULL';

		--Nï¿½o localizado

			--Contrato
			EXECUTE
				'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''CONTRATO nï¿½o localizado na base''
				WHERE
						UPPER(tabela) = ''CONTRATO''
					AND	linha IN (SELECT
										t.linha
									FROM
										' || tabtemp || ' t
									LEFT JOIN
										cbtiponegocio tn ON (tn.codigo_str = t.chave1)
									LEFT JOIN
										' || tabelafilha || ' c ON (c.contrato_str = t.chave2 AND c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int)
									WHERE
											c.id_cbcontrato_int IS NULL
										AND	t.chave_str = ''' || chave || '''
										AND	t._inconsistencia IS NULL
										AND	tn.id_gecliente_int = ' || idgecliente || ')';

			--Parcela
			EXECUTE
				'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''PARCELA nï¿½o localizado na base''
				WHERE
						UPPER(tabela) = ''PARCELA''
					AND	linha IN (SELECT
									t.linha
								FROM
									' || tabtemp || ' t
								JOIN
									cbtiponegocio tn ON (tn.codigo_str = t.chave1)
								JOIN
									' || tabelafilha || ' c ON (c.contrato_str = t.chave2 AND c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int)
								LEFT JOIN
									cbparcela p ON (p.parcela_int = t.chave3::INT AND p.id_cbcontrato_int = c.id_cbcontrato_int)
								WHERE
										p.id_cbparcela_int IS NULL
									AND	t.chave_str = ''' || chave || '''
									AND	tn.id_gecliente_int = ' || idgecliente || ')';

			--CPF
			EXECUTE
				'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''CPF nï¿½o localizado na base''
				WHERE
						UPPER(tabela) IN (''TELEFONE'', ''ENDERECO'', ''EMAIL'')
					AND	linha IN (SELECT
									t.linha
								FROM
									' || tabtemp || ' t
								LEFT JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								WHERE
										cli.id_geqlcliente_int IS NULL
									AND	t.chave_str = ''' || chave || ''')';
			
			--Telefone
			EXECUTE
				'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''TELEFONE nï¿½o localizado na base''
				WHERE
						UPPER(tabela) = ''TELEFONE''
					AND	linha IN (SELECT
									t.linha
								FROM
									' || tabtemp || ' t
								JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								LEFT JOIN
									geqlcontato tel ON (tel.contato_str = t.chave2 AND tel.id_geqlcliente_int = cli.id_geqlcliente_int)
								WHERE
										tel.id_geqlcontato_int IS NULL
									AND	t.chave_str = ''' || chave || ''')';

			--Endereco
			EXECUTE
				'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''ENDERECO nï¿½o localizado na base''
				WHERE
						UPPER(tabela) = ''ENDERECO''
					AND	linha IN (SELECT
									t.linha
								FROM
									' || tabtemp || ' t
								JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								LEFT JOIN
									geqlendereco ende ON (ende.endereco_str = t.chave2 AND ende.id_geqlcliente_int = cli.id_geqlcliente_int)
								WHERE
										ende.id_geqlendereco_int IS NULL
									AND	t.chave_str = ''' || chave || ''')';

			--Email
			EXECUTE
				'UPDATE
					' || tabtemp || '
				SET
					_inconsistencia = COALESCE(chave1, '''') || '';'' || COALESCE(chave2, '''') || '';'' || COALESCE(chave3, '''') || '';'' || COALESCE(tabela, '''') || '';'' || COALESCE(coringa, '''') || '';'' || ''EMAIL nï¿½o localizado na base''
				WHERE
						UPPER(tabela) = ''EMAIL''
					AND	linha IN (SELECT
									t.linha
								FROM
									' || tabtemp || ' t
								JOIN
									geqlcliente cli ON (ABS_CPF(cli.cpf_str) = ABS_CPF(t.chave1))
								LEFT JOIN
									geqlemail email ON (email.email_str = t.chave2 AND email.id_geqlcliente_int = cli.id_geqlcliente_int)
								WHERE
										email.id_geqlemail_int IS NULL
									AND	t.chave_str = ''' || chave || ''')';

        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN

		--Limpeza dos coringas
		FOR rsRegistro
			IN EXECUTE 'SELECT * FROM ' || tabtemp || '_controle WHERE chave_str = ''' || chave || ''''
		LOOP
			EXECUTE
				'UPDATE
						' || rsRegistro.tabela_coringa_str || '
					SET
						Coringa' || rsRegistro.coringa_int || '_txt = null';
		END LOOP;

	ELSEIF processo = 3 THEN

		--Inclusï¿½o
		FOR rsRegistro
			IN EXECUTE 'SELECT * FROM ' || tabtemp || '_controle WHERE chave_str = ''' || chave || ''''
		LOOP
			EXECUTE
				'INSERT INTO
					' || rsRegistro.tabela_coringa_str || '
						(
							' || rsRegistro.id_tabela_str || '
						,	Coringa' || rsRegistro.coringa_int || '_txt
						,	id_geusuario_int
						,	tstamp
						)
					SELECT
								id_tabela_str
							,	marcacao
							,	' || idgeusuario || '
							,	CLOCK_TIMESTAMP()
						FROM
							' || rsRegistro.tabela_temp_str || '
						WHERE
							Inclui_Altera = ''I''';
		END LOOP;

	ELSEIF processo = 4 THEN

		--Alteraï¿½ï¿½o
		FOR rsRegistro
			IN EXECUTE 'SELECT * FROM ' || tabtemp || '_controle WHERE chave_str = ''' || chave || ''''
		LOOP
 			EXECUTE
				'UPDATE
						' || rsRegistro.tabela_coringa_str || '
					SET
							Coringa' || rsRegistro.coringa_int || '_txt = t.marcacao
						,	id_geusuario_int = ' || idgeusuario || '
						,	tstamp = CLOCK_TIMESTAMP()
					FROM
						' || rsRegistro.tabela_temp_str || ' t
					WHERE
							t.id_tabela_str = ' || rsRegistro.tabela_coringa_str || '.' || rsRegistro.id_tabela_str || '
						AND	Inclui_Altera = ''A''';
		END LOOP;

	ELSEIF processo = 5 THEN

		--Atualizar tstamp da MDM
		FOR rsRegistro
			IN EXECUTE 'SELECT * FROM ' || tabtemp || '_controle WHERE chave_str = ''' || chave || ''''
		LOOP
			EXECUTE
				'UPDATE
						' || rsRegistro.tabela_responsavel_str || '
					SET
						tstamp_mdm_alteracao = CLOCK_TIMESTAMP()
					FROM
						' || rsRegistro.tabela_temp_str || ' t
					WHERE
						' || rsRegistro.tabela_responsavel_str || '.' || rsRegistro.id_tabela_str || ' = t.id_tabela_str';
		END LOOP;

	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1881 (class 1255 OID 26608)
-- Name: f_inconsistecniafilaaltitude(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_inconsistecniafilaaltitude(scodprocess character varying, chave character varying, saux character varying, vtiponegocio character varying, vsituacaocontrato character varying, vetapa character varying, vsituacaoparcela character varying, sexcecao character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	contcontrato	bigint;
	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	sDescInco	text;
	sInco		text;
	idusuario	bigint;

BEGIN

	idusuario := (select id_geusuario_int from escontrolefilaaltitude where codfila_str = sCodprocess limit 1);

	FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaaltitude 
					WHERE codfila_str = ''' || sCodprocess || ''' 
					AND (COALESCE(TRIM(telefone1),'''') = ''''  AND 
					     COALESCE(TRIM(telefone2),'''') = ''''  AND 
					     COALESCE(TRIM(telefone3),'''') = ''''  AND 
					     COALESCE(TRIM(telefone4),'''') = ''''  AND 
					     COALESCE(TRIM(telefone5),'''') = ''''  AND 
					     COALESCE(TRIM(telefone6),'''') = ''''  AND 
					     COALESCE(TRIM(telefone7),'''') = ''''  AND 
					     COALESCE(TRIM(telefone8),'''') = ''''  AND 
					     COALESCE(TRIM(telefone9),'''') = ''''  AND 
					     COALESCE(TRIM(telefone10),'''') = '''' AND 
					     COALESCE(TRIM(telefone11),'''') = '''' AND 
					     COALESCE(TRIM(telefone12),'''') = '''' AND 
					     COALESCE(TRIM(telefone13),'''') = '''' AND 
					     COALESCE(TRIM(telefone14),'''') = '''' AND 
					     COALESCE(TRIM(telefone15),'''') = '''')

					'
	 LOOP
		contcontrato := contcontrato + 1;

		cont := 0;
		sDescInco :='';
		sInco = '';
		
		FOR rsTelefone IN EXECUTE '
		
			SELECT contato_str, classificacao_str, c.id_geqltipocontato_int, coalesce(c.score,0)score, tipo.codigo_str, 
				CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
				     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
				     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
				     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
                                ELSE ''O'' END As origem, coalesce(c.tstamp_inclusao,''1900-01-01''::date) as data_tratamento
			FROM geqlcontrato qc
			INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
			INNER JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
			' || CASE WHEN sExcecao = 'F' THEN 'INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str ' ELSE '' END || '
			WHERE qc.id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || '
			AND coalesce(c.excluido_bit,0::bit) = 0::bit
			ORDER BY coalesce(c.score,0) desc , tipo.prioridade_int, CASE WHEN SUBSTR(c.classificacao_str,1,1) = ''9'' THEN ''3'' WHEN SUBSTR(c.classificacao_str,1,1) = ''3'' THEN ''4'' ELSE SUBSTR(c.classificacao_str,1,1) END, c.id_geqltipocontato_int'

		LOOP
			
			cont := cont + 1;

			sDescInco := sDescInco || rsTelefone.contato_str || ';' || rsTelefone.classificacao_str || ';' || rsTelefone.score || ';' || rsTelefone.codigo_str || ';'  || rsTelefone.origem || ';' || rsTelefone.data_tratamento || ';';

		
		END LOOP;

		raise notice 'cont %', cont;

		--IF cont > 0 THEN
			IF sExcecao = 'F' THEN
				IF sDescInco = '' THEN
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO EXISTE';
				ELSE
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO ESTA DE ACORDO COM OS FILTROS';
				END IF;
			ELSE
				IF sDescInco = '' THEN
					sInco = 'CONTRATO NAO POSSUI FONE';
				ELSE
					sInco = 'CONTRATO NAO POSSUI FONES DE ACORDO COM OS FILTROS';
				END IF;
			END IF;

			 EXECUTE 'UPDATE escontrolefilaaltitude
					 SET inconsistencia_txt = ''' || sInco || ''',
					     desc_inconsistencia_txt = ''' || sDescInco || '''
					 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
					 codfila_str = ''' || sCodprocess || '''';

		--END IF;
		

	 END LOOP;

	 IF sExcecao in ('S', 'C', 'F') THEN

		 FOR rsRegistro IN EXECUTE ' SELECT DISTINCT ON (tmpcon.contrato_str)  
						    tmpcon.contrato_str, 
						    CASE WHEN s.descricao_str is null THEN ''NAO LOCALIZADO'' ELSE s.descricao_str END as situacao,
						    CASE WHEN s.descricao_str is null THEN ''CONTRATO NAO LOCALIZADO'' ELSE ''CONTRATO OU PARCELAS NAO OBEDECE AO FILTRO'' END as inco,
						    CASE WHEN s.descricao_str is null THEN '''' ELSE ''SITUACAO: '' || s.codigo_str ||
						                                                     '' - TIPONEG: '' || tn.codigo_str ||
						                                                     '' - ETAPA:  '' || COALESCE(e.codigo_str,'''') || 
						                                                     ''; FILTROS UTILIZADOS: Situacao contrato: ' || vsituacaocontrato || 
						                                                     ' - Tipo de negocio: ' || vtiponegocio || 
						                                                     ' - Etapa: ' || vetapa || 
						                                                     ' - Situacao parcela: ' || vsituacaoparcela || ';''
						    END  as desc_inco
					     FROM gefilacobrancaimporta tmpcon 
					     LEFT JOIN CBCONTRATO c ON c.id_cbcontrato_int = tmpcon.id_cbcontrato_int
					     LEFT JOIN cbsituacaocontrato s ON c.id_cbsituacaocontrato_int = s.id_cbsituacaocontrato_int
					     LEFT JOIN cbtiponegocio tn ON c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int
					     LEFT JOIN cbetapa e ON c.id_cbetapa_int = e.id_cbetapa_int
					     WHERE chave_str = ''' || chave || ''' 
					     AND (SELECT COUNT(*) 
						  FROM escontrolefilaaltitude fila 
						  WHERE fila.codfila_str = ''' || sCodprocess || ''' AND fila.id_cbcontrato_int = tmpcon.id_cbcontrato_int) = 0'
		 LOOP

			INSERT INTO escontrolefilaaltitude (datahora_geracaofila_tim, contrato,desc_cbsit_geracaofila_str, codfila_str, inconsistencia_txt, desc_inconsistencia_txt, id_geusuario_int) VALUES (current_timestamp, rsRegistro.contrato_str, rsRegistro.situacao, sCodprocess, rsRegistro.inco, rsRegistro.desc_inco, idusuario);

		 END LOOP;

	 END IF;

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1882 (class 1255 OID 26620)
-- Name: f_inconsistecniafilaaltitudev8(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_inconsistecniafilaaltitudev8(scodprocess character varying, chave character varying, saux character varying, vtiponegocio character varying, vsituacaocontrato character varying, vetapa character varying, vsituacaoparcela character varying, sexcecao character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	contcontrato	bigint;
	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	sDescInco	text;
	sInco		text;
	idusuario	bigint;

BEGIN

	idusuario := (select id_geusuario_int from escontrolefilaaltitudev8 where codfila_str = sCodprocess limit 1);

	FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaaltitudev8 
					WHERE codfila_str = ''' || sCodprocess || ''' 
					AND (COALESCE(TRIM(telefone01),'''') = ''''  AND 
					     COALESCE(TRIM(telefone02),'''') = ''''  AND 
					     COALESCE(TRIM(telefone03),'''') = ''''  AND 
					     COALESCE(TRIM(telefone04),'''') = ''''  AND 
					     COALESCE(TRIM(telefone05),'''') = ''''  AND 
					     COALESCE(TRIM(telefone06),'''') = ''''  AND 
					     COALESCE(TRIM(telefone07),'''') = ''''  AND 
					     COALESCE(TRIM(telefone08),'''') = ''''  AND 
					     COALESCE(TRIM(telefone09),'''') = ''''  AND 
					     COALESCE(TRIM(telefone10),'''') = '''' AND 
					     COALESCE(TRIM(telefone11),'''') = '''' AND 
					     COALESCE(TRIM(telefone12),'''') = '''' AND 
					     COALESCE(TRIM(telefone13),'''') = '''' AND 
					     COALESCE(TRIM(telefone14),'''') = '''' AND 
					     COALESCE(TRIM(telefone15),'''') = '''')

					'
	 LOOP
		contcontrato := contcontrato + 1;

		cont := 0;
		sDescInco :='';
		sInco = '';
		
		FOR rsTelefone IN EXECUTE '
		
			SELECT contato_str, classificacao_str, c.id_geqltipocontato_int, coalesce(c.score,0)score, tipo.codigo_str, 
				CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
				     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
				     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
				     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
                                ELSE ''O'' END As origem, coalesce(c.tstamp_inclusao,''1900-01-01''::date) as data_tratamento
			FROM geqlcontrato qc
			INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
			INNER JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
                        ' || CASE WHEN sExcecao = 'F' THEN 'INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str ' ELSE '' END || '			
			WHERE qc.id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || '
			AND coalesce(c.excluido_bit,0::bit) = 0::bit
			ORDER BY coalesce(c.score,0) desc , tipo.prioridade_int, CASE WHEN SUBSTR(c.classificacao_str,1,1) = ''9'' THEN ''3'' WHEN SUBSTR(c.classificacao_str,1,1) = ''3'' THEN ''4'' ELSE SUBSTR(c.classificacao_str,1,1) END, c.id_geqltipocontato_int'

		LOOP
			
			cont := cont + 1;

			sDescInco := sDescInco || rsTelefone.contato_str || ';' || rsTelefone.classificacao_str || ';' || rsTelefone.score || ';' || rsTelefone.codigo_str || ';'  || rsTelefone.origem || ';' || rsTelefone.data_tratamento || ';';

		
		END LOOP;

		--raise notice 'cont %', cont;

		--IF cont > 0 THEN
			IF sExcecao = 'F' THEN
				IF sDescInco = '' THEN
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO EXISTE';
				ELSE
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO ESTA DE ACORDO COM OS FILTROS';
				END IF;
			ELSE
				IF sDescInco = '' THEN
					sInco = 'CONTRATO NAO POSSUI FONE';
				ELSE
					sInco = 'CONTRATO NAO POSSUI FONES DE ACORDO COM OS FILTROS';
				END IF;
			END IF;

			 EXECUTE 'UPDATE escontrolefilaaltitudev8
					 SET inconsistencia_txt = ''' || sInco || ''',
					     desc_inconsistencia_txt = ''' || sDescInco || '''
					 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
					 codfila_str = ''' || sCodprocess || '''';

		--END IF;
		

	 END LOOP;
	 
	--retira contratos com CPF duplicados.
	 EXECUTE 'UPDATE escontrolefilaaltitudev8
		  SET inconsistencia_txt = ''CPF DUPLICADO NA BASE'',
		      desc_inconsistencia_txt = ''MAIS DE UM CONTRATO COM O CPF '' || escontrolefilaaltitudev8.chavecontato		 
		  FROM (SELECT MAX(tmp.id_cbcontrato_int) as id_cbcontrato_int, tmp.chavecontato
		       FROM escontrolefilaaltitudev8 tmp
		       WHERE codfila_str = ''' || sCodprocess || '''
		       GROUP BY chavecontato HAVING COUNT(*) > 1 )t
		 WHERE escontrolefilaaltitudev8.codfila_str = ''' || sCodprocess || '''
		   AND escontrolefilaaltitudev8.chavecontato = t.chavecontato
		   AND escontrolefilaaltitudev8.id_cbcontrato_int <> t.id_cbcontrato_int
	';

	 IF sExcecao in ('S', 'C', 'F') THEN

		 FOR rsRegistro IN EXECUTE ' SELECT DISTINCT ON (tmpcon.contrato_str)  
						    tmpcon.contrato_str, 
						    CASE WHEN s.descricao_str is null THEN ''NAO LOCALIZADO'' ELSE s.descricao_str END as situacao,
						    CASE WHEN s.descricao_str is null THEN ''CONTRATO NAO LOCALIZADO'' ELSE ''CONTRATO OU PARCELAS NAO OBEDECE AO FILTRO'' END as inco,
						    CASE WHEN s.descricao_str is null THEN '''' ELSE ''SITUACAO: '' || s.codigo_str ||
						                                                     '' - TIPONEG: '' || tn.codigo_str ||
						                                                     '' - ETAPA:  '' || COALESCE(e.codigo_str,'''') || 
						                                                     ''; FILTROS UTILIZADOS: Situacao contrato: ' || vsituacaocontrato || 
						                                                     ' - Tipo de negocio: ' || vtiponegocio || 
						                                                     ' - Etapa: ' || vetapa || 
						                                                     ' - Situacao parcela: ' || vsituacaoparcela || ';''
						    END  as desc_inco
					     FROM gefilacobrancaimporta tmpcon 
					     LEFT JOIN CBCONTRATO c ON c.id_cbcontrato_int = tmpcon.id_cbcontrato_int
					     LEFT JOIN cbsituacaocontrato s ON c.id_cbsituacaocontrato_int = s.id_cbsituacaocontrato_int
					     LEFT JOIN cbtiponegocio tn ON c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int
					     LEFT JOIN cbetapa e ON c.id_cbetapa_int = e.id_cbetapa_int
					     WHERE chave_str = ''' || chave || ''' 
					     AND (SELECT COUNT(*) 
						  FROM escontrolefilaaltitudev8 fila 
						  WHERE fila.codfila_str = ''' || sCodprocess || ''' AND fila.id_cbcontrato_int = tmpcon.id_cbcontrato_int) = 0'
		 LOOP

			INSERT INTO escontrolefilaaltitudev8 (datahora_geracaofila_tim, contrato,desc_cbsit_geracaofila_str, codfila_str, inconsistencia_txt, desc_inconsistencia_txt, id_geusuario_int) VALUES (current_timestamp, rsRegistro.contrato_str, rsRegistro.situacao, sCodprocess, rsRegistro.inco, rsRegistro.desc_inco, idusuario);

		 END LOOP;

	 END IF;

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1883 (class 1255 OID 26626)
-- Name: f_inconsistecniafilaaspect(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_inconsistecniafilaaspect(scodprocess character varying, chave character varying, saux character varying, vtiponegocio character varying, vsituacaocontrato character varying, vetapa character varying, vsituacaoparcela character varying, sexcecao character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$

DECLARE

	contcontrato	bigint;
	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	sDescInco	text;
	sInco		text;
	idusuario	bigint;

BEGIN

	idusuario := (select id_geusuario_int from escontrolefilaaspect where codfila_str = sCodprocess limit 1);

	FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaaspect 
					WHERE codfila_str = ''' || sCodprocess || ''' 
					AND (COALESCE(TRIM(telefone1),'''') = ''''  AND 
					     COALESCE(TRIM(telefone2),'''') = ''''  AND 
					     COALESCE(TRIM(telefone3),'''') = ''''  AND 
					     COALESCE(TRIM(telefone4),'''') = ''''  AND 
					     COALESCE(TRIM(telefone5),'''') = ''''  AND 
					     COALESCE(TRIM(telefone6),'''') = ''''  AND 
					     COALESCE(TRIM(telefone7),'''') = ''''  AND 
					     COALESCE(TRIM(telefone8),'''') = ''''  AND 
					     COALESCE(TRIM(telefone9),'''') = ''''  AND 
					     COALESCE(TRIM(telefone10),'''') = '''' )

					'
	 LOOP
		contcontrato := contcontrato + 1;

		cont := 0;
		sDescInco :='';
		sInco = '';
		
		FOR rsTelefone IN EXECUTE '
		
			SELECT contato_str, classificacao_str, c.id_geqltipocontato_int, coalesce(c.score,0)score, tipo.codigo_str, 
				CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
				     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
				     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
				     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
                                ELSE ''O'' END As origem, coalesce(c.tstamp_inclusao,''1900-01-01''::date) as data_tratamento
			FROM geqlcontrato qc
			INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
			INNER JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
			' || CASE WHEN sExcecao = 'F' THEN 'INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str ' ELSE '' END || '
			WHERE qc.id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || '
			AND coalesce(c.excluido_bit,0::bit) = 0::bit
			AND coalesce(c.bloqueado_bit,0::bit) = 0::bit
			ORDER BY coalesce(c.score,0) desc , 
			         tipo.prioridade_int, 
			         CASE WHEN SUBSTR(c.classificacao_str,1,1) = ''9'' THEN ''3'' WHEN SUBSTR(c.classificacao_str,1,1) = ''3'' THEN ''4'' ELSE SUBSTR(c.classificacao_str,1,1) END, 
			         c.id_geqltipocontato_int'

		LOOP
			
			cont := cont + 1;

			sDescInco := sDescInco || rsTelefone.contato_str || ';' || rsTelefone.classificacao_str || ';' || rsTelefone.score || ';' || rsTelefone.codigo_str || ';'  || rsTelefone.origem || ';' || rsTelefone.data_tratamento || ';';

		
		END LOOP;

		raise notice 'cont %', cont;

		--IF cont > 0 THEN
			IF sExcecao = 'F' THEN
				IF sDescInco = '' THEN
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO EXISTE';
				ELSE
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO ESTA DE ACORDO COM OS FILTROS';
				END IF;
			ELSE
				IF sDescInco = '' THEN
					sInco = 'CONTRATO NAO POSSUI FONE';
				ELSE
					sInco = 'CONTRATO NAO POSSUI FONES DE ACORDO COM OS FILTROS';
				END IF;
			END IF;

			 EXECUTE 'UPDATE escontrolefilaaspect
					 SET inconsistencia_txt = ''' || sInco || ''',
					     desc_inconsistencia_txt = ''' || sDescInco || '''
					 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
					 codfila_str = ''' || sCodprocess || '''';

		--END IF;
		

	 END LOOP;

	 IF sExcecao in ('S', 'C', 'F') THEN

		 FOR rsRegistro IN EXECUTE ' SELECT DISTINCT ON (tmpcon.contrato_str)  
						    tmpcon.contrato_str,
						    CASE WHEN s.descricao_str is null THEN ''NAO LOCALIZADO'' ELSE s.descricao_str END as situacao,
						    CASE WHEN s.descricao_str is null THEN ''CONTRATO NAO LOCALIZADO'' ELSE ''CONTRATO OU PARCELAS NAO OBEDECE AO FILTRO'' END as inco,
						    CASE WHEN s.descricao_str is null THEN '''' ELSE ''SITUACAO: '' || s.codigo_str ||
						                                                     '' - TIPONEG: '' || tn.codigo_str ||
						                                                     '' - ETAPA:  '' || COALESCE(e.codigo_str,'''') || 
						                                                     ''; FILTROS UTILIZADOS: Situacao contrato: ' || vsituacaocontrato || 
						                                                     ' - Tipo de negocio: ' || vtiponegocio || 
						                                                     ' - Etapa: ' || vetapa || 
						                                                     ' - Situacao parcela: ' || vsituacaoparcela || ';''
						    END  as desc_inco
					     FROM gefilacobrancaimporta tmpcon 
					     LEFT JOIN cbcontrato c ON c.id_cbcontrato_int = tmpcon.id_cbcontrato_int
					     LEFT JOIN cbsituacaocontrato s ON c.id_cbsituacaocontrato_int = s.id_cbsituacaocontrato_int
					     LEFT JOIN cbtiponegocio tn ON c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int
					     LEFT JOIN cbetapa e ON c.id_cbetapa_int = e.id_cbetapa_int
					     WHERE chave_str = ''' || chave || ''' 
					       AND NOT EXISTS (SELECT 1 
						 		  FROM escontrolefilaaspect fila 
								  WHERE fila.codfila_str = ''' || sCodprocess || ''' 
								    AND fila.id_cbcontrato_int = tmpcon.id_cbcontrato_int
								)'
		 LOOP

			INSERT INTO escontrolefilaaspect (datahora_geracaofila_tim, contrato,desc_cbsit_geracaofila_str, codfila_str, inconsistencia_txt, desc_inconsistencia_txt, id_geusuario_int) VALUES (current_timestamp, rsRegistro.contrato_str, rsRegistro.situacao, sCodprocess, rsRegistro.inco, rsRegistro.desc_inco, idusuario);

		 END LOOP;

	 END IF;

	 cont := 1;

	/*procura se alguem dos casos incluidos agora jÃ¡ haviam sido enviados para a blacklist antes e atualiza os campos de controle para nao enviar novamente*/
	FOR rsRegistro IN EXECUTE 'SELECT id_cbcontrato_int, datahora_entradabl_tim, id_cbsit_entradabl_int
	                   FROM escontrolefilaaspect 
	                   WHERE codfila_str <> ''' || sCodprocess || ''' 
			     AND datahora_entradabl_tim is not null 
			     AND datahora_saidabl_tim is null
			     AND id_cbcontrato_int in (SELECT id_cbcontrato_int 
			                               FROM escontrolefilaaspect
			                               WHERE codfila_str = ''' || sCodprocess || ''' 
			                               AND inconsistencia_txt is null)'
	LOOP

		EXECUTE ' UPDATE escontrolefilaaspect 
		          SET datahora_entradabl_tim = ''' || rsRegistro.datahora_entradabl_tim || ''',
		              id_cbsit_entradabl_int = ''' || rsRegistro.id_cbsit_entradabl_int || '''
		          WHERE id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || '
		            AND codfila_str = ''' || sCodprocess || ''' 
		        ';

		 --raise notice 'BL %', cont;
		
	END LOOP;

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1884 (class 1255 OID 26638)
-- Name: f_inconsistecniafilaolos(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_inconsistecniafilaolos(scodprocess character varying, chave character varying, saux character varying, vtiponegocio character varying, vsituacaocontrato character varying, vetapa character varying, vsituacaoparcela character varying, sexcecao character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	contcontrato	bigint;
	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	sDescInco	text;
	sInco		text;
	idusuario	bigint;

BEGIN

	idusuario := (select id_geusuario_int from escontrolefilaolos where codfila_str = sCodprocess limit 1);

	FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaolos 
					WHERE codfila_str = ''' || sCodprocess || ''' 
					AND (COALESCE(TRIM(telefone01),'''') = ''''  AND 
					     COALESCE(TRIM(telefone02),'''') = ''''  AND 
					     COALESCE(TRIM(telefone03),'''') = ''''  AND 
					     COALESCE(TRIM(telefone04),'''') = ''''  AND 
					     COALESCE(TRIM(telefone05),'''') = ''''  AND 
					     COALESCE(TRIM(telefone06),'''') = ''''  AND 
					     COALESCE(TRIM(telefone07),'''') = ''''  AND 
					     COALESCE(TRIM(telefone08),'''') = ''''  AND 
					     COALESCE(TRIM(telefone09),'''') = ''''  AND 
					     COALESCE(TRIM(telefone10),'''') = '''' AND 
					     COALESCE(TRIM(telefone11),'''') = '''' AND 
					     COALESCE(TRIM(telefone12),'''') = '''' AND 
					     COALESCE(TRIM(telefone13),'''') = '''' AND 
					     COALESCE(TRIM(telefone14),'''') = '''' AND 
					     COALESCE(TRIM(telefone15),'''') = '''')

					'
	 LOOP
		contcontrato := contcontrato + 1;

		cont := 0;
		sDescInco :='';
		sInco = '';
		
		FOR rsTelefone IN EXECUTE '
		
			SELECT contato_str, classificacao_str, c.id_geqltipocontato_int, coalesce(c.score,0)score, tipo.codigo_str, 
				CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
				     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
				     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
				     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
                                ELSE ''O'' END As origem, coalesce(c.tstamp_inclusao,''1900-01-01''::date) as data_tratamento
			FROM geqlcontrato qc
			INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
			INNER JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
                        ' || CASE WHEN sExcecao = 'F' THEN 'INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str ' ELSE '' END || '			
			WHERE qc.id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || '
			AND coalesce(c.excluido_bit,0::bit) = 0::bit
			ORDER BY coalesce(c.score,0) desc , tipo.prioridade_int, CASE WHEN SUBSTR(c.classificacao_str,1,1) = ''9'' THEN ''3'' WHEN SUBSTR(c.classificacao_str,1,1) = ''3'' THEN ''4'' ELSE SUBSTR(c.classificacao_str,1,1) END, c.id_geqltipocontato_int'

		LOOP
			
			cont := cont + 1;

			sDescInco := sDescInco || rsTelefone.contato_str || ';' || rsTelefone.classificacao_str || ';' || rsTelefone.score || ';' || rsTelefone.codigo_str || ';'  || rsTelefone.origem || ';' || rsTelefone.data_tratamento || ';';

		
		END LOOP;

		--raise notice 'cont %', cont;

		--IF cont > 0 THEN
			IF sExcecao = 'F' THEN
				IF sDescInco = '' THEN
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO EXISTE';
				ELSE
					sInco = 'TELEFONE NA PLANILHA PARA O CONTRATO NAO ESTA DE ACORDO COM OS FILTROS';
				END IF;
			ELSE
				IF sDescInco = '' THEN
					sInco = 'CONTRATO NAO POSSUI FONE';
				ELSE
					sInco = 'CONTRATO NAO POSSUI FONES DE ACORDO COM OS FILTROS';
				END IF;
			END IF;

			 EXECUTE 'UPDATE escontrolefilaolos
					 SET inconsistencia_txt = ''' || sInco || ''',
					     desc_inconsistencia_txt = ''' || sDescInco || '''
					 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
					 codfila_str = ''' || sCodprocess || '''';

		--END IF;
		

	 END LOOP;
	 
	--retira contratos com CPF duplicados.
	 EXECUTE 'UPDATE escontrolefilaolos
		  SET inconsistencia_txt = ''CPF DUPLICADO NA BASE'',
		      desc_inconsistencia_txt = ''MAIS DE UM CONTRATO COM O CPF '' || escontrolefilaolos.chavecontato		 
		  FROM (SELECT MAX(tmp.id_cbcontrato_int) as id_cbcontrato_int, tmp.chavecontato
		       FROM escontrolefilaolos tmp
		       WHERE codfila_str = ''' || sCodprocess || '''
		       GROUP BY chavecontato HAVING COUNT(*) > 1 )t
		 WHERE escontrolefilaolos.codfila_str = ''' || sCodprocess || '''
		   AND escontrolefilaolos.chavecontato = t.chavecontato
		   AND escontrolefilaolos.id_cbcontrato_int <> t.id_cbcontrato_int
	';

	 IF sExcecao = 'S' THEN

		 FOR rsRegistro IN EXECUTE ' SELECT tmpcon.contrato_str, 
						    CASE WHEN s.descricao_str is null THEN ''NAO LOCALIZADO'' ELSE s.descricao_str END as situacao,
						    CASE WHEN s.descricao_str is null THEN ''CONTRATO NAO LOCALIZADO'' ELSE ''CONTRATO OU PARCELAS NAO OBEDECE AO FILTRO'' END as inco,
						    CASE WHEN s.descricao_str is null THEN '''' ELSE ''SITUACAO: '' || s.codigo_str ||
						                                                     '' - TIPONEG: '' || tn.codigo_str ||
						                                                     '' - ETAPA:  '' || COALESCE(e.codigo_str,'''') || 
						                                                     ''; FILTROS UTILIZADOS: Situacao contrato: ' || vsituacaocontrato || 
						                                                     ' - Tipo de negocio: ' || vtiponegocio || 
						                                                     ' - Etapa: ' || vetapa || 
						                                                     ' - Situacao parcela: ' || vsituacaoparcela || ';''
						    END  as desc_inco
					     FROM gefilacobrancaimporta tmpcon 
					     LEFT JOIN CBCONTRATO c ON c.id_cbcontrato_int = tmpcon.id_cbcontrato_int
					     LEFT JOIN cbsituacaocontrato s ON c.id_cbsituacaocontrato_int = s.id_cbsituacaocontrato_int
					     LEFT JOIN cbtiponegocio tn ON c.id_cbtiponegocio_int = tn.id_cbtiponegocio_int
					     LEFT JOIN cbetapa e ON c.id_cbetapa_int = e.id_cbetapa_int
					     WHERE chave_str = ''' || chave || ''' 
					     AND (SELECT COUNT(*) 
						  FROM escontrolefilaolos fila 
						  WHERE fila.codfila_str = ''' || sCodprocess || ''' AND fila.id_cbcontrato_int = tmpcon.id_cbcontrato_int) = 0'
		 LOOP

			INSERT INTO escontrolefilaolos (datahora_geracaofila_tim, contrato,desc_cbsit_geracaofila_str, codfila_str, inconsistencia_txt, desc_inconsistencia_txt, id_geusuario_int) VALUES (current_timestamp, rsRegistro.contrato_str, rsRegistro.situacao, sCodprocess, rsRegistro.inco, rsRegistro.desc_inco, idusuario);

		 END LOOP;

	 END IF;

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1885 (class 1255 OID 26650)
-- Name: f_mascara_cpf(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mascara_cpf(sdocori text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE

	registro	RECORD;
	sSql		Text;
	sDocMask	TEXT;
 
BEGIN
	-- Lei Geral Proteï¿½ï¿½o Dados
   
	IF  TRIM(COALESCE( $1,'')) = '' THEN
		return sDocOri;
	END IF;
	
	$1 = REPLACE(REPLACE($1,'.',''),'-','');

	sDocMask = overlay( $1 placing '000000' from position((substring( $1,4,9)) in $1) for 6);

	RETURN  sDocMask;
END;
$_$;

--
-- TOC entry 1886 (class 1255 OID 26654)
-- Name: f_mascara_nome(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mascara_nome(snomeori text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE

	registro	RECORD;
	iTam 		bigint;
	iIni    	Int;
	iFim    	Int;
	ii      	Int;
	sNome   	TEXT;
	sSql		Text;
	sMask		TEXT;
	sSubs		TEXT;
 
BEGIN
	-- Lei Geral Proteï¿½ï¿½o Dados
    -- DESMASCARAMENTO DO NOME AUTORIZADO PELO COMPLICE
	
	/*IF  TRIM(COALESCE(sNomeOri,'')) = '' THEN
		sNomeOri = '   ';
	END IF;

	raise notice 'sNomeOri %',sNomeOri;

	sNome = '';   
	iIni := POSITION (' ' IN sNomeOri);
 
	sSql = 'SELECT length(''' || $1 || ''') - strpos( reverse(''' || $1 || '''),'' '') as Posfim';	
	FOR registro IN EXECUTE sSql
  	LOOP
  		iFim = registro.posfim;
  	END LOOP;

	raise notice 'iFim %',iFim;

	sSql = 'SELECT count(1) as total FROM (SELECT trim(regexp_split_to_table(''' || $1 || ''', '' '')))  t';
  	FOR registro IN EXECUTE sSql
  	LOOP
  		iTam = registro.total;
  	END LOOP;

	-- Trata os nomes onde a segunda palavra ï¿½ (da, do, dos, ...)
	if iTam = 3 then
		sSql = 'SELECT split_part(''' || $1 || ''','' '',2) AS nome2';	
		FOR registro IN EXECUTE sSql
		LOOP
			sNome = registro.nome2;
		END LOOP;

		if LENGTH(sNome) <=3 THEN
			iFim = length(sNomeOri);
		END IF;
	ELSEIF iTam = 2 then
		iFim = length(sNomeOri);
	end if;

	If iIni = iFim Then
		iFim = Len(sNomeOrig);
	End If;	

	raise notice 'iFIM-iIni: %',iFIM-iIni;

	sSubs := SUBSTRING($1,iIni+1, iFim-iIni);
	sMask := REPEAT('*',iFIM-iIni);
	
        sNome := REPLACE($1, sSubs , sMask);*/
	
	RETURN  snomeori;
END;
$_$;

--
-- TOC entry 1887 (class 1255 OID 26658)
-- Name: f_mascara_telefone(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mascara_telefone(stelori text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE

	registro	RECORD;
	sSql		Text;
	sTelMask	TEXT;
 
BEGIN
	-- Lei Geral Proteï¿½ï¿½o Dados
   
	IF  TRIM(COALESCE( $1,'')) = '' THEN
		return sTelOri;
	END IF;
	
	$1 = REPLACE(REPLACE($1,'.',''),'-','');

	sTelMask = overlay( $1 placing '*****' from position((substring( $1, 1, 7)) in $1) for 7);

	RETURN  sTelMask;
END;
$_$;

--
-- TOC entry 1888 (class 1255 OID 26668)
-- Name: f_mdm_boleto(bigint, timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_boleto(pintcarteira bigint, pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_boleto bigint, id_carteira bigint, id_contrato bigint, data_inclusao timestamp without time zone, data_alteracao timestamp without time zone, da integer, data_emissao date, hora_emissao timestamp without time zone, vencimento_boleto date, acordo bigint, nosso_numero character varying, parcelamento character varying, tipo_bordero character varying, qtde_parc_bordero text, nome_operador character varying, login character varying, valor_boleto double precision, valor_repasse double precision, principal double precision, cp double precision, honorarios double precision, comissionamento double precision, desconto double precision, abatimento double precision, juros_mora double precision, retido double precision, acrescimo double precision, despesas double precision, multa double precision, notificacao double precision, despesa_banco double precision, juros text, desconto_original double precision, cp_original double precision, ddiv text, pago character varying, ho_original double precision, valor_refin text, obs_tipo_pagamento character varying, linha_digitavel_str character varying, acordo_algar text, colchao_status text, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

	RETURN QUERY (
	SELECT
			*
		FROM
			view_mdm_boleto v
		WHERE
				v.Id_Carteira = pintCarteira
			AND	v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1889 (class 1255 OID 26669)
-- Name: f_mdm_contrato314(timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_contrato314(pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_contrato bigint, id_cliente bigint, id_carteira bigint, data_inclusao timestamp without time zone, data_alteracao timestamp without time zone, tipo_de_negocio character varying, desc_tpneg character varying, contrato character varying, nome character varying, cpf text, produto character varying, etapa character varying, desc_etapa character varying, segmento text, situacao_contrato character varying, dias_de_atraso text, prazo integer, qtde_pc_atraso bigint, dt_pre_distrib text, dt_prim_distrib date, dt_ult_distrib date, regiao character varying, estado character varying, cidade character varying, filial character varying, risco double precision, saldo_devedor double precision, vlr_principal text, regua text, binding_do_ctt text, grupo_operacao text, fx_atraso text, prazo_de_solucao text, consolidador text, cod_cessao text, data_cessao text, marcacao text, inibe_caixa text, status_gv text, codigo_loja text, nome_loja text, saldo_parcelado text, saldo_minimo text, saldo_utilizado_fatura text, atraso_bcsul text, contrato_gestao text, grupo text, cota text, motivo_nao_ajuizamento text, marca text, modelo text, chassi text, ano_fabricacao text, ano_modelo text, placa text, renavam text, cor text, desc_tipo_veiculo text, seguro_cardif text, ajuizado text, tipo_contrato text, venc_boleto text, valorminimo text, valormaximo text, valor_renegociado_boletagem text, valor_desconto_boletagem text, valor_atualizado_boletagem text, valor_a_vista text, valor_a_prazo text, renda_eleita_br text, radarspc text, origem_radar text, numero_contrato text, mercado text, fx_renda text, flag_digital_granular text, flag_digital text, data_radar text, data_nascimento text, corren text, contador_radar text, cod_barras_vista text, cod_barras_parc text, avap text, status text, qtde_parc2_inicial_int text, qtde_parc2_final_int text, qtde_parc1_inicial_int text, qtde_parc1_inicia5_int text, qtde_parc1_inicia4_int text, qtde_parc1_inicia3_int text, qtde_parc1_final_int text, qtde_parc1_fina5_int text, qtde_parc1_fina4_int text, qtde_parc1_fina3_int text, perc_desc_vista_num text, perc_desc_parc5_num text, perc_desc_parc4_num text, perc_desc_parc3_num text, perc_desc_parc2_num text, perc_desc_parc1_num text, pec_min_entrada5_num text, pec_min_entrada4_num text, pec_min_entrada3_num text, pec_min_entrada2_num text, pec_min_entrada1_num text, campanha text, agencia text, conta_cliente text, tipo_de_pessoa text, distribuidor text, concessionaria text, lote text, valor_menor_vista text, valor_medio_vista text, valor_maior_vista text, score text, valor_do_bem text, descricao_do_bem text, perc_amortizado text, perc_amort_mensal text, vl_categoria text, perc_negociado text, perc_cont_vencer text, bens text, praca text, pc_performace text, da_travada text, faixa_travada text, ano text, mci text, cartao text, pagto text, valor_pg text, data_performance text, alterado_edi_str text, prazo_solucao text, data_limite_retorno text, vlclser text, prazo_saida text, cluster_novo text, melhor_oferta text, cliente_digital text, prioridade_boleto text, propensao text, item_de_cobranca text, n_parceiro_de_negocios text, classe_subclasse text, data_de_pagamento text, codigo_de_barras text, tipo_de_cobranca text, contrato_inadimplencia text, operacao text, seguro text, ultima_reabertura_contrato text, da_travado text, saldo text, marcacao_kg text, data_cadastro text, data_redistrib_contrato text, data_saida_contrato text, data_atual_fluxo text, situacao text, anterior_ctt text, data_ult_motivoinadim text, perc_atraso text, area_funcional_cacs text, averbado text, cod_sub_segmento text, cod_tipo_veiculo text, codcobranca text, codigo_contrato text, collector text, complemento_state text, contrato_parcela text, data_baixa text, data_enquadramento text, data_inibicao text, data_status text, data_venc_ultima_parcela text, descricao_fase text, divisao text, dt_contrato text, eleg_ajuiz text, emp text, entrega_amigavel text, estado_civil text, etapa_da text, idcontrato text, loan_id text, mascara_contrato text, motivo_inadimplencia text, numero_conta text, numero_endereco_entrega text, numerounico text, numproduto text, pagamento_mes text, pedras text, prioridade text, publico text, qtd_camp_ativa text, qtde_pagas text, qtde_parcelas text, regiao2 text, saldo_parcelas text, saldo_vencido text, score_banco text, setor text, sexo text, shopping text, soma_parc text, tot_negociado text, ult_num_camp_ativo text, val_inibicao text, valor_negociavel text, valor_liquido text, valor_molicar text, vista_desconto text, cod_cliente text, id_titulo text, nr_titulo text, metodo_pagamento text, tipo_titulo text, codigo_curso text, nome_curso text, situacao_matricula text, cod_faculdade text, nome_faculdade text, email_faculdade text, data_standby text, num_proposta text, contrato_fase text, etapa_2 text, modelo_2 text, dt_ult_acio text, cod_ult_acio text, obito text, nome_mae character varying, nome_pai character varying, numero_rg character varying, orgao_expedidor_rg character varying, data_emissao_rg date, uf_rg character varying, cidade_nascimento character varying, local_trabalho character varying, profissao character varying, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text, coringa11 text, coringa12 text, coringa13 text, coringa14 text, coringa15 text, coringa16 text, coringa17 text, coringa18 text, coringa19 text, coringa20 text, coringa21 text, coringa22 text, coringa23 text, coringa24 text, coringa25 text, coringa26 text, coringa27 text, coringa28 text, coringa29 text, coringa30 text, coringa31 text, coringa32 text, coringa33 text, coringa34 text, coringa35 text, coringa36 text, coringa37 text, coringa38 text, coringa39 text, coringa40 text, coringa41 text, coringa42 text, coringa43 text, coringa44 text, coringa45 text, coringa46 text, coringa47 text, coringa48 text, coringa49 text, coringa50 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

-- 	INSERT INTO
-- 		esLogConsultaMDM
-- 			(
-- 				usuario_str
-- 			,	funcao_str
-- 			,	id_gecliente_int
-- 			,	datahorainicial_tstamp
-- 			,	datahorafinal_tstamp
-- 			)
-- 		VALUES
-- 			(
-- 				CURRENT_USER
-- 			,	'Carteira'
-- 			,	314
-- 			,	pdtDataHoraInicio
-- 			,	pdtDataHoraFim
-- 			);

	RETURN QUERY
	(SELECT
			*
		FROM
			View_mdm_contrato314 v
		WHERE
			v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1890 (class 1255 OID 26681)
-- Name: f_mdm_email(bigint, timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_email(pintcarteira bigint, pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_email bigint, id_cliente bigint, id_carteira bigint, data_inclusao timestamp with time zone, data_alteracao timestamp with time zone, tipo_contato character varying, email character varying, classificacao character varying, score bigint, origem text, fornecedor character varying, pagou_facil text, black_list text, data_black_list timestamp without time zone, excluido bit, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

-- 	INSERT INTO
-- 		esLogConsultaMDM
-- 			(
-- 				usuario_str
-- 			,	funcao_str
-- 			,	id_gecliente_int
-- 			,	datahorainicial_tstamp
-- 			,	datahorafinal_tstamp
-- 			)
-- 		VALUES
-- 			(
-- 				CURRENT_USER
-- 			,	'Email'
-- 			,	pintCarteira
-- 			,	pdtDataHoraInicio
-- 			,	pdtDataHoraFim
-- 			);

	RETURN QUERY (
	SELECT
			*
		FROM
			view_mdm_email v
		WHERE
				v.Id_Carteira = pintCarteira
			AND	v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1891 (class 1255 OID 26684)
-- Name: f_mdm_endereco(bigint, timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_endereco(pintcarteira bigint, pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_endereco bigint, id_cliente bigint, id_carteira bigint, data_inclusao timestamp with time zone, data_alteracao timestamp with time zone, tipo_contato character varying, endereco character varying, complemento character varying, bairro character varying, cep character varying, cidade character varying, estado character varying, pais text, classificacao character varying, score text, origem text, fornecedor character varying, black_list text, data_black_list text, excluido bit, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

-- 	INSERT INTO
-- 		esLogConsultaMDM
-- 			(
-- 				usuario_str
-- 			,	funcao_str
-- 			,	id_gecliente_int
-- 			,	datahorainicial_tstamp
-- 			,	datahorafinal_tstamp
-- 			)
-- 		VALUES
-- 			(
-- 				CURRENT_USER
-- 			,	'Endereï¿½o'
-- 			,	pintCarteira
-- 			,	pdtDataHoraInicio
-- 			,	pdtDataHoraFim
-- 			);

	RETURN QUERY(
	SELECT
			*
		FROM
			view_mdm_endereco v
		WHERE
				v.Id_Carteira = pintCarteira
			AND	v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1892 (class 1255 OID 26692)
-- Name: f_mdm_follow(bigint, timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_follow(pintcarteira bigint, pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_follow bigint, id_contrato bigint, id_carteira bigint, data_inclusao timestamp without time zone, data_alteracao timestamp without time zone, login character varying, cod_follow bigint, desc_follow character varying, data date, inicio time without time zone, final time without time zone, tempo time without time zone, observacao_follow character varying, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

	RETURN QUERY (
	SELECT
			*
		FROM
			view_mdm_follow v
		WHERE
				v.Id_Carteira = pintCarteira
			AND	v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1893 (class 1255 OID 26696)
-- Name: f_mdm_pagamento(timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_pagamento(pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_pagamento bigint, id_boleto bigint, data_inclusao timestamp without time zone, data_alteracao timestamp without time zone, data_pagamento date, data_repasse date, valor_repasse double precision, tipo_pagamento text, situacao_pagamento_boleto character varying, valor_pago double precision, principal double precision, cp double precision, multa double precision, notificacao double precision, despesa_banco double precision, desconto double precision, abatimento double precision, juros_mora double precision, honorarios double precision, comissionamento double precision, valor_boleto double precision, retido double precision, acrescimo double precision, despesas double precision, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

	RETURN QUERY (
	SELECT
			*
		FROM
			view_mdm_pagamento v
		WHERE
			v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1894 (class 1255 OID 26706)
-- Name: f_mdm_parcela314(timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_parcela314(pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_parcela bigint, id_contrato bigint, id_cliente bigint, data_inclusao timestamp without time zone, data_alteracao timestamp with time zone, produto text, etapa text, desc_etapa text, segmento text, situacao_parcela smallint, vencimento_parcela date, dias_de_atraso integer, parcela bigint, dt_pre_distrib date, dt_prim_distrib date, dt_ult_distrib date, regiao text, estado text, cidade text, filial text, vlr_principal double precision, regua bigint, binding_do_ctt text, grupo_operacao text, fx_atraso text, prazo_de_solucao text, venc_boleto text, valorminimo text, valormaximo text, valor_renegociado_boletagem text, valor_desconto_boletagem text, valor_atualizado_boletagem text, valor_a_vista text, valor_a_prazo text, renda_eleita_br text, radarspc text, origem_radar text, numero_contrato text, mercado text, fx_renda text, flag_digital_granular text, flag_digital text, data_radar text, data_nascimento text, corren text, contador_radar text, cod_barras_vista text, cod_barras_parc text, avap text, qtde_parc2_inicial_int text, qtde_parc2_final_int text, qtde_parc1_inicial_int text, qtde_parc1_inicia5_int text, qtde_parc1_inicia4_int text, qtde_parc1_inicia3_int text, qtde_parc1_final_int text, qtde_parc1_fina5_int text, qtde_parc1_fina4_int text, qtde_parc1_fina3_int text, perc_desc_vista_num text, perc_desc_parc5_num text, perc_desc_parc4_num text, perc_desc_parc3_num text, perc_desc_parc2_num text, perc_desc_parc1_num text, pec_min_entrada5_num text, pec_min_entrada4_num text, pec_min_entrada3_num text, pec_min_entrada2_num text, pec_min_entrada1_num text, campanha text, agencia text, observacoes text, cp_parcela text, liberacao text, data_performance text, n_de_um_documento_da_conta_corrente_contratual text, n_da_conta_de_contrato text, montante_em_moeda_de_transacao_com_sinal_batch_input text, numero_do_formulario_de_pagamento text, instalacao text, n_do_documento_de_referencia_fatura text, data_de_lancamento_no_documento text, data_de_vencimento_liquido text, status_de_instalacao text, tipo_de_carteira text, marcacao_de_negativado text, marcacao_de_protestado text, codigo_de_barras text, tipo_de_cobranca text, area_responsavel text, area_risco text, data_distrib_operacao text, data_ult_distrib_oper_contrato text, valor_parcela text, validacao_parcela text, cod_sub_segmento text, parc_inibida text, dt_venc_pc text, flag_misc text, miscellaneous text, observacoes_da_parcela text, prioridade text, publico text, qtde_parcelas text, cod_cliente text, id_titulo text, nr_titulo text, metodo_pagamento text, tipo_titulo text, codigo_curso text, nome_curso text, situacao_matricula text, cod_faculdade text, nome_faculdade text, email_faculdade text, data_standby text, num_proposta text, contrato_fase text, etapa_2 text, modelo_2 text, dt_ult_acio text, cod_ult_acio text, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text, coringa11 text, coringa12 text, coringa13 text, coringa14 text, coringa15 text, coringa16 text, coringa17 text, coringa18 text, coringa19 text, coringa20 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

-- 	INSERT INTO
-- 		esLogConsultaMDM
-- 			(
-- 				usuario_str
-- 			,	funcao_str
-- 			,	id_gecliente_int
-- 			,	datahorainicial_tstamp
-- 			,	datahorafinal_tstamp
-- 			)
-- 		VALUES
-- 			(
-- 				CURRENT_USER
-- 			,	'Parcela'
-- 			,	314
-- 			,	pdtDataHoraInicio
-- 			,	pdtDataHoraFim
-- 			);

	RETURN QUERY
	(SELECT
			*
		FROM
			view_mdm_parcela314 v
		WHERE
			v.data_alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1895 (class 1255 OID 26712)
-- Name: f_mdm_parcelaboleto(timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_parcelaboleto(pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_parcelaboleto bigint, id_boleto bigint, id_parcela bigint, data_inclusao timestamp without time zone, data_alteracao timestamp without time zone, principal double precision, cp double precision, multa double precision, notificacao double precision, despesa_banco double precision, desconto double precision, abatimento double precision, juros_mora double precision, honorarios double precision, comissionamento double precision, valor_boleto double precision, retido double precision, acrescimo double precision, despesas double precision, cp_original double precision, desconto_original double precision, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

	RETURN QUERY (
	SELECT
			*
		FROM
			view_mdm_parcelaboleto v
		WHERE
			v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1896 (class 1255 OID 26722)
-- Name: f_mdm_parcelapagamento(timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_parcelapagamento(pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_parcelapagamento bigint, id_pagamento bigint, id_parcela bigint, data_inclusao timestamp without time zone, data_alteracao timestamp without time zone, valor_repasse double precision, principal double precision, cp double precision, multa double precision, notificacao double precision, despesa_banco double precision, desconto double precision, abatimento double precision, juros_mora double precision, honorarios double precision, comissionamento double precision, valor_boleto double precision, retido double precision, acrescimo double precision, despesas double precision, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

	RETURN QUERY (
	SELECT
			*
		FROM
			view_mdm_parcelapagamento v
		WHERE
			v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1897 (class 1255 OID 26723)
-- Name: f_mdm_telefone(bigint, timestamp without time zone, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_mdm_telefone(pintcarteira bigint, pdtdatahorainicio timestamp without time zone, pdtdatahorafim timestamp without time zone) RETURNS TABLE(id_telefone bigint, id_cliente bigint, id_carteira bigint, data_inclusao timestamp with time zone, data_alteracao timestamp with time zone, tipo_contato character varying, ddd text, telefone character varying, classificacao character varying, score bigint, origem text, fornecedor character varying, whatsapp character varying, pagou_facil text, black_list text, data_black_list timestamp without time zone, excluido bit, coringa1 text, coringa2 text, coringa3 text, coringa4 text, coringa5 text, coringa6 text, coringa7 text, coringa8 text, coringa9 text, coringa10 text)
    LANGUAGE plpgsql
    AS $$
BEGIN

-- 	INSERT INTO
-- 		esLogConsultaMDM
-- 			(
-- 				usuario_str
-- 			,	funcao_str
-- 			,	id_gecliente_int
-- 			,	datahorainicial_tstamp
-- 			,	datahorafinal_tstamp
-- 			)
-- 		VALUES
-- 			(
-- 				CURRENT_USER
-- 			,	'Telefone'
-- 			,	pintCarteira
-- 			,	pdtDataHoraInicio
-- 			,	pdtDataHoraFim
-- 			);

	RETURN QUERY(
	SELECT
			*
		FROM
			view_mdm_telefone v
		WHERE
				v.Id_carteira = pintCarteira
			AND	v.Data_Alteracao BETWEEN pdtDataHoraInicio AND pdtDataHoraFim);
END;
$$;

--
-- TOC entry 1898 (class 1255 OID 26733)
-- Name: f_monta_xml_acordoeleva(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_monta_xml_acordoeleva(p_idbordero text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	
	sSql TEXT;
	registro RECORD;
	cliente_record RECORD;

	Cliente_XML XML;
	Negociacao_XML XML;
	ListLan_XML XML;
	FinIdLanAcordoPar_XML XML;
   	ListParcelasAcordo_XML XML;
	FinParcelamentoAcordoPar_XML XML;

	AcordoParamsProc TEXT;
	codCarteira INT;
	tabela_filha TEXT;
	qtd_parcelamento INT;
	primerio_vencimento  date;
	valor_total varchar;
	valor_capital varchar;  --principal_num + juros_mora_num + multa_num
	valor_total_desconto varchar; 

BEGIN
		
	/*
	 * INFORMAï¿½OES SOBRE O CONTRATO 
	 * As informaï¿½ï¿½es sobre o cliente estï¿½o na cbparcela, originalmente todas as parcelas tem os mesmos dados sobre o cliente.
	 * 
	 * 
	 * */

	
		 
---------------------------------------------------------------------------------------------------------------------------------------------------	 	
	--BUSCA IDS DAS PARCELAS NEGOCIADA		 
	SELECT INTO registro id_cbparcela_int 
		   FROM cbparcelaitembordero pib 
		  WHERE pib.id_cbitembordero_int IN (SELECT id_cbitembordero_int 
											   FROM cbitembordero 
										      WHERE id_cbbordero_int = p_idbordero::int) 
									       GROUP BY id_cbparcela_int;

---------------------------------------------------------------------------------------------------------------------------------------------------
	--BUSCA DADOS DO CLIENTE, USA A CBPARCELA PARA PEGAR OS DADOS. UTILIZAR APENAS UMA PARCELA PARA PEGAR OS DADOS
	SELECT INTO cliente_record 
				id_cbcontrato_int AS idcontrato,
				id_cbparcela_int AS idparcela,
				parcela_int AS parcela,
				Info_adicional_1_str AS CodTdo,
				info_adicional_2_str AS CodCxa,
				info_adicional_3_str AS CodColigada,
				info_adicional_4_str AS CodFilial,
				info_adicional_4_str AS IdLan,
				info_adicional_6_str AS CodTabOp1,
				info_adicional_7_str AS IdTemplateAcordo,
				info_adicional_15_str AS NumeroBase
		   FROM cbparcela 
		  WHERE id_cbparcela_int = registro.id_cbparcela_int
		  LIMIT 1 ;
		 
---------------------------------------------------------------------------------------------------------------------------------------------------	 

	--BUSCA DADOS DO PARCELAMENTO
	SELECT INTO qtd_parcelamento, 
			    primerio_vencimento,
				valor_total,
				valor_capital,
				valor_total_desconto
			   	count(1), 
			   	min(vencimento_dat), 
			   	REPLACE(TRUNC(sum(valor_total_num)::numeric,2)::varchar, '.', ','),
				REPLACE(TRUNC(SUM(principal_num + juros_mora_num + multa_num)::numeric,2)::varchar, '.', ','),
				REPLACE(TRUNC(sum(desconto_num + juros_mora_num + multa_num)::numeric,2)::varchar, '.', ',')
		   FROM cbitembordero 
		  WHERE id_cbbordero_int = p_idbordero::int;
		 
---------------------------------------------------------------------------------------------------------------------------------------------------	 	
	--MONTA XML COM OS DADOS DO CLIENTE, USA A CBPARCELA PARA PEGAR OS DADOS. UTILIZAR APENAS UMA PARCELA PARA PEGAR OS DADOS
   	SELECT INTO Cliente_XML 
   			  xmlforest(cliente_record.CodColigada AS CodColigada,
						'Paschoalotto' AS CodUsuario,
						TO_CHAR(current_timestamp, 'DD/MM/YYYY 00:00:00') AS DataAcordo,
						'Receber' AS PagRec,
						0 AS ValorAcrescimoAcordo,
						0 AS ValorDescontoAcordo,
						0 AS ValorJurosAcordo,
						cliente_record.CodTdo AS CodTdo,
						cliente_record.CodFilial AS CodFilial,
						FALSE AS CalcularValorAcordoInProcessServer,
						NULL AS CodCCusto,
						cliente_record.CodColigada AS CodColCxa,
						cliente_record.CodCxa AS CodCxa,
						'' AS TipoJurosDia,
						0 AS TaxaJuros,
						0 AS Multa,
						0 AS Juros,
						cliente_record.IdTemplateAcordo AS IdTemplateAcordo,
						'//PASCHOALOTTO' || (SELECT distinct c.contrato_str
									FROM cbcontratoeleva c
									INNER JOIN cbitembordero i on i.id_cbcontrato_int = c.id_cbcontrato_int
									WHERE i.id_cbbordero_int =  p_idbordero::int
									LIMIT 1) || '\\\\\\\\' AS Historico, 
						cliente_record.CodTabOp1 AS CodTabOp1,
						'BaixaContabil' AS TipoContabilLan);

---------------------------------------------------------------------------------------------------------------------------------------------------
	--MONTA XML COM OS DADOS DA NEGOCIACAO
	SELECT INTO Negociacao_XML 
   		XMLELEMENT(name Negociacao,  
			xmlforest(cliente_record.CodColigada AS CodColigada,
					  cliente_record.CodTdo AS CodTdo,
					  TO_CHAR(current_timestamp, 'DD/MM/YYYY 00:00:00') AS DataAcordo,
					  qtd_parcelamento AS QuantidadeParcelas,
					  primerio_vencimento AS DataPrimeiroVencimento,
					  0 AS Prazo,
					  30 AS IntervaloDias,
					  TRUE AS GeraNumDocumento,
					  'NaoUtiliza'AS JurosFuturos,
					  FALSE AS ManterDiaVenc,
					  cliente_record.NumeroBase AS NumeroBase,
					  1 AS ParcelaInicial, 
					  0 AS TaxaJurosDia, 
					  valor_total AS ValorAcordo,
					  0 AS ValorAcrescimoAcordo,
					  0 AS ValorAcrescimoAcordoLancamento,
					  valor_capital AS ValorCapital,
					  valor_total_desconto AS ValorDescontoAcordo,
					  0 AS ValorDescontoAcordoLancamento,
					  0 AS ValorJurosAcordo,
					  0 AS ValorJurosAcordoLancamento,
					  valor_capital AS ValorLiquidoLancamentos,
					  0 AS ValorLiquidoLancamentosParaJurosAcordo)
				);

 ---------------------------------------------------------------------------------------------------------------------------------------------------  	   

	--MONTA XML DAS PARCELAS NEGOCIADA
	SELECT INTO FinIdLanAcordoPar_XML
   		XMLAGG(XMLELEMENT(name FinIdLanAcordoPar,
   			xmlforest(info_adicional_3_str AS CodColigada,
		  			  info_adicional_5_str AS IdLan)
			  ))
	 FROM cbparcela
	WHERE 0=0
   	  AND id_cbparcela_int IN (
						SELECT id_cbparcela_int 
					   FROM cbparcelaitembordero pib 
					  WHERE pib.id_cbitembordero_int IN (SELECT id_cbitembordero_int 
						   FROM cbitembordero 
					      WHERE id_cbbordero_int = p_idbordero::int) 
				       GROUP BY id_cbparcela_int
   	  --registro.id_cbparcela_int
   	  ); 
   	SELECT INTO ListLan_XML XMLELEMENT(name ListLan, FinIdLanAcordoPar_XML); 

---------------------------------------------------------------------------------------------------------------------------------------------------
	--MONTA XML PARCELAMENTO
	with sub as (SELECT 
   		XMLAGG(XMLELEMENT(name FinParcelamentoAcordoPar,   			
   			xmlforest(cliente_record.CodTdo AS CodTdo,
					  itb.vencimento_dat AS DataVencimento,
					  FALSE AS Editado,
					  itb.boleto_parcelamento_str AS IdParcela,
					  0 AS TaxaJuros,
					  0 AS ValorAcrescimoAcordo,
					  REPLACE(TRUNC(ROUND((itb.principal_num + itb.juros_mora_num + itb.multa_num),2)::numeric,2)::varchar,'.',',') AS ValorCapital,
					  REPLACE(TRUNC(ROUND((itb.desconto_num + itb.juros_mora_num + itb.multa_num),2)::numeric,2)::varchar, '.', ',') AS ValorDescontoAcordo,
					  0 AS ValorJurosAcordo,
					  REPLACE(TRUNC(itb.valor_total_num::numeric,2)::varchar, '.', ',') AS ValorParcela)
		 )) as xml_t, itb.boleto_parcelamento_str
	 FROM cbitembordero itb
	WHERE 0=0
   	  AND itb.id_cbbordero_int = p_idbordero::int
   	  group by itb.boleto_parcelamento_str order by itb.boleto_parcelamento_str )

   SELECT INTO ListParcelasAcordo_XML XMLELEMENT(name ListParcelasAcordo, XMLAGG(xml_t ORDER BY boleto_parcelamento_str)) FROM SUB; 
  	   

---------------------------------------------------------------------------------------------------------------------------------------------------
	--MONTA ESTRUTURA DO XML
  	SELECT INTO AcordoParamsProc XMLELEMENT(name FinAcordoParamsProc, Cliente_XML, Negociacao_XML, ListLan_XML, ListParcelasAcordo_XML)::text;   	

  	

	
  	--O RETORNO DEVE ESTAR CONCATENADO COM AS ASPAS DEVIDO AO POST FEITO NA API DA CARTEIRA
	RETURN '"'||AcordoParamsProc||'"';

END;
$$;

--
-- TOC entry 1899 (class 1255 OID 26735)
-- Name: f_monta_xml_acordoeleva_hml(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_monta_xml_acordoeleva_hml(p_idbordero text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	
	sSql TEXT;
	registro RECORD;
	cliente_record RECORD;

	Cliente_XML XML;
	Negociacao_XML XML;
	ListLan_XML XML;
	FinIdLanAcordoPar_XML XML;
   	ListParcelasAcordo_XML XML;
	FinParcelamentoAcordoPar_XML XML;

	AcordoParamsProc TEXT;
	codCarteira INT;
	tabela_filha TEXT;
	qtd_parcelamento INT;
	primerio_vencimento  date;
	valor_total varchar;
	valor_capital varchar;  --principal_num + juros_mora_num + multa_num
	valor_total_desconto varchar; 

BEGIN
		
	/*
	 * INFORMAï¿½OES SOBRE O CONTRATO 
	 * As informaï¿½ï¿½es sobre o cliente estï¿½o na cbparcela, originalmente todas as parcelas tem os mesmos dados sobre o cliente.
	 * 
	 * 
	 * */

	
		 
---------------------------------------------------------------------------------------------------------------------------------------------------	 	
	--BUSCA IDS DAS PARCELAS NEGOCIADA		 
	SELECT INTO registro id_cbparcela_int 
		   FROM cbparcelaitembordero pib 
		  WHERE pib.id_cbitembordero_int IN (SELECT id_cbitembordero_int 
											   FROM cbitembordero 
										      WHERE id_cbbordero_int = p_idbordero::int) 
									       GROUP BY id_cbparcela_int;

---------------------------------------------------------------------------------------------------------------------------------------------------
	--BUSCA DADOS DO CLIENTE, USA A CBPARCELA PARA PEGAR OS DADOS. UTILIZAR APENAS UMA PARCELA PARA PEGAR OS DADOS
	SELECT INTO cliente_record 
				id_cbcontrato_int AS idcontrato,
				id_cbparcela_int AS idparcela,
				parcela_int AS parcela,
				Info_adicional_1_str AS CodTdo,
				info_adicional_2_str AS CodCxa,
				info_adicional_3_str AS CodColigada,
				info_adicional_4_str AS CodFilial,
				info_adicional_4_str AS IdLan,
				info_adicional_6_str AS CodTabOp1,
				info_adicional_7_str AS IdTemplateAcordo,
				info_adicional_15_str AS NumeroBase
		   FROM cbparcela 
		  WHERE id_cbparcela_int = registro.id_cbparcela_int
		  LIMIT 1 ;
		 
---------------------------------------------------------------------------------------------------------------------------------------------------	 

	--BUSCA DADOS DO PARCELAMENTO
	SELECT INTO qtd_parcelamento, 
			    primerio_vencimento,
				valor_total,
				valor_capital,
				valor_total_desconto
			   	count(1), 
			   	min(vencimento_dat), 
			   	REPLACE(TRUNC(sum(valor_total_num)::numeric,2)::varchar, '.', ','),
				REPLACE(TRUNC(SUM(principal_num + juros_mora_num + multa_num)::numeric,2)::varchar, '.', ','),
				REPLACE(TRUNC(sum(desconto_num + juros_mora_num + multa_num)::numeric,2)::varchar, '.', ',')
		   FROM cbitembordero 
		  WHERE id_cbbordero_int = p_idbordero::int;
		 
---------------------------------------------------------------------------------------------------------------------------------------------------	 	
	--MONTA XML COM OS DADOS DO CLIENTE, USA A CBPARCELA PARA PEGAR OS DADOS. UTILIZAR APENAS UMA PARCELA PARA PEGAR OS DADOS
   	SELECT INTO Cliente_XML 
   			  xmlforest(cliente_record.CodColigada AS CodColigada,
						'Paschoalotto' AS CodUsuario,
						TO_CHAR(current_timestamp, 'DD/MM/YYYY 00:00:00') AS DataAcordo,
						'Receber' AS PagRec,
						0 AS ValorAcrescimoAcordo,
						0 AS ValorDescontoAcordo,
						0 AS ValorJurosAcordo,
						cliente_record.CodTdo AS CodTdo,
						cliente_record.CodFilial AS CodFilial,
						FALSE AS CalcularValorAcordoInProcessServer,
						NULL AS CodCCusto,
						cliente_record.CodColigada AS CodColCxa,
						cliente_record.CodCxa AS CodCxa,
						'' AS TipoJurosDia,
						0 AS TaxaJuros,
						0 AS Multa,
						0 AS Juros,
						cliente_record.IdTemplateAcordo AS IdTemplateAcordo,
						'//PASCHOALOTTO' || (SELECT distinct c.contrato_str
									FROM cbcontratoeleva c
									INNER JOIN cbitembordero i on i.id_cbcontrato_int = c.id_cbcontrato_int
									WHERE i.id_cbbordero_int =  p_idbordero::int
									LIMIT 1) || '\\\\\\\\' AS Historico, 
						cliente_record.CodTabOp1 AS CodTabOp1,
						'BaixaContabil' AS TipoContabilLan);

---------------------------------------------------------------------------------------------------------------------------------------------------
	--MONTA XML COM OS DADOS DA NEGOCIACAO
	SELECT INTO Negociacao_XML 
   		XMLELEMENT(name Negociacao,  
			xmlforest(cliente_record.CodColigada AS CodColigada,
					  cliente_record.CodTdo AS CodTdo,
					  TO_CHAR(current_timestamp, 'DD/MM/YYYY 00:00:00') AS DataAcordo,
					  qtd_parcelamento AS QuantidadeParcelas,
					  primerio_vencimento AS DataPrimeiroVencimento,
					  0 AS Prazo,
					  30 AS IntervaloDias,
					  TRUE AS GeraNumDocumento,
					  'NaoUtiliza'AS JurosFuturos,
					  FALSE AS ManterDiaVenc,
					  cliente_record.NumeroBase AS NumeroBase,
					  1 AS ParcelaInicial, 
					  0 AS TaxaJurosDia, 
					  valor_total AS ValorAcordo,
					  0 AS ValorAcrescimoAcordo,
					  0 AS ValorAcrescimoAcordoLancamento,
					  valor_capital AS ValorCapital,
					  valor_total_desconto AS ValorDescontoAcordo,
					  0 AS ValorDescontoAcordoLancamento,
					  0 AS ValorJurosAcordo,
					  0 AS ValorJurosAcordoLancamento,
					  valor_capital AS ValorLiquidoLancamentos,
					  0 AS ValorLiquidoLancamentosParaJurosAcordo)
				);

 ---------------------------------------------------------------------------------------------------------------------------------------------------  	   

	--MONTA XML DAS PARCELAS NEGOCIADA
	SELECT INTO FinIdLanAcordoPar_XML
   		XMLAGG(XMLELEMENT(name FinIdLanAcordoPar,
   			xmlforest(info_adicional_3_str AS CodColigada,
		  			  info_adicional_5_str AS IdLan)
			  ))
	 FROM cbparcela
	WHERE 0=0
   	  AND id_cbparcela_int IN (
						SELECT id_cbparcela_int 
					   FROM cbparcelaitembordero pib 
					  WHERE pib.id_cbitembordero_int IN (SELECT id_cbitembordero_int 
						   FROM cbitembordero 
					      WHERE id_cbbordero_int = p_idbordero::int) 
				       GROUP BY id_cbparcela_int
   	  --registro.id_cbparcela_int
   	  ); 
   	SELECT INTO ListLan_XML XMLELEMENT(name ListLan, FinIdLanAcordoPar_XML); 

---------------------------------------------------------------------------------------------------------------------------------------------------
	--MONTA XML PARCELAMENTO
	with sub as (SELECT 
   		XMLAGG(XMLELEMENT(name FinParcelamentoAcordoPar,   			
   			xmlforest(cliente_record.CodTdo AS CodTdo,
					  itb.vencimento_dat AS DataVencimento,
					  FALSE AS Editado,
					  itb.boleto_parcelamento_str AS IdParcela,
					  0 AS TaxaJuros,
					  0 AS ValorAcrescimoAcordo,
					  REPLACE(TRUNC(ROUND((itb.principal_num + itb.juros_mora_num + itb.multa_num),2)::numeric,2)::varchar,'.',',') AS ValorCapital,
					  REPLACE(TRUNC(ROUND((itb.desconto_num + itb.juros_mora_num + itb.multa_num),2)::numeric,2)::varchar, '.', ',') AS ValorDescontoAcordo,
					  0 AS ValorJurosAcordo,
					  REPLACE(TRUNC(itb.valor_total_num::numeric,2)::varchar, '.', ',') AS ValorParcela)
		 )) as xml_t, itb.boleto_parcelamento_str
	 FROM cbitembordero itb
	WHERE 0=0
   	  AND itb.id_cbbordero_int = p_idbordero::int
   	  group by itb.boleto_parcelamento_str order by itb.boleto_parcelamento_str )

   SELECT INTO ListParcelasAcordo_XML XMLELEMENT(name ListParcelasAcordo, XMLAGG(xml_t ORDER BY boleto_parcelamento_str)) FROM SUB; 
  	   

---------------------------------------------------------------------------------------------------------------------------------------------------
	--MONTA ESTRUTURA DO XML
  	SELECT INTO AcordoParamsProc XMLELEMENT(name FinAcordoParamsProc, Cliente_XML, Negociacao_XML, ListLan_XML, ListParcelasAcordo_XML)::text;   	

  	

	
  	--O RETORNO DEVE ESTAR CONCATENADO COM AS ASPAS DEVIDO AO POST FEITO NA API DA CARTEIRA
	RETURN '"'||AcordoParamsProc||'"';

END;
$$;

--
-- TOC entry 1900 (class 1255 OID 26746)
-- Name: f_montaquery_elevapadrao(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_montaquery_elevapadrao(idcbcontrato_int bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$

BEGIN 
    
	RETURN  (
        select '?identificador=' || con.contrato_str || '&codigoCarteira=' || con.id_gecliente_int
        from cbcontrato con 
        where con.id_cbcontrato_int = idcbcontrato_int
        LIMIT 1
    );

END;
$$;

--
-- TOC entry 1901 (class 1255 OID 26756)
-- Name: f_pagoufacil_acordo_gravarcomprovantepgto(text, text, integer, bytea); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_pagoufacil_acordo_gravarcomprovantepgto(p_codigocarteira text, p_codigoacordo text, p_numparcela integer, p_arquivocomprovante bytea) RETURNS boolean
    LANGUAGE plpgsql
    AS $$
DECLARE
	sSql				TEXT;
	registro			RECORD;
	usuarioPagouFacil 	TEXT;
	cbitemborderoID 	INTEGER;
	flagBoletagem		BOOLEAN;
	retorno				BOOLEAN;

	-- Tratamento parï¿½metro p_codigoacordo
	paramIdContrato 	BIGINT;
	paramCpf 			TEXT;
	paramIdBordero		BIGINT;
	
BEGIN	
	cbitemborderoID = 0;
	flagBoletagem 	= false;
	retorno			= false;
	
	/*
	*
	* Funï¿½ï¿½o: f_pagoufacil_acordo_gravarcomprovantepgto 
	* Responsï¿½vel por: Gravar na tabela cbitemborderocomprovantepgto a imagem do comprovante enviado pelo usuï¿½rio no site do Pagou Fï¿½cil
	* Data: 2017-03-22
	* Desenvolvido por: acdevelis
	*
	*/

	-- ##################################################################
	--                   VERIFICAï¿½ï¿½O DA CARTEIRA
	-- ##################################################################
	
	-- LANï¿½A EXCEï¿½ï¿½O CASO Nï¿½O TENHA SIDO INFORMADO O Cï¿½DIGO DA CARTEIRA.
	IF COALESCE(p_codigocarteira, '') = '' THEN 
		RAISE EXCEPTION 'Cï¿½digo da carteira nï¿½o informado.';
	END IF;	

	--USUARIO PAGOU Fï¿½CIL
	usuarioPagouFacil = (SELECT id_geusuario_int FROM geusuario WHERE UPPER(nomecompleto_str) LIKE 'PAGOU F%');        
	IF usuarioPagouFacil IS NULL THEN
		usuarioPagouFacil = '1195';
	END IF;

	IF p_codigoacordo != '' THEN

		-- ################################################################################################
		--
		--                           TRATAMENTO DO PARï¿½METRO p_codigoacordo
		--
		-- Essa ï¿½ uma chave que ï¿½ passada/devolvida para o serviï¿½o do PagouFacil.
		-- A funï¿½ï¿½o f_pagoufacil_acordo_gravar que monta essa chave.
		-- Exemplo: id_cbcontrato_int=123|cpf_str=01234567899|id_cbbordero_int=123|id_cbitemborero_int=123|acordo_int=123
		--
		-- ################################################################################################

		paramIdContrato = (SELECT split_part(split_part(p_codigoacordo, '|', 1), '=', 2)::BIGINT);
		paramCpf = (SELECT split_part(split_part(p_codigoacordo, '|', 2), '=', 2)::TEXT);
		paramIdBordero = (SELECT split_part(split_part(p_codigoacordo, '|', 3), '=', 2)::BIGINT);
	ELSE
		RAISE EXCEPTION 'Cï¿½digo do acordo nï¿½o informado!';
	END IF;

	-- OBS: boleto_parcelamento_str pode ser gravado com valor vazio (vazio <> NULL), por isso a utilizaï¿½ï¿½o do NULLIF que retorna NULL se os dois argumentos sejam iguais, caso contrï¿½rio retorna o primeiro argumento.

	FOR registro IN EXECUTE 'SELECT id_cbitembordero_int 
				   FROM cbitembordero ib
				   JOIN cbbordero b
				     ON b.id_cbbordero_int = ib.id_cbbordero_int
				  WHERE ib.id_cbbordero_int = ' || paramIdBordero || '
				    AND ib.id_cbcontrato_int = ' || paramIdContrato || '
				    AND COALESCE(NULLIF(ib.boleto_parcelamento_str, ''''), ''1'')::int = ' || p_numparcela || '::int
				' 
	LOOP
		cbitemborderoID = registro.id_cbitembordero_int;
	END LOOP;

	IF (cbitemborderoID <> 0) THEN
		EXECUTE 'INSERT INTO cbitemborderocomprovantepgto (
					id_cbitemborderocomprovantepgto_int,
					id_cbitembordero_int,
					comprovantepgto,
					status,
					id_geusuario_int,
					timestamp
				) VALUES (
					DEFAULT,
					' || cbitemborderoID || ',
					''' || p_arquivocomprovante || ''',
					0,
					' || usuarioPagouFacil || ',
					CURRENT_TIMESTAMP
				)';

		retorno = true;
	END IF;

	RETURN retorno;
END;	
$$;

--
-- TOC entry 1902 (class 1255 OID 26760)
-- Name: f_pagoufacil_sincronizacao(text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_pagoufacil_sincronizacao(tabelafilha text, id_gecliente text) RETURNS void
    LANGUAGE plpgsql
    AS $$
DECLARE

BEGIN
		-- Adiciona na espagoufacil todos os contratos que jï¿½ nï¿½o estejam na tabela e con situaï¿½ï¿½o diferente de baixado e juridico
		EXECUTE 'INSERT INTO espagoufacil (cpf_str, nome_str, pj_pf_str, id_gecliente_int, id_cbtiponegocio_int)
				SELECT c.cpf_str, c.nome_str, c.tipo_pessoa_str, c.id_gecliente_int, c.id_cbtiponegocio_int
				FROM ' || tabelafilha || ' c 
			 LEFT JOIN espagoufacil pag on pag.cpf_str = c.cpf_str
			       AND COALESCE(pag.id_cbtiponegocio_int,0) = c.id_cbtiponegocio_int
			       and pag.id_gecliente_int = ' || id_gecliente || '
			 WHERE pag.id_espagoufacil_int is null
			 AND c.id_cbsituacaocontrato_int not in (6, 13)
			 AND c.id_gecliente_int = ' || id_gecliente || ';';

	--Update para adicionar o cpf_tratado no mesmo formato do pagoufacil para facilitar o update do retorno e criticas
	EXECUTE 'UPDATE espagoufacil  SET cpf_tratado_int = t.cpf
			FROM
				(
			WITH sub as ( select valida_cpf_cnpj(fsonumero(cpf_str)) as cpf, id_espagoufacil_int FROM espagoufacil WHERE cpf_tratado_int is null)
			    SELECT s.cpf::bigint, s.id_espagoufacil_int
			    FROM SUB s
			    WHERE s.cpf <> ''''
			    ) t where t.id_espagoufacil_int = espagoufacil.id_espagoufacil_int;';
END;
$$;

--
-- TOC entry 1903 (class 1255 OID 26770)
-- Name: f_parcelamento_calculo(text, text, bigint, bigint, text, date, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_parcelamento_calculo(tabtemp text, tabtempparcelamento text, idcontrato bigint, idparcela bigint, scalculo text, datacalculo date, parcelamento bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro            RECORD;
  registroVenc        RECORD;
  sparcelamento	      BIGINT;
  vencimento          DATE;
  mes                 TEXT;

BEGIN
	RAISE NOTICE 'parcelamento_insercao';
	sparcelamento = 1;	
	vencimento = datacalculo;
	If vencimento is null Then
		vencimento = current_date;
	end if;

	LOOP
		RAISE NOTICE 'sparcelamento %', sparcelamento;
		RAISE NOTICE 'parcelamento %', parcelamento;
		
		IF sparcelamento > parcelamento THEN
			EXIT;
		END IF;
		
		EXECUTE 'INSERT INTO ' || tabtempparcelamento || ' (
					id_cbcalculoparcelaparcelamento_int,
                                        id_cbcalculoparcela_int,
                                        id_cbcontrato_int,
                                        id_cbparcela_int,
                                        plano_acordo_int,
                                        parcela_parcelamento_int,
                                        data_vencimento_dat,
                                        valor_parcelamento_num,
                                        perc_desconto_num,
                                        desconto_num,
                                        principal_num,
                                        cp_num,
                                        multa_num,
                                        juros_num,
                                        despesas_num,
                                        tarifa_num,
                                        ho_num,
                                        comissionamento_num,
                                        retido_num,
                                        acrescimo_num,
                                        pc_ho_num,
                                        pc_comissionamento_num,
                                        pc_cp_num,
                                        pc_multa_num,
                                        pc_juros_num,
                                        pc_mora_num,
                                        taxa_financiamento_num)
                                SELECT  NEXTVAL(''cbcalculoparcelaparcelamento_seq''),              --id_cbcalculoparcelaparcelamento_int,
                                        MAX(id_cbcalculoparcela_int),                               --id_cbcalculoparcela_int
                                        MAX(id_cbcontrato_int),                                     --id_cbcontrato_int
                                        MAX(id_cbparcela_int),                                      --id_cbparcela_int
                                        ' || parcelamento || ',                                     --plano_acordo_int
                                        ' || sparcelamento - 1 || ',                                --parcela_parcelamento_int
                                        (SELECT fc_diautil_calc(''' || vencimento || ''')),         --data_vencimento_dat
                                        ROUND(SUM(valor_total_num) / ' || parcelamento || ', 2),    --valor_parcelamento_num
                                        MAX(percentual_desconto_num),                               --perc_desconto_num
                                        ROUND(SUM(desconto_num) / ' || parcelamento || ', 2),       --desconto_num
                                        ROUND(SUM(principal_num) / ' || parcelamento || ', 2),      --principal_num
                                        ROUND(SUM(cp_num) / ' || parcelamento || ', 2),             --cp_num,
                                        ROUND(SUM(multa_num) / ' || parcelamento || ', 2),          --multa_num
                                        ROUND(SUM(juros_mora_num) / ' || parcelamento || ', 2),     --juros_num
                                        ROUND(SUM(notificacao_num) / ' || parcelamento || ', 2),    --despesas_num
                                        0,                                                          --tarifa_num
                                        ROUND(SUM(honorarios_num) / ' || parcelamento || ', 2),     --ho_num
                                        ROUND(SUM(comissionamento_num) / ' || parcelamento || ', 2),--comissionamento_num
                                        ROUND(SUM(retido_num) / ' || parcelamento || ', 2),         --retido_num
                                        ROUND(SUM(acrescimo_num) / ' || parcelamento || ', 2),      --acrescimo_num
                                        MAX(pc_ho_num),                                             --pc_ho_num
                                        MAX(pc_comissionamento_num),                                --pc_comissionamento_num
                                        MAX(pc_cp_num),                                             --pc_cp_num
                                        MAX(pc_multa_num),                                          --pc_multa_num
                                        MAX(pc_juros_num),                                          --pc_juros_num
                                        MAX(pc_mora_num),                                           --pc_mora_num
                                        0                                                           --taxa_financiamento_num
                                   FROM ' || tabtemp || '
                                  WHERE id_cbcalculoparcela_int = ' || scalculo || '
                                    AND id_cbcontrato_int = ' || idcontrato || '
                                    AND id_cbparcela_int = ' || idparcela ;

		mes = sparcelamento::TEXT || ' month';
                FOR registroVenc IN EXECUTE 'SELECT fc_diautil_calc((''' || datacalculo || '''::DATE + interval ''' || mes || ''')::DATE) vencimento'
                LOOP
			vencimento = registroVenc.vencimento;
		END LOOP;
		sparcelamento = sparcelamento + 1;
	END LOOP;
	RETURN '';
END;
$$;

--
-- TOC entry 1904 (class 1255 OID 26777)
-- Name: f_parcelamento_calculo_entrada(text, text, bigint, bigint, text, date, bigint, double precision); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_parcelamento_calculo_entrada(tabtemp text, tabtempparcelamento text, idcontrato bigint, idparcela bigint, scalculo text, datacalculo date, parcelamento bigint, entrada double precision) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro            RECORD;
  registroVenc        RECORD;
  sparcelamento	      BIGINT;
  vencimento          DATE;
  mes                 TEXT;
  peso		      DOUBLE PRECISION;
  totalacordo	      DOUBLE PRECISION;

BEGIN
	RAISE NOTICE 'parcelamento_insercao';
	sparcelamento = 1;	
	vencimento = datacalculo;
	If vencimento is null Then
		vencimento = current_date;
	end if;

	EXECUTE 'SELECT ROUND(SUM(valor_total_num),2) as total
		   FROM ' || tabtemp || '
                  WHERE id_cbcontrato_int = ' || idcontrato
        INTO totalacordo;

	LOOP
		RAISE NOTICE 'sparcelamento %', sparcelamento;
		RAISE NOTICE 'parcelamento %', parcelamento;
		
		IF sparcelamento > parcelamento THEN
			EXIT;
		END IF;
		
		FOR registro IN EXECUTE 'SELECT * FROM ' || tabtemp || ' WHERE id_cbcontrato_int = ' || idcontrato  LOOP
			
			IF sparcelamento = 1 THEN

				
				IF entrada > 0 THEN 
					peso = entrada/totalacordo;
				ELSE
					peso = totalacordo/totalacordo/parcelamento;
				END IF;
				
				
				

			ELSE
				IF entrada > 0 THEN 
					peso = ((totalacordo-entrada)/totalacordo)/(parcelamento-1);
				ELSE
					peso = totalacordo/totalacordo/parcelamento;
				END IF;

			END IF;

			EXECUTE 'INSERT INTO ' || tabtempparcelamento || ' (
						id_cbcalculoparcelaparcelamento_int,
						id_cbcalculoparcela_int,
						id_cbcontrato_int,
						id_cbparcela_int,
						plano_acordo_int,
						parcela_parcelamento_int,
						data_vencimento_dat,
						valor_parcelamento_num,
						perc_desconto_num,
						desconto_num,
						principal_num,
						cp_num,
						multa_num,
						juros_num,
						despesas_num,
						tarifa_num,
						ho_num,
						comissionamento_num,
						retido_num,
						acrescimo_num,
						pc_ho_num,
						pc_comissionamento_num,
						pc_cp_num,
						pc_multa_num,
						pc_juros_num,
						pc_mora_num,
						taxa_financiamento_num)
					SELECT  NEXTVAL(''cbcalculoparcelaparcelamento_seq''),              --id_cbcalculoparcelaparcelamento_int,
						MAX(id_cbcalculoparcela_int),                               --id_cbcalculoparcela_int
						MAX(id_cbcontrato_int),                                     --id_cbcontrato_int
						MAX(id_cbparcela_int),                                      --id_cbparcela_int
						' || parcelamento || ',                                     --plano_acordo_int
						' || sparcelamento - 1 || ',                                --parcela_parcelamento_int
						(SELECT fc_diautil_calc(''' || vencimento || ''')),         --data_vencimento_dat
						ROUND(SUM(valor_total_num) * ' || peso || ', 2),    --valor_parcelamento_num
						MAX(percentual_desconto_num),                               --perc_desconto_num
						ROUND(SUM(desconto_num) * ' || peso || ', 2),       --desconto_num
						ROUND(SUM(principal_num) * ' || peso || ', 2),      --principal_num
						ROUND(SUM(cp_num) * ' || peso || ', 2),             --cp_num,
						ROUND(SUM(multa_num) * ' || peso || ', 2),          --multa_num
						ROUND(SUM(juros_mora_num) * ' || peso || ', 2),     --juros_num
						ROUND(SUM(notificacao_num) * ' || peso || ', 2),    --despesas_num
						0,                                                          --tarifa_num
						ROUND(SUM(honorarios_num) * ' || peso || ', 2),     --ho_num
						ROUND(SUM(comissionamento_num) * ' || peso || ', 2),--comissionamento_num
						ROUND(SUM(retido_num) * ' || peso || ', 2),         --retido_num
						 ROUND(SUM(acrescimo_num) * ' || peso || ', 2),      --acrescimo_num
						MAX(pc_ho_num),                                             --pc_ho_num
						MAX(pc_comissionamento_num),                                --pc_comissionamento_num
						MAX(pc_cp_num),                                             --pc_cp_num
						MAX(pc_multa_num),                                          --pc_multa_num
						MAX(pc_juros_num),                                          --pc_juros_num
						MAX(pc_mora_num),                                           --pc_mora_num
						0                                                           --taxa_financiamento_num
					   FROM ' || tabtemp || '
					  WHERE id_cbcontrato_int = ' || idcontrato || '
					    AND id_cbparcela_int = ' || registro.id_cbparcela_int ;

		END LOOP;

		mes = sparcelamento::TEXT || ' month';
		FOR registroVenc IN EXECUTE 'SELECT fc_diautil_calc((''' || datacalculo || '''::DATE + interval ''' || mes || ''')::DATE) vencimento'
		LOOP
			vencimento = registroVenc.vencimento;
		END LOOP;
		sparcelamento = sparcelamento + 1;

	END LOOP;
	RETURN '';
END;
$$;

--
-- TOC entry 1905 (class 1255 OID 26781)
-- Name: f_parcelamento_entrada_padrao(text, text, bigint, bigint, text, date, bigint, double precision, double precision, double precision); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_parcelamento_entrada_padrao(tabtemp text, tabtempparcelamento text, idcontrato bigint, idparcela bigint, scalculo text, datacalculo date, parcelamento bigint, entrada double precision, valorparcela double precision, desconto double precision) RETURNS text
    LANGUAGE plpgsql
    AS $$

DECLARE
  sparcelamento	      BIGINT;
  vencimento          DATE;
  totalacordo         Double Precision; 
  peso                numeric;
  mes                 Text;
  registroVenc        Record;
BEGIN
    --RAISE NOTICE 'parcelamento_insercao';
	sparcelamento = 1;	
	vencimento = datacalculo;
    
	If vencimento is null Then
		vencimento = current_date;
	end if;

	EXECUTE 'SELECT ROUND(SUM(valor_total_num),2) as total
		    FROM ' || tabtemp || '
            WHERE id_cbcontrato_int = ' || idcontrato
    INTO totalacordo;

	LOOP
    
		IF sparcelamento > parcelamento THEN
			EXIT;
		END IF;

		IF sparcelamento = 1 THEN
			IF entrada > 0 THEN 
				peso = entrada/totalacordo;
			ELSE 
				peso = totalacordo/totalacordo/parcelamento;
			END IF; 	
		ELSE
			IF entrada > 0 THEN 
				peso = ((totalacordo-entrada)/totalacordo)/(parcelamento-1);
			ELSE
				peso = totalacordo/totalacordo/parcelamento;
			END IF;
		END IF;
		
		EXECUTE 'INSERT INTO ' || tabtempparcelamento || ' (
					id_cbcalculoparcelaparcelamento_int,
                                        id_cbcalculoparcela_int,
                                        id_cbcontrato_int,
                                        id_cbparcela_int,
                                        plano_acordo_int,
                                        parcela_parcelamento_int,
                                        data_vencimento_dat,
                                        valor_parcelamento_num,
                                        perc_desconto_num,
                                        desconto_num,
                                        principal_num,
                                        cp_num,
                                        multa_num,
                                        juros_num,
                                        despesas_num,
                                        tarifa_num,
                                        ho_num,
                                        comissionamento_num,
                                        retido_num,
                                        acrescimo_num,
                                        pc_ho_num,
                                        pc_comissionamento_num,
                                        pc_cp_num,
                                        pc_multa_num,
                                        pc_juros_num,
                                        pc_mora_num,
                                        taxa_financiamento_num)
                                SELECT  NEXTVAL(''cbcalculoparcelaparcelamento_seq''),              --id_cbcalculoparcelaparcelamento_int,
                                        MAX(id_cbcalculoparcela_int),                               --id_cbcalculoparcela_int
                                        MAX(id_cbcontrato_int),                                     --id_cbcontrato_int
                                        MAX(id_cbparcela_int),                                     --id_cbparcela_int
                                        ' || parcelamento || ',                                     --plano_acordo_int
                                        ' || sparcelamento - 1 || ',                                --parcela_parcelamento_int
                                        (SELECT fc_diautil_calc(''' || vencimento || ''')),         --data_vencimento_dat
                                        (SUM(valor_total_num) * ' || peso || '), --valor_parcelamento_num
                                        MAX(percentual_desconto_num),                               --perc_desconto_num
                                        ROUND(SUM(desconto_num) * ' || peso || ', 2),               --desconto_num
                                        ROUND(SUM(principal_num) * ' || peso || ', 2),              --principal_num
                                        ROUND(SUM(cp_num), 2),             		                        --cp_num,
                                        ROUND(SUM(multa_num) * ' || peso || ', 2),                  --multa_num
                                        ROUND(SUM(juros_mora_num) * ' || peso || ', 2),             --juros_num
                                        ROUND(SUM(notificacao_num) * ' || peso || ', 2),            --despesas_num
                                        0,                                                          --tarifa_num
                                        ROUND(SUM(honorarios_num) * ' || peso || ', 2),             --ho_num
                                        ROUND(SUM(comissionamento_num) * ' || peso || ', 2),        --comissionamento_num
                                        ROUND(SUM(retido_num) * ' || peso || ', 2),                 --retido_num
                                        ROUND(SUM(acrescimo_num) * ' || peso || ', 2),              --acrescimo_num
                                        MAX(pc_ho_num),                                             --pc_ho_num
                                        MAX(pc_comissionamento_num),                                --pc_comissionamento_num
                                        MAX(pc_cp_num),                                             --pc_cp_num
                                        MAX(pc_multa_num),                                          --pc_multa_num
                                        MAX(pc_juros_num),                                          --pc_juros_num
                                        MAX(pc_mora_num),                                           --pc_mora_num
                                        0                                                           --taxa_financiamento_num
                                   FROM ' || tabtemp || '
                                  WHERE id_cbcontrato_int = ' || idcontrato || '
                                  AND id_cbparcela_int = ' || idparcela ;
                                    
		        mes = sparcelamento::TEXT || ' month';
                FOR registroVenc IN EXECUTE 'SELECT fc_diautil_calc((''' || datacalculo || '''::DATE + interval ''' || mes || ''')::DATE) vencimento'
                LOOP
			        vencimento = registroVenc.vencimento;
		        END LOOP;
		        sparcelamento = sparcelamento + 1;
	END LOOP;

	RETURN '';
END;

$$;

--
-- TOC entry 1906 (class 1255 OID 26788)
-- Name: f_registro_json(bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_registro_json(iditembordero bigint, cliente text) RETURNS json
    LANGUAGE plpgsql
    AS $$
                        DECLARE
                        r_json json;
                        BEGIN

                                WITH sub AS(
                                        SELECT  f_pagoufacil_boleto_dadosregistro::json->>'IdCertificado' AS IdCertificado,
                                                f_pagoufacil_boleto_dadosregistro::json->>'SenhaCertificado' AS SenhaCertificado,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CodEstacao' AS CodEstacao,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CodConvenio' AS CodConvenio,
                                                f_pagoufacil_boleto_dadosregistro::json->>'TipoPessoaBeneficiario' AS TipoPessoaBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CpfCnpjBeneficiario' AS CpfCnpjBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'SequencialRequisicao' AS SequencialRequisicao,
                                                f_pagoufacil_boleto_dadosregistro::json->>'EnderecoBeneficiario' AS EnderecoBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'NumeroEnderecoBeneficiario' AS NumeroEnderecoBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CepEnderecoBeneficiario' AS CepEnderecoBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'BairroEnderecoBeneficiario' AS BairroEnderecoBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'MunicipioBeneficiario' AS MunicipioBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'UfBeneficiario' AS UfBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'DataSequencialRequisicao' AS DataSequencialRequisicao,
                                                f_pagoufacil_boleto_dadosregistro::json->>'TipoAceite' AS TipoAceite,
                                                f_pagoufacil_boleto_dadosregistro::json->>'IdProduto' AS IdProduto,
                                                f_pagoufacil_boleto_dadosregistro::json->>'Agencia' AS Agencia,
                                                f_pagoufacil_boleto_dadosregistro::json->>'ContaBeneficiario' AS ContaBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'DvContaBeneficiario' AS DvContaBeneficiario,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CodigoBanco' AS CodigoBanco,
                                                f_pagoufacil_boleto_dadosregistro::json->>'SeuNumero' AS SeuNumero,
                                                f_pagoufacil_boleto_dadosregistro::json->>'NossoNumero' AS NossoNumero,
                                                f_pagoufacil_boleto_dadosregistro::json->>'DvNossoNumero' AS DvNossoNumero,
                                                f_pagoufacil_boleto_dadosregistro::json->>'DataEmissao' AS DataEmissao,
                                                f_pagoufacil_boleto_dadosregistro::json->>'DataVencimento' AS DataVencimento,
                                                f_pagoufacil_boleto_dadosregistro::json->>'DataLimitePagamento' AS DataLimitePagamento,
                                                f_pagoufacil_boleto_dadosregistro::json->>'TipoPagamento' AS TipoPagamento,
                                                f_pagoufacil_boleto_dadosregistro::json->>'ValorNominalTitulo' AS ValorNominalTitulo,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CodigoEspecieTitulo' AS CodigoEspecieTitulo,
                                                f_pagoufacil_boleto_dadosregistro::json->>'TipoDesconto' AS TipoDesconto,
                                                f_pagoufacil_boleto_dadosregistro::json->>'NomePagador' AS NomePagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'EnderecoPagador' AS EnderecoPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'NumeroEnderecoPagador' AS NumeroEnderecoPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CepPagador'  AS CepPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'BairroPagador'  AS BairroPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'MunicipioPagador' AS MunicipioPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'UfPagador' AS UfPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CodIndCpfCnpjPagador'  AS CodIndCpfCnpjPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'CpfCnpjPagador'  AS CpfCnpjPagador,
                                                f_pagoufacil_boleto_dadosregistro::json->>'EmailPagador' AS EmailPagador
                                        FROM f_pagoufacil_boleto_dadosregistro(iditembordero, cliente)
                                )
                                SELECT row_to_json(s.*)
                                INTO r_json
                                FROM (
                                        SELECT  IdCertificado,
                                                SenhaCertificado,
                                                (SELECT json_build_array(t)
                                                FROM (
                                                        SELECT  CodEstacao,
                                                                CodConvenio,
                                                                TipoPessoaBeneficiario,
                                                                CpfCnpjBeneficiario,
                                                                SequencialRequisicao,
                                                                EnderecoBeneficiario,
                                                                NumeroEnderecoBeneficiario,
                                                                CepEnderecoBeneficiario,
                                                                BairroEnderecoBeneficiario,
                                                                MunicipioBeneficiario,
                                                                UfBeneficiario,
                                                                DataSequencialRequisicao,
                                                                TipoAceite,
                                                                IdProduto,
                                                                Agencia,
                                                                ContaBeneficiario,
                                                                DvContaBeneficiario,
                                                                CodigoBanco,
                                                                SeuNumero,
                                                                NossoNumero,
                                                                DvNossoNumero,
                                                                DataEmissao,
                                                                DataVencimento,
                                                                DataLimitePagamento,
                                                                TipoPagamento,
                                                                ValorNominalTitulo,
                                                                CodigoEspecieTitulo,
                                                                TipoDesconto,
                                                                NomePagador,
                                                                EnderecoPagador,
                                                                NumeroEnderecoPagador,
                                                                CepPagador,
                                                                BairroPagador,
                                                                MunicipioPagador,
                                                                UfPagador,
                                                                CodIndCpfCnpjPagador,
                                                                CpfCnpjPagador,
                                                                EmailPagador
                                                        FROM sub
                                                ) t) as ListDadosRegistroEntrada
                                        FROM sub
                                ) s;
                
                                RETURN r_json;
                        END;
                        $$;

--
-- TOC entry 1907 (class 1255 OID 26792)
-- Name: f_replica_emails_carteiras(integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_replica_emails_carteiras(idgecliente integer) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  registro		RECORD;
  tSqlF			TEXT;
  horaInicioSelectDW	TIME(0);    
  horaFimSelectDW	TIME(0);
  horaInicioInsertBase	TIME(0);    
  horaFimInsertBase	TIME(0);
  
BEGIN
	tSqlF := '';

	horaInicioSelectDW = clock_timestamp();
	RAISE NOTICE 'Inicio Select DW: %',horaInicioSelectDW;
	
	tSqlF := '' ||
	'
		SELECT * FROM dblink(''dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv ''::text,

	''
		SELECT 
			c.id_gecliente_int, 
			abs_cpf(c.cpf_str) as cpf_str,
			g.email_str,
			g.geqltipoemail_str,
			''''9 - Indefinido'''' as classificacao_str
		FROM cbcontratodw c
		JOIN geqlemaildw g ON g.cpf_str = c.cpf_str
		WHERE c.id_gecliente_int = ' || $1 || ' 

	'') l (				
		id_gecliente_int	bigint,
		cpf_str			text,
		email_str		character varying(255),
		geqltipoemail_str	character varying(30),
		classificacao_str	text
	)
	';
											
	EXECUTE 'CREATE TEMPORARY TABLE tmp_replica_email AS ' || tSqlF;		
	EXECUTE 'CREATE INDEX idx_tmp_replica_email_01 ON tmp_replica_email(cpf_str, email_str);';

	horaFimSelectDW = clock_timestamp();
	RAISE NOTICE 'Fim Select DW: %',horaFimSelectDW;

	horaInicioInsertBase = clock_timestamp();
	RAISE NOTICE 'Inicio Insert Base: %',horaInicioInsertBase;
	-- Insert telefones
	INSERT INTO geqlemail(
			id_geqlcliente_int,
			id_geqltipoemail_int,
			email_str,
			classificacao_str,
			tabela_origem_str,
			id_geusuario_int,
			tstamp,
			excluido_bit
	)
	(
		SELECT DISTINCT ON (gc.id_geqlcliente_int, tmp.email_str)
			gc.id_geqlcliente_int,
			(select id_geqltipoemail_int from geqltipoemail gt WHERE trim(gt.codigo_str) = trim(tmp.geqltipoemail_str) LIMIT 1) as id_geqltipoemail_int,
			tmp.email_str,
			tmp.classificacao_str,
			'basao' as tabela_origem_str,
			1195 as id_geusuario_int,
			statement_timestamp(),
			'0'::bit
		FROM tmp_replica_email tmp
		JOIN geqlcliente gc on abs_cpf(gc.cpf_str) = tmp.cpf_str
		WHERE NOT EXISTS (select 1 from geqlemail t
					where t.id_geqlcliente_int = gc.id_geqlcliente_int
					and t.email_str = tmp.email_str)
	);
					
	EXECUTE 'DROP TABLE tmp_replica_email';

	horaFimInsertBase = clock_timestamp();
	RAISE NOTICE 'Fim Insert Base %',horaFimInsertBase;

	-- Gera log na eslogdw no servidor 10.20.11.147 base dw
	PERFORM 
		dblink_exec
			(
				'dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv'
			,	'INSERT INTO eslogdw(
						id_estipologdw_int, 
						id_gecliente_int, 
						data_log_dat, 
						inicio_tim, 
						fim_tim)
				 VALUES (
				 	10,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioSelectDW || ''', 
					''' || horaFimSelectDW || '''),
					(11,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioInsertBase || ''', 
					''' || horaFimInsertBase || ''')'
			);
	
	RETURN '';

END;
$_$;

--
-- TOC entry 1908 (class 1255 OID 26799)
-- Name: f_replica_telefones_carteiras(integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_replica_telefones_carteiras(idgecliente integer) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  registro		RECORD;
  tSqlF			TEXT;
  horaInicioSelectDW	TIME(0);    
  horaFimSelectDW	TIME(0);
  horaInicioUpdateBase	TIME(0);    
  horaFimUpdateBase	TIME(0);
  horaInicioInsertBase	TIME(0);    
  horaFimInsertBase	TIME(0);
  
BEGIN
	tSqlF := '';
	horaInicioSelectDW = clock_timestamp();
	RAISE NOTICE 'Inicio Select DW: %',horaInicioSelectDW;
	
	tSqlF := '' ||
	'
		SELECT * FROM dblink(''dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv ''::text,

	''
		SELECT 
			c.id_gecliente_int, 
			abs_cpf(c.cpf_str) as cpf_str,
			g.contato_str,
			g.geqltipocontato_str,
			''''9 - Indefinido'''' as classificacao_str,
			g.score_int,
			g.data_score_dat
		FROM cbcontratodw c
		JOIN geqlcontatodw g ON g.cpf_str = c.cpf_str
		WHERE c.id_gecliente_int = ' || $1 || '

	'') l (				
		id_gecliente_int	int,
		cpf_str			text,
		contato_str		character varying(60),
		geqltipocontato_str	character varying(60),
		classificacao_str	text,
		score_int		text,
		data_score_dat		date
	)
	';
											
	EXECUTE 'CREATE TEMPORARY TABLE tmp_replica_telefones AS ' || tSqlF;		
	EXECUTE 'CREATE INDEX idx_tmp_replica_telefones_01 ON tmp_replica_telefones(cpf_str, contato_str);';

	horaFimSelectDW = clock_timestamp();
	RAISE NOTICE 'Fim Select DW: %',horaFimSelectDW;

	horaInicioUpdateBase = clock_timestamp();
	RAISE NOTICE 'Inicio Update Base: %',horaInicioUpdateBase;	

	-- Update Score
	EXECUTE 'UPDATE geqlcontato SET 
			score_int = tmp.score_int::smallint,
			data_score_dat = tmp.data_score_dat		
		FROM tmp_replica_telefones tmp
		JOIN geqlcliente gc ON (abs_cpf(gc.cpf_str) = tmp.cpf_str)
		WHERE gc.id_geqlcliente_int = geqlcontato.id_geqlcliente_int
		AND geqlcontato.contato_str = tmp.contato_str AND (tmp.data_score_dat > geqlcontato.data_score_dat OR (geqlcontato.score_int IS NULL AND tmp.score_int IS NOT NULL))
		';
		
	horaFimUpdateBase = clock_timestamp();
	RAISE NOTICE 'Fim Update Base: %',horaFimUpdateBase;

	horaInicioInsertBase = clock_timestamp();
	RAISE NOTICE 'Inicio Insert Base: %',horaInicioInsertBase;

	-- Insert telefones
	EXECUTE 'INSERT INTO geqlcontato(
			id_geqlcliente_int,
			id_geqltipocontato_int,
			contato_str,
			classificacao_str,
			tabela_origem_str,
			id_geusuario_int,
			tstamp,
			tstamp_inclusao,
			excluido_bit,
			score_int,
			data_score_dat
	)
	(
		SELECT DISTINCT ON (gc.id_geqlcliente_int, tmp.contato_str)
			gc.id_geqlcliente_int,
			(select id_geqltipocontato_int from geqltipocontato gt WHERE trim(gt.codigo_str) = trim(tmp.geqltipocontato_str) ORDER BY ativo_bit DESC LIMIT 1) as id_geqltipocontato_int,
			tmp.contato_str,
			tmp.classificacao_str,
			''basao'' as tabela_origem_str,
			1195 as id_geusuario_int,
			statement_timestamp(),
			statement_timestamp(),
			''0''::bit,
			tmp.score_int::smallint,
			tmp.data_score_dat
		FROM tmp_replica_telefones tmp
		JOIN geqlcliente gc on abs_cpf(gc.cpf_str) = tmp.cpf_str
		WHERE NOT EXISTS (select 1 from geqlcontato t
					where t.id_geqlcliente_int = gc.id_geqlcliente_int
					and t.contato_str = tmp.contato_str)
	)
	';
					
	EXECUTE 'DROP TABLE tmp_replica_telefones';

	horaFimInsertBase = clock_timestamp();
	RAISE NOTICE 'Fim Insert Base %',horaFimInsertBase;

	-- Gera log na eslogdw no servidor 10.20.11.147 base dw
	PERFORM 
		dblink_exec
			(
				'dbname=dw port=5432 host=10.20.11.147 user=marisa-user password=Us3KvJ4XDv '
			,	'INSERT INTO eslogdw(
					    id_estipologdw_int, 
						id_gecliente_int, 
						data_log_dat, 
						inicio_tim, 
						fim_tim)
				 VALUES (
				 	5,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioSelectDW || ''', 
					''' || horaFimSelectDW || '''),
					(6,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioUpdateBase || ''', 
					''' || horaFimUpdateBase || '''),
					(7,
					' || idgecliente || ', 
					CURRENT_DATE, 
					''' || horaInicioInsertBase || ''', 
					''' || horaFimInsertBase || ''') '
			);
	
	RETURN '';

END;
$_$;

--
-- TOC entry 1909 (class 1255 OID 26803)
-- Name: f_retirada_pirelli(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_retirada_pirelli(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	cont     int8;
	rsDados RECORD;
	rsDados2 RECORD;
	sRetorno varchar;

BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN		

	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_contrato';
	        EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_parcela';
			 
		-- **** CRIA TEMPORARIA DE CONTRATO e PARCELA
		EXECUTE 'CREATE TABLE ' || tabtemp || '_contrato AS

			SELECT  distinct on (abs_cpf(t.cgc_cpf))	
				     
				CASE WHEN c.id_cbcontrato_int IS NOT NULL THEN c.id_cbcontrato_int 
				     ELSE null::bigint
				     END id_cbcontrato_int,
				abs_cpf(t.cgc_cpf) as contrato_str

				FROM ' || tabtemp || ' t
				LEFT JOIN ' || tabelafilha || ' c ON abs_cpf(t.cgc_cpf) = abs_cpf(c.contrato_str)
				WHERE t.chave_str = ''' || chave || ''';

		        CREATE INDEX ' || tabtemp || '_contrato_idx1
		        ON ' || tabtemp || '_contrato
		        USING btree
		        (id_cbcontrato_int);	
			

		';

		raise notice 'contrato';

		EXECUTE 'CREATE TABLE ' || tabtemp || '_parcela AS 

			SELECT 
  				CASE WHEN p.id_cbparcela_int IS NOT NULL THEN p.id_cbparcela_int 
				     ELSE null::bigint
				     END id_cbparcela_int,
				c.id_cbcontrato_int,
				p.parcela_int,
				t.nota_fiscal as nota_fiscal_str,
				abs_cpf(t.cgc_cpf) as contrato_str							

			FROM ' || tabtemp || ' t
			INNER JOIN ' || tabtemp || '_contrato c ON abs_cpf(t.cgc_cpf) = c.contrato_str
			LEFT JOIN cbparcela p ON c.id_cbcontrato_int = p.id_cbcontrato_int
				             AND p.nota_fiscal_str = t.nota_fiscal
				             AND p.data_vencimento_dat = to_date(substr(vencimento, 7,4) || ''-'' || substr(vencimento, 4,2) || ''-'' || substr(vencimento, 1,2),''yyyy-mm-dd'') 
			WHERE t.chave_str = ''' || chave || '''
			  AND c.id_cbcontrato_int is not null;';

		raise notice 'parcela';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	

		EXECUTE 'UPDATE ' || tabtemp || '
		         SET _inconsistencia = ''CONTRATO '' || cgc_cpf || '' NAO LOCALIZADO NO NPCOB.''
		         FROM ' || tabtemp || '_contrato c
		         WHERE abs_cpf(c.contrato_str) = abs_cpf(cgc_cpf)
		           AND c.id_cbcontrato_int is null;
		         ';

		EXECUTE 'UPDATE ' || tabtemp || '
		         SET _inconsistencia = ''CONTRATO '' || cgc_cpf || '' - PARCELA (NOTA '' || nota_fiscal || '') - VENCIMENTO '' || vencimento || '' NAO LOCALIZADA NO NPCOB.''
		         FROM ' || tabtemp || '_parcela p
		         WHERE abs_cpf(p.contrato_str) = abs_cpf(cgc_cpf)
		           AND p.id_cbparcela_int is null;
		         ';
							
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
				 

			
			FOR rsDados IN EXECUTE 'SELECT t.id_cbparcela_int,p.parcela_int, t.contrato_str
						FROM ' || tabtemp || '_parcela t
						INNER JOIN cbparcela p ON p.id_cbparcela_int = t.id_cbparcela_int
						WHERE t.id_cbparcela_int is not null
						  AND p.situacao_int not in (4,6)'
			LOOP

				EXECUTE 'UPDATE cbparcela
					 SET situacao_int = 6
					 WHERE id_cbparcela_int = ' || rsDados.id_cbparcela_int;
				

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Parcela cancelada pela retirada'',
							''' || rsDados.contrato_str || ''',
							' || rsDados.parcela_int || '::bigint,
							''Parcela citada no arquivo de retirada de hoje'')';

							raise notice 'baixando parcelas...';

			END LOOP;	

			FOR rsDados IN EXECUTE 'SELECT c.id_cbcontrato_int, c.contrato_str
						FROM  ' || tabelafilha || ' c
						WHERE id_cbsituacaocontrato_int <> 6 
						  AND (SELECT COUNT(*) FROM cbparcela p WHERE p.id_cbcontrato_int = c.id_cbcontrato_int and p.situacao_int not in (4,6) )= 0 '
			LOOP

				EXECUTE 'UPDATE ' || tabelafilha || '
					 SET id_cbsituacaocontrato_int = 6
					 WHERE id_cbcontrato_int = ' || rsDados.id_cbcontrato_int;

				EXECUTE 'INSERT INTO gehistoricousuario
							(id_geusuario_int,
							id_gecliente_int,
							id_geaplicacao_int,
							data_hora_dat,
							evento_str,
							contrato_str,
							parcela_int,
							obs_txt) VALUES (

							' || idgeusuario || ',
							' || idgecliente || ',
							604,
							current_timestamp,
							''Contrato baixado'',
							''' || rsDados.contrato_str || ''',
							0::bigint,
							''Contrato nï¿½o possuï¿½a parcelas em aberto, foi baixado'')';

							raise notice 'baixando contratos sem parcelas...';

			END LOOP;				

						
				    				    
	END IF;

	RETURN  'OK';
END;
$$;

--
-- TOC entry 1910 (class 1255 OID 26810)
-- Name: f_selecfonesfilaaltitude(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_selecfonesfilaaltitude(scodprocess character varying, saplicagrupo character varying, sgrupos character varying, sscore character varying, sclassificacao character varying, squerytratados character varying, vprioridade character varying, sexcecao character varying, vchave character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	contcontrato	bigint;
	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	sGrupo1		varchar;
	sGrupo2		varchar;
	sGrupo3		varchar;
	sOrdena		varchar;

BEGIN

	/*-------------------------------------------
	  gbueno - 07/12/2015
	  -------------------------------------------
	  Cria as colunas uf e ddd para que sejam preenchidas em relacao ao telefone melhor classificado
	  ficaram para ser preenchidas nesta funcao de telefones ao ives da funcao com as variaveis, para que nao seja necessario
	  consultar a qualidade de cadastro nos dois locais, assim temos uma performance melhor.
	  Como a funcao ï¿½ padrï¿½o em todas as carteiras e nem todas usam esses campos como variaveis, foi necessario verificar antes
	  se as colunas existem e cria-las onde nao existem
	-------------------------------------------*/
	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaltitude'' and e.column_name = ''ddd'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaltitude ADD COLUMN ddd varchar;  ';
	END IF;

	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaltitude'' and e.column_name = ''uf'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaltitude ADD COLUMN uf varchar;  ';
	END IF;

	/*-------------------------------------------*/
	
	raise notice 'score %', sscore;
	/* Triare - 1.013.207: Ajuste para desconsiderar a ordenaï¿½ï¿½o pelo score */
	IF sscore <> '' THEN 
		sOrdena := ' score desc, ordemclass, origemprioridade, prioridade_int';
	ELSE 
		sOrdena := ' ordemclass, origemprioridade, prioridade_int';
	END IF;

	raise notice 'criando temp';

	/*cria temporaria com todos os telefones que se enquadram na estratï¿½gia de filtros*/

	EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaltitude' || scodprocess || ' as
		SELECT fila.id_cbcontrato_int, contato_str, classificacao_str, c.id_geqltipocontato_int, gr.id_geqlgrupotipocontato_int ,
		       c.id_geqlcliente_int, coalesce(c.score_int,0) score, tipo.codigo_str,
			CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
			     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
			     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
			     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
			ELSE ''O'' END As origem, COALESCE(tipo.prioridade_int,99) as prioridade_int,
			coalesce(c.tstamp_inclusao, ''1900-01-01''::timestamp) as data_tratamento, null::bigint as origemprioridade, null::bigint ordemclass
		FROM geqlcontrato qc
		INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
		LEFT JOIN geqltipocontatogrupotipocontato gr on gr.id_geqltipocontato_int = c.id_geqltipocontato_int
		LEFT JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
		INNER JOIN escontrolefilaaltitude fila ON fila.id_cbcontrato_int = qc.id_cbcontrato_int
		' || CASE WHEN sExcecao = 'F' THEN '
				INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str AND tmpcon.chave_str = ''' || vchave || '''' 
		ELSE '' END || '
		WHERE fila.codfila_str = ''' || scodprocess || '''
		ANd c.classificacao_str in (' || sClassificacao || ')
		AND coalesce(c.excluido_bit,0::bit) = 0::bit
		' ||  CASE WHEN saplicagrupo = '1' THEN ' AND gr.id_geqlgrupotipocontato_int in (' || sGrupos || ')' 
		           ELSE ' AND c.id_geqltipocontato_int in (' || sgrupos || ')' END || '
		' || sQueryTratados || '
		' || CASE WHEN sscore <> '' THEN ' AND coalesce(c.score_int,0) '  || sScore ELSE '' END;

		raise notice 'temp criada';

	/*atualiza os campos de ordenacao para depois limitar e posicionar os telefones no arquivo de fila*/
	EXECUTE 'UPDATE _tmpfonesfilaaltitude' || scodprocess || ' 
		 SET ordemclass = CASE WHEN classificacao_str = ''1 - Excelente'' THEN 1
		                       WHEN classificacao_str = ''2 - Bom'' THEN 2
		                       WHEN classificacao_str = ''9 - Indefinido'' THEN 3
		                  ELSE 4 END,
		     origemprioridade = CASE WHEN origem = ''' || vprioridade || ''' THEN 1
				  ELSE 2 END
		               
	';

	raise notice 'acerto de ordem';
	

	/*cria indices para otimizar as consultas*/	
	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx1
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(id_cbcontrato_int);';

	raise notice 'indice1';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx2
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(id_geqlgrupotipocontato_int);';

	raise notice 'indice2';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx3
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(id_geqltipocontato_int);';

	raise notice 'indice3';

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx4
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(score desc, ordemclass, origemprioridade, prioridade_int);';

	raise notice 'indice4';	

	contcontrato := 0;

	IF saplicagrupo = '1' THEN

		sGrupo1 := split_part(sGrupos,',',1);
		sGrupo2	:= split_part(sGrupos,',',2);
		sGrupo3	:= split_part(sGrupos,',',3);

		/*cria uma tmp para cada grupo, jï¿½ ordenando os fones nas posicoes estratï¿½gicas dos grupos*/

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaltitude' || scodprocess || '_grupo1 as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaltitude' || scodprocess || ' 
			       where id_geqlgrupotipocontato_int = ' || sGrupo1 || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone1" text, "fone2" text, "fone3" text, "fone4" text, "fone5" text) order by 1';

		raise notice 'tabela grupo 1';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_grupo1_idx1
			 ON _tmpfonesfilaaltitude' || scodprocess || '_grupo1
			 USING btree
			(id_cbcontrato_int);';

		raise notice 'indice grupo 1';

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaltitude' || scodprocess || '_grupo2 as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaltitude' || scodprocess || ' 
			       where id_geqlgrupotipocontato_int = ' || sGrupo2 || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone6" text, "fone7" text, "fone8" text, "fone9" text, "fone10" text) order by 1';

		raise notice 'tabela grupo 2';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_grupo2_idx1
			 ON _tmpfonesfilaaltitude' || scodprocess || '_grupo2
			 USING btree
			(id_cbcontrato_int);';

		raise notice 'indice grupo 2';

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaltitude' || scodprocess || '_grupo3 as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaltitude' || scodprocess || ' 
			       where id_geqlgrupotipocontato_int = ' || sGrupo3 || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone11" text, "fone12" text, "fone13" text, "fone14" text, "fone15" text) order by 1';

		raise notice 'tabela grupo 3';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_grupo3_idx1
			 ON _tmpfonesfilaaltitude' || scodprocess || '_grupo3
			 USING btree
			(id_cbcontrato_int);';

		raise notice 'indice grupo 3';

		/*atualiza os telefones na tabela fisica de fila, jï¿½ posicionados de acordo com os grupos*/
		
		EXECUTE 'UPDATE escontrolefilaaltitude
					 SET telefone1 = ''+55('' || substr(t.fone1,1,2) || '')'' || substr(t.fone1,3),
					     telefone2 = ''+55('' || substr(t.fone2,1,2) || '')'' || substr(t.fone2,3),
					     telefone3 = ''+55('' || substr(t.fone3,1,2) || '')'' || substr(t.fone3,3),
					     telefone4 = ''+55('' || substr(t.fone4,1,2) || '')'' || substr(t.fone4,3),
					     telefone5 = ''+55('' || substr(t.fone5,1,2) || '')'' || substr(t.fone5,3)
					 FROM _tmpfonesfilaaltitude' || scodprocess || '_grupo1 t
					 WHERE escontrolefilaaltitude.id_cbcontrato_int =  t.id_cbcontrato_int  
					   AND codfila_str = ''' || scodprocess || '''';

		raise notice 'update grupo 1';

		EXECUTE 'UPDATE escontrolefilaaltitude
					 SET telefone6 = ''+55('' || substr(t.fone6,1,2) || '')'' || substr(t.fone6,3),
					     telefone7 = ''+55('' || substr(t.fone7,1,2) || '')'' || substr(t.fone7,3),
					     telefone8 = ''+55('' || substr(t.fone8,1,2) || '')'' || substr(t.fone8,3),
					     telefone9 = ''+55('' || substr(t.fone9,1,2) || '')'' || substr(t.fone9,3),
					     telefone10 = ''+55('' || substr(t.fone10,1,2) || '')'' || substr(t.fone10,3)
					 FROM _tmpfonesfilaaltitude' || scodprocess || '_grupo2 t
					 WHERE escontrolefilaaltitude.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

		raise notice 'update grupo 2';

		EXECUTE 'UPDATE escontrolefilaaltitude
					 SET telefone11 = ''+55('' || substr(t.fone11,1,2) || '')'' || substr(t.fone11,3),
					     telefone12 = ''+55('' || substr(t.fone12,1,2) || '')'' || substr(t.fone12,3),
					     telefone13 = ''+55('' || substr(t.fone13,1,2) || '')'' || substr(t.fone13,3),
					     telefone14 = ''+55('' || substr(t.fone14,1,2) || '')'' || substr(t.fone14,3),
					     telefone15 = ''+55('' || substr(t.fone15,1,2) || '')'' || substr(t.fone15,3)
					 FROM _tmpfonesfilaaltitude' || scodprocess || '_grupo3 t
					 WHERE escontrolefilaaltitude.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

		raise notice 'update grupo 3';

		/*grava o ddd do melhor telefone classificado*/
		EXECUTE ' UPDATE escontrolefilaaltitude
			  SET ddd = coalesce(substr(telefone1,5,2), substr(telefone2,5,2), substr(telefone3,5,2), 
					     substr(telefone4,5,2), substr(telefone5,5,2), substr(telefone6,5,2),
					     substr(telefone7,5,2), substr(telefone8,5,2), substr(telefone9,5,2), 
					     substr(telefone10,5,2), substr(telefone11,5,2), substr(telefone12,5,2), 
					     substr(telefone13,5,2), substr(telefone14,5,2), substr(telefone15,5,2))
			  WHERE codfila_str = ''' || sCodprocess || '''';

		/*grava uf do ddd do melhor telefone classificado*/
		EXECUTE ' UPDATE escontrolefilaaltitude
				SET uf = CASE WHEN coalesce(uf,'''') = '''' THEN fc_dddxuf(ddd) ELSE uf END
			   WHERE codfila_str = ''' || sCodprocess || '''';
			

	ELSE

		/*quando nao ï¿½ usada a estrategia de grupos, cria apenas uma tmp*/

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaltitude' || scodprocess || '_todos as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaltitude' || scodprocess || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone1" text, "fone2" text, "fone3" text, "fone4" text, "fone5" text, "fone6" text, "fone7" text, "fone8" text, "fone9" text, "fone10" text, "fone11" text, "fone12" text, "fone13" text, "fone14" text, "fone15" text) order by 1';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_todos_idx1
			 ON _tmpfonesfilaaltitude' || scodprocess || '_todos
			 USING btree
			(id_cbcontrato_int);';

		/*atualiza os telefones na tabela fisica de fila, jï¿½ posicionados de acordo com os tipos de telefone*/

		EXECUTE 'UPDATE escontrolefilaaltitude
					 SET telefone1 = ''+55('' || substr(t.fone1,1,2) || '')'' || substr(t.fone1,3),
					     telefone2 = ''+55('' || substr(t.fone2,1,2) || '')'' || substr(t.fone2,3),
					     telefone3 = ''+55('' || substr(t.fone3,1,2) || '')'' || substr(t.fone3,3),
					     telefone4 = ''+55('' || substr(t.fone4,1,2) || '')'' || substr(t.fone4,3),
					     telefone5 = ''+55('' || substr(t.fone5,1,2) || '')'' || substr(t.fone5,3),
					     telefone6 = ''+55('' || substr(t.fone6,1,2) || '')'' || substr(t.fone6,3),
					     telefone7 = ''+55('' || substr(t.fone7,1,2) || '')'' || substr(t.fone7,3),
					     telefone8 = ''+55('' || substr(t.fone8,1,2) || '')'' || substr(t.fone8,3),
					     telefone9 = ''+55('' || substr(t.fone9,1,2) || '')'' || substr(t.fone9,3),
					     telefone10 = ''+55('' || substr(t.fone10,1,2) || '')'' || substr(t.fone10,3),
					     telefone11 = ''+55('' || substr(t.fone11,1,2) || '')'' || substr(t.fone11,3),
					     telefone12 = ''+55('' || substr(t.fone12,1,2) || '')'' || substr(t.fone12,3),
					     telefone13 = ''+55('' || substr(t.fone13,1,2) || '')'' || substr(t.fone13,3),
					     telefone14 = ''+55('' || substr(t.fone14,1,2) || '')'' || substr(t.fone14,3),
					     telefone15 = ''+55('' || substr(t.fone15,1,2) || '')'' || substr(t.fone15,3)
					 FROM _tmpfonesfilaaltitude' || scodprocess || '_todos t
					 WHERE escontrolefilaaltitude.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

		EXECUTE ' UPDATE escontrolefilaaltitude
			  SET ddd = coalesce(substr(telefone1,5,2), substr(telefone2,5,2), substr(telefone3,5,2), 
					     substr(telefone4,5,2), substr(telefone5,5,2), substr(telefone6,5,2),
					     substr(telefone7,5,2), substr(telefone8,5,2), substr(telefone9,5,2), 
					     substr(telefone10,5,2), substr(telefone11,5,2), substr(telefone12,5,2), 
					     substr(telefone13,5,2), substr(telefone14,5,2), substr(telefone15,5,2))
			  WHERE codfila_str = ''' || sCodprocess || '''';

		EXECUTE ' UPDATE escontrolefilaaltitude
				SET uf = CASE WHEN coalesce(uf,'''') = '''' THEN fc_dddxuf(ddd) ELSE uf END
			   WHERE codfila_str = ''' || sCodprocess || '''';

	END IF;

	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_grupo1';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_grupo2';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_grupo3';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_todos';

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1911 (class 1255 OID 26816)
-- Name: f_selecfonesfilaaltitudev8(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_selecfonesfilaaltitudev8(scodprocess character varying, saplicagrupo character varying, sgrupos character varying, sscore character varying, sclassificacao character varying, squerytratados character varying, vprioridade character varying, sexcecao character varying, vchave character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	rsAux		RECORD;
	iQtdeGrupo	integer;
	iLoop		integer;
	iPosInicial	integer;
	iTamanho	integer;
	iIdGrupo	bigint;
	sOrdena		varchar;
	sAux		varchar;
	iquantidade	bigint;
	contcontrato	bigint;

BEGIN
	
	/*-------------------------------------------
	  gbueno - 07/12/2015
	  -------------------------------------------
	  Cria as colunas uf e ddd para que sejam preenchidas em relacao ao telefone melhor classificado
	  ficaram para ser preenchidas nesta funcao de telefones ao ives da funcao com as variaveis, para que nao seja necessario
	  consultar a qualidade de cadastro nos dois locais, assim temos uma performance melhor.
	  Como a funcao ï¿½ padrï¿½o em todas as carteiras e nem todas usam esses campos como variaveis, foi necessario verificar antes
	  se as colunas existem e cria-las onde nao existem
	-------------------------------------------*/
	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaltitudev8'' and e.column_name = ''ddd'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaltitudev8 ADD COLUMN ddd varchar;  ';
	END IF;

	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaltitudev8'' and e.column_name = ''uf'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaltitudev8 ADD COLUMN uf varchar;  ';
	END IF;

	/*-------------------------------------------*/
	
	raise notice 'score %', sscore;
	/* Triare - 1.013.207: Ajuste para desconsiderar a ordenaï¿½ï¿½o pelo score */
	IF sscore <> '' THEN 
		sOrdena := 'ORDER BY score desc, ordemclass, origemprioridade, prioridade_int';
	ELSE 
		sOrdena := 'ORDER BY ordemclass, origemprioridade, prioridade_int';
	END IF;

	raise notice 'criando temp';

	EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaltitude' || scodprocess || ' as
		SELECT fila.id_cbcontrato_int, contato_str, classificacao_str, c.id_geqltipocontato_int, gr.id_geqlgrupotipocontato_int ,
		       coalesce(c.score_int,0) score, tipo.codigo_str,
			CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
			     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
			     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
			     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
			ELSE ''O'' END As origem, COALESCE(tipo.prioridade_int,99) as prioridade_int,
			coalesce(c.tstamp_inclusao, ''1900-01-01''::timestamp) as data_tratamento, null::bigint as origemprioridade, null::bigint ordemclass
		FROM geqlcontrato qc
		INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
		LEFT JOIN geqltipocontatogrupotipocontato gr on gr.id_geqltipocontato_int = c.id_geqltipocontato_int
		LEFT JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
		INNER JOIN escontrolefilaaltitudev8 fila ON fila.id_cbcontrato_int = qc.id_cbcontrato_int
		' || CASE WHEN sExcecao = 'F' THEN '
				INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str AND tmpcon.chave_str = ''' || vchave || '''' 
		ELSE '' END || '
		WHERE fila.codfila_str = ''' || scodprocess || '''
		ANd c.classificacao_str in (' || sClassificacao || ')
		AND coalesce(c.excluido_bit,0::bit) = 0::bit
		' ||  CASE WHEN saplicagrupo = '1' THEN ' AND gr.id_geqlgrupotipocontato_int in (' || sGrupos || ')' 
		           ELSE ' AND c.id_geqltipocontato_int in (' || sgrupos || ')' END || '
		' || sQueryTratados || '
		' || CASE WHEN sscore <> '' THEN ' AND coalesce(c.score_int,0) '  || sScore ELSE '' END;

		raise notice 'temp criada';

	EXECUTE 'UPDATE _tmpfonesfilaaltitude' || scodprocess || ' 
		 SET ordemclass = CASE WHEN classificacao_str = ''1 - Excelente'' THEN 1
		                       WHEN classificacao_str = ''2 - Bom'' THEN 2
		                       WHEN classificacao_str = ''9 - Indefinido'' THEN 3
		                  ELSE 4 END,
		     origemprioridade = CASE WHEN origem = ''' || vprioridade || ''' THEN 1
				  ELSE 2 END
		               
	';

	raise notice 'acerto de ordem';

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx1
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(id_cbcontrato_int);';

	raise notice 'indice1';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx2
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(id_geqlgrupotipocontato_int);';

	raise notice 'indice2';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx3
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(id_geqltipocontato_int);';

	raise notice 'indice3';

	EXECUTE 'CREATE INDEX _tmpfonesfilaaltitude' || scodprocess || '_idx4
		ON _tmpfonesfilaaltitude' || scodprocess || '
		USING btree
		(score desc, ordemclass, origemprioridade, prioridade_int);';

	raise notice 'indice4';	

	raise notice 'grupo %', saplicagrupo;

	iquantidade := 0;

	IF saplicagrupo = '1' THEN

		--loop para percorrer todos os contratos da fila
		FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaaltitudev8 where codfila_str = ''' || sCodprocess || ''''
		LOOP

			--quantidades de grupos que vieram no parametro
			iQtdeGrupo := (select count(*) from (select unnest(regexp_split_to_array(sGrupos, ',' ))) r);

			raise notice 'iQtdeGrupo = %', iQtdeGrupo;

			--loop para fazer a selecao de telefones dentro dos grupos
			FOR iLoop IN 1..iQtdeGrupo
			LOOP
				-- preenche as variaveis de posicao e quantidade
				FOR rsAux IN EXECUTE '
						SELECT id_geqlgrupotipocontato_int, posicao_altitude_int, tamanho_altitude_int 
						FROM geqlgrupotipocontato 
						WHERE id_geqlgrupotipocontato_int = split_part(''' || sgrupos || ''','','',' || iLoop || ')::bigint '
				LOOP
					iPosInicial := rsAux.posicao_altitude_int;
					iTamanho := rsAux.tamanho_altitude_int;
					iIdGrupo := rsAux.id_geqlgrupotipocontato_int;
				END LOOP; 

				--raise notice 'iPosInicial = %', iPosInicial;
				--raise notice 'iTamanho = %', iTamanho;
				--raise notice 'iIdGrupo = %', iIdGrupo;

				--comeï¿½a o contador na posicao anterior do grupo
				cont := iPosInicial - 1;

				--loop para selecionar os telefones do grupo em questao e coloca-los na posicao correta
				FOR rsTelefone IN EXECUTE '
				

					SELECT contato_str, classificacao_str, id_geqltipocontato_int, coalesce(score,0) score, codigo_str,
					       origem, data_tratamento
					FROM _tmpfonesfilaaltitude' || scodprocess  || '
					WHERE id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || ' 
					  AND id_geqlgrupotipocontato_int = ' || iIdGrupo || ' 
					' || sOrdena || '
					LIMIT ' || iTamanho 

				LOOP
					iquantidade := iquantidade + 1;
					
					cont :=  cont + 1;
					sAux := lpad(cont,2,'0');

					raise notice 'cont = %', cont;
					raise notice 'sAux = %', sAux;

					 EXECUTE 'UPDATE escontrolefilaaltitudev8
						 SET telefone' || sAux || ' = ''+55('' || substr(''' || rsTelefone.contato_str || ''',1,2) || '')'' || substr(''' || rsTelefone.contato_str || ''',3),
						     classtelefone' || cont || ' = ''' || rsTelefone.classificacao_str || ''',
						     score' || cont || ' = ''' || rsTelefone.score || ''',
						     tipotelefone' || cont || ' = ''' || rsTelefone.codigo_str || ''',
						     origem' || cont || ' = ''' || rsTelefone.origem || ''',
						     tratamento' || cont || ' = ''' || rsTelefone.data_tratamento || '''
						 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
						 codfila_str = ''' || sCodprocess || '''';

						 --raise notice 'contrato % , cont %, aux %', rsRegistro.id_cbcontrato_int, cont, sAux;
				
				END LOOP;

				--raise notice 'iquantidade = %',iquantidade;
				iquantidade := 0;

			END LOOP;

		END LOOP;

		

	ELSE

		FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaaltitudev8 where codfila_str = ''' || sCodprocess || ''''
		 LOOP

			raise notice 'rsRegistro.id_cbcontrato_int %', rsRegistro.id_cbcontrato_int;

			/* Preenche contatos do grupo 01 - CEL*/
			cont := 0;
			
			FOR rsTelefone IN EXECUTE '
			

				SELECT contato_str, classificacao_str, id_geqltipocontato_int, coalesce(score,0) score, codigo_str,
				       origem, data_tratamento
				FROM _tmpfonesfilaaltitude' || scodprocess  || '
				WHERE id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || ' 
				  AND id_geqltipocontato_int in (' || sgrupos || ')
				' || sOrdena || '
				LIMIT 15'

			LOOP

				raise notice 'rsRegistro.id_cbcontrato_int %', rsRegistro.id_cbcontrato_int;
				
				cont := cont + 1;
				sAux := lpad(cont,2,'0');

				 EXECUTE 'UPDATE escontrolefilaaltitudev8
					 SET /*telefone' || cont || ' = ''' || rsTelefone.contato_str || ''',*/
					 telefone' || sAux || ' = ''+55('' || substr(''' || rsTelefone.contato_str || ''',1,2) || '')'' || substr(''' || rsTelefone.contato_str || ''',3),
					     classtelefone' || cont || ' = ''' || rsTelefone.classificacao_str || ''',
					     score' || cont || ' = ''' || rsTelefone.score || ''',
					     tipotelefone' || cont || ' = ''' || rsTelefone.codigo_str || ''',
					     origem' || cont || ' = ''' || rsTelefone.origem || ''',
					     tratamento' || cont || ' = ''' || rsTelefone.data_tratamento || '''
					 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
					 codfila_str = ''' || sCodprocess || '''';

					 raise notice 'contrato % , cont %', rsRegistro.id_cbcontrato_int, cont;
			
			END LOOP;
		end loop;

	END IF;

	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_grupo1';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_grupo2';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_grupo3';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaltitude' || scodprocess || '_todos';
	

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1912 (class 1255 OID 26825)
-- Name: f_selecfonesfilaaspect(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_selecfonesfilaaspect(scodprocess character varying, saplicagrupo character varying, sgrupos character varying, sscore character varying, sclassificacao character varying, squerytratados character varying, vprioridade character varying, sexcecao character varying, vchave character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	contcontrato	bigint;
	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	sGrupo1		varchar;
	sGrupo2		varchar;
	sGrupo3		varchar;
	sOrdena		varchar;

BEGIN
	/*-------------------------------------------
	  gbueno - 07/12/2015
	  -------------------------------------------
	  Cria as colunas uf e ddd para que sejam preenchidas em relacao ao telefone melhor classificado
	  ficaram para ser preenchidas nesta funcao de telefones ao ives da funcao com as variaveis, para que nao seja necessario
	  consultar a qualidade de cadastro nos dois locais, assim temos uma performance melhor.
	  Como a funcao ï¿½ padrï¿½o em todas as carteiras e nem todas usam esses campos como variaveis, foi necessario verificar antes
	  se as colunas existem e cria-las onde nao existem
	-------------------------------------------*/
	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaspect'' and e.column_name = ''ddd'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaspect ADD COLUMN ddd varchar;  ';
	END IF;

	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaspect'' and e.column_name = ''uf'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaspect ADD COLUMN uf varchar;  ';
	END IF;

	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaaspect'' and e.column_name = ''cbphone'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaaspect ADD COLUMN cbphone varchar;  ';
	END IF;

	/*-------------------------------------------*/

	raise notice 'score %', sscore;
	/* Triare - 1.013.207: Ajuste para desconsiderar a ordenaï¿½ï¿½o pelo score */
	IF sscore <> '' THEN 
		sOrdena := ' score desc, ordemclass, origemprioridade, prioridade_int';
	ELSE 
		sOrdena := ' ordemclass, origemprioridade, prioridade_int';
	END IF;

	raise notice 'criando temp';

	/*cria temporaria com todos os telefones que se enquadram na estratï¿½gia de filtros*/

	EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaspect' || scodprocess || ' as
		SELECT fila.id_cbcontrato_int, contato_str, classificacao_str, c.id_geqltipocontato_int, gr.id_geqlgrupotipocontato_int ,
		       c.id_geqlcliente_int, coalesce(c.score_int,0) score, tipo.codigo_str,
			CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
			     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
			     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
			     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
			ELSE ''O'' END As origem, COALESCE(tipo.prioridade_int,99) as prioridade_int,
			coalesce(c.tstamp_inclusao, ''1900-01-01''::timestamp) as data_tratamento, null::bigint as origemprioridade, null::bigint ordemclass
		FROM geqlcontrato qc
		INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
		LEFT JOIN geqltipocontatogrupotipocontato gr on gr.id_geqltipocontato_int = c.id_geqltipocontato_int
		LEFT JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
		INNER JOIN escontrolefilaaspect fila ON fila.id_cbcontrato_int = qc.id_cbcontrato_int
		' || CASE WHEN sExcecao = 'F' THEN '
				INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str AND tmpcon.chave_str = ''' || vchave || '''' 
		ELSE '' END || '
		WHERE fila.codfila_str = ''' || scodprocess || '''
		ANd c.classificacao_str in (' || sClassificacao || ')
		AND coalesce(c.excluido_bit,0::bit) = 0::bit
		AND coalesce(c.bloqueado_bit,0::bit) = 0::bit
		' ||  CASE WHEN saplicagrupo = '1' THEN ' AND gr.id_geqlgrupotipocontato_int in (' || sGrupos || ')' 
		           ELSE ' AND c.id_geqltipocontato_int in (' || sgrupos || ')' END || '
		' || sQueryTratados || '
		' || CASE WHEN sscore <> '' THEN ' AND coalesce(c.score_int,0) '  || sScore ELSE '' END;

		raise notice 'temp criada';

	/*atualiza os campos de ordenacao para depois limitar e posicionar os telefones no arquivo de fila*/
	EXECUTE 'UPDATE _tmpfonesfilaaspect' || scodprocess || ' 
		 SET ordemclass = CASE WHEN classificacao_str = ''1 - Excelente'' THEN 1
		                       WHEN classificacao_str = ''2 - Bom'' THEN 2
		                       WHEN classificacao_str = ''9 - Indefinido'' THEN 3
		                  ELSE 4 END,
		     origemprioridade = CASE WHEN origem = ''' || vprioridade || ''' THEN 1
				  ELSE 2 END
		               
	';

	raise notice 'acerto de ordem';

	/*cria indices para otimizar as consultas*/
	EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_idx1
		ON _tmpfonesfilaaspect' || scodprocess || '
		USING btree
		(id_cbcontrato_int);';

	raise notice 'indice1';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_idx2
		ON _tmpfonesfilaaspect' || scodprocess || '
		USING btree
		(id_geqlgrupotipocontato_int);';

	raise notice 'indice2';

	EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_idx3
		ON _tmpfonesfilaaspect' || scodprocess || '
		USING btree
		(id_geqltipocontato_int);';

	raise notice 'indice3';

	EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_idx4
		ON _tmpfonesfilaaspect' || scodprocess || '
		USING btree
		(score desc, ordemclass, origemprioridade, prioridade_int);';

	raise notice 'indice4';		

	contcontrato := 0;
	
	IF saplicagrupo = '1' THEN

		sGrupo1 := split_part(sGrupos,',',1);
		sGrupo2	:= split_part(sGrupos,',',2);
		sGrupo3	:= split_part(sGrupos,',',3);

		/*cria uma tmp para cada grupo, jï¿½ ordenando os fones nas posicoes estratï¿½gicas dos grupos*/

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaspect' || scodprocess || '_grupo1 as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaspect' || scodprocess || ' 
			       where id_geqlgrupotipocontato_int = ' || sGrupo1 || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone1" text, "fone2" text, "fone3" text) order by 1';

		raise notice 'tabela grupo 1';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_grupo1_idx1
			 ON _tmpfonesfilaaspect' || scodprocess || '_grupo1
			 USING btree
			(id_cbcontrato_int);';

		raise notice 'indice grupo 1';

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaspect' || scodprocess || '_grupo2 as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaspect' || scodprocess || ' 
			       where id_geqlgrupotipocontato_int = ' || sGrupo2 || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone4" text, "fone5" text, "fone6" text) order by 1';

		raise notice 'tabela grupo 2';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_grupo2_idx1
			 ON _tmpfonesfilaaspect' || scodprocess || '_grupo2
			 USING btree
			(id_cbcontrato_int);';

		raise notice 'indice grupo 2';

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaspect' || scodprocess || '_grupo3 as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaspect' || scodprocess || ' 
			       where id_geqlgrupotipocontato_int = ' || sGrupo3 || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone7" text, "fone8" text, "fone9" text) order by 1';

		raise notice 'tabela grupo 3';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_grupo3_idx1
			 ON _tmpfonesfilaaspect' || scodprocess || '_grupo3
			 USING btree
			(id_cbcontrato_int);';

		raise notice 'indice grupo 3';

		/*atualiza os telefones na tabela fisica de fila, jï¿½ posicionados de acordo com os grupos*/
		
		EXECUTE 'UPDATE escontrolefilaaspect
					 SET telefone1 = RPAD(COALESCE(t.fone1,''''),12,'' ''),
					     telefone2 = RPAD(COALESCE(t.fone2,''''),12,'' ''),
					     telefone3 = RPAD(COALESCE(t.fone3,''''),12,'' '')
					 FROM _tmpfonesfilaaspect' || scodprocess || '_grupo1 t
					 WHERE escontrolefilaaspect.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

		raise notice 'update grupo 1';

		EXECUTE 'UPDATE escontrolefilaaspect
					 SET telefone4 = RPAD(COALESCE(t.fone4,''''),12,'' ''),
					     telefone5 = RPAD(COALESCE(t.fone5,''''),12,'' ''),
					     telefone6 = RPAD(COALESCE(t.fone6,''''),12,'' '')
					 FROM _tmpfonesfilaaspect' || scodprocess || '_grupo2 t
					 WHERE escontrolefilaaspect.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

		raise notice 'update grupo 2';

		EXECUTE 'UPDATE escontrolefilaaspect
					 SET telefone7 = RPAD(COALESCE(t.fone7,''''),12,'' ''),
					     telefone8 = RPAD(COALESCE(t.fone8,''''),12,'' ''),
					     telefone9 = RPAD(COALESCE(t.fone9,''''),12,'' '')
					 FROM _tmpfonesfilaaspect' || scodprocess || '_grupo3 t
					 WHERE escontrolefilaaspect.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

		raise notice 'update grupo 3';

		

	ELSE
		/*quando nao ï¿½ usada a estrategia de grupos, cria apenas uma tmp*/

		EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaaspect' || scodprocess || '_todos as 
			SELECT * FROM crosstab(
			       ''SELECT 
				id_cbcontrato_int, id_geqlcliente_int, contato_str::text        
			       FROM  _tmpfonesfilaaspect' || scodprocess || '
			       ORDER BY id_cbcontrato_int, ' || sOrdena || '''
			      )
			AS ct ("id_cbcontrato_int" bigint, "fone1" text, "fone2" text, "fone3" text, "fone4" text, "fone5" text, "fone6" text, "fone7" text, "fone8" text, "fone9" text, "fone10" text) order by 1';

		EXECUTE 'CREATE INDEX _tmpfonesfilaaspect' || scodprocess || '_todos_idx1
			 ON _tmpfonesfilaaspect' || scodprocess || '_todos
			 USING btree
			(id_cbcontrato_int);';

		/*atualiza os telefones na tabela fisica de fila, jï¿½ posicionados de acordo com os tipos de telefone*/

		EXECUTE 'UPDATE escontrolefilaaspect
					 SET telefone1 = RPAD(COALESCE(t.fone1,''''),12,'' ''),
					     telefone2 = RPAD(COALESCE(t.fone2,''''),12,'' ''),
					     telefone3 = RPAD(COALESCE(t.fone3,''''),12,'' ''),
					     telefone4 = RPAD(COALESCE(t.fone4,''''),12,'' ''),
					     telefone5 = RPAD(COALESCE(t.fone5,''''),12,'' ''),
					     telefone6 = RPAD(COALESCE(t.fone6,''''),12,'' ''),
					     telefone7 = RPAD(COALESCE(t.fone7,''''),12,'' ''),
					     telefone8 = RPAD(COALESCE(t.fone8,''''),12,'' ''),
					     telefone9 = RPAD(COALESCE(t.fone9,''''),12,'' ''),
					     telefone10 = RPAD(COALESCE(t.fone10,''''),12,'' '')
					 FROM _tmpfonesfilaaspect' || scodprocess || '_todos t
					 WHERE escontrolefilaaspect.id_cbcontrato_int =  t.id_cbcontrato_int
					   AND codfila_str = ''' || scodprocess || '''';

	END IF;

	EXECUTE 'UPDATE escontrolefilaaspect
		 SET telefone10 = RPAD(COALESCE(cbphone,''''),12,'' '')
		 WHERE codfila_str = ''' || scodprocess || '''';

	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaspect' || scodprocess || '';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaspect' || scodprocess || '_grupo1';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaspect' || scodprocess || '_grupo2';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaspect' || scodprocess || '_grupo3';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaaspect' || scodprocess || '_todos';	

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1913 (class 1255 OID 26831)
-- Name: f_selecfonesfilaolos(character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_selecfonesfilaolos(scodprocess character varying, saplicagrupo character varying, sgrupos character varying, sscore character varying, sclassificacao character varying, squerytratados character varying, vprioridade character varying, sexcecao character varying, vchave character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE

	cont		bigint;
	rsRegistro	RECORD;
	rsTelefone	RECORD; 
	rsAux		RECORD;
	iQtdeGrupo	integer;
	iLoop		integer;
	iPosInicial	integer;
	iTamanho	integer;
	iIdGrupo	bigint;
	sOrdena		varchar;
	sAux		varchar;
	iquantidade	bigint;
	contcontrato	bigint;

BEGIN
	
	/*-------------------------------------------
	  gbueno - 07/12/2015
	  -------------------------------------------
	  Cria as colunas uf e ddd para que sejam preenchidas em relacao ao telefone melhor classificado
	  ficaram para ser preenchidas nesta funcao de telefones ao ives da funcao com as variaveis, para que nao seja necessario
	  consultar a qualidade de cadastro nos dois locais, assim temos uma performance melhor.
	  Como a funcao ï¿½ padrï¿½o em todas as carteiras e nem todas usam esses campos como variaveis, foi necessario verificar antes
	  se as colunas existem e cria-las onde nao existem
	-------------------------------------------*/
	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaolos'' and e.column_name = ''ddd'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaolos ADD COLUMN ddd varchar;  ';
	END IF;

	FOR rsRegistro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''escontrolefilaolos'' and e.column_name = ''uf'' LIMIT 1'
	LOOP
		cont := rsRegistro.conta;
	END LOOP;

	IF cont = 0 THEN
		EXECUTE 'ALTER TABLE escontrolefilaolos ADD COLUMN uf varchar;  ';
	END IF;

	/*-------------------------------------------*/
	
	raise notice 'score %', sscore;
	/* Triare - 1.013.207: Ajuste para desconsiderar a ordenaï¿½ï¿½o pelo score */
	IF sscore <> '' THEN 
		sOrdena := 'ORDER BY score desc, ordemclass, origemprioridade, prioridade_int';
	ELSE 
		sOrdena := 'ORDER BY ordemclass, origemprioridade, prioridade_int';
	END IF;

	raise notice 'criando temp';

	EXECUTE 'CREATE TEMPORARY TABLE _tmpfonesfilaolos' || scodprocess || ' as
		SELECT fila.id_cbcontrato_int, contato_str, classificacao_str, c.id_geqltipocontato_int, gr.id_geqlgrupotipocontato_int ,
		       coalesce(c.score_int,0) score, tipo.codigo_str,
			CASE WHEN c.tabela_origem_str LIKE ''ge070tmp%''   THEN ''T''  
			     WHEN c.tabela_origem_str = ''CB002''            THEN ''M''  
			     WHEN c.tabela_origem_str = ''tmppesquisaquali'' THEN ''B'' 
			     WHEN c.tabela_origem_str   LIKE ''ge069tmp%''   THEN ''I'' 
			ELSE ''O'' END As origem, COALESCE(tipo.prioridade_int,99) as prioridade_int,
			coalesce(c.tstamp_inclusao, ''1900-01-01''::timestamp) as data_tratamento, null::bigint as origemprioridade, null::bigint ordemclass
		FROM geqlcontrato qc
		INNER JOIN geqlcontato c ON c.id_geqlcliente_int = qc.id_geqlcliente_int
		LEFT JOIN geqltipocontatogrupotipocontato gr on gr.id_geqltipocontato_int = c.id_geqltipocontato_int
		LEFT JOIN geqltipocontato tipo on c.id_geqltipocontato_int = tipo.id_geqltipocontato_int
		INNER JOIN escontrolefilaolos fila ON fila.id_cbcontrato_int = qc.id_cbcontrato_int
		' || CASE WHEN sExcecao = 'F' THEN '
				INNER JOIN gefilacobrancaimporta tmpcon ON tmpcon.telefone_str = c.contato_str AND tmpcon.chave_str = ''' || vchave || '''' 
		ELSE '' END || '
		WHERE fila.codfila_str = ''' || scodprocess || '''
		ANd c.classificacao_str in (' || sClassificacao || ')
		AND coalesce(c.excluido_bit,0::bit) = 0::bit
		' ||  CASE WHEN saplicagrupo = '1' THEN ' AND gr.id_geqlgrupotipocontato_int in (' || sGrupos || ')' 
		           ELSE ' AND c.id_geqltipocontato_int in (' || sgrupos || ')' END || '
		' || sQueryTratados || '
		' || CASE WHEN sscore <> '' THEN ' AND coalesce(c.score_int,0) '  || sScore ELSE '' END;

		raise notice 'temp criada';

	EXECUTE 'UPDATE _tmpfonesfilaolos' || scodprocess || ' 
		 SET ordemclass = CASE WHEN classificacao_str = ''1 - Excelente'' THEN 1
		                       WHEN classificacao_str = ''2 - Bom'' THEN 2
		                       WHEN classificacao_str = ''9 - Indefinido'' THEN 3
		                  ELSE 4 END,
		     origemprioridade = CASE WHEN origem = ''' || vprioridade || ''' THEN 1
				  ELSE 2 END
		               
	';

	raise notice 'acerto de ordem';

	EXECUTE 'CREATE INDEX _tmpfonesfilaolos' || scodprocess || '_idx1
		ON _tmpfonesfilaolos' || scodprocess || '
		USING btree
		(id_cbcontrato_int);';

	raise notice 'indice1';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaolos' || scodprocess || '_idx2
		ON _tmpfonesfilaolos' || scodprocess || '
		USING btree
		(id_geqlgrupotipocontato_int);';

	raise notice 'indice2';	

	EXECUTE 'CREATE INDEX _tmpfonesfilaolos' || scodprocess || '_idx3
		ON _tmpfonesfilaolos' || scodprocess || '
		USING btree
		(id_geqltipocontato_int);';

	raise notice 'indice3';

	EXECUTE 'CREATE INDEX _tmpfonesfilaolos' || scodprocess || '_idx4
		ON _tmpfonesfilaolos' || scodprocess || '
		USING btree
		(score desc, ordemclass, origemprioridade, prioridade_int);';

	raise notice 'indice4';	

	raise notice 'grupo %', saplicagrupo;

	iquantidade := 0;

	IF saplicagrupo = '1' THEN

		--loop para percorrer todos os contratos da fila
		FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaolos where codfila_str = ''' || sCodprocess || ''''
		LOOP

			--quantidades de grupos que vieram no parametro
			iQtdeGrupo := (select count(*) from (select unnest(regexp_split_to_array(sGrupos, ',' ))) r);

			raise notice 'iQtdeGrupo = %', iQtdeGrupo;

			--loop para fazer a selecao de telefones dentro dos grupos
			FOR iLoop IN 1..iQtdeGrupo
			LOOP
				-- preenche as variaveis de posicao e quantidade
				FOR rsAux IN EXECUTE '
						SELECT id_geqlgrupotipocontato_int, posicao_altitude_int, tamanho_altitude_int 
						FROM geqlgrupotipocontato 
						WHERE id_geqlgrupotipocontato_int = split_part(''' || sgrupos || ''','','',' || iLoop || ')::bigint '
				LOOP
					iPosInicial := rsAux.posicao_altitude_int;
					iTamanho := rsAux.tamanho_altitude_int;
					iIdGrupo := rsAux.id_geqlgrupotipocontato_int;
				END LOOP; 

				--raise notice 'iPosInicial = %', iPosInicial;
				--raise notice 'iTamanho = %', iTamanho;
				--raise notice 'iIdGrupo = %', iIdGrupo;

				--comeï¿½a o contador na posicao anterior do grupo
				cont := iPosInicial - 1;

				--loop para selecionar os telefones do grupo em questao e coloca-los na posicao correta
				FOR rsTelefone IN EXECUTE '
				

					SELECT contato_str, classificacao_str, id_geqltipocontato_int, coalesce(score,0) score, codigo_str,
					       origem, data_tratamento
					FROM _tmpfonesfilaolos' || scodprocess  || '
					WHERE id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || ' 
					  AND id_geqlgrupotipocontato_int = ' || iIdGrupo || ' 
					' || sOrdena || '
					LIMIT ' || iTamanho 

				LOOP
					iquantidade := iquantidade + 1;
					
					cont :=  cont + 1;
					sAux := lpad(cont,2,'0');

					raise notice 'cont = %', cont;
					raise notice 'sAux = %', sAux;

					 EXECUTE 'UPDATE escontrolefilaolos
						 SET telefone' || sAux || ' = ''' || rsTelefone.contato_str  || ''',
						     classtelefone' || cont || ' = ''' || rsTelefone.classificacao_str || ''',
						     score' || cont || ' = ''' || rsTelefone.score || ''',
						     tipotelefone' || cont || ' = ''' || rsTelefone.codigo_str || ''',
						     origem' || cont || ' = ''' || rsTelefone.origem || ''',
						     tratamento' || cont || ' = ''' || rsTelefone.data_tratamento || '''
						 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
						 codfila_str = ''' || sCodprocess || '''';

						 --raise notice 'contrato % , cont %, aux %', rsRegistro.id_cbcontrato_int, cont, sAux;
				
				END LOOP;

				--raise notice 'iquantidade = %',iquantidade;
				iquantidade := 0;

			END LOOP;

		END LOOP;

		

	ELSE

		FOR rsRegistro IN EXECUTE ' SELECT * FROM escontrolefilaolos where codfila_str = ''' || sCodprocess || ''''
		 LOOP

			raise notice 'rsRegistro.id_cbcontrato_int %', rsRegistro.id_cbcontrato_int;

			/* Preenche contatos do grupo 01 - CEL*/
			cont := 0;
			
			FOR rsTelefone IN EXECUTE '
			

				SELECT contato_str, classificacao_str, id_geqltipocontato_int, coalesce(score,0) score, codigo_str,
				       origem, data_tratamento
				FROM _tmpfonesfilaolos' || scodprocess  || '
				WHERE id_cbcontrato_int = ' || rsRegistro.id_cbcontrato_int || ' 
				  AND id_geqltipocontato_int in (' || sgrupos || ')
				' || sOrdena || '
				LIMIT 15'

			LOOP

				raise notice 'rsRegistro.id_cbcontrato_int %', rsRegistro.id_cbcontrato_int;
				
				cont := cont + 1;
				sAux := lpad(cont,2,'0');

				 EXECUTE 'UPDATE escontrolefilaolos
					 SET /*telefone' || cont || ' = ''' || rsTelefone.contato_str || ''',*/
					 telefone' || sAux || ' = ''' || rsTelefone.contato_str  || ''',
					     classtelefone' || cont || ' = ''' || rsTelefone.classificacao_str || ''',
					     score' || cont || ' = ''' || rsTelefone.score || ''',
					     tipotelefone' || cont || ' = ''' || rsTelefone.codigo_str || ''',
					     origem' || cont || ' = ''' || rsTelefone.origem || ''',
					     tratamento' || cont || ' = ''' || rsTelefone.data_tratamento || '''
					 WHERE id_cbcontrato_int =  ' || rsRegistro.id_cbcontrato_int || ' and
					 codfila_str = ''' || sCodprocess || '''';

					 raise notice 'contrato % , cont %', rsRegistro.id_cbcontrato_int, cont;
			
			END LOOP;
		end loop;

	END IF;

	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaolos' || scodprocess || '';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaolos' || scodprocess || '_grupo1';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaolos' || scodprocess || '_grupo2';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaolos' || scodprocess || '_grupo3';
	EXECUTE 'DROP TABLE IF EXISTS _tmpfonesfilaolos' || scodprocess || '_todos';
	

	RETURN  sCodprocess;
END;
$$;

--
-- TOC entry 1914 (class 1255 OID 26834)
-- Name: f_tipotel(bigint, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_tipotel(idcontrato bigint, sfone character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   ind varchar;
   
Begin

   ind := (select CASE 	WHEN t.codigo_str in ('CEL','CEL_HOT') THEN 'M'
			WHEN t.codigo_str in ('BANCO_HOT','BANCO_INDEFINIDO','RES') THEN 'H'
		  ELSE
			'B'
		  END as tipo_tel
		from geqlcontrato qc
		inner join geqlcontato f on f.id_geqlcliente_int = qc.id_geqlcliente_int
		inner join geqltipocontato t on t.id_geqltipocontato_int = f.id_geqltipocontato_int
		where qc.id_cbcontrato_int = idcontrato and fcformatatelefone(sfone) = fcformatatelefone(f.contato_str)
		Order by f.classificacao_str, f.id_geqltipocontato_int limit 1);
return ind;

end;
$$;

--
-- TOC entry 1915 (class 1255 OID 26844)
-- Name: f_trigger_geqlcontato_geqlcontato_historico_after_insert_update(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_trigger_geqlcontato_geqlcontato_historico_after_insert_update() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN 	
	
	IF TG_OP = 'INSERT' THEN
	
		EXECUTE public.f_gera_log_geqlcontato_bloqueiohistorico(NEW.id_geqlcontato_int, NEW.bloqueado_bit, 0::BIT, COALESCE(NEW.id_geusuario_int, 1195), 'COMANDO: INSERT - ORIGEM: ' || COALESCE(NEW.tabela_origem_str, '') || ' - OBS: ' || COALESCE(NEW.observacao_str, ''));
	
	ELSIF TG_OP = 'UPDATE' THEN
		
		IF NEW.bloqueado_bit <> COALESCE(OLD.bloqueado_bit, 0::BIT) THEN
		
			EXECUTE public.f_gera_log_geqlcontato_bloqueiohistorico(NEW.id_geqlcontato_int, NEW.bloqueado_bit, COALESCE(OLD.bloqueado_bit, 0::BIT), COALESCE(NEW.id_geusuario_int, 1195), 'COMANDO: UPDATE - ORIGEM: ' || COALESCE(NEW.tabela_origem_str, '') || ' - OBS: ' || COALESCE(NEW.observacao_str, ''));

		END IF;
		
	END IF;
		
	RETURN NEW;
	
END;
$$;

--
-- TOC entry 1916 (class 1255 OID 26854)
-- Name: f_trigger_valida_contato_blacklist_bit(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_trigger_valida_contato_blacklist_bit() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
declare

registro RECORD;

begin 	

	IF(TG_OP = 'INSERT' OR TG_OP = 'UPDATE') THEN

		--RAISE NOTICE 'Contrato - verificaï¿½ï¿½o blacklist %', new.contato_str;
		
		IF new.contato_str != NULL OR new.contato_str != '' THEN

			FOR registro IN EXECUTE 'SELECT contato_str FROM cbblacklist WHERE contato_str = ''' || new.contato_str ||''' LIMIT 1'
				LOOP
					new.excluido_bit = '1';
					new.bloqueado_bit = '1';
					raise notice 'ATENï¿½ï¿½O: Contato sendo inserido/alterado, mas o ele Jï¿½ esta presente na blacklist, trigger banco trigger_valida_contato_blacklist_bit ';
				END LOOP;
		END IF;
	END IF;
	
	return new;
end;
$$;

--
-- TOC entry 1917 (class 1255 OID 26860)
-- Name: f_validaemail(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_validaemail(email text) RETURNS boolean
    LANGUAGE plpgsql
    AS $_$ Begin return (email ~ '^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$'); end; $_$;

--
-- TOC entry 1918 (class 1255 OID 26865)
-- Name: f_verificablacklist(text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.f_verificablacklist(contato text, idcliente bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
Declare
	retorno		TEXT;
	idBlackList	BIGINT;
	tipoContato	TEXT;
	idBlackListCli	BIGINT;
	ip		TEXT;
	senha		TEXT;
	banco		TEXT;
	porta		TEXT;
	strSql		TEXT;
	registro	RECORD;
	situacaoContato TEXT;
Begin
	retorno = 'OK';	
	select id_cbblacklist_int, tipo_contato_str into idBlackList, tipoContato from cbblacklist  where contato_str = contato;
	if idBlackList notnull then
		select id_cbblacklistcliente_int, situacao_str into idBlackListCli, situacaoContato from cbblacklistcliente  where id_cbblacklist_int = idBlackList and id_gecliente_int = idCliente;
		if idBlackListCli notnull then
			select distinct ps.ip_str, ps.senha_str, ps.banco_str, ps.porta_str from geclienteservidor cl inner join geparametroservidor ps on ps.id_geparametroservidor_int = cl.id_geparametroservidor_int inner join gecliente gc on gc.id_gecliente_int = cl.id_gecliente_int into ip, senha, banco, porta where cl.id_gecliente_int = idCliente;
			if ip notnull then
				if (banco = current_database() and ip = host(inet_server_addr())) then
					execute 'select f_executablacklist(''' || tipoContato || ''',''' || contato || ''',''' || situacaoContato || ''');';
				else
					execute 'select '''' from dblink(''dbname=' || banco ||' port=' || porta ||' host=' || ip ||' user=postgres  password=' || senha || ''',''select f_executablacklist(''''' || tipoContato || ''''',''''' || contato || ''''',''''' || situacaoContato || ''''');'') as t (retorno text)';
				end if;
				update cbblacklistcliente set data_verificacao_dat = current_timestamp, transmite_bit = '0' where id_cbblacklistcliente_int = idBlackListCli;
			else
				retorno = 'Servidor nÃ£o parametrizado para a carteira ' || idCliente || ' !';
			end if;
		else
			retorno = 'Contato ' || contato || ' nÃ£o vinculado a carteira ' || idCliente || ' na BlackList!';
		end if;
	else
		retorno = 'Contato ' || contato || ' nÃ£o encontrato na BlackList!';
	end if;
	return retorno;
end;
$$;

--
-- TOC entry 1919 (class 1255 OID 26869)
-- Name: fajustalayoutboletagem(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fajustalayoutboletagem() RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   campos text;
   registro record; 
   registro1 record;
   registro2 record; 
Begin 

        for registro in execute 'select id_cbmodlayout_int, codigo_str from cbmodlayout where codigo_str like ''PLCOB%'''
        loop
		for registro1 in execute 'select id_cbdetalhelay_int from cbdetalhelay where id_cbmodlayout_int = ' || registro.id_cbmodlayout_int || ' and codigo_str = ''2'''
		loop
			for registro2 in execute 'select id_cbitemlay_int from cbitemlay where id_cbdetalhelay_int = ' || registro1.id_cbdetalhelay_int || ' and nome_campo_str = ''email'' and coalesce(tabela_campo_str,'''') = '''''
			loop
			        raise notice '%', registro.codigo_str;
				execute 'update cbitemlay set tabela_campo_str = ''email'' where id_cbitemlay_int = ' || registro2.id_cbitemlay_int;
			end loop;
		end loop;
        end loop;  
	return 'OK';
end;
$$;

--
-- TOC entry 1920 (class 1255 OID 26879)
-- Name: fajustecopy(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fajustecopy() RETURNS trigger
    LANGUAGE plpgsql
    AS $$   DECLARE    BEGIN     IF (TG_OP = 'INSERT') THEN      new.linha_str = to_ascii(new.linha_str, 'LATIN1');     END IF;     RETURN new;    END;   $$;

--
-- TOC entry 1921 (class 1255 OID 26880)
-- Name: fc_baixa_parcelas_eleva_19_11_2019(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_baixa_parcelas_eleva_19_11_2019(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$

DECLARE
cont     int8;
registro RECORD;
reg 	 RECORD;
sSql	text;
sNomeArquivo	text;
sCodigoArquivo text;
sDescricaoArquivo text;
sTipoEnvio text;
sSequenciaArquivo text;
sbatimento text;
id_contrato	bigint;
Parcela 	int;

BEGIN

	--ACERTA TEMPORARIA
	IF processo = 0 THEN

	RAISE NOTICE '0 - Criando tmp baixa de parcelas:%', current_time;
	
	--tmp parcela	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbbaixa_parcela;
		CREATE TABLE ' || tabtemp || '_cbbaixa_parcela AS
			 SELECT  
				p.id_cbcontrato_int,
				p.id_cbparcela_int							AS id_cbparcela_int,				
				p.data_vencimento_dat							AS data_vencimento_dat,

				6									AS situacao_int,
				CURRENT_DATE 								AS data_ultima_distrib_dat,
				' || idgeusuario || ' 							AS id_geusuario_int,
				CURRENT_TIMESTAMP 							AS tstamp,
				t.Numero_parcela::integer						AS parcela_int,
				COALESCE(t.Valor_pago,''0'')::double precision				AS valor_pago_num,
				
				COALESCE(t.Valor_amortizar_principal,''0'')::double precision		AS valor_amortizar_principal_num,
				COALESCE(t.Valor_parcela,''0'')::double precision			AS valor_parcela_num,
				COALESCE(t.Valor_juros,''0'')::double precision				AS valor_juros_num,
				t.Tipo_baixa												AS Tipo_baixa_str,
				p.info_adicional_16_str										as info_adicional_16_str,
				t.Data_pagamento as Data_pagamento_dat,
				t.Data_vencimento as Data_vencimento,

				CASE WHEN p.id_cbparcela_int IS NULL THEN 
					''I'' 
				ELSE 
					''A'' 
				END 									AS inclui_altera_parcela,
				''' || chave ||'''::TEXT 						AS chave_str
			FROM ' || tabtemp || ' t			
			LEFT JOIN cbparcela p ON (p.parcela_int = t.Numero_parcela::integer AND p.numero_unico_str = t.Numero_documento)
			WHERE t.chave_str = ''' || chave || ''' 
			;';

		--raise notice '%', sSql;
			
		--EXECUTE sSql;

		EXECUTE 'CREATE INDEX ' || tabtemp || '_cbbaixa_parcela_idx1
				     ON ' || tabtemp || '_cbbaixa_parcela
				  USING btree(id_cbparcela_int);';

        -- INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	

	-- PROCESSO COMPLETO	
	ELSEIF processo = 2 THEN  

		raise notice 'criando pagamentos...';	
-- chamar fcbaixapagamento	
		--INSERT NAS TABELAS DE PAGAMENTO
    		EXECUTE ' SELECT fcbaixapagamentoeleva(''''::varchar, t.Data_pagamento_dat, t.valor_pago_num, t.Data_vencimento, 
							''' || idgeempresa || ''', ''' || idgefilial || ''', ''' || idgecliente || ''', ''' || idgeusuario || ''', i.id_cbitembordero_int)			
			FROM ' || tabtemp || '_cbbaixa_parcela t
			INNER JOIN cbitembordero i on i.id_boletoeleva_str = t.info_adicional_16_str
			where t.id_cbcontrato_int = i.id_cbcontrato_int AND t.Tipo_baixa_str = ''T'' or t.Tipo_baixa_str = ''P''  
			';

		raise notice 'Baixando parcelas...';	

                EXECUTE 'UPDATE cbparcela SET 
				situacao_int = t.situacao_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				id_geusuario_int = t.id_geusuario_int,
				tstamp = t.tstamp

                          FROM ' || tabtemp || '_cbbaixa_parcela t
			  WHERE	t.chave_str = ''' || chave || '''
			  AND t.inclui_altera_parcela = ''A'' 
			  AND cbparcela.id_cbparcela_int = t.id_cbparcela_int
			  AND cbparcela.situacao_int NOT IN (4,6)';

		raise notice 'Baixando contratos sem parcelas...';	  

		EXECUTE 'UPDATE cbcontratoeleva
			 SET id_cbsituacaocontrato_int = 6
			 WHERE NOT EXISTS (SELECT 1 FROM cbparcela p WHERE p.id_cbcontrato_int = cbcontratoeleva.id_cbcontrato_int
			 AND situacao_int NOT IN (4,6))';		 
		
	END IF;
		
	RETURN  '';
END;
$$;

--
-- TOC entry 1922 (class 1255 OID 26890)
-- Name: fc_classificacao_outcome(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_classificacao_outcome(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE 
cont     	int8;
registro 	RECORD;
vBordero 	int8;

BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN

		EXECUTE 'DELETE FROM ' || tabtemp || ' WHERE linha = 1';
		
		--Cria id contrato
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int bigint;  ';
		END IF;

		--Cria id_geqlcontato_Int
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_geqlcontato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_geqlcontato_int bigint;  ';
		END IF;

		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int
			FROM ' || tabelafilha || ' c
			where c.contrato_str = ' || tabtemp || '.contrato
			AND c.id_gecliente_int = ' || tabtemp || '.carteira::bigint
			AND ' || tabtemp || '.chave_str = ''' || chave || ''' ;
			';

		EXECUTE 'DELETE FROM ' || tabtemp || ' WHERE id_cbcontrato_int IS NULL';
		
		RAISE NOTICE 'contrato';

		EXECUTE 'UPDATE ' || tabtemp || ' SET id_geqlcontato_Int = q.id_geqlcontato_Int
			FROM geqlcontato q
			INNER JOIN geqlcontrato c on c.id_geqlcliente_int = q.id_geqlcliente_int
			WHERE c.id_cbcontrato_int = ' || tabtemp || '.id_cbcontrato_int
			AND q.contato_str = substr(' || tabtemp || '.telefone, 9)
			AND TRIM(COALESCE(' || tabtemp || '.outcome, '''')) IN (''CONTATO POSITIVO TERC'', ''CONTATO POSITIVO'')
			AND ' || tabtemp || '.chave_str = ''' || chave || ''' ;
			';
		RAISE NOTICE 'contato';	

		--EXECUTE 'DELETE FROM ' || tabtemp || ' WHERE id_geqlcontato_Int IS NULL';
			

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 

	ELSEIF processo = 2 THEN

		EXECUTE 'UPDATE geqlcontato set classificacao_str = CASE WHEN TRIM(COALESCE(t.outcome, '''')) = ''CONTATO POSITIVO'' 
										THEN ''1 - Excelente''
									ELSE classificacao_str
									END
				FROM ' || tabtemp || ' t
				WHERE t.id_geqlcontato_int = geqlcontato.id_geqlcontato_int
				AND TRIM(COALESCE(t.outcome, '''')) = ''CONTATO POSITIVO'' 
				AND geqlcontato.classificacao_str <> ''1 - Excelente''
				AND t.chave_str = ''' || chave || ''' ; 
		';

		EXECUTE 'UPDATE geqlcontato set classificacao_str = CASE WHEN TRIM(COALESCE(t.outcome, '''')) = ''CONTATO POSITIVO TERC'' 
										THEN ''2 - Bom''
									ELSE classificacao_str
									END
				FROM ' || tabtemp || ' t
				WHERE t.id_geqlcontato_int = geqlcontato.id_geqlcontato_int
				AND TRIM(COALESCE(t.outcome, '''')) = ''CONTATO POSITIVO TERC''  
				AND geqlcontato.classificacao_str NOT IN (''2 - Bom'', ''1 - Excelente'')
				AND t.chave_str = ''' || chave || ''' ; 
		';

	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1923 (class 1255 OID 26894)
-- Name: fc_dddxuf(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_dddxuf(ddd text) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   uf text;
Begin
 uf := '';

 uf := (    
	CASE 
	WHEN ddd in ('11','12','13','14','15','16','17','18','19')	THEN 'SP'
	WHEN ddd in ('21','22','24')					THEN 'RJ'
	WHEN ddd in ('27','28')						THEN 'ES'
	WHEN ddd in ('31','32','33','34','35','37','38')		THEN 'MG'
	WHEN ddd in ('41','42','43','44','45','46')			THEN 'PR'
	WHEN ddd in ('47','48','49')					THEN 'SC'
	WHEN ddd in ('51','53','54','55')				THEN 'RS'
	WHEN ddd in ('61')      					THEN 'DF'
	WHEN ddd in ('62','64')						THEN 'GO'
	WHEN ddd in ('63')       					THEN 'TO'
	WHEN ddd in ('65','66')     					THEN 'MT'
	WHEN ddd in ('67')      					THEN 'MS'
	WHEN ddd in ('68')      					THEN 'AC'
	WHEN ddd in ('69')      					THEN 'RO'
	WHEN ddd in ('71','73','74','75','77')				THEN 'BA'
	WHEN ddd in ('79')						THEN 'SE'
	WHEN ddd in ('81','87')						THEN 'PE'
	WHEN ddd in ('82')						THEN 'AL'
	WHEN ddd in ('83')						THEN 'PB'
	WHEN ddd in ('84')						THEN 'RN'
	WHEN ddd in ('85','88')						THEN 'CE'
	WHEN ddd in ('86','89')						THEN 'PI'
	WHEN ddd in ('91','93','94')					THEN 'PA'
	WHEN ddd in ('92','97')						THEN 'AM'
	WHEN ddd in ('95')						THEN 'RR'
	WHEN ddd in ('96')						THEN 'AP'
	WHEN ddd in ('98','99')						THEN 'MA'	
	END );	
return uf;
end;
$$;

--
-- TOC entry 1924 (class 1255 OID 26903)
-- Name: fc_diautil_calc(date); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_diautil_calc(pdata date) RETURNS date
    LANGUAGE plpgsql
    AS $$
DECLARE
	novadata DATE;
	dia      BIGINT;
	teste    BOOLEAN;
	registro RECORD;
BEGIN  
	novadata = pdata;	
	teste = FALSE;

        WHILE teste = FALSE LOOP
		dia = date_part('dow', novadata);

		RAISE NOTICE 'data %', novadata;
		RAISE NOTICE 'dia %', dia;
		--Sabado
		IF dia = 6 THEN
			novadata = novadata + 2;	
		END IF;

		--DOMINGO
		IF dia = 0 THEN
			novadata = novadata + 1;
		END IF;

		FOR registro IN EXECUTE 'SELECT COUNT(id_geferiado_int) feriado 
		                           FROM geferiado 
		                          WHERE data_dat = ''' || novadata || ''''
		LOOP
			IF registro.feriado = 0 THEN
				teste = TRUE;
			ELSE
				novadata = novadata + 1;
			END IF;			
		END LOOP;
		RAISE NOTICE 'teste %', teste;
	END LOOP;
	
	RETURN NovaData;
end;
$$;

--
-- TOC entry 1925 (class 1255 OID 26904)
-- Name: fc_eleva_qualidadeemail(character varying, bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_eleva_qualidadeemail(character varying, bigint, text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  registro 	      RECORD;

BEGIN	
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadeemail_res;
			 CREATE TABLE ' || $1 || '_qualidadeemail_res AS 
			(
			 SELECT c.id_cbcontrato_int,
			  1 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_1,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_1,'''')) <> '''' 
			 AND t.tipo_email_1 = ''1''

			 UNION

			 SELECT c.id_cbcontrato_int,
			  1 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_2,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_2,'''')) <> '''' 
			 AND t.tipo_email_2 = ''1''

			 UNION

			 SELECT c.id_cbcontrato_int,
			  1 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_3,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_3,'''')) <> '''' 
			 AND t.tipo_email_3 = ''1''
			 			 
			 );';

	EXECUTE '    CREATE INDEX ' || $1 || '_qualidadeemail_res_idx1
			       ON ' || $1 || '_qualidadeemail_res
			    USING btree(cpf_str);';

	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadeemail_com;
			 CREATE TABLE ' || $1 || '_qualidadeemail_com AS 
			(
			 SELECT c.id_cbcontrato_int,
			  2 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_1,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_1,'''')) <> '''' 
			 AND t.tipo_email_1 = ''2''

			 UNION

			 SELECT c.id_cbcontrato_int,
			  2 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_2,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_2,'''')) <> '''' 
			 AND t.tipo_email_2 = ''2''

			 UNION

			 SELECT c.id_cbcontrato_int,
			  2 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_3,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_3,'''')) <> '''' 
			 AND t.tipo_email_3 = ''2''
			 			 
			 );';

	EXECUTE '    CREATE INDEX ' || $1 || '_qualidadeemail_com_idx1
			       ON ' || $1 || '_qualidadeemail_com
			    USING btree(cpf_str);';

	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadeemail_out;
			 CREATE TABLE ' || $1 || '_qualidadeemail_out AS 
			(
			 SELECT c.id_cbcontrato_int,
			  25 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_1,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_1,'''')) <> '''' 
			 AND t.tipo_email_1 = ''3''

			 UNION

			 SELECT c.id_cbcontrato_int,
			  25 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_2,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_2,'''')) <> '''' 
			 AND t.tipo_email_2 = ''3''

			 UNION

			 SELECT c.id_cbcontrato_int,
			  25 AS id_geqltipoemail_int,
			  TRIM (c.cpf_str) as cpf_str,
			  trim(coalesce(t.email_3,'''')) AS email_str,
			  ''9 - Indefinido''::text AS classificacao_str,
			  CURRENT_TIMESTAMP AS tstamp,
			  c.nome_str AS nome_contato_str,		  			  
			  0 AS excluido_bit,
			  ' || $2 || ' as id_gecliente_int,
			  c.contrato_str,
			  c.id_cbtiponegocio_int,
			  null::text					AS rg_str,
			  null::text					AS org_exp_rg_str,
			  null::text					AS dt_exp_rg_dat,
			  null::text					AS uf_rg_str,
			  c.nome_str 					AS nome_str,
			  c.chave_str		  
			 FROM ' || $1 || ' t
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			 WHERE t.chave_str = ''' || $3 || ''' AND trim(coalesce(t.email_3,'''')) <> '''' 
			 AND t.tipo_email_3 = ''3''
			 			 
			 );';

	EXECUTE '    CREATE INDEX ' || $1 || '_qualidadeemail_out_idx1
			       ON ' || $1 || '_qualidadeemail_out
			    USING btree(cpf_str);';
			

	RETURN  'ok';
END;
$_$;

--
-- TOC entry 1926 (class 1255 OID 26910)
-- Name: fc_eleva_qualidadend(character varying, bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_eleva_qualidadend(character varying, bigint, text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  registro 	      RECORD;

BEGIN	
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadeend;
			 CREATE TABLE ' || $1 || '_qualidadeend AS 
 			(SELECT ' || $2 || ' 						AS id_gecliente_int,
 				''9 - Indefinido''::text AS classificacao_str,				 
 				t.endereco_str || '', '' || coalesce(t.numero_str, '''') as endereco_str,
 				t.complemento_str,
 				t.bairro_str,
 				t.cidade_str,
 				t.cep_str,
 				t.estado_str,
 			        t.id_cbcontrato_int,
 			        t.id_cbtiponegocio_int,
 				t.contrato_str,
 				t.cpf_str,
 				null::text					AS rg_str,
 				null::text					AS org_exp_rg_str,
 				null::text					AS dt_exp_rg_dat,
 				null::text					AS uf_rg_str,
 				t.nome_str,			        
 			        ''' || $3 ||'''::TEXT 					AS chave_str
 			 FROM ' || $1 || '_cbcontrato 		t
 			 WHERE t.chave_str = ''' || $3 || ''' AND coalesce(t.endereco_str,'''') <> ''''
 			 AND t.cpf_str::bigint <> 0 
 			 );';
 
 	EXECUTE 'CREATE INDEX ' || $1 || '_qualidadeend_idx1
 			       ON ' || $1 || '_qualidadeend
 		            USING btree(id_cbcontrato_int);';

	RETURN  'ok';
END;
$_$;

--
-- TOC entry 1927 (class 1255 OID 26918)
-- Name: fc_eleva_qualidadtel(character varying, bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_eleva_qualidadtel(character varying, bigint, text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  registro 	      RECORD;

BEGIN	
	--tipo residï¿½ncial
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadetel_res;
			CREATE TABLE ' || $1 || '_qualidadetel_res AS
			   (SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  1 AS id_geqltipocontato_int,
				  
				  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) AS contato_str,
				  		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_res''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_1, '''')) = ''1''
			     AND c.cpf_str::bigint <> 0

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  1 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_res''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_2, '''')) = ''1'' 
			     AND c.cpf_str::bigint <> 0	     

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  1 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_res''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_3, '''')) = ''1''
			     AND c.cpf_str::bigint <> 0	     

			     );';

	EXECUTE 'CREATE INDEX ' || $1 || '_qualidadetel_res_idx1 ON ' || $1 || '_qualidadetel_res USING btree(cpf_str);';

	--tipo celular
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadetel_cel;
			CREATE TABLE ' || $1 || '_qualidadetel_cel AS
			   (SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  8 AS id_geqltipocontato_int,
				  
				  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) AS contato_str,
				  		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_cel''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_1, '''')) = ''3''
			     AND c.cpf_str::bigint <> 0

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  8 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_cel''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_2, '''')) = ''3'' 
			     AND c.cpf_str::bigint <> 0	     

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  8 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_cel''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_3, '''')) = ''3''
			     AND c.cpf_str::bigint <> 0	     

			     );';

	EXECUTE 'CREATE INDEX ' || $1 || '_qualidadetel_cel_idx1 ON ' || $1 || '_qualidadetel_cel USING btree(cpf_str);';         				

	--tipo comercial
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadetel_com;
			CREATE TABLE ' || $1 || '_qualidadetel_com AS
			   (SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  2 AS id_geqltipocontato_int,
				  
				  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) AS contato_str,
				  		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_com''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_1, '''')) = ''2''
			     AND c.cpf_str::bigint <> 0

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  2 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_com''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_2, '''')) = ''2'' 
			     AND c.cpf_str::bigint <> 0	     

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  2 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_com''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_3, '''')) = ''2''
			     AND c.cpf_str::bigint <> 0	     

			     );';

	EXECUTE 'CREATE INDEX ' || $1 || '_qualidadetel_com_idx1 ON ' || $1 || '_qualidadetel_com USING btree(cpf_str);';   

	--tipo outros
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadetel_out;
			CREATE TABLE ' || $1 || '_qualidadetel_out AS
			   (SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  25 AS id_geqltipocontato_int,
				  
				  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) AS contato_str,
				  		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_out''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_1, '''')) = ''4''
			     AND c.cpf_str::bigint <> 0

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  25 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_out''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_2, '''')) = ''4'' 
			     AND c.cpf_str::bigint <> 0	     

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  25 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_out''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_3, '''')) = ''4''
			     AND c.cpf_str::bigint <> 0	     

			     );';

		EXECUTE 'CREATE INDEX ' || $1 || '_qualidadetel_out_idx1 ON ' || $1 || '_qualidadetel_out USING btree(cpf_str);';             

	--tipo fax
	EXECUTE 'DROP TABLE IF EXISTS ' || $1 || '_qualidadetel_fax;
			CREATE TABLE ' || $1 || '_qualidadetel_fax AS
			   (SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  14 AS id_geqltipocontato_int,
				  
				  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) AS contato_str,
				  		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_fax''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND  fcformatatelefone(trim(coalesce(t.DDD_Telefone_1,'''')) || trim(coalesce(t.Telefone_1,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_1, '''')) = ''5''
			     AND c.cpf_str::bigint <> 0

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  14 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_fax''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_2,'''')) || trim(coalesce(t.Telefone_2,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_2, '''')) = ''5'' 
			     AND c.cpf_str::bigint <> 0	     

			    UNION

			    SELECT c.id_cbcontrato_int,
				  c.contrato_str,
				  14 AS id_geqltipocontato_int,
				  fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) AS contato_str,		  
				  ''9 - Indefinido''::text AS classificacao_str,
				  NULL::character varying(10) AS ramal_str,
				  ''' || $1 || '_qualidadetel_fax''::text AS tabela_origem_str,
				  CURRENT_TIMESTAMP AS tstamp,
				  c.nome_str AS nome_contato_str,
				  c.cpf_str AS cpf_str,				  
				  c.nome_str AS nome_str,
				  null::text AS rg_str,
				  null::text AS org_exp_rg_str,
				  NULL::date AS dt_exp_rg_dat,
				  NULL::character varying(2) AS uf_rg_str,
				  CURRENT_TIMESTAMP AS tstamp_inclusao,
				  t.chave_str,
				  ' || $2 || ' as id_gecliente_int,
				  c.id_cbtiponegocio_int,
				  0 AS excluido_bit

			     FROM ' || $1 || ' t
		     
			     JOIN ' || $1 || '_cbcontrato c ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))			      
			     WHERE t.chave_str = ''' || $3 || '''
			     AND fcformatatelefone( trim(coalesce(t.DDD_Telefone_3,'''')) || trim(coalesce(t.Telefone_3,''''))) <>  ''''
			     AND TRIM(COALESCE(t.tipo_telefone_3, '''')) = ''5''
			     AND c.cpf_str::bigint <> 0	     

			     );';

		EXECUTE 'CREATE INDEX ' || $1 || '_qualidadetel_fax_idx1 ON ' || $1 || '_qualidadetel_fax USING btree(cpf_str);';         				
		

	RETURN  'ok';
END;
$_$;

--
-- TOC entry 1928 (class 1255 OID 26930)
-- Name: fc_eleva_remessa(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_eleva_remessa(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
reg 	 RECORD;
sSql	text;
sNomeArquivo	text;
sCodigoArquivo text;
sDescricaoArquivo text;
sTipoEnvio text;
sSequenciaArquivo text;
sbatimento text;
id_contrato	bigint;
Parcela 	int;

BEGIN

	--ACERTA TEMPORARIA
	IF processo = 0 THEN
	
	RAISE NOTICE '0 - Criando tmp contrato:%', current_time;

	--tmp contrato	
	EXECUTE 'DROP 	TABLE IF EXISTS ' || tabtemp || '_cbcontrato;
			 CREATE TABLE 		' || tabtemp || '_cbcontrato AS
			         SELECT DISTINCT ON (TRIM(t.cpf_cnpj_devedor))        
                                        ' || idgecliente || ' 						AS id_gecliente_int,
                                        CASE WHEN 	c.id_cbcontrato_int IS NULL THEN 
						nextval(''cbcontrato_seq'')
 				        ELSE 		c.id_cbcontrato_int
 				        END 								AS id_cbcontrato_int,
                                        ' || idgeempresa || ' 						AS id_geempresa_int,
                                        ' || idgefilial || ' 						AS id_gefilial_int,
					CASE 
					  WHEN COALESCE(c.id_cbsituacaocontrato_int,1) = 6 
					    THEN 1 
					  ELSE COALESCE(c.id_cbsituacaocontrato_int,1) 
					END 										AS id_cbsituacaocontrato_int,
					TRIM(abs_cpf(t.cpf_cnpj_devedor))						AS contrato_str,
					
					1										AS id_cbtiponegocio_int,
                                        abs_cpf(t.cpf_cnpj_devedor)							AS cpf_str,
                                        t.Nome_devedor		 							AS nome_str, 
                                        t.Tipo_devedor 									as tipo_pessoa_str,

                                        t.nome_fantasia_devedor								as nome_fantasia_devedor_str,

					/*Endereï¿½o*/

					t.logradouro									AS endereco_str,
					t.numero									AS numero_str,	
					t.complemento		 							AS complemento_str,
					t.bairro::character varying(40)		 					AS bairro_str,
					REPLACE(t.cep, ''-'', '''') 							AS cep_str,
					t.cidade	 								AS cidade_str,
					t.uf										AS estado_str,

					1 										AS id_fimoeda_int,
					1										AS id_cbetapa_int,
					CURRENT_DATE 									AS data_primeira_distrib_dat,
					CURRENT_DATE 									AS data_ultima_distrib_dat,
					CURRENT_TIMESTAMP 								AS tstamp,
					' || idgeusuario || ' 								AS id_geusuario_int,
                                        CASE WHEN c.id_cbcontrato_int IS NULL THEN 
						''I'' 
					ELSE 
						''A'' 
                                        END 										AS inclui_altera_contrato,
                                        ''' || chave ||'''::TEXT 							AS chave_str
				 FROM 		' || tabtemp || ' 	t
				 LEFT JOIN 	' || tabelafilha || ' 	c 	ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))
                                 WHERE t.chave_str = ''' || chave || ''' ';
                                 

		EXECUTE 'CREATE INDEX ' || tabtemp || '_cbcontrato_idx1
				     ON ' || tabtemp || '_cbcontrato
				  USING btree(id_cbcontrato_int);';			  			       

	RAISE NOTICE '0 - Criando tmp parcela:%', current_time;
	
	--tmp parcela	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbparcela;
		CREATE TABLE ' || tabtemp || '_cbparcela AS
			 SELECT
                DISTINCT ON (id_cbcontrato_int, parcela_int, numero_unico_str)  
				c.id_cbcontrato_int,
				CASE WHEN p.id_cbparcela_int IS NULL THEN 
					nextval(''cbparcela_seq'')
				ELSE 
					p.id_cbparcela_int
				END 									AS id_cbparcela_int,
				1                                                               	AS id_esregua_int,				
				t.Data_vencimento							AS data_vencimento_dat,
				CASE WHEN COALESCE(t.Valor_saldo_devedor, 0) = 0 THEN
					(t.valor_original_documento - t.Valor_abatimento) + t.Valor_custa_protesto
				ELSE
					t.Valor_saldo_devedor
				END 									AS valor_principal_num,

				''''									AS tipo_str,

				t.valor_original_documento						AS valor_original_documento_num,
				t.Valor_abatimento							AS Valor_abatimento_num,
				t.Valor_custa_protesto							AS Valor_custa_protesto_num,

				t.cpf_cnpj_grupo_economico						AS cpf_cnpj_grupo_economico_str,
				t.Codigo_Credor								AS Codigo_Credor_str,
				t.Razao_Social_credor							AS Razao_Social_credor_str,
				t.tipo_documento							AS tipo_documento_str, 
				t.Produto								AS Produto_str, 
				t.Segmento								AS Segmento_str, 
				t.Numero_documento							AS numero_unico_str, 
				t.Observacao								AS Observacao_str, 
				t.Info_adicional_1							AS Info_adicional_1_str, 
				t.Info_adicional_2							AS Info_adicional_2_str, 
				t.Info_adicional_3							AS Info_adicional_3_str, 
				t.Info_adicional_4							AS Info_adicional_4_str, 
				t.Info_adicional_5							AS Info_adicional_5_str, 
				t.Info_adicional_6							AS Info_adicional_6_str, 
				t.Info_adicional_7							AS Info_adicional_7_str, 
				t.Info_adicional_8							AS Info_adicional_8_str, 
				t.Info_adicional_9							AS Info_adicional_9_str, 
				t.Info_adicional_10							AS Info_adicional_10_str, 
				t.Info_adicional_11							AS Info_adicional_11_str, 
				t.Info_adicional_12							AS Info_adicional_12_str, 
				t.Info_adicional_13							AS Info_adicional_13_str, 
				t.Info_adicional_14							AS Info_adicional_14_str, 
				t.Info_adicional_15							AS Info_adicional_15_str, 
				t.Info_adicional_16							AS Info_adicional_16_str, 
				t.Info_adicional_17							AS Info_adicional_17_str, 
				t.Info_adicional_18							AS Info_adicional_18_str, 
				t.Desconto_minimo_a_aplicar						AS Desconto_minimo_a_aplicar_str, 
				t.Desconto_maximo_a_aplicar						AS Desconto_maximo_a_aplicar_str, 
				t.Juros_a_aplicar_ao_mes						AS Juros_a_aplicar_ao_mes_prorata_dia_str, 
				t.Multa_a_aplicar							AS Multa_a_aplicar_str, 

				CASE 
				  WHEN t.Data_vencimento>= CURRENT_DATE THEN 7
				  WHEN COALESCE(p.situacao_int,0) = 6 
				    THEN 0 				    
				  ELSE COALESCE(p.situacao_int,0) 
				END 									AS situacao_int,
				CURRENT_DATE 								AS data_primeira_distrib_dat,
				CURRENT_DATE 								AS data_ultima_distrib_dat,
				' || idgeusuario || ' 							AS id_geusuario_int,
				CURRENT_TIMESTAMP 							AS tstamp,
				t.Numero_parcela::integer						AS parcela_int,
				CASE 
				WHEN p.id_cbparcela_int IS NULL THEN 
					''I'' 
				ELSE 
					''A'' 
				END 									AS inclui_altera_parcela,
				''' || chave ||'''::TEXT 						AS chave_str
			FROM ' || tabtemp || '_cbcontrato c 
			INNER JOIN ' || tabtemp || ' t on (c.contrato_str = (abs_cpf(t.cpf_cnpj_devedor)))
			LEFT JOIN cbparcela p ON (p.id_cbcontrato_int = c.id_cbcontrato_int and 
						  p.parcela_int = t.Numero_parcela::integer AND 
						  p.numero_unico_str = t.Numero_documento)
			WHERE t.chave_str = ''' || chave || ''' 
			;';

	--raise notice '%', sSql;
			
	--EXECUTE sSql;

	RAISE NOTICE '0 - Criando tmp itembordero:%', current_time;
	EXECUTE 'CREATE INDEX ' || tabtemp || '_cbparcela_idx1
				     ON ' || tabtemp || '_cbparcela
				  USING btree(id_cbparcela_int);';

	--tmp itembordero - cria boletos 1 para 1 parcela, desde que jï¿½ nï¿½o exista um boleto para aquela parcela
	--marca os ids dos boletos velhos para poder cancelï¿½-los	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbitembordero;		
				CREATE TABLE ' || tabtemp || '_cbitembordero AS
					SELECT
						i.id_cbitembordero_int as id_ref_cbitembordero_old_int,
						nextval(''cbitembordero_seq'') as id_cbitembordero_int,
						i.id_cbbordero_int,
						i.acordo_int,
						p.id_cbcontrato_int,
						i.nosso_numero_int,
						i.comando_str,
						i.id_cbinstrucao1_int,
						i.id_cbinstrucao2_int,
						i.valor_desconto_num,
						i.data_desconto_dat,
						i.vencimento_dat,
						i.emissao_dat,
						i.principal_num,
						i.cp_num,
						i.multa_num,
						i.notificacao_num,
						i.despesa_banco_num,
						i.desconto_num,
						i.abatimento_num,
						i.juros_mora_num,
						i.honorarios_num,
						i.comissionamento_num,
						i.valor_total_num,
						i.retido_num,
						i.destino_str,
						i.boleto_int,
						i.nosso_numero_str,
						i.linha_digitavel_str,
						i.cod_barra_str,
						i.barra_str,
						i.dv_int,
						i.id_geusuario_int,
						i.timestamp,
						i.instrucao_1_str,
						i.instrucao_2_str,
						i.parcelamento_str,
						i.pago_str,
						i.acrescimo_num,
						i.id_geusuario_boleto_int,
						i.acrescimo_np_num,						
						i.quitacao_str,
						i.data_boleto_dat,
						i.hora_boleto_tim,
						i.observacao_boleto_str,
						i.tipo_destino_str,
						i.boleto_gravacao_tim,
						i.perc_desc_num,
						i.principal_original_num,
						i.boleto_parcelamento_str,
						i.id_geqlcontato_int,
						i.id_geqlendereco_int,
						i.cp_original_num,
						i.desconto_original_num,
						i.acordo_formalizado_int,
						i.id_gecidade_int,
						i.data_envio_dat,
						i.data_reenvio_dat,
						i.arquivo_terc_str,
						i.tipo_geracao_str,
						i.tstamp,
						i.envio_jpg_str,
						i.pc_ho_num,
						i.pc_comissionamento_num,
						i.tstamp_mdm_inclusao,
						i.tstamp_mdm_alteracao,
						p.Info_adicional_16_str as id_boletoeleva_str
				   FROM cbitembordero i
			 INNER JOIN ' || tabtemp || '_cbparcela p 
					 ON p.id_cbcontrato_int = i.id_cbcontrato_int AND 
					 p.data_vencimento_dat = i.vencimento_dat AND 
					 p.valor_principal_num = i.valor_total_num				
			      WHERE p.chave_str = ''' || chave || ''' 
					AND (select count(1) from cbitembordero where id_boletoeleva_str = p.Info_adicional_16_str) = 0				
			';
		
	--tmp parcelaitembordero	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbparcelaitembordero;		
				CREATE TABLE ' || tabtemp || '_cbparcelaitembordero AS
					SELECT
						nextval(''cbparcelaitembordero_seq'') as id_cbparcelaitembordero_int,						
						tib.id_cbitembordero_int,
						p.id_cbparcela_int,
						tib.vencimento_dat,
						tib.valor_total_num as principal_num,
						tib.cp_num,
						tib.multa_num,
						tib.notificacao_num,
						tib.despesa_banco_num,
						tib.desconto_num,
						tib.abatimento_num,
						tib.juros_mora_num,
						tib.honorarios_num,
						tib.comissionamento_num,
						tib.valor_total_num,
						tib.retido_num,
						tib.id_geusuario_int,
						timestamp,
						1 as selecionado_int,
						acrescimo_num,
						acrescimo_np_num,
						0 as valor_parcela_num,
						tib.perc_desc_num,
						cp_original_num,
						desconto_original_num,
						tstamp_mdm_inclusao
						FROM ' || tabtemp || '_cbitembordero tib
						INNER JOIN ' || tabtemp || '_cbparcela p
						ON tib.id_cbcontrato_int = p.id_cbcontrato_int and p.Info_adicional_16_str = tib.id_boletoeleva_str';						  
 
 	RAISE NOTICE '0 - Criando tmp qualidade e-mail:%', current_time;	
	--Qualidade e-mail	
	EXECUTE 'SELECT fc_eleva_qualidadeemail(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';
	
			    
 	RAISE NOTICE '0 - Criando tmp qualidade endereï¿½o:%', current_time;
 	--Qualidade  endereï¿½o
	EXECUTE 'SELECT fc_eleva_qualidadend(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';
	

 	RAISE NOTICE '0 - Criando tmp qualidade telefone:%', current_time;
 	--Qualidade  telefone
	EXECUTE 'SELECT fc_eleva_qualidadtel(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';

        -- INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	

	-- PROCESSO COMPLETO	
	ELSEIF processo = 2 THEN

		raise notice 'Processando contratos...';

		EXECUTE 'INSERT INTO ' || tabelafilha || ' (
				id_gecliente_int,
				id_cbcontrato_int,
				id_geempresa_int,
				id_gefilial_int,
				id_cbsituacaocontrato_int,
				contrato_str,
				id_cbtiponegocio_int,
				cpf_str,
				nome_str, 
				tipo_pessoa_str,
				nome_fantasia_devedor_str,
				endereco_str,
				complemento_str,
				bairro_str,
				cep_str,
				cidade_str,
				estado_str,
				id_fimoeda_int,
				id_cbetapa_int,
				data_primeira_distrib_dat,
				data_ultima_distrib_dat,
				tstamp,
				id_geusuario_int
				)
				
                         SELECT 
				t.id_gecliente_int,
				t.id_cbcontrato_int,
				t.id_geempresa_int,
				t.id_gefilial_int,
				t.id_cbsituacaocontrato_int,
				t.contrato_str,
				t.id_cbtiponegocio_int,
				t.cpf_str,
				t.nome_str, 
				t.tipo_pessoa_str,
				t.nome_fantasia_devedor_str,
				SUBSTRING(t.endereco_str || '', '' || t.numero_str,1,60) as endereco_str,
				SUBSTRING(t.complemento_str,1,60),
				t.bairro_str,
				t.cep_str,
				SUBSTRING(t.cidade_str, 1,30) as cidade_str,
				t.estado_str,
				t.id_fimoeda_int,
				t.id_cbetapa_int,
				t.data_primeira_distrib_dat,
				t.data_ultima_distrib_dat,
				t.tstamp,
				t.id_geusuario_int
				
                           FROM ' || tabtemp || '_cbcontrato	t
                           WHERE 	t.inclui_altera_contrato = ''I''
                           AND 		t.chave_str = ''' || chave || '''';

                raise notice 'Update contratos...';
               
                EXECUTE '  UPDATE ' || tabelafilha || ' SET 
				id_gecliente_int = t.id_gecliente_int,
				id_geempresa_int = t.id_geempresa_int,
				id_gefilial_int = t.id_gefilial_int,
				id_cbsituacaocontrato_int = t.id_cbsituacaocontrato_int,
				contrato_str = t.contrato_str,
				id_cbtiponegocio_int = t.id_cbtiponegocio_int,
				cpf_str = t.cpf_str,
				nome_str = t.nome_str, 
				tipo_pessoa_str = t.tipo_pessoa_str,
				nome_fantasia_devedor_str = t.nome_fantasia_devedor_str,
				endereco_str = SUBSTRING(t.endereco_str || '', '' || t.numero_str,1,60),
				complemento_str = SUBSTRING(t.complemento_str,1,60),
				bairro_str = t.bairro_str,
				cep_str = t.cep_str,
				cidade_str = SUBSTRING(t.cidade_str, 1,30),
				estado_str = t.estado_str,
				id_fimoeda_int = t.id_fimoeda_int,
				id_cbetapa_int = t.id_cbetapa_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				tstamp = t.tstamp,
				id_geusuario_int = t.id_geusuario_int

            FROM ' || tabtemp || '_cbcontrato t
			WHERE	t.inclui_altera_contrato = ''A'' 
			  AND 	t.chave_str = ''' || chave || '''
			  AND	' || tabelafilha || '.id_cbcontrato_int = t.id_cbcontrato_int'; 
                           

		raise notice 'Processando parcelas...';
		
		--cbparcela
                EXECUTE 'INSERT INTO cbparcela (
				id_cbcontrato_int,
				id_cbparcela_int,
				id_esregua_int,	
				tipo_str,
				parcela_int,
				data_vencimento_dat,
				valor_principal_num,
				valor_original_documento_num,
				Valor_abatimento_num,
				Valor_custa_protesto_num,
				cpf_cnpj_grupo_economico_str,
				Codigo_Credor_str,
				Razao_Social_credor_str,
				tipo_documento_str, 
				Produto_str, 
				Segmento_str, 
				numero_unico_str, 
				Observacao_str, 
				Info_adicional_1_str, 
				Info_adicional_2_str, 
				Info_adicional_3_str, 
				Info_adicional_4_str, 
				Info_adicional_5_str, 
				Info_adicional_6_str, 
				Info_adicional_7_str, 
				Info_adicional_8_str, 
				Info_adicional_9_str, 
				Info_adicional_10_str, 
				Info_adicional_11_str, 
				Info_adicional_12_str, 
				Info_adicional_13_str, 
				Info_adicional_14_str, 
				Info_adicional_15_str, 
				Info_adicional_16_str, 
				Info_adicional_17_str, 
				Info_adicional_18_str, 
				Desconto_minimo_a_aplicar_str, 
				Desconto_maximo_a_aplicar_str, 
				Juros_a_aplicar_ao_mes_prorata_dia_str, 
				Multa_a_aplicar_str, 
				situacao_int,
				data_primeira_distrib_dat,
				data_ultima_distrib_dat,
				id_geusuario_int,
				tstamp )
                         SELECT 

				t.id_cbcontrato_int,
				t.id_cbparcela_int,
				t.id_esregua_int,
				t.tipo_str,
				t.parcela_int,
				t.data_vencimento_dat,
				t.valor_principal_num,
				t.valor_original_documento_num,
				t.Valor_abatimento_num,
				t.Valor_custa_protesto_num,
				t.cpf_cnpj_grupo_economico_str,
				t.Codigo_Credor_str,
				t.Razao_Social_credor_str,
				t.tipo_documento_str, 
				t.Produto_str, 
				t.Segmento_str, 
				t.numero_unico_str, 
				t.Observacao_str, 
				t.Info_adicional_1_str, 
				t.Info_adicional_2_str, 
				t.Info_adicional_3_str, 
				t.Info_adicional_4_str, 
				t.Info_adicional_5_str, 
				t.Info_adicional_6_str, 
				t.Info_adicional_7_str, 
				t.Info_adicional_8_str, 
				t.Info_adicional_9_str, 
				t.Info_adicional_10_str, 
				t.Info_adicional_11_str, 
				t.Info_adicional_12_str, 
				t.Info_adicional_13_str, 
				t.Info_adicional_14_str, 
				t.Info_adicional_15_str, 
				t.Info_adicional_16_str, 
				t.Info_adicional_17_str, 
				t.Info_adicional_18_str, 
				t.Desconto_minimo_a_aplicar_str, 
				t.Desconto_maximo_a_aplicar_str, 
				t.Juros_a_aplicar_ao_mes_prorata_dia_str, 
				t.Multa_a_aplicar_str, 
				t.situacao_int,
				t.data_primeira_distrib_dat,
				t.data_ultima_distrib_dat,
				t.id_geusuario_int,
				t.tstamp
	
	            FROM ' || tabtemp || '_cbparcela	t
	            WHERE	t.chave_str = ''' || chave || ''' 
	            AND  inclui_altera_parcela = ''I''';

		--cbdistribparcela
                EXECUTE 'INSERT
			INTO	cbdistribparcela (
					id_cbparcela_int,
					id_cbcontrato_int,
					data_pre_distrib_dat)
			SELECT	DISTINCT ON (id_cbparcela_int, id_cbcontrato_int, data_ultima_distrib_dat)
				id_cbparcela_int,
				id_cbcontrato_int,
				data_ultima_distrib_dat
			FROM	' || tabtemp || '_cbparcela t
			WHERE	t.chave_str = ''' || chave || '''
			AND 	t.inclui_altera_parcela = ''I''';  
		

                EXECUTE 'update cbparcela set 
                                id_esregua_int = t.id_esregua_int,
				parcela_int = t.parcela_int,
				tipo_str = t.tipo_str,
				data_vencimento_dat = t.data_vencimento_dat,
				valor_principal_num = t.valor_principal_num,
				valor_original_documento_num = t.valor_original_documento_num,
				Valor_abatimento_num = t.Valor_abatimento_num,
				Valor_custa_protesto_num = t.Valor_custa_protesto_num,
				cpf_cnpj_grupo_economico_str = t.cpf_cnpj_grupo_economico_str,
				Codigo_Credor_str = t.Codigo_Credor_str,
				Razao_Social_credor_str = t.Razao_Social_credor_str,
				tipo_documento_str = t.tipo_documento_str, 
				Produto_str = t.Produto_str, 
				Segmento_str = t.Segmento_str, 
				numero_unico_str = t.numero_unico_str, 
				Observacao_str = t.Observacao_str, 
				Info_adicional_1_str = t.Info_adicional_1_str, 
				Info_adicional_2_str = t.Info_adicional_2_str, 
				Info_adicional_3_str = t.Info_adicional_3_str, 
				Info_adicional_4_str = t.Info_adicional_4_str, 
				Info_adicional_5_str = t.Info_adicional_5_str, 
				Info_adicional_6_str = t.Info_adicional_6_str, 
				Info_adicional_7_str = t.Info_adicional_7_str, 
				Info_adicional_8_str = t.Info_adicional_8_str, 
				Info_adicional_9_str = t.Info_adicional_9_str, 
				Info_adicional_10_str = t.Info_adicional_10_str, 
				Info_adicional_11_str = t.Info_adicional_11_str, 
				Info_adicional_12_str = t.Info_adicional_12_str, 
				Info_adicional_13_str = t.Info_adicional_13_str, 
				Info_adicional_14_str = t.Info_adicional_14_str, 
				Info_adicional_15_str = t.Info_adicional_15_str, 
				Info_adicional_16_str = t.Info_adicional_16_str, 
				Info_adicional_17_str = t.Info_adicional_17_str, 
				Info_adicional_18_str = t.Info_adicional_18_str, 
				Desconto_minimo_a_aplicar_str = t.Desconto_minimo_a_aplicar_str, 
				Desconto_maximo_a_aplicar_str = t.Desconto_maximo_a_aplicar_str, 
				Juros_a_aplicar_ao_mes_prorata_dia_str = t.Juros_a_aplicar_ao_mes_prorata_dia_str, 
				Multa_a_aplicar_str = t.Multa_a_aplicar_str, 
				situacao_int = t.situacao_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				id_geusuario_int = t.id_geusuario_int,
				tstamp = t.tstamp

                           FROM ' || tabtemp || '_cbparcela 		t
			  WHERE	t.chave_str = ''' || chave || '''
			  AND 	t.inclui_altera_parcela = ''A'' AND
				cbparcela.id_cbparcela_int = t.id_cbparcela_int';

			
			-- inclusao dos itensbordero
			EXECUTE 'INSERT INTO cbitembordero( 
			id_cbitembordero_int, 
			id_cbbordero_int,
			acordo_int, 
			id_cbcontrato_int,
		    id_ref_cbitembordero_old_int,
			nosso_numero_int, 
			comando_str, 
			id_cbinstrucao1_int, 
			id_cbinstrucao2_int, 
			valor_desconto_num, 
			data_desconto_dat, 
			vencimento_dat, 
			emissao_dat, 
			principal_num, 
			cp_num, 
			multa_num, 
			notificacao_num, 
			despesa_banco_num, 
			desconto_num, 
			abatimento_num, 
			juros_mora_num, 
			honorarios_num, 
			comissionamento_num, 
			valor_total_num, 
			retido_num, 
			destino_str, 
			boleto_int, 
			nosso_numero_str, 
			linha_digitavel_str, 
			cod_barra_str, 
			barra_str, 
			dv_int, 
			id_geusuario_int, 
			timestamp, 
			instrucao_1_str, 
			instrucao_2_str, 
			parcelamento_str, 
			pago_str, 
			acrescimo_num, 
			id_geusuario_boleto_int, 
			acrescimo_np_num, 
			quitacao_str,
			data_boleto_dat, 
			hora_boleto_tim, 
			observacao_boleto_str, 
			tipo_destino_str, 
			boleto_gravacao_tim, 
			perc_desc_num, 
			principal_original_num, 
			boleto_parcelamento_str, 
			id_geqlcontato_int, 
			id_geqlendereco_int, 
			cp_original_num, 
			desconto_original_num, 
			acordo_formalizado_int, 
			id_gecidade_int, 
			data_envio_dat, 
			data_reenvio_dat, 
			arquivo_terc_str, 
			tipo_geracao_str, 
			tstamp, 
			envio_jpg_str, 
			pc_ho_num, 
			pc_comissionamento_num, 
			tstamp_mdm_inclusao, 
			tstamp_mdm_alteracao, 
			id_boletoeleva_str)
			
    		(SELECT tib.id_cbitembordero_int,
			tib.id_cbbordero_int,
			tib.acordo_int,
			tib.id_cbcontrato_int,
			tib.id_ref_cbitembordero_old_int,
			tib.nosso_numero_int,
			tib.comando_str,
			tib.id_cbinstrucao1_int,
			tib.id_cbinstrucao2_int,
			tib.valor_desconto_num,
			tib.data_desconto_dat,
			tib.vencimento_dat,
			tib.emissao_dat,
			tib.principal_num,
			tib.cp_num,
			tib.multa_num,
			tib.notificacao_num,
			tib.despesa_banco_num,
			tib.desconto_num,
			tib.abatimento_num,
			tib.juros_mora_num,
			tib.honorarios_num,
			tib.comissionamento_num,
			tib.valor_total_num,
			tib.retido_num,
			tib.destino_str,
			tib.boleto_int,
			tib.nosso_numero_str,
			tib.linha_digitavel_str,
			tib.cod_barra_str,
			tib.barra_str,
			tib.dv_int,
			tib.id_geusuario_int,
			current_timestamp,
			tib.instrucao_1_str,
			tib.instrucao_2_str,
			tib.parcelamento_str,
			''X'',
			tib.acrescimo_num,
			tib.id_geusuario_boleto_int,
			tib.acrescimo_np_num,						
			tib.quitacao_str,
			tib.data_boleto_dat,
			tib.hora_boleto_tim,
			tib.observacao_boleto_str,
			tib.tipo_destino_str,
			tib.boleto_gravacao_tim,
			tib.perc_desc_num,
			tib.principal_original_num,
			tib.boleto_parcelamento_str,
			tib.id_geqlcontato_int,
			tib.id_geqlendereco_int,
			tib.cp_original_num,
			tib.desconto_original_num,
			tib.acordo_formalizado_int,
			tib.id_gecidade_int,
			tib.data_envio_dat,
			tib.data_reenvio_dat,
			tib.arquivo_terc_str,
			tib.tipo_geracao_str,
			current_timestamp,
			tib.envio_jpg_str,
			tib.pc_ho_num,
			tib.pc_comissionamento_num,
			current_timestamp,
			current_timestamp,
			tib.id_boletoeleva_str
	   		FROM ' || tabtemp || '_cbitembordero tib)';
	   			
	   		EXECUTE 'INSERT INTO cbparcelaitembordero(		
			id_cbparcelaitembordero_int,
			id_cbitembordero_int, 
			id_cbparcela_int, 
			data_vencimento_dat, 
			principal_num, 
			cp_num, 
			multa_num, 
			notificacao_num, 
			despesa_banco_num, 
			desconto_num, 
			abatimento_num, 
			juros_mora_num, 
			honorarios_num, 
			comissionamento_num, 
			valor_total_num, 
			retido_num, 
			id_geusuario_int, 
			timestamp, 
			selecionado_int, 
			acrescimo_num, 
			acrescimo_np_num, 
			valor_parcela_num, 
			percentual_desconto_num, 
			cp_original_num, 
			desconto_original_num, 
			tstamp_mdm_inclusao)
			(SELECT 
			pib.id_cbparcelaitembordero_int,
			pib.id_cbitembordero_int,
			pib.id_cbparcela_int,
			pib.vencimento_dat,
			pib.valor_total_num,
			pib.cp_num,
			pib.multa_num,
			pib.notificacao_num,
			pib.despesa_banco_num,
			pib.desconto_num,
			pib.abatimento_num,
			pib.juros_mora_num,
			pib.honorarios_num,
			pib.comissionamento_num,
			pib.valor_total_num,
			pib.retido_num,
			pib.id_geusuario_int,
			pib.timestamp,
			pib.selecionado_int,
			pib.acrescimo_num,
			pib.acrescimo_np_num,
			pib.valor_parcela_num,
			pib.perc_desc_num,
			pib.cp_original_num,
			pib.desconto_original_num,
			pib.tstamp_mdm_inclusao
			FROM ' || tabtemp || '_cbparcelaitembordero pib)';
	   	
	   		--cancela boletos antigos
	   		EXECUTE 'UPDATE cbitembordero 
			SET pago_str = ''C''
			WHERE id_cbitembordero_int IN (SELECT id_ref_cbitembordero_old_int FROM ' || tabtemp || '_cbitembordero)';

			--INCLUSAO NA FILA DE BOLETO ( UM SERVICO IRA PEGAR OS ITENS DA FILA E BUSCAR O BOLETO NO SITE, O BOLETO VAI SER GRAVADO NA TABELA E ENVIADO PARA PASTA FTP) 
			EXECUTE 'INSERT INTO rpa_filaboletoeleva(
			id_cbitembordero_int,
			id_boletoeleva_str,
			cod_coligada_str,
			tipo_int,-- tipo_str(mensalidade = 0, materialdidatico = 1)
			token_str, 
			destino_str,
			nome_str,
			cpf_str,
			data_vencimento_date,
			inserido_date)
			
			(SELECT DISTINCT ON (id_boletoeleva_str)
			tib.id_cbitembordero_int,
			tib.id_boletoeleva_str,
			p.info_adicional_3_str,
			0,
			'''',
			tib.destino_str,
			c.nome_str,
			c.cpf_str,
			tib.vencimento_dat,
			current_timestamp			
			FROM ' || tabtemp || '_cbitembordero tib
			INNER JOIN ' || tabtemp || '_cbparcela p ON tib.id_cbcontrato_int = p.id_cbcontrato_int
			INNER JOIN '|| tabelafilha ||' c ON c.id_cbcontrato_int = p.id_cbcontrato_int)';
		
			
	ELSEIF processo = 3 THEN
	
		-- FUNï¿½ï¿½O PARA FAZER A QUALIDADE DE TELEFONES, E-MAILS E ENDEREï¿½OS
		EXECUTE 'SELECT fc_qualidade(''' || tabtemp || ''', ''' || chave || ''', ''' || tabelafilha || ''', ' || idgecliente || ', ' || idgefilial || ', ' || idgeempresa || ', ' || idgeusuario || ')';
		
	END IF;
		
	RETURN  '';
END;
$$;

--
-- TOC entry 1929 (class 1255 OID 26935)
-- Name: fc_eleva_remessa_debug(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_eleva_remessa_debug(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
reg 	 RECORD;
sSql	text;
sNomeArquivo	text;
sCodigoArquivo text;
sDescricaoArquivo text;
sTipoEnvio text;
sSequenciaArquivo text;
sbatimento text;
id_contrato	bigint;
Parcela 	int;

BEGIN

	--ACERTA TEMPORARIA
	IF processo = 0 THEN
	
	RAISE NOTICE '0 - Criando tmp contrato:%', current_time;

	--tmp contrato	
	EXECUTE 'DROP 	TABLE IF EXISTS ' || tabtemp || '_cbcontrato;
			 CREATE TABLE 		' || tabtemp || '_cbcontrato AS
			         SELECT DISTINCT ON (TRIM(t.cpf_cnpj_devedor))        
                                        ' || idgecliente || ' 						AS id_gecliente_int,
                                        CASE WHEN 	c.id_cbcontrato_int IS NULL THEN 
						nextval(''cbcontrato_seq'')
 				        ELSE 		c.id_cbcontrato_int
 				        END 								AS id_cbcontrato_int,
                                        ' || idgeempresa || ' 						AS id_geempresa_int,
                                        ' || idgefilial || ' 						AS id_gefilial_int,
					CASE 
					  WHEN COALESCE(c.id_cbsituacaocontrato_int,1) = 6 
					    THEN 1 
					  ELSE COALESCE(c.id_cbsituacaocontrato_int,1) 
					END 										AS id_cbsituacaocontrato_int,
					TRIM(abs_cpf(t.cpf_cnpj_devedor))						AS contrato_str,
					
					1										AS id_cbtiponegocio_int,
                                        abs_cpf(t.cpf_cnpj_devedor)							AS cpf_str,
                                        t.Nome_devedor		 							AS nome_str, 
                                        t.Tipo_devedor 									as tipo_pessoa_str,

                                        t.nome_fantasia_devedor								as nome_fantasia_devedor_str,

					/*Endereï¿½o*/

					t.logradouro									AS endereco_str,
					t.numero									AS numero_str,	
					t.complemento		 							AS complemento_str,
					t.bairro::character varying(40)		 					AS bairro_str,
					REPLACE(t.cep, ''-'', '''') 							AS cep_str,
					t.cidade	 								AS cidade_str,
					t.uf										AS estado_str,

					1 										AS id_fimoeda_int,
					1										AS id_cbetapa_int,
					CURRENT_DATE 									AS data_primeira_distrib_dat,
					CURRENT_DATE 									AS data_ultima_distrib_dat,
					CURRENT_TIMESTAMP 								AS tstamp,
					' || idgeusuario || ' 								AS id_geusuario_int,
                                        CASE WHEN c.id_cbcontrato_int IS NULL THEN 
						''I'' 
					ELSE 
						''A'' 
                                        END 										AS inclui_altera_contrato,
                                        ''' || chave ||'''::TEXT 							AS chave_str
				 FROM 		' || tabtemp || ' 	t
				 LEFT JOIN 	' || tabelafilha || ' 	c 	ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))
                                 WHERE t.chave_str = ''' || chave || ''' ';
                                 

		EXECUTE 'CREATE INDEX ' || tabtemp || '_cbcontrato_idx1
				     ON ' || tabtemp || '_cbcontrato
				  USING btree(id_cbcontrato_int);';			  			       

	RAISE NOTICE '0 - Criando tmp parcela:%', current_time;
	
	--tmp parcela	
	sSql = 'DROP TABLE IF EXISTS ' || tabtemp || '_cbparcela;
		CREATE TABLE ' || tabtemp || '_cbparcela AS
			 SELECT  
				c.id_cbcontrato_int,
				CASE WHEN p.id_cbparcela_int IS NULL THEN 
					nextval(''cbparcela_seq'')
				ELSE 
					p.id_cbparcela_int
				END 									AS id_cbparcela_int,
				1                                                               	AS id_esregua_int,				
				t.Data_vencimento							AS data_vencimento_dat,
				CASE WHEN COALESCE(t.Valor_saldo_devedor, 0) = 0 THEN
					(t.valor_original_documento - t.Valor_abatimento) + t.Valor_custa_protesto
				ELSE
					t.Valor_saldo_devedor
				END 									AS valor_principal_num,

				''''									AS tipo_str,

				t.valor_original_documento						AS valor_original_documento_num,
				t.Valor_abatimento							AS Valor_abatimento_num,
				t.Valor_custa_protesto							AS Valor_custa_protesto_num,

				t.cpf_cnpj_grupo_economico						AS cpf_cnpj_grupo_economico_str,
				t.Codigo_Credor								AS Codigo_Credor_str,
				t.Razao_Social_credor							AS Razao_Social_credor_str,
				t.tipo_documento							AS tipo_documento_str, 
				t.Produto								AS Produto_str, 
				t.Segmento								AS Segmento_str, 
				t.Numero_documento							AS numero_unico_str, 
				t.Observacao								AS Observacao_str, 
				t.Info_adicional_1							AS Info_adicional_1_str, 
				t.Info_adicional_2							AS Info_adicional_2_str, 
				t.Info_adicional_3							AS Info_adicional_3_str, 
				t.Info_adicional_4							AS Info_adicional_4_str, 
				t.Info_adicional_5							AS Info_adicional_5_str, 
				t.Info_adicional_6							AS Info_adicional_6_str, 
				t.Info_adicional_7							AS Info_adicional_7_str, 
				t.Info_adicional_8							AS Info_adicional_8_str, 
				t.Info_adicional_9							AS Info_adicional_9_str, 
				t.Info_adicional_10							AS Info_adicional_10_str, 
				t.Info_adicional_11							AS Info_adicional_11_str, 
				t.Info_adicional_12							AS Info_adicional_12_str, 
				t.Info_adicional_13							AS Info_adicional_13_str, 
				t.Info_adicional_14							AS Info_adicional_14_str, 
				t.Info_adicional_15							AS Info_adicional_15_str, 
				t.Info_adicional_16							AS Info_adicional_16_str, 
				t.Info_adicional_17							AS Info_adicional_17_str, 
				t.Info_adicional_18							AS Info_adicional_18_str, 
				t.Desconto_minimo_a_aplicar						AS Desconto_minimo_a_aplicar_str, 
				t.Desconto_maximo_a_aplicar						AS Desconto_maximo_a_aplicar_str, 
				t.Juros_a_aplicar_ao_mes						AS Juros_a_aplicar_ao_mes_prorata_dia_str, 
				t.Multa_a_aplicar							AS Multa_a_aplicar_str, 

				CASE 
				  WHEN COALESCE(p.situacao_int,0) = 6 
				    THEN 0 				    
				  ELSE COALESCE(p.situacao_int,0) 
				END 									AS situacao_int,
				CURRENT_DATE 								AS data_primeira_distrib_dat,
				CURRENT_DATE 								AS data_ultima_distrib_dat,
				' || idgeusuario || ' 							AS id_geusuario_int,
				CURRENT_TIMESTAMP 							AS tstamp,
				t.Numero_parcela::integer						AS parcela_int,
				CASE 
				WHEN p.id_cbparcela_int IS NULL THEN 
					''I'' 
				ELSE 
					''A'' 
				END 									AS inclui_altera_parcela,
				''' || chave ||'''::TEXT 						AS chave_str
			FROM ' || tabtemp || '_cbcontrato c 
			INNER JOIN ' || tabtemp || ' t on (c.contrato_str = (abs_cpf(t.cpf_cnpj_devedor)))
			LEFT JOIN cbparcela p ON (p.id_cbcontrato_int = c.id_cbcontrato_int and p.parcela_int = t.Numero_parcela::integer AND p.numero_unico_str = t.Numero_documento)
			WHERE t.chave_str = ''' || chave || ''' 
			;';

	raise notice '%', sSql;
			
	EXECUTE sSql;

	RAISE NOTICE '0 - Criando tmp itembordero:%', current_time;
	EXECUTE 'CREATE INDEX ' || tabtemp || '_cbparcela_idx1
				     ON ' || tabtemp || '_cbparcela
				  USING btree(id_cbparcela_int);';

	--tmp itembordero - cria boletos 1 para 1 parcela, desde que jï¿½ nï¿½o exista um boleto para aquela parcela
	--marca os ids dos boletos velhos para poder cancelï¿½-los	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbitembordero;		
				CREATE TABLE ' || tabtemp || '_cbitembordero AS
					SELECT
						i.id_cbitembordero_int as id_ref_cbitembordero_old_int,
						nextval(''cbitembordero_seq'') as id_cbitembordero_int,
						i.id_cbbordero_int,
						i.acordo_int,
						p.id_cbcontrato_int,
						i.nosso_numero_int,
						i.comando_str,
						i.id_cbinstrucao1_int,
						i.id_cbinstrucao2_int,
						i.valor_desconto_num,
						i.data_desconto_dat,
						i.vencimento_dat,
						i.emissao_dat,
						i.principal_num,
						i.cp_num,
						i.multa_num,
						i.notificacao_num,
						i.despesa_banco_num,
						i.desconto_num,
						i.abatimento_num,
						i.juros_mora_num,
						i.honorarios_num,
						i.comissionamento_num,
						i.valor_total_num,
						i.retido_num,
						i.destino_str,
						i.boleto_int,
						i.nosso_numero_str,
						i.linha_digitavel_str,
						i.cod_barra_str,
						i.barra_str,
						i.dv_int,
						i.id_geusuario_int,
						i.timestamp,
						i.instrucao_1_str,
						i.instrucao_2_str,
						i.parcelamento_str,
						i.pago_str,
						i.acrescimo_num,
						i.id_geusuario_boleto_int,
						i.acrescimo_np_num,						
						i.quitacao_str,
						i.data_boleto_dat,
						i.hora_boleto_tim,
						i.observacao_boleto_str,
						i.tipo_destino_str,
						i.boleto_gravacao_tim,
						i.perc_desc_num,
						i.principal_original_num,
						i.boleto_parcelamento_str,
						i.id_geqlcontato_int,
						i.id_geqlendereco_int,
						i.cp_original_num,
						i.desconto_original_num,
						i.acordo_formalizado_int,
						i.id_gecidade_int,
						i.data_envio_dat,
						i.data_reenvio_dat,
						i.arquivo_terc_str,
						i.tipo_geracao_str,
						i.tstamp,
						i.envio_jpg_str,
						i.pc_ho_num,
						i.pc_comissionamento_num,
						i.tstamp_mdm_inclusao,
						i.tstamp_mdm_alteracao,
						p.Info_adicional_16_str as id_boletoeleva_str
				   FROM cbitembordero i
			 INNER JOIN ' || tabtemp || '_cbparcela p 
					 ON p.id_cbcontrato_int = i.id_cbcontrato_int AND p.data_vencimento_dat = i.vencimento_dat AND p.valor_principal_num = i.valor_total_num				
			      WHERE p.chave_str = ''' || chave || ''' 
					AND (select count(1) from cbitembordero where id_boletoeleva_str = p.Info_adicional_16_str) = 0				
			';
		
	--tmp parcelaitembordero	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbparcelaitembordero;		
				CREATE TABLE ' || tabtemp || '_cbparcelaitembordero AS
					SELECT
						nextval(''cbparcelaitembordero_seq'') as id_cbparcelaitembordero_int,						
						tib.id_cbitembordero_int,
						p.id_cbparcela_int,
						tib.vencimento_dat,
						tib.valor_total_num as principal_num,
						tib.cp_num,
						tib.multa_num,
						tib.notificacao_num,
						tib.despesa_banco_num,
						tib.desconto_num,
						tib.abatimento_num,
						tib.juros_mora_num,
						tib.honorarios_num,
						tib.comissionamento_num,
						tib.valor_total_num,
						tib.retido_num,
						tib.id_geusuario_int,
						timestamp,
						1 as selecionado_int,
						acrescimo_num,
						acrescimo_np_num,
						0 as valor_parcela_num,
						tib.perc_desc_num,
						cp_original_num,
						desconto_original_num,
						tstamp_mdm_inclusao
						FROM ' || tabtemp || '_cbitembordero tib
						INNER JOIN ' || tabtemp || '_cbparcela p
						ON tib.id_cbcontrato_int = p.id_cbcontrato_int and p.Info_adicional_16_str = tib.id_boletoeleva_str';						  
 
 	RAISE NOTICE '0 - Criando tmp qualidade e-mail:%', current_time;	
	--Qualidade e-mail	
	EXECUTE 'SELECT fc_eleva_qualidadeemail(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';
	
			    
 	RAISE NOTICE '0 - Criando tmp qualidade endereï¿½o:%', current_time;
 	--Qualidade  endereï¿½o
	EXECUTE 'SELECT fc_eleva_qualidadend(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';
	

 	RAISE NOTICE '0 - Criando tmp qualidade telefone:%', current_time;
 	--Qualidade  telefone
	EXECUTE 'SELECT fc_eleva_qualidadtel(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';

        -- INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	

	-- PROCESSO COMPLETO	
	ELSEIF processo = 2 THEN

		raise notice 'Processando contratos...';

		EXECUTE 'INSERT INTO ' || tabelafilha || ' (
				id_gecliente_int,
				id_cbcontrato_int,
				id_geempresa_int,
				id_gefilial_int,
				id_cbsituacaocontrato_int,
				contrato_str,
				id_cbtiponegocio_int,
				cpf_str,
				nome_str, 
				tipo_pessoa_str,
				nome_fantasia_devedor_str,
				endereco_str,
				complemento_str,
				bairro_str,
				cep_str,
				cidade_str,
				estado_str,
				id_fimoeda_int,
				id_cbetapa_int,
				data_primeira_distrib_dat,
				data_ultima_distrib_dat,
				tstamp,
				id_geusuario_int
				)
				
                         SELECT 
				t.id_gecliente_int,
				t.id_cbcontrato_int,
				t.id_geempresa_int,
				t.id_gefilial_int,
				t.id_cbsituacaocontrato_int,
				t.contrato_str,
				t.id_cbtiponegocio_int,
				t.cpf_str,
				t.nome_str, 
				t.tipo_pessoa_str,
				t.nome_fantasia_devedor_str,
				SUBSTRING(t.endereco_str || '', '' || t.numero_str,1,60) as endereco_str,
				SUBSTRING(t.complemento_str,1,60),
				t.bairro_str,
				t.cep_str,
				SUBSTRING(t.cidade_str, 1,30) as cidade_str,
				t.estado_str,
				t.id_fimoeda_int,
				t.id_cbetapa_int,
				t.data_primeira_distrib_dat,
				t.data_ultima_distrib_dat,
				t.tstamp,
				t.id_geusuario_int
				
                           FROM ' || tabtemp || '_cbcontrato	t
                           WHERE 	t.inclui_altera_contrato = ''I''
                           AND 		t.chave_str = ''' || chave || '''';

                EXECUTE '  UPDATE ' || tabelafilha || ' SET 
				id_gecliente_int = t.id_gecliente_int,
				id_geempresa_int = t.id_geempresa_int,
				id_gefilial_int = t.id_gefilial_int,
				id_cbsituacaocontrato_int = t.id_cbsituacaocontrato_int,
				contrato_str = t.contrato_str,
				id_cbtiponegocio_int = t.id_cbtiponegocio_int,
				cpf_str = t.cpf_str,
				nome_str = t.nome_str, 
				tipo_pessoa_str = t.tipo_pessoa_str,
				nome_fantasia_devedor_str = t.nome_fantasia_devedor_str,
				endereco_str = SUBSTRING(t.endereco_str || '', '' || t.numero_str,1,60),
				complemento_str = SUBSTRING(t.complemento_str,1,60),
				bairro_str = t.bairro_str,
				cep_str = t.cep_str,
				cidade_str = SUBSTRING(t.cidade_str, 1,30),
				estado_str = t.estado_str,
				id_fimoeda_int = t.id_fimoeda_int,
				id_cbetapa_int = t.id_cbetapa_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				tstamp = t.tstamp,
				id_geusuario_int = t.id_geusuario_int

            FROM ' || tabtemp || '_cbcontrato t
			WHERE	t.inclui_altera_contrato = ''A'' 
			  AND 	t.chave_str = ''' || chave || '''
			  AND	' || tabelafilha || '.id_cbcontrato_int = t.id_cbcontrato_int'; 
                           

		raise notice 'Processando parcelas...';
		
		--cbparcela
                EXECUTE 'INSERT INTO cbparcela (
				id_cbcontrato_int,
				id_cbparcela_int,
				id_esregua_int,	
				tipo_str,
				parcela_int,
				data_vencimento_dat,
				valor_principal_num,
				valor_original_documento_num,
				Valor_abatimento_num,
				Valor_custa_protesto_num,
				cpf_cnpj_grupo_economico_str,
				Codigo_Credor_str,
				Razao_Social_credor_str,
				tipo_documento_str, 
				Produto_str, 
				Segmento_str, 
				numero_unico_str, 
				Observacao_str, 
				Info_adicional_1_str, 
				Info_adicional_2_str, 
				Info_adicional_3_str, 
				Info_adicional_4_str, 
				Info_adicional_5_str, 
				Info_adicional_6_str, 
				Info_adicional_7_str, 
				Info_adicional_8_str, 
				Info_adicional_9_str, 
				Info_adicional_10_str, 
				Info_adicional_11_str, 
				Info_adicional_12_str, 
				Info_adicional_13_str, 
				Info_adicional_14_str, 
				Info_adicional_15_str, 
				Info_adicional_16_str, 
				Info_adicional_17_str, 
				Info_adicional_18_str, 
				Desconto_minimo_a_aplicar_str, 
				Desconto_maximo_a_aplicar_str, 
				Juros_a_aplicar_ao_mes_prorata_dia_str, 
				Multa_a_aplicar_str, 
				situacao_int,
				data_primeira_distrib_dat,
				data_ultima_distrib_dat,
				id_geusuario_int,
				tstamp )
                         SELECT 

				t.id_cbcontrato_int,
				t.id_cbparcela_int,
				t.id_esregua_int,
				t.tipo_str,
				t.parcela_int,
				t.data_vencimento_dat,
				t.valor_principal_num,
				t.valor_original_documento_num,
				t.Valor_abatimento_num,
				t.Valor_custa_protesto_num,
				t.cpf_cnpj_grupo_economico_str,
				t.Codigo_Credor_str,
				t.Razao_Social_credor_str,
				t.tipo_documento_str, 
				t.Produto_str, 
				t.Segmento_str, 
				t.numero_unico_str, 
				t.Observacao_str, 
				t.Info_adicional_1_str, 
				t.Info_adicional_2_str, 
				t.Info_adicional_3_str, 
				t.Info_adicional_4_str, 
				t.Info_adicional_5_str, 
				t.Info_adicional_6_str, 
				t.Info_adicional_7_str, 
				t.Info_adicional_8_str, 
				t.Info_adicional_9_str, 
				t.Info_adicional_10_str, 
				t.Info_adicional_11_str, 
				t.Info_adicional_12_str, 
				t.Info_adicional_13_str, 
				t.Info_adicional_14_str, 
				t.Info_adicional_15_str, 
				t.Info_adicional_16_str, 
				t.Info_adicional_17_str, 
				t.Info_adicional_18_str, 
				t.Desconto_minimo_a_aplicar_str, 
				t.Desconto_maximo_a_aplicar_str, 
				t.Juros_a_aplicar_ao_mes_prorata_dia_str, 
				t.Multa_a_aplicar_str, 
				t.situacao_int,
				t.data_primeira_distrib_dat,
				t.data_ultima_distrib_dat,
				t.id_geusuario_int,
				t.tstamp
	
	            FROM ' || tabtemp || '_cbparcela	t
	            WHERE	t.chave_str = ''' || chave || ''' 
	            AND  inclui_altera_parcela = ''I''';

		--cbdistribparcela
                EXECUTE 'INSERT
			INTO	cbdistribparcela (
					id_cbparcela_int,
					id_cbcontrato_int,
					data_pre_distrib_dat)
			SELECT	DISTINCT ON (id_cbparcela_int, id_cbcontrato_int, data_ultima_distrib_dat)
				id_cbparcela_int,
				id_cbcontrato_int,
				data_ultima_distrib_dat
			FROM	' || tabtemp || '_cbparcela t
			WHERE	t.chave_str = ''' || chave || '''
			AND 	t.inclui_altera_parcela = ''I''';  
		

                EXECUTE 'update cbparcela set 
                                id_esregua_int = t.id_esregua_int,
				parcela_int = t.parcela_int,
				tipo_str = t.tipo_str,
				data_vencimento_dat = t.data_vencimento_dat,
				valor_principal_num = t.valor_principal_num,
				valor_original_documento_num = t.valor_original_documento_num,
				Valor_abatimento_num = t.Valor_abatimento_num,
				Valor_custa_protesto_num = t.Valor_custa_protesto_num,
				cpf_cnpj_grupo_economico_str = t.cpf_cnpj_grupo_economico_str,
				Codigo_Credor_str = t.Codigo_Credor_str,
				Razao_Social_credor_str = t.Razao_Social_credor_str,
				tipo_documento_str = t.tipo_documento_str, 
				Produto_str = t.Produto_str, 
				Segmento_str = t.Segmento_str, 
				numero_unico_str = t.numero_unico_str, 
				Observacao_str = t.Observacao_str, 
				Info_adicional_1_str = t.Info_adicional_1_str, 
				Info_adicional_2_str = t.Info_adicional_2_str, 
				Info_adicional_3_str = t.Info_adicional_3_str, 
				Info_adicional_4_str = t.Info_adicional_4_str, 
				Info_adicional_5_str = t.Info_adicional_5_str, 
				Info_adicional_6_str = t.Info_adicional_6_str, 
				Info_adicional_7_str = t.Info_adicional_7_str, 
				Info_adicional_8_str = t.Info_adicional_8_str, 
				Info_adicional_9_str = t.Info_adicional_9_str, 
				Info_adicional_10_str = t.Info_adicional_10_str, 
				Info_adicional_11_str = t.Info_adicional_11_str, 
				Info_adicional_12_str = t.Info_adicional_12_str, 
				Info_adicional_13_str = t.Info_adicional_13_str, 
				Info_adicional_14_str = t.Info_adicional_14_str, 
				Info_adicional_15_str = t.Info_adicional_15_str, 
				Info_adicional_16_str = t.Info_adicional_16_str, 
				Info_adicional_17_str = t.Info_adicional_17_str, 
				Info_adicional_18_str = t.Info_adicional_18_str, 
				Desconto_minimo_a_aplicar_str = t.Desconto_minimo_a_aplicar_str, 
				Desconto_maximo_a_aplicar_str = t.Desconto_maximo_a_aplicar_str, 
				Juros_a_aplicar_ao_mes_prorata_dia_str = t.Juros_a_aplicar_ao_mes_prorata_dia_str, 
				Multa_a_aplicar_str = t.Multa_a_aplicar_str, 
				situacao_int = t.situacao_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				id_geusuario_int = t.id_geusuario_int,
				tstamp = t.tstamp

                           FROM ' || tabtemp || '_cbparcela 		t
			  WHERE	t.chave_str = ''' || chave || '''
			  AND 	t.inclui_altera_parcela = ''A'' AND
				cbparcela.id_cbparcela_int = t.id_cbparcela_int';

			
			-- inclusao dos itensbordero
			EXECUTE 'INSERT INTO cbitembordero( 
			id_cbitembordero_int, 
			id_cbbordero_int,
			acordo_int, 
			id_cbcontrato_int,
		    id_ref_cbitembordero_old_int,
			nosso_numero_int, 
			comando_str, 
			id_cbinstrucao1_int, 
			id_cbinstrucao2_int, 
			valor_desconto_num, 
			data_desconto_dat, 
			vencimento_dat, 
			emissao_dat, 
			principal_num, 
			cp_num, 
			multa_num, 
			notificacao_num, 
			despesa_banco_num, 
			desconto_num, 
			abatimento_num, 
			juros_mora_num, 
			honorarios_num, 
			comissionamento_num, 
			valor_total_num, 
			retido_num, 
			destino_str, 
			boleto_int, 
			nosso_numero_str, 
			linha_digitavel_str, 
			cod_barra_str, 
			barra_str, 
			dv_int, 
			id_geusuario_int, 
			timestamp, 
			instrucao_1_str, 
			instrucao_2_str, 
			parcelamento_str, 
			pago_str, 
			acrescimo_num, 
			id_geusuario_boleto_int, 
			acrescimo_np_num, 
			quitacao_str,
			data_boleto_dat, 
			hora_boleto_tim, 
			observacao_boleto_str, 
			tipo_destino_str, 
			boleto_gravacao_tim, 
			perc_desc_num, 
			principal_original_num, 
			boleto_parcelamento_str, 
			id_geqlcontato_int, 
			id_geqlendereco_int, 
			cp_original_num, 
			desconto_original_num, 
			acordo_formalizado_int, 
			id_gecidade_int, 
			data_envio_dat, 
			data_reenvio_dat, 
			arquivo_terc_str, 
			tipo_geracao_str, 
			tstamp, 
			envio_jpg_str, 
			pc_ho_num, 
			pc_comissionamento_num, 
			tstamp_mdm_inclusao, 
			tstamp_mdm_alteracao, 
			id_boletoeleva_str)
			
    		(SELECT tib.id_cbitembordero_int,
			tib.id_cbbordero_int,
			tib.acordo_int,
			tib.id_cbcontrato_int,
			tib.id_ref_cbitembordero_old_int,
			tib.nosso_numero_int,
			tib.comando_str,
			tib.id_cbinstrucao1_int,
			tib.id_cbinstrucao2_int,
			tib.valor_desconto_num,
			tib.data_desconto_dat,
			tib.vencimento_dat,
			tib.emissao_dat,
			tib.principal_num,
			tib.cp_num,
			tib.multa_num,
			tib.notificacao_num,
			tib.despesa_banco_num,
			tib.desconto_num,
			tib.abatimento_num,
			tib.juros_mora_num,
			tib.honorarios_num,
			tib.comissionamento_num,
			tib.valor_total_num,
			tib.retido_num,
			tib.destino_str,
			tib.boleto_int,
			tib.nosso_numero_str,
			tib.linha_digitavel_str,
			tib.cod_barra_str,
			tib.barra_str,
			tib.dv_int,
			tib.id_geusuario_int,
			current_timestamp,
			tib.instrucao_1_str,
			tib.instrucao_2_str,
			tib.parcelamento_str,
			''X'',
			tib.acrescimo_num,
			tib.id_geusuario_boleto_int,
			tib.acrescimo_np_num,						
			tib.quitacao_str,
			tib.data_boleto_dat,
			tib.hora_boleto_tim,
			tib.observacao_boleto_str,
			tib.tipo_destino_str,
			tib.boleto_gravacao_tim,
			tib.perc_desc_num,
			tib.principal_original_num,
			tib.boleto_parcelamento_str,
			tib.id_geqlcontato_int,
			tib.id_geqlendereco_int,
			tib.cp_original_num,
			tib.desconto_original_num,
			tib.acordo_formalizado_int,
			tib.id_gecidade_int,
			tib.data_envio_dat,
			tib.data_reenvio_dat,
			tib.arquivo_terc_str,
			tib.tipo_geracao_str,
			current_timestamp,
			tib.envio_jpg_str,
			tib.pc_ho_num,
			tib.pc_comissionamento_num,
			current_timestamp,
			current_timestamp,
			tib.id_boletoeleva_str
	   		FROM ' || tabtemp || '_cbitembordero tib)';
	   			
	   		EXECUTE 'INSERT INTO cbparcelaitembordero(		
			id_cbparcelaitembordero_int,
			id_cbitembordero_int, 
			id_cbparcela_int, 
			data_vencimento_dat, 
			principal_num, 
			cp_num, 
			multa_num, 
			notificacao_num, 
			despesa_banco_num, 
			desconto_num, 
			abatimento_num, 
			juros_mora_num, 
			honorarios_num, 
			comissionamento_num, 
			valor_total_num, 
			retido_num, 
			id_geusuario_int, 
			timestamp, 
			selecionado_int, 
			acrescimo_num, 
			acrescimo_np_num, 
			valor_parcela_num, 
			percentual_desconto_num, 
			cp_original_num, 
			desconto_original_num, 
			tstamp_mdm_inclusao)
			(SELECT 
			pib.id_cbparcelaitembordero_int,
			pib.id_cbitembordero_int,
			pib.id_cbparcela_int,
			pib.vencimento_dat,
			pib.valor_total_num,
			pib.cp_num,
			pib.multa_num,
			pib.notificacao_num,
			pib.despesa_banco_num,
			pib.desconto_num,
			pib.abatimento_num,
			pib.juros_mora_num,
			pib.honorarios_num,
			pib.comissionamento_num,
			pib.valor_total_num,
			pib.retido_num,
			pib.id_geusuario_int,
			pib.timestamp,
			pib.selecionado_int,
			pib.acrescimo_num,
			pib.acrescimo_np_num,
			pib.valor_parcela_num,
			pib.perc_desc_num,
			pib.cp_original_num,
			pib.desconto_original_num,
			pib.tstamp_mdm_inclusao
			FROM ' || tabtemp || '_cbparcelaitembordero pib)';
	   	
	   		--cancela boletos antigos
	   		EXECUTE 'UPDATE cbitembordero 
			SET pago_str = ''C''
			WHERE id_cbitembordero_int IN (SELECT id_ref_cbitembordero_old_int FROM ' || tabtemp || '_cbitembordero)';

			--INCLUSAO NA FILA DE BOLETO ( UM SERVICO IRA PEGAR OS ITENS DA FILA E BUSCAR O BOLETO NO SITE, O BOLETO VAI SER GRAVADO NA TABELA E ENVIADO PARA PASTA FTP) 
			EXECUTE 'INSERT INTO rpa_filaboletoeleva(
			id_cbitembordero_int,
			id_boletoeleva_str,
			cod_coligada_str,
			tipo_int,-- tipo_str(mensalidade = 0, materialdidatico = 1)
			token_str, 
			destino_str,
			nome_str,
			cpf_str,
			data_vencimento_date,
			inserido_date)
			
			(SELECT DISTINCT ON (id_boletoeleva_str)
			tib.id_cbitembordero_int,
			tib.id_boletoeleva_str,
			p.info_adicional_3_str,
			0,
			'''',
			tib.destino_str,
			c.nome_str,
			c.cpf_str,
			tib.vencimento_dat,
			current_timestamp			
			FROM ' || tabtemp || '_cbitembordero tib
			INNER JOIN ' || tabtemp || '_cbparcela p ON tib.id_cbcontrato_int = p.id_cbcontrato_int
			INNER JOIN '|| tabelafilha ||' c ON c.id_cbcontrato_int = p.id_cbcontrato_int)';
		
			
	ELSEIF processo = 3 THEN
	
		-- FUNï¿½ï¿½O PARA FAZER A QUALIDADE DE TELEFONES, E-MAILS E ENDEREï¿½OS
		EXECUTE 'SELECT fc_qualidade(''' || tabtemp || ''', ''' || chave || ''', ''' || tabelafilha || ''', ' || idgecliente || ', ' || idgefilial || ', ' || idgeempresa || ', ' || idgeusuario || ')';
		
	END IF;
		
	RETURN  '';
END;
$$;

--
-- TOC entry 1930 (class 1255 OID 26944)
-- Name: fc_eleva_remessa_homologacao(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_eleva_remessa_homologacao(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
reg 	 RECORD;
sSql	text;
sNomeArquivo	text;
sCodigoArquivo text;
sDescricaoArquivo text;
sTipoEnvio text;
sSequenciaArquivo text;
sbatimento text;
id_contrato	bigint;
Parcela 	int;

BEGIN

	--ACERTA TEMPORARIA
	IF processo = 0 THEN
	
	RAISE NOTICE '0 - Criando tmp contrato:%', timeofday();

	--tmp contrato	
	EXECUTE 'DROP 	TABLE IF EXISTS ' || tabtemp || '_cbcontrato;
			 CREATE TABLE 		' || tabtemp || '_cbcontrato AS
			         SELECT DISTINCT ON (TRIM(t.cpf_cnpj_devedor))        
                                        ' || idgecliente || ' 						AS id_gecliente_int,
                                        CASE WHEN 	c.id_cbcontrato_int IS NULL THEN 
						nextval(''cbcontrato_seq'')
 				        ELSE 		c.id_cbcontrato_int
 				        END 								AS id_cbcontrato_int,
                                        ' || idgeempresa || ' 						AS id_geempresa_int,
                                        ' || idgefilial || ' 						AS id_gefilial_int,
					CASE 
					  WHEN COALESCE(c.id_cbsituacaocontrato_int,1) = 6 
					    THEN 1 
					  ELSE COALESCE(c.id_cbsituacaocontrato_int,1) 
					END 										AS id_cbsituacaocontrato_int,
					TRIM(abs_cpf(t.cpf_cnpj_devedor))						AS contrato_str,
					
					1										AS id_cbtiponegocio_int,
                                        abs_cpf(t.cpf_cnpj_devedor)							AS cpf_str,
                                        t.Nome_devedor		 							AS nome_str, 
                                        t.Tipo_devedor 									as tipo_pessoa_str,

                                        t.nome_fantasia_devedor								as nome_fantasia_devedor_str,

					/*Endereï¿½o*/

					trim(regexp_replace(t.logradouro, ''\\s+'', '' '', ''g''))									AS endereco_str,
					t.numero									AS numero_str,	
					t.complemento		 							AS complemento_str,
					t.bairro::character varying(40)		 					AS bairro_str,
					REPLACE(t.cep, ''-'', '''') 							AS cep_str,
					t.cidade	 								AS cidade_str,
					t.uf										AS estado_str,

					1 										AS id_fimoeda_int,
					1										AS id_cbetapa_int,
					CURRENT_DATE 									AS data_primeira_distrib_dat,
					CASE
						WHEN c.id_cbcontrato_int IS NULL THEN CURRENT_DATE 			
					ELSE	c.data_ultima_distrib_dat
					END				 						AS data_ultima_distrib_dat,
					CURRENT_TIMESTAMP 								AS tstamp,
					' || idgeusuario || ' 								AS id_geusuario_int,
                                        CASE WHEN c.id_cbcontrato_int IS NULL THEN 
						''I'' 
					ELSE 
						''A'' 
                                        END 										AS inclui_altera_contrato,
                                        ''' || chave ||'''::TEXT 							AS chave_str
				 FROM 		' || tabtemp || ' 	t
				 LEFT JOIN 	' || tabelafilha || ' 	c 	ON c.contrato_str = TRIM(abs_cpf(t.cpf_cnpj_devedor))
                                 WHERE t.chave_str = ''' || chave || ''' ';
                                 

		EXECUTE 'CREATE INDEX ' || tabtemp || '_cbcontrato_idx1
				     ON ' || tabtemp || '_cbcontrato
				  USING btree(id_cbcontrato_int);';			  			       

	RAISE NOTICE '0 - Criando tmp parcela:%', timeofday();
	
	--tmp parcela	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbparcela;
		CREATE TABLE ' || tabtemp || '_cbparcela AS
			 SELECT
                DISTINCT ON (id_cbcontrato_int, parcela_int, numero_unico_str)  
				c.id_cbcontrato_int,
				CASE WHEN p.id_cbparcela_int IS NULL THEN 
					nextval(''cbparcela_seq'')
				ELSE 
					p.id_cbparcela_int
				END 									AS id_cbparcela_int,
				1                                                               	AS id_esregua_int,				
				t.Data_vencimento							AS data_vencimento_dat,
				CASE WHEN COALESCE(t.Valor_saldo_devedor, 0) = 0 THEN
					(t.valor_original_documento - t.Valor_abatimento) + t.Valor_custa_protesto
				ELSE
					t.Valor_saldo_devedor
				END 									AS valor_principal_num,

				''''									AS tipo_str,

				t.valor_original_documento						AS valor_original_documento_num,
				t.Valor_abatimento							AS Valor_abatimento_num,
				t.Valor_custa_protesto							AS Valor_custa_protesto_num,

				t.cpf_cnpj_grupo_economico						AS cpf_cnpj_grupo_economico_str,
				t.Codigo_Credor								AS Codigo_Credor_str,
				t.Razao_Social_credor							AS Razao_Social_credor_str,
				t.tipo_documento							AS tipo_documento_str, 
				t.Produto								AS Produto_str, 
				t.Segmento								AS Segmento_str, 
				t.Numero_documento							AS numero_unico_str, 
				t.Observacao								AS Observacao_str, 
				t.Info_adicional_1							AS Info_adicional_1_str, 
				t.Info_adicional_2							AS Info_adicional_2_str, 
				t.Info_adicional_3							AS Info_adicional_3_str, 
				t.Info_adicional_4							AS Info_adicional_4_str, 
				t.Info_adicional_5							AS Info_adicional_5_str, 
				t.Info_adicional_6							AS Info_adicional_6_str, 
				t.Info_adicional_7							AS Info_adicional_7_str, 
				t.Info_adicional_8							AS Info_adicional_8_str, 
				t.Info_adicional_9							AS Info_adicional_9_str, 
				t.Info_adicional_10							AS Info_adicional_10_str, 
				t.Info_adicional_11							AS Info_adicional_11_str, 
				t.Info_adicional_12							AS Info_adicional_12_str, 
				t.Info_adicional_13							AS Info_adicional_13_str, 
				t.Info_adicional_14							AS Info_adicional_14_str, 
				t.Info_adicional_15							AS Info_adicional_15_str, 
				t.Info_adicional_16							AS Info_adicional_16_str, 
				t.Info_adicional_17							AS Info_adicional_17_str, 
				t.Info_adicional_18							AS Info_adicional_18_str, 
				t.Desconto_minimo_a_aplicar						AS Desconto_minimo_a_aplicar_str, 
				t.Desconto_maximo_a_aplicar						AS Desconto_maximo_a_aplicar_str, 
				t.Juros_a_aplicar_ao_mes						AS Juros_a_aplicar_ao_mes_prorata_dia_str, 
				t.Multa_a_aplicar							AS Multa_a_aplicar_str, 
				
				CASE 
				  WHEN t.Data_vencimento>= CURRENT_DATE THEN 7
				  WHEN COALESCE(p.situacao_int,0) = 6 
				    THEN 0 				    
				  ELSE COALESCE(p.situacao_int,0) 
				END 									AS situacao_int,
				CURRENT_DATE 								AS data_primeira_distrib_dat,
				CASE
					WHEN p.id_cbparcela_int IS NULL THEN CURRENT_DATE 			
				ELSE	p.data_ultima_distrib_dat 
				END									AS data_ultima_distrib_dat,
				' || idgeusuario || ' 							AS id_geusuario_int,
				CURRENT_TIMESTAMP 							AS tstamp,
				t.Numero_parcela::integer						AS parcela_int,
				CASE 
				WHEN p.id_cbparcela_int IS NULL THEN 
					''I'' 
				ELSE 
					''A'' 
				END 									AS inclui_altera_parcela,
				''' || chave ||'''::TEXT 						AS chave_str
			FROM ' || tabtemp || '_cbcontrato c 
			INNER JOIN ' || tabtemp || ' t on (c.contrato_str = (abs_cpf(t.cpf_cnpj_devedor)))
			LEFT JOIN cbparcela p ON (p.id_cbcontrato_int = c.id_cbcontrato_int and 
						  p.parcela_int = t.Numero_parcela::integer AND 
						  p.numero_unico_str = t.Numero_documento)
			WHERE t.chave_str = ''' || chave || ''' 
			;';

	/* cbertolucci
		Case "WHEN t.Data_vencimento>= CURRENT_DATE THEN 7" incluso pois a base estava com vï¿½rias parcelas vincendas
		em aberto (situaï¿½ï¿½o 0) enquanto deveriam constar com situaï¿½ï¿½o 7, pois nï¿½o estavam vencidas ainda.
	*/
				 

	--raise notice '%', sSql;
			
	--EXECUTE sSql;

	RAISE NOTICE '0 - Criando tmp itembordero:%', timeofday();
	EXECUTE 'CREATE INDEX ' || tabtemp || '_cbparcela_idx1
				     ON ' || tabtemp || '_cbparcela
				  USING btree(id_cbparcela_int);';

	--tmp itembordero - cria boletos 1 para 1 parcela, desde que jï¿½ nï¿½o exista um boleto para aquela parcela
	--marca os ids dos boletos velhos para poder cancelï¿½-los	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbitembordero;		
				CREATE TABLE ' || tabtemp || '_cbitembordero AS
					SELECT
						i.id_cbitembordero_int as id_ref_cbitembordero_old_int,
						nextval(''cbitembordero_seq'') as id_cbitembordero_int,
						i.id_cbbordero_int,
						i.acordo_int,
						p.id_cbcontrato_int,
						i.nosso_numero_int,
						i.comando_str,
						i.id_cbinstrucao1_int,
						i.id_cbinstrucao2_int,
						i.valor_desconto_num,
						i.data_desconto_dat,
						i.vencimento_dat,
						i.emissao_dat,
						i.principal_num,
						i.cp_num,
						i.multa_num,
						i.notificacao_num,
						i.despesa_banco_num,
						i.desconto_num,
						i.abatimento_num,
						i.juros_mora_num,
						i.honorarios_num,
						i.comissionamento_num,
						i.valor_total_num,
						i.retido_num,
						i.destino_str,
						i.boleto_int,
						i.nosso_numero_str,
						i.linha_digitavel_str,
						i.cod_barra_str,
						i.barra_str,
						i.dv_int,
						i.id_geusuario_int,
						i.timestamp,
						i.instrucao_1_str,
						i.instrucao_2_str,
						i.parcelamento_str,
						i.pago_str,
						i.acrescimo_num,
						i.id_geusuario_boleto_int,
						i.acrescimo_np_num,						
						i.quitacao_str,
						i.data_boleto_dat,
						i.hora_boleto_tim,
						i.observacao_boleto_str,
						i.tipo_destino_str,
						i.boleto_gravacao_tim,
						i.perc_desc_num,
						i.principal_original_num,
						i.boleto_parcelamento_str,
						i.id_geqlcontato_int,
						i.id_geqlendereco_int,
						i.cp_original_num,
						i.desconto_original_num,
						i.acordo_formalizado_int,
						i.id_gecidade_int,
						i.data_envio_dat,
						i.data_reenvio_dat,
						i.arquivo_terc_str,
						i.tipo_geracao_str,
						i.tstamp,
						i.envio_jpg_str,
						i.pc_ho_num,
						i.pc_comissionamento_num,
						i.tstamp_mdm_inclusao,
						i.tstamp_mdm_alteracao,
						p.Info_adicional_16_str as id_boletoeleva_str
				   FROM cbitembordero i
			 INNER JOIN ' || tabtemp || '_cbparcela p 
					 ON p.id_cbcontrato_int = i.id_cbcontrato_int AND 
					 p.data_vencimento_dat = i.vencimento_dat AND 
					 p.valor_principal_num = i.valor_total_num				
			      WHERE p.chave_str = ''' || chave || ''' 
					AND not exists (select 1 from cbitembordero where id_boletoeleva_str = p.Info_adicional_16_str)	
					AND (p.data_vencimento_dat + 11) <= CURRENT_DATE
					AND i.pago_str <> ''C'' 
			';
	/* cbertolucci
		Inseri regra acima para que sejam inclusos boletos na cbitembordero apenas de parcelas que
		sejam distribuï¿½das em atï¿½ 11 dias apï¿½s o vencimento (uma vez que o banco aguarda 10-11 dias para enviar o pagamento).
		Da forma como estava antes, o banco poderia enviar uma parcela um mï¿½s apï¿½s o vencimento, que ela seria inclusa, como 
		se o acordo seguisse, mas esse seria um acordo quebrado. 
		Como todos os boletos sï¿½o marcados com 'C' em pago_str quando quebrados, caso a primeira parcela nï¿½o seja enviada em
		atï¿½ 11 dias depois do vencimento, cancelamos todos os boletos - evitando a inclusï¿½o de uma parcela com data dentro da
		regra, mas de um acordo jï¿½ quebrado na primeira parcela. */

		
	--tmp parcelaitembordero	
	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_cbparcelaitembordero;		
				CREATE TABLE ' || tabtemp || '_cbparcelaitembordero AS
					SELECT
						nextval(''cbparcelaitembordero_seq'') as id_cbparcelaitembordero_int,						
						tib.id_cbitembordero_int,
						p.id_cbparcela_int,
						tib.vencimento_dat,
						tib.valor_total_num as principal_num,
						tib.cp_num,
						tib.multa_num,
						tib.notificacao_num,
						tib.despesa_banco_num,
						tib.desconto_num,
						tib.abatimento_num,
						tib.juros_mora_num,
						tib.honorarios_num,
						tib.comissionamento_num,
						tib.valor_total_num,
						tib.retido_num,
						tib.id_geusuario_int,
						timestamp,
						1 as selecionado_int,
						acrescimo_num,
						acrescimo_np_num,
						0 as valor_parcela_num,
						tib.perc_desc_num,
						cp_original_num,
						desconto_original_num,
						tstamp_mdm_inclusao
						FROM ' || tabtemp || '_cbitembordero tib
						INNER JOIN ' || tabtemp || '_cbparcela p
						ON tib.id_cbcontrato_int = p.id_cbcontrato_int and p.Info_adicional_16_str = tib.id_boletoeleva_str';						  
 
 	RAISE NOTICE '0 - Criando tmp qualidade e-mail:%', timeofday();	
	--Qualidade e-mail	
	EXECUTE 'SELECT fc_eleva_qualidadeemail(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';
	
			    
 	RAISE NOTICE '0 - Criando tmp qualidade endereï¿½o:%', timeofday();
 	--Qualidade  endereï¿½o
	EXECUTE 'SELECT fc_eleva_qualidadend(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';
	

 	RAISE NOTICE '0 - Criando tmp qualidade telefone:%', timeofday();
 	--Qualidade  telefone
	EXECUTE 'SELECT fc_eleva_qualidadtel(''' || tabtemp || ''', ' || idgecliente || ',''' || chave || '''::TEXT)';

        -- INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 	

	-- PROCESSO COMPLETO	
	ELSEIF processo = 2 THEN

		raise notice 'Processando contratos... %', timeofday();

		EXECUTE 'INSERT INTO ' || tabelafilha || ' (
				id_gecliente_int,
				id_cbcontrato_int,
				id_geempresa_int,
				id_gefilial_int,
				id_cbsituacaocontrato_int,
				contrato_str,
				id_cbtiponegocio_int,
				cpf_str,
				nome_str, 
				tipo_pessoa_str,
				nome_fantasia_devedor_str,
				endereco_str,
				complemento_str,
				bairro_str,
				cep_str,
				cidade_str,
				estado_str,
				id_fimoeda_int,
				id_cbetapa_int,
				data_primeira_distrib_dat,
				data_ultima_distrib_dat,
				tstamp,
				id_geusuario_int
				)
				
                         SELECT 
				t.id_gecliente_int,
				t.id_cbcontrato_int,
				t.id_geempresa_int,
				t.id_gefilial_int,
				t.id_cbsituacaocontrato_int,
				t.contrato_str,
				t.id_cbtiponegocio_int,
				t.cpf_str,
				t.nome_str, 
				t.tipo_pessoa_str,
				t.nome_fantasia_devedor_str,
				SUBSTRING(t.endereco_str || '', '' || t.numero_str,1,60) as endereco_str,
				SUBSTRING(t.complemento_str,1,60),
				t.bairro_str,
				t.cep_str,
				SUBSTRING(t.cidade_str, 1,30) as cidade_str,
				t.estado_str,
				t.id_fimoeda_int,
				t.id_cbetapa_int,
				t.data_primeira_distrib_dat,
				t.data_ultima_distrib_dat,
				t.tstamp,
				t.id_geusuario_int
				
                           FROM ' || tabtemp || '_cbcontrato	t
                           WHERE 	t.inclui_altera_contrato = ''I''
                           AND 		t.chave_str = ''' || chave || '''';

                raise notice 'Update contratos... %', timeofday();
               
                EXECUTE '  UPDATE ' || tabelafilha || ' SET 
				id_gecliente_int = t.id_gecliente_int,
				id_geempresa_int = t.id_geempresa_int,
				id_gefilial_int = t.id_gefilial_int,
				id_cbsituacaocontrato_int = t.id_cbsituacaocontrato_int,
				contrato_str = t.contrato_str,
				id_cbtiponegocio_int = t.id_cbtiponegocio_int,
				cpf_str = t.cpf_str,
				nome_str = t.nome_str, 
				tipo_pessoa_str = t.tipo_pessoa_str,
				nome_fantasia_devedor_str = t.nome_fantasia_devedor_str,
				endereco_str = SUBSTRING(t.endereco_str || '', '' || t.numero_str,1,60),
				complemento_str = SUBSTRING(t.complemento_str,1,60),
				bairro_str = t.bairro_str,
				cep_str = t.cep_str,
				cidade_str = SUBSTRING(t.cidade_str, 1,30),
				estado_str = t.estado_str,
				id_fimoeda_int = t.id_fimoeda_int,
				id_cbetapa_int = t.id_cbetapa_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				tstamp = t.tstamp,
				id_geusuario_int = t.id_geusuario_int

            FROM ' || tabtemp || '_cbcontrato t
			WHERE	t.inclui_altera_contrato = ''A'' 
			  AND 	t.chave_str = ''' || chave || '''
			  AND	' || tabelafilha || '.id_cbcontrato_int = t.id_cbcontrato_int'; 
                           

		raise notice 'Processando parcelas... %', timeofday();
		
		--cbparcela
                EXECUTE 'INSERT INTO cbparcela (
				id_cbcontrato_int,
				id_cbparcela_int,
				id_esregua_int,	
				tipo_str,
				parcela_int,
				data_vencimento_dat,
				valor_principal_num,
				valor_original_documento_num,
				Valor_abatimento_num,
				Valor_custa_protesto_num,
				cpf_cnpj_grupo_economico_str,
				Codigo_Credor_str,
				Razao_Social_credor_str,
				tipo_documento_str, 
				Produto_str, 
				Segmento_str, 
				numero_unico_str, 
				Observacao_str, 
				Info_adicional_1_str, 
				Info_adicional_2_str, 
				Info_adicional_3_str, 
				Info_adicional_4_str, 
				Info_adicional_5_str, 
				Info_adicional_6_str, 
				Info_adicional_7_str, 
				Info_adicional_8_str, 
				Info_adicional_9_str, 
				Info_adicional_10_str, 
				Info_adicional_11_str, 
				Info_adicional_12_str, 
				Info_adicional_13_str, 
				Info_adicional_14_str, 
				Info_adicional_15_str, 
				Info_adicional_16_str, 
				Info_adicional_17_str, 
				Info_adicional_18_str, 
				Desconto_minimo_a_aplicar_str, 
				Desconto_maximo_a_aplicar_str, 
				Juros_a_aplicar_ao_mes_prorata_dia_str, 
				Multa_a_aplicar_str, 
				situacao_int,
				data_primeira_distrib_dat,
				data_ultima_distrib_dat,
				id_geusuario_int,
				tstamp )
                         SELECT 

				t.id_cbcontrato_int,
				t.id_cbparcela_int,
				t.id_esregua_int,
				t.tipo_str,
				t.parcela_int,
				t.data_vencimento_dat,
				t.valor_principal_num,
				t.valor_original_documento_num,
				t.Valor_abatimento_num,
				t.Valor_custa_protesto_num,
				t.cpf_cnpj_grupo_economico_str,
				t.Codigo_Credor_str,
				t.Razao_Social_credor_str,
				t.tipo_documento_str, 
				t.Produto_str, 
				t.Segmento_str, 
				t.numero_unico_str, 
				t.Observacao_str, 
				t.Info_adicional_1_str, 
				t.Info_adicional_2_str, 
				t.Info_adicional_3_str, 
				t.Info_adicional_4_str, 
				t.Info_adicional_5_str, 
				t.Info_adicional_6_str, 
				t.Info_adicional_7_str, 
				t.Info_adicional_8_str, 
				t.Info_adicional_9_str, 
				t.Info_adicional_10_str, 
				t.Info_adicional_11_str, 
				t.Info_adicional_12_str, 
				t.Info_adicional_13_str, 
				t.Info_adicional_14_str, 
				t.Info_adicional_15_str, 
				t.Info_adicional_16_str, 
				t.Info_adicional_17_str, 
				t.Info_adicional_18_str, 
				t.Desconto_minimo_a_aplicar_str, 
				t.Desconto_maximo_a_aplicar_str, 
				t.Juros_a_aplicar_ao_mes_prorata_dia_str, 
				t.Multa_a_aplicar_str, 
				t.situacao_int,
				t.data_primeira_distrib_dat,
				t.data_ultima_distrib_dat,
				t.id_geusuario_int,
				t.tstamp
	
	            FROM ' || tabtemp || '_cbparcela	t
	            WHERE	t.chave_str = ''' || chave || ''' 
	            AND  inclui_altera_parcela = ''I''';

		--cbdistribparcela
                EXECUTE 'INSERT
			INTO	cbdistribparcela (
					id_cbparcela_int,
					id_cbcontrato_int,
					data_pre_distrib_dat)
			SELECT	DISTINCT ON (id_cbparcela_int, id_cbcontrato_int, data_ultima_distrib_dat)
				id_cbparcela_int,
				id_cbcontrato_int,
				data_ultima_distrib_dat
			FROM	' || tabtemp || '_cbparcela t
			WHERE	t.chave_str = ''' || chave || '''
			AND 	t.inclui_altera_parcela = ''I''';  
		

                EXECUTE 'update cbparcela set 
                                id_esregua_int = t.id_esregua_int,
				parcela_int = t.parcela_int,
				tipo_str = t.tipo_str,
				data_vencimento_dat = t.data_vencimento_dat,
				valor_principal_num = t.valor_principal_num,
				valor_original_documento_num = t.valor_original_documento_num,
				Valor_abatimento_num = t.Valor_abatimento_num,
				Valor_custa_protesto_num = t.Valor_custa_protesto_num,
				cpf_cnpj_grupo_economico_str = t.cpf_cnpj_grupo_economico_str,
				Codigo_Credor_str = t.Codigo_Credor_str,
				Razao_Social_credor_str = t.Razao_Social_credor_str,
				tipo_documento_str = t.tipo_documento_str, 
				Produto_str = t.Produto_str, 
				Segmento_str = t.Segmento_str, 
				numero_unico_str = t.numero_unico_str, 
				Observacao_str = t.Observacao_str, 
				Info_adicional_1_str = t.Info_adicional_1_str, 
				Info_adicional_2_str = t.Info_adicional_2_str, 
				Info_adicional_3_str = t.Info_adicional_3_str, 
				Info_adicional_4_str = t.Info_adicional_4_str, 
				Info_adicional_5_str = t.Info_adicional_5_str, 
				Info_adicional_6_str = t.Info_adicional_6_str, 
				Info_adicional_7_str = t.Info_adicional_7_str, 
				Info_adicional_8_str = t.Info_adicional_8_str, 
				Info_adicional_9_str = t.Info_adicional_9_str, 
				Info_adicional_10_str = t.Info_adicional_10_str, 
				Info_adicional_11_str = t.Info_adicional_11_str, 
				Info_adicional_12_str = t.Info_adicional_12_str, 
				Info_adicional_13_str = t.Info_adicional_13_str, 
				Info_adicional_14_str = t.Info_adicional_14_str, 
				Info_adicional_15_str = t.Info_adicional_15_str, 
				Info_adicional_16_str = t.Info_adicional_16_str, 
				Info_adicional_17_str = t.Info_adicional_17_str, 
				Info_adicional_18_str = t.Info_adicional_18_str, 
				Desconto_minimo_a_aplicar_str = t.Desconto_minimo_a_aplicar_str, 
				Desconto_maximo_a_aplicar_str = t.Desconto_maximo_a_aplicar_str, 
				Juros_a_aplicar_ao_mes_prorata_dia_str = t.Juros_a_aplicar_ao_mes_prorata_dia_str, 
				Multa_a_aplicar_str = t.Multa_a_aplicar_str, 
				situacao_int = t.situacao_int,
				data_ultima_distrib_dat = t.data_ultima_distrib_dat,
				id_geusuario_int = t.id_geusuario_int,
				tstamp = t.tstamp

                           FROM ' || tabtemp || '_cbparcela 		t
			  WHERE	t.chave_str = ''' || chave || '''
			  AND 	t.inclui_altera_parcela = ''A'' AND
				cbparcela.id_cbparcela_int = t.id_cbparcela_int';

			
			-- inclusao dos itensbordero
			EXECUTE 'INSERT INTO cbitembordero( 
			id_cbitembordero_int, 
			id_cbbordero_int,
			acordo_int, 
			id_cbcontrato_int,
		    id_ref_cbitembordero_old_int,
			nosso_numero_int, 
			comando_str, 
			id_cbinstrucao1_int, 
			id_cbinstrucao2_int, 
			valor_desconto_num, 
			data_desconto_dat, 
			vencimento_dat, 
			emissao_dat, 
			principal_num, 
			cp_num, 
			multa_num, 
			notificacao_num, 
			despesa_banco_num, 
			desconto_num, 
			abatimento_num, 
			juros_mora_num, 
			honorarios_num, 
			comissionamento_num, 
			valor_total_num, 
			retido_num, 
			destino_str, 
			boleto_int, 
			nosso_numero_str, 
			linha_digitavel_str, 
			cod_barra_str, 
			barra_str, 
			dv_int, 
			id_geusuario_int, 
			timestamp, 
			instrucao_1_str, 
			instrucao_2_str, 
			parcelamento_str, 
			pago_str, 
			acrescimo_num, 
			id_geusuario_boleto_int, 
			acrescimo_np_num, 
			quitacao_str,
			data_boleto_dat, 
			hora_boleto_tim, 
			observacao_boleto_str, 
			tipo_destino_str, 
			boleto_gravacao_tim, 
			perc_desc_num, 
			principal_original_num, 
			boleto_parcelamento_str, 
			id_geqlcontato_int, 
			id_geqlendereco_int, 
			cp_original_num, 
			desconto_original_num, 
			acordo_formalizado_int, 
			id_gecidade_int, 
			data_envio_dat, 
			data_reenvio_dat, 
			arquivo_terc_str, 
			tipo_geracao_str, 
			tstamp, 
			envio_jpg_str, 
			pc_ho_num, 
			pc_comissionamento_num, 
			tstamp_mdm_inclusao, 
			tstamp_mdm_alteracao, 
			id_boletoeleva_str)
			
    		(SELECT tib.id_cbitembordero_int,
			tib.id_cbbordero_int,
			tib.acordo_int,
			tib.id_cbcontrato_int,
			tib.id_ref_cbitembordero_old_int,
			tib.nosso_numero_int,
			tib.comando_str,
			tib.id_cbinstrucao1_int,
			tib.id_cbinstrucao2_int,
			tib.valor_desconto_num,
			tib.data_desconto_dat,
			tib.vencimento_dat,
			tib.emissao_dat,
			tib.principal_num,
			tib.cp_num,
			tib.multa_num,
			tib.notificacao_num,
			tib.despesa_banco_num,
			tib.desconto_num,
			tib.abatimento_num,
			tib.juros_mora_num,
			tib.honorarios_num,
			tib.comissionamento_num,
			tib.valor_total_num,
			tib.retido_num,
			tib.destino_str,
			tib.boleto_int,
			tib.nosso_numero_str,
			tib.linha_digitavel_str,
			tib.cod_barra_str,
			tib.barra_str,
			tib.dv_int,
			tib.id_geusuario_int,
			current_timestamp,
			tib.instrucao_1_str,
			tib.instrucao_2_str,
			tib.parcelamento_str,
			''X'',
			tib.acrescimo_num,
			tib.id_geusuario_boleto_int,
			tib.acrescimo_np_num,						
			tib.quitacao_str,
			tib.data_boleto_dat,
			tib.hora_boleto_tim,
			tib.observacao_boleto_str,
			tib.tipo_destino_str,
			tib.boleto_gravacao_tim,
			tib.perc_desc_num,
			tib.principal_original_num,
			tib.boleto_parcelamento_str,
			tib.id_geqlcontato_int,
			tib.id_geqlendereco_int,
			tib.cp_original_num,
			tib.desconto_original_num,
			tib.acordo_formalizado_int,
			tib.id_gecidade_int,
			tib.data_envio_dat,
			tib.data_reenvio_dat,
			tib.arquivo_terc_str,
			tib.tipo_geracao_str,
			current_timestamp,
			tib.envio_jpg_str,
			tib.pc_ho_num,
			tib.pc_comissionamento_num,
			current_timestamp,
			current_timestamp,
			tib.id_boletoeleva_str
	   		FROM ' || tabtemp || '_cbitembordero tib)';
	   			
	   		EXECUTE 'INSERT INTO cbparcelaitembordero(		
			id_cbparcelaitembordero_int,
			id_cbitembordero_int, 
			id_cbparcela_int, 
			data_vencimento_dat, 
			principal_num, 
			cp_num, 
			multa_num, 
			notificacao_num, 
			despesa_banco_num, 
			desconto_num, 
			abatimento_num, 
			juros_mora_num, 
			honorarios_num, 
			comissionamento_num, 
			valor_total_num, 
			retido_num, 
			id_geusuario_int, 
			timestamp, 
			selecionado_int, 
			acrescimo_num, 
			acrescimo_np_num, 
			valor_parcela_num, 
			percentual_desconto_num, 
			cp_original_num, 
			desconto_original_num, 
			tstamp_mdm_inclusao)
			(SELECT 
			pib.id_cbparcelaitembordero_int,
			pib.id_cbitembordero_int,
			pib.id_cbparcela_int,
			pib.vencimento_dat,
			pib.valor_total_num,
			pib.cp_num,
			pib.multa_num,
			pib.notificacao_num,
			pib.despesa_banco_num,
			pib.desconto_num,
			pib.abatimento_num,
			pib.juros_mora_num,
			pib.honorarios_num,
			pib.comissionamento_num,
			pib.valor_total_num,
			pib.retido_num,
			pib.id_geusuario_int,
			pib.timestamp,
			pib.selecionado_int,
			pib.acrescimo_num,
			pib.acrescimo_np_num,
			pib.valor_parcela_num,
			pib.perc_desc_num,
			pib.cp_original_num,
			pib.desconto_original_num,
			pib.tstamp_mdm_inclusao
			FROM ' || tabtemp || '_cbparcelaitembordero pib)';
	   	
	   		--cancela boletos antigos
	   		EXECUTE 'UPDATE cbitembordero 
			SET pago_str = ''C''
			WHERE id_cbitembordero_int IN (SELECT id_ref_cbitembordero_old_int FROM ' || tabtemp || '_cbitembordero)';

			--INCLUSAO NA FILA DE BOLETO ( UM SERVICO IRA PEGAR OS ITENS DA FILA E BUSCAR O BOLETO NO SITE, O BOLETO VAI SER GRAVADO NA TABELA E ENVIADO PARA PASTA FTP) 
			EXECUTE 'INSERT INTO rpa_filaboletoeleva(
			id_cbitembordero_int,
			id_boletoeleva_str,
			cod_coligada_str,
			tipo_int,-- tipo_str(mensalidade = 0, materialdidatico = 1)
			token_str, 
			destino_str,
			nome_str,
			cpf_str,
			data_vencimento_date,
			inserido_date)
			
			(SELECT DISTINCT ON (id_boletoeleva_str)
			tib.id_cbitembordero_int,
			tib.id_boletoeleva_str,
			p.info_adicional_3_str,
			0,
			'''',
			tib.destino_str,
			c.nome_str,
			c.cpf_str,
			tib.vencimento_dat,
			current_timestamp			
			FROM ' || tabtemp || '_cbitembordero tib
			INNER JOIN ' || tabtemp || '_cbparcela p ON tib.id_cbcontrato_int = p.id_cbcontrato_int
			INNER JOIN '|| tabelafilha ||' c ON c.id_cbcontrato_int = p.id_cbcontrato_int)';
		
			
	ELSEIF processo = 3 THEN
	
		-- FUNï¿½ï¿½O PARA FAZER A QUALIDADE DE TELEFONES, E-MAILS E ENDEREï¿½OS
		EXECUTE 'SELECT fc_qualidade(''' || tabtemp || ''', ''' || chave || ''', ''' || tabelafilha || ''', ' || idgecliente || ', ' || idgefilial || ', ' || idgeempresa || ', ' || idgeusuario || ')';
		
	

	ELSIF processo = 4 THEN

	 EXECUTE 'select arquivo_str from ' || tabtemp || ' where linha > 1 limit 1' INTO sNomeArquivo;

		-- Abertura de parcelas que nï¿½o sï¿½o mais vincendas - processo enquanto a manutenï¿½ï¿½o de standby nï¿½o ï¿½ corrigida
		EXECUTE 'UPDATE cbparcela
			SET situacao_int = 0
			WHERE data_vencimento_dat < current_date
			AND situacao_int = 7';

		-- Quebra de contratos que nï¿½o receberam a parcela espelho em atï¿½ 12 dias apï¿½s o primeiro vencimento
		-- Nï¿½o incluï¿½ a regra de 'pago_str NOT IN('C','P')' no select pois incluindo, deixa passar pacelas que jï¿½ foram inseridas
		-- pois as mesmas sï¿½o inseridas com pago_str ='X' e assim quebrarï¿½amos acordos indevidamente.
		EXECUTE 'WITH sub as (
				SELECT DISTINCT on (id_cbbordero_int,vencimento_dat) 
					id_cbbordero_int,
					vencimento_dat,
					count(1)
				FROM cbitembordero
				WHERE (LEFT(parcelamento_str,3) = ''001'' or parcelamento_str is null)
				AND vencimento_dat + 12 = current_date 
				group by id_cbbordero_int, vencimento_dat,parcelamento_str
				order by id_cbbordero_int, vencimento_dat, parcelamento_str
				)
			UPDATE cbitembordero
			SET pago_str=''C''
			FROM sub
			WHERE count=1
			AND pago_str NOT IN(''C'',''P'')
			AND cbitembordero.id_cbbordero_int = sub.id_cbbordero_int
			';

		/*EXECUTE 'UPDATE cbparcela p
			SET situacao_int = 6
			FROM ' || tabtemp || '_cbitembordero t
			inner JOIN cbparcelaitembordero i on i.id_cbitembordero_int = t.id_ref_cbitembordero_old_int 
			WHERE i.id_cbparcela_int = p.id_cbparcela_int
			AND data_primeira_distrib_dat < CURRENT_DATE
			and situacao_int not in (4,6)
			';*/

	EXECUTE 'WITH sub as (
				SELECT DISTINCT ON (id_cbbordero_int)
					id_cbbordero_int
				FROM cbitembordero i
				WHERE EXISTS (SELECT 1 FROM cbitembordero b where id_ref_cbitembordero_old_int is NOT NULL AND id_cbbordero_int = i.id_cbbordero_int)
				GROUP BY id_cbbordero_int),
			sub2 AS (
				SELECT
					id_cbparcela_int
				FROM sub s
				JOIN cbitembordero i ON s.id_cbbordero_int = i.id_cbbordero_int
				JOIN cbparcelaitembordero pi ON i.id_cbitembordero_int = pi.id_cbitembordero_int
				WHERE i.id_ref_cbitembordero_old_int IS NULL)
			UPDATE cbparcela p
			SET situacao_int = 6
			FROM sub2 s
			WHERE p.situacao_int NOT IN (4,6)
			AND s.id_cbparcela_int = p.id_cbparcela_int
			';

 	IF sNomeArquivo ILIKE '%BATIMENTO%' THEN

		IF sNomeArquivo ILIKE '%BATIMENTO_ELEVA_MD%' THEN
			
			EXECUTE 'UPDATE cbparcela p
					SET situacao_int = 6
					where not exists(select 1 from '|| tabtemp || '_cbparcela t where t.id_cbparcela_int = p.id_cbparcela_int)
					and situacao_int not in (4,6) and trim(produto_str) = ''MD'';';
	
		ELSE
			
			EXECUTE 'UPDATE cbparcela p
					SET situacao_int = 6
					where not exists(select 1 from '|| tabtemp || '_cbparcela t where t.id_cbparcela_int = p.id_cbparcela_int)
					and situacao_int not in (4,6) and trim(produto_str) <> ''MD'';';
	
		END IF;
		
		EXECUTE 'INSERT INTO gehistoricousuario
							(
							id_geusuario_int
							, id_gecliente_int
							, id_geaplicacao_int
							, data_hora_dat
							, evento_str
							, contrato_str
							, obs_txt
							)
					SELECT
							' || idgeusuario ||'
							,' || idgecliente || '
							,604
							,CURRENT_TIMESTAMP
							,''ATUALIZAï¿½ï¿½O SITUAï¿½ï¿½O CONTRATO PARA BAIXADO''
							,c.contrato_str
							,''BAIXA DE CONTRATO DEVIDO Nï¿½O EXISTIR MAIS PARCELAS EM ABERTO''
						FROM ' || tabelafilha || ' c
						WHERE (SELECT COUNT(*) FROM cbparcela p WHERE c.id_cbcontrato_int = p.id_cbcontrato_int
						AND p.situacao_int NOT IN (4, 6, 7)) = 0
						AND c.id_cbsituacaocontrato_int <> 6;';
	
	
		EXECUTE 'UPDATE '|| tabelafilha ||' c
					SET id_cbsituacaocontrato_int = 6
					WHERE (SELECT COUNT(*) FROM cbparcela p WHERE c.id_cbcontrato_int = p.id_cbcontrato_int
					AND p.situacao_int NOT IN (4, 6, 7)) = 0
					AND c.id_cbsituacaocontrato_int <> 6;';

		END IF;
	END IF;
	
	
	RETURN  '';
END;
$$;

--
-- TOC entry 1931 (class 1255 OID 26955)
-- Name: fc_encontra_campo(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_encontra_campo(campo text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  abreviaturas_concat text;
  registro 	      RECORD;
  registro1	      RECORD;

BEGIN
	abreviaturas_concat := '';

	FOR registro IN
		EXECUTE 'SELECT * FROM information_schema.columns 
			WHERE table_schema = ''public''
			AND table_name in 
			(select tablename 
				from pg_tables 
				where schemaname = ''public''
				and tablename like ''cbconvenio%''
				
			)
			AND data_type in (''text'', ''"char"'', ''character varying'', ''character'')
		order by table_name'
	LOOP

		FOR registro1 IN
			EXECUTE 'Select ' || registro.column_name || ' from ' || registro.table_name || ' 
			where upper(' || registro.column_name || ') like upper(''%' || campo || '%'')' LOOP

				abreviaturas_concat := registro.table_name || '.' || registro.column_name  || ' - ' ||  abreviaturas_concat; 
				
			END LOOP;
		
	END LOOP;

	RETURN  abreviaturas_concat;
END;
$$;

--
-- TOC entry 1932 (class 1255 OID 26956)
-- Name: fc_imp_tab_cbsitcontato(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_imp_tab_cbsitcontato(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
regatasm RECORD;
regmoina RECORD;

BEGIN

	--ACERTA TEMPORARIA
	IF processo = 0 THEN
	
	RAISE NOTICE '0 - Criando tmp FUP/cbsitcontato:%', current_time;

--	EXECUTE 'DELETE FROM ' || tabtemp || ' WHERE linha = 1';

	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp || '_fup_cbsitcontato;
			 CREATE TABLE ' || tabtemp || '_fup_cbsitcontato AS
			         SELECT

					CURRENT_TIMESTAMP 								AS tstamp,
					' || idgecliente || '::bigint					AS id_gecliente_int,				
					' || idgeusuario || '::bigint					AS id_geusuario_int,
                    ''' || chave ||'''::TEXT 						AS chave_str,
                                        
                    case when sc.id_cbsitcontato_int IS NULL then
					nextval(''cbsitcontato_seq'')::bigint
 				    else sc.id_cbsitcontato_int END 				AS id_cbsitcontato_int,
					
					trim(t.codigo_fup)::integer 					AS codigo_int,
					
					case 
					when TRIM(t.ativo) = ''Sim'' then ''S''
					when TRIM(t.ativo) = ''Nï¿½o'' then ''N''					
					else sc.ativo_str end							AS ativo_str,
					
					case 
					when TRIM(t.atendida) = ''Sim'' then 1::bit
					when TRIM(t.atendida) = ''Nï¿½o'' then 0::bit
					else sc.atendida_bit end						AS atendida_bit,
					
					case 
					when TRIM(t.produtiva) = ''Sim'' then 1::bit
					when TRIM(t.produtiva) = ''Nï¿½o'' then 0::bit
					else sc.produtiva_bit end						AS produtiva_bit,

					case 
					when TRIM(t.cpc) = ''Sim'' then 1::bit
					when TRIM(t.cpc) = ''Nï¿½o'' then 0::bit
					else sc.cpc_bit end								AS cpc_bit,
					
					case 
					when TRIM(t.terceiro) = ''Sim'' then 1::bit
					when TRIM(t.terceiro) = ''Nï¿½o'' then 0::bit
					else sc.terceiro_bit end						AS terceiro_bit,

					coalesce(nullif(trim(coalesce(t.descricao, '''')), ''''), sc.descricao_str) 
																	AS descricao_str,
					coalesce(nullif(trim(coalesce(t.historico_padrao, '''')), ''''), sc.historico_padrao_str) 
																	AS historico_padrao_str,
					coalesce(nullif(trim(coalesce(t.codigo_banco, '''')), ''''), sc.codigo_banco_str) 
																	AS codigo_banco_str,

                    CASE 
					when trim(t.tipo_contato) = ''Direto'' 	 then ''D''
					when trim(t.tipo_contato) = ''Indireto'' then ''I''
					when trim(t.tipo_contato) = ''Geral'' 	 then ''G''
					else sc.tipo_contato_str end					AS tipo_contato_str,

					case 
					when trim(t.fup_automatico) = ''Sim'' then ''N''
					when trim(t.fup_automatico) = ''Nï¿½o'' then ''S''
					else sc.atualiza_data_contato_manual_str end	AS atualiza_data_contato_manual_str,

					-- serï¿½ mantido o valor hifen para nï¿½o alterar
					case 
					when trim(t.motivo_inadimplencia) = ''-'' then mi.codigo_str
					else trim(t.motivo_inadimplencia) 
					end 											AS motivo_inadimplencia_str,
					
					-- serï¿½ mantido o valor hifen para nï¿½o alterar
					case 
					when trim(t.at_asm) = ''-'' then sc.at_str
					else trim(t.at_asm) 
					end 											AS at_str,

					-- movo para class_at_str S ou N (chkbox cb003)
					case 
					when (atasm.codigo_str is null and trim(coalesce(t.at_asm,'''')) <> ''-'') then ''N''
					when trim(coalesce(t.at_asm,'''')) = ''-'' then sc.class_at_str
					else ''S'' end 									AS class_at_str,
					
					case when (sc.id_cbsitcontato_int  IS NULL) 	then ''I''
					else ''A'' end							AS inclui_altera
				
				 FROM 	' || tabtemp || ' 	t
				 left join cbsitcontato sc on (sc.codigo_int =  TRIM(t.codigo_fup)::bigint and sc.id_gecliente_int = ' || idgecliente || ')
				 left join gemotivoinadimplencia mi on mi.id_gemotivoinadimplencia_int = sc.id_gemotivoinadimplencia_int
				 left join dblink(''dbname=plngs port=5432 host=10.20.10.204 user=postgres password=c4Poqdkn'',
				 ''select codigo_str from sysatdinamico where id_syscliente_int = ' || idgecliente || ''')
				 As atasm (codigo_str varchar(50))
				 on atasm.codigo_str = t.at_asm
				 where t.chave_str = ''' || chave || '''
				 '; 

		EXECUTE 'CREATE INDEX ' || tabtemp || '_fup_cbsitcontato_idx1 ON ' || tabtemp || '_fup_cbsitcontato USING btree(id_cbsitcontato_int);';	

	-- ***** INCONSISTENCIAS RECEBIDAS	
	ELSEIF processo = 1 THEN 

-- Inconsistï¿½ncias ATs
	FOR regatasm IN EXECUTE 'SELECT 
			'''' || (''AT Nï¿½O ENCONTRADOS! '' || t.codigo_int || '' '' || substring(t.descricao_str,1,100)) as msg
			FROM ' || tabtemp || '_fup_cbsitcontato t
--			left join cbsitcontato sc on sc.codigo_int = t.codigo_int
			left join dblink(''dbname=plngs port=5432 host=10.20.10.204 user=postgres password=c4Poqdkn'',
			''select codigo_str from sysatdinamico where id_syscliente_int = ' || idgecliente || ''')
			As atasm (codigo_str varchar(50))
			on atasm.codigo_str = t.at_str
			where (atasm.codigo_str is null and trim(coalesce(t.at_str,'''')) <> '''') 
			and t.chave_str = ''' || chave || '''
			group by msg;  '

		LOOP
			IF regatasm.msg IS NOT NULL THEN 
				EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = ''' || regatasm.msg || ''' 
					  WHERE _inconsistencia is null 
					    AND chave_str = ''' || chave || '''
					    AND linha = (SELECT min(t1.linha) 
							   FROM ' || tabtemp || ' t1
							  WHERE t1.chave_str = ''' || chave || '''
							    AND t1._inconsistencia is null)';
			END IF;
		END LOOP;
		
-- Inconsistï¿½ncias Motivo Inadimplï¿½ncia
	FOR regmoina IN EXECUTE 'SELECT 
			'''' || (''MOT. INAD. Nï¿½O ENCONTRADOS! '' || t.codigo_int || '' '' || substring(t.descricao_str,1,100)) as msg
			FROM ' || tabtemp || '_fup_cbsitcontato t
			left join gemotivoinadimplencia mi on mi.codigo_str = t.motivo_inadimplencia_str
			where (mi.id_gemotivoinadimplencia_int is null and trim(coalesce(t.motivo_inadimplencia_str,'''')) <> '''')
			and t.chave_str = ''' || chave || '''
			group by msg;  '

		LOOP
			IF regmoina.msg IS NOT NULL THEN 
				EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = ''' || regmoina.msg || '''  
					  WHERE _inconsistencia is null 
					    AND chave_str = ''' || chave || '''
					    AND linha = (SELECT min(t2.linha) 
							   FROM ' || tabtemp || ' t2
							  WHERE t2.chave_str = ''' || chave || '''
							    AND t2._inconsistencia is null)';
			END IF;
		END LOOP;
		
	ELSEIF processo = 2 THEN

		raise notice 'Inclui/Altera dados em cbsitcontasto...';

		--cbsitcontato
                EXECUTE 'INSERT INTO cbsitcontato (
				id_cbsitcontato_int,
				tstamp,
				id_gecliente_int,				
				id_geusuario_int,
				codigo_int,
				ativo_str,
				atendida_bit,
 				produtiva_bit,
				cpc_bit,
				terceiro_bit,
                descricao_str,
				historico_padrao_str,
				codigo_banco_str,
				tipo_contato_str,
				atualiza_data_contato_manual_str,
				id_gemotivoinadimplencia_int,
				at_str,
				class_at_str
				)
                SELECT 
				t.id_cbsitcontato_int,
				t.tstamp,
				t.id_gecliente_int,
				t.id_geusuario_int,
				t.codigo_int,
				t.ativo_str,
				t.atendida_bit,
 				t.produtiva_bit,
				t.cpc_bit,
				t.terceiro_bit,
                t.descricao_str,
				t.historico_padrao_str,
				t.codigo_banco_str,
				t.tipo_contato_str,
				t.atualiza_data_contato_manual_str,
				mi.id_gemotivoinadimplencia_int,
				t.at_str,
				t.class_at_str
				
                FROM ' || tabtemp || '_fup_cbsitcontato t
				left join gemotivoinadimplencia mi on mi.codigo_str = t.motivo_inadimplencia_str
                WHERE 	t.inclui_altera = ''I''
                AND 	t.chave_str = ''' || chave || '''';

				EXECUTE	'UPDATE cbsitcontato SET 
--				id_cbsitcontato_int,
				tstamp=t.tstamp,
				id_gecliente_int=t.id_gecliente_int,
				id_geusuario_int=t.id_geusuario_int,
				codigo_int=t.codigo_int,
				ativo_str=t.ativo_str,
				atendida_bit=t.atendida_bit,
 				produtiva_bit=t.produtiva_bit,
				cpc_bit=t.cpc_bit,
				terceiro_bit=t.terceiro_bit,
                descricao_str=t.descricao_str,
				historico_padrao_str=t.historico_padrao_str,
				codigo_banco_str=t.codigo_banco_str,
				tipo_contato_str=t.tipo_contato_str,
				atualiza_data_contato_manual_str=t.atualiza_data_contato_manual_str,
				id_gemotivoinadimplencia_int=mi.id_gemotivoinadimplencia_int,
				at_str=t.at_str,
				class_at_str=t.class_at_str
				
                FROM ' || tabtemp || '_fup_cbsitcontato t
				left join gemotivoinadimplencia mi on mi.codigo_str = t.motivo_inadimplencia_str
				WHERE	t.inclui_altera = ''A'' 
				AND 	t.chave_str = ''' || chave || '''
				AND	cbsitcontato.id_cbsitcontato_int = t.id_cbsitcontato_int
				';

	END IF;
		
	RETURN  '';
END;
$$;

--
-- TOC entry 1933 (class 1255 OID 26966)
-- Name: fc_importa_retorno_boletagem(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_importa_retorno_boletagem(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
	registro 	RECORD;
	cont 		BIGINT;
	
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN

		-- **** Exclui as tabelas temporarias utilizadas
		EXECUTE '
			DROP TABLE IF EXISTS ' || tabtemp || '_cbitembordero;
			';

		-- **** Cria a tabela temporaria de parcela
		-- Somente quando a situacao for diferente de 5 para o registro 3
		EXECUTE 'CREATE TABLE ' || tabtemp || '_cbitembordero AS 
			SELECT	t.*, i.id_cbitembordero_int, c.id_cbcontrato_int, c.id_cbtiponegocio_int, i.vencimento_dat
			FROM	' || tabtemp || ' t
				INNER JOIN cbitembordero i on i.id_cbitembordero_int = (replace(id_itembordero, ''' || idgecliente || ''' || ''B'', ''''))::bigint
				INNER JOIN ' || tabelafilha || ' c on c.id_cbcontrato_int = i.id_cbcontrato_int
			WHERE	t.chave_str = ''' || chave || ''' 
			;

			CREATE INDEX ' || tabtemp || '_cbitembordero_idx1
			  ON ' || tabtemp || '_cbitembordero
			  USING btree
			  (id_cbitembordero_int);';
			  
			RAISE NOTICE 'itembordero';
		
		

	ELSEIF processo = 1 THEN 
			--
	ELSEIF processo = 2 THEN

		EXECUTE 'INSERT INTO geretornocma
		(
			id_gecliente_int,
			id_cbtiponegocio_int,
			id_cbcontrato_int,
			id_cbitembordero_int,
			venc_boleto_dat,
			data_recebido_tim,
			data_enviocma_tim,
			situacao_str,
			tstamp,
			destino_str,
			tipo_retorno_str
		)
		SELECT
			' || idgecliente || ',
			t.id_cbtiponegocio_int,
			t.id_cbcontrato_int,
			t.id_cbitembordero_int,
			t.vencimento_dat,
			null,
			null,
			t.mensagem,
			current_timestamp,
			SUBSTR(trim(coalesce(t.endereco, '''')) || '' '' || trim(coalesce(t.complemento, ''''))  || '' - '' || trim(coalesce(t.bairro, ''''))   || '' - '' || trim(coalesce(t.cep, ''''))   || '' '' || trim(coalesce(t.cidade, ''''))  || ''-'' || trim(coalesce(t.uf, '''')) , 1 , 150 ),
			''BOLETAGEM''
			FROM ' || tabtemp || '_cbitembordero t
			WHERE	t.chave_str = ''' || chave || ''' 
		';
		

	END IF;
	RETURN  '';
END;
$$;

--
-- TOC entry 1934 (class 1255 OID 26969)
-- Name: fc_importa_usuario(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_importa_usuario(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$

DECLARE
	registro 	RECORD;
	cont 		BIGINT;

	iIdGeusuario BIGINT;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN

		
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_gefilial_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_gefilial_int int8;  ';
		END IF;
	
	
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_geusuario_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_geusuario_int int8;  ';
		END IF;
	
	
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''login_geusuario'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN login_geusuario boolean;  ';
		END IF;
	
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''cpf_corrigido'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN cpf_corrigido varchar(255);  ';
		END IF;
	
	
	
		execute 'UPDATE ' || tabtemp || ' t SET id_gefilial_int = g.id_gefilial_int 
				from gefilial g 
				where g.codigo_str = t.filial
				and t.id_gefilial_int is null;';
			
			
		execute 'UPDATE ' || tabtemp || ' t SET id_geusuario_int = g.id_geusuario_int 
				from geusuario g 
				where abs_cpf(g.cpf_str) = abs_cpf(t.cpf)
				and g.codigo_rh_str = t.nc
				and t.id_geusuario_int is null;';
			
		execute 'UPDATE ' || tabtemp || ' t SET cpf_corrigido = abs_cpf(cpf)
				where cpf is not null;';
			
		execute 'UPDATE ' || tabtemp || ' t SET login_geusuario = true
				from geusuario g 
				where g.nomelogin_str = t.login;';
		
	ELSEIF processo = 1 THEN 
		--INCOSISTENCIAS
	
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = ''''
			WHERE _inconsistencia is null
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
	
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''CPF em branco, '' 
			WHERE cpf IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Nome em branco, '' 
			WHERE Nome IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''NC em branco, '' 
			WHERE nc  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''login em branco, '' 
			WHERE login  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Filial em branco ou diferente de 1 (Bauru) ou 25 (Marilia), '' 
			WHERE filial  IS NULL or coalesce(filial, '''') not in (''1'', ''25'') 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Carteira em branco, '' 
			WHERE carteira  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data_nascimento em branco, '' 
			WHERE Data_nascimento  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data_admissao em branco, '' 
			WHERE Data_admissao  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cargo em branco, '' 
			WHERE Cargo  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Escolaridade em branco, '' 
			WHERE Escolaridade  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Filial nao encontrada, '' 
			WHERE id_gefilial_int  IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Usuï¿½rio jï¿½ cadastrado com esse CPF e NC, '' 
			WHERE id_geusuario_int  IS not NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Login jï¿½ cadastrado, '' 
			WHERE login_geusuario  IS not NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
		
	ELSEIF processo = 2 THEN
		
		FOR registro IN EXECUTE 'SELECT * from ' || tabtemp || ' where trim(coalesce(_inconsistencia, '''')) = '''' 
								AND chave_str = ''' || chave ||  '''
								 order by linha'
		LOOP
		
			iIdGeusuario := (select id_geusuario_int from geusuario where abs_cpf(cpf_str) = registro.cpf_corrigido limit 1);
			
			
			if iIdGeusuario is not null then
				update geusuario set cpf_str = null, id_sysfuncionario_int = null where id_geusuario_int = iIdGeusuario;
				raise notice  'IDGEUSUARIO % encontrado para CPF mas com outro NC, realiza a limpeza !', iIdGeusuario;
			
			end if;
			insert into geusuario (nomecompleto_str, escolaridade_str, funcao_str, data_nasc_dat, admissao_dat,  codigo_rh_str, 
		 						id_geempresa_int, id_gefilial_int, id_gedepartamento_int, id_getipousuario_int, nomelogin_str, 
		 						senha_str, sit_contrato_str, ativo_str, codigo_str, tstamp, usuarioadm_str, cpf_str, sincronizangs_str) values 
				 ( registro.nome,				--nomecompleto_str
				 	UPPER(registro.escolaridade),								-- escolaridade_str
				 	UPPER(registro.cargo),				-- funcao_str
				 	TO_DATE(registro.data_nascimento, 'DD/MM/YYYY'),								-- data_nasc_dat
				 	TO_DATE(registro.data_admissao, 'DD/MM/YYYY'),								-- admissao_dat
				 	registro.nc,									--  codigo_rh_str
				 	1,											-- id_geempresa_int
				 	registro.id_gefilial_int,											-- id_gefilial_int
				 	1,											-- id_gedepartamento_int
				 	4,											-- id_getipousuario_int
				 	registro.login,								-- nomelogin_str
				 	'Q0=~xE8S',									-- senha_str - 123Mud@r
				 	'ASD',										-- sit_contrato_str
				 	'1',										-- ativo_str
				 	(select (codigo_str::INT + 1)::varchar from geparametroid where tabela_str = 'geusuario'), 									-- codigo_str
				 	current_timestamp, 							-- tstamp
				 	'S',										-- usuarioadm_str
				 	registro.cpf_corrigido,								-- cpf_str
				 	'S') 										-- sincronizangs_str
				 returning id_geusuario_int  INTO iIdGeusuario;

				--USAR O id_geusuario_int QUE RETORNOU DO PRIMEIRO INSERT
				  insert into geusuariocliente(id_geusuario_int, id_gecliente_int, tipo_contato_str, turno_str, tstamp) values 
				  	(  iIdGeusuario, registro.carteira::bigint, 'A', case 'INTEGRAL' when 'MANHA' then 'M' when 'INTEGRAL' then 'I' when 'TARDE' then 'T' when 'NOITE' then 'N' end, current_timestamp);

				--USAR O id_geusuario_int QUE RETORNOU DO PRIMEIRO INSERT
				 insert into gegrupousuario(id_gegrupo_int, id_geusuario_int, ativo_str, tstamp)  values 
				 	(  (select id_gegrupo_int from gegrupo where codigo_str = '9876'), iIdGeusuario, 1,  current_timestamp);

				update geparametroid set codigo_str = (codigo_str::INT + 1)::varchar where tabela_str = 'geusuario';

				 raise notice  'CI % CADASTRADO COM SUCESSO!', registro.cpf_corrigido;

		END LOOP;
  
	END IF;
	
	RETURN  '';
END;

$$;

--
-- TOC entry 1935 (class 1255 OID 26973)
-- Name: fc_isdigit(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_isdigit(text) RETURNS boolean
    LANGUAGE sql IMMUTABLE
    AS $_$
	
       SELECT $1 ~ '^(-)?[0-9]+$';

$_$;

--
-- TOC entry 1936 (class 1255 OID 26982)
-- Name: fc_qualidade(character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_qualidade(tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont        int8;
registro    RECORD;
rsContato   record;
rsEmail	    record;
rsEndereco  record;
rsContrato  record;
tabcontato  text;
sqlorigem text;
sqlinsert text;
sClassificacao text;
sidtipo text;
sContato text;
qtdContato bigint;
	
BEGIN

	FOR registro in EXECUTE 'WITH t AS (
					SELECT tabela_qualidade_str AS tabelas
					FROM cbmodlayout WHERE codigo_str = split_part(UPPER(''' || tabtemp || '''), UPPER(''ge202tmp_''), 2) )
				SELECT  regexp_split_to_table(tabelas,'','') AS tabelas from t'

	LOOP

	sqlorigem = '';
	sContato = '';
	sClassificacao = '';
	sqlinsert = '';
	qtdContato = 0;

	RAISE NOTICE '%', registro.tabelas;

	raise notice 'INSERT GECLIENTE ...';
		--INSERT GECLIENTE
		EXECUTE 'INSERT INTO geqlcliente 
					(cpf_str, 
					rg_str, 
					org_exp_str, 
					data_exp_dat, 
					uf_rg_str, 
					nome_str, 
					id_geusuario_int, 
					tstamp, 
					cpf_provisorio_bit)
				with s as 
					(SELECT 
						id_cbcontrato_int, 
						cpf_str, 
						rg_str, 
						org_exp_rg_str, 
						dt_exp_rg_dat, 
						uf_rg_str, 
						nome_str 
					FROM ' || registro.tabelas || ' e 

					WHERE NOT EXISTS (SELECT 1 FROM geqlcliente t WHERE t.cpf_str = e.cpf_str)),
						t AS (SELECT * FROM s a WHERE NOT EXISTS (SELECT 1 FROM geqlcontrato b WHERE a.id_cbcontrato_int = b.id_cbcontrato_int))
						
			SELECT DISTINCT ON(cpf_str) cpf_str, 
					rg_str, 
					org_exp_rg_str, 
					dt_exp_rg_dat::date, 
					uf_rg_str, nome_str, 
					' || idgeusuario || ' , 
					current_timestamp, 
					0::bit from t';

-- 			Encontra as tabelas utilizadas na qualidade de Contato
			FOR rsContato in EXECUTE 'SELECT campo_contrato_str, campo_tratamento_str, id_geqltipocontato_int						
						 FROM geqlconfiguracaocontato 
						 WHERE id_gecliente_int = ' || idgecliente || ' AND tabela_contrato_str in (''' || registro.tabelas || ''')
						 ORDER BY id_geqlconfiguracaocontato_int'

			LOOP	
	 			raise notice '%',registro.tabelas;	
 				sidtipo = rsContato.id_geqltipocontato_int;
 
				qtdContato = (SELECT COUNT(campo_tratamento_str) as COUNT 
 					     FROM geqlconfiguracaocontato 
 					     WHERE campo_tratamento_str = 'contato_str' AND tabela_contrato_str =  '' || registro.tabelas || '' GROUP BY sequencia_int);

				raise notice 'Concatena DDD';
				
				--Concatena DDD
				if qtdContato > 1 and lower(rsContato.campo_tratamento_str) = 'contato_str' then
					sContato = sContato || 't.' ||rsContato.campo_contrato_str || ' || ';
				elsif qtdContato = 1 and lower(rsContato.campo_tratamento_str) = 'contato_str' then
					sContato = 't.' || rsContato.campo_contrato_str;
				end if;

				raise notice 'qtdContato %', qtdContato;
				raise notice 'sContato %', sContato;

				raise notice 'Atribui Classificaï¿½ï¿½o';

				--Atribui Classificaï¿½ï¿½o 
				if lower(rsContato.campo_tratamento_str) = 'classificacao_str' then
					sClassificacao = 't.' || rsContato.campo_contrato_str;
				else
					sClassificacao = '''9 - Indefinido''';
				end if;

				raise notice '%', sClassificacao;

				if lower(rsContato.campo_tratamento_str) <> 'classificacao_str' and lower(rsContato.campo_tratamento_str) <> 'contato_str' then
					sqlorigem = ',' || rsContato.campo_tratamento_str || sqlorigem;
					sqlinsert = ', t.' || rsContato.campo_contrato_str || sqlinsert;

				END IF;

			END LOOP;

			IF sContato like '%||%' THEN
				sContato = substr(sContato, 1,length(sContato)-4);
			END IF;

			raise notice 'INSERT GEQLCONTATO...';
			
			IF sqlorigem <> '' Or sContato <> '' THEN

				--INSERT GEQLCONTATO
				EXECUTE 'INSERT INTO geqlcontato
						(id_geqlcliente_int,
						id_geqltipocontato_int,
						tabela_origem_str,
						classificacao_str,
						contato_str
						' || sqlorigem || ')
						
					SELECT  q.id_geqlcliente_int,
						' || sidtipo || ',
						''' || registro.tabelas || ''',
						' || sClassificacao || ',
						' || sContato || '	
						' || sqlinsert || '
						
					FROM ' || registro.tabelas || ' t
					
					INNER JOIN geqlcliente q ON q.cpf_str = t.cpf_str
					LEFT JOIN geqlcontato c ON q.id_geqlcliente_int = c.id_geqlcliente_int and c.contato_str = fcformatatelefone(t.contato_str)
					WHERE c.contato_str IS NULL ';

			END IF;

		
			sqlorigem = '';
			sqlinsert = '';

			raise notice 'tabelas qualidade...';
			
-- 			Encontra as tabelas utilizadas na qualidade de e-mail
			FOR rsEmail in EXECUTE 'SELECT campo_contrato_str, campo_tratamento_str	, id_geqltipoemail_int						
						 FROM geqlconfiguracaoemail
						 WHERE id_gecliente_int = ' || idgecliente || ' AND tabela_contrato_str in (''' || registro.tabelas || ''')
						 ORDER BY id_geqlconfiguracaoemail_int'

			LOOP		
				sidtipo = rsEmail.id_geqltipoemail_int;
				RAISE NOTICE '%', rsEmail.campo_tratamento_str;
				RAISE NOTICE '%', rsEmail.campo_contrato_str;
				raise notice '%',registro.tabelas;	

				if lower(rsEmail.campo_tratamento_str) = 'classificacao_str' then
					sClassificacao = 't.' || rsEmail.campo_contrato_str;
				else
					sClassificacao = '''9 - Indefinido''';
				end if;

				if lower(rsEmail.campo_tratamento_str) <> 'classificacao_str' then
					sqlorigem = ',' || rsEmail.campo_tratamento_str || sqlorigem;
					sqlinsert = ', t.' || rsEmail.campo_contrato_str || sqlinsert;
				END IF;
			END LOOP;

			raise notice 'insert geqlemail ...';
			
			IF COALESCE(sqlorigem,'') <> '' THEN
			
				--INSERT geqlemail
				EXECUTE 'INSERT INTO geqlemail
						(id_geqlcliente_int,
						id_geqltipoemail_int,
						tabela_origem_str,
						classificacao_str
						' || sqlorigem || ')
						
					SELECT  q.id_geqlcliente_int,
						' || sidtipo || ',
						''' || registro.tabelas || ''',
						' || sClassificacao || '
						' || sqlinsert || '
						
					FROM ' || registro.tabelas || ' t
					
					INNER JOIN geqlcliente q on q.cpf_str = t.cpf_str
					LEFT JOIN geqlemail e on e.id_geqlcliente_int = q.id_geqlcliente_int 
						AND UPPER(e.email_str) = UPPER(t.email_str)
					WHERE e.email_str IS NULL
					AND t.email_str LIKE ''%@%'' ';

			END IF;
			
			sqlorigem = '';
			sqlinsert = '';
			
			raise notice 'tabelas qualidade end 2...';

-- 			Encontra as tabelas utilizadas na qualidade de Endereï¿½o
			FOR rsEndereco in EXECUTE 'SELECT campo_contrato_str, campo_tratamento_str, id_geqltipoendereco_int						
						 FROM geqlconfiguracaoendereco
						 WHERE id_gecliente_int = ' || idgecliente || ' AND tabela_contrato_str in (''' || registro.tabelas || ''')
						 ORDER BY id_geqlconfiguracaoendereco_int'

			LOOP		
				sidtipo = rsEndereco.id_geqltipoendereco_int;
				RAISE NOTICE '%', rsEndereco.campo_tratamento_str;
				raise notice '%',registro.tabelas;	

				if lower(rsEndereco.campo_tratamento_str) = 'classificacao_str' then
					sClassificacao = 't.' || rsEndereco.campo_contrato_str;
				else
					sClassificacao = '''9 - Indefinido''';
				end if;

				if lower(rsEndereco.campo_tratamento_str) <> 'classificacao_str' then
					sqlorigem = ',' || rsEndereco.campo_tratamento_str || sqlorigem;
					sqlinsert = ', t.' || rsEndereco.campo_contrato_str || sqlinsert;
				END IF;
			END LOOP;

			raise notice 'insert geqlendereco end 2...';

			
			IF sqlorigem <> '' THEN
			
				--INSERT geqlendereco
				EXECUTE 'INSERT INTO geqlendereco
						(id_geqlcliente_int,
						id_geqltipoendereco_int,
						tabela_origem_str,
						classificacao_str
						' || sqlorigem || ')
						
					SELECT  c.id_geqlcliente_int,
						' || sidtipo || ',
						''' || registro.tabelas || ''',
						' || sClassificacao || '
						' || sqlinsert || '
						
					FROM ' || registro.tabelas || ' t
					
					INNER JOIN geqlcliente c on c.cpf_str = t.cpf_str
					LEFT JOIN geqlendereco e on e.id_geqlcliente_int = c.id_geqlcliente_int and 
						 	COALESCE(LEFT(t.endereco_str, 100), '''') || COALESCE(LEFT(t.bairro_str, 100), '''') || COALESCE(LEFT(t.cidade_str, 100), '''') || COALESCE(LEFT(t.cep_str, 100), '''') = 
						    COALESCE(LEFT(e.endereco_str, 100), '''') || COALESCE(LEFT(e.bairro_str, 100), '''') || COALESCE(LEFT(e.cidade_str, 100), '''') || COALESCE(LEFT(e.cep_str, 100), '''')
					WHERE e.endereco_str is null
					AND t.cidade_str is not null 
					AND TRIM(COALESCE(t.endereco_str, '''')) <> '''' ';

			END IF;
			
			sqlorigem = '';
			sqlinsert = '';
			
			

 	END LOOP;	

	raise notice 'insert geqlcontrato fim...';
	
	--INSERT GEQLCONTRATO
	EXECUTE 'INSERT INTO geqlcontrato 
			(id_geqlcliente_int, 
			id_gecliente_int, 
			id_cbtiponegocio_int, 
			id_cbcontrato_int, 
			contrato_str, 
			id_geusuario_int, 
			tstamp)
			
		select t1.id_geqlcliente_int, 
		       ' || idgecliente || ', 
		       t1.id_cbtiponegocio_int, 
		       t1.id_cbcontrato_int, 
		       t1.contrato_str, 
		       ' || idgeusuario || ', 
		       current_timestamp
		       
		FROM (
			SELECT DISTINCT ON (id_cbcontrato_int) id_geqlcliente_int, 
					id_cbcontrato_int, 
					id_cbtiponegocio_int,
					contrato_str 
			FROM (
				SELECT 	cli.id_geqlcliente_int, 
					id_cbcontrato_int, 
					id_cbtiponegocio_int,
					contrato_str 
					
				FROM ' || tabelafilha || ' c
				JOIN geqlcliente cli on cli.cpf_str = c.cpf_str
				WHERE data_ultima_distrib_dat = CURRENT_DATE
			) 
		t) t1
		
		LEFT JOIN geqlcontrato q on q.id_cbcontrato_int = t1.id_cbcontrato_int
		WHERE q.id_cbcontrato_int IS NULL';

	RETURN  '';
END;
$$;

--
-- TOC entry 1937 (class 1255 OID 26986)
-- Name: fc_separa_layout_copy(bigint, character varying, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_separa_layout_copy(idlayoutaux bigint, tabtemp character varying, chave character varying, tp_reg character varying, campo_tp_reg character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registrodet RECORD;
registroitem RECORD;
registro RECORD;
ssql	character varying;
ssqlins character varying;
qtlinhalayout int;

BEGIN

	EXECUTE 'DROP TABLE IF EXISTS ' || tabtemp;
	ssql = 'CREATE TABLE ' || tabtemp || ' ( ';
	-- FOR apenas para criar a temporaria com os campos do cadastro de layout
	FOR registrodet IN EXECUTE 
			'SELECT * FROM (
				SELECT DISTINCT ON (ite.nome_campo_str)
				    det.codigo_str as sCodRegistro,
				    ite.num_seq_int,
				    ite.nome_campo_str,
				    ite.posicao_inicial_int,
				    COALESCE(NULLIF(ite.campo_tam_int,0),255) as campo_tam_int,
				    ite.campo_tipo_str,
				    COALESCE(ite.invisivel_bit, ''0''::bit)::int4 as invisivel_bit,
				    ite.tipo_operacao_str, ite.campo_vlr_fixo_str,
				    ite.num_decimais_int, ite.campo_orig_str,
				    ite.formata_numero_str, ite.retira_form_int,
				    COALESCE(ite.formato_data_str, ''DDMMYYYY'') as formato_data_str,
				    ite.identificador_linha_bit,det.id_cbdetalhelay_int,
				    ite.formula_sql_txt,
				    COALESCE(ite.nome_rotulo_str, '''') as nome_rotulo_str,
				    ite.posicao_rotulo_int,
				    COALESCE(ite.campo_tam_int,0) as campo_tam_rotulo_int,
				    COALESCE(det.ignorar_linha_rotulo_bit::bigint,0) as ignorar_linha_rot,
				    0 as pos_abs_rotulo_int, ite.id_cbitemlay_int,
				    0 as detalhe_ja_processado, ite.id_cbdetalhelay_int::float4 as id_det,
				    ite.campo_vlr_fixo_str, COALESCE(det.ignorar_linha_ident_bit::bigint,0) as ignorar_linha_ident,
				    COALESCE(remover_carac_str, '''') as remover_carac_str,
				    COALESCE(ite.carac_preenchidos_str, '''') as carac_preenchidos_str
				from
				    cbitemlay ite
				       inner join cbdetalhelay det
					  on (det.id_cbdetalhelay_int = ite.id_cbdetalhelay_int)
				where
				    det.id_cbmodlayout_int = ' || idlayoutaux || '
				order by ite.nome_campo_str, ite.campo_tam_int desc
				--order by
				--    ite.num_seq_int 
				) t
			ORDER BY id_det, num_seq_int
			'
	LOOP
		ssql = ssql || registrodet.nome_campo_str;

		--ALFANUMERICO
		IF  SUBSTR(registrodet.campo_tipo_str, 1, 1) = '1' THEN                                       
			ssql = ssql || 
			' VARCHAR (' || registrodet.campo_tam_int || '), ';
		--NUMERICO
		ELSEIF SUBSTR(registrodet.campo_tipo_str, 1, 1) = '2' THEN  
			ssql = ssql || 
			' DOUBLE PRECISION, ';

		--INTEIRO
		ELSEIF SUBSTR(registrodet.campo_tipo_str, 1, 1) = '3' THEN                                       
			ssql = ssql || 
			' BIGINT, ';

		--DATA-HORA
		ELSEIF SUBSTR(registrodet.campo_tipo_str, 1, 1) = '4' THEN                                       
				ssql = ssql || 
				' TIMESTAMP,  ';

		--DATA
		ELSEIF SUBSTR(registrodet.campo_tipo_str, 1, 1) = '5' THEN                                       
				ssql = ssql || 
				' DATE, ';

		--TEXTO
		ELSEIF SUBSTR(registrodet.campo_tipo_str, 1, 1) = '6' THEN                                       
				ssql = ssql || 
				' TEXT, ';
		END IF;

		
	END LOOP;

	ssql = ssql || 'linha integer, chave_str character varying(30), arquivo_str character varying(255), _aviso text, _inconsistencia text);';
	
	raise notice '%', ssql;

	EXECUTE ssql;

	--ljmartins - teste para quando o layout tiver apenas uma linha
	qtlinhalayout = (select count(*) as cont from cbdetalhelay where id_cbmodlayout_int = idlayoutaux);
	raise notice 'qtlinhas %', qtlinhalayout;

	FOR registrodet IN EXECUTE 
			'SELECT * FROM (
				SELECT                                                                         
				    det.codigo_str as sCodRegistro,                                            
				    ite.num_seq_int,                                                           
				    ite.nome_campo_str,                                                        
				    ite.posicao_inicial_int,                                                   
				    COALESCE(NULLIF(ite.campo_tam_int,0),255) as campo_tam_int,                
				    ite.campo_tipo_str,                                                        
				    COALESCE(ite.invisivel_bit, ''0''::bit)::int4 as invisivel_bit,              
				    ite.tipo_operacao_str, ite.campo_vlr_fixo_str,                             
				    ite.num_decimais_int, ite.campo_orig_str,                                  
				    ite.formata_numero_str, ite.retira_form_int,                               
				    COALESCE(ite.formato_data_str, ''DDMMYYYY'') as formato_data_str,            
				    ite.identificador_linha_bit,det.id_cbdetalhelay_int,                       
				    ite.formula_sql_txt,                                                       
				    COALESCE(ite.nome_rotulo_str, '''') as nome_rotulo_str,                      
				    ite.posicao_rotulo_int,                                                    
				    COALESCE(ite.campo_tam_int,0) as campo_tam_rotulo_int,                     
				    COALESCE(det.ignorar_linha_rotulo_bit::bigint,0) as ignorar_linha_rot,     
				    0 as pos_abs_rotulo_int, ite.id_cbitemlay_int,                             
				    0 as detalhe_ja_processado, ite.id_cbdetalhelay_int::float4 as id_det,     
				    ite.campo_vlr_fixo_str, COALESCE(det.ignorar_linha_ident_bit::bigint,0) as ignorar_linha_ident,                           
				    COALESCE(remover_carac_str, '''') as remover_carac_str,                      
				    COALESCE(ite.carac_preenchidos_str, '''') as carac_preenchidos_str,
				    CASE WHEN m.tipo_arquivo_int = 1 THEN -- 1=Excel -- ljmartins
					'';''
				    ELSE
					TRIM(COALESCE(m.separador_str, '''')) 
				    END as separador_str 
				    
				from                                                                           
				    cbitemlay ite                                                              
				       inner join cbdetalhelay det                                             
					  on (det.id_cbdetalhelay_int = ite.id_cbdetalhelay_int)    
				       left join cbmodlayout m on m.id_cbmodlayout_int = det.id_cbmodlayout_int           
				where                                                                          
				    det.id_cbmodlayout_int = ' || idlayoutaux || '
				    --AND identificador_linha_bit = ''1''
				    AND (identificador_linha_bit = ''1'' OR ' || qtlinhalayout || ' = 1)
				order by                                                                       
				    ite.num_seq_int                                                            

				) t
			ORDER BY id_det, num_seq_int limit ' || qtlinhalayout
	LOOP

		ssql = 'INSERT INTO ' || tabtemp || ' ( ';

		ssqlins = ' (SELECT ';
		
		FOR registroitem IN EXECUTE
				 'SELECT * FROM cbitemlay i
				  JOIN cbdetalhelay d on d.id_cbdetalhelay_int = i.id_cbdetalhelay_int 
				  LEFT JOIN cbmodlayout m on m.id_cbmodlayout_int = d.id_cbmodlayout_int
				  WHERE i.id_cbdetalhelay_int = ' || registrodet.id_det || '
				 '
		LOOP

			-----------------------------------------------------------------------------------------------
-- 			Verifica se serï¿½ utilizado algum separador na importaï¿½ï¿½o
			-----------------------------------------------------------------------------------------------
			IF TRIM(COALESCE('' || registroitem.separador_str || '','')) <> '' THEN

				--ALFANUMERICO
				IF  SUBSTR(registroitem.campo_tipo_str, 1, 1) = '1' THEN                                       
					ssqlins = ssqlins || 
					'NULLIF(TRIM(SPLIT_PART(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')),'''')::varchar ';
	
				--NUMERICO
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '2' THEN  

					IF COALESCE(registroitem.num_decimais_int, 0) > 0 THEN
					
					ssqlins = ssqlins || 
						'CASE WHEN TRIM(SPLIT_PART(linha_str,  ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')) = ''''
							THEN null::double precision
						WHEN 	TRIM(SPLIT_PART(linha_str,  ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')) = ''0''
							THEN 0::double precision
						ELSE
							TRIM(SPLIT_PART(linha_str,  ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || '))::double precision/100
						/*
							LTRIM
							(
							(substr(split_part(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || 
							'),1,(length(SPLIT_PART(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')) - 
							' || registroitem.num_decimais_int || '))) 
							
							|| ''.'' || 
							
							(substr(split_part(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || '),
							(length((substr(split_part(linha_str,''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || '),1,
							(length(SPLIT_PART(linha_str,  ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')) - 
							' || registroitem.num_decimais_int || '))))+1),' || registroitem.num_decimais_int || ')) 

							,''0'' )::double precision
						*/
						
						END';
						
					ELSE
				
						IF COALESCE(registroitem.formata_numero_str, '0') = '0' THEN
							ssqlins = ssqlins || 
							'replace(NULLIF(ltrim(TRIM(split_part(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')), ''0''), ''''), '','', '''')::double precision ';
						ELSE
							ssqlins = ssqlins || 
							'replace(replace(NULLIF(ltrim(TRIM(split_part(linha_str, ''' || registroitem.separador_str || ''', ' || 
							registroitem.posicao_inicial_int || ')), ''0''), ''''), ''.'', ''''), '','', ''.'')::double precision ';
						END IF;

					END IF;

				--INTEIRO
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '3' THEN                                       
						ssqlins = ssqlins || 
						'NULLIF(TRIM(SPLIT_PART(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')),'''')::bigint ';

				--DATA-HORA
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '4' THEN                                       
						ssqlins = ssqlins || 
						'to_timestamp(nullif(trim(split_part(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || 
						')),null),''' ||
						
						CASE 
							WHEN registroitem.formato_data_str = 'YYYY-MM-DD HH:MM:SS' THEN 'YYYY-MM-DD HH24:MI:SS'
						ELSE REPLACE(REPLACE(registroitem.formato_data_str, 'HH', 'HH24'),'MM','MI') END
						
						|| ''') '
						;

				--DATA
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '5' THEN                                       
						ssqlins = ssqlins || 
						'to_date(NULLIF(TRIM(SPLIT_PART(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')), 
						''''), ''' || registroitem.formato_data_str || ''') ';

				--TEXTO
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '6' THEN                                       
						ssqlins = ssqlins || 
						'NULLIF(TRIM(SPLIT_PART(linha_str, ''' || registroitem.separador_str || ''', ' || registroitem.posicao_inicial_int || ')),'''')::text ';
	
				END IF;

			 ELSE

				--ALFANUMERICO
				IF  SUBSTR(registroitem.campo_tipo_str, 1, 1) = '1' THEN                                       
					ssqlins = ssqlins || 
					'NULLIF(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || ')), '''')::varchar ';
					
				--NUMERICO
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '2' THEN  

					IF COALESCE(registroitem.num_decimais_int, 0) > 0 THEN
					
					ssqlins = ssqlins || 
						'CASE WHEN TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || ')) = '''' 
							THEN null::double precision
						ELSE
						(ltrim(
						substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int - registroitem.num_decimais_int || ') 
						|| ''.'' || 
						substr(linha_str, ' || registroitem.posicao_inicial_int + (registroitem.campo_tam_int - registroitem.num_decimais_int) || ', ' || 
						registroitem.num_decimais_int || ')
						, ''0''))::double precision 
						END';
						
					ELSE
				
						IF COALESCE(registroitem.formata_numero_str, '0') = '0' THEN
							ssqlins = ssqlins || 
							'replace(NULLIF(ltrim(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || 
							')), ''0''), ''''), '','', '''')::double precision ';
						ELSE
							ssqlins = ssqlins || 
							'replace(replace(NULLIF(ltrim(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int
							 || ')), ''0''), ''''), ''.'', ''''), '','', ''.'')::double precision ';
						END IF;

					END IF;

				--INTEIRO
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '3' THEN                                       
						ssqlins = ssqlins || 
						'NULLIF(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || ')), '''')::bigint ';

				--DATA-HORA
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '4' THEN                                       
						ssqlins = ssqlins || 
						'to_timestamp(NULLIF(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || ')), ''''),
						 ''' ||
						CASE 
							WHEN registroitem.formato_data_str = 'YYYY-MM-DD HH:MM:SS' THEN 'YYYY-MM-DD HH24:MI:SS'
						ELSE REPLACE(REPLACE(registroitem.formato_data_str, 'HH', 'HH24'),'MM','MI') END
						|| ''') '
						;

				--DATA
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '5' THEN                                       
						ssqlins = ssqlins || 
						'to_date(NULLIF(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || ')), ''''), ''' ||
						 registroitem.formato_data_str || ''') ';

				--TEXTO
				ELSEIF SUBSTR(registroitem.campo_tipo_str, 1, 1) = '6' THEN                                       
						ssqlins = ssqlins || 
						'NULLIF(TRIM(substr(linha_str, ' || registroitem.posicao_inicial_int || ', ' || registroitem.campo_tam_int || ')), '''')::text ';
				END IF;

			END IF;

			ssqlins = ssqlins || ' AS ' || registroitem.nome_campo_str || ', ' || chr(13);

			ssql = ssql || registroitem.nome_campo_str || ', ';

		END LOOP;

		ssql = ssql || ' linha, chave_str, arquivo_str, _aviso, _inconsistencia )  ';

		ssqlins = left(ssqlins, length(ssqlins) - 3) || chr(13);
		ssqlins = ssqlins || ', linha, chave_str, arquivo_str, _aviso, _inconsistencia FROM ' || tabtemp || '_copy 
			WHERE COALESCE(NULLIF(TRIM(_inconsistencia), ''''), '''') = '''' 
				' || CASE WHEN trim(coalesce('' || registrodet.separador_str || '','')) <> '' AND registrodet.identificador_linha_bit = '1' then
				'AND NULLIF(TRIM(SPLIT_PART(linha_str, ''' || registrodet.separador_str || ''', ' || registrodet.posicao_inicial_int || ')),'''')::text  = ''' || 
				registrodet.sCodRegistro || ''' '
			         WHEN trim(coalesce('' || registrodet.separador_str || '','')) <> '' AND qtlinhalayout = 1 then
				' AND 1=1'
				WHEN trim(coalesce('' || registrodet.separador_str || '','')) = '' AND qtlinhalayout = 1 then
				' '
			     ELSE
				'AND substr(linha_str, ' || registrodet.posicao_inicial_int || ', ' || registrodet.campo_tam_int || ') = ''' || registrodet.sCodRegistro || ''' 
			     ' END || '
			 );';

		raise notice '%', ssql || ssqlins;

		EXECUTE ssql || ssqlins;
		
	END LOOP;

	RETURN  '';

END;
$$;

--
-- TOC entry 1938 (class 1255 OID 26997)
-- Name: fc_valida_acordo_antes_calculo(bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_valida_acordo_antes_calculo(idcontrato bigint, idusuario bigint, idcampanha bigint) RETURNS character varying
    LANGUAGE plpgsql
    AS $$
DECLARE

   sRet			VARCHAR;
   iFup 		integer;
   
   /*
	Funcao criada para que sejam adicionada nela, todas as travas que forem solcitadas para a carteira.
	O retorno dela deve seguir a sintaxa mesagem@senha onde mesangem ï¿½ o que serï¿½ exibido no msgbox e senha ï¿½ a que serï¿½ usado caso possa ser liberado a trava em casos de excecao. Se nï¿½o tiver nada depois do @ a trava nao poderï¿½ ser liberada. A senha deve conter no maximo 6 digitos.
	Exemplo de utilizacao no Pan.
   */
BEGIN
	sRet := '';
        
	return sRet;
	
END;
$$;

--
-- TOC entry 1939 (class 1255 OID 27003)
-- Name: fc_valida_layout_copy(bigint, character varying, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fc_valida_layout_copy(idlayoutaux bigint, tabtemp character varying, chave character varying) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
ssql	character varying;
ssqlins character varying;
BEGIN

	--colocar aqui o(s) id(s) do(s) seu(s) layout(s) a usarem o copy
	IF idlayoutaux in (288) THEN
		FOR registro IN EXECUTE 
			'SELECT * FROM ' || tabtemp || '_copy WHERE chave_str = ''' || chave || ''' ;'
		LOOP
			--Ignorando cabeï¿½alho
			EXECUTE 'DELETE FROM ' || tabtemp || '_copy WHERE linha = 1';
		END LOOP;				
	END IF;
	

	RETURN  '';

END;
$$;

--
-- TOC entry 1940 (class 1255 OID 27007)
-- Name: fcampo(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcampo(text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
declare
   campos text;
   registro record;
   tabela alias for $1;
Begin
 campos := '';
 for registro in select attname from pg_attribute where attname not like '%pg.dropped%' and attnum > 0 and attrelid in (SELECT oid FROM pg_class where  relname = tabela ) order by attnum LOOP
   if campos = '' then
      campos :=  registro.attname;
   else
      campos := campos || ',' || registro.attname;
   end if;
 end loop;
return campos;
end;
$_$;

--
-- TOC entry 1941 (class 1255 OID 27015)
-- Name: fcbaixapagamentoeleva(character varying, date, double precision, date, bigint, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcbaixapagamentoeleva(character varying, date, double precision, date, bigint, bigint, bigint, bigint, bigint) RETURNS void
    LANGUAGE plpgsql
    AS $_$
DECLARE

	snossonumeroarquivo 	ALIAS FOR $1;
	sdatapagamento		ALIAS FOR $2;
	dvalorpago 		ALIAS FOR $3;
	sdatavenc		ALIAS FOR $4;

	v_varidempresa		ALIAS FOR $5;
	v_varidfilial		ALIAS FOR $6;
	v_varidcliente		ALIAS FOR $7;
	v_varidusuario		ALIAS FOR $8;

	iditembordero		ALIAS FOR $9;

	v_idcbpagamento		bigint;
	v_dblnumrecibo		bigint;
	v_dblsequencia		bigint;
	v_sserierecibo		character varying(5);

	v_PARCELAMENTO		CHARACTER VARYING;

	v_idforma		bigint;

	v_idcontrato	bigint;
	registropag     record;
	registropar     record;
	registro        record;
	
BEGIN

	SELECT	nextval('cbpagamento_seq')
	INTO	v_idcbpagamento;

	SELECT	sequencia_int + 1,
		recibo_num  + 1,
		numserie_recibo_str
	INTO	v_dblsequencia,
		v_dblnumrecibo,
		v_sserierecibo
	FROM	cbparamclifilial
	WHERE	id_gecliente_int = v_varidcliente
	AND 	id_gefilial_int = v_varidfilial;

	RAISE NOTICE 'SEQUENCIA %', v_dblsequencia;

	SELECT 	id_cbformapagamento_int
	INTO	v_idforma
	FROM 	cbformapagamento 
	WHERE 	id_gecliente_int = v_varidcliente AND 
		upper(codigo_str) = 'BOLETO';

	UPDATE	cbparamclifilial
	SET	sequencia_int = v_dblsequencia,
		recibo_num = 	v_dblnumrecibo
	WHERE	id_gecliente_int = v_varidcliente;

	INSERT 
	INTO	cbpagamento (	id_cbpagamento_int, 
				sequencia_int, 
				id_cbcontrato_int, 
				id_geempresa_int,
				id_gefilial_int, 
				id_gecliente_int, 
				id_cbtipopagamento_int, 
				quitacao_str,
				data_cadastro_dat, 
				data_calculo_dat, 
				data_pagamento_dat, 
				principal_num, 
				cp_num, 
				multa_num, 
				notificacao_num, 
				despesa_banco_num, 
				desconto_num, 
				abatimento_num, 
				juros_mora_num, 
				honorarios_num, 
				comissionamento_num, 
				valor_total_num, 
				retido_num, 
				acrescimo_num, 
				tipo_recibo_str, 
				situacao_pagto_str, 
				situacao_str, 
				serie_recibo_str, 
				recibo_num, 
				observacao_txt, 
				tipo_pagamento_str, 
				acrescimo_np_num, 
				parcelado_str, 
				id_cbitembordero_int, 
				observacao_boleto_str, 
				id_geusuario_int, 
				tstamp )	
	SELECT	v_idcbpagamento,
		v_dblsequencia,
		id_cbcontrato_int,
		v_varidempresa,
		v_varidfilial,
		v_varidcliente,
		id_cbtipopagamento_int,
		'0',
		current_date,
		vencimento_dat,
		sdatapagamento, 
		i.principal_num,
		COALESCE(i.cp_num, 0),
		COALESCE(i.multa_num, 0),
		COALESCE(i.notificacao_num, 0),
		COALESCE(i.despesa_banco_num, 0), 
		COALESCE(i.desconto_num, 0),
		COALESCE(i.abatimento_num, 0),
		COALESCE(i.juros_mora_num, 0), 
		COALESCE(i.honorarios_num, 0),
		COALESCE(i.comissionamento_num, 0),
		CASE WHEN dvalorPago > 0 THEN dvalorPago ELSE i.valor_total_num END,
		COALESCE(i.retido_num,0),
		COALESCE(i.acrescimo_num, 0),
		'0',
		'0',
		'E', 
		v_sserierecibo, 
		v_dblnumrecibo,
		i.observacao_boleto_str, 		
		'BA', 
		COALESCE(i.acrescimo_num, 0), 
		CASE WHEN TRIM(COALESCE(i.parcelamento_str,'')) = '' THEN 'S' ELSE 'N' END,
		i.id_cbitembordero_int,
		i.observacao_boleto_str,
		v_varidusuario,
		current_timestamp
	FROM	cbitembordero as i
		INNER JOIN cbbordero AS b ON 
			b.id_cbbordero_int = i.id_cbbordero_int
	WHERE 	i.id_cbitembordero_int = iditembordero
	

	;

	
	RAISE NOTICE 'idcontrato %', v_idcontrato;
	

	INSERT 
	INTO 	cbparcelapagamento (	id_cbpagamento_int,
					id_cbparcela_int,
					desconto_num,
					principal_num,
					cp_num,
					multa_num,
					notificacao_num,
					despesa_banco_num,
					abatimento_num,
					juros_mora_num , 
					honorarios_num, 
					comissionamento_num, 
					valor_total_num, 
					acrescimo_num,
					retido_num )
	SELECT	v_idcbpagamento,
		id_cbparcela_int,
		COALESCE(p.desconto_num, 0),
		COALESCE(p.principal_num, 0),
		COALESCE(p.cp_num, 0),
		COALESCE(p.multa_num, 0),
		COALESCE(p.notificacao_num, 0),
		COALESCE(p.despesa_banco_num, 0),
		COALESCE(p.abatimento_num, 0),
		COALESCE(p.juros_mora_num, 0),
		COALESCE(p.honorarios_num, 0),
		COALESCE(p.comissionamento_num, 0),
		COALESCE(p.valor_total_num, 0),
		COALESCE(p.acrescimo_num, 0),
		COALESCE(p.retido_num, 0)
	FROM	cbparcelaitembordero p
		INNER JOIN cbitembordero i ON
			i.id_cbitembordero_int = p.id_cbitembordero_int
	WHERE i.id_cbitembordero_int = iditembordero
		

	;		
    
	INSERT 
	INTO 	cbespeciepagamento (	id_cbpagamento_int, 
					sequencia_int,  
					id_cbformapagamento_int, 
					valor_num,  
					data_repasse_dat,  
					id_fibanco_int,  	
					id_ficcbanco_int, 	
					data_deposito_dat,  
					valor_deposito_num,  
					id_geusuario_int,  
					tstamp ) 
	SELECT	v_idcbpagamento,
		v_dblsequencia,
		v_idforma,
		i.valor_total_num,
		current_date,
		id_fibanco_int,
		id_ficcbanco_int,
		current_date,
		i.valor_total_num,
		v_varidusuario,
		current_timestamp
	FROM	cbitembordero as i
		INNER JOIN cbbordero b ON
			i.id_cbbordero_int = b.id_cbbordero_int
	WHERE 	i.id_cbitembordero_int = iditembordero
	;

	SELECT	coalesce(i.parcelamento_str, '')
	INTO	v_PARCELAMENTO
	FROM	cbitembordero as i
		INNER JOIN cbbordero AS b ON 
			b.id_cbbordero_int = i.id_cbbordero_int
	WHERE 	i.id_cbitembordero_int = iditembordero
		
	LIMIT	1;
	
	UPDATE	cbitembordero
	SET	pago_str = 'S'
	WHERE id_cbitembordero_int = iditembordero;

	--Baixa parcela e contrato apenas se for ultima parcela ou a vista

	UPDATE	cbparcela
	SET	valor_pago_num = dvalorpago,
		data_pagamento_dat = sdatapagamento,
		situacao_int = 4
	FROM	cbitembordero
		INNER JOIN cbparcelaitembordero ON
			cbitembordero.id_cbitembordero_int = cbparcelaitembordero.id_cbitembordero_int
	WHERE	cbparcela.id_cbparcela_int = cbparcelaitembordero.id_cbparcela_int and
		cbitembordero.id_cbitembordero_int = iditembordero;

	SELECT	id_cbcontrato_int
	INTO	v_idcontrato
	FROM	cbitembordero as i
		INNER JOIN cbbordero AS b ON 
			b.id_cbbordero_int = i.id_cbbordero_int
	WHERE 	i.id_cbitembordero_int = iditembordero
		
	LIMIT	1;

	UPDATE	cbcontratoeleva
	SET	id_cbsituacaocontrato_int = CASE WHEN EXISTS (	SELECT	id_cbparcela_int
								FROM	cbparcela sp
								WHERE	sp.id_cbcontrato_int = v_idcontrato AND
									NOT sp.situacao_int IN ( 4, 6, 7 )	) 
							THEN 1 
						ELSE	6
						END,
		data_stand_by_dat = null
	WHERE	id_cbcontrato_int = v_idcontrato; 
			
END;
$_$;

--
-- TOC entry 1942 (class 1255 OID 27019)
-- Name: fcformatatelefone(character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcformatatelefone(ptelefone character varying) RETURNS character varying
    LANGUAGE plpgsql STRICT
    AS $$ 

 DECLARE
	telefone_formatado  character varying;
	
 begin
	--Matheus DBA - 29/07/2022 - Card DevOps: 64932 - Medida para conter os telefones formatados erroneamente: 
	if length(ptelefone) = 10 then
 		if (select 1::boolean from geqlcontato_excecao where contato_str = LEFT(ptelefone,4))then
			raise notice 'Nï¿½o formata telefone, excecao';
			RETURN ptelefone;
		end if;
	elseif length(ptelefone) = 11 then
		if (select 1::boolean from geqlcontato_excecao where contato_str = LEFT(ptelefone,5))then
			raise notice 'Nï¿½o formata telefone, excecao';
			RETURN ptelefone;
		end if;
	end if;
	 
	 
	-- formata o numero recebido, para que contenha somente nï¿½meros e retire os zeros ï¿½ esquerda:
	telefone_formatado := LTRIM(TO_NUMBER('0' || ptelefone,'9999999999999999999999999999')::character varying,'0');
	--raise notice 'inicio';
	-- verifica se apï¿½s formatado, o telefone contï¿½m 10 dï¿½gitos ou mais, e se os 8 ï¿½ltimos dï¿½gitos nï¿½o sï¿½o iguais:
	-- adicionada a condiï¿½ï¿½o de nï¿½o inclusï¿½o de telefones com DDD terminado em 0 - T riare 916.119
	If LENGTH(telefone_formatado) >= 10 and (substr(telefone_formatado,length(telefone_formatado)-7,8)  NOT IN ('00000000',															'11111111',
														 '22222222',
														 '33333333',
														 '44444444',
														 '55555555',
														 '66666666',
														 '77777777',
														 '88888888',
													 '99999999') and
													 SUBSTR(telefone_formatado,1,2) not in ('10', '20','23','25','26','29','30','36','40','50','52','56','57','58','59','60','70','72','76','78','80','90')) THEN

                -- Retirado validaï¿½ï¿½o '1' devido o chamado 430044
                IF SUBSTR(telefone_formatado, 3, 1) = '9'  THEN
                        -- adicionado filtro de length para celulares Claro                                                  
                        IF SUBSTR(telefone_formatado, 4, 1) IN ('0') and length(telefone_formatado) = 11 THEN
                        
                        raise notice 'VALIDA1';
                                RETURN NULL;
                        END IF;
                END IF;
                

		IF SUBSTR(telefone_formatado,3,1) = '0' THEN
		     -- terceiro dï¿½gito do telefone = 0, retira o 0 e mantï¿½m os demais nï¿½meros.
		     telefone_formatado := SUBSTR(telefone_formatado,1,2) || LTRIM(SUBSTR(telefone_formatado,3),'0');
		END IF;

		IF SUBSTR(telefone_formatado,1,3) = '119' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 119, retira o 9 e mantï¿½m os demais dï¿½gitos
			IF SUBSTR(telefone_formatado,1,4) = '1194' AND LENGTH(telefone_formatado) = 11 THEN
				telefone_formatado := telefone_formatado;
			ELSIF SUBSTR(telefone_formatado,1,4) = '1193' AND LENGTH(telefone_formatado) = 11 THEN
				telefone_formatado := telefone_formatado;
			ELSIF SUBSTR(telefone_formatado,1,4) = '1195' AND LENGTH(telefone_formatado) = 11 THEN
				telefone_formatado := telefone_formatado;
			ELSIF SUBSTR(telefone_formatado,1,4) = '1197' AND LENGTH(telefone_formatado) = 11 THEN
				telefone_formatado := telefone_formatado;
			ELSE
				telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
			END IF;
		ELSEIF SUBSTR(telefone_formatado,1,3) = '129' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 129, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '139' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 139, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '149' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 149, retira o 9 e mantï¿½m os demais dï¿½gitos
			--telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '159' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 159, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '169' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 169, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '179' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 179, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '189' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 189, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '199' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 199, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '219' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 219, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '229' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 229, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '249' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 249, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '279' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 279, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '289' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 289, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('919','929','939','949','959','969','979','989','999') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 919 a 999, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 991 a 999';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('819','829','839','849','859','869','879','889','899') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 819 a 899, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 891 a 899';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('319','329','339','349','359','379','389') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 319 a 359, 379,389, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 319 a 359, 379,389';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('719','729','739','749','759','779','799') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 719 a 759, 779,799, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 719 a 759, 779,799';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('619','629','639','649','659','669','679','689','699') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 619 a 699, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 691 a 699';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('419','429','439','449','459','469','479','489','499') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 419 a 499, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 491 a 499';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) IN ('519','539','549','559') AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 519 a 559, retira o 9 e mantï¿½m os demais dï¿½gitos
			--raise notice 'trï¿½s primeiros dï¿½gitos do telefone = 591 a 559';
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		END IF;

		--raise notice '%',telefone_formatado;

		IF SUBSTR(telefone_formatado,1,2) = '11' THEN
		-- dois primeiros dï¿½gitos do telefone = 11 (DDD 11):
		    If LENGTH(telefone_formatado) = 10 Then
		    -- ddd 11 com 10 dï¿½gitos:
			IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- se o prefixo comecar com numero menor que 4, nï¿½o ï¿½ celular. Retorna o prï¿½prio telefone.
				RETURN telefone_formatado;
			/*ELSIF SUBSTR(telefone_formatado,3,1) = '4' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
				--raise notice '********************* %',SUBSTR(telefone_formatado,3,4) ;
			-- prefixo comeï¿½a com 4:
				IF SUBSTR(telefone_formatado,3,4) BETWEEN '4900' AND '4905' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) = '4930' OR-- EXCECAO 
				   SUBSTR(telefone_formatado,3,4) = '4812' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4978' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4608' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4141' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4158' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4839' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4762' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4795' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4500' AND '4560' OR-- CLARO --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4800' AND '4999' OR-- TIM --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) = '4400' OR --OI --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4600' AND '4699' OR-- OI --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4701' AND '4747' OR-- NEXTEL --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4749' AND '4784' OR-- NEXTEL --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4100' AND '4121' OR-- VIVO --DADOS DA TELECO:
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4123' AND '4227' OR-- VIVO --DADOS DA TELECO (era uma faixa sï¿½ do 4123 a 4377, mas precisamos excluir o prefixo 4228 e 4376 por solicitacao da operacao, entao ficaram 3 faixas (4123 a 4227 e 4229 a 4375 e 4377)):
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4229' AND '4375' OR-- VIVO --DADOS DA TELECO (era uma faixa sï¿½ do 4123 a 4377, mas precisamos excluir o prefixo 4228 e 4376 por solicitacao da operacao, entao ficaram 3 faixas (4123 a 4227 e 4229 a 4375 e 4377)):
				   SUBSTR(telefone_formatado,3,4) = '4377' THEN-- VIVO --DADOS DA TELECO (era uma faixa sï¿½ do 4123 a 4377, mas precisamos excluir o prefixo 4228 e 4376 por solicitacao da operacao, entao ficaram 3 faixas (4123 a 4227 e 4229 a 4375 e 4377)):
				   
				   -- faixas de prefixo comeï¿½a com 4, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 4, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;*/
				
			/*ELSIF SUBSTR(telefone_formatado,3,1) = '5' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 5:
				IF --SUBSTR(telefone_formatado,3,4) = '5399' OR-- NEXTEL
				   SUBSTR(telefone_formatado,3,4) = '5041' OR
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5252' AND '5267' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5400' AND '5419' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5700' AND '5768' OR-- OI
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5100' AND '5101' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) = '5104' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5106' AND '5109' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5113' AND '5114' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5116' AND '5170' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) = '5195' OR-- TIM	
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5200' AND '5211' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5214' AND '5251' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5268' AND '5299' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5329' AND '5398' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5420' AND '5471' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5475' AND '5499' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5787' AND '5799' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5942' AND '5969' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5980' AND '5999' OR-- TIM
				   
				   SUBSTR(telefone_formatado,3,4) = '5020' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5023' AND '5028' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5030' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5037' AND '5040' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5043' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5047' AND '5048' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5050' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5057' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5059' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5064' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5075' AND '5076' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5300' AND '5324' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5472' AND '5474' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5500' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5520' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5530' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5540' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5550' AND '5552' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5554' AND '5559' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5569' AND '5570' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5577' AND '5578' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5580' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5590' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5855' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5604' AND '5610' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5617' AND '5619' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5628' AND '5630' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5636' AND '5640' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5769' AND '5786' THEN-- VIVO				   
				   
				   -- faixas de prefixo comeï¿½a com 5, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 5, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;*/

			ELSIF SUBSTR(telefone_formatado,3,1) = '6' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 6:
				IF SUBSTR(telefone_formatado,3,4) BETWEEN '6168' AND '6181' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6300' AND '6339' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6570' AND '6650' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6914' AND '6931' OR-- CLARO
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6011' AND '6056' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6086' AND '6167' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6500' AND '6569' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6651' AND '6699' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6800' AND '6826' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6867' AND '6899' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6932' AND '6999' OR-- OI
				   SUBSTR(telefone_formatado,3,2) = '62' OR-- OI
				   SUBSTR(telefone_formatado,3,2) = '67' OR-- OI

				   SUBSTR(telefone_formatado,3,4) BETWEEN '6061' AND '6085' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6340' AND '6369' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6420' AND '6469' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6827' AND '6839' OR-- TIM

				   SUBSTR(telefone_formatado,3,4) BETWEEN '6057' AND '6060' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6182' AND '6199' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6370' AND '6419' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6470' AND '6499' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6840' AND '6866' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6900' AND '6913' THEN-- TIM
				   
				   
				   -- faixas de prefixo comeï¿½a com 6, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 6, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;

			-- ELSIF SUBSTR(telefone_formatado,3,1) = '7' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
-- 			-- prefixo comeï¿½a com 7:
-- 				IF SUBSTR(telefone_formatado,3,4) BETWEEN '7900' AND '7949' OR-- AEIOU/UNICEL
-- 				
-- 				   SUBSTR(telefone_formatado,3,4) BETWEEN '7052' AND '7086' OR-- CLARO
-- 				   SUBSTR(telefone_formatado,3,4) BETWEEN '7968' AND '7970' OR-- CLARO
-- 				   SUBSTR(telefone_formatado,3,2) = '76' OR-- CLARO
-- 				   SUBSTR(telefone_formatado,3,4) = '7775' OR-- EXCECAO
-- 
-- 				   --SUBSTR(telefone_formatado,3,2) = '77' OR-- NEXTEL
-- 				   --SUBSTR(telefone_formatado,3,2) = '78' OR-- NEXTEL
-- 				   
-- 				   SUBSTR(telefone_formatado,3,4) BETWEEN '7971' AND '7999' OR-- OI
-- 				   
-- 				   SUBSTR(telefone_formatado,3,4) BETWEEN '7011' AND '7051' OR-- TIM
-- 				   SUBSTR(telefone_formatado,3,4) BETWEEN '7950' AND '7967' OR-- TIM
-- 				   
-- 				   SUBSTR(telefone_formatado,3,4) BETWEEN '7087' AND '7099' OR-- VIVO
-- 				   SUBSTR(telefone_formatado,3,2) = '71' OR-- VIVO
-- 				   SUBSTR(telefone_formatado,3,2) = '72' OR-- VIVO
-- 				   SUBSTR(telefone_formatado,3,2) = '73' OR-- VIVO
-- 				   SUBSTR(telefone_formatado,3,2) = '74' OR-- VIVO
-- 				   SUBSTR(telefone_formatado,3,2) = '75' THEN-- VIVO				   
-- 				   
-- 				   -- faixas de prefixo comeï¿½a com 7, adiciona o nono digito
-- 					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
-- 				ELSE				
-- 				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 4, retorna o proprio telefone
-- 					RETURN telefone_formatado;
-- 				END IF;

			ELSIF SUBSTR(telefone_formatado,3,1) = '8' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 8:
				IF SUBSTR(telefone_formatado,3,2) = '88' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '89' OR-- CLARO

				   SUBSTR(telefone_formatado,3,2) = '80' OR-- OI

				   SUBSTR(telefone_formatado,3,2) = '81' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '82' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '83' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '84' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '85' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '86' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '87' THEN-- TIM				   
				   
				   -- faixas de prefixo comeï¿½a com 8, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 8, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;

			ELSIF SUBSTR(telefone_formatado,3,1) = '9' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 9:
				IF SUBSTR(telefone_formatado,3,2) = '91' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '92' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '93' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '94' OR-- CLARO

				   SUBSTR(telefone_formatado,3,2) = '95' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '96' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '97' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '98' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '99' THEN-- VIVO				   
				   
				   -- faixas de prefixo comeï¿½a com 9, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 9, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;
				
			Else
			-- nï¿½o estï¿½ nas faixas permitidas, retorna o proprio telefone
					RETURN telefone_formatado;
			END IF;
		    ELSIF LENGTH(telefone_formatado) = 11 THEN -- (IF LENGTH(telefone_formatado) = 10 Then)
		    -- ddd 11 com 11 digitos:
			IF SUBSTR(telefone_formatado,1,3) = '119' THEN
			     RETURN telefone_formatado;
			Else
			     RETURN NULL;
			END IF;
		    Else -- (IF LENGTH(telefone_formatado) = 10 Then)
		    -- ddd 11 com menos de 10 dï¿½gitos ou com mais de 11 dï¿½gitos
			RETURN NULL;
		    END IF;
		
		-- dois primeiros dï¿½gitos do telefone in ('12','13','14','15','16','17','18','19','22','24','27','28') 
		-- (DDD 12,13,14,15,16,17,18,19,'22','24','27' ou '28')
		-- 01/11/2014 incluido os dds 91,92,93,94,95,96,97,98,99
		-- 31/05/2015 incluido os ddds 81 a 89
		-- 11/10/2015 incluido os ddds 31 a 35, 37 e 38, 71 a 75, 77 e 79
		ELSEIF SUBSTR(telefone_formatado,1,2) in ('12','13','14','15','16','17','18','19','22','24','27','28',
							'21','91','92','93','94','95','96','97','98','99','81','82',
							'83','84','85','86','87','88','89','31','32','33','34','35',
							'37','38','71','72','73','74','75','77','79','61','62','63',
							'64','65','66','67','68','69','41','42','43','44','45','46',
							'47','48','49','51','53','54','55') THEN
		   
			If LENGTH(telefone_formatado) = 10 Then
				-- ddd (12,13,14,15,16,17,18 ou 19) com 10 dï¿½gitos:
				IF SUBSTR(telefone_formatado,3,1) < '6' THEN
				-- se o prefixo comecar com numero menor que 6, nï¿½o ï¿½ celular. Retorna o prï¿½prio telefone.
					RETURN telefone_formatado;
				ELSIF SUBSTR(telefone_formatado,3,1) = '6' and SUBSTR(telefone_formatado,1,2) NOT IN ('91','92','93','94','95','96','97','98','99')  THEN 
				-- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
				-- faixas de prefixo comeï¿½a com 6, adiciona o nono digito apenas nos ddd 12 a 19 e 22,24,27 e 28
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSIF SUBSTR(telefone_formatado,3,1) = '7' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
					IF SUBSTR(telefone_formatado,3,2) = '71' OR
					   SUBSTR(telefone_formatado,3,2) = '72' OR
					   SUBSTR(telefone_formatado,3,2) = '72' OR
					   SUBSTR(telefone_formatado,3,2) = '73' OR
					   SUBSTR(telefone_formatado,3,2) = '74' OR
					   SUBSTR(telefone_formatado,3,2) = '75' OR
					   SUBSTR(telefone_formatado,3,2) = '76' OR
					   SUBSTR(telefone_formatado,3,2) = '79' THEN				   
					   
					   -- faixas de prefixo comeï¿½a com 9, adiciona o nono digito
						RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
					ELSE
						IF SUBSTR(telefone_formatado,1,2) <> '21' THEN
						-- prefixo comeï¿½ado com 70 nao devem ter 9 no ddd 21 e nos DDD's do Norte
							IF SUBSTR(telefone_formatado,3,2) = '70' THEN
								RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
							ELSE
								-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 9, retorna o proprio telefone
								RETURN telefone_formatado;
							END IF;
						ELSE
					   
							-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 9, retorna o proprio telefone
							RETURN telefone_formatado;

						END IF;
					END IF;
				ELSIF SUBSTR(telefone_formatado,3,1) = '8' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
				-- faixas de prefixo comeï¿½a com 8, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSIF SUBSTR(telefone_formatado,3,1) = '9' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
				-- faixas de prefixo comeï¿½a com 9, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				Else
				-- nï¿½o estï¿½ nas faixas permitidas, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;
			ELSIF LENGTH(telefone_formatado) = 11 THEN -- (IF LENGTH(telefone_formatado) = 10 Then)
				-- ddd (12,13,14,15,16,17,18,19,'22','24','27' ou '28') com 11 digitos:
				IF SUBSTR(telefone_formatado,1,3) in ('129','139','149','159','169','179','189','199','219','229','249','279','289') THEN
					 RETURN telefone_formatado;
				Else
					 RETURN NULL;
				END IF;
			Else -- (IF LENGTH(telefone_formatado) = 10 Then)
				-- ddd (12,13,14,15,16,17,18,19,'22','24','27' ou '28') com menos de 10 dï¿½gitos ou com mais de 11 dï¿½gitos
				RETURN NULL;
			END IF;   
		
		ELSIF LENGTH(telefone_formatado) = 10 THEN -- (IF SUBSTR(telefone_formatado,1,2) = '11' THEN)
		-- telefone que nao ï¿½ com ddd (11 a 19, 22,24,27,28) mas tem 10 dï¿½gitos, retorna o prï¿½prio telefone
		    RETURN telefone_formatado;
		Else -- (IF SUBSTR(telefone_formatado,1,2) = '11' THEN)
		-- nï¿½o ï¿½ telefone com ddd 11 nem tem 10 dï¿½gitos
		    RETURN NULL;
		END IF;
	Else -- (If LENGTH(telefone_formatado) >= 10 and (substr(telefone_formatado,length(telefone_formatado)-7,8)  NOT IN...)
	-- telefone com menos de 10 dï¿½gitos ou com os 8 ï¿½ltimos dï¿½gitos iguais
		RETURN NULL;
	END IF;
 END;
 
$$;

--
-- TOC entry 1943 (class 1255 OID 27023)
-- Name: fcformatatelefone_old0111(character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcformatatelefone_old0111(ptelefone character varying) RETURNS character varying
    LANGUAGE plpgsql STRICT
    AS $$
 DECLARE
	telefone_formatado  character varying;
 BEGIN
	-- formata o numero recebido, para que contenha somente nï¿½meros e retire os zeros ï¿½ esquerda:
	telefone_formatado := LTRIM(TO_NUMBER('0' || ptelefone,'9999999999999999999999999999')::character varying,'0');
 
	-- verifica se apï¿½s formatado, o telefone contï¿½m 10 dï¿½gitos ou mais, e se os 8 ï¿½ltimos dï¿½gitos nï¿½o sï¿½o iguais:
	If LENGTH(telefone_formatado) >= 10 and (substr(telefone_formatado,length(telefone_formatado)-7,8)  NOT IN ('00000000',															'11111111',
														 '22222222',
														 '33333333',
														 '44444444',
														 '55555555',
														 '66666666',
														 '77777777',
														 '88888888',
														 '99999999') ) THEN
		IF SUBSTR(telefone_formatado,3,1) = '0' THEN
		-- terceiro dï¿½gito do telefone = 0, retira o 0 e mantï¿½m os demais nï¿½meros.
		     telefone_formatado := SUBSTR(telefone_formatado,1,2) || LTRIM(SUBSTR(telefone_formatado,3),'0');
		END IF;

		IF SUBSTR(telefone_formatado,1,3) = '119' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 119, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '129' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 129, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '139' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 139, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '149' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 149, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '159' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 159, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '169' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 169, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '179' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 179, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '189' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 189, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '199' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 199, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '219' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 219, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '229' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 229, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '249' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 249, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '279' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 279, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		ELSEIF SUBSTR(telefone_formatado,1,3) = '289' AND LENGTH(telefone_formatado) = 11 THEN
		-- trï¿½s primeiros dï¿½gitos do telefone = 289, retira o 9 e mantï¿½m os demais dï¿½gitos
			telefone_formatado := SUBSTR(telefone_formatado,1,2) || SUBSTR(telefone_formatado,4);
		END IF;

		IF SUBSTR(telefone_formatado,1,2) = '11' THEN
		-- dois primeiros dï¿½gitos do telefone = 11 (DDD 11):
		    If LENGTH(telefone_formatado) = 10 Then
		    -- ddd 11 com 10 dï¿½gitos:
			IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- se o prefixo comecar com numero menor que 4, nï¿½o ï¿½ celular. Retorna o prï¿½prio telefone.
				RETURN telefone_formatado;
			ELSIF SUBSTR(telefone_formatado,3,1) = '4' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 4:
				IF SUBSTR(telefone_formatado,3,4) BETWEEN '4900' AND '4905' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) = '4930' OR-- EXCECAO 
				   SUBSTR(telefone_formatado,3,4) = '4812' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4978' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4608' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4141' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4158' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) = '4839' OR-- EXCECAO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '4100' AND '4156' THEN-- VIVO
				   
				   -- faixas de prefixo comeï¿½a com 4, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 4, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;
				
			ELSIF SUBSTR(telefone_formatado,3,1) = '5' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 5:
				IF --SUBSTR(telefone_formatado,3,4) = '5399' OR-- NEXTEL
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5252' AND '5267' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5400' AND '5419' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5700' AND '5768' OR-- OI
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5100' AND '5101' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) = '5104' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5106' AND '5109' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5113' AND '5114' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5116' AND '5170' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5200' AND '5211' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5214' AND '5251' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5268' AND '5299' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5329' AND '5398' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5420' AND '5471' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5475' AND '5499' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5787' AND '5799' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5942' AND '5969' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5980' AND '5999' OR-- TIM
				   
				   SUBSTR(telefone_formatado,3,4) = '5020' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5023' AND '5028' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5030' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5037' AND '5040' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5043' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5047' AND '5048' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5050' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5057' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5059' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5064' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5075' AND '5076' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5300' AND '5324' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5472' AND '5474' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5500' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5520' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5530' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5540' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5550' AND '5552' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5554' AND '5559' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5569' AND '5570' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5577' AND '5578' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5580' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) = '5590' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5604' AND '5610' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5617' AND '5619' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5628' AND '5630' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5636' AND '5640' OR-- VIVO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '5769' AND '5786' THEN-- VIVO				   
				   
				   -- faixas de prefixo comeï¿½a com 5, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 5, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;

			ELSIF SUBSTR(telefone_formatado,3,1) = '6' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 6:
				IF SUBSTR(telefone_formatado,3,4) BETWEEN '6168' AND '6181' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6300' AND '6339' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6570' AND '6650' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6914' AND '6931' OR-- CLARO
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6011' AND '6056' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6086' AND '6167' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6500' AND '6569' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6651' AND '6699' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6800' AND '6826' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6867' AND '6899' OR-- OI
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6932' AND '6999' OR-- OI
				   SUBSTR(telefone_formatado,3,2) = '62' OR-- OI
				   SUBSTR(telefone_formatado,3,2) = '67' OR-- OI

				   SUBSTR(telefone_formatado,3,4) BETWEEN '6061' AND '6085' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6340' AND '6369' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6420' AND '6469' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6827' AND '6839' OR-- TIM

				   SUBSTR(telefone_formatado,3,4) BETWEEN '6057' AND '6060' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6182' AND '6199' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6370' AND '6419' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6470' AND '6499' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6840' AND '6866' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '6900' AND '6913' THEN-- TIM
				   
				   
				   -- faixas de prefixo comeï¿½a com 6, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 6, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;

			ELSIF SUBSTR(telefone_formatado,3,1) = '7' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 7:
				IF SUBSTR(telefone_formatado,3,4) BETWEEN '7900' AND '7949' OR-- AEIOU/UNICEL
				
				   SUBSTR(telefone_formatado,3,4) BETWEEN '7052' AND '7086' OR-- CLARO
				   SUBSTR(telefone_formatado,3,4) BETWEEN '7968' AND '7970' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '76' OR-- CLARO

				   --SUBSTR(telefone_formatado,3,2) = '77' OR-- NEXTEL
				   --SUBSTR(telefone_formatado,3,2) = '78' OR-- NEXTEL
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '7971' AND '7999' OR-- OI
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '7011' AND '7051' OR-- TIM
				   SUBSTR(telefone_formatado,3,4) BETWEEN '7950' AND '7967' OR-- TIM
				   
				   SUBSTR(telefone_formatado,3,4) BETWEEN '7087' AND '7099' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '71' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '72' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '73' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '74' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '75' THEN-- VIVO				   
				   
				   -- faixas de prefixo comeï¿½a com 7, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 4, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;

			ELSIF SUBSTR(telefone_formatado,3,1) = '8' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 8:
				IF SUBSTR(telefone_formatado,3,2) = '88' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '89' OR-- CLARO

				   SUBSTR(telefone_formatado,3,2) = '80' OR-- OI

				   SUBSTR(telefone_formatado,3,2) = '81' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '82' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '83' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '84' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '85' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '86' OR-- TIM
				   SUBSTR(telefone_formatado,3,2) = '87' THEN-- TIM				   
				   
				   -- faixas de prefixo comeï¿½a com 8, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 8, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;

			ELSIF SUBSTR(telefone_formatado,3,1) = '9' THEN -- IF SUBSTR(telefone_formatado,3,1) < '4' THEN
			-- prefixo comeï¿½a com 9:
				IF SUBSTR(telefone_formatado,3,2) = '91' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '92' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '93' OR-- CLARO
				   SUBSTR(telefone_formatado,3,2) = '94' OR-- CLARO

				   SUBSTR(telefone_formatado,3,2) = '95' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '96' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '97' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '98' OR-- VIVO
				   SUBSTR(telefone_formatado,3,2) = '99' THEN-- VIVO				   
				   
				   -- faixas de prefixo comeï¿½a com 9, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE				
				-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 9, retorna o proprio telefone
					RETURN telefone_formatado;
				END IF;
				
			Else
			-- nï¿½o estï¿½ nas faixas permitidas, retorna o proprio telefone
					RETURN telefone_formatado;
			END IF;
		    ELSIF LENGTH(telefone_formatado) = 11 THEN -- (IF LENGTH(telefone_formatado) = 10 Then)
		    -- ddd 11 com 11 digitos:
			IF SUBSTR(telefone_formatado,1,3) = '119' THEN
			     RETURN telefone_formatado;
			Else
			     RETURN NULL;
			END IF;
		    Else -- (IF LENGTH(telefone_formatado) = 10 Then)
		    -- ddd 11 com menos de 10 dï¿½gitos ou com mais de 11 dï¿½gitos
			RETURN NULL;
		    END IF;
		ELSEIF SUBSTR(telefone_formatado,1,2) in ('12','13','14','15','16','17','18','19','22','24','27','28','21') THEN
		-- dois primeiros dï¿½gitos do telefone in ('12','13','14','15','16','17','18','19','22','24','27','28') 
		-- (DDD 12,13,14,15,16,17,18,19,'22','24','27' ou '28'):
		    If LENGTH(telefone_formatado) = 10 Then
		    -- ddd (12,13,14,15,16,17,18 ou 19) com 10 dï¿½gitos:
			IF SUBSTR(telefone_formatado,3,1) < '6' THEN
			-- se o prefixo comecar com numero menor que 6, nï¿½o ï¿½ celular. Retorna o prï¿½prio telefone.
				RETURN telefone_formatado;
			ELSIF SUBSTR(telefone_formatado,3,1) = '6' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
			-- faixas de prefixo comeï¿½a com 6, adiciona o nono digito
				RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
			ELSIF SUBSTR(telefone_formatado,3,1) = '7' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
				IF SUBSTR(telefone_formatado,3,2) = '71' OR
				   SUBSTR(telefone_formatado,3,2) = '72' OR
				   SUBSTR(telefone_formatado,3,2) = '72' OR
				   SUBSTR(telefone_formatado,3,2) = '73' OR
				   SUBSTR(telefone_formatado,3,2) = '74' OR
				   SUBSTR(telefone_formatado,3,2) = '75' OR
				   SUBSTR(telefone_formatado,3,2) = '76' OR
				   SUBSTR(telefone_formatado,3,2) = '79' THEN				   
				   
				   -- faixas de prefixo comeï¿½a com 9, adiciona o nono digito
					RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
				ELSE
					IF SUBSTR(telefone_formatado,1,2) <> '21' THEN
					-- prefixo comeï¿½ado com 70 nao devem ter 9 no ddd 21
						IF SUBSTR(telefone_formatado,3,2) = '70' THEN
							RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
						ELSE
							-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 9, retorna o proprio telefone
							RETURN telefone_formatado;
						END IF;
					ELSE
				   
						-- nï¿½o estï¿½ nas faixas permitidas que comeï¿½am com 9, retorna o proprio telefone
						RETURN telefone_formatado;

					END IF;
				END IF;
			ELSIF SUBSTR(telefone_formatado,3,1) = '8' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
			-- faixas de prefixo comeï¿½a com 8, adiciona o nono digito
				RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
			ELSIF SUBSTR(telefone_formatado,3,1) = '9' THEN -- IF SUBSTR(telefone_formatado,3,1) < '6' THEN
			-- faixas de prefixo comeï¿½a com 9, adiciona o nono digito
				RETURN SUBSTR(telefone_formatado,1,2) || '9' || SUBSTR(telefone_formatado,3);
			Else
			-- nï¿½o estï¿½ nas faixas permitidas, retorna o proprio telefone
				RETURN telefone_formatado;
			END IF;
		    ELSIF LENGTH(telefone_formatado) = 11 THEN -- (IF LENGTH(telefone_formatado) = 10 Then)
		    -- ddd (12,13,14,15,16,17,18,19,'22','24','27' ou '28') com 11 digitos:
			IF SUBSTR(telefone_formatado,1,3) in ('129','139','149','159','169','179','189','199','229','249','279','289') THEN
			     RETURN telefone_formatado;
			Else
			     RETURN NULL;
			END IF;
		    Else -- (IF LENGTH(telefone_formatado) = 10 Then)
		    -- ddd (12,13,14,15,16,17,18,19,'22','24','27' ou '28') com menos de 10 dï¿½gitos ou com mais de 11 dï¿½gitos
			RETURN NULL;
		    END IF;   
		
		ELSIF LENGTH(telefone_formatado) = 10 THEN -- (IF SUBSTR(telefone_formatado,1,2) = '11' THEN)
		-- telefone que nao ï¿½ com ddd (11 a 19, 22,24,27,28) mas tem 10 dï¿½gitos, retorna o prï¿½prio telefone
		    RETURN telefone_formatado;
		Else -- (IF SUBSTR(telefone_formatado,1,2) = '11' THEN)
		-- nï¿½o ï¿½ telefone com ddd 11 nem tem 10 dï¿½gitos
		    RETURN NULL;
		END IF;
	Else -- (If LENGTH(telefone_formatado) >= 10 and (substr(telefone_formatado,length(telefone_formatado)-7,8)  NOT IN...)
	-- telefone com menos de 10 dï¿½gitos ou com os 8 ï¿½ltimos dï¿½gitos iguais
		RETURN NULL;
	END IF;
 END;
 $$;

--
-- TOC entry 1944 (class 1255 OID 27026)
-- Name: fclei_transparencia(text, text, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fclei_transparencia(linha text, uf text, carteira text, id_itembordero text, tipo_bordero text) RETURNS text
    LANGUAGE plpgsql
    AS $_$
DECLARE
  retorno 	      text;
  registro 	      RECORD;

BEGIN

	retorno := '';

	IF carteira <> '301'   THEN	
		
		IF 	linha = '1' AND Uf IN ('SP', 'PR', 'RJ') THEN			-- LINHA 01
			
			retorno := 'Nelson Paschoalotto Advogados Associados';

		ELSEIF 	linha = '2' AND Uf IN ('SP', 'PR', 'RJ') THEN			-- LINHA 02
	
			IF carteira = '34' THEN
			
				FOR registro IN
					EXECUTE 'SELECT ''Valor Originï¿½rio R$ '' || to_char(Sum(p.valor_original_num),''9999909D99'') 	AS reg
						   FROM 	cbparcela 		p
						   INNER JOIN 	cbparcelaitembordero 	cp using(id_cbparcela_int)
						   WHERE cp.id_cbitembordero_int = ' || id_itembordero						
				LOOP
					retorno = registro.reg;						
				END LOOP;
		
			ELSE

				IF tipo_bordero = 'C' THEN
					FOR registro IN			
							EXECUTE 'SELECT (''Valor Originï¿½rio R$ '' || to_char(principal_num,''9999909D99'')) AS reg  
													    FROM  cbitemborderoboletagem 
													    WHERE id_cbitembordero_int = ' || id_itembordero ||  '
													    ORDER BY parcela_int LIMIT 1 '
						
					LOOP
						retorno = registro.reg;			
					END LOOP;
					
				ELSE 
					FOR registro IN			
						EXECUTE 'SELECT (''Valor Originï¿½rio R$ '' || to_char(principal_num,''9999909D99'')) AS reg
												    FROM  cbitembordero
												    WHERE id_cbitembordero_int = ' || id_itembordero    			
					LOOP
						retorno = registro.reg;			
					END LOOP;
				END IF;		-- IF tipo_bordero = 'C' THEN
				
			END IF;		-- IF carteira = '34' THEN

		ELSEIF 	linha = '3' AND Uf IN ('SP', 'PR', 'RJ') THEN			-- LINHA 03

			IF carteira = '21' THEN		-- BRADESCO CARTï¿½ES / CORRENTISTA

				FOR registro IN			

					EXECUTE 'SELECT	''Acrï¿½scimos contratuais: seguro ('' || CASE WHEN (sum(p.valor_seguro_num) IS NULL) THEN ''0,00'' ELSE REPLACE(trim(to_char(sum(p.valor_seguro_num),''9999990D99'')),''.'','','') end || 
							 '') anuidade ('' || case when (sum(p.valor_anuidade_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_anuidade_num),''9999990D99'')),''.'','','') end || 
							 '') juros ('' || case when (sum(p.valor_juros_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_juros_num),''9999990D99'')),''.'','','') end || 
							 '') iof ('' || case when (sum(p.valor_iof_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_iof_num),''9999990D99'')),''.'','','') end || 
							 '') tarifa ('' || case when (sum(p.valor_tarifa_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_tarifa_num),''9999990D99'')),''.'','','') end || 
							 '') cp ('' || replace(trim(to_char(max(ib.cp_num),''9999990D99'')),''.'','','') || 
							 '') multa ('' || case when (sum(p.vlr_multa_num) is null) then replace(trim(to_char(max(ib.multa_num),''9999990D99'')),''.'','','') else replace(trim(to_char(max(p.vlr_multa_num),''9999990D99'')),''.'','','') end || 
							 '') honorï¿½rios ('' || replace(trim(to_char(max(ib.honorarios_num),''9999990D99'')),''.'','','') || 
							 '') desconto ('' || replace(trim(to_char(max(ib.desconto_num),''9999990D99'')),''.'','','') || '') '' AS reg
					from cbitembordero ib 								 
					inner join cbparcelaitembordero pib on (pib.id_cbitembordero_int = ib.id_cbitembordero_int)
					inner join cbparcela p on (p.id_cbparcela_int = pib.id_cbparcela_int)
					inner join cbcontratobradescocartao c on (c.id_cbcontrato_int = ib.id_cbcontrato_int)
					where ib.id_cbitembordero_int = ' || id_itembordero 					
				LOOP
					retorno = registro.reg;			
				END LOOP;

			ELSEIF     carteira = '34' THEN
								
				FOR registro IN
		
				EXECUTE 'SELECT ''Acrï¿½scimos contratuais: cp (R$ '' || to_char(Sum(cp.cp_original_num),''9999909D99'') || '') / Juros (R$ '' || to_char(Sum(p.juros_mora_original_num) + Sum(p.juros_remu_original_num) + Sum(p.vl_juro_inad_num), ''9999909D99'') || '') / Taxa (R$ '' || to_char(Sum(p.taxa_original_num),''9999909D99'') || '') / Anuidade (R$ '' || to_char(Sum(p.anui_original_num),''9999909D99'') || '') / Imposto (R$ '' || to_char(Sum(p.imps_original_num),''9999909D99'') || '') / Custo (R$ '' ||  to_char(Sum(p.custo_original_num),''9999909D99'') || '') / Comissï¿½o (R$ '' || to_char(Sum(p.comi_original_num),''9999909D99'') || '') / multa (R$ '' || to_char(Sum(cp.multa_num) + Sum(p.nulta_original_num),''9999909D99'') || '') / honorï¿½rios (R$ '' || to_char(Sum(cp.honorarios_num) + Sum(p.honorario_original_num),''9999909D99'') || '') / custas judiciais e extras judiciais (R$ '' || to_char(Sum(cp.notificacao_num),''9999909D99'') || '') / desconto (R$ '' || to_char(Sum(cp.desconto_original_num),''9999909D99'') || '') '' AS reg
						   FROM 	cbparcela 		p
						   INNER JOIN 	cbparcelaitembordero 	cp using(id_cbparcela_int)
						   WHERE cp.id_cbitembordero_int = ' || id_itembordero							
				LOOP
					retorno = registro.reg;							
				END LOOP;

				
			ELSEIF carteira = '85' THEN		-- BRADESCO CARTï¿½ES / CORRENTISTA

				FOR registro IN			

					EXECUTE 'SELECT	''Acrï¿½scimos contratuais: seguro ('' || CASE WHEN (sum(p.valor_seguro_num) IS NULL) THEN ''0,00'' ELSE REPLACE(trim(to_char(sum(p.valor_seguro_num),''9999990D99'')),''.'','','') end || 
							 '') anuidade ('' || case when (sum(p.valor_anuidade_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_anuidade_num),''9999990D99'')),''.'','','') end || 
							 '') juros ('' || case when (sum(p.valor_juros_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_juros_num),''9999990D99'')),''.'','','') end || 
							 '') iof ('' || case when (sum(p.valor_iof_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_iof_num),''9999990D99'')),''.'','','') end || 
							 '') tarifa ('' || case when (sum(p.valor_tarifa_num) is null) then ''0,00'' else replace(trim(to_char(sum(p.valor_tarifa_num),''9999990D99'')),''.'','','') end || 
							 '') cp ('' || replace(trim(to_char(max(ib.cp_num),''9999990D99'')),''.'','','') || 
							 '') multa ('' || case when (sum(p.vlr_multa_num) is null) then replace(trim(to_char(max(ib.multa_num),''9999990D99'')),''.'','','') else replace(trim(to_char(max(p.vlr_multa_num),''9999990D99'')),''.'','','') end || 
							 '') honorï¿½rios ('' || replace(trim(to_char(max(ib.honorarios_num),''9999990D99'')),''.'','','') || 
							 '') desconto ('' || replace(trim(to_char(max(ib.desconto_num),''9999990D99'')),''.'','','') || '') '' AS reg							 
					from cbitembordero 				ib 								 
					inner join cbparcelaitembordero 		pib 	on (pib.id_cbitembordero_int = ib.id_cbitembordero_int)
					inner join cbparcela 				p 	on (p.id_cbparcela_int = pib.id_cbparcela_int)
					inner join cbcontratobradescocorrentista 	c 	on (c.id_cbcontrato_int = ib.id_cbcontrato_int)
					where ib.id_cbitembordero_int = ' || id_itembordero 					
				LOOP
					retorno = registro.reg;			
				END LOOP;

			ELSE	

				IF tipo_bordero = 'C' THEN 

					FOR registro IN	
						EXECUTE 'SELECT (''Acrï¿½scimos contratuais: cp (R$ '' || to_char(cp_num,''9999909D99'') || 
								 '') / multa (R$ '' 		     || to_char(multa_num,''9999909D99'') || 
								 '') / honorï¿½rios (R$ '' 	     || to_char(honorarios_num,''9999909D99'') || 
								 '') / custas judiciais e extras judiciais (R$ '' || to_char(notificacao_num,''9999909D99'') || 
								 '') / desconto (R$ '' || to_char(desconto_num,''9999909D99'')) || '') '' AS reg 
						    FROM  cbitemborderoboletagem 
						    WHERE id_cbitembordero_int = ' || id_itembordero ||  '
						    ORDER BY parcela_int LIMIT 1 '

					LOOP
						retorno = registro.reg;			
					END LOOP;

				ELSE
					FOR registro IN	
						EXECUTE 'SELECT (''Acrï¿½scimos contratuais: cp (R$ '' || to_char(cbitembordero.cp_num,''9999909D99'') || 
								 '') / multa (R$ '' || to_char(cbitembordero.multa_num,''9999909D99'') || 
								 '') / honorï¿½rios (R$ '' || to_char(cbitembordero.honorarios_num,''9999909D99'') || 								 
								 '') / custas judiciais e extras judiciais (R$ '' || to_char(cbitembordero.notificacao_num,''9999909D99'') || 
								 '') / desconto (R$ '' || to_char(cbitembordero.desconto_num,''9999909D99'')) || '') ''  AS reg 
							  FROM  cbitembordero
							  WHERE id_cbitembordero_int = ' || id_itembordero    			
					LOOP
						retorno = registro.reg;			
					END LOOP;

				END IF;		-- IF tipo_bordero = 'C' THEN 

			END IF;		-- IF carteira = '21' THEN		-- BRADESCO CARTï¿½ES / CORRENTISTA
						
			IF UF = 'SP' THEN
				retorno := retorno || '	conforme Lei 14.953/13 ';
			ELSEIF UF = 'PR' THEN	
				retorno := retorno || '	conforme Lei n. 17.352/12 ';
			ELSEIF UF = 'RJ' THEN	
				retorno := retorno || '	conforme Lei n. 6.854/14 ';	
			END IF;	
		
		END IF;
	
	ELSEIF carteira = '301' THEN		-- Serï¿½ informada para Qualquer Estado

		-- **************************************************** 301-IBI ******************************************************************

		IF 	linha = '1' THEN
			
			retorno := 'Nelson Paschoalotto Advogados Associados';

		ELSEIF 	linha = '2' THEN	

			FOR registro IN			
				EXECUTE 'SELECT (''Valor Originï¿½rio R$ '' || to_char(ctr.vlr_principal_num,''9999909D99'')) AS reg
										    FROM  cbitembordero		i
										    INNER JOIN 	cbcontratoibi	ctr	USING(id_cbcontrato_int)
										    WHERE id_cbitembordero_int = ' || id_itembordero    			
			LOOP
				retorno = registro.reg;			
			END LOOP;
				

		ELSEIF 	linha = '3' THEN			

			FOR registro IN	
			
				EXECUTE 'SELECT (''Acrï¿½scimos contratuais: Seguro (R$ '' || to_char(ctr.vlr_seguros_num,''9999909D99'') || 
						 '') / Anuidade (R$ '' || to_char(ctr.vlr_anuidade_num,''9999909D99'') || 
						 '') / Tarifas (R$ '' || to_char(ctr.vlr_tarifas_num,''9999909D99'') || 
						 '') / Juros (R$ '' || to_char(ctr.vlr_juros_num,''9999909D99'') || 
						 '') / Multa (R$ '' || to_char(ctr.vlr_multa_num,''9999909D99'') || 
						 '') / IOF (R$ '' || to_char(ctr.vlr_iof_num,''9999909D99'') || 
						 '') / Valor Permanencia (R$ '' || to_char(ctr.vlr_permanencia_num,''9999909D99'')) || '') '' AS reg 
					  FROM  	cbitembordero	i
					  INNER JOIN 	cbcontratoibi	ctr	USING(id_cbcontrato_int)
					  WHERE id_cbitembordero_int = ' || id_itembordero    			
			LOOP
				retorno = registro.reg;			
			END LOOP;

			
			IF UF = 'SP' THEN
				retorno := retorno || '	conforme Lei 14.953/13 ';
			ELSEIF UF = 'PR' THEN	
				retorno := retorno || '	conforme Lei n. 17.352/12 ';
			ELSEIF UF = 'RJ' THEN	
				retorno := retorno || '	conforme Lei n. 6.854/14 ';					
			END IF;	

		END IF;

		-- **************************************************** 301-IBI ******************************************************************		

	END IF;

	RETURN  retorno;

END;
$_$;

--
-- TOC entry 1945 (class 1255 OID 27034)
-- Name: fcmanutencaocontatoaltitude(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcmanutencaocontatoaltitude(idcontrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  sDadosManutencao	text;
  sSql	 		text;
  registro 	      RECORD;

  vid		varchar;
  vidtn		bigint;
  vnome		varchar;
  vcontrato	varchar;
  vcpf		varchar;
  vda		bigint;
  vfaixaatraso	varchar;
  vproduto	varchar;
  vetapa	varchar;
  vdatadistrib	date;
  
	
BEGIN

/*Funcao que traz os dados que serï¿½o enviados para o aspect sempre que houver uma chamada receptiva.
  O aspect limita a 20 campos, mas por definiï¿½ï¿½o do controldesk vamos usar apenas 10.*/

	IF idcontrato > 0 THEN

		SELECT 
			COALESCE(c.id_cbcontrato_int,'0'),
			COALESCE(c.id_cbtiponegocio_int,0),
			COALESCE(c.nome_str,'NAO LOCALIZADO'),
			COALESCE(abs_cpf(c.cpf_str),''),
			COALESCE(c.contrato_str,'NAO LOCALIZADO'),
			COALESCE((SELECT (CURRENT_DATE - p.data_vencimento_dat)
			     FROM cbparcela p 
			     WHERE p.id_cbcontrato_int = c.id_cbcontrato_int 
			       AND p.situacao_int not in (4,6) 
			     ORDER BY p.data_vencimento_dat ASC LIMIT 1),0) as da,
			'' as faixaatraso,
			'' as produto,
			'' as etapa,
			c.data_ultima_distrib_dat
		INTO
			vid,
			vidtn,
			vnome,
			vcpf,
			vcontrato,
			vda,
			vfaixaatraso,
			vproduto,
			vetapa,
			vdatadistrib
		FROM cbcontrato c
		WHERE id_cbcontrato_int = idcontrato;

		sDadosManutencao := 'IDTN;' || vidtn || 
				    '|ID;' || vid ||  
				    '|NOME;' || vnome || 
				    '|CONTRATO;' || vcontrato || 
				    '|CPF;' || vcpf /*||
				    '|DIASEMATRASO;' || vda ||
				    '|FAIXAATRASO;' || vfaixaatraso || 
				    '|PRODUTO;' || vproduto || 
				    '|ETAPA;' || vetapa ||
				    '|DATADISTRIB;' || vdatadistrib*/			
				    ;
	ELSE
		/*sDadosManutencao := 'IDTN;0|ID;0|NOME;NAO LOCALIZADO|CONTRATO;NAO LOCALIZADO|CPF;0|DIASEMATRASO;0|FAIXAATRASO;|PRODUTO;|ETAPA;|DATADISTRIB;';*/
		sDadosManutencao := 'IDTN;0|ID;0|NOME;NAO LOCALIZADO|CONTRATO;NAO LOCALIZADO|CPF;0';
	END IF;
		
	
	RETURN  sDadosManutencao;
END;
$$;

--
-- TOC entry 1946 (class 1255 OID 27038)
-- Name: fcmanutencaocontatoaspect(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcmanutencaocontatoaspect(idcontrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  sDadosManutencao	text;
  sSql	 		text;
  registro 	      RECORD;

  vid		varchar;
  vidtn		bigint;
  vnome		varchar;
  vcontrato	varchar;
  vcpf		varchar;
  vda		bigint;
  vfaixaatraso	varchar;
  vproduto	varchar;
  vetapa	varchar;
  vdatadistrib	date;
  
	
BEGIN

/*Funcao que traz os dados que serï¿½o enviados para o aspect sempre que houver uma chamada receptiva.
  O aspect limita a 20 campos, mas por definiï¿½ï¿½o do controldesk vamos usar apenas 10.*/

	IF idcontrato > 0 THEN

		SELECT 
			COALESCE(f_accountcodeaspect(c.id_cbcontrato_int),'0'),
			COALESCE(c.id_cbtiponegocio_int,0),
			COALESCE(c.nome_str,'NAO LOCALIZADO'),
			COALESCE(abs_cpf(c.cpf_str),''),
			COALESCE(c.contrato_str,'NAO LOCALIZADO'),
			COALESCE((SELECT (CURRENT_DATE - p.data_vencimento_dat)
			     FROM cbparcela p 
			     WHERE p.id_cbcontrato_int = c.id_cbcontrato_int 
			       AND p.situacao_int in (4,6) 
			     ORDER BY p.data_vencimento_dat ASC LIMIT 1),0) as da,
			'' as faixaatraso,
			'' as produto,
			'' as etapa,
			COALESCE(c.data_ultima_distrib_dat,'1900-01-01'::date) as data_ultima_distrib_dat
		INTO
			vid,
			vidtn,
			vnome,
			vcpf,
			vcontrato,
			vda,
			vfaixaatraso,
			vproduto,
			vetapa,
			vdatadistrib
		FROM cbcontrato c
		WHERE id_cbcontrato_int = idcontrato;

		sDadosManutencao := 'IDTN;' || vidtn || 
				    '|ID;' || vid ||  
				    '|NOME;' || vnome || 
				    '|CONTRATO;' || vcontrato || 
				    '|CPF;' || vcpf ||
				    '|DIASEMATRASO;' || vda ||
				    '|FAIXAATRASO;' || vfaixaatraso || 
				    '|PRODUTO;' || vproduto || 
				    '|ETAPA;' || vetapa ||
				    '|DATADISTRIB;' || vdatadistrib			
				    ;
	ELSE
		sDadosManutencao := 'IDTN;0|ID;0|NOME;NAO LOCALIZADO|CONTRATO;NAO LOCALIZADO|CPF;0|DIASEMATRASO;0|FAIXAATRASO;|PRODUTO;|ETAPA;|DATADISTRIB;';
	END IF;
		
	
	RETURN  sDadosManutencao;
END;
$$;

--
-- TOC entry 1947 (class 1255 OID 27040)
-- Name: fcmanutencaocontatov8(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcmanutencaocontatov8(idcontrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  sDadosManutencao	text;
  sSql	 		text;
  registro 	      RECORD;

  vid		bigint;
  vidtn		bigint;
  vnome		varchar;
  vchavecontato	varchar;
  vcontrato	varchar;
	
BEGIN

	SELECT 
		id_cbcontrato_int,
		id_cbtiponegocio_int,
		nome_str,
		abs_cpf(cpf_str),
		contrato_str
	INTO
		vid,
		vidtn,
		vnome,
		vchavecontato,
		vcontrato
	FROM cbcontrato
	WHERE id_cbcontrato_int = idcontrato;

	sDadosManutencao := 'ID;' || vid || '|IDTN;' || vidtn || '|NOME;' || vnome || '|CHAVECONTATO;' || vchavecontato || '|CONTRATO;' || vcontrato;
		
	
	RETURN  sDadosManutencao;
END;
$$;

--
-- TOC entry 1948 (class 1255 OID 27048)
-- Name: fconcatena_result(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fconcatena_result(querya text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  query_r 		text;
  query_r1 		text;
  registro 	      RECORD;
	
BEGIN
	query_r := '';
	FOR registro IN EXECUTE querya
		 LOOP
		query_r1 := COALESCE(registro."coluna"::varchar, '');
		query_r := query_r || query_r1::text ;
	END LOOP;
	if query_r <> '' THEN
	query_r := SUBSTR(query_r,1,LENGTH(query_r) - 1);
	END IF;

	RETURN  query_r;
END;
$$;

--
-- TOC entry 1949 (class 1255 OID 27056)
-- Name: fcretornadiapgtocliente(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcretornadiapgtocliente(cpf text) RETURNS integer
    LANGUAGE plpgsql
    AS $$
DECLARE 
	registros RECORD;
	bases INTEGER;
BEGIN
	bases := 0;

	FOR registros IN (
		SELECT id_gecliente_int, nome, tabela_filha_str, ip_str, banco_str, id_geempresa_int 
		FROM dblink('dbname=plcp001 port=5432 host=10.20.10.243 user=postgres password=c4Poqdkn'::text, 
		'SELECT DISTINCT ON(ps.id_geparametroservidor_int) c.id_gecliente_int, c.codigo_str ||'' - ''|| c.nome_str as nome, c.tabela_filha_str, ps.ip_str,ps.banco_str,c.id_geempresa_int 
		FROM gecliente AS c 
		INNER JOIN geclienteservidor AS cs ON(cs.id_gecliente_int=c.id_gecliente_int) 
		INNER JOIN geparametroservidor AS ps ON(ps.id_geparametroservidor_int=cs.id_geparametroservidor_int) 
		WHERE ps.ip_str <> ''192.168.1.215'' 
		AND ps.ip_str <> ''10.20.10.248'' AND ps.ip_str <> ''10.20.10.247'' 
		AND ps.ip_str <> ''10.20.10.246'' AND ps.ip_str <> ''192.168.0.252'' '::text) as r 
		(id_gecliente_int bigint, nome varchar, tabela_filha_str varchar, ip_str varchar, banco_str varchar, id_geempresa_int bigint)
	)
	LOOP
		IF (registros.tabela_filha_str IS NOT NULL OR registros.tabela_filha_str <> '') THEN
			BEGIN
				EXECUTE 'INSERT INTO cbdiapgtocliente 
					SELECT base.id_gecliente, base.cpf, base.nome_cliente, base.dia_pgto, base.data_pgto 
					FROM  dblink(''dbname=' || registros.banco_str || ' port=5432 host= ' || registros.ip_str || ' user=postgres password=c4Poqdkn'::text, 
					'
						SELECT 
						c.id_gecliente_int as id_gecliente, abs_cpf(c.cpf_str) as cpf, 
						c.nome_str as nome_cliente, extract(day from p.data_pagamento_dat) as dia_pgto, 
						p.data_pagamento_dat as data_pgto 
						FROM cbcontrato c, cbpagamento p 
						WHERE p.id_cbcontrato_int=c.id_cbcontrato_int AND c.cpf_str = abs_cpf(''' || cpf || ''') 
						ORDER BY c.cpf_str, p.data_pagamento_dat 
					''::text
					) base(id_gecliente bigint, cpf varchar, nome_cliente varchar, dia_pgto double precision, data_pgto date)
					 WHERE (SELECT COUNT(*) FROM cbdiapgtocliente t WHERE (t.cpf_str=base.cpf AND t.id_gecliente_int=base.id_gecliente AND t.data_pgto=base.data_pgto)) = 0;';
				bases := bases + 1;
			END;
		END IF;
	END LOOP;

	RETURN TRUE;
END;
$$;

--
-- TOC entry 1950 (class 1255 OID 27064)
-- Name: fctipofone(character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fctipofone(ptelefone character varying) RETURNS character varying
    LANGUAGE plpgsql STRICT
    AS $$
 DECLARE
	tipo_fone  character varying;
 BEGIN
	IF substr(fcformatatelefone(ptelefone),3,1)::bigint >= 7 THEN 
		tipo_fone := 'CEL';
	ELSE
		tipo_fone := 'FIXO';
	END IF;

	RETURN tipo_fone;
 END;
 $$;

--
-- TOC entry 1951 (class 1255 OID 27066)
-- Name: fctravaperformance(bigint, integer, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fctravaperformance(idparcela bigint, diasalemperf integer, diasuteis character varying) RETURNS date
    LANGUAGE plpgsql
    AS $$
DECLARE
  dataretorno 		date;
  iFor			integer;
  dataAux		date;
  bUtil			boolean;
  dDiaSemana		double precision;
  iFeriado		bigint;
  iAux			integer;
BEGIN

	/* gbueno - 26/11/2014 - Criaï¿½ï¿½o para o Triare: 587360
	IMPORTANTE: Esta funcao precisa existir em todas as bases, para que a trava por data de performance funcione,
		      seja ela para a data de performance ou com dias alem dela, somando dias uteis ou corridos.
		      Qualquer alteracao nela deve ser replicada para todas as bases.
	*/	

	/*verifica se os dias a mais na performance sï¿½o dias uties ou corridos*/
	IF diasuteis = 'S' and diasalemperf <> 0 THEN 
		/*dias uteis*/

		raise notice 'dias uteis';

		dataAux := (SELECT data_performance_dat FROM cbparcela WHERE id_cbparcela_int = idparcela);

		IF diasalemperf < 0 THEN
			iAux := diasalemperf * (-1);
		ELSE
			iAux := diasalemperf;
		END IF;

		raise notice 'iAux = %',iAux;
		
		FOR iFor IN 1..iAux	
		LOOP

			--raise notice 'INICIO % - %', iFor, dataAux;

			/*desabilita flag*/
			bUtil := false;

			WHILE bUtil = false LOOP

				/*incrementa ou decrementa 1 dia*/
				if diasalemperf < 0 then
					dataAux := dataAux - 1;
				else
					dataAux := dataAux + 1;
				end if;

				/*Verifica o dia da semana e se ï¿½ feriado*/
				SELECT (extract(DOW from dataAux)) as diadasemana,
				       COALESCE((SELECT id_geferiado_int from geferiado where data_dat = dataAux),0::bigint) as feriado

				INTO 
				       dDiaSemana,
				       iFeriado;

				/*verifica se o dia da semana ï¿½ 0 - domingo ou 6 - sexta*/
				IF dDiaSemana in (0,6) THEN

					/*mantem flag desativada para passar mais uma vez pelo loop*/
					bUtil := false;

				ELSE
					/*verifica se ï¿½ feriado*/
					IF iFeriado > 0 THEN

						/*mantem flag desativada para passar mais uma vez pelo loop*/
						bUtil := false;	
					
					ELSE

						/*ativa flag para sair do loop*/
						bUtil := true;

					END IF;
					
				END IF;

			END LOOP;
 

			--raise notice 'FIM % - %', iFor, dataAux;
	

		END LOOP;

		dataretorno := dataAux;
		
	ELSE
		/*dias corridos*/
		dataretorno := (SELECT data_performance_dat + diasalemperf FROM cbparcela WHERE id_cbparcela_int = idparcela);
		
	END IF;
	
	RETURN dataretorno;
END;
$$;

--
-- TOC entry 1952 (class 1255 OID 27074)
-- Name: fcvalidaemail(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcvalidaemail(email text) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   registro  RECORD;
   registro2 RECORD;
   ret       TEXT;
   part      TEXT;
   texto     TEXT[];
   tamanho   BIGINT;
   cont      INTEGER;   
   
   
   
BEGIN 

   ret = 'F';
   RAISE NOTICE '%', email;
   IF TRIM(email) <> '' THEN   
	FOR registro IN EXECUTE 'SELECT ''' || email || ''' WHERE ''' || email || ''' LIKE ''%@%'' AND ''' || email || ''' LIKE ''%.%'''
	LOOP
		ret = 'T';
	END LOOP;
        
	IF ret = 'T' THEN
	        tamanho = LENGTH(email);
	        cont = 0;

	        --Caracter especial
	        LOOP 
	             
		     FOR registro IN EXECUTE 'SELECT ''' || SUBSTRING(email,cont,1) || '''
                                               WHERE ''' || SUBSTRING(email,cont,1) || ''' = Chr(32) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(33)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(34)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(35)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(36)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(37)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(38)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(39)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(40)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(41)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(42)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(43)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(44)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(58) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(59) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(60) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(61) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(62) 
                                                  Or ''' || SUBSTRING(email,cont,1) || ''' = Chr(63)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(91) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(92) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(93) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(94)
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(47) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(96) 
                                                  OR ''' || SUBSTRING(email,cont,1) || ''' = Chr(123)'
                     LOOP
			ret = 'F';			
                     END LOOP;

	             cont = cont + 1;	             
		     EXIT WHEN cont > tamanho;
		END LOOP;

		--Valida usario e dominio
		cont = 0;
		FOR registro IN EXECUTE 'SELECT regexp_split_to_table(''' || email || ''', ''@'') as part'
		LOOP
			IF registro.part = '' THEN
			   ret = 'F';			   
			END IF;			

                        IF ret = 'T' THEN
				IF cont = 1 THEN
					--Verifica se logo apos o @ eh um '.'.
					IF ret = 'T' THEN
						FOR registro2 IN EXECUTE 'SELECT SUBSTRING(''' || registro.part || ''', 1,1) as part'
						LOOP
							IF registro2.part = '.' THEN
								ret = 'F';						
							END IF;
						END LOOP;
					END IF;

					--Verifica se o ultimo campo do email eh um '.'
					IF ret = 'T' THEN
						FOR registro2 IN EXECUTE 'SELECT SUBSTRING(''' || registro.part || ''', LENGTH(''' || registro.part || '''), 1) as testa '
						LOOP
							IF registro2.testa = '.' THEN
								ret = 'F';						
							END IF;
						END LOOP;
					END IF;

					--Verifica se tem . no dominio				
					IF ret = 'T' THEN
						FOR registro2 IN EXECUTE 'SELECT ''' || registro.part || ''' as testa WHERE ''' || registro.part || ''' NOT LIKE ''%.%'' '
						LOOP
							ret = 'F';									
						END LOOP;
					END IF;
				END IF;
				IF cont = 2 THEN
					IF registro.part IS NOT NULL THEN
						ret = 'F';
					END IF;
				END IF;
				cont = cont + 1;
			END IF;
		END LOOP;		
	END IF;
   END IF;

   RETURN ret;

END;
$$;

--
-- TOC entry 1953 (class 1255 OID 27083)
-- Name: fcvalidatravainicio(bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fcvalidatravainicio(id_cliente bigint, id_campanha bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   ret integer;
   sRetorno text;
   campos text;
   registro record;
   tabela text;
   campo_teste text;
   
Begin

 tabela := 'cbcampanhateste';
 campo_teste := 'trava_inicio_str';
 campos := '';
 
 ret := 0;
 for registro in select attname from pg_attribute where attname not like '%pg.dropped%' and attnum > 0 and attrelid in (SELECT oid FROM pg_class where  relname = tabela ) order by attnum LOOP
   if campos = '' then
      campos :=  registro.attname;
   else
      campos := campos || ',' || registro.attname;
   end if;
 end loop;

if strpos(campos,'trava_inicio_str') > 0 then

	sretorno := (SELECT trava_inicio_str FROM cbcampanhateste WHERE id_gecliente_int = id_cliente AND id_cbcampanha_int = id_campanha LIMIT 1); 

	if  sretorno = 'S' THEN
	    ret := 1;
	end if;
	
end if;
 
return ret;
end;
$$;

--
-- TOC entry 1954 (class 1255 OID 27084)
-- Name: fdados_outros_serv(integer, character varying, text, text, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fdados_outros_serv(ent_qualidade integer, cpf_cnpj character varying, custom_sql text, cast_custom_sql text, filtro_clientes character varying) RETURNS SETOF record
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro 	      RECORD;
  tSqlF               text;
  cont                bigint;
  final               text; 
BEGIN

	tSqlF := '';
	cont := 0;
	
	FOR registro IN
		EXECUTE '

			SELECT DISTINCT 
				p.ip_str, p.banco_str
			FROM geparametroservidor p
			INNER JOIN geclienteservidor cs ON (cs.id_geparametroservidor_int = p.id_geparametroservidor_int)
			WHERE ' || COALESCE('cs.id_gecliente_int IN (' || NULLIF(filtro_clientes, '') || ')', 'TRUE') ||  '
			ORDER BY p.ip_str, p.banco_str
			'
			LOOP
			cont := cont + 1;
			
			RAISE NOTICE 'IP: % Banco: %', registro.ip_str, registro.banco_str;
			
			IF ent_qualidade = 0 THEN
			tSqlF := '' ||
			'
				(
				
				SELECT * FROM
				dblink(''dbname=' || registro.banco_str || ' port=5432 host=' || registro.ip_str || '
				user=postgres password=c4Poqdkn''::text,
				''
			
				' || custom_sql || ';
				'') l
					(' || cast_custom_sql || ')
				) 
				
			';
			
			ELSEIF ent_qualidade = 1 THEN 
			tSqlF := '' ||
			'
				(
				SELECT * FROM
				dblink(''dbname=' || registro.banco_str || ' port=5432 host=' || registro.ip_str || '
				user=postgres password=c4Poqdkn''::text,
				''SELECT 
				to_number(to_ascii(t.contato_str), ''''99999999999999999999'''')::varchar as qualidade, t.classificacao_str as classificacao,
				tt.codigo_str as tipo_qualidade, abs_cpf(c.cpf_str::text) as cpf,
				''''' || registro.ip_str || '.' || registro.banco_str || ''''' as base,
				t.tstamp as hora
				FROM geqlcontato t
				INNER JOIN geqltipocontato tt ON (tt.id_geqltipocontato_int = t.id_geqltipocontato_int)
				INNER JOIN geqlcliente c ON (c.id_geqlcliente_int = t.id_geqlcliente_int)
				WHERE abs_cpf(c.cpf_str::text) = abs_cpf(''''' || cpf_cnpj || '''''::text)
				'') l(qualidade varchar, classificacao varchar, tipo_qualidade varchar, cpf varchar, 
					base varchar, hora timestamp)
				) 
				
			';
			ELSEIF ent_qualidade = 2 THEN 
			tSqlF := '' ||
			'
				(
				SELECT * FROM
				dblink(''dbname=' || registro.banco_str || ' port=5432 host=' || registro.ip_str || '
				user=postgres password=c4Poqdkn''::text,
				''SELECT 
				t.endereco_str::varchar as qualidade, t.classificacao_str as classificacao,
				tt.codigo_str as tipo_qualidade, abs_cpf(c.cpf_str::text) as cpf,
				''''' || registro.ip_str || '.' || registro.banco_str || ''''' as base,
				t.tstamp as hora,
				t.bairro_str as qualidade2,
				t.cidade_str as qualidade3,
				t.estado_str as qualidade4,
				t.cep_str as qualidade5
				
				FROM geqlendereco t
				INNER JOIN geqltipoendereco tt ON (tt.id_geqltipoendereco_int = t.id_geqltipoendereco_int)
				INNER JOIN geqlcliente c ON (c.id_geqlcliente_int = t.id_geqlcliente_int)
				WHERE abs_cpf(c.cpf_str::text) = abs_cpf(''''' || cpf_cnpj || '''''::text)
				'') l(qualidade varchar, classificacao varchar, tipo_qualidade varchar, cpf varchar, 
					base varchar, hora timestamp,
					qualidade2 varchar, qualidade3 varchar, qualidade4 varchar,
					qualidade5 varchar)
				) 
				
			';
			ELSEIF ent_qualidade = 3 THEN 
			tSqlF := '' ||
			'
				(
				SELECT * FROM
				dblink(''dbname=' || registro.banco_str || ' port=5432 host=' || registro.ip_str || '
				user=postgres password=c4Poqdkn''::text,
				''SELECT 
				t.email_str::varchar as qualidade, t.classificacao_str as classificacao,
				tt.codigo_str as tipo_qualidade, abs_cpf(c.cpf_str::text) as cpf,
				''''' || registro.ip_str || '.' || registro.banco_str || ''''' as base,
				t.tstamp as hora
				
				FROM geqlemail t
				INNER JOIN geqltipoemail tt ON (tt.id_geqltipoemail_int = t.id_geqltipoemail_int)
				INNER JOIN geqlcliente c ON (c.id_geqlcliente_int = t.id_geqlcliente_int)
				WHERE abs_cpf(c.cpf_str::text) = abs_cpf(''''' || cpf_cnpj || '''''::text)
				'') l(qualidade varchar, classificacao varchar, tipo_qualidade varchar, cpf varchar, 
					base varchar, hora timestamp)
				) 
				UNION ALL
			';			
			END IF;

			IF (cont = 1) THEN
				EXECUTE '
					
					CREATE TEMPORARY TABLE _dados_outros_serv AS 
					(
						SELECT tmp.*
						FROM 
						(' || tSqlF || ') tmp
						
					);';
			ELSE 
				EXECUTE '
					
					INSERT INTO _dados_outros_serv  
					(
						SELECT tmp.*
						FROM 
						(' || tSqlF || ') tmp
						
					);';			
			END IF;

	END LOOP;
		
		
	RETURN QUERY (SELECT * FROM _dados_outros_serv);

	EXECUTE 'DROP TABLE IF EXISTS _dados_outros_serv';
			
	
END;
$$;

--
-- TOC entry 1955 (class 1255 OID 27092)
-- Name: fdiasuteis(date, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fdiasuteis(pdata date, pdias integer) RETURNS date
    LANGUAGE plpgsql
    AS $$
	declare
	Dia integer;
	SomaDias integer;
	Conte 	 integer;
	NovaData date;
Begin
	Conte=0;
	SomaDias = 0;
	NovaData = pData;
	while (SomaDias <= pDias) loop		
		Dia = extract(dow from NovaData);
		if Dia <> 0 AND Dia <> 1 then
			SomaDias = SomaDias + 1;							
			raise notice 'SomaDias: %',SomaDias;
		end if;
		NovaData:=NovaData+1;
		Conte=Conte+1;
		raise notice 'NovaData: %',NovaData;
		raise notice 'Conte: %',Conte;
	end loop;
	return NovaData;
end;
$$;

--
-- TOC entry 1956 (class 1255 OID 27100)
-- Name: fdu(date); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fdu(venc date) RETURNS date
    LANGUAGE plpgsql
    AS $$
DECLARE
  dData			date;
  registro              RECORD;
  cont integer;
BEGIN
	dData := venc;

	LOOP

	FOR registro IN EXECUTE 
	       'SELECT COUNT(*) as conta
		FROM geferiado 
		WHERE 
		data_dat = ''' || dData::text || '''::date OR  to_char(''' || dData::text || '''::date, ''D''::varchar) IN (''1'', ''7'')
		LIMIT 1' LOOP
	
		 
	  cont := registro.conta;

	END LOOP;

	EXIT WHEN cont = 0;
	dData := dData + 1;
	
	END LOOP;	
	
	
	RETURN  dData;
END;
$$;

--
-- TOC entry 1957 (class 1255 OID 27109)
-- Name: fexecutar_script(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fexecutar_script(valor text) RETURNS text
    LANGUAGE plpgsql STRICT
    AS $$

-- 23/04/2008 - Hï¿½lio Carvalho Lima
-- Funï¿½ï¿½o utilizada para executar script mais rapidamente.
-- ï¿½ chamada pela funï¿½ï¿½o no NPCOB geAcesso.fcLerTXT_GravarTabela
-- Parï¿½metros:
--    Valor = script a ser executado

BEGIN
  
  execute valor;
  
  return null;
END;
$$;

--
-- TOC entry 1958 (class 1255 OID 27117)
-- Name: fexecutar_script(character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fexecutar_script(valor character varying) RETURNS text
    LANGUAGE plpgsql STRICT
    AS $$

-- 23/04/2008 - Hï¿½lio Carvalho Lima
-- Funï¿½ï¿½o utilizada para executar script mais rapidamente.
-- ï¿½ chamada pela funï¿½ï¿½o no NPCOB geAcesso.fcLerTXT_GravarTabela
-- Parï¿½metros:
--    Valor = script a ser executado

BEGIN
  
  execute valor;
  
  return null;
END;
$$;

--
-- TOC entry 1959 (class 1255 OID 27119)
-- Name: fgevalorparametroflashback(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fgevalorparametroflashback() RETURNS trigger
    LANGUAGE plpgsql
    AS $$                                                                                                                                                                                                  
 --declare                                                                                                                                                                                                 
 --bOk boolean;                                                                                                                                                                                            
 --valorOld int8;                                                                                                                                                                                             
 begin                                                                                                                                                                                                   
                                                                                                                                                                                        
                IF (TG_OP = 'UPDATE' OR TG_OP = 'DELETE') THEN 
                               INSERT INTO geflashback(id_gevalorparametro_int,id_geparametro_int,valor_anterior_txt,ip_str, tstamp)                                                                                                                                                                         
                               VALUES (
                                               old.id_gevalorparametro_int,
                                               old.id_geparametro_int,
                                               'id_geempresa_int = ' || coalesce(old.id_geempresa_int::varchar,'') || '|' || 
                                               'id_gefilial_int = ' || coalesce(old.id_gefilial_int::varchar,'') || '|' ||
                                               'id_gecliente_int = ' || coalesce(old.id_gecliente_int::varchar,'') || '|' ||
                                               'status_str = ' || coalesce(old.status_str,'') || '|' ||
                                               'valor_str = ' || coalesce(old.valor_str,'') || '|' ||
                                               'validade_dat = ' || coalesce(old.validade_dat::varchar,'') || '|',
					       inet_client_addr(),		
                                               now());                                                                                                                                                                     
                END IF;                                                                                                                                                                                                                                                                                                                                                            
     return new;    
     
  end; $$;

--
-- TOC entry 1960 (class 1255 OID 27127)
-- Name: fhistoricosalteracoesgeusuarioitembordero(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fhistoricosalteracoesgeusuarioitembordero() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
	bOk BOOLEAN;
	idOld text;
BEGIN
		bOk = FALSE;
		IF (new.id_geusuario_boleto_int != old.id_geusuario_boleto_int) THEN
			bOk = TRUE;
			idOld = old.id_geusuario_boleto_int;
		END IF;
		IF bOk THEN
			-- (new.id_cbcontrato_int, new.linha_digitavel_str, idOld,new.id_geusuario_int, now(), current_query(), inet_client_addr());
			INSERT INTO cbitemborderohistoricogeusuario
			(
			id_cbcontrato_int,id_geusuario_int, id_geusuario_old_int,tstamp ,queryresponsavel_txt,ipresponsavel_str,acordo_int,
			id_cbitembordero_int
			)values(
			new.id_cbcontrato_int,new.id_geusuario_boleto_int,idOld::bigint,current_timestamp ,current_query()::text,
				inet_client_addr()::text,New.acordo_int,new.id_cbitembordero_int
			);
		      
		END IF;
		RETURN new;
	END;
$$;

--
-- TOC entry 1961 (class 1255 OID 27135)
-- Name: fhistoricosituacaocontrato(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fhistoricosituacaocontrato() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE
		bOk BOOLEAN;
		idOld int8;
	BEGIN
		bOk = FALSE;
		IF (TG_OP = 'INSERT') THEN
			bOk = TRUE;
			idOld = NULL;
		ELSEIF (new.id_cbsituacaocontrato_int != old.id_cbsituacaocontrato_int) THEN
			bOk = TRUE;
			idOld = old.id_cbsituacaocontrato_int;
		END IF;
		IF bOk THEN
			INSERT INTO cbsituacaocontratohistorico(
			id_cbcontrato_int, id_cbsituacaocontrato_int, id_cbsituacaocontrato_old_int,
			id_geusuario_int, tstamp, queryresponsavel_txt, ipresponsavel_str)
			VALUES (new.id_cbcontrato_int, new.id_cbsituacaocontrato_int, idOld,
			new.id_geusuario_int, now(), current_query(), inet_client_addr());
		END IF;
		RETURN new;
	END;
$$;

--
-- TOC entry 1962 (class 1255 OID 27137)
-- Name: fhistoricosituacaoparcela(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fhistoricosituacaoparcela() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE
	bOk BOOLEAN;
	situacaoOld int8;
	BEGIN
		bOk = FALSE;
		IF (TG_OP = 'INSERT') THEN
			bOk = TRUE;
			situacaoOld = NULL;
		ELSEIF (new.situacao_int != old.situacao_int) THEN
			bOk = TRUE;
			situacaoOld = old.situacao_int;
		END IF;
		IF bOk THEN
			INSERT INTO cbsituacaoparcelahistorico(
				id_cbparcela_int, situacao_int, situacao_old_int,
				id_geusuario_int, tstamp, queryresponsavel_txt, ipresponsavel_str)
			VALUES (new.id_cbparcela_int, new.situacao_int, situacaoOld,
				new.id_geusuario_int, now(), current_query(), inet_client_addr());
		END IF;
		RETURN new;
	 END; 
 $$;

--
-- TOC entry 1963 (class 1255 OID 27145)
-- Name: fimporta_notifmanual(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fimporta_notifmanual(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		
		-- **** Cria campos adicionais necessï¿½rios
		-- **** Cria o campo do ID da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_int int8;  ';
		END IF;
		-- **** Cria o campo do ID novo da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_novo_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_novo_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do contrato
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int int8;  ';
		END IF;
		-- **** Cria o campo do ID da parcela
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbparcela_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbparcela_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_esdocfisico_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_esdocfisico_int int8;  ';
		END IF;
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbvalortipodespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbvalortipodespesa_int int8;  ';
		END IF;

		
		

		-- **** PREPARA A COLUNA DA INCONSISTENCIA
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = '''' 
			WHERE chave_str = ''' || chave ||  ''''; 

		-- **** PREPARA A COLUNA DO ID DO CONTRATO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO VENCIMENTO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.data_vencimento_dat = ' || tabtemp || '.vencimento_parcela 
			AND chave_str = ''' || chave ||  '''
			';
			
		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO NUMERO DA PARCELA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.parcela_int = ' || tabtemp || '.numero_parcela 
			AND chave_str = ''' || chave ||  '''
			AND ' || tabtemp || '.id_cbparcela_int IS NULL
			';
			
		-- **** PREPARA A COLUNA DO ID DO VALOR DO TIPO DE DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbvalortipodespesa_int = 
			(SELECT vtd.id_cbvalortipodespesa_int FROM 
			cbvalortipodespesa vtd
			INNER JOIN cbtipodespesa td USING (id_cbtipodespesa_int)
			INNER JOIN cbcartorio o USING (id_cbcartorio_int)
			WHERE 
			td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			ORDER BY vtd.data_inicio_dat DESC LIMIT 1
			)
			WHERE chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO VALOR DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET valor_despesa = COALESCE(valor_despesa, vtd.valor_num)
			FROM 
			cbvalortipodespesa vtd
			WHERE chave_str = ''' || chave ||  '''
			AND vtd.id_cbvalortipodespesa_int = ' || tabtemp || '.id_cbvalortipodespesa_int
			';
			
		-- **** PREPARA A COLUNA DO ID DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET 
				id_cbdespesa_int = d.id_cbdespesa_int
			FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
				cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
			WHERE 
			c.id_cbcontrato_int = d.id_cbcontrato_int
			AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
			AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
			AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
			AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
			AND chave_str = ''' || chave ||  '''
			';

			
		-- **** PREPARA A COLUNA DO ID DO DOC FISICO DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_esdocfisico_int = fd.id_esdocfisico_int 
			FROM esdocfisico fd 
			WHERE 
			fd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int
			AND fd.data_dat = ' || tabtemp || '.data_solic_retorno_fisico 
			';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Nï¿½mero do contrato em branco, '' 
			WHERE contrato IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo do negï¿½cio em branco, '' 
			WHERE tipo_negocio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Vencimento ou nï¿½mero da parcela em branco - preencher ao menos um deles, '' 
			WHERE (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada nï¿½o localizada, '' 
			WHERE id_cbparcela_int IS NULL AND NOT (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada para despesa nova nï¿½o estï¿½ aberta, '' 
			FROM cbparcela p
			WHERE 
			p.id_cbparcela_int = ' || tabtemp || '.id_cbparcela_int
			AND COALESCE(p.situacao_int, 9) <> 0
			AND ' || tabtemp || '.id_cbdespesa_int IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo da despesa em branco, '' 
			WHERE tipo_despesa IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do cartï¿½rio em branco, '' 
			WHERE cartorio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de retorno obrigatï¿½ria no caso de preenchimento das demais informaï¿½ï¿½es de retorno, '' 
			WHERE 
			(ar IS NOT NULL OR data_ar IS NOT NULL OR protocolo IS NOT NULL OR livro_protocolo IS NOT NULL OR registro IS NOT NULL 
			 OR livro_registro IS NOT NULL OR retorno_notificacao IS NOT NULL 
			) AND data_retorno_despesa IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Resultado do retorno obrigatï¿½rio caso preenchida a data de retorno, '' 
			WHERE 
			retorno_notificacao IS NULL AND data_retorno_despesa IS NOT NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de solicitaï¿½ï¿½o do doc. fï¿½sico obrigatï¿½ria no caso de preenchimento da data de retorno do fï¿½sico, '' 
			WHERE 
			data_retorno_fisico IS NOT NULL AND data_solic_retorno_fisico IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Tipo de despesa sem valor lanï¿½ado para o cartï¿½rio, '' 
			WHERE 
			id_cbvalortipodespesa_int IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 	

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Despesa jï¿½ existe e lanï¿½ada para outra parcela, '' 
			WHERE 
			id_cbdespesa_int IS NOT NULL 
			AND id_cbparcela_int <> (SELECT MIN(pd.id_cbparcela_int) FROM cbparceladespesa pd WHERE pd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int)
			AND chave_str = ''' || chave ||  '''
			'; 							
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
                 
		EXECUTE 'INSERT INTO cbdespesa(
				    id_cbdespesa_int, id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_dat, valor_num, situacao_str, observacoes_txt, id_geusuario_int, 
				    "timestamp", ar_str, data_ar_dat, protocolo_int, livro_protocolo_str, 
				    registro_int, livro_registro_str, notificado_str, data_envio_dat, 
				    data_retorno_dat, data_notificacao_dat, origem_str, arquivo_envio_str)
				    
			  SELECT    nextval(''cbdespesa_seq''), id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_geracao_despesa, valor_despesa, ''A'', observacao, ' || idgeusuario || ', 
				    Now(), ar, data_ar, protocolo::bigint, livro_protocolo, 
				    registro::bigint, livro_registro, UPPER(SUBSTR(retorno_notificacao,1,1)), data_envio_despesa, 
				    data_retorno_despesa, data_notificacao, ''A'', ''''
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			UPDATE cbdespesa
				    SET 
				    ar_str = COALESCE(ar_str, t.ar), 
				    data_ar_dat = COALESCE(data_ar_dat, t.data_ar), 
				    protocolo_int = COALESCE(protocolo_int, t.protocolo::bigint), 
				    livro_protocolo_str = COALESCE(livro_protocolo_str, t.livro_protocolo), 
				    registro_int = COALESCE(registro_int, t.registro::bigint), 
				    livro_registro_str = COALESCE(livro_registro_str, t.livro_registro), 
				    notificado_str = COALESCE(notificado_str, UPPER(SUBSTR(retorno_notificacao,1,1))), 
				    data_envio_dat = COALESCE(data_envio_dat, t.data_envio_despesa), 
				    data_retorno_dat = COALESCE(data_retorno_dat, t.data_retorno_despesa), 
				    data_dat = COALESCE(data_dat, t.data_notificacao),
				    origem_str = ''A'',
				    -- valor conforme OS triare 034.399..  um tanto perigoso na verdade...
				    valor_num = COALESCE(NULLIF(t.valor_despesa, 0), valor_num)
				    
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_cbdespesa_int = cbdespesa.id_cbdespesa_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';

			-- **** ATUALIZA A COLUNA DO ID DA DESPESA NOVA NA TEMPORARIA
			UPDATE ' || tabtemp || ' SET 
					id_cbdespesa_novo_int = d.id_cbdespesa_int
				FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
					cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
				WHERE 
				c.id_cbcontrato_int = d.id_cbcontrato_int
				AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
				AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
				AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
				AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
				AND c.contrato_str = ' || tabtemp || '.contrato			
				AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
				AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
				AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
				AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
				AND chave_str = ''' || chave ||  '''
				;

			INSERT INTO cbparceladespesa(
				    id_cbdespesa_int, 
				    id_cbparcela_int, id_geusuario_int, 
				    "timestamp")
			  SELECT    id_cbdespesa_novo_int, id_cbparcela_int, 
				    ' || idgeusuario || ', 
				    Now()
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			INSERT INTO esdocfisico(
				    id_gecliente_int, id_cbtiponegocio_int, 
				    id_cbcontrato_int, id_cbdespesa_int, 
				    data_dat, id_geusuario_int, retorno_dat,
				    tstamp, id_cbparcela_int)
				    
			  SELECT    
				    ' || idgecliente || ', o.id_cbtiponegocio_int, 
				    t.id_cbcontrato_int, id_cbdespesa_novo_int, 
				    t.data_solic_retorno_fisico, ' || idgeusuario || ', t.data_retorno_fisico,
				    Now(), t.id_cbparcela_int
			  
			  FROM ' || tabtemp || ' t 
			  INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_esdocfisico_int IS NULL
				AND t.data_solic_retorno_fisico IS NOT NULL
				AND t.chave_str = ''' || chave ||  ''';

			

			UPDATE esdocfisico
				    SET 
				    retorno_dat = COALESCE(retorno_dat, t.data_solic_retorno_fisico)
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_esdocfisico_int = esdocfisico.id_esdocfisico_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';

			-- FOLLOWUPS
			
			insert into cbfollowup ( 
			    id_cbcontrato_int,   
			    id_cbparcela_int,    
			    id_cbsitcontato_int, 
			    data_dat,            
			    hora_tim,            
			    historico_str,       
			    id_geusuario_int, 
			    tstamp) 
			SELECT 
			    id_cbcontrato_int,
			    null,
			    (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ),
			    current_date,
			    current_timestamp, 
			    COALESCE( historico_follow,
				(SELECT s.historico_padrao_str FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) ),
			    ' || idgeusuario || ', 
			    current_timestamp
			FROM 
				' || tabtemp || ' t 
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  '''
				AND (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) IS NOT NULL
				;

				 			

			-- LOGS
			
			Insert Into gehistoricousuario
				(id_geusuario_int,
				id_gecliente_int,
				id_geaplicacao_int,
				data_hora_dat,
				evento_str,
				contrato_str,
				obs_txt)

			SELECT DISTINCT ON (t.id_cbcontrato_int)
				' || idgeusuario || ',
				' || idgecliente || ',
				(SELECT g.id_geaplicacao_int FROM geaplicacao g WHERE g.codigo_str = ''GE202''),
				Now(),
				''Inclusï¿½o/Alteraï¿½ï¿½o de despesa'',
				o.contrato_str,
				''Usuï¿½rio incluiu ou alterou dados de despesas nesta data''
			FROM 
				' || tabtemp || ' t 
				INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				';
				    

				    				    
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1964 (class 1255 OID 27155)
-- Name: fimporta_notifmanualnovo(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fimporta_notifmanualnovo(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		
		-- **** Cria campos adicionais necessï¿½rios
		-- **** Cria o campo do ID da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_int int8;  ';
		END IF;
		-- **** Cria o campo do ID novo da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_novo_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_novo_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do contrato
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int int8;  ';
		END IF;
		-- **** Cria o campo do ID da parcela
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbparcela_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbparcela_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_esdocfisico_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_esdocfisico_int int8;  ';
		END IF;
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbvalortipodespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbvalortipodespesa_int int8;  ';
		END IF;

		
		

		-- **** PREPARA A COLUNA DA INCONSISTENCIA
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = '''' 
			WHERE chave_str = ''' || chave ||  ''''; 

		-- **** PREPARA A COLUNA DO ID DO CONTRATO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO VENCIMENTO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.data_vencimento_dat = ' || tabtemp || '.vencimento_parcela 
			AND chave_str = ''' || chave ||  '''
			';
			
		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO NUMERO DA PARCELA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.parcela_int = ' || tabtemp || '.numero_parcela 
			AND chave_str = ''' || chave ||  '''
			AND ' || tabtemp || '.id_cbparcela_int IS NULL
			';
			
		-- **** PREPARA A COLUNA DO ID DO VALOR DO TIPO DE DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbvalortipodespesa_int = 
			(SELECT vtd.id_cbvalortipodespesa_int FROM 
			cbvalortipodespesa vtd
			INNER JOIN cbtipodespesa td USING (id_cbtipodespesa_int)
			INNER JOIN cbcartorio o USING (id_cbcartorio_int)
			WHERE 
			td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			ORDER BY vtd.data_inicio_dat DESC LIMIT 1
			)
			WHERE chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO VALOR DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET valor_despesa = COALESCE(valor_despesa, vtd.valor_num)
			FROM 
			cbvalortipodespesa vtd
			WHERE chave_str = ''' || chave ||  '''
			AND vtd.id_cbvalortipodespesa_int = ' || tabtemp || '.id_cbvalortipodespesa_int
			';
			
		-- **** PREPARA A COLUNA DO ID DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET 
				id_cbdespesa_int = d.id_cbdespesa_int
			FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
				cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
			WHERE 
			c.id_cbcontrato_int = d.id_cbcontrato_int
			AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
			AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
			AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
			AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
			AND chave_str = ''' || chave ||  '''
			';

			
		-- **** PREPARA A COLUNA DO ID DO DOC FISICO DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_esdocfisico_int = fd.id_esdocfisico_int 
			FROM esdocfisico fd 
			WHERE 
			fd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int
			AND fd.data_dat = ' || tabtemp || '.data_solic_retorno_fisico 
			';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Nï¿½mero do contrato em branco, '' 
			WHERE contrato IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo do negï¿½cio em branco, '' 
			WHERE tipo_negocio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Vencimento ou nï¿½mero da parcela em branco - preencher ao menos um deles, '' 
			WHERE (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada nï¿½o localizada, '' 
			WHERE id_cbparcela_int IS NULL AND NOT (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada para despesa nova nï¿½o estï¿½ aberta, '' 
			FROM cbparcela p
			WHERE 
			p.id_cbparcela_int = ' || tabtemp || '.id_cbparcela_int
			AND COALESCE(p.situacao_int, 9) <> 0
			AND ' || tabtemp || '.id_cbdespesa_int IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo da despesa em branco, '' 
			WHERE tipo_despesa IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do cartï¿½rio em branco, '' 
			WHERE cartorio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de retorno obrigatï¿½ria no caso de preenchimento das demais informaï¿½ï¿½es de retorno, '' 
			WHERE 
			(ar IS NOT NULL OR data_ar IS NOT NULL OR protocolo IS NOT NULL OR livro_protocolo IS NOT NULL OR registro IS NOT NULL 
			 OR livro_registro IS NOT NULL OR retorno_notificacao IS NOT NULL 
			) AND data_retorno_despesa IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Resultado do retorno obrigatï¿½rio caso preenchida a data de retorno, '' 
			WHERE 
			retorno_notificacao IS NULL AND data_retorno_despesa IS NOT NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de solicitaï¿½ï¿½o do doc. fï¿½sico obrigatï¿½ria no caso de preenchimento da data de retorno do fï¿½sico, '' 
			WHERE 
			data_retorno_fisico IS NOT NULL AND data_solic_retorno_fisico IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Tipo de despesa sem valor lanï¿½ado para o cartï¿½rio, '' 
			WHERE 
			id_cbvalortipodespesa_int IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 	

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Despesa jï¿½ existe e lanï¿½ada para outra parcela, '' 
			WHERE 
			id_cbdespesa_int IS NOT NULL 
			AND id_cbparcela_int <> (SELECT MIN(pd.id_cbparcela_int) FROM cbparceladespesa pd WHERE pd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int)
			AND chave_str = ''' || chave ||  '''
			'; 							
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
                 
		EXECUTE 'INSERT INTO cbdespesa(
				    id_cbdespesa_int, id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_dat, valor_num, situacao_str, observacoes_txt, id_geusuario_int, 
				    "timestamp", ar_str, data_ar_dat, protocolo_int, livro_protocolo_str, 
				    registro_int, livro_registro_str, notificado_str, data_envio_dat, 
				    data_retorno_dat, data_notificacao_dat, origem_str, arquivo_envio_str, data_aprovacao_dat)
				    
			  SELECT    nextval(''cbdespesa_seq''), id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_geracao_despesa, valor_despesa, ''A'', observacao, ' || idgeusuario || ', 
				    Now(), ar, data_ar, protocolo::bigint, livro_protocolo, 
				    registro::bigint, livro_registro, UPPER(SUBSTR(retorno_notificacao,1,1)), data_envio_arq_remessa, 
				    data_retorno_despesa, data_notificacao, ''A'', '''', data_aprovacao_dat
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			UPDATE cbdespesa
				    SET 
				    ar_str = COALESCE(ar_str, t.ar), 
				    data_ar_dat = COALESCE(data_ar_dat, t.data_ar), 
				    protocolo_int = COALESCE(protocolo_int, t.protocolo::bigint), 
				    livro_protocolo_str = COALESCE(livro_protocolo_str, t.livro_protocolo), 
				    registro_int = COALESCE(registro_int, t.registro::bigint), 
				    livro_registro_str = COALESCE(livro_registro_str, t.livro_registro), 
				    notificado_str = COALESCE(notificado_str, UPPER(SUBSTR(retorno_notificacao,1,1))), 
				    data_envio_dat = COALESCE(data_envio_dat, t.data_envio_arq_remessa), 
				    data_retorno_dat = COALESCE(data_retorno_dat, t.data_retorno_despesa), 
				    data_dat = COALESCE(data_dat, t.data_notificacao),
				    origem_str = ''A'',
				    data_aprovacao_dat = COALESCE(t.data_aprovacao_dat,cbdespesa.data_aprovacao_dat),
				    -- valor conforme OS triare 034.399..  um tanto perigoso na verdade...
				    valor_num = COALESCE(NULLIF(t.valor_despesa, 0), valor_num)
				    
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_cbdespesa_int = cbdespesa.id_cbdespesa_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';

			-- **** ATUALIZA A COLUNA DO ID DA DESPESA NOVA NA TEMPORARIA
			UPDATE ' || tabtemp || ' SET 
					id_cbdespesa_novo_int = d.id_cbdespesa_int
				FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
					cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
				WHERE 
				c.id_cbcontrato_int = d.id_cbcontrato_int
				AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
				AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
				AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
				AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
				AND c.contrato_str = ' || tabtemp || '.contrato			
				AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
				AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
				AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
				AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
				AND chave_str = ''' || chave ||  '''
				;

			INSERT INTO cbparceladespesa(
				    id_cbdespesa_int, 
				    id_cbparcela_int, id_geusuario_int, 
				    "timestamp")
			  SELECT    id_cbdespesa_novo_int, id_cbparcela_int, 
				    ' || idgeusuario || ', 
				    Now()
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			INSERT INTO esdocfisico(
				    id_gecliente_int, id_cbtiponegocio_int, 
				    id_cbcontrato_int, id_cbdespesa_int, 
				    data_dat, id_geusuario_int, retorno_dat,
				    tstamp, id_cbparcela_int)
				    
			  SELECT    
				    ' || idgecliente || ', o.id_cbtiponegocio_int, 
				    t.id_cbcontrato_int, id_cbdespesa_novo_int, 
				    t.data_solic_retorno_fisico, ' || idgeusuario || ', t.data_retorno_fisico,
				    Now(), t.id_cbparcela_int
			  
			  FROM ' || tabtemp || ' t 
			  INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_esdocfisico_int IS NULL
				AND t.data_solic_retorno_fisico IS NOT NULL
				AND t.chave_str = ''' || chave ||  ''';

			

			UPDATE esdocfisico
				    SET 
				    retorno_dat = COALESCE(retorno_dat, t.data_solic_retorno_fisico)
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_esdocfisico_int = esdocfisico.id_esdocfisico_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				
			/*insert into cbfollowup ( 
			    id_cbcontrato_int,   
			    id_cbparcela_int,    
			    id_cbsitcontato_int, 
			    data_dat,            
			    hora_tim,            
			    historico_str,       
			    id_geusuario_int, 
			    tstamp) 
			SELECT 
			    id_cbcontrato_int,
			    null,
			    (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ),
			    current_date,
			    current_timestamp, 
			    COALESCE( historico_follow,
				(SELECT s.historico_padrao_str FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) ),
			    ' || idgeusuario || ', 
			    current_timestamp
			FROM 
				' || tabtemp || ' t 
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  '''
				AND (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) IS NOT NULL
				; */

				 	

			-- LOGS
			
			Insert Into gehistoricousuario
				(id_geusuario_int,
				id_gecliente_int,
				id_geaplicacao_int,
				data_hora_dat,
				evento_str,
				contrato_str,
				obs_txt)

			SELECT DISTINCT ON (t.id_cbcontrato_int)
				' || idgeusuario || ',
				' || idgecliente || ',
				(SELECT g.id_geaplicacao_int FROM geaplicacao g WHERE g.codigo_str = ''GE202''),
				Now(),
				''Inclusï¿½o/Alteraï¿½ï¿½o de despesa'',
				o.contrato_str,
				''Usuï¿½rio incluiu ou alterou dados de despesas nesta data''
			FROM 
				' || tabtemp || ' t 
				INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				';
				    

				    				    
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1965 (class 1255 OID 27160)
-- Name: fimporta_notifmanualnovo_0205(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fimporta_notifmanualnovo_0205(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		
		-- **** Cria campos adicionais necessï¿½rios
		-- **** Cria o campo do ID da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_int int8;  ';
		END IF;
		-- **** Cria o campo do ID novo da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_novo_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_novo_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do contrato
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int int8;  ';
		END IF;
		-- **** Cria o campo do ID da parcela
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbparcela_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbparcela_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_esdocfisico_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_esdocfisico_int int8;  ';
		END IF;
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbvalortipodespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbvalortipodespesa_int int8;  ';
		END IF;

		
		

		-- **** PREPARA A COLUNA DA INCONSISTENCIA
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = '''' 
			WHERE chave_str = ''' || chave ||  ''''; 

		-- **** PREPARA A COLUNA DO ID DO CONTRATO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO VENCIMENTO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.data_vencimento_dat = ' || tabtemp || '.vencimento_parcela 
			AND chave_str = ''' || chave ||  '''
			';
			
		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO NUMERO DA PARCELA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.parcela_int = ' || tabtemp || '.numero_parcela 
			AND chave_str = ''' || chave ||  '''
			AND ' || tabtemp || '.id_cbparcela_int IS NULL
			';
			
		-- **** PREPARA A COLUNA DO ID DO VALOR DO TIPO DE DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbvalortipodespesa_int = 
			(SELECT vtd.id_cbvalortipodespesa_int FROM 
			cbvalortipodespesa vtd
			INNER JOIN cbtipodespesa td USING (id_cbtipodespesa_int)
			INNER JOIN cbcartorio o USING (id_cbcartorio_int)
			WHERE 
			td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			ORDER BY vtd.data_inicio_dat DESC LIMIT 1
			)
			WHERE chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO VALOR DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET valor_despesa = COALESCE(valor_despesa, vtd.valor_num)
			FROM 
			cbvalortipodespesa vtd
			WHERE chave_str = ''' || chave ||  '''
			AND vtd.id_cbvalortipodespesa_int = ' || tabtemp || '.id_cbvalortipodespesa_int
			';
			
		-- **** PREPARA A COLUNA DO ID DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET 
				id_cbdespesa_int = d.id_cbdespesa_int
			FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
				cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
			WHERE 
			c.id_cbcontrato_int = d.id_cbcontrato_int
			AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
			AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
			AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
			AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
			AND chave_str = ''' || chave ||  '''
			';

			
		-- **** PREPARA A COLUNA DO ID DO DOC FISICO DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_esdocfisico_int = fd.id_esdocfisico_int 
			FROM esdocfisico fd 
			WHERE 
			fd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int
			AND fd.data_dat = ' || tabtemp || '.data_solic_retorno_fisico 
			';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Nï¿½mero do contrato em branco, '' 
			WHERE contrato IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo do negï¿½cio em branco, '' 
			WHERE tipo_negocio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Vencimento ou nï¿½mero da parcela em branco - preencher ao menos um deles, '' 
			WHERE (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada nï¿½o localizada, '' 
			WHERE id_cbparcela_int IS NULL AND NOT (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada para despesa nova nï¿½o estï¿½ aberta, '' 
			FROM cbparcela p
			WHERE 
			p.id_cbparcela_int = ' || tabtemp || '.id_cbparcela_int
			AND COALESCE(p.situacao_int, 9) <> 0
			AND ' || tabtemp || '.id_cbdespesa_int IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo da despesa em branco, '' 
			WHERE tipo_despesa IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do cartï¿½rio em branco, '' 
			WHERE cartorio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de retorno obrigatï¿½ria no caso de preenchimento das demais informaï¿½ï¿½es de retorno, '' 
			WHERE 
			(ar IS NOT NULL OR data_ar IS NOT NULL OR protocolo IS NOT NULL OR livro_protocolo IS NOT NULL OR registro IS NOT NULL 
			 OR livro_registro IS NOT NULL OR retorno_notificacao IS NOT NULL 
			) AND data_retorno_despesa IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Resultado do retorno obrigatï¿½rio caso preenchida a data de retorno, '' 
			WHERE 
			retorno_notificacao IS NULL AND data_retorno_despesa IS NOT NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de solicitaï¿½ï¿½o do doc. fï¿½sico obrigatï¿½ria no caso de preenchimento da data de retorno do fï¿½sico, '' 
			WHERE 
			data_retorno_fisico IS NOT NULL AND data_solic_retorno_fisico IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Tipo de despesa sem valor lanï¿½ado para o cartï¿½rio, '' 
			WHERE 
			id_cbvalortipodespesa_int IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 	

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Despesa jï¿½ existe e lanï¿½ada para outra parcela, '' 
			WHERE 
			id_cbdespesa_int IS NOT NULL 
			AND id_cbparcela_int <> (SELECT MIN(pd.id_cbparcela_int) FROM cbparceladespesa pd WHERE pd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int)
			AND chave_str = ''' || chave ||  '''
			'; 							
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
                 
		EXECUTE 'INSERT INTO cbdespesa(
				    id_cbdespesa_int, id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_dat, valor_num, situacao_str, observacoes_txt, id_geusuario_int, 
				    "timestamp", ar_str, data_ar_dat, protocolo_int, livro_protocolo_str, 
				    registro_int, livro_registro_str, notificado_str, data_envio_dat, 
				    data_retorno_dat, data_notificacao_dat, origem_str, arquivo_envio_str, data_aprovacao_dat, id_geqlendereco_int, motivo_retorno_str)
				    
			  SELECT    nextval(''cbdespesa_seq''), id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_geracao_despesa, valor_despesa, ''A'', observacao, ' || idgeusuario || ', 
				    Now(), ar, data_ar, protocolo::bigint, livro_protocolo, 
				    registro::bigint, livro_registro, UPPER(SUBSTR(retorno_notificacao,1,1)), data_envio_arq_remessa, 
				    data_retorno_despesa, data_notificacao, ''A'', '''', data_aprovacao_dat, (select qlend.id_geqlendereco_int from geqlendereco qlend 
							inner join geqlcontrato cli on cli.id_geqlcliente_int = qlend.id_geqlcliente_int 			       inner join ' || tabelafilha || ' c on c.id_cbcontrato_int = cli.id_cbcontrato_int
							where c.id_cbcontrato_int = t.id_cbcontrato_int order by qlend.id_geqltipoendereco_int, qlend.classificacao_str limit 1), motivo_retorno
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			UPDATE cbdespesa
				    SET 
				    ar_str = COALESCE(ar_str, t.ar), 
				    data_ar_dat = COALESCE(data_ar_dat, t.data_ar), 
				    protocolo_int = COALESCE(protocolo_int, t.protocolo::bigint), 
				    livro_protocolo_str = COALESCE(livro_protocolo_str, t.livro_protocolo), 
				    registro_int = COALESCE(registro_int, t.registro::bigint), 
				    livro_registro_str = COALESCE(livro_registro_str, t.livro_registro), 
				    notificado_str = COALESCE(notificado_str, UPPER(SUBSTR(retorno_notificacao,1,1))), 
				    data_envio_dat = COALESCE(data_envio_dat, t.data_envio_arq_remessa), 
				    data_retorno_dat = COALESCE(data_retorno_dat, t.data_retorno_despesa), 
				    data_dat = COALESCE(data_dat, t.data_notificacao),
				    origem_str = ''A'',
				    data_aprovacao_dat = COALESCE(t.data_aprovacao_dat,cbdespesa.data_aprovacao_dat),
				    id_geqlendereco_int = (select qlend.id_geqlendereco_int from geqlendereco qlend 
							inner join geqlcontrato cli on cli.id_geqlcliente_int = qlend.id_geqlcliente_int 			       inner join ' || tabelafilha || ' c on c.id_cbcontrato_int = cli.id_cbcontrato_int
							where c.id_cbcontrato_int = cbdespesa.id_cbcontrato_int order by qlend.id_geqltipoendereco_int, qlend.classificacao_str limit 1),
				   motivo_retorno_str = COALESCE(motivo_retorno_str, t.motivo_retorno), 	
				    -- valor conforme OS triare 034.399..  um tanto perigoso na verdade...
				    valor_num = COALESCE(NULLIF(t.valor_despesa, 0), valor_num)
				    
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_cbdespesa_int = cbdespesa.id_cbdespesa_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';

			-- **** ATUALIZA A COLUNA DO ID DA DESPESA NOVA NA TEMPORARIA
			UPDATE ' || tabtemp || ' SET 
					id_cbdespesa_novo_int = d.id_cbdespesa_int
				FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
					cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
				WHERE 
				c.id_cbcontrato_int = d.id_cbcontrato_int
				AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
				AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
				AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
				AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
				AND c.contrato_str = ' || tabtemp || '.contrato			
				AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
				AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
				AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
				AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
				AND chave_str = ''' || chave ||  '''
				;

			INSERT INTO cbparceladespesa(
				    id_cbdespesa_int, 
				    id_cbparcela_int, id_geusuario_int, 
				    "timestamp")
			  SELECT    id_cbdespesa_novo_int, id_cbparcela_int, 
				    ' || idgeusuario || ', 
				    Now()
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			INSERT INTO esdocfisico(
				    id_gecliente_int, id_cbtiponegocio_int, 
				    id_cbcontrato_int, id_cbdespesa_int, 
				    data_dat, id_geusuario_int, retorno_dat,
				    tstamp, id_cbparcela_int)
				    
			  SELECT    
				    ' || idgecliente || ', o.id_cbtiponegocio_int, 
				    t.id_cbcontrato_int, id_cbdespesa_novo_int, 
				    t.data_solic_retorno_fisico, ' || idgeusuario || ', t.data_retorno_fisico,
				    Now(), t.id_cbparcela_int
			  
			  FROM ' || tabtemp || ' t 
			  INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_esdocfisico_int IS NULL
				AND t.data_solic_retorno_fisico IS NOT NULL
				AND t.chave_str = ''' || chave ||  ''';

			

			UPDATE esdocfisico
				    SET 
				    retorno_dat = COALESCE(retorno_dat, t.data_solic_retorno_fisico)
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_esdocfisico_int = esdocfisico.id_esdocfisico_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				
			/*insert into cbfollowup ( 
			    id_cbcontrato_int,   
			    id_cbparcela_int,    
			    id_cbsitcontato_int, 
			    data_dat,            
			    hora_tim,            
			    historico_str,       
			    id_geusuario_int, 
			    tstamp) 
			SELECT 
			    id_cbcontrato_int,
			    null,
			    (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ),
			    current_date,
			    current_timestamp, 
			    COALESCE( historico_follow,
				(SELECT s.historico_padrao_str FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) ),
			    ' || idgeusuario || ', 
			    current_timestamp
			FROM 
				' || tabtemp || ' t 
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  '''
				AND (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) IS NOT NULL
				; */

				 	

			-- LOGS
			
			Insert Into gehistoricousuario
				(id_geusuario_int,
				id_gecliente_int,
				id_geaplicacao_int,
				data_hora_dat,
				evento_str,
				contrato_str,
				obs_txt)

			SELECT DISTINCT ON (t.id_cbcontrato_int)
				' || idgeusuario || ',
				' || idgecliente || ',
				(SELECT g.id_geaplicacao_int FROM geaplicacao g WHERE g.codigo_str = ''GE202''),
				Now(),
				''Inclusï¿½o/Alteraï¿½ï¿½o de despesa'',
				o.contrato_str,
				''Usuï¿½rio incluiu ou alterou dados de despesas nesta data''
			FROM 
				' || tabtemp || ' t 
				INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				';
				    

				    				    
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1966 (class 1255 OID 27170)
-- Name: fimporta_notifmanualnovopadrao190912(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fimporta_notifmanualnovopadrao190912(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
cartorionaomarcaparcela character varying;
parcelasnotificadas character varying;
rsparcelas RECORD;

BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		
		-- **** Cria campos adicionais necessï¿½rios
		-- **** Cria o campo do ID da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_int int8;  ';
		END IF;
		-- **** Cria o campo do ID novo da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_novo_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_novo_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do contrato
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int int8;  ';
		END IF;
		-- **** Cria o campo do ID da parcela
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbparcela_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbparcela_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_esdocfisico_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_esdocfisico_int int8;  ';
		END IF;
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbvalortipodespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbvalortipodespesa_int int8;  ';
		END IF;

		
		

		-- **** PREPARA A COLUNA DA INCONSISTENCIA
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = '''' 
			WHERE ' || tabtemp || '.chave_str = ''' || chave ||  ''''; 

		-- **** PREPARA A COLUNA DO ID DO CONTRATO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO VENCIMENTO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.data_vencimento_dat = ' || tabtemp || '.vencimento_parcela 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';
			
		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO NUMERO DA PARCELA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.parcela_int = ' || tabtemp || '.numero_parcela 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			AND ' || tabtemp || '.id_cbparcela_int IS NULL
			';
			
		-- **** PREPARA A COLUNA DO ID DO VALOR DO TIPO DE DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbvalortipodespesa_int = 
			(SELECT vtd.id_cbvalortipodespesa_int FROM 
			cbvalortipodespesa vtd
			INNER JOIN cbtipodespesa td USING (id_cbtipodespesa_int)
			INNER JOIN cbcartorio o USING (id_cbcartorio_int)
			WHERE 
			td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			ORDER BY vtd.data_inicio_dat DESC LIMIT 1
			)
			WHERE ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO VALOR DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET valor_despesa = COALESCE(valor_despesa, vtd.valor_num)
			FROM 
			cbvalortipodespesa vtd
			WHERE ' || tabtemp || '.chave_str = ''' || chave ||  '''
			AND vtd.id_cbvalortipodespesa_int = ' || tabtemp || '.id_cbvalortipodespesa_int
			';
			
		-- **** PREPARA A COLUNA DO ID DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET 
				id_cbdespesa_int = d.id_cbdespesa_int
			FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
				cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
			WHERE 
			c.id_cbcontrato_int = d.id_cbcontrato_int
			AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
			AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
			AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
			AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

			
		-- **** PREPARA A COLUNA DO ID DO DOC FISICO DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_esdocfisico_int = fd.id_esdocfisico_int 
			FROM esdocfisico fd 
			WHERE 
			fd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int
			AND fd.data_dat = ' || tabtemp || '.data_solic_retorno_fisico 
			';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Nï¿½mero do contrato em branco, '' 
			WHERE contrato IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo do negï¿½cio em branco, '' 
			WHERE tipo_negocio IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Vencimento ou nï¿½mero da parcela em branco - preencher ao menos um deles, '' 
			WHERE (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada nï¿½o localizada, '' 
			WHERE id_cbparcela_int IS NULL AND NOT (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada para despesa nova nï¿½o estï¿½ aberta, '' 
			FROM cbparcela p
			WHERE 
			p.id_cbparcela_int = ' || tabtemp || '.id_cbparcela_int
			AND COALESCE(p.situacao_int, 9) <> 0
			AND ' || tabtemp || '.id_cbdespesa_int IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo da despesa em branco, '' 
			WHERE tipo_despesa IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do cartï¿½rio em branco, '' 
			WHERE cartorio IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de retorno obrigatï¿½ria no caso de preenchimento das demais informaï¿½ï¿½es de retorno, '' 
			WHERE 
			(ar IS NOT NULL OR data_ar IS NOT NULL OR protocolo IS NOT NULL OR livro_protocolo IS NOT NULL OR registro IS NOT NULL 
			 OR livro_registro IS NOT NULL OR retorno_notificacao IS NOT NULL 
			) AND data_retorno_despesa IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Resultado do retorno obrigatï¿½rio caso preenchida a data de retorno, '' 
			WHERE 
			retorno_notificacao IS NULL AND data_retorno_despesa IS NOT NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de solicitaï¿½ï¿½o do doc. fï¿½sico obrigatï¿½ria no caso de preenchimento da data de retorno do fï¿½sico, '' 
			WHERE 
			data_retorno_fisico IS NOT NULL AND data_solic_retorno_fisico IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Tipo de despesa sem valor lanï¿½ado para o cartï¿½rio, '' 
			WHERE 
			id_cbvalortipodespesa_int IS NULL 
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 	

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Despesa jï¿½ existe e lanï¿½ada para outra parcela, '' 
			WHERE 
			id_cbdespesa_int IS NOT NULL 
			AND id_cbparcela_int <> (SELECT MIN(pd.id_cbparcela_int) FROM cbparceladespesa pd WHERE pd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int)
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			'; 							
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
                 
		EXECUTE 'INSERT INTO cbdespesa(
				    id_cbdespesa_int, id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_dat, valor_num, situacao_str, observacoes_txt, id_geusuario_int, 
				    "timestamp", ar_str, data_ar_dat, protocolo_int, livro_protocolo_str, 
				    registro_int, livro_registro_str, notificado_str, data_envio_dat, 
				    data_retorno_dat, data_notificacao_dat, origem_str, arquivo_envio_str, data_aprovacao_dat, id_geqlendereco_int, motivo_retorno_str, data_reprovacao_dat)
				    
			  SELECT    nextval(''cbdespesa_seq''), id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_geracao_despesa, valor_despesa, coalesce(situacao_despesa,''A''), observacao, ' || idgeusuario || ', 
				    Now(), ar, data_ar, protocolo::bigint, livro_protocolo, 
				    registro::bigint, livro_registro, UPPER(SUBSTR(retorno_notificacao,1,1)), data_envio_arq_remessa, 
				    data_retorno_despesa, data_notificacao, ''A'', '''', data_aprovacao_dat, (select qlend.id_geqlendereco_int from geqlendereco qlend 
							inner join geqlcontrato cli on cli.id_geqlcliente_int = qlend.id_geqlcliente_int 			        inner join ' || tabelafilha || ' c on c.id_cbcontrato_int = cli.id_cbcontrato_int
							inner join geqltipoendereco qlti on qlend.id_geqltipoendereco_int = qlti.id_geqltipoendereco_int 
							where c.id_cbcontrato_int = t.id_cbcontrato_int and (qlend.excluido_bit <> ''1'' or qlend.excluido_bit is null) order by qlti.prioridade_int asc, qlend.classificacao_str asc, qlend.bairro_str desc, qlend.cep_str desc, qlend.complemento_str desc limit 1), motivo_retorno,data_reprovacao
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			UPDATE cbdespesa
				    SET 
				    ar_str = COALESCE(ar_str, t.ar), 
				    data_ar_dat = COALESCE(data_ar_dat, t.data_ar), 
				    protocolo_int = COALESCE(protocolo_int, t.protocolo::bigint), 
				    livro_protocolo_str = COALESCE(livro_protocolo_str, t.livro_protocolo), 
				    registro_int = COALESCE(registro_int, t.registro::bigint), 
				    livro_registro_str = COALESCE(livro_registro_str, t.livro_registro), 
				    notificado_str = COALESCE(notificado_str, UPPER(SUBSTR(retorno_notificacao,1,1))), 
				    data_envio_dat = COALESCE(data_envio_dat, t.data_envio_arq_remessa), 
				    data_retorno_dat = COALESCE(data_retorno_dat, t.data_retorno_despesa), 
				    data_dat = COALESCE(data_dat, t.data_notificacao),
				    origem_str = ''A'',
				    data_aprovacao_dat = COALESCE(t.data_aprovacao_dat,cbdespesa.data_aprovacao_dat),
				    id_geqlendereco_int = (select qlend.id_geqlendereco_int from geqlendereco qlend 
							inner join geqlcontrato cli on cli.id_geqlcliente_int = qlend.id_geqlcliente_int 			        inner join ' || tabelafilha || ' c on c.id_cbcontrato_int = cli.id_cbcontrato_int
							inner join geqltipoendereco qlti on qlend.id_geqltipoendereco_int = qlti.id_geqltipoendereco_int 
							where c.id_cbcontrato_int = cbdespesa.id_cbcontrato_int and (qlend.excluido_bit <> ''1'' or qlend.excluido_bit is null) order by qlti.prioridade_int asc, qlend.classificacao_str asc, qlend.bairro_str desc, qlend.cep_str desc, qlend.complemento_str desc limit 1),
				   motivo_retorno_str = COALESCE(motivo_retorno_str, t.motivo_retorno),
				   situacao_str = COALESCE(t.situacao_despesa, situacao_str),
				    data_reprovacao_dat = COALESCE(t.data_reprovacao, data_reprovacao_dat), 	
				    -- valor conforme OS triare 034.399..  um tanto perigoso na verdade...
				    valor_num = COALESCE(NULLIF(t.valor_despesa, 0), valor_num)
				    
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_cbdespesa_int = cbdespesa.id_cbdespesa_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';

			-- **** ATUALIZA A COLUNA DO ID DA DESPESA NOVA NA TEMPORARIA
			UPDATE ' || tabtemp || ' SET 
					id_cbdespesa_novo_int = d.id_cbdespesa_int
				FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
					cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
				WHERE 
				c.id_cbcontrato_int = d.id_cbcontrato_int
				AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
				AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
				AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
				AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
				AND c.contrato_str = ' || tabtemp || '.contrato			
				AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
				AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
				AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
				AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
				AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
				;

			INSERT INTO cbparceladespesa(
				    id_cbdespesa_int, 
				    id_cbparcela_int, id_geusuario_int, 
				    "timestamp")
			  SELECT    id_cbdespesa_novo_int, id_cbparcela_int, 
				    ' || idgeusuario || ', 
				    Now()
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			INSERT INTO esdocfisico(
				    id_gecliente_int, id_cbtiponegocio_int, 
				    id_cbcontrato_int, id_cbdespesa_int, 
				    data_dat, id_geusuario_int, retorno_dat,
				    tstamp, id_cbparcela_int)
				    
			  SELECT    
				    ' || idgecliente || ', o.id_cbtiponegocio_int, 
				    t.id_cbcontrato_int, id_cbdespesa_novo_int, 
				    t.data_solic_retorno_fisico, ' || idgeusuario || ', t.data_retorno_fisico,
				    Now(), t.id_cbparcela_int
			  
			  FROM ' || tabtemp || ' t 
			  INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_esdocfisico_int IS NULL
				AND t.data_solic_retorno_fisico IS NOT NULL
				AND t.chave_str = ''' || chave ||  ''';

			

			UPDATE esdocfisico
				    SET 
				    retorno_dat = COALESCE(retorno_dat, t.data_solic_retorno_fisico)
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_esdocfisico_int = esdocfisico.id_esdocfisico_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				
			/*insert into cbfollowup ( 
			    id_cbcontrato_int,   
			    id_cbparcela_int,    
			    id_cbsitcontato_int, 
			    data_dat,            
			    hora_tim,            
			    historico_str,       
			    id_geusuario_int, 
			    tstamp) 
			SELECT 
			    id_cbcontrato_int,
			    null,
			    (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ),
			    current_date,
			    current_timestamp, 
			    COALESCE( historico_follow,
				(SELECT s.historico_padrao_str FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) ),
			    ' || idgeusuario || ', 
			    current_timestamp
			FROM 
				' || tabtemp || ' t 
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  '''
				AND (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) IS NOT NULL
				; */

				 	

			-- LOGS
			
			Insert Into gehistoricousuario
				(id_geusuario_int,
				id_gecliente_int,
				id_geaplicacao_int,
				data_hora_dat,
				evento_str,
				contrato_str,
				obs_txt)

			SELECT DISTINCT ON (t.id_cbcontrato_int)
				' || idgeusuario || ',
				' || idgecliente || ',
				(SELECT g.id_geaplicacao_int FROM geaplicacao g WHERE g.codigo_str = ''GE202''),
				Now(),
				''Inclusï¿½o/Alteraï¿½ï¿½o de despesa'',
				o.contrato_str,
				''Usuï¿½rio incluiu ou alterou dados de despesas nesta data''
			FROM 
				' || tabtemp || ' t 
				INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				';

	/* Marcaï¿½ï¿½o de parcelas - gbueno - OS: 23805 08/08/2012 */			
	-------------------------------------------------------------------------------------------------------------	
	cartorionaomarcaparcela := '';
	FOR registro IN EXECUTE 'select v.valor_str 
		       from gevalorparametro v 
		       inner join geparametro p on v.id_geparametro_int = p.id_geparametro_int 
		       inner join gegrupoparametro g on p.id_gegrupoparametro_int = g.id_gegrupoparametro_int 
		       where 
		       v.id_geempresa_int = ' || idgeempresa || ' and 
		       (v.id_gefilial_int = ' || idgefilial || ' or v.id_gefilial_int is null) and
		       v.id_gecliente_int = ' || idgecliente  || ' and 
		       upper(g.codigo_str)= ''NOT'' and 
		       upper(p.codigo_str)= ''CART_NAO_MARCA_PARC'''
	LOOP
		cartorionaomarcaparcela := registro.valor_str;
	END LOOP;

	FOR registro IN EXECUTE 'select t.id_cbdespesa_novo_int, t.id_cbcontrato_int, t.cartorio, t.id_cbparcela_int, t._inconsistencia, t.id_cbdespesa_int, t.chave_str
					from ' || tabtemp || ' t
					where t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.tipo_despesa::bigint = 1
				AND t.chave_str = ''' || chave ||  ''''
			LOOP

				IF position(registro.cartorio::character varying in cartorionaomarcaparcela) <= 0 or cartorionaomarcaparcela = '' THEN

					parcelasnotificadas := '';
						
					FOR rsparcelas IN EXECUTE 'select id_cbparcela_int 
							from cbparceladespesa 
							where id_cbdespesa_int = ' || registro.id_cbdespesa_novo_int 
					LOOP
						parcelasnotificadas := parcelasnotificadas || rsparcelas.id_cbparcela_int || ',';
						
					END LOOP;

					parcelasnotificadas := substr(parcelasnotificadas, 1, char_Length(parcelasnotificadas)-1);

					FOR rsparcelas IN EXECUTE 'Select id_cbparcela_int, data_vencimento_dat
							from cbparcela
							where id_cbcontrato_int = ' || registro.id_cbcontrato_int || '
							and situacao_int = 0
							and data_vencimento_dat <= current_date 
							and id_cbparcela_int not in (' || parcelasnotificadas || ')'
							
					LOOP

						EXECUTE 'Insert into cbnotifmarcaparcela ( data_dat, id_cbparcela_int, id_cbdespesa_int,
							id_geusuario_int, id_gecliente_int,tstamp, data_vencimento_dat )
							values( current_date, ' || rsparcelas.id_cbparcela_int || ',' ||
							registro.id_cbdespesa_novo_int || ',' || idgeusuario || ',' || idgecliente  || ', 
							current_timestamp, ''' || rsparcelas.data_vencimento_dat || ''')';

					END LOOP;

				END IF;
						
			END LOOP;
				    
	-------------------------------------------------------------------------------------------------------------
				    

				    				    
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1967 (class 1255 OID 27180)
-- Name: fimporta_notifmanualnovopadrao250612(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fimporta_notifmanualnovopadrao250612(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		
		-- **** Cria campos adicionais necessï¿½rios
		-- **** Cria o campo do ID da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_int int8;  ';
		END IF;
		-- **** Cria o campo do ID novo da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbdespesa_novo_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbdespesa_novo_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do contrato
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int int8;  ';
		END IF;
		-- **** Cria o campo do ID da parcela
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbparcela_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbparcela_int int8;  ';
		END IF;		
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_esdocfisico_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_esdocfisico_int int8;  ';
		END IF;
		-- **** Cria o campo do ID do retorno fisico da notificacao
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbvalortipodespesa_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbvalortipodespesa_int int8;  ';
		END IF;

		
		

		-- **** PREPARA A COLUNA DA INCONSISTENCIA
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = '''' 
			WHERE chave_str = ''' || chave ||  ''''; 

		-- **** PREPARA A COLUNA DO ID DO CONTRATO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO VENCIMENTO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.data_vencimento_dat = ' || tabtemp || '.vencimento_parcela 
			AND chave_str = ''' || chave ||  '''
			';
			
		-- **** PREPARA A COLUNA DO ID DA PARCELA COM BASE NA COLUNA DO NUMERO DA PARCELA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbparcela_int = p.id_cbparcela_int
			FROM ' || tabelafilha || ' c,  cbtiponegocio t, cbparcela p
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND p.id_cbcontrato_int = c.id_cbcontrato_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio
			AND p.parcela_int = ' || tabtemp || '.numero_parcela 
			AND chave_str = ''' || chave ||  '''
			AND ' || tabtemp || '.id_cbparcela_int IS NULL
			';
			
		-- **** PREPARA A COLUNA DO ID DO VALOR DO TIPO DE DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbvalortipodespesa_int = 
			(SELECT vtd.id_cbvalortipodespesa_int FROM 
			cbvalortipodespesa vtd
			INNER JOIN cbtipodespesa td USING (id_cbtipodespesa_int)
			INNER JOIN cbcartorio o USING (id_cbcartorio_int)
			WHERE 
			td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			ORDER BY vtd.data_inicio_dat DESC LIMIT 1
			)
			WHERE chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO VALOR DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET valor_despesa = COALESCE(valor_despesa, vtd.valor_num)
			FROM 
			cbvalortipodespesa vtd
			WHERE chave_str = ''' || chave ||  '''
			AND vtd.id_cbvalortipodespesa_int = ' || tabtemp || '.id_cbvalortipodespesa_int
			';
			
		-- **** PREPARA A COLUNA DO ID DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET 
				id_cbdespesa_int = d.id_cbdespesa_int
			FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
				cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
			WHERE 
			c.id_cbcontrato_int = d.id_cbcontrato_int
			AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
			AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
			AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
			AND c.contrato_str = ' || tabtemp || '.contrato			
			AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
			AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
			AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
			AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
			AND chave_str = ''' || chave ||  '''
			';

			
		-- **** PREPARA A COLUNA DO ID DO DOC FISICO DA DESPESA
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_esdocfisico_int = fd.id_esdocfisico_int 
			FROM esdocfisico fd 
			WHERE 
			fd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int
			AND fd.data_dat = ' || tabtemp || '.data_solic_retorno_fisico 
			';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Nï¿½mero do contrato em branco, '' 
			WHERE contrato IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo do negï¿½cio em branco, '' 
			WHERE tipo_negocio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Vencimento ou nï¿½mero da parcela em branco - preencher ao menos um deles, '' 
			WHERE (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada nï¿½o localizada, '' 
			WHERE id_cbparcela_int IS NULL AND NOT (vencimento_parcela IS NULL AND numero_parcela IS NULL)
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Parcela informada para despesa nova nï¿½o estï¿½ aberta, '' 
			FROM cbparcela p
			WHERE 
			p.id_cbparcela_int = ' || tabtemp || '.id_cbparcela_int
			AND COALESCE(p.situacao_int, 9) <> 0
			AND ' || tabtemp || '.id_cbdespesa_int IS NULL
			AND ' || tabtemp || '.chave_str = ''' || chave ||  '''
			';

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do tipo da despesa em branco, '' 
			WHERE tipo_despesa IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Cï¿½digo do cartï¿½rio em branco, '' 
			WHERE cartorio IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de retorno obrigatï¿½ria no caso de preenchimento das demais informaï¿½ï¿½es de retorno, '' 
			WHERE 
			(ar IS NOT NULL OR data_ar IS NOT NULL OR protocolo IS NOT NULL OR livro_protocolo IS NOT NULL OR registro IS NOT NULL 
			 OR livro_registro IS NOT NULL OR retorno_notificacao IS NOT NULL 
			) AND data_retorno_despesa IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Resultado do retorno obrigatï¿½rio caso preenchida a data de retorno, '' 
			WHERE 
			retorno_notificacao IS NULL AND data_retorno_despesa IS NOT NULL
			AND chave_str = ''' || chave ||  '''
			'; 

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Data de solicitaï¿½ï¿½o do doc. fï¿½sico obrigatï¿½ria no caso de preenchimento da data de retorno do fï¿½sico, '' 
			WHERE 
			data_retorno_fisico IS NOT NULL AND data_solic_retorno_fisico IS NULL
			AND chave_str = ''' || chave ||  '''
			'; 
			
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Tipo de despesa sem valor lanï¿½ado para o cartï¿½rio, '' 
			WHERE 
			id_cbvalortipodespesa_int IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 	

		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Despesa jï¿½ existe e lanï¿½ada para outra parcela, '' 
			WHERE 
			id_cbdespesa_int IS NOT NULL 
			AND id_cbparcela_int <> (SELECT MIN(pd.id_cbparcela_int) FROM cbparceladespesa pd WHERE pd.id_cbdespesa_int = ' || tabtemp || '.id_cbdespesa_int)
			AND chave_str = ''' || chave ||  '''
			'; 							
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
                 
		EXECUTE 'INSERT INTO cbdespesa(
				    id_cbdespesa_int, id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_dat, valor_num, situacao_str, observacoes_txt, id_geusuario_int, 
				    "timestamp", ar_str, data_ar_dat, protocolo_int, livro_protocolo_str, 
				    registro_int, livro_registro_str, notificado_str, data_envio_dat, 
				    data_retorno_dat, data_notificacao_dat, origem_str, arquivo_envio_str, data_aprovacao_dat, id_geqlendereco_int, motivo_retorno_str, data_reprovacao_dat)
				    
			  SELECT    nextval(''cbdespesa_seq''), id_cbcontrato_int, id_cbvalortipodespesa_int, 
				    data_geracao_despesa, valor_despesa, coalesce(situacao_despesa,''A''), observacao, ' || idgeusuario || ', 
				    Now(), ar, data_ar, protocolo::bigint, livro_protocolo, 
				    registro::bigint, livro_registro, UPPER(SUBSTR(retorno_notificacao,1,1)), data_envio_arq_remessa, 
				    data_retorno_despesa, data_notificacao, ''A'', '''', data_aprovacao_dat, (select qlend.id_geqlendereco_int from geqlendereco qlend 
							inner join geqlcontrato cli on cli.id_geqlcliente_int = qlend.id_geqlcliente_int 			        inner join ' || tabelafilha || ' c on c.id_cbcontrato_int = cli.id_cbcontrato_int
							inner join geqltipoendereco qlti on qlend.id_geqltipoendereco_int = qlti.id_geqltipoendereco_int 
							where c.id_cbcontrato_int = t.id_cbcontrato_int order by qlti.prioridade_int asc, qlend.classificacao_str asc, qlend.bairro_str desc, qlend.cep_str desc, qlend.complemento_str desc limit 1), motivo_retorno,data_reprovacao
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			UPDATE cbdespesa
				    SET 
				    ar_str = COALESCE(ar_str, t.ar), 
				    data_ar_dat = COALESCE(data_ar_dat, t.data_ar), 
				    protocolo_int = COALESCE(protocolo_int, t.protocolo::bigint), 
				    livro_protocolo_str = COALESCE(livro_protocolo_str, t.livro_protocolo), 
				    registro_int = COALESCE(registro_int, t.registro::bigint), 
				    livro_registro_str = COALESCE(livro_registro_str, t.livro_registro), 
				    notificado_str = COALESCE(notificado_str, UPPER(SUBSTR(retorno_notificacao,1,1))), 
				    data_envio_dat = COALESCE(data_envio_dat, t.data_envio_arq_remessa), 
				    data_retorno_dat = COALESCE(data_retorno_dat, t.data_retorno_despesa), 
				    data_dat = COALESCE(data_dat, t.data_notificacao),
				    origem_str = ''A'',
				    data_aprovacao_dat = COALESCE(t.data_aprovacao_dat,cbdespesa.data_aprovacao_dat),
				    id_geqlendereco_int = (select qlend.id_geqlendereco_int from geqlendereco qlend 
							inner join geqlcontrato cli on cli.id_geqlcliente_int = qlend.id_geqlcliente_int 			        inner join ' || tabelafilha || ' c on c.id_cbcontrato_int = cli.id_cbcontrato_int
							inner join geqltipoendereco qlti on qlend.id_geqltipoendereco_int = qlti.id_geqltipoendereco_int 
							where c.id_cbcontrato_int = cbdespesa.id_cbcontrato_int order by qlti.prioridade_int asc, qlend.classificacao_str asc, qlend.bairro_str desc, qlend.cep_str desc, qlend.complemento_str desc limit 1),
				   motivo_retorno_str = COALESCE(motivo_retorno_str, t.motivo_retorno),
				   situacao_str = COALESCE(t.situacao_despesa, situacao_str),
				    data_reprovacao_dat = COALESCE(t.data_reprovacao, data_reprovacao_dat), 	
				    -- valor conforme OS triare 034.399..  um tanto perigoso na verdade...
				    valor_num = COALESCE(NULLIF(t.valor_despesa, 0), valor_num)
				    
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_cbdespesa_int = cbdespesa.id_cbdespesa_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';

			-- **** ATUALIZA A COLUNA DO ID DA DESPESA NOVA NA TEMPORARIA
			UPDATE ' || tabtemp || ' SET 
					id_cbdespesa_novo_int = d.id_cbdespesa_int
				FROM cbdespesa d, ' || tabelafilha || ' c,  cbtiponegocio t, 
					cbvalortipodespesa vtd, cbtipodespesa td, cbcartorio o
				WHERE 
				c.id_cbcontrato_int = d.id_cbcontrato_int
				AND t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
				AND vtd.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int
				AND vtd.id_cbtipodespesa_int = td.id_cbtipodespesa_int
				AND o.id_cbcartorio_int = vtd.id_cbcartorio_int
				AND c.contrato_str = ' || tabtemp || '.contrato			
				AND t.codigo_str = ' || tabtemp || '.tipo_negocio	
				AND td.codigo_int = ' || tabtemp || '.tipo_despesa::bigint		
				AND o.codigo_int = ' || tabtemp || '.cartorio::bigint
				AND d.data_dat = ' || tabtemp || '.data_geracao_despesa
				AND chave_str = ''' || chave ||  '''
				;

			INSERT INTO cbparceladespesa(
				    id_cbdespesa_int, 
				    id_cbparcela_int, id_geusuario_int, 
				    "timestamp")
			  SELECT    id_cbdespesa_novo_int, id_cbparcela_int, 
				    ' || idgeusuario || ', 
				    Now()
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_cbdespesa_int IS NULL
				AND t.chave_str = ''' || chave ||  ''';

			INSERT INTO esdocfisico(
				    id_gecliente_int, id_cbtiponegocio_int, 
				    id_cbcontrato_int, id_cbdespesa_int, 
				    data_dat, id_geusuario_int, retorno_dat,
				    tstamp, id_cbparcela_int)
				    
			  SELECT    
				    ' || idgecliente || ', o.id_cbtiponegocio_int, 
				    t.id_cbcontrato_int, id_cbdespesa_novo_int, 
				    t.data_solic_retorno_fisico, ' || idgeusuario || ', t.data_retorno_fisico,
				    Now(), t.id_cbparcela_int
			  
			  FROM ' || tabtemp || ' t 
			  INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			  WHERE 
				t._inconsistencia = ''''
				AND t.id_esdocfisico_int IS NULL
				AND t.data_solic_retorno_fisico IS NOT NULL
				AND t.chave_str = ''' || chave ||  ''';

			

			UPDATE esdocfisico
				    SET 
				    retorno_dat = COALESCE(retorno_dat, t.data_solic_retorno_fisico)
			  FROM ' || tabtemp || ' t 
			  WHERE 
				t.id_esdocfisico_int = esdocfisico.id_esdocfisico_int
				AND t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				
			/*insert into cbfollowup ( 
			    id_cbcontrato_int,   
			    id_cbparcela_int,    
			    id_cbsitcontato_int, 
			    data_dat,            
			    hora_tim,            
			    historico_str,       
			    id_geusuario_int, 
			    tstamp) 
			SELECT 
			    id_cbcontrato_int,
			    null,
			    (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ),
			    current_date,
			    current_timestamp, 
			    COALESCE( historico_follow,
				(SELECT s.historico_padrao_str FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) ),
			    ' || idgeusuario || ', 
			    current_timestamp
			FROM 
				' || tabtemp || ' t 
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  '''
				AND (SELECT s.id_cbsitcontato_int FROM cbsitcontato s WHERE s.codigo_int = t.cod_follow AND s.id_gecliente_int = ' || idgecliente || ' ) IS NOT NULL
				; */

				 	

			-- LOGS
			
			Insert Into gehistoricousuario
				(id_geusuario_int,
				id_gecliente_int,
				id_geaplicacao_int,
				data_hora_dat,
				evento_str,
				contrato_str,
				obs_txt)

			SELECT DISTINCT ON (t.id_cbcontrato_int)
				' || idgeusuario || ',
				' || idgecliente || ',
				(SELECT g.id_geaplicacao_int FROM geaplicacao g WHERE g.codigo_str = ''GE202''),
				Now(),
				''Inclusï¿½o/Alteraï¿½ï¿½o de despesa'',
				o.contrato_str,
				''Usuï¿½rio incluiu ou alterou dados de despesas nesta data''
			FROM 
				' || tabtemp || ' t 
				INNER JOIN ' || tabelafilha || ' o ON (t.id_cbcontrato_int = o.id_cbcontrato_int)
			WHERE 
				t._inconsistencia = '''' 
				AND t.chave_str = ''' || chave ||  ''';
				';
				    

				    				    
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1968 (class 1255 OID 27190)
-- Name: fimporta_planilha_contratos(integer, character varying, character varying, character varying, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fimporta_planilha_contratos(processo integer, tabtemp character varying, chave character varying, tabelafilha character varying, idgecliente bigint, idgefilial bigint, idgeempresa bigint, idgeusuario bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
cont     int8;
registro RECORD;
BEGIN
	-- **** ACERTA TEMPORARIA
	IF processo = 0 THEN
		
		-- **** Cria campos adicionais necessï¿½rios
		-- **** Cria o campo do ID da despesa
		FOR registro IN EXECUTE 'SELECT 
			COUNT(*) as conta
			FROM information_schema.columns e WHERE e.table_name = ''' || tabtemp || ''' and e.column_name = ''id_cbcontrato_int'' LIMIT 1'
		LOOP
			cont := registro.conta;
		END LOOP;

		IF cont = 0 THEN
			EXECUTE 'ALTER TABLE ' || tabtemp || ' ADD COLUMN id_cbcontrato_int int8;  ';
		END IF;

		-- **** PREPARA A COLUNA DA INCONSISTENCIA
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = '''' 
			WHERE chave_str = ''' || chave ||  ''''; 

		-- **** PREPARA A COLUNA DO ID DO CONTRATO VIA CPF
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND 
			abs_cpf(c.cpf_str) = abs_cpf(' || tabtemp || '.cpf)
			AND chave_str = ''' || chave ||  '''
			';

		-- **** PREPARA A COLUNA DO ID DO CONTRATO
		EXECUTE 'UPDATE ' || tabtemp || ' SET id_cbcontrato_int = c.id_cbcontrato_int 
			FROM ' || tabelafilha || ' c,  cbtiponegocio t
			WHERE
			t.id_cbtiponegocio_int = c.id_cbtiponegocio_int
			AND 
			c.contrato_str = ' || tabtemp || '.contrato AND t.codigo_str = ' || tabtemp || '.tipo_negocio 
			AND chave_str = ''' || chave ||  '''
			';

	-- ***** INCONSISTENCIAS RECEBIDAS			
	ELSEIF processo = 1 THEN 
			--
		EXECUTE 'UPDATE ' || tabtemp || ' SET _inconsistencia = _inconsistencia || ''Chave (Tipo de negï¿½cio + Contrato) OU (CPF) nï¿½o existe, '' 
			WHERE id_cbcontrato_int IS NULL 
			AND chave_str = ''' || chave ||  '''
			'; 
					
						
        -- ***** PROCESSO COMPLETO
	ELSEIF processo = 2 THEN
                 
	-- ***** SO PRECISO DA TEMPORARIA COM OS DADOS PARA USAR EM LAYOUT DE SAIDA
		EXECUTE '
			INSERT INTO ' || tabtemp || ' 
				(contrato, tipo_negocio, id_cbcontrato_int )
			SELECT DISTINCT ON (c.id_cbcontrato_int) 
				c.contrato_str, n.codigo_str, c.id_cbcontrato_int
			FROM ' || tabelafilha || ' c
			INNER JOIN cbtiponegocio n ON (n.id_cbtiponegocio_int = c.id_cbtiponegocio_int)
			INNER JOIN ' || tabtemp || ' t ON (t.cpf = c.cpf_str AND t.id_cbcontrato_int <> c.id_cbcontrato_int)

		';
	END IF;

	RETURN  '';
END;
$$;

--
-- TOC entry 1969 (class 1255 OID 27199)
-- Name: finserefollowjuridica(bigint, bigint, text, date, timestamp without time zone); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.finserefollowjuridica(sitcontato bigint, idcontrato bigint, historico text, datafollow date, hora timestamp without time zone) RETURNS text
    LANGUAGE plpgsql
    AS $$
  declare
     idsitcontato bigint;
     registro record;   
  Begin
   
  	--Verifica a existï¿½ncia do Follow na carteira
  	idsitcontato := 0;
  	FOR registro IN EXECUTE 'select id_cbsitcontato_int from cbsitcontato where codigo_int = ' || sitcontato
  	LOOP
  		idsitcontato := registro.id_cbsitcontato_int;
  	END LOOP;
  
  	--Insere o Follow
  	IF idsitcontato > 0 THEN
  		FOR registro IN EXECUTE 'select id_cbcontrato_int from cbcontrato where id_cbcontrato_int = ' || idcontrato
  	        LOOP
  			EXECUTE '
  					INSERT
  					INTO cbfollowup (id_cbcontrato_int,
  							data_dat,
  							historico_str,
  							id_geusuario_int,
  							coloca_stand_str,
  							id_cbsitcontato_int,
  							hora_tim,
  							tstamp,
  							tipo_contato_str )
  					VALUES (' || idcontrato || ',
  						''' || datafollow || ''',
  						''' || historico ||''',
  						1,
  						''N'','
  						|| idsitcontato || ',
  						''' || hora ||''',
  						current_timestamp,
  						''A'')';		
  		END LOOP;
  	END IF;
  return '';
  end;
  $$;

--
-- TOC entry 1970 (class 1255 OID 27207)
-- Name: fmapfreendereco(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fmapfreendereco() RETURNS boolean
    LANGUAGE plpgsql
    AS $$

DECLARE
  resultado 		boolean;
BEGIN

	update tmpmapfreendereco set id_geqltipoendereco_int = case when upper(tipo) = 'RESIDENCIAL' then 1 
	                                                            when upper(tipo) = 'COMERCIAL'  then 2
	                                                            when upper(tipo) = 'PRINCIPAL' then 21
	                                                            else 15 end;

	update tmpmapfreendereco set id_geqlcliente_int = geqlcliente.id_geqlcliente_int
	from geqlcliente,cbcontratomapfre
	where
	tmpmapfreendereco.contrato_str = cbcontratomapfre.contrato_str and
	abs_cpf(cbcontratomapfre.cpf_str) = abs_cpf(geqlcliente.cpf_str);

	update tmpmapfreendereco set id_geqlendereco_int = geqlendereco.id_geqlendereco_int
	from geqlendereco
	where
	tmpmapfreendereco.id_geqlcliente_int = geqlendereco.id_geqlcliente_int and
	--tmpmapfreendereco.endereco = geqlendereco.endereco_str;
	(tmpmapfreendereco.endereco = geqlendereco.endereco_str and
	 tmpmapfreendereco.complemento = geqlendereco.complemento_str and
	 tmpmapfreendereco.bairro = geqlendereco.bairro_str and
	 tmpmapfreendereco.cidade = geqlendereco.cidade_str and
	 tmpmapfreendereco.cep = geqlendereco.cep_str and
	 tmpmapfreendereco.estado = geqlendereco.estado_str and
	 tmpmapfreendereco.id_geqltipoendereco_int = geqlendereco.id_geqltipoendereco_int)
	 and coalesce(geqlendereco.excluido_bit,'0'::bit) = '0'::bit;

	INSERT INTO geqlendereco (
			id_geqlcliente_int, id_geqltipoendereco_int, 
			endereco_str,bairro_str,cidade_str,estado_str,cep_str,complemento_str,
			classificacao_str, tabela_origem_str, 
			id_geusuario_inclusao_int,tstamp_inclusao,
			id_geusuario_int, tstamp)  
	select 
                        id_geqlcliente_int,
                        id_geqltipoendereco_int,
                        endereco,bairro,cidade,estado,cep,complemento,
			case when (substr(classificacao, 1, 1) = '1' or substr(classificacao, 1, 1) = 'E') then '1 - Excelente'
			when (substr(classificacao, 1, 1) = '2' or substr(classificacao, 1, 1) = 'B') then '2 - Bom'
			when (substr(classificacao, 1, 1) = '3' or substr(classificacao, 1, 1) = 'R') then '3 - Ruim'
			else '9 - Indefinido' 
			end,
                        'PR002', 
                        1195, 
                        current_timestamp,
                        1195, 
                        current_timestamp
        from tmpmapfreendereco
        where id_geqlcliente_int is not null and id_geqlendereco_int is null;

	

--jimjunior 01/11/2013
	
--Atualiza o tipo de endereï¿½o se o mesmo jï¿½ existir na base.
	
UPDATE geqlendereco
	   SET id_geqltipoendereco_int = tmpmapfreendereco.id_geqltipoendereco_int
	FROM tmpmapfreendereco
	WHERE geqlendereco.id_geqlendereco_int = tmpmapfreendereco.id_geqlendereco_int;

        
	RETURN true;
END;
$$;

--
-- TOC entry 1971 (class 1255 OID 27208)
-- Name: fnormaliza_garantia(bigint, bigint, text, bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fnormaliza_garantia(id_contrato bigint, id_parcela bigint, tabela_filha text, id_cliente bigint, parcampos text) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
  query 		text;
  query_p 		text;
  resultado 		bigint;
  registro 	      RECORD;
  registro_ori 	      RECORD;
  registro_p 	      RECORD;
  registro_l 	      RECORD;
  bAchou 		boolean;
BEGIN
	resultado := 0;

	if SPLIT_PART(parcampos, ',', 1) = '' THEN 
		RETURN resultado;
		EXIT; 
	END IF;

	bAchou = false;
	FOR registro IN EXECUTE 'SELECT id_cbcontrato_int
		FROM cbgarantia 
		WHERE 
		id_cbcontrato_int = ' || id_contrato || ' AND 
		criado_normalizacao_bit = 1::bit'
		 LOOP
		resultado = id_contrato;
		bAchou = true;
	END LOOP;

	IF bAchou = false THEN
		bAchou = false;
		FOR registro_ori IN EXECUTE 'SELECT 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 1)  || ', '''') AS marca_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 2)  || ', '''') AS modelo_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 3)  || ', '''') as ano_modelo_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 4)  || ', '''') as chassis_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 5)  || ', '''') as cor_str,
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 6)  || ', '''') as ano_fabricacao_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 7)  || ','''') as placa_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 8)  || ','''') as renavam_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 9)  || ','''') as descricao_str, 
			id_cbcontrato_int, id_cbtiponegocio_int 
			FROM ' || tabela_filha || ' WHERE id_cbcontrato_int = ' || id_contrato LOOP
			bAchou = true;
		END LOOP;

		
		IF bAchou = true THEN

			bAchou = false;
			FOR registro IN EXECUTE 'SELECT id_cbgarantia_int 
				FROM cbgarantia 
				WHERE 
				id_cbcontrato_int = ' || id_contrato || ' AND
				(COALESCE(marca_str, '''') = ''' || registro_ori.marca_str || ''' AND COALESCE(modelo_str, '''') = ''' || registro_ori.modelo_str || ''' AND
				COALESCE(ano_modelo_str, '''') = ''' || registro_ori.ano_modelo_str || ''' AND COALESCE(placa_str, '''') = ''' || registro_ori.placa_str || ''') ' 
				 LOOP
				bAchou = true;
			END LOOP;

			IF bAchou = false THEN
				FOR registro_l IN EXECUTE 'SELECT 
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''marca_str'') AS marca_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''modelo_str'') AS modelo_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''ano_fabricacao_str'') AS ano_fabricacao_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''ano_modelo_str'') AS ano_modelo_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''chassi_str'') AS chassi_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''cor_str'') AS cor_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''placa_str'') AS placa_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''renavam_str'') AS renavam_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''descricao_str'') AS descricao_l
					FROM information_schema.columns e WHERE e.table_name = ''cbgarantia'' LIMIT 1'
				LOOP

				END LOOP;

				FOR registro_p IN EXECUTE 'SELECT NEXTVAL(''cbgarantia_seq'') as IDNovo' LOOP
				END LOOP;

				EXECUTE 'INSERT INTO cbgarantia (
					id_cbcontrato_int, id_cbtiponegocio_int, 
					id_cbgarantia_int, id_gecliente_int, marca_str, modelo_str, 
					ano_fabricacao_str,ano_modelo_str, chassi_str, cor_str, placa_str, renavam_str, descricao_str, tstamp, 
					criado_normalizacao_bit
					) VALUES (
					''' || registro_ori.id_cbcontrato_int || ''', 
					''' || registro_ori.id_cbtiponegocio_int || ''',
					''' || registro_p.idnovo || ''',
					''' || id_cliente || ''',
					NULLIF(''' || SUBSTR(registro_ori.marca_str,1, registro_l.marca_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.modelo_str,1, registro_l.modelo_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.ano_fabricacao_str,1, registro_l.ano_fabricacao_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.ano_modelo_str,1, registro_l.ano_modelo_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.chassis_str,1, registro_l.chassi_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.cor_str,1, registro_l.cor_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.placa_str,1, registro_l.placa_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.renavam_str,1, registro_l.renavam_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.descricao_str,1, registro_l.descricao_l) || ''', ''''),
					CURRENT_TIMESTAMP, 1::bit)';

				resultado := id_contrato;

			ELSE
				resultado := id_contrato;
			END IF;

		END IF;

	END IF;

	RETURN  resultado;
END;
$$;

--
-- TOC entry 1972 (class 1255 OID 27216)
-- Name: fnormaliza_garantia(bigint, text, text, bigint, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fnormaliza_garantia(id_contrato bigint, id_parcela text, tabela_filha text, id_cliente bigint, parcampos text) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
  query 		text;
  query_p 		text;
  resultado 		bigint;
  registro 	      RECORD;
  registro_ori 	      RECORD;
  registro_p 	      RECORD;
  registro_l 	      RECORD;
  bAchou 		boolean;
BEGIN
	resultado := 0;

	if SPLIT_PART(parcampos, ',', 1) = '' THEN 
		RETURN resultado;
		EXIT; 
	END IF;

	bAchou = false;
	FOR registro IN EXECUTE 'SELECT id_cbcontrato_int
		FROM cbgarantia 
		WHERE 
		id_cbcontrato_int = ' || id_contrato || ' AND 
		criado_normalizacao_bit = 1::bit'
		 LOOP
		resultado = id_contrato;
		bAchou = true;
	END LOOP;

	IF bAchou = false THEN
		bAchou = false;
		FOR registro_ori IN EXECUTE 'SELECT 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 1)  || ', '''') AS marca_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 2)  || ', '''') AS modelo_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 3)  || ', '''') as ano_modelo_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 4)  || ', '''') as chassis_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 5)  || ', '''') as cor_str,
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 6)  || ', '''') as ano_fabricacao_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 7)  || ','''') as placa_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 8)  || ','''') as renavam_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 9)  || ','''') as descricao_str, 
			id_cbcontrato_int, id_cbtiponegocio_int 
			FROM ' || tabela_filha || ' WHERE id_cbcontrato_int = ' || id_contrato LOOP
			bAchou = true;
		END LOOP;

		
		IF bAchou = true THEN

			bAchou = false;
			FOR registro IN EXECUTE 'SELECT id_cbgarantia_int 
				FROM cbgarantia 
				WHERE 
				id_cbcontrato_int = ' || id_contrato || ' AND
				(COALESCE(marca_str, '''') = ''' || registro_ori.marca_str || ''' AND COALESCE(modelo_str, '''') = ''' || registro_ori.modelo_str || ''' AND
				COALESCE(ano_modelo_str, '''') = ''' || registro_ori.ano_modelo_str || ''' AND COALESCE(placa_str, '''') = ''' || registro_ori.placa_str || ''') ' 
				 LOOP
				bAchou = true;
			END LOOP;

			IF bAchou = false THEN
				FOR registro_l IN EXECUTE 'SELECT 
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''marca_str'') AS marca_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''modelo_str'') AS modelo_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''ano_fabricacao_str'') AS ano_fabricacao_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''ano_modelo_str'') AS ano_modelo_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''chassi_str'') AS chassi_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''cor_str'') AS cor_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''placa_str'') AS placa_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''renavam_str'') AS renavam_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''descricao_str'') AS descricao_l
					FROM information_schema.columns e WHERE e.table_name = ''cbgarantia'' LIMIT 1'
				LOOP

				END LOOP;

				FOR registro_p IN EXECUTE 'SELECT NEXTVAL(''cbgarantia_seq'') as IDNovo' LOOP
				END LOOP;

				EXECUTE 'INSERT INTO cbgarantia (
					id_cbcontrato_int, id_cbtiponegocio_int, 
					id_cbgarantia_int, id_gecliente_int, marca_str, modelo_str, 
					ano_fabricacao_str,ano_modelo_str, chassi_str, cor_str, placa_str, renavam_str, descricao_str, tstamp, 
					criado_normalizacao_bit
					) VALUES (
					''' || registro_ori.id_cbcontrato_int || ''', 
					''' || registro_ori.id_cbtiponegocio_int || ''',
					''' || registro_p.idnovo || ''',
					''' || id_cliente || ''',
					NULLIF(''' || SUBSTR(registro_ori.marca_str,1, registro_l.marca_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.modelo_str,1, registro_l.modelo_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.ano_fabricacao_str,1, registro_l.ano_fabricacao_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.ano_modelo_str,1, registro_l.ano_modelo_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.chassis_str,1, registro_l.chassi_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.cor_str,1, registro_l.cor_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.placa_str,1, registro_l.placa_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.renavam_str,1, registro_l.renavam_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.descricao_str,1, registro_l.descricao_l) || ''', ''''),
					CURRENT_TIMESTAMP, 1::bit)';

				resultado := id_contrato;

			ELSE
				resultado := id_contrato;
			END IF;

		END IF;

	END IF;

	RETURN  resultado;
END;
$$;

--
-- TOC entry 1973 (class 1255 OID 27224)
-- Name: fnormaliza_garantia(text, text, text, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fnormaliza_garantia(id_contrato text, id_parcela text, tabela_filha text, id_cliente text, parcampos text) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
DECLARE
  query 		text;
  query_p 		text;
  resultado 		bigint;
  registro 	      RECORD;
  registro_ori 	      RECORD;
  registro_p 	      RECORD;
  registro_l 	      RECORD;
  bAchou 		boolean;
BEGIN
	resultado := 0;

	if SPLIT_PART(parcampos, ',', 1) = '' THEN 
		RETURN resultado;
		EXIT; 
	END IF;

	bAchou = false;
	FOR registro IN EXECUTE 'SELECT id_cbcontrato_int
		FROM cbgarantia 
		WHERE 
		id_cbcontrato_int = ' || id_contrato || ' AND 
		criado_normalizacao_bit = 1::bit'
		 LOOP
		resultado = id_contrato;
		bAchou = true;
	END LOOP;

	IF bAchou = false THEN
		bAchou = false;
		FOR registro_ori IN EXECUTE 'SELECT 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 1)  || ', '''') AS marca_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 2)  || ', '''') AS modelo_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 3)  || ', '''') as ano_modelo_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 4)  || ', '''') as chassis_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 5)  || ', '''') as cor_str,
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 6)  || ', '''') as ano_fabricacao_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 7)  || ','''') as placa_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 8)  || ','''') as renavam_str, 
			COALESCE(' ||  SPLIT_PART(parcampos, ',', 9)  || ','''') as descricao_str, 
			id_cbcontrato_int, id_cbtiponegocio_int 
			FROM ' || tabela_filha || ' WHERE id_cbcontrato_int = ' || id_contrato LOOP
			bAchou = true;
		END LOOP;

		
		IF bAchou = true THEN

			bAchou = false;
			FOR registro IN EXECUTE 'SELECT id_cbgarantia_int 
				FROM cbgarantia 
				WHERE 
				id_cbcontrato_int = ' || id_contrato || ' AND
				(COALESCE(marca_str, '''') = ''' || registro_ori.marca_str || ''' AND COALESCE(modelo_str, '''') = ''' || registro_ori.modelo_str || ''' AND
				COALESCE(ano_modelo_str, '''') = ''' || registro_ori.ano_modelo_str || ''' AND COALESCE(placa_str, '''') = ''' || registro_ori.placa_str || ''') ' 
				 LOOP
				bAchou = true;
			END LOOP;

			IF bAchou = false THEN
				FOR registro_l IN EXECUTE 'SELECT 
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''marca_str'') AS marca_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''modelo_str'') AS modelo_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''ano_fabricacao_str'') AS ano_fabricacao_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''ano_modelo_str'') AS ano_modelo_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''chassi_str'') AS chassi_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''cor_str'') AS cor_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''placa_str'') AS placa_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''renavam_str'') AS renavam_l,
					(SELECT character_maximum_length FROM information_schema.columns WHERE table_name = e.table_name AND column_name = ''descricao_str'') AS descricao_l
					FROM information_schema.columns e WHERE e.table_name = ''cbgarantia'' LIMIT 1'
				LOOP

				END LOOP;

				FOR registro_p IN EXECUTE 'SELECT NEXTVAL(''cbgarantia_seq'') as IDNovo' LOOP
				END LOOP;

				EXECUTE 'INSERT INTO cbgarantia (
					id_cbcontrato_int, id_cbtiponegocio_int, 
					id_cbgarantia_int, id_gecliente_int, marca_str, modelo_str, 
					ano_fabricacao_str,ano_modelo_str, chassi_str, cor_str, placa_str, renavam_str, descricao_str, tstamp, 
					criado_normalizacao_bit
					) VALUES (
					''' || registro_ori.id_cbcontrato_int || ''', 
					''' || registro_ori.id_cbtiponegocio_int || ''',
					''' || registro_p.idnovo || ''',
					''' || id_cliente || ''',
					NULLIF(''' || SUBSTR(registro_ori.marca_str,1, registro_l.marca_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.modelo_str,1, registro_l.modelo_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.ano_fabricacao_str,1, registro_l.ano_fabricacao_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.ano_modelo_str,1, registro_l.ano_modelo_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.chassis_str,1, registro_l.chassi_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.cor_str,1, registro_l.cor_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.placa_str,1, registro_l.placa_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.renavam_str,1, registro_l.renavam_l) || ''', ''''),
					NULLIF(''' || SUBSTR(registro_ori.descricao_str,1, registro_l.descricao_l) || ''', ''''),
					CURRENT_TIMESTAMP, 1::bit)';

				resultado := id_contrato;

			ELSE
				resultado := id_contrato;
			END IF;

		END IF;

	END IF;

	RETURN  resultado;
END;
$$;

--
-- TOC entry 1974 (class 1255 OID 27232)
-- Name: followboletojuridicoativo(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.followboletojuridicoativo() RETURNS trigger
    LANGUAGE plpgsql
    AS $_$                                                                                                                                                                                                  
   declare 
   registro  RECORD;                                                                                                                                                                                                
   bOk boolean;
   idcliente bigint; 
   cdcontrato bigint;
   mensagem text;
   
   begin                                                                                                                                                                                                   
  	bOk = false;                                                                                                                                                                                        
  	IF (TG_OP = 'INSERT') THEN
  		--Somente se Nï¿½O for boletagem
  		IF coalesce(new.destino_str, '') <> 'BOLETAGEM' THEN			
  		
  			--Pega o id_gecliente_int do banco de dados de origem						
  			FOR registro in EXECUTE 'select id_cbcontrato_int, id_gecliente_int from cbcontrato where id_cbcontrato_int = ' || new.id_cbcontrato_int
  			LOOP
  				idcliente := registro.id_gecliente_int;
  				cdcontrato := registro.id_cbcontrato_int;
  			END LOOP;
  
  			--Verifica em qual banco de dados esta, conecta e chama a funcao para criar o follow na origem
  			FOR registro in EXECUTE 'select ip_str, banco_str, porta_str, senha_str 
  						from dblink(''dbname=plcp001 port=5432 host=10.20.10.243 user=postgres  password=c4Poqdkn''::text,
  							    ''select s.ip_str, s.banco_str, s.porta_str, s.senha_str
  								from geclienteservidor cs
  								join geparametroservidor s using(id_geparametroservidor_int)
  							       where id_gecliente_int = 99 ''::TEXT) AS dados (ip_str character varying, banco_str character varying, porta_str character varying, senha_str character varying)'
  			LOOP	 
  		                mensagem := 'BOLETO GERADO NA ORIGEM VALOR R$ ' || replace(new.valor_total_num::text, '.', ',') || ' vencimento ' || substring(new.vencimento_dat::text, 9,2) || '/' || substring(new.vencimento_dat::text, 6,2) || '/' || substring(new.vencimento_dat::text, 1,4) ;
  
  				EXECUTE 'select retorno from dblink(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=postgres  password=' || registro.senha_str || '''::text,
  								    ''select finserefolloworigem(1118, ' || cdcontrato || ', ' || idcliente || ', ''''' || mensagem || ''''', ''''' || new.emissao_dat || ''''', current_timestamp::timestamp without time zone); ''::TEXT) AS dados (retorno text)';
  			END LOOP;			
  		END IF;
  	END IF;
    return new;    end; $_$;

--
-- TOC entry 1975 (class 1255 OID 27241)
-- Name: followjuridicoativo(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.followjuridicoativo() RETURNS trigger
    LANGUAGE plpgsql
    AS $$                                                                                                                                                                                                  
 declare 
 registro  RECORD;                                                                                                                                                                                                
 bOk boolean;
 idcliente bigint;
 codsitcontato bigint; 
 cdcontrato bigint;                                                                                                                                                                                           

 begin                                                                                                                                                                                                   
	bOk = false;                                                                                                                                                                                        
	IF (TG_OP = 'INSERT') THEN
		--Pega o codigo_int da situacao do contato
		FOR registro in EXECUTE 'select codigo_int from cbsitcontato where id_cbsitcontato_int = ' || new.id_cbsitcontato_int
		LOOP
			codsitcontato := registro.codigo_int;
		END LOOP;

		IF codsitcontato IN (1105, 1106, 1107, 1108, 1109, 1112, 1113, 1114, 1115, 1116, 1117, 6001, 6068, 6098, 7019, 7068, 7069, 6052, 6093, 888888) THEN
		
			--Pega o id_gecliente_int do banco de dados de origem						
		        FOR registro in EXECUTE 'select id_cbcontrato_int, id_gecliente_int from cbcontrato where id_cbcontrato_int = ' || new.id_cbcontrato_int
		        LOOP
				idcliente := registro.id_gecliente_int;
				cdcontrato := registro.id_cbcontrato_int;
			END LOOP;

			--Verifica em qual banco de dados esta, conecta e chama a funcao para criar o follow na origem
			FOR registro in EXECUTE 'select ip_str, banco_str, porta_str, senha_str 
			 		         from dblink(''dbname=plcp001 port=5432 host=10.20.10.243 user=postgres  password=c4Poqdkn''::text,
					 	             ''select s.ip_str, s.banco_str, s.porta_str, s.senha_str
						                 from geclienteservidor cs
						                 join geparametroservidor s using(id_geparametroservidor_int)
						                where id_gecliente_int = 99 ''::TEXT) AS dados (ip_str character varying, banco_str character varying, porta_str character varying, senha_str character varying)'
		        LOOP	 
		                                                    
				EXECUTE 'select retorno from dblink(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=postgres  password=' || registro.senha_str || '''::text,
                                                                    ''select finserefolloworigem(' || codsitcontato || ', ' || cdcontrato || ', ' || idcliente || ', ''''' || new.historico_str || ''''', ''''' || new.data_dat || ''''', ''''' || new.hora_tim || '''''); ''::TEXT) AS dados (retorno text)';
	                END LOOP;
	        END IF;
	END IF;
  return new;    end; $$;

--
-- TOC entry 1976 (class 1255 OID 27243)
-- Name: fsms_cpf_inibido(text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fsms_cpf_inibido(tabelafilha text, id_contrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  retorno  	      text;
  registro 	      RECORD;

BEGIN
	retorno := '';

	FOR registro IN
		EXECUTE 'SELECT  CASE WHEN LENGTH(abs_cpf(cpf_str)) <= 11 THEN 	
					overlay(abs_cpf(cpf_str) placing ''XXXXX'' FROM 4 FOR 5) 
				 ELSE
					overlay(abs_cpf(cpf_str) placing ''XXXXXXXX'' FROM 4 FOR 8) 
				 END	AS retorno 
					FROM ' || tabelafilha || '
		WHERE id_cbcontrato_int = ' || id_contrato::text || ' 
		'
	LOOP

	  retorno := retorno || registro.retorno || '/';

	END LOOP;

	IF LENGTH(retorno) > 0 THEN
		retorno := SUBSTR(retorno, 1, LENGTH(retorno) -1);
	END IF;

	RETURN  retorno;
END;
$$;

--
-- TOC entry 1977 (class 1255 OID 27250)
-- Name: fsonumero(character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fsonumero(texto character varying) RETURNS character varying
    LANGUAGE plpgsql
    AS $_$
DECLARE
	textonovo varchar;
	i integer;
BEGIN
	
	textonovo := translate(texto, 'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½','          ');
	textonovo := translate(textonovo, 'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½','        ');
	textonovo := translate(textonovo, 'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½','        ');
	textonovo := translate(textonovo, 'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½','          ');
	textonovo := translate(textonovo, 'ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½','        ');
	textonovo := translate(textonovo, 'ï¿½ï¿½','  ');
	textonovo := translate(textonovo, 'ï¿½',' ');
	textonovo := translate(textonovo, 'ï¿½',' ');
	textonovo := translate(upper(textonovo), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ','');
	textonovo := translate(upper(textonovo), '+=":@#$%&*()-;.,[]{}_<>/|','');
	textonovo := trim(replace(textonovo,' ',''));
	
	--textonovo := substr(textonovo,1,20);
        /*WHILE i <= length(texto) LOOP
		--IF ascii(substr(texto,i,1)) >= 48 && ascii(substr(texto,i,1)) <= 57 then
		textonovo := textonovo || substr(texto,i,1);
		i := i + 1;
		--end if;		
	END LOOP;
	*/
	
	RETURN  CASE WHEN textonovo = '' THEN '0' ELSE textonovo END ;
END;
$_$;

--
-- TOC entry 1978 (class 1255 OID 27253)
-- Name: fstatus_despesa_parcela(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fstatus_despesa_parcela(id_parcela bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  abreviaturas_concat text;
  registro 	      RECORD;
  conta               RECORD;

BEGIN
	abreviaturas_concat := '';

	FOR registro IN
		EXECUTE 'SELECT DISTINCT(tp.abreviatura_str) as abrev FROM cbparceladespesa pd
		INNER JOIN cbdespesa d ON (d.id_cbdespesa_int = pd.id_cbdespesa_int) 
		INNER JOIN cbvalortipodespesa vtp ON (vtp.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int) 
		INNER JOIN cbtipodespesa tp ON (tp.id_cbtipodespesa_int = vtp.id_cbtipodespesa_int) 
		WHERE pd.id_cbparcela_int = ' || id_parcela::text || ' 
		AND d.situacao_str <> ' || '''C''' || ' ORDER BY tp.abreviatura_str'
		LOOP

	  abreviaturas_concat := abreviaturas_concat || registro.abrev || ',';

	END LOOP;

	FOR registro IN
		EXECUTE 'SELECT COUNT(*) as conta FROM cbnotifmarcaparcela WHERE id_cbparcela_int = ' 
		|| id_parcela::text ||  ' LIMIT 1' 
		LOOP

		IF registro.conta <> 0 THEN
			abreviaturas_concat := abreviaturas_concat || 'M' || ',';
		END IF;
	END LOOP;

	IF LENGTH(abreviaturas_concat) > 0 THEN
		abreviaturas_concat := SUBSTR(abreviaturas_concat, 1, LENGTH(abreviaturas_concat) -1);
	END IF;

	RETURN  abreviaturas_concat;
END;
$$;

--
-- TOC entry 1979 (class 1255 OID 27261)
-- Name: fstatus_despesa_parcela(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fstatus_despesa_parcela(id_parcela text) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  abreviaturas_concat text;
  registro 	      RECORD;
  conta               RECORD;

BEGIN
	abreviaturas_concat := '';

	FOR registro IN
		EXECUTE 'SELECT DISTINCT(tp.abreviatura_str) as abrev FROM cbparceladespesa pd
		INNER JOIN cbdespesa d ON (d.id_cbdespesa_int = pd.id_cbdespesa_int) 
		INNER JOIN cbvalortipodespesa vtp ON (vtp.id_cbvalortipodespesa_int = d.id_cbvalortipodespesa_int) 
		INNER JOIN cbtipodespesa tp ON (tp.id_cbtipodespesa_int = vtp.id_cbtipodespesa_int) 
		WHERE pd.id_cbparcela_int = ' || id_parcela::text || ' 
		AND d.situacao_str <> ' || '''C''' || ' ORDER BY tp.abreviatura_str'
		LOOP

	  abreviaturas_concat := abreviaturas_concat || registro.abrev || ',';

	END LOOP;

	FOR registro IN
		EXECUTE 'SELECT COUNT(*) as conta FROM cbnotifmarcaparcela WHERE id_cbparcela_int = ' 
		|| id_parcela::text ||  ' LIMIT 1' 
		LOOP

		IF registro.conta <> 0 THEN
			abreviaturas_concat := abreviaturas_concat || 'M' || ',';
		END IF;
	END LOOP;

	IF LENGTH(abreviaturas_concat) > 0 THEN
		abreviaturas_concat := SUBSTR(abreviaturas_concat, 1, LENGTH(abreviaturas_concat) -1);
	END IF;

	RETURN  abreviaturas_concat;
END;
$$;

--
-- TOC entry 1980 (class 1255 OID 27262)
-- Name: fstruncsenull(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fstruncsenull(texto text) RETURNS text
    LANGUAGE plpgsql
    AS $$
BEGIN

	RETURN  COALESCE(texto, '');
END;
$$;

--
-- TOC entry 1981 (class 1255 OID 27270)
-- Name: ft_cbblacklistcliente_replicaregistro(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ft_cbblacklistcliente_replicaregistro() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
declare
	comando		TEXT;
	registro	RECORD;	
	registro_2	RECORD;
	strSQL		TEXT;
	idBlackListCli	BIGINT;
	bExisteTabela   Boolean;
	createtable     TEXT;
	cmd_insert      TEXT;
	cont            INT;
	createfunction  TEXT;
	auxfunction     TEXT;
	sContato        TEXT;
	createtrigger	TEXT;
	auxtrigger	TEXT;
	cmd_update      TEXT;
	ret		TEXT;
begin
	if new.transmite_bit = '0' then
		select contato_str into sContato from cbblacklist  where id_cbblacklist_int = new.id_cbblacklist_int;
		comando = 'insert into cbblacklistcliente (id_cbblacklist_int, id_gecliente_int, data_inclusao_dat, data_exclusao_dat, data_verificacao_dat, transmite_bit) values ((select id_cbblacklist_int from cbblacklist where contato_str = ''''' || sContato || '''''),' || new.id_gecliente_int || ',''''' || coalesce(new.data_inclusao_dat,'1900-01-01') || ''''',''''' || coalesce(new.data_exclusao_dat,'1900-01-01') || ''''',''''' || coalesce(new.data_verificacao_dat,'1900-01-01') || ''''', ''''1'''')';
--raise notice '%', comando;
		cmd_update = 'update cbblacklistcliente set data_inclusao_dat = ''''' || coalesce(new.data_inclusao_dat,'1900-01-01') || ''''', data_exclusao_dat = ''''' || coalesce(new.data_exclusao_dat,'1900-01-01') || ''''', data_verificacao_dat = ''''' || coalesce(new.data_verificacao_dat,'1900-01-01') || ''''', transmite_bit = ''''1'''' where id_cbblacklist_int = (select id_cbblacklist_int from cbblacklist where contato_str = ''''' || sContato || ''''') and id_gecliente_int = ' || new.id_gecliente_int || ' ';
		createtable = 
			'create table cbblacklistcliente (
				id_cbblacklistcliente_int BIGSERIAL PRIMARY KEY,
				id_cbblacklist_int bigint NOT NULL REFERENCES cbblacklist (id_cbblacklist_int),
				id_gecliente_int bigint NOT NULL REFERENCES gecliente (id_gecliente_int),
				data_inclusao_dat timestamp,
				data_exclusao_dat timestamp,
				situacao_str char(1) NOT NULL CONSTRAINT c_validasituacao CHECK (situacao_str in (''''I'''',''''E'''')),
				data_verificacao_dat timestamp,
				transmite_bit bit(1) default (0)::bit(1),
				data_bloqueio_dat date,
				CONSTRAINT c_possuidata CHECK (data_inclusao_dat notnull or data_exclusao_dat notnull)
			);
			alter table cbblacklistcliente owner to postgres;';

		createfunction = '';
		auxfunction = '';
		SELECT replace(pg_get_functiondef('ft_preenchesituacao'::regproc),'''','''''') into auxfunction;
		auxfunction = auxfunction || ';';
		createfunction = createfunction || ' ' || auxfunction;
		auxfunction = '';
		SELECT replace(pg_get_functiondef('ft_cbblacklistcliente_replicaregistro'::regproc),'''','''''') into auxfunction;
		auxfunction = auxfunction || ';';
		createfunction = createfunction ||  auxfunction;

		
		createtrigger = '';
		auxtrigger = '';
		SELECT pg_get_triggerdef((select oid from pg_catalog.pg_trigger where tgname = 't_preenchesituacao')) into auxtrigger;
		auxtrigger = auxtrigger || ';';
		createtrigger = createtrigger || ' ' || auxtrigger;
		auxtrigger = '';
		SELECT pg_get_triggerdef((select oid from pg_catalog.pg_trigger where tgname = 't_cbblacklistcliente_replicaregistro')) into auxtrigger;
		auxtrigger = auxtrigger || ';';
		createtrigger = createtrigger || ' ' || auxtrigger;

		for registro in execute 'select distinct sp.ip_str, sp.senha_str, sp.banco_str, sp.porta_str, sp.usuario_str
					from geparametroservidor sp
					join geclienteservidor cs on cs.id_geparametroservidor_int = sp.id_geparametroservidor_int
					join gecliente c on c.id_gecliente_int = cs.id_gecliente_int
					where (sp.banco_str <> current_database()
					  or sp.ip_str::text <> host(inet_server_addr())) and ativo_str = ''1'''
		loop
			--raise notice '% ---- % ', registro.banco_str || ' ' || registro.ip_str, inet_server_addr();
			bExisteTabela = false;
			select case when tablename is null then false else true end as existetabela into bExisteTabela from dblink('dbname=' || registro.banco_str || ' port=' || registro.porta_str || ' host=' || registro.ip_str || ' user =  
' || registro.usuario_str || ' password=' || registro.senha_str || '','SELECT tablename FROM pg_catalog.pg_tables WHERE schemaname = ''public'' AND tablename = ''cbblacklistcliente''') as tabela (tablename text) ;
			if bExisteTabela is null then
				EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || createfunction || '''); ';
				EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || createtable || '''); ';				
				EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || createtrigger || '''); ';												
				cont = 0;
				cmd_insert = '';
				for registro_2 in execute 'select * from cbblacklistcliente blc inner join cbblacklist bl on bl.id_cbblacklist_int = blc.id_cbblacklist_int'
				loop
					sContato = registro_2.contato_str;
					comando = 'insert into cbblacklistcliente (id_cbblacklist_int, id_gecliente_int, data_inclusao_dat, data_exclusao_dat, transmite_bit) values ((select id_cbblacklist_int from cbblacklist where contato_str = ''''' || sContato || '''''),' || registro_2.id_gecliente_int || ',''''' || coalesce(registro_2.data_inclusao_dat,'1900-01-01') || ''''',''''' || coalesce(registro_2.data_exclusao_dat,'1900-01-01') || ''''',''''1'''')';				
					cmd_insert = cmd_insert || ' ' || comando || '; ';
					cont = cont + 1;
					if cont = 100 then
						EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || cmd_insert || '''); ';
						cont = 0;
						cmd_insert = '';
					end if;
				end loop;
				if cmd_insert <> '' then
					EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || cmd_insert || '''); ';
					cont = 0;
					cmd_insert = '';
				end if;
			else
			
				idBlackListCli = null;
				select id_cbblacklistcliente_int into idBlackListCli from dblink('dbname=' || registro.banco_str || ' port=' || registro.porta_str || ' host=' || registro.ip_str || ' user=' || registro.usuario_str || ' password=' || registro.senha_str || '','select id_cbblacklistcliente_int from cbblacklistcliente where id_cbblacklist_int = (select id_cbblacklist_int from cbblacklist where contato_str = ''' || sContato || ''') and id_gecliente_int = ' || new.id_gecliente_int || '') as tabela (id_cbblacklistcliente_int bigint) ;
				if idBlackListCli isnull then
					EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || '''::text,''' || comando || '''); ';
				else
					EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || '''::text,''' || cmd_update || '''); ';				
				end if;
			end if;
		end loop;
		new.transmite_bit = '1';		
	end if;

	if (TG_OP = 'INSERT')  then
          ret = (select * from f_executablacklistcliente(sContato, new.id_gecliente_int));
        end if;  
	
	return new;	
end;
$$;

--
-- TOC entry 1982 (class 1255 OID 27276)
-- Name: ft_geqlemail_blacklist(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ft_geqlemail_blacklist() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
declare
	registro	RECORD;
	iIdBlackListCli  BIGINT;
	sSituacao	TEXT;
begin 	
	for registro in execute 'select id_gecliente_int from geqlcontrato where id_geqlcliente_int = ' || new.id_geqlcliente_int
	loop
		sSituacao = null;
		select id_cbblacklistcliente_int, situacao_str from cbblacklistcliente into iIdBlackListCli, sSituacao where id_cbblacklist_int = (select id_cbblacklist_int from cbblacklist where contato_str = new.email_str) and id_gecliente_int = registro.id_gecliente_int;
		if sSituacao notnull then
			if sSituacao = 'I' then
				new.excluido_bit = '1';
			elsif sSituacao = 'E' then
				if TG_OP = 'INSERT' then
					new.excluido_bit = '0';
				end if;
			end if;
		else
			if TG_OP = 'INSERT' then
				new.excluido_bit = '0';
			end if;
		end if;
	end loop;
	return new;
end;
$$;

--
-- TOC entry 1983 (class 1255 OID 27285)
-- Name: ft_preenchesituacao(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ft_preenchesituacao() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
begin
	if ((new.data_inclusao_dat notnull and new.data_exclusao_dat isnull) or (new.data_inclusao_dat > new.data_exclusao_dat)) then
		new.situacao_str = 'I';
	elsif ((new.data_inclusao_dat isnull and new.data_exclusao_dat notnull) or (new.data_inclusao_dat < new.data_exclusao_dat)) then
		new.situacao_str = 'E';
	end if;
	return new;
end;
$$;

--
-- TOC entry 1984 (class 1255 OID 27292)
-- Name: ft_replicaregistro(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ft_replicaregistro() RETURNS trigger
    LANGUAGE plpgsql
    AS $_$
declare
	comando		TEXT;
	registro	RECORD;	
	registro_2	RECORD;
	strSQL		TEXT;
	idBlackList	BIGINT;
	bExisteTabela   Boolean;
	createtable     TEXT;
	cmd_insert      TEXT;
	cont            INT;
	createfunction  TEXT;
	ret		TEXT;
begin
	if new.transmite_bit = '0' then
		comando = 'insert into cbblacklist (contato_str, tipo_contato_str,transmite_bit) values (''''' || new.contato_str || ''''',''''' || new.tipo_contato_str || ''''',''''1'''')';				
		createtable = 
			'CREATE TABLE cbblacklist
			(
			  id_cbblacklist_int bigserial NOT NULL,
			  contato_str character varying(256) NOT NULL,
			  tipo_contato_str character(1) NOT NULL,
			  tstamp timestamp without time zone DEFAULT now(),
			  transmite_bit bit(1) DEFAULT (0)::bit(1),
			  CONSTRAINT cbblacklist_pkey PRIMARY KEY (id_cbblacklist_int),
			  CONSTRAINT c_uniquecontato UNIQUE (contato_str),
			  CONSTRAINT c_validacontato CHECK (
			CASE tipo_contato_str
			    WHEN ''''T''''::bpchar THEN fcformatatelefone(contato_str) IS NOT NULL
			    WHEN ''''E''''::bpchar THEN f_validaemail(contato_str::text) IS TRUE
			    ELSE NULL::boolean
			END),
			  CONSTRAINT c_validatipocontato CHECK (tipo_contato_str = ANY (ARRAY[''''T''''::bpchar, ''''E''''::bpchar]))
			)
			WITH (
			  OIDS=FALSE
			);
			ALTER TABLE cbblacklist
			  OWNER TO postgres;
			';

		createfunction =
			'create or replace function f_validaemail(email text) returns bool language plpgsql volatile as $BODY$ Begin return (email ~ ''''^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$''''); end; $BODY$ cost 100; alter function f_validaemail(text) owner to postgres;';

		for registro in execute 'select distinct sp.ip_str, sp.senha_str, sp.banco_str, sp.porta_str, sp.usuario_str
					from geparametroservidor sp
					join geclienteservidor cs on cs.id_geparametroservidor_int = sp.id_geparametroservidor_int
					join gecliente c on c.id_gecliente_int = cs.id_gecliente_int
					where (sp.banco_str <> current_database()
					  or sp.ip_str::text <> host(inet_server_addr())) and ativo_str = ''1'''
		loop
		BEGIN
			--raise notice '% --- %', registro.banco_str || ' ' || registro.ip_str, inet_server_addr();
			bExisteTabela = false;
			select case when tablename is null then false else true end as existetabela  into bExisteTabela from dblink('dbname=' || registro.banco_str || ' port=' || registro.porta_str || ' host=' || registro.ip_str || ' user=' || registro.usuario_str || ' password=' || registro.senha_str || '','SELECT tablename FROM pg_catalog.pg_tables WHERE schemaname = ''public'' AND tablename = ''cbblacklist''') as tabela (tablename text) ;
			if bExisteTabela is null then
				EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || createfunction || '''); ';				
				EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || createtable || '''); ';				
				cont = 0;
				cmd_insert = '';
				for registro_2 in execute 'select * from cbblacklist'
				loop
					comando = 'insert into cbblacklist (contato_str, tipo_contato_str,transmite_bit) values (''''' || registro_2.contato_str || ''''',''''' || registro_2.tipo_contato_str || ''''',''''1'''');';
					cmd_insert = cmd_insert || ' ' || comando;
					cont = cont + 1;
					if cont = 100 then
						EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || cmd_insert || '''); ';
						cont = 0;
						cmd_insert = '';
					end if;
				end loop;
				if cmd_insert <> '' then
					EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || ''',''' || cmd_insert || '''); ';
					cont = 0;
					cmd_insert = '';
				end if;
			else
			
				idBlackList = null;
				select id_cbblacklist_int into idBlackList from dblink('dbname=' || registro.banco_str || ' port=' || registro.porta_str || ' host=' || registro.ip_str || ' user=' || registro.usuario_str || ' password=' || registro.senha_str || '','select id_cbblacklist_int from cbblacklist where contato_str = ''' || new.contato_str || '''') as tabela (id_cbblacklist_int bigint) ;
				if idBlackList isnull then
					EXECUTE 'select dblink_exec(''dbname=' || registro.banco_str ||' port=' || registro.porta_str ||' host=' || registro.ip_str ||' user=' || registro.usuario_str || ' password=' || registro.senha_str || '''::text,''' || comando || '''); ';
				end if;
			end if;
		EXCEPTION
			WHEN OTHERS THEN
		END;
		end loop;
	end if;
	  
	new.transmite_bit = '1'; 	
	return new;
end;
$_$;

--
-- TOC entry 2054 (class 1255 OID 66746697)
-- Name: ft_valida_bloqueado_bit(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ft_valida_bloqueado_bit() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    IF TG_OP = 'INSERT' THEN
        IF NEW.bloqueado_bit = b'0' THEN
            NEW.excluido_bit := b'0'; 
        ELSIF NEW.bloqueado_bit = b'1' THEN
            NEW.excluido_bit := b'1';
        END IF;
    
    ELSIF TG_OP = 'UPDATE' THEN
        IF NEW.bloqueado_bit = b'0' AND OLD.bloqueado_bit = b'1' THEN
            NEW.excluido_bit := NEW.bloqueado_bit;
            RAISE NOTICE 'Bloqueio Removido';
        ELSIF NEW.excluido_bit = b'1' THEN
            NEW.bloqueado_bit := b'1';
            RAISE NOTICE 'Passou no segundo';
        ELSIF NEW.bloqueado_bit = b'1' THEN
            NEW.excluido_bit := b'1';
            RAISE NOTICE 'Passou no terceiro';
        END IF;
    END IF;

    RETURN NEW;
END;
$$;

--
-- TOC entry 1985 (class 1255 OID 27300)
-- Name: ftatualizabi(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftatualizabi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE	
	iid_cliente		bigint;
	sdesc_regua		varchar;
	sdesc_sit_parcela	int2;
	ddt_venc_parcela	date;
	inum_parcela		int4;
	iqtde_parcelas		int4;
	nvlr_sld_dev		float8;
	nvlr_principal		float8;
	nvlr_tot_res		float8;

	sitold			varchar(1);
	sitnew			varchar(1);
	ifx_principal 		varchar(60);
	ifx_atraso 		varchar(60);
	
BEGIN
	sitold := '';
	sitnew := '';

	SELECT 
		c.id_gecliente_int,
		p.id_esregua_int::varchar,
		p.situacao_int,
		p.data_vencimento_dat,
		p.parcela_int,
		p.valor_principal_num, 

		CASE WHEN c.id_gecliente_int = 44 THEN
			CASE 
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 0 AND 30 THEN 'a) 0 - 30'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 31 AND 60 THEN 'b) 31 - 60'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 61 AND 90 THEN 'c) 61 - 90'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 91 AND 120 THEN 'd) 91 - 120'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 121 AND 150 THEN 'e) 121 - 150'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 151 AND 180 THEN 'f) 151 - 180'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 181 AND 360 THEN 'g) 181 - 360'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 360 AND 9999999 THEN 'h) 360 - 9999999'  
			ELSE 'i) Sem faixa' END 
		ELSE '' END AS faixa_atraso, 

		CASE WHEN c.id_gecliente_int = 44 THEN 
			CASE 
				WHEN p.valor_principal_num BETWEEN 0.00 AND 250.99 THEN 'a) 0.00 - 250.99'
				WHEN p.valor_principal_num BETWEEN 251.00 AND 500 THEN 'b) 251.00 - 500.00'
				WHEN p.valor_principal_num BETWEEN 500.01 AND 1000 THEN 'c) 500.01 - 1000.00'
				WHEN p.valor_principal_num BETWEEN 1000.01 AND 1500 THEN 'd) 1000.01 - 1500.00'
				WHEN p.valor_principal_num BETWEEN 1500.01 AND 2000 THEN 'e) 1500.01 - 2000.00'
				WHEN p.valor_principal_num BETWEEN 2000.01 AND 5000 THEN 'f) 2000.01 - 5000.00'
				WHEN p.valor_principal_num BETWEEN 5000.01 AND 10000 THEN 'g) 5000.01 - 10000.00'
				WHEN p.valor_principal_num BETWEEN 10000.01 AND 9999999.99 THEN 'h) 10000.01 - 9999999.99'
			ELSE 'i) Sem faixa' END
		ELSE '' END as faixa_principal
	INTO
		iid_cliente,
		sdesc_regua,
		sdesc_sit_parcela,
		ddt_venc_parcela,
		inum_parcela,
		nvlr_principal, 
		ifx_atraso,
		ifx_principal
	FROM cbparcela p
	INNER JOIN cbcontratocredibel c on p.id_cbcontrato_int = c.id_cbcontrato_int
		WHERE p.id_cbcontrato_int = NEW.id_cbcontrato_int
			AND p.situacao_int in (0,1,2,3) AND p.parcela_int < 500
				ORDER BY p.data_vencimento_dat LIMIT 1;
				
	IF (inum_parcela is null) THEN

		SELECT	
			c.id_gecliente_int,
			p.id_esregua_int::varchar,
			p.situacao_int,
			p.data_vencimento_dat,
			p.parcela_int,
			p.valor_principal_num,
			CASE WHEN c.id_gecliente_int = 44 THEN
			CASE 
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 0 AND 30 THEN 'a) 0 - 30'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 31 AND 60 THEN 'b) 31 - 60'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 61 AND 90 THEN 'c) 61 - 90'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 91 AND 120 THEN 'd) 91 - 120'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 121 AND 150 THEN 'e) 121 - 150'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 151 AND 180 THEN 'f) 151 - 180'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 181 AND 360 THEN 'g) 181 - 360'
				WHEN (CURRENT_DATE - p.data_vencimento_dat) BETWEEN 360 AND 9999999 THEN 'h) 360 - 9999999'  
			ELSE 'i) Sem faixa' END 
		ELSE '' END AS faixa_atraso, 

		CASE WHEN c.id_gecliente_int = 44 THEN 
			CASE 
				WHEN p.valor_principal_num BETWEEN 0.00 AND 250.99 THEN 'a) 0.00 - 250.99'
				WHEN p.valor_principal_num BETWEEN 251.00 AND 500 THEN 'b) 251.00 - 500.00'
				WHEN p.valor_principal_num BETWEEN 500.01 AND 1000 THEN 'c) 500.01 - 1000.00'
				WHEN p.valor_principal_num BETWEEN 1000.01 AND 1500 THEN 'd) 1000.01 - 1500.00'
				WHEN p.valor_principal_num BETWEEN 1500.01 AND 2000 THEN 'e) 1500.01 - 2000.00'
				WHEN p.valor_principal_num BETWEEN 2000.01 AND 5000 THEN 'f) 2000.01 - 5000.00'
				WHEN p.valor_principal_num BETWEEN 5000.01 AND 10000 THEN 'g) 5000.01 - 10000.00'
				WHEN p.valor_principal_num BETWEEN 10000.01 AND 9999999.99 THEN 'h) 10000.01 - 9999999.99'
			ELSE 'i) Sem faixa' END
		ELSE '' END as faixa_principal
		INTO	
			iid_cliente,
			sdesc_regua,
			sdesc_sit_parcela,
			ddt_venc_parcela,
			inum_parcela,
			nvlr_principal,
			ifx_atraso,
			ifx_principal
		FROM cbparcela p
		INNER JOIN cbcontratocredibel c on p.id_cbcontrato_int = c.id_cbcontrato_int
			WHERE p.id_cbcontrato_int = NEW.id_cbcontrato_int 
				AND p.parcela_int < 500
					ORDER BY p.data_vencimento_dat DESC LIMIT 1;

		SELECT
			COALESCE(SUM(p.valor_principal_num),0),
			COALESCE(SUM(CASE WHEN p.tipo_str = '1' THEN 0 ELSE p.valor_principal_num END),0),
			COUNT(1)
		INTO	
			nvlr_sld_dev,
			nvlr_tot_res,
			iqtde_parcelas
		FROM cbparcela p
		WHERE p.id_cbcontrato_int = NEW.id_cbcontrato_int 
			AND p.parcela_int < 500;
		

	ELSE
		
		SELECT
			COALESCE(SUM(p.valor_principal_num),0),
			COALESCE(SUM(CASE WHEN p.tipo_str = '1' THEN 0 ELSE p.valor_principal_num END),0),
			COUNT(1)
		INTO	
			nvlr_sld_dev,
			nvlr_tot_res,
			iqtde_parcelas
		FROM cbparcela p
		WHERE p.id_cbcontrato_int = NEW.id_cbcontrato_int
			AND p.situacao_int in (0,1,2,3,7)  
			AND p.parcela_int < 500;

	END IF;

	UPDATE cbcontratocredibel SET 
		dsc_regua = sdesc_regua,
		dsc_sit_parcela = sdesc_sit_parcela,
		dt_venc_parc = ddt_venc_parcela,
		num_parcela = inum_parcela,
		vlr_sld_dev = nvlr_sld_dev,
		vlr_principal = nvlr_principal,
		vlr_tot_res = nvlr_tot_res,
		qtde_parcelas = iqtde_parcelas,
		dsc_fx_atraso = ifx_atraso,
		dsc_fx_principal = ifx_principal
	WHERE
		id_cbcontrato_int = NEW.id_cbcontrato_int;

	RETURN NEW;
	
END;
$$;

--
-- TOC entry 1986 (class 1255 OID 27309)
-- Name: ftatualizacbitembordero(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftatualizacbitembordero() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
               
BEGIN
                IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN
			IF new.situacao_str = 'E' THEN
				EXECUTE 'update cbitembordero set timestamp = now() where id_cbitembordero_int = ' || new.id_cbitembordero_int;                
			END IF;
                END IF;
                
                RETURN NEW;
                
END;
$$;

--
-- TOC entry 1987 (class 1255 OID 27317)
-- Name: ftatualizatsbi(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftatualizatsbi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
               
BEGIN
	IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN
		EXECUTE 'update cbcontrato set tstampbi = now() where id_cbcontrato_int = ' || new.id_cbcontrato_int;                
	END IF;
                
        RETURN NEW;
                
END;
$$;

--
-- TOC entry 1988 (class 1255 OID 27325)
-- Name: ftipopagamento2(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftipopagamento2(id_item bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
   retorno text;
   vencimento date;
   
Begin

    /*
    retorno := (select case 
			when max(r.codigo_int) = 2401 then 'Refin'
			when max(r.codigo_int) = 2402 then 'Quitaï¿½ï¿½o'
			when max(r.codigo_int) = 2408 then 'Complemento Entrega'
			when max(p.parcela_int) = max(c.numero_total_parcelas_int) then 'Quitaï¿½ï¿½o'
			when max(p.data_vencimento_dat) is null then ''
			when (max(pg.data_pagamento_dat)-max(p.data_vencimento_dat)) < 30 then 'Atualizaï¿½ï¿½o'
			else 'Parcial'
		       end
		    from cbpagamento pg 
		    inner join cbcontratoitau c using(id_cbcontrato_int) 
		    inner join cbparcelapagamento ppg using(id_cbpagamento_int)
		    inner join cbparcela p using(id_cbparcela_int) 
		    inner join esregua r using(id_esregua_int)
		    where pg.id_cbpagamento_int = id_pagamento
		);
		
    */

    /*-------------------------------------------------------------------------------
	gbueno - 28/08/2012 - Triare: 224350 / OS: 23909 - Solic: Patricia Lopes
	adicionada a rï¿½gua 2406 como quitaï¿½ï¿½o.
    -------------------------------------------------------------------------------*/

    retorno := (select case 
			when max(r.codigo_int) = 2401 then 'Refin'
			when max(r.codigo_int) = 2402 then 'Quitaï¿½ï¿½o'
			when max(r.codigo_int) = 2406 then 'Quitaï¿½ï¿½o'
			when max(r.codigo_int) = 2408 then 'Complemento Entrega'
			when max(p.parcela_int) = max(c.numero_total_parcelas_int) then 'Quitaï¿½ï¿½o'
			when max(p.data_vencimento_dat) is null then ''
			when (max(i.vencimento_dat)-max(p.data_vencimento_dat)) < 30 then 'Atualizaï¿½ï¿½o'
			else 'Parcial'
		       end
		    from cbitembordero i
		    inner join cbcontratoitau c using(id_cbcontrato_int) 
		    inner join cbparcelaitembordero pi using(id_cbitembordero_int)
		    inner join cbparcela p using(id_cbparcela_int) 
		    inner join esregua r using(id_esregua_int)
		    where i.id_cbitembordero_int = id_item
		);
    
return retorno;
end;
$$;

--
-- TOC entry 1989 (class 1255 OID 27326)
-- Name: ftnnpjur(bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftnnpjur(id_tiponegocio bigint, id_contrato bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
  registro              record;  
  decricaonpjur         text;

BEGIN	
        FOR registro IN EXECUTE 'select coalesce(descricao_npjur_str,'''') as descricao_npjur_str from cbtiponegocio where id_cbtiponegocio_int = ' || id_tiponegocio
        LOOP
		decricaonpjur = registro.descricao_npjur_str;
        END LOOP;
                      
	RETURN  decricaonpjur;
END;
$$;

--
-- TOC entry 1990 (class 1255 OID 27334)
-- Name: ftrferiado(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrferiado() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE 
	registro RECORD;
	id_antigo       bigint;
	BEGIN

/* 
	IF TG_OP = 'INSERT' and (current_timestamp >= '2014-7-8 16:00:00' and current_timestamp <= '2014-7-9 23:59:59') THEN
		
		IF SUBSTR(NEW.contato_str,1,2) in ('11','12','13','14','15','16','17','18','19')  THEN

			
			NEW.excluido_bit = '1';
			
			insert into geqlcontato_old(id_geqlcontato_int,contato_str)
			values ( NEW.id_geqlcontato_int,NEW.contato_str );
			
			
		END IF;
		
	END IF;
*/
	RETURN NEW;
 END;
 $$;

--
-- TOC entry 1991 (class 1255 OID 27342)
-- Name: ftrinserecbcampanhateste(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrinserecbcampanhateste() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
 DECLARE c_tabelafilha	character varying;
	 i_idcbcampanhateste	bigint;
 BEGIN

	SELECT	tabela_filha_str
	INTO	c_tabelafilha
	FROM	gecliente
	WHERE	id_gecliente_int = NEW.id_gecliente_int;
	
	IF NOT EXISTS( 	SELECT id_gecampotabela_int
			FROM	gecampotabela
			WHERE	UPPER(tabela_str) = UPPER(c_tabelafilha) AND
				UPPER(campo_str) LIKE '%DATA_PROTESTO_DAT%') THEN
		INSERT
		INTO	gecampotabela ( tabela_str, campo_str, tstamp, tabela_desc_str, campo_desc_str, visivel_str )
		SELECT	c_tabelafilha,
			'data_protesto_dat',
			CURRENT_TIMESTAMP,
			'Contrato',
			'Data de Protesto',
			'S';
	END IF;

	SELECT	nextval('cbcampanhateste_seq')
	INTO	i_idcbcampanhateste;
	
	INSERT
	INTO	cbcampanhateste ( id_cbcampanhateste_int, id_cbcampanha_int, id_gecampotabela_int, operador_str, valor_txt, descricao_teste_str, id_gecliente_int, id_geusuario_int, tstamp )
	SELECT	i_idcbcampanhateste,
		NEW.id_cbcampanha_int,
		ct.id_gecampotabela_int,
		'IS NOT',
		'NULL',
		'CONTRATO PROTESTADO!!!',
		NEW.id_gecliente_int,
		NEW.id_geusuario_int,
		CURRENT_TIMESTAMP
	FROM	gecampotabela ct
	WHERE	UPPER(tabela_str) = UPPER(c_tabelafilha) AND
		UPPER(campo_str) LIKE '%DATA_PROTESTO_DAT%'
	LIMIT	1;

	INSERT
	INTO	cbcampanhatesteautorizado
	SELECT	ct.id_cbcampanhateste_int,
		t.id_geusuario_int,
		t.ativo_bit,
		t.tstamp
	FROM	cbcampanhateste ct
		INNER JOIN cbcampanha c ON
			ct.id_cbcampanha_int = c.id_cbcampanha_int
		INNER JOIN (	SELECT	DISTINCT
					c.id_gecliente_int, 
					ccta.id_geusuario_int, 
					ccta.ativo_bit, 
					current_timestamp as tstamp
				FROM	cbcampanhatesteautorizado ccta
					INNER JOIN cbcampanhateste cct ON
						ccta.id_cbcampanhateste_int = cct.id_cbcampanhateste_int
					INNER JOIN cbcampanha c ON
						cct.id_cbcampanha_int = c.id_cbcampanha_int
				WHERE	ccta.id_cbcampanhateste_int = (	SELECT	MAX(scct.id_cbcampanhateste_int)
									FROM	cbcampanhateste scct
										INNER JOIN cbcampanhatesteautorizado sccta ON
											scct.id_cbcampanhateste_int = sccta.id_cbcampanhateste_int 
										INNER JOIN cbcampanha sc ON
											scct.id_cbcampanha_int = sc.id_cbcampanha_int
									WHERE	sc.id_gecliente_int = c.id_gecliente_int )) t ON
			c.id_gecliente_int = t.id_gecliente_int
	WHERE	ct.id_cbcampanhateste_int = i_idcbcampanhateste
	ORDER BY 1,2,3,4;

	RETURN NEW;
 END;
 $$;

--
-- TOC entry 1992 (class 1255 OID 27345)
-- Name: ftrtelblacklist(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrtelblacklist() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE 
	registro RECORD;
	id_antigo       bigint;
	BEGIN
	

	IF TG_OP = 'INSERT'  THEN
		
		IF NEW.contato_str = '2126786025'  THEN

			EXECUTE ('delete from geqlcontato where id_geqlcontato_int = ' || NEW.id_geqlcontato_int || ';');
			
		END IF;
		
	END IF;

	RETURN NEW;
 END;
 $$;

--
-- TOC entry 1993 (class 1255 OID 27353)
-- Name: ftrtelblacklist_fixo(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrtelblacklist_fixo() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE 
	registro RECORD;
	id_antigo       bigint;
	BEGIN
	

	IF TG_OP = 'INSERT'  THEN
		
		IF NEW.contato_str = '2126786025' OR NEW.contato_str LIKE '45352199%' THEN

			EXECUTE ('delete from geqlcontato where id_geqlcontato_int = ' || NEW.id_geqlcontato_int || ';');
			
		END IF;
		
	END IF;

	RETURN NEW;
 END;
 $$;

--
-- TOC entry 1994 (class 1255 OID 27361)
-- Name: ftrtipocelularhot(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrtipocelularhot() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE 
	registro RECORD;
	id_antigo       bigint;
	BEGIN
 
	IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN
		
		IF NEW.id_geqltipocontato_int in (8) AND NEW.classificacao_str = '1 - Excelente' THEN
			NEW.id_geqltipocontato_int = 46;
		ELSE
			IF NEW.id_geqltipocontato_int = 46 AND NEW.classificacao_str = '3 - Ruim' THEN
				NEW.id_geqltipocontato_int = 8;
				
			END IF;
		END IF;

		RETURN NEW;
		
	END IF;
 END;
 $$;

--
-- TOC entry 1995 (class 1255 OID 27367)
-- Name: ftrvalidaemailqualidade(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrvalidaemailqualidade() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE 
	registro   RECORD;
	registro2  RECORD;
	contador   BIGINT;
	valido     TEXT;
	
	BEGIN

	NEW.email_str = REPLACE(NEW.email_str, '''', '');
 
	-- apenas para inserir ou alterar contatos:
	IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN 
		--Verifica se foi colocado mais de 1 e-mail no campo de e-mail
		contador = 1;
		FOR registro IN EXECUTE 'SELECT DISTINCT LOWER(regexp_split_to_table(''' || NEW.email_str || ''', E'';'')) AS email_str'
		LOOP		        
                        IF contador = 1 THEN
                                NEW.email_str = registro.email_str;
                                NEW.email_str = LOWER(NEW.email_str);
				--Retira caracteres especiais				
				NEW.email_str = REPLACE(NEW.email_str, '\n', ''); 
				NEW.email_str = REPLACE(NEW.email_str, '	', '');
				NEW.email_str = TRIM(NEW.email_str);
				NEW.email_str = REPLACE(NEW.email_str, Chr(32), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(33), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(34), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(35), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(36), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(37), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(38), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(39), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(40), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(41), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(42), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(43), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(44), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(58), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(59), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(60), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(61), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(62), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(63), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(91), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(92), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(93), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(94), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(47), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(96), '');
				NEW.email_str = REPLACE(NEW.email_str, Chr(123), '');
				--NEW.email_str = REPLACE(NEW.email_str, '-', '_');

				--valida o email
				--T - True
				--F - False
				RAISE NOTICE '%', 'SELECT fcvalidaemail(''' || NEW.email_str || ''') as retorno';
				FOR registro2 IN EXECUTE 'SELECT fcvalidaemail(''' || NEW.email_str || ''') as retorno'
				LOOP
					valido = registro2.retorno;
				END LOOP;
				
				RAISE NOTICE '%', valido;
				IF valido = 'F' THEN
				        IF TG_OP = 'UPDATE' THEN
				                RAISE NOTICE '%', 'EXCLUIDO INVALIDO';
						NEW.excluido_bit = '1'::bit;
				        ELSE
						RETURN OLD;
					END IF;
				END IF;

				--Verifica se jï¿½ existe na base o e-mail para o mesmo cliente
				FOR registro2 IN EXECUTE 'SELECT count(*) contador 
				                            FROM geqlemail 
				                           WHERE id_geqlcliente_int = ' || NEW.id_geqlcliente_int || ' 
				                             AND email_str = ''' || NEW.email_str || '''
				                             AND id_geqlemail_int <> ' || NEW.id_geqlemail_int || '
							     AND excluido_bit = ''0''::bit'
			        LOOP
					IF registro2.contador > 0 THEN
					        IF TG_OP = 'INSERT' THEN
							RETURN OLD;
						ELSE
							RAISE NOTICE '%', 'EXCLUIDO REPETIDO';
							NEW.excluido_bit = '1'::bit;
						END IF;
					END IF;
			        END LOOP;
			END IF;

			--Se tiver mais de 1 e-mail salva outro geqlemail
			IF contador > 1 Then
				   INSERT INTO geqlemail(id_geqlcliente_int, 
				                         id_geqltipoemail_int, 
				                         email_str, 
                                                         classificacao_str, 
                                                         tabela_origem_str, 
                                                         id_geusuario_int, 
                                                         tstamp, 
                                                         observacao_str, 
                                                         nome_contato_str, 
                                                         id_geusuario_inclusao_int, 
                                                         excluido_bit, 
                                                         id_geqltratamentoemail_int, 
                                                         id_geqltratamento_int)
                                                 VALUES (NEW.id_geqlcliente_int, 
				                         NEW.id_geqltipoemail_int, 
				                         registro.email_str, 
                                                         NEW.classificacao_str, 
                                                         NEW.tabela_origem_str, 
                                                         NEW.id_geusuario_int, 
                                                         NEW.tstamp, 
                                                         NEW.observacao_str, 
                                                         NEW.nome_contato_str, 
                                                         NEW.id_geusuario_inclusao_int, 
                                                         NEW.excluido_bit, 
                                                         NEW.id_geqltratamentoemail_int, 
                                                         NEW.id_geqltratamento_int);

			END IF;
			contador = contador + 1;			
		END LOOP;
		RETURN NEW;
	END IF;
 END;
 $$;

--
-- TOC entry 1996 (class 1255 OID 27373)
-- Name: ftrvalidatelefonequalidade(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrvalidatelefonequalidade() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	DECLARE contato_formatado 	character varying;
		tipo_telefone 		character varying;
		id_tipocel		bigint;
		id_tipores		bigint;
		id_tipocom		bigint;
		id_tipocelhot		bigint;
		id_tiporeshot		bigint;
		id_tipocomhot		bigint;
		id_tipobco		bigint;
		tipo_pessoa		character varying;
		id_antigo       	bigint;
		id_tipoter		bigint;
	BEGIN
 
	-- apenas para inserir ou alterar contatos:
	IF TG_OP = 'INSERT' OR TG_OP = 'UPDATE' THEN 
		-- valida o contato e coloca o resultado na variï¿½vel contato_formatado;	
		SELECT  fcformatatelefone(NEW.contato_str) , fctipofone(NEW.contato_str)
		INTO    contato_formatado, tipo_telefone;
		--raise notice 'contato_formatado: %, tipo_telefone: %', contato_formatado, tipo_telefone;
		
		-- grava valores para variaveis de validaï¿½ï¿½o do tipo do telefone
		id_tipoter := COALESCE((SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'TERC' ORDER BY id_geqltipocontato_int ASC LIMIT 1), 0);
		id_tipocel := (SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'CEL' ORDER BY id_geqltipocontato_int ASC LIMIT 1);
		id_tipocelhot := COALESCE((SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'CEL_HOT' ORDER BY id_geqltipocontato_int ASC LIMIT 1),id_tipocel);
		id_tipores := (SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'RES' ORDER BY id_geqltipocontato_int ASC LIMIT 1);
		id_tiporeshot := COALESCE((SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'RES_HOT' ORDER BY id_geqltipocontato_int ASC LIMIT 1),id_tipores);
		id_tipobco := COALESCE((SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'BCO' ORDER BY id_geqltipocontato_int ASC LIMIT 1),id_tipores);
		id_tipocom := (SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'COM' ORDER BY id_geqltipocontato_int ASC LIMIT 1);
		id_tipocomhot := COALESCE((SELECT id_geqltipocontato_int FROM geqltipocontato WHERE codigo_str = 'COM_HOT' ORDER BY id_geqltipocontato_int ASC LIMIT 1),id_tipocom);
		tipo_pessoa := (SELECT CASE WHEN upper(codigo_str) like '%AVA%' THEN 'AVALISTA' ELSE 'DEVEDOR' END FROM geqltipocontato WHERE id_geqltipocontato_int = new.id_geqltipocontato_int);

		--raise notice '%, %, %',id_tipocom, id_tipocomhot, tipo_telefone;

		IF tipo_telefone = 'CEL' AND NEW.id_geqltipocontato_int <> id_tipoter THEN
		-- se telefone ï¿½ do tipo celular, sï¿½ permite classificar como CEL

			if NEW.classificacao_str = '1 - Excelente' then
			
				NEW.id_geqltipocontato_int := id_tipocelhot;
				
			else

				NEW.id_geqltipocontato_int := id_tipocel;
				
			END IF;
		--raise notice 'PRIMEIRO IFFFFFFFFFFFFFFFF ';
		
		ELSIF NEW.id_geqltipocontato_int <> id_tipoter THEN

			--raise notice 'ENTROU: %,%, %, %, %', NEW.id_geqltipocontato_int, id_tipocom, NEW.classificacao_str, id_tipocomhot, id_tipobco;

			IF NEW.id_geqltipocontato_int <> id_tipocom AND NEW.id_geqltipocontato_int <> id_tipocomhot AND  NEW.id_geqltipocontato_int <> id_tipobco THEN
			--se telefone ï¿½ do tipo fixo, entï¿½o testa se o tipo selecionado ï¿½ diferente de COM E BCO e sï¿½ permite RES, se for comercial ou BCO, mantï¿½m.

				if NEW.classificacao_str = '1 - Excelente' then
			
					NEW.id_geqltipocontato_int := id_tiporeshot;
					
				else

					NEW.id_geqltipocontato_int := id_tipores;
					
				END IF;
				
			ELSIF NEW.id_geqltipocontato_int = id_tipobco THEN
			
				NEW.id_geqltipocontato_int := id_tipobco;

			ELSE

				if NEW.classificacao_str = '1 - Excelente' then
			
					NEW.id_geqltipocontato_int := id_tipocomhot;
					
				else

					NEW.id_geqltipocontato_int := id_tipocom;
					
				END IF;
-- 				

			END IF;

		END IF;

		NEW.tipo_pessoa_str := tipo_pessoa;

		-- verifica se o contato jï¿½ existe para o cliente e se encontrar, atribui valor para a variï¿½vel id_antigo ( null = contato ainda nao existe para o cliente );
		SELECT  id_geqlcontato_int
		Into id_antigo
		From geqlcontato
		WHERE   id_geqlcliente_int = NEW.id_geqlcliente_int AND
		contato_str = contato_formatado AND
		coalesce(excluido_bit, '0'::bit) = '0'::bit and
		coalesce(bloqueado_bit, '0'::bit) = '0'::bit AND
		LENGTH(contato_str) >= 10;
		--raise notice 'contato jï¿½ existe: %, %, TG_OP: %', id_antigo, new.excluido_bit, TG_OP;

		If (Not id_antigo Is Null) AND (COALESCE(new.excluido_bit,'0'::bit) = '0'::bit) AND (COALESCE(new.bloqueado_bit,'0'::bit) = '0'::bit)  Then 
			IF TG_OP = 'INSERT' THEN
			-- para insert nï¿½o executa, pois o telefone jï¿½ existe
			--	raise notice 'RETORNOU O OLDDDDDDDDDDDDDDDDDD %', OLD;
				RETURN OLD;
			ELSE	
			-- se o telefone existe, e o update nï¿½o ï¿½ na flag de exclusï¿½o, executa, mas mantï¿½m o telefone antigo, para nï¿½o ficar duplicado. Vai executar pois teve reclaï¿½ï¿½o da operaï¿½ï¿½o, que precisa classificar os telefones de qualquer forma, nos casos que jï¿½ existem contatos duplicados.
			-- se telefone for cel sï¿½ permite gravar id do tipo cel, caso contrario sï¿½ permite gravar res ou com
				NEW.contato_str := OLD.contato_str;
				NEW.excluido_bit := OLD.excluido_bit;
				NEW.bloqueado_bit := OLD.bloqueado_bit;
			--	raise notice 'RETORNOU O NEW %', new;
				RETURN new;
			END IF;
		Else 
			if COALESCE(new.excluido_bit,'0'::bit) = '1'::bit OR COALESCE(new.bloqueado_bit,'0'::bit) = '1'::bit then 
			-- se ï¿½ uma flag de exclusao:
				IF TG_OP = 'INSERT' THEN
				-- para insert nï¿½o executa;
					RETURN OLD;
				ELSE
				-- para update executa, para alterar a flag e marcar excluido, mas mantï¿½m o contato original;
					NEW.contato_str := OLD.contato_str;
					RETURN NEW;
				END IF;
			else
			-- se nï¿½o ï¿½ uma flag de exclusao:
				If Not contato_formatado Is Null Then
				-- para contatos que sï¿½o vï¿½lidos na funï¿½ï¿½o fcformatatelefone(NEW.contato_str), executa;
					NEW.contato_str := contato_formatado;
				--	raise notice 'RETORNOU O NEW %', NEW;
					RETURN NEW;
				ELSE
				-- para contatos que nï¿½o sï¿½o vï¿½lidos na funï¿½ï¿½o fcformatatelefone(NEW.contato_str), nï¿½o executa;
					IF TG_OP = 'INSERT' THEN
					--	raise notice 'RETORNOU O OLDDDDDDDDDDDDDDDDDD: %, TG_OP: %', NEW.contato_str, TG_OP;
						RETURN OLD;
					ELSE
						NEW.excluido_bit = 1::bit;
						NEW.bloqueado_bit = 1::bit;
						RETURN NEW;
					END IF;
				END IF;
			end if;
			
		END IF;
		
	END IF;
 END;
 $$;

--
-- TOC entry 1997 (class 1255 OID 27383)
-- Name: ftrz_geqlcontato_blacklist(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrz_geqlcontato_blacklist() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
declare
	registro	RECORD;
	iIdBlackList  BIGINT;
	sSituacao	TEXT;
	gecliente	BIGINT;	
begin 	

	for registro in execute 'select id_gecliente_int from geqlcontrato where id_geqlcliente_int = ' || new.id_geqlcliente_int
	loop

		--raise notice 'new.id_geqlcliente_int %', new.id_geqlcliente_int;

		sSituacao = null;
		select distinct on (id_cbblacklist_int) id_cbblacklist_int, situacao_str into iIdBlackList, sSituacao from cbblacklistcliente 
		where id_cbblacklist_int = (select id_cbblacklist_int from cbblacklist where contato_str = new.contato_str) and id_gecliente_int = registro.id_gecliente_int
                order by id_cbblacklist_int, data_verificacao_dat limit 1 ;
		
		--raise notice 'sSituacao %', sSituacao;
		--raise notice 'new.contato_str % ', new.contato_str;
		--raise notice 'registro.id_gecliente_int %', registro.id_gecliente_int;

		if sSituacao notnull then
			if sSituacao = 'I' then
				new.excluido_bit = '1';
				new.bloqueado_bit = '1';
			elsif sSituacao = 'E' then
				if TG_OP = 'INSERT' then
					new.excluido_bit = '0';
					new.bloqueado_bit = '0';
				end if;
			end if;
		else			
			if TG_OP = 'INSERT' then
				new.excluido_bit = '0';
				new.bloqueado_bit = '0';
			end if;
		end if;
	end loop;
	return new;

end;
$$;

--
-- TOC entry 1998 (class 1255 OID 27386)
-- Name: ftrz_geqlcontato_improdutivo(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.ftrz_geqlcontato_improdutivo() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
					 declare

					 begin 	
							if new.Classificacao_str <> '3 - Ruim' then
								
								if exists (select 1 from geqlcontato_improdutivo_block where contato_str = new.contato_str) then
									--raise notice 'teste telefone improdutivo';
									new.Classificacao_str = '3 - Ruim';
									new.data_inibicao_tel_suspeito_tstamp = current_timestamp;
									new.observacao_str = 'Reclassificado devido a trigger de Telefones Improdutivos';
									new.obs_inibicao_tel_suspeito_str = 'Reclassificado devido a trigger de Telefones Improdutivos';
								end if;
							end if;
							
							return new;
						
						end;
						$$;

--
-- TOC entry 1999 (class 1255 OID 27394)
-- Name: fultimodia(date); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fultimodia(date) RETURNS date
    LANGUAGE plpgsql
    AS $_$

DECLARE
        dataoriginal alias for $1;
        datanova date;
BEGIN

	datanova := dataoriginal;
	while extract(month from dataoriginal) = extract(month from datanova) loop
		datanova := datanova + 1;
	end loop;
	
	datanova := datanova - 1;
	
        return datanova;
	
RETURN NULL;
end;
$_$;

--
-- TOC entry 12024 (class 0 OID 0)
-- Dependencies: 1999
-- Name: FUNCTION fultimodia(date); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.fultimodia(date) IS 'Retorna Ultimo dia do mï¿½s';

--
-- TOC entry 2000 (class 1255 OID 27403)
-- Name: fultimofollowup_cbcontrato_cbfollowup(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fultimofollowup_cbcontrato_cbfollowup() RETURNS trigger
    LANGUAGE plpgsql
    AS $$                                                                                                                                                                                               
DECLARE
	cursor_sql record;                                                                                                                                                                                            
	sSql	text;
BEGIN      
	FOR cursor_sql IN
		(select tabela_filha_str as tabelaFilha, atualiza_data_contato_manual_str as atualiza_manual 
		 from gecliente 
		 inner join cbsitcontato using (id_gecliente_int) 
		 where id_cbsitcontato_int = new.id_cbsitcontato_int ) LOOP

		sSql := '	UPDATE ' || cursor_sql.tabelaFilha || '  
				SET  	ultimo_id_cbsitcontato_int = ' || new.id_cbsitcontato_int || ', 
					ultima_data_contato_dat = ''' ||  to_char(new.data_dat,'YYYY-MM-DD') || '''';

		IF cursor_sql.atualiza_manual = 'S' and new.data_dat = current_date THEN
			sSql := sSql || ',
					ultimo_contato_manual_data_dat = ''' ||  to_char(new.data_dat,'YYYY-MM-DD') || ''',
					ultimo_contato_manual_id_cbsitcontato_int = ' || new.id_cbsitcontato_int;
		END IF;
					
		sSql := sSql || '	WHERE 	id_cbcontrato_int = ' || new.id_cbcontrato_int;

		EXECUTE sSql;
				
	END LOOP;
	
	RETURN NEW;
 
 end; $$;

--
-- TOC entry 2001 (class 1255 OID 27407)
-- Name: fvalidacpf_altitude(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fvalidacpf_altitude(text) RETURNS boolean
    LANGUAGE plpgsql IMMUTABLE
    AS $_$
DECLARE
 v_string text := $1;
 v_caldv1 int4;
 v_caldv2 int4;
 v_dv1 int4;
 v_dv2 int4;
 v_array1 text[] ;
 v_array2 text[] ;
 v_tst_string int4;
BEGIN
 v_string := translate(v_string, './-', '');
 IF (char_length(v_string)::int4) = 14 THEN

  SELECT INTO v_array1 '{5,4,3,2,9,8,7,6,5,4,3,2}';
  SELECT INTO v_array2 '{6,5,4,3,2,9,8,7,6,5,4,3,2}';
  v_dv1 := (substring(v_string, 13, 1))::int4;
  v_dv2 := (substring(v_string, 14, 1))::int4;
  /* COLETA DIG VER 1 CNPJ */
  v_caldv1 := 0;
  FOR va IN 1..12 LOOP
   v_caldv1 := v_caldv1 + ((SELECT substring(v_string, va, 1))::int4 * (v_array1[va]::int4));
  END LOOP;
  v_caldv1 := v_caldv1 % 11;
   IF (v_caldv1 = 0) OR (v_caldv1 = 1) THEN
    v_caldv1 := 0;
   ELSE
    v_caldv1 := 11 - v_caldv1;
   END IF;
  /* COLETA DIG VER 2 CNPJ */
  v_caldv2 := 0;
  FOR va IN 1..13 LOOP
   v_caldv2 := v_caldv2 + ((SELECT substring(v_string || v_caldv1::text, va, 1))::int4 * (v_array2[va]::int4));
  END LOOP;
  v_caldv2 := v_caldv2 % 11;
   IF (v_caldv2 = 0) OR (v_caldv2 = 1) THEN
    v_caldv2 := 0;
   ELSE
    v_caldv2 := 11 - v_caldv2;
   END IF;
  /* TESTA */
  IF (v_caldv1 = v_dv1) AND (v_caldv2 = v_dv2) THEN
   RETURN TRUE;
  ELSE
   RETURN FALSE;
  END IF;

 ELSIF (char_length(v_string)::int4) = 11 THEN

  v_dv1 := (substring(v_string, 10, 1))::int4;
  v_dv2 := (substring(v_string, 11, 1))::int4;
  v_string := substring(v_string, 1, 9);
  /* COLETA DIG VER 1 CPF */
  v_caldv1 := 0;
  FOR va IN 1..9 LOOP
   v_caldv1 := v_caldv1 + ((SELECT substring(v_string, va, 1))::int4 * (11 - va));
  END LOOP;
  v_caldv1 := v_caldv1 % 11;
  IF (v_caldv1 = 0) OR (v_caldv1 = 1) THEN
   v_caldv1 := 0;
  ELSE
   v_caldv1 := 11 - v_caldv1;
  END IF;
  /* COLETA DIG VER 2 CPF */
  v_caldv2 := 0;
  FOR va IN 1..10 LOOP
   v_caldv2 := v_caldv2 + ((SELECT substring((v_string || v_caldv1::text), va, 1))::int4 * (12 - va));
  END LOOP;
  v_caldv2 := v_caldv2 % 11;
  IF (v_caldv2 = 0) OR (v_caldv2 = 1) THEN
   v_caldv2 := 0;
  ELSE
   v_caldv2 := 11 - v_caldv2;
  END IF;
  /* TESTA */
  IF (v_caldv1 = v_dv1) AND (v_caldv2 = v_dv2) THEN
   RETURN TRUE;
  ELSE
   RETURN FALSE;
  END IF;

 END IF;

RETURN FALSE;
END;

$_$;

--
-- TOC entry 2002 (class 1255 OID 27415)
-- Name: fvw_qualidade_pagoufacil(bigint, character varying); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fvw_qualidade_pagoufacil(registro bigint, cpf character varying) RETURNS SETOF record
    LANGUAGE plpgsql
    AS $$
DECLARE
  
  sSql		text;

BEGIN
	--Contato
	IF registro = 1 then

		sSql = 'Select 
				t.contato_str, t.tipo_telefone  from (
				Select distinct on (c.contato_str) c.contato_str, 
				Case when fctipofone(c.contato_str) = ''FIXO'' then  ''1''::varchar
				else ''2''::varchar end as tipo_telefone,
				c.classificacao_str
				FROM geqlcliente cl
				INNER JOIN geqlcontato c on c.id_geqlcliente_int = cl.id_geqlcliente_int
				WHERE c.classificacao_str <> ''3 - Ruim''
				and cl.cpf_str = ''' || cpf || '''
				and c.excluido_bit = 0::bit
				)t
				order by t.classificacao_str limit 2';
	--Email
	ELSEIF registro = 2 then

		sSql = 'Select t.email_str from (
			Select distinct on (UPPER(c.email_str)) c.email_str, c.classificacao_str
				FROM geqlcliente cl
				INNER JOIN geqlemail c on c.id_geqlcliente_int = cl.id_geqlcliente_int
				WHERE c.classificacao_str <> ''3 - Ruim''
				and cl.cpf_str = ''' || cpf || '''
				and c.email_str like ''%@%''
				and substring(c.email_str, char_length(c.email_str) , 1) <> ''@''
				and substring(c.email_str, 1, 1) <> ''@''
				and c.excluido_bit = 0::bit
				) t
				
				order by t.classificacao_str limit 2';
	--Endereco
	ELSEIF registro = 3 then

		sSql = '
			Select t.endereco_str, t.complemento_str, t.bairro_str, t.cidade_str, t.estado_str, t.cep_str from (
				Select DISTINCT ON (fsonumero(Trim(c.cep_str)))
					c.endereco_str, 
					c.complemento_str, 
					c.bairro_str, 
					c.cidade_str, 
					c.estado_str, 
					fsonumero(Trim(c.cep_str))::varchar as cep_str,
					c.classificacao_str
					FROM geqlcliente cl
					INNER JOIN geqlendereco c on c.id_geqlcliente_int = cl.id_geqlcliente_int
					WHERE c.classificacao_str <> ''3 - Ruim''
					and cl.cpf_str = ''' || cpf || '''
					and c.excluido_bit = 0::bit
					and trim(fsonumero(coalesce(c.cep_str, ''''))) <> ''''
					and CHAR_LENGTH(fsonumero(Trim(c.cep_str))) = 8
					and fsonumero(Trim(c.cep_str)) <> ''00000000''
					and trim(coalesce(c.cidade_str, '''')) <> ''''
					and trim(coalesce(c.estado_str, '''')) <> ''''
					--and trim(coalesce(replace(c.bairro_str, ''.'', ''''), '''')) <> ''''
					and c.estado_str in (''PA'',
							''AM'',
							''AP'',
							''RR'',
							''AC'',
							''TO'',
							''RO'',
							''BA'',
							''SE'',
							''PE'',
							''AL'',
							''PB'',
							''RN'',
							''CE'',
							''PI'',
							''MA'',
							''DF'',
							''GO'',
							''MT'',
							''MS'',
							''SP'',
							''RJ'',
							''ES'',
							''MG'',
							''PR'',
							''SC'',
							''RS''
							)
				) t
				order by t.classificacao_str limit 2'
				;
		
	end if;

	RETURN QUERY EXECUTE sSql;

	
END;
$$;

--
-- TOC entry 2003 (class 1255 OID 27419)
-- Name: fvw_sincroniza_pagoufacil(text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.fvw_sincroniza_pagoufacil(tabelafilha text, id_gecliente text) RETURNS SETOF record
    LANGUAGE plpgsql
    AS $$
DECLARE

  sSql		text;

BEGIN

	EXECUTE 'select f_pagoufacil_sincronizacao(''' || tabelafilha || ''', ''' || id_gecliente || ''')';

	sSql = 'SELECT t.id_espagoufacil_int, t.cpf_str AS cpf_cnpj_str, t.nome_str, 
		CASE
		    WHEN length(t.cpf_str) <= 11 THEN ''F''::text
		    ELSE ''J''::text
		END AS tipo_pessoa, t.cpf_cnpj_original_str
		FROM ( SELECT DISTINCT ON (c.cpf_str) c.id_espagoufacil_int, 
			valida_cpf_cnpj(c.cpf_str::text) AS cpf_str, c.nome_str, c.cpf_str AS cpf_cnpj_original_str
		   FROM espagoufacil c
		  WHERE 
		  --COMENTAR LINHA ABAIXO E DESCOMENTAR A OUTRA CASO QUEIRA PROCESSAR APENAS CASOS QUE Nï¿½O EXISTAM NO PAGOUFACIL
		  --TRIM(COALESCE(c.situacao_str, ''''::character varying))::text <> ''P''::text
		  TRIM(COALESCE(c.situacao_str, ''''::character varying))::text = ''''::text
		  AND c.cpf_tratado_int is not null
		  AND c.id_gecliente_int = ' || id_gecliente || '
		  AND fsonumero(c.cpf_str)::bigint <> ''0'') t
		  WHERE trim(coalesce(t.cpf_str, '''')) <> '''';';

	RETURN QUERY EXECUTE sSql;

	
END;
$$;

--
-- TOC entry 2004 (class 1255 OID 27434)
-- Name: gera_bordero(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.gera_bordero() RETURNS trigger
    LANGUAGE plpgsql
    AS $$                                                                                                                                                                                                  
DECLARE
BEGIN
	IF TG_OP = 'INSERT' THEN
		new.bordero_int = (SELECT nextval('public.cbborderonum_seq'));
	END IF;
	
	return new;    
END;
$$;

--
-- TOC entry 2005 (class 1255 OID 27436)
-- Name: hoj(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.hoj() RETURNS date
    LANGUAGE sql IMMUTABLE
    AS $$

       select CURRENT_DATE;

$$;

--
-- TOC entry 2006 (class 1255 OID 27445)
-- Name: honda199(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.honda199() RETURNS integer
    LANGUAGE plpgsql
    AS $$DECLARE

BEGIN

		 update cbcontratohonda
		 	set id_cbetapa_int = (select id_cbetapa_int from cbetapa where id_gecliente_int = '3' and codigo_str = '2')
		 	where
			cbcontratohonda.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int and
			cbcontratohonda.contrato_str = eshonda199.contrato_str and
			cbtiponegocio.codigo_str = eshonda199.tipo_negocio_str;

		 delete from eshonda199
		 	where
			eshonda199.contrato_str = cbcontratohonda.contrato_str and
			cbcontratohonda.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int and
			cbtiponegocio.codigo_str = eshonda199.tipo_negocio_str;

		 update cbcontratohonda
		 	set id_cbetapa_int = (select id_cbetapa_int from cbetapa where id_gecliente_int = '3' and codigo_str = '1')
		 	where
			cbcontratohonda.id_cbetapa_int is null;

RETURN NULL;
END;
$$;

--
-- TOC entry 12025 (class 0 OID 0)
-- Dependencies: 2006
-- Name: FUNCTION honda199(); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.honda199() IS 'Funï¿½ï¿½o para atualizar contratos com a etapa 199';

--
-- TOC entry 2007 (class 1255 OID 27454)
-- Name: importa_alianca(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_alianca(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;

dt_remessa date;
aplicacao  int4;

BEGIN

--Seta data de distribuiï¿½ï¿½o
dt_remessa:= (Select data_remessa_dat From importaaliancatmp where importaaliancatmp.tipo_registro_int = '0');
aplicacao:= (Select id_geaplicacao_int From geaplicacao where codigo_str = 'CB103');

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importaaliancatmp Set id_fimoeda = 1  where importaaliancatmp.tipo_registro_int = '20';
  
	-- Seta filial da Paschoalotto
	Update importaaliancatmp Set id_gefilial =  1  where importaaliancatmp.tipo_registro_int = '20';

end if;

-- Contrato
if comando = '1' then
  --
  -- Inclusao de Contrato
  --
  Insert Into cbcontratoalianca	( 
    id_gecliente_int,
	  id_geempresa_int,
	  id_gefilial_int,
	  id_cbtiponegocio_int,
	  id_cbdistribuidorcliente_int,
	  id_fimoeda_int,

	  contrato_str,
		contrato_remessa_str,
	  nome_str,
		nome_destinatario_str,
		cpf_str,
	  endereco_str,
	  bairro_str,
	  cep_str,
	  cidade_str,
	  estado_str,
    codigo_segmento_str,
    cota_str,
    grupo_str,

		carteira_str,
		data_documento_dat, 
    numero_doc_str, 
    data_process_dat, 
    quantidade_str, 
    valor_unitario_str, 
    nome_sacado_boleto_str, 
    endereco_boleto_str, 
    endereco2_boleto_str, 

		local_pagamento_str,
		linha_1_str, 
		linha_2_str,
		linha_3_str,
		linha_4_str,
		linha_5_str,

	  data_contrato_dat,
	  data_primeira_distrib_dat,
	  data_ultima_distrib_dat,
	  id_cbsituacaocontrato_int,
	  tstamp,
    id_geusuario_int )

	Select

    cliente,
    empresa,
	  id_gefilial,
	  id_cbtiponegocio,
	  null,
	  id_fimoeda,

    contrato,
		num_contrato_str,
	  nome_consorciado_str,
		nome_destinatario_str,
		cpf_num_int,
	  endereco_str,
    bairro_str,
    cep_int,
    cidade_str,
    uf_str,
    codigo_segmento_int,
    num_cota_int,
    num_grupo_int,
		
		carteira_str,
		data_documento_dat,
		numero_documento_str,
		data_process_dat,
		qtde_str,
		vl_unitario_str,
		sacado_1_str,
		sacado_2_str,
		sacado_3_str,

		local_pagamento_str,
		linha_1_str, 
		linha_2_str,
		linha_3_str,
		linha_4_str,
		linha_5_str,

    dt_remessa,
    dt_remessa,
    dt_remessa,
    1,
	  current_timestamp,
	  usuario

    From importaaliancatmp
	  Where inclui_altera = 'I' and importaaliancatmp.tipo_registro_int = '20';

   --
	 -- Dados do 1o. avalista
	 --
	 Update cbcontratoalianca
	 	set nome_avalista1_str = importaaliancatmp.nome_fiador_str,
  		  cpf_avalista1_str = importaaliancatmp.cpf_fiador_int,
				endereco_avalista1_str = importaaliancatmp.endereco_fiador_str,
				bairro_avalista1_str = importaaliancatmp.bairro_fiador_str,
				cidade_avalista1_str = importaaliancatmp.cidade_fiador_str,
				estado_avalista1_str = importaaliancatmp.uf_fiador_str,
				cep_avalista1_str = importaaliancatmp.cep_fiador_int
	 	Where cbcontratoalianca.contrato_str = importaaliancatmp.contrato
			And importaaliancatmp.tipo_registro_int = '40'
			And importaaliancatmp.numero_fiador_int = '1';

	 --
	 -- Dados do 2o avalista
	 --
	 Update cbcontratoalianca
	 	set nome_avalista2_str = importaaliancatmp.nome_fiador_str,
  		  cpf_avalista2_str = importaaliancatmp.cpf_fiador_int,
				endereco_avalista2_str = importaaliancatmp.endereco_fiador_str,
				bairro_avalista2_str = importaaliancatmp.bairro_fiador_str,
				cidade_avalista2_str = importaaliancatmp.cidade_fiador_str,
				estado_avalista2_str = importaaliancatmp.uf_fiador_str,
				cep_avalista2_str = importaaliancatmp.cep_fiador_int
	 	Where cbcontratoalianca.contrato_str = importaaliancatmp.contrato
			And importaaliancatmp.tipo_registro_int = '40'
			And importaaliancatmp.numero_fiador_int = '2';

  --
  -- Alteraï¿½ï¿½o do Contrato
  --
	Update cbcontratoalianca Set
    nome_str      = importaaliancatmp.nome_consorciado_str,
		nome_destinatario_str = importaaliancatmp.nome_destinatario_str,
		contrato_remessa_str = importaaliancatmp.num_contrato_str,
	  endereco_str  = importaaliancatmp.endereco_str,
	  bairro_str    = importaaliancatmp.bairro_str, 
	  cep_str       = importaaliancatmp.cep_int,
	  cidade_str    = importaaliancatmp.cidade_str, 
	  estado_str    = importaaliancatmp.uf_str,
    codigo_segmento_str = importaaliancatmp.codigo_segmento_int,
    cota_str            = importaaliancatmp.num_cota_int,
    grupo_str           = importaaliancatmp.num_grupo_int, 

		carteira_str        = importaaliancatmp.carteira_str,  
		data_documento_dat  = importaaliancatmp.data_documento_dat, 
		numero_doc_str      = importaaliancatmp.numero_documento_str,
		data_process_dat    = importaaliancatmp.data_process_dat,
		quantidade_str      = importaaliancatmp.qtde_str,
		valor_unitario_str  = importaaliancatmp.vl_unitario_str,
		nome_sacado_boleto_str = importaaliancatmp.sacado_1_str,
		endereco_boleto_str    = importaaliancatmp.sacado_2_str,
	  endereco2_boleto_str   = importaaliancatmp.sacado_3_str,        

		local_pagamento_str = importaaliancatmp.local_pagamento_str,
		linha_1_str = importaaliancatmp.linha_1_str, 
		linha_2_str = importaaliancatmp.linha_2_str,
		linha_3_str = importaaliancatmp.linha_3_str,
		linha_4_str = importaaliancatmp.linha_4_str,
		linha_5_str = importaaliancatmp.linha_5_str,

		data_primeira_distrib_dat = dt_remessa,
	  data_ultima_distrib_dat   = dt_remessa, 
	  tstamp                    = current_timestamp,
 	  id_geusuario_int          = usuario

	Where cbcontratoalianca.contrato_str = importaaliancatmp.contrato
	  And cbcontratoalianca.id_cbtiponegocio_int = importaaliancatmp.id_cbtiponegocio
	  And importaaliancatmp.inclui_altera = 'A'
    And importaaliancatmp.tipo_registro_int = '20';
         
  --
	--  Log alteraï¿½ï¿½o contrato
  --
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		aplicacao,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
    cbcontratoalianca.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

   From importaaliancatmp 
	 Inner Join cbcontratoalianca On (cbcontratoalianca.contrato_str, cbcontratoalianca.id_cbtiponegocio_int) = (importaaliancatmp.contrato, importaaliancatmp.id_cbtiponegocio)
	 Inner Join cbsituacaocontrato On cbcontratoalianca.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where importaaliancatmp.inclui_altera = 'A'
    And importaaliancatmp.tipo_registro_int = '20';

	--
	-- Inclusï¿½o Parcela
	--

  Insert Into cbparcela (
	   id_cbcontrato_int,
	   parcela_int,
	   data_vencimento_dat,
	   valor_principal_num,
	   situacao_int,
	   tipo_str,

	   data_primeira_distrib_dat,
	   data_ultima_distrib_dat,
	   id_geusuario_int,
	   tstamp )

	Select
	   cbcontratoalianca.id_cbcontrato_int,
	   importaaliancatmp.parcela_int,
	   importaaliancatmp.data_venctopar_dat,
	   importaaliancatmp.principal_num,
	   Case When (importaaliancatmp.data_venctopar_dat >= current_date) Then 7 Else 0 End,
	   '1',

  	 dt_remessa,
	   dt_remessa,
	   usuario,
	   current_timestamp

	 From importaaliancatmp Inner Join cbcontratoalianca On cbcontratoalianca.contrato_str = importaaliancatmp.contrato
  Where importaaliancatmp.tipo_registro_int = '31' And  importaaliancatmp.inclui_altera_parcela = 'I' 

  Order by importaaliancatmp.contrato;

  --  
	-- Alteraï¿½ï¿½o Parcela
  --
	Update cbparcela Set
	  data_vencimento_dat = importaaliancatmp.data_venctopar_dat,
	  valor_principal_num = importaaliancatmp.principal_num,
	  situacao_int = Case When cbparcela.situacao_int = '4' Then 0 Else cbparcela.situacao_int  End,
	  data_pagamento_dat = NULL,
	  valor_pago_num = NULL,
	  data_ultima_distrib_dat = dt_remessa

	Where cbparcela.parcela_int = importaaliancatmp.parcela_int
	  And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	  And cbparcela.id_cbcontrato_int =  cbcontratoalianca.id_cbcontrato_int
	  And cbcontratoalianca.contrato_str = importaaliancatmp.contrato
	  And cbcontratoalianca.id_cbtiponegocio_int = importaaliancatmp.id_cbtiponegocio
		And importaaliancatmp.tipo_registro_int = '31'
	  And importaaliancatmp.inclui_altera_parcela = 'A';

  --
	-- Log alteraï¿½ï¿½o Parcela
  --
	Insert Into gehistoricousuario (
	    id_geusuario_int,
	    id_gecliente_int,
    	id_geaplicacao_int,
	    data_hora_dat,
	    evento_str,
	    contrato_str,
	    parcela_int,
	    obs_txt )

	Select
	    usuario,
	    cliente,
	    aplicacao,
	    current_timestamp,
	    'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	    cbcontratoalianca.contrato_str,
	    importaaliancatmp.parcela_int,
	    'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaaliancatmp Inner Join cbcontratoalianca On
	(cbcontratoalianca.contrato_str, cbcontratoalianca.id_cbtiponegocio_int) = (importaaliancatmp.contrato, importaaliancatmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratoalianca.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importaaliancatmp.parcela_int
	  And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	  And importaaliancatmp.inclui_altera_parcela = 'A';

	--
	-- Insere na distrib a primeira parcela que veio no arquivo
	--
	Insert Into cbdistribparcela (
	   id_cbcontrato_int,
	   id_cbparcela_int,
     data_pre_distrib_dat )

	Select
	   cbcontratoalianca.id_cbcontrato_int,
	   cbparcela.id_cbparcela_int,
	   dt_remessa

	 From importaaliancatmp Inner Join cbcontratoalianca On (cbcontratoalianca.contrato_str) = (importaaliancatmp.contrato)
	      Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoalianca.id_cbcontrato_int
	Where importaaliancatmp.tipo_registro_int = '31'  And  importaaliancatmp.inclui_altera_parcela = 'I'
    And importaaliancatmp.parcela_int = cbparcela.parcela_int
   	And importaaliancatmp.parcela_int = ( Select parcela_int from importaaliancatmp
                                           where contrato = cbcontratoalianca.contrato_str order by parcela_int limit 1 );

End if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12026 (class 0 OID 0)
-- Dependencies: 2007
-- Name: FUNCTION importa_alianca(text, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_alianca(text, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Alianï¿½a do Brasil';

--
-- TOC entry 2008 (class 1255 OID 27466)
-- Name: importa_bb(text, integer, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_bb(text, integer, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
comando    alias for $1;
empresa_logada alias for $2;
usuario    alias for $3;
cliente    alias for $4;
sequencial alias for $5;
arquivo    alias for $6;

cursor_contrato record;
dt_movimento    date;
int_retiradas   int4;
int_total       int4;
empresa         int2;

BEGIN

-- Empresa fixa
empresa :=  2;

--Seta data de distribuiï¿½ï¿½o
dt_movimento:= (Select data_movimento From importabbtmp where tipo_registro = '0');

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importabbtmp Set id_fimoeda = 1, id_cbtiponegocio = 76, id_gefilial = 1;

	Update importabbtmp Set
	id_gefilial =  Case When centralizadora = '1936' then 28
	               			When centralizadora = '1910' then 13
	                    When centralizadora = '1966' then 25
								 			Else Null
								 End;

	-- Seta filial do BB
	Update importabbtmp Set
	id_cbdistribuidorcliente = cbdistribuidorcliente.id_cbdistribuidorcliente_int
	Where centralizadora = cbdistribuidorcliente.codigo_str
	And cbdistribuidorcliente.id_gecliente_int = cliente
	And tipo_registro In ('79', '94', '95');

end if;

if comando = '30' then

  -- 30/51
  -- Contrato Pendente
	for cursor_contrato in
		Select Distinct cbcontratobb.id_cbcontrato_int, cbcontratobb.contrato_str
		From cbcontratobb Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobb.id_cbcontrato_int
		Inner Join importabbtmp On (importabbtmp.produto, importabbtmp.modalidade, importabbtmp.Agencia, importabbtmp.contrato,                importabbtmp.mci_cliente) = (cbparcela.produto_int, cbparcela.modalidade_int, cbparcela.agencia_int, cbparcela.contrato_int,                 cbparcela.mci_int)  
		Where importabbtmp.tipo_registro In ('30', '51')
		And cbcontratobb.id_cbsituacaocontrato_int <> '12'

	loop

			Update cbcontratobb Set id_cbsituacaocontrato_int = 12
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
			  id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
				332,
				current_timestamp,
			  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
			  cursor_contrato.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para P');

	end loop;

  -- 60
	-- Baixa parcela
	Update cbparcela Set
	situacao_int = '4',
	data_pagamento_dat = dt_movimento,
	valor_pago_num = Null,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.produto_int = importabbtmp.produto
	And cbparcela.modalidade_int = importabbtmp.modalidade
	And cbparcela.agencia_int = importabbtmp.agencia
	And cbparcela.contrato_int = importabbtmp.contrato
  And cbparcela.mci_int = importabbtmp.mci_cliente
	And cbparcela.situacao_int <> '4'
	And importabbtmp.tipo_registro In ('60');

	Insert Into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbparcela.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Parcela Baixada em ' || to_char (dt_movimento, 'dd/mm/yyyy'),
	Case  When importabbtmp.tipo_registro = '60' Then 11052	End,

	1,
	current_timestamp

	From importabbtmp Inner Join cbparcela On
															(cbparcela.produto_int, cbparcela.modalidade_int, cbparcela.agencia_int, cbparcela.contrato_int, cbparcela.mci_int) = 
															(importabbtmp.produto, importabbtmp.modalidade, importabbtmp.agencia, importabbtmp.contrato, importabbtmp.mci_cliente)
 	Where cbparcela.situacao_int = '4'
	And cbparcela.valor_pago_num Is Null
	And importabbtmp.tipo_registro In ('60');

	-- Baixa contrato	
	for cursor_contrato in
		Select Distinct cbcontratobb.id_cbcontrato_int, cbcontratobb.contrato_str
		From cbcontratobb Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobb.id_cbcontrato_int
											Inner Join importabbtmp On
															  (importabbtmp.produto, importabbtmp.modalidade, importabbtmp.Agencia, importabbtmp.contrato, importabbtmp.mci_cliente) =
																(cbparcela.produto_int, cbparcela.modalidade_int, cbparcela.agencia_int, cbparcela.contrato_int, cbparcela.mci_int)  
		Where importabbtmp.tipo_registro In ('60')
		And cbcontratobb.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela 
																 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratobb Set id_cbsituacaocontrato_int = 6
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
				332,
				current_timestamp,
			  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
			  cursor_contrato.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- 79
  -- Instrucao
if comando = '79' then

	Insert Into esinstrucao
	(id_gecliente_int,
	 id_cbdistribuidorcliente_int,
	 data_dat,
	 codigo_int,
	 descricao_str,
	 situacao_str)

	 Select 
	 cliente,
	 id_cbdistribuidorcliente,
	 dt_movimento,
	 codigo_instrucao,
	 instrucao,
	 situacao_instrucao

	 From importabbtmp
	 Where tipo_registro = '79';

end if;

	
-- 90/91
	 -- Alteraï¿½ï¿½o vencimento parcela
if comando = '90' then

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	valor_principal_num = importabbtmp.valor_parcela,
	valor_devedor_num = importabbtmp.valor_total,
	data_ultima_distrib_dat = dt_movimento,
		
	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.produto_int = importabbtmp.produto
	And cbparcela.modalidade_int = importabbtmp.modalidade
	And cbparcela.agencia_int = importabbtmp.agencia
	And cbparcela.contrato_int = importabbtmp.contrato
	And cbparcela.mci_int = importabbtmp.mci_cliente
	And cbparcela.situacao_int <> '4'
	And importabbtmp.tipo_registro In ('90', '91');
	--And importabbtmp.tipo_registro = '90';

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	332,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o - ' || arquivo,
	cbcontratobb.contrato_str,
	cbparcela.parcela_int,
	'Valor da parcela alterado. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importabbtmp Inner Join cbparcela On
															(cbparcela.produto_int, cbparcela.modalidade_int, cbparcela.agencia_int, cbparcela.contrato_int, cbparcela.mci_int) = 
															(importabbtmp.produto, importabbtmp.modalidade, importabbtmp.Agencia, importabbtmp.contrato, importabbtmp.mci_cliente)
										Inner Join cbcontratobb On cbcontratobb.id_cbcontrato_int = cbparcela.id_cbcontrato_int

 	Where cbparcela.situacao_int <> '4'
	And importabbtmp.tipo_registro  In ('90', '91');

end if;

-- 94
   -- Comissao
if comando = '94' then

	Insert Into escomissaobb
	(id_cbdistribuidorcliente_int,
	 data_dat,
	 produto_int,
	 modalidade_int,
	 agencia_int,
	 contrato_int,
	 numero_resumo_int,
	 numero_comissao_int,
	 data_recebimento_dat,
	 valor_recebimento_num,
	 valor_comissao_num,
	 arquivo_str,
	 sequencial_int)

	 Select 
	 id_cbdistribuidorcliente,
	 dt_movimento,
	 produto,
	 modalidade,
	 agencia,
	 contrato,
	 numero_resumo,
	 numero_comissao,
	 data_parcela,
	 valor_parcela,
	 valor_total,
	 arquivo,
	 sequencial

	 From importabbtmp
	 Where tipo_registro = '94';

end if;

-- 95/96
	 -- Inclusï¿½o/Alteraï¿½ï¿½o contrato
	 -- Inclusï¿½o parcela
if comando = '95' then

	-- Inclusao de Contrato
	Insert Into cbcontratobb
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_cbdistribuidorcliente_int,
	id_fimoeda_int,

	contrato_str,
	tipo_pessoa_str,
	cpf_str,
	nome_str,
	endereco_str,
	bairro_str,
	cep_str,
	telefone_str,
	telefone_cel_str,
	cidade_str,
	estado_str,
	valor_montante_num, 
	data_contrato_dat, 
	valor_operacao_num,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,

	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,

	cpf_cli,
	Case When tipo_cli = 1 Then 'F'
			 When tipo_cli = 2 Then 'J'
			 Else NULL
	End,
	cpf_cli,	
	nome_cli,
	endereco_cli,
	bairro_cli,
	cep_cli,
	telefone1_cli,
	telefone2_cli,
	municipio_cli,
	Case When (uf_cli <> '') Then uf_cli Else Null End,
	valor_negociado,
	data_vencimento,  
	valor_total,

	dt_movimento,
	dt_movimento,
	1,
	
	current_timestamp,
	usuario

	From importabbtmp
	Where tipo_registro = '95'
	And inclui_altera = 'I';

	
	-- Alteracao de Contrato
	Update cbcontratobb Set

	tipo_pessoa_str = Case When (importabbtmp.tipo_cli = 1) Then 'F'
												 When (importabbtmp.tipo_cli = 2) Then 'J'
												 Else Null
										End,
	nome_str	=	Coalesce(importabbtmp.nome_cli, cbcontratobb.nome_str),
	endereco_str	=	Coalesce(importabbtmp.endereco_cli, cbcontratobb.endereco_str), 
	bairro_str	=	Coalesce(importabbtmp.bairro_cli, cbcontratobb.bairro_str),
	cep_str	=	Coalesce(importabbtmp.cep_cli, cbcontratobb.cep_str), 
	telefone_str	=	Coalesce(importabbtmp.telefone1_cli, cbcontratobb.telefone_str),
	telefone_cel_str	=	Coalesce(importabbtmp.telefone2_cli, cbcontratobb.telefone_cel_str), 
	cidade_str 	=	Coalesce(importabbtmp.municipio_cli, cbcontratobb.cidade_str), 
	estado_str	=	Coalesce(importabbtmp.uf_cli, cbcontratobb.estado_str), 
	valor_montante_num = Coalesce(importabbtmp.valor_negociado, cbcontratobb.valor_montante_num), 
	data_contrato_dat = Coalesce(importabbtmp.data_vencimento, cbcontratobb.data_contrato_dat), 
	valor_operacao_num = Coalesce(importabbtmp.valor_total, cbcontratobb.valor_operacao_num),
	data_ultima_distrib_dat = dt_movimento,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobb.contrato_str = importabbtmp.cpf_cli
	And importabbtmp.tipo_registro In ('95', '96')
	And importabbtmp.inclui_altera = 'A';

	-- Log alteracao contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		332,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
	  importabbtmp.cpf_cli,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importabbtmp Inner Join cbcontratobb On cbcontratobb.contrato_str = importabbtmp.cpf_cli
										Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratobb.id_cbsituacaocontrato_int

	Where importabbtmp.tipo_registro In ('95', '96')
	And importabbtmp.inclui_altera = 'A';

	--Inclusao Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	produto_int,
	modalidade_int,
	agencia_int,
	contrato_int,
	mci_int,
	nome_produto_str,
	contrato_rao_str,
	valor_devedor_num,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratobb.id_cbcontrato_int,
	numero_parcela,
	data_parcela,
	valor_parcela,
	0,
	'1',

	produto,
	modalidade,
	agencia,
	contrato,
	mci_cliente,
	nome_produto,
	'N',
	valor_negociado,

	dt_movimento,
	dt_movimento,
	usuario,
	current_timestamp

	From importabbtmp Inner Join cbcontratobb On cbcontratobb.contrato_str = importabbtmp.cpf_cli

	Where importabbtmp.tipo_registro = '95'
	And importabbtmp.inclui_altera_parcela = 'I';

	-- Distribuicao parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratobb.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dt_movimento

	From importabbtmp Inner Join cbcontratobb On cbcontratobb.contrato_str = importabbtmp.cpf_cli
										Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobb.id_cbcontrato_int
	Where cbparcela.parcela_int = importabbtmp.numero_parcela
	And importabbtmp.tipo_registro = '95'
	And importabbtmp.inclui_altera_parcela = 'I';

	-- Log alteracao situacao contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		332,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
	  importabbtmp.cpf_cli,
	  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para A'

	From importabbtmp Inner Join cbcontratobb On cbcontratobb.contrato_str = importabbtmp.cpf_cli
										Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratobb.id_cbsituacaocontrato_int
	Where cbcontratobb.id_cbsituacaocontrato_int = '6'
	And importabbtmp.tipo_registro = '95'
	And importabbtmp.inclui_altera_parcela = 'I';

	--Alteracao situacao contrato
	Update cbcontratobb Set
	id_cbsituacaocontrato_int = 1,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobb.contrato_str = importabbtmp.cpf_cli
	And cbcontratobb.id_cbsituacaocontrato_int = '6'
	And importabbtmp.tipo_registro = '95'
	And importabbtmp.inclui_altera_parcela = 'I';

end if;

--
if comando = '99' then
end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12027 (class 0 OID 0)
-- Dependencies: 2008
-- Name: FUNCTION importa_bb(text, integer, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_bb(text, integer, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco do Brasil';

--
-- TOC entry 2009 (class 1255 OID 27484)
-- Name: importa_bbjur(text, integer, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_bbjur(text, integer, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
comando    alias for $1;
empresa_logada alias for $2;
usuario    alias for $3;
cliente    alias for $4;
sequencial alias for $5;
arquivo    alias for $6;

cursor_contrato record;
dt_movimento    date;
int_retiradas   int4;
int_total       int4;
empresa         int2;

BEGIN

-- Empresa fixa
empresa :=  1;

--Seta data de distribuiï¿½ï¿½o
dt_movimento:= (Select data_movimento From importabbjurtmp where tipo_registro = '0');

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importabbjurtmp Set id_fimoeda = 1, id_cbtiponegocio = (Select id_cbtiponegocio_int From cbtiponegocio where codigo_str = '1' and id_gecliente_int = '32'), id_gefilial = 1;

	Update importabbjurtmp Set
	id_gefilial =  Case When centralizadora = '8665' then 1
								 End;

	-- Seta filial do BB
	Update importabbjurtmp Set
	id_cbdistribuidorcliente = cbdistribuidorcliente.id_cbdistribuidorcliente_int
	Where centralizadora = cbdistribuidorcliente.codigo_str
	And cbdistribuidorcliente.id_gecliente_int = cliente
	And tipo_registro In ('79', '94', '95');

end if;

if comando = '60' then

	-- 60
	-- Baixa parcela
	Update cbparcela Set
	situacao_int = '4',
	data_pagamento_dat = dt_movimento,
	valor_pago_num = Null,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
	And cbparcela.situacao_int <> '4'
	And importabbjurtmp.tipo_registro = '60';

	Insert Into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbparcela.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Parcela Baixada em ' || to_char (dt_movimento, 'dd/mm/yyyy'),
	Case  When importabbjurtmp.tipo_registro = '60' Then 11142	
        End,
	1,
	current_timestamp

	From importabbjurtmp Inner Join cbparcela On cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela

 	Where cbparcela.situacao_int = '4'
	And cbparcela.valor_pago_num Is Null
	And importabbjurtmp.tipo_registro = '60';

	-- Baixa contrato	
	for cursor_contrato in
		Select Distinct cbcontratobbjur.id_cbcontrato_int, cbcontratobbjur.contrato_str
		From cbcontratobbjur Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobbjur.id_cbcontrato_int
												 Inner Join importabbjurtmp On importabbjurtmp.id_cbparcela = cbparcela.id_cbparcela_int
		Where importabbjurtmp.tipo_registro = '60'
		And cbcontratobbjur.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela 
			      Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
             			  Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
				  And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratobbjur Set id_cbsituacaocontrato_int = 6
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
        		  id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
			  353,
			  current_timestamp,
			  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
			  cursor_contrato.contrato_str,
			  'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- 95
	 -- Inclusï¿½o/Alteraï¿½ï¿½o contrato
	 -- Inclusï¿½o parcela
if comando = '95' then

	-- Inclusao de Contrato
	Insert Into cbcontratobbjur
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_cbdistribuidorcliente_int,
	id_fimoeda_int,

	mci_cliente_int,
	contrato_str,
	nome_str,
	cpf_str,
	endereco_str,
	bairro_str,
	cep_str,
	cidade_str,
	estado_str,
	telefone_str,
	telefone_trabalho_str,
	telefone_cel_str,
	data_contrato_dat,
	despesas_finan_num,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,

	mci_cliente,
	cpf_cli,
	nome_cli,
	cpf_cli,
	endereco_cli,
	bairro_cli,
	cep_cli,
	municipio_cli,
	Case When (uf_cli <> '') Then uf_cli Else Null End,
	telefone_cli,
	telefone_com_cli,
	telefone_cel_cli,
	data_vencimento,
	valor_total,

	dt_movimento,
	dt_movimento,
	1,
	current_timestamp,
	usuario

	From importabbjurtmp
	Where tipo_registro = '95'
	And inclui_altera = 'I';

	

	-- Alteracao de Contrato
	Update cbcontratobbjur Set

	nome_str			=	Coalesce(importabbjurtmp.nome_cli, cbcontratobbjur.nome_str),
	endereco_str	=	Coalesce(importabbjurtmp.endereco_cli, cbcontratobbjur.endereco_str),
	bairro_str		=	Coalesce(importabbjurtmp.bairro_cli, cbcontratobbjur.bairro_str),
	cep_str				=	Coalesce(importabbjurtmp.cep_cli, cbcontratobbjur.cep_str),
	cidade_str 		=	Coalesce(importabbjurtmp.municipio_cli, cbcontratobbjur.cidade_str),
	estado_str		=	Coalesce(importabbjurtmp.uf_cli, cbcontratobbjur.estado_str),
	telefone_str	=	Coalesce(importabbjurtmp.telefone_cli, cbcontratobbjur.telefone_str),
	telefone_trabalho_str	=	Coalesce(importabbjurtmp.telefone_com_cli, cbcontratobbjur.telefone_trabalho_str),
	telefone_cel_str			=	Coalesce(importabbjurtmp.telefone_cel_cli, cbcontratobbjur.telefone_cel_str),
	data_contrato_dat 		= Coalesce(importabbjurtmp.data_vencimento, cbcontratobbjur.data_contrato_dat),
	despesas_finan_num 		= Coalesce(importabbjurtmp.valor_total, cbcontratobbjur.despesas_finan_num),

	data_ultima_distrib_dat = dt_movimento,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
	And importabbjurtmp.tipo_registro = '95'
	And importabbjurtmp.inclui_altera = 'A';

	-- Log alteracao contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
	  353,
	  current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
	  importabbjurtmp.cpf_cli,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
			     Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratobbjur.id_cbsituacaocontrato_int

	Where importabbjurtmp.tipo_registro = '95'
	And importabbjurtmp.inclui_altera = 'A';

	--Inclusao Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	produto_int,
	modalidade_int,
	agencia_int,
	contrato_int,
	mci_int,
	processo_str,

	nome_produto_str,
	contrato_rao_str,
	valor_devedor_num,
	data_performance_dat,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratobbjur.id_cbcontrato_int,
	numero_parcela,
	data_parcela,
	valor_parcela,
	0,
	'1',
	produto,
	modalidade,
	agencia,
	contrato,
	mci_cliente,
	numero_processo,

	nome_produto,
	'N',
	valor_negociado,
	data_atualizacao,

	dt_movimento,
	dt_movimento,
	usuario,
	current_timestamp

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.contrato_str = importabbjurtmp.cpf_cli

	Where importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

	-- Distribuicao parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratobbjur.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dt_movimento

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.contrato_str = importabbjurtmp.cpf_cli
											 Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobbjur.id_cbcontrato_int
	Where cbparcela.parcela_int = importabbjurtmp.numero_parcela
	And importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

	-- Log alteracao situacao contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
	  353,
	  current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
	  importabbjurtmp.cpf_cli,
	  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para A'

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
											 Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratobbjur.id_cbsituacaocontrato_int
	Where cbcontratobbjur.id_cbsituacaocontrato_int = '6'
	And importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

	--Alteracao situacao contrato
	Update cbcontratobbjur Set
	id_cbsituacaocontrato_int = 1,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
	And cbcontratobbjur.id_cbsituacaocontrato_int = '6'
	And importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

end if;

-- 98 Dados do veiculo
	 -- Inclusï¿½o/Alteraï¿½ï¿½o contrato
	 -- Inclusï¿½o parcela

if comando = '98' then
 -- Alteracao de Contrato
	Update cbcontratobbjur Set

	local_trab_avalista2_str	= Coalesce(importabbjurtmp.tipo_vei, cbcontratobbjur.local_trab_avalista2_str),
	chassis_str						= Coalesce(importabbjurtmp.chassi_vei, cbcontratobbjur.chassis_str),
	renavam_str						= Coalesce(importabbjurtmp.renavam_vei, cbcontratobbjur.renavam_str),
	marca_str							= Coalesce(importabbjurtmp.marca_vei, cbcontratobbjur.marca_str),
	modelo_str						= Coalesce(importabbjurtmp.modelo_vei, cbcontratobbjur.modelo_str),
	ano_str								= Coalesce(importabbjurtmp.ano_fabricacao_vei, cbcontratobbjur.ano_str),
	ddd_avalista2_str			= Coalesce(importabbjurtmp.ano_modelo_vei, cbcontratobbjur.ddd_avalista2_str),
	cpf_avalista2_str			= Coalesce(importabbjurtmp.placa_vei, cbcontratobbjur.cpf_avalista2_str),
	cor_str								= Coalesce(importabbjurtmp.cor_vei, cbcontratobbjur.cor_str),
	cidade_avalista2_str	= Coalesce(importabbjurtmp.cidade_vei, cbcontratobbjur.cidade_avalista2_str),
	estado_avalista2_str	= Coalesce(importabbjurtmp.uf_vei, cbcontratobbjur.estado_avalista2_str),

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobbjur.mci_cliente_int = importabbjurtmp.mci_cliente
	And importabbjurtmp.tipo_registro = '98';
end if;

-- 90/91
	 -- Alteraï¿½ï¿½o vencimento parcela
if comando = '90' then

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	353,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o - ' || arquivo,
	cbcontratobbjurjur.contrato_str,
	cbparcela.parcela_int,
	'Valor da parcela alterado.' || Case When cbparcela.situacao_int In ('4', '6') Then ' Parcela redirecionada. Contrato Aberto se Baixado'
																		Else ' '
																		End

	From importabbjurtmp 
		Inner Join cbparcela On (cbparcela.produto_int, cbparcela.modalidade_int, cbparcela.agencia_int, cbparcela.contrato_int, cbparcela.mci_int) = 
															(importabbjurtmp.produto, importabbjurtmp.modalidade, importabbjurtmp.agencia, importabbjurtmp.contrato, importabbjurtmp.mci_cliente)Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = cbparcela.id_cbcontrato_int

 	Where importabbjurtmp.tipo_registro  In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	valor_principal_num = importabbjurtmp.valor_parcela,
	valor_devedor_num = importabbjurtmp.valor_total,
	data_ultima_distrib_dat = dt_movimento,
	situacao_int = Case When cbparcela.situacao_int In ('4', '6') Then 0
		     							Else cbparcela.situacao_int
									End,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.produto_int = importabbjurtmp.produto
	And cbparcela.modalidade_int = importabbjurtmp.modalidade
	And cbparcela.agencia_int = importabbjurtmp.agencia
	And cbparcela.contrato_int = importabbjurtmp.contrato
	And cbparcela.mci_int = importabbjurtmp.mci_cliente
	And importabbjurtmp.tipo_registro In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';
end if;

/*
-- 90/91
	 -- Alteraï¿½ï¿½o vencimento parcela
if comando = '90' then

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	332,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o - ' || arquivo,
	cbcontratobbjur.contrato_str,
	cbparcela.parcela_int,
	'Valor da parcela alterado.' || Case When cbparcela.situacao_int In ('4', '6') Then ' Parcela redirecionada. Contrato Aberto se Baixado'
																		Else ' '
																		End

	From importabbjurtmp Inner Join cbparcela On cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
											 Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = cbparcela.id_cbcontrato_int

 	Where importabbjurtmp.tipo_registro  In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	valor_principal_num = importabbjurtmp.valor_parcela,
	valor_devedor_num   = importabbjurtmp.valor_negociado,
	data_performance_dat    = importabbjurtmp.data_atualizacao,

	data_ultima_distrib_dat = dt_movimento,
	situacao_int = Case When cbparcela.situacao_int In ('4', '6') Then 0
		     							Else cbparcela.situacao_int
									End,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
	And importabbjurtmp.tipo_registro In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

	--Alteracao situacao contrato
	Update cbcontratobbjur Set
	id_cbsituacaocontrato_int = 1,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

 	Where cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
	And cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
	And cbparcela.situacao_int = '0'   
	And cbcontratobbjur.id_cbsituacaocontrato_int = '6'
	And importabbjurtmp.tipo_registro In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

end if;

DECLARE
comando    alias for $1;
empresa_logada alias for $2;
usuario    alias for $3;
cliente    alias for $4;
sequencial alias for $5;
arquivo    alias for $6;

cursor_contrato record;
dt_movimento    date;
int_retiradas   int4;
int_total       int4;
empresa         int2;

BEGIN

-- Empresa fixa
empresa :=  1;

--Seta data de distribuiï¿½ï¿½o
dt_movimento:= (Select data_movimento From importabbjurtmp where tipo_registro = '0');

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importabbjurtmp Set id_fimoeda = 1, id_cbtiponegocio = , id_gefilial = 1;

	Update importabbjurtmp Set
	id_gefilial =  Case When centralizadora = '8665' then 
								 End;

	-- Seta filial do BB
	Update importabbjurtmp Set
	id_cbdistribuidorcliente = cbdistribuidorcliente.id_cbdistribuidorcliente_int
	Where centralizadora = cbdistribuidorcliente.codigo_str
	And cbdistribuidorcliente.id_gecliente_int = cliente
	And tipo_registro In ('79', '94', '95');

end if;

if comando = '30' then

  -- 60
	-- Baixa parcela
	Update cbparcela Set
	situacao_int = '4',
	data_pagamento_dat = dt_movimento,
	valor_pago_num = Null,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
	And cbparcela.situacao_int <> '4'
	And importabbjurtmp.tipo_registro = '60';

	Insert Into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbparcela.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Parcela Baixada em ' || to_char (dt_movimento, 'dd/mm/yyyy'),
	Case  When importabbjurtmp.tipo_registro = '60' Then 11052	End,

	1,
	current_timestamp

	From importabbjurtmp Inner Join cbparcela On cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela

 	Where cbparcela.situacao_int = '4'
	And cbparcela.valor_pago_num Is Null
	And importabbjurtmp.tipo_registro = '60';

	-- Baixa contrato	
	for cursor_contrato in
		Select Distinct cbcontratobbjur.id_cbcontrato_int, cbcontratobbjur.contrato_str
		From cbcontratobbjur Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobbjur.id_cbcontrato_int
												 Inner Join importabbjurtmp On importabbjurtmp.id_cbparcela = cbparcela.id_cbparcela_int
		Where importabbjurtmp.tipo_registro = '60'
		And cbcontratobbjur.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela 
																 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratobbjur Set id_cbsituacaocontrato_int = 6
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
				332,
				current_timestamp,
			  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
			  cursor_contrato.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- 79
  -- Instrucao
if comando = '79' then

	Insert Into esinstrucao
	(id_gecliente_int,
	 id_cbdistribuidorcliente_int,
	 data_dat,
	 codigo_int,
	 descricao_str,
	 situacao_str)

	 Select 
	 cliente,
	 id_cbdistribuidorcliente,
	 dt_movimento,
	 codigo_instrucao,
	 instrucao,
	 situacao_instrucao

	 From importabbjurtmp
	 Where tipo_registro = '79';

end if;

	
-- 90/91
	 -- Alteraï¿½ï¿½o vencimento parcela
if comando = '90' then

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	332,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o - ' || arquivo,
	cbcontratobbjur.contrato_str,
	cbparcela.parcela_int,
	'Valor da parcela alterado.' || Case When cbparcela.situacao_int In ('4', '6') Then ' Parcela redirecionada. Contrato Aberto se Baixado'
																		Else ' '
																		End

	From importabbjurtmp Inner Join cbparcela On cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
											 Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = cbparcela.id_cbcontrato_int

 	Where importabbjurtmp.tipo_registro  In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	valor_principal_num = importabbjurtmp.valor_parcela,
	valor_devedor_num   = importabbjurtmp.valor_negociado,
	data_performance_dat    = importabbjurtmp.data_atualizacao,

	data_ultima_distrib_dat = dt_movimento,
	situacao_int = Case When cbparcela.situacao_int In ('4', '6') Then 0
		     							Else cbparcela.situacao_int
									End,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

 	Where cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
	And importabbjurtmp.tipo_registro In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

	--Alteracao situacao contrato
	Update cbcontratobbjur Set
	id_cbsituacaocontrato_int = 1,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

 	Where cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
	And cbparcela.id_cbparcela_int = importabbjurtmp.id_cbparcela
	And cbparcela.situacao_int = '0'   
	And cbcontratobbjur.id_cbsituacaocontrato_int = '6'
	And importabbjurtmp.tipo_registro In ('90', '91')
	And importabbjurtmp.inclui_altera_parcela = 'A';

end if;

-- 94
   -- Comissao
if comando = '94' then

	Insert Into escomissaobb
	(id_geempresa_int,
	 id_cbdistribuidorcliente_int,
	 data_dat,
   data_repasse_dat,
	 produto_int,
	 modalidade_int,
	 agencia_int,
	 contrato_int,
	 processo_int,
 
	 data_recebimento_dat,
	 valor_recebimento_num,
	 valor_custas_num,
	 valor_honorarios_num,

	 arquivo_str

	 Select 
	 empresa,
	 id_cbdistribuidorcliente,
	 dt_movimento,
	 dt_movimento,
	 produto,
	 modalidade,
	 agencia,
	 contrato,
	 numero_processo,

	 data_parcela,
	 valor_parcela,
	 valor_negociado,
	 valor_total,

	 arquivo

	 From importabbjurtmp
	 Where tipo_registro = '94';

end if;

-- 95
	 -- Inclusï¿½o/Alteraï¿½ï¿½o contrato
	 -- Inclusï¿½o parcela
if comando = '95' then

	-- Inclusao de Contrato
	Insert Into cbcontratobbjur
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_cbdistribuidorcliente_int,
	id_fimoeda_int,

	mci_cliente_int,
	contrato_str,
	nome_str,
	cpf_str,
	endereco_str,
	bairro_str,
	cep_str,
	cidade_str,
	estado_str,
	telefone_str,
	telefone_trabalho_str
	telefone_cel_str,
	data_contrato_dat, 
	despesas_finan_num,

	nome_avalista1_str,
	cpf_avalista1_str,
	endereco_avalista1_str,
	bairro_avalista1_str,
	cep_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	fone_avalista1_str,
	fone_trab_avalista1_str,
	fax_avalista1_str,

	local_trab_avalista2_str,
	chassi_str,
	renavam_str,
	marca_str,
	modelo_str,
	ano_str,
	ddd_avalista2_str,
	cpf_avalista2_str,
	cor_str,
	cidade_avalista2_str,
	estado_avalista2_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,

	mci_cliente,
	cpf_cli,
	nome_cli,
	cpf_cli,	
	endereco_cli,
	bairro_cli,
	cep_cli,
	municipio_cli,
	Case When (uf_cli <> '') Then uf_cli Else Null End,
	telefone_cli,
	telefone_com_cli,
	telefone_cel_cli,
	data_vencimento,
	valor_total,
	
	nome_val,
	cpf_val,
	endereco_val,
	bairro_val,
	cep_val,
	municipio_val,
	uf_val,
	telefone_val,
	telefone_com_val,
	telefone_cel_val,

	tipo_vei,
	chassi_vei,
	renavam_vei,
	marca_vei,
	modelo_vei,
	ano_fabricacao_vei,
	ano_modelo_vei,
	placa_vei,
	cor_vei,
	cidade_vei,
	uf_vei,

	dt_movimento,
	dt_movimento,
	1,
	current_timestamp,
	usuario

	From importabbjurtmp
	Where tipo_registro = '95'
	And inclui_altera = 'I';

	
	-- Alteracao de Contrato
	Update cbcontratobbjur Set

	nome_str			=	Coalesce(importabbjurtmp.nome_cli, cbcontratobbjur.nome_str),
	endereco_str	=	Coalesce(importabbjurtmp.endereco_cli, cbcontratobbjur.endereco_str), 
	bairro_str		=	Coalesce(importabbjurtmp.bairro_cli, cbcontratobbjur.bairro_str),
	cep_str				=	Coalesce(importabbjurtmp.cep_cli, cbcontratobbjur.cep_str), 
	cidade_str 		=	Coalesce(importabbjurtmp.municipio_cli, cbcontratobbjur.cidade_str), 
	estado_str		=	Coalesce(importabbjurtmp.uf_cli, cbcontratobbjur.estado_str), 
	telefone_str	=	Coalesce(importabbjurtmp.telefone_cli, cbcontratobbjur.telefone_str),
	telefone_trabalho_str	=	Coalesce(importabbjurtmp.telefone_com_cli, cbcontratobbjur.telefone_trabalho_str), 
	telefone_cel_str			=	Coalesce(importabbjurtmp.telefone_cel_cli, cbcontratobbjur.telefone_cel_str), 
	data_contrato_dat 		= Coalesce(importabbjurtmp.data_vencimento, cbcontratobbjur.data_contrato_dat), 
	despesas_finan_num 		= Coalesce(importabbjurtmp.valor_total, cbcontratobbjur.despesas_finan_num),

	nome_avalista1_str			= Coalesce(importabbjurtmp.nome_val, cbcontratobbjur.nome_avalista1_str),
	cpf_avalista1_str				= Coalesce(importabbjurtmp.cpf_val, cbcontratobbjur.cpf_avalista1_str),
	endereco_avalista1_str	= Coalesce(importabbjurtmp.endereco_val, cbcontratobbjur.endereco_avalista1_str),
	bairro_avalista1_str		= Coalesce(importabbjurtmp.bairro_val, cbcontratobbjur.bairro_avalista1_str),
	cep_avalista1_str				= Coalesce(importabbjurtmp.cep_val, cbcontratobbjur.cep_avalista1_str),
	cidade_avalista1_str		= Coalesce(importabbjurtmp.municipio_val, cbcontratobbjur.cidade_avalista1_str),
	estado_avalista1_str		= Coalesce(importabbjurtmp.uf_val, cbcontratobbjur.estado_avalista1_str),
	fone_avalista1_str			= Coalesce(importabbjurtmp.telefone_val, cbcontratobbjur.fone_avalista1_str),
	fone_trab_avalista1_str = Coalesce(importabbjurtmp.telefone_com_val, cbcontratobbjur.fone_trab_avalista1_str),
	fax_avalista1_str				= Coalesce(importabbjurtmp.telefone_cel_val, cbcontratobbjur.fax_avalista1_str),

	local_trab_avalista2_str	= Coalesce(importabbjurtmp.tipo_vei, cbcontratobbjur.local_trab_avalista2_str),
	chassi_str						= Coalesce(importabbjurtmp.chassi_vei, cbcontratobbjur.chassi_str),
	renavam_str						= Coalesce(importabbjurtmp.renavam_vei, cbcontratobbjur.renavam_str),
	marca_str							= Coalesce(importabbjurtmp.marca_vei, cbcontratobbjur.marca_str),
	modelo_str						= Coalesce(importabbjurtmp.modelo_vei, cbcontratobbjur.modelo_str),
	ano_str								= Coalesce(importabbjurtmp.ano_fabricacao_vei, cbcontratobbjur.ano_str),
	ddd_avalista2_str			= Coalesce(importabbjurtmp.ano_modelo_vei, cbcontratobbjur.ddd_avalista2_str),
	cpf_avalista2_str			= Coalesce(importabbjurtmp.placa_vei, cbcontratobbjur.cpf_avalista2_str),
	cor_str								= Coalesce(importabbjurtmp.cor_vei, cbcontratobbjur.cor_str),
	cidade_avalista2_str	= Coalesce(importabbjurtmp.cidade_vei, cbcontratobbjur.cidade_avalista2_str),
	estado_avalista2_str	= Coalesce(importabbjurtmp.uf_vei, cbcontratobbjur.estado_avalista2_str),

	data_ultima_distrib_dat = dt_movimento,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
	And importabbjurtmp.tipo_registro = '95'
	And importabbjurtmp.inclui_altera = 'A';

	-- Log alteracao contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		332,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
	  importabbjurtmp.cpf_cli,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
										Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratobbjur.id_cbsituacaocontrato_int

	Where importabbjurtmp.tipo_registro = '95'
	And importabbjurtmp.inclui_altera = 'A';

	--Inclusao Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	produto_int,
	modalidade_int,
	agencia_int,
	contrato_int,
	mci_int,
	processo_int,

	nome_produto_str,
	contrato_rao_str,
	valor_devedor_num,
	data_performance_dat,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratobbjur.id_cbcontrato_int,
	numero_parcela,
	data_parcela,
	valor_parcela,
	0,
	'1',

	produto,
	modalidade,
	agencia,
	contrato,
	mci_cliente,
	processo_int,
	
	nome_produto,
	'N',
	valor_negociado,
	data_atualizacao,

	dt_movimento,
	dt_movimento,
	usuario,
	current_timestamp

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.contrato_str = importabbjurtmp.cpf_cli

	Where importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

	-- Distribuicao parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratobbjur.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dt_movimento

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.contrato_str = importabbjurtmp.cpf_cli
											 Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobbjur.id_cbcontrato_int
	Where cbparcela.parcela_int = importabbjurtmp.numero_parcela
	And importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

	-- Log alteracao situacao contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		332,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o - ' || arquivo,
	  importabbjurtmp.cpf_cli,
	  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para A'

	From importabbjurtmp Inner Join cbcontratobbjur On cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
											 Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratobbjur.id_cbsituacaocontrato_int
	Where cbcontratobbjur.id_cbsituacaocontrato_int = '6'
	And importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

	--Alteracao situacao contrato
	Update cbcontratobbjur Set
	id_cbsituacaocontrato_int = 1,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobbjur.id_cbcontrato_int = importabbjurtmp.id_cbcontrato
	And cbcontratobbjur.id_cbsituacaocontrato_int = '6'
	And importabbjurtmp.tipo_registro In ('90', '95')
	And importabbjurtmp.inclui_altera_parcela = 'I';

end if;

 */

RETURN NULL;
END;
$_$;

--
-- TOC entry 2010 (class 1255 OID 27489)
-- Name: importa_bmc(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_bmc(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;

cursor_contrato record;
dt_distribuicao date;
int_retiradas int4;
int_total  int4;

int_normal int4;
int_saldorem int4;
int_novo int4;
int_regua int8;

BEGIN

--Seta data de distribuiï¿½ï¿½o
dt_distribuicao:= (Select data_processamento From importabmctmp where tipo_registro = '0');

--Seta a rï¿½gua
int_regua:= (select id_esregua_int from esregua where id_gecliente_int = 7 and codigo_int = 1);

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importabmctmp Set
	id_fimoeda = 1
	Where tipo_registro = '1';
	--Update importabmctmp Set
	--id_fimoeda = fimoeda.id_fimoeda_int
	--Where indice_moeda = fimoeda.codigo_int
	--And tipo_registro = '1';

	-- Seta filial do BMC
	Update importabmctmp Set
	id_filialcliente = cbdistribuidorcliente.id_cbdistribuidorcliente_int
	Where codigo_filial = cbdistribuidorcliente.codigo_str
	And cbdistribuidorcliente.id_gecliente_int = '7'
	And tipo_registro = '1';

	-- Seta filial da Paschoalotto
	--Update importabmctmp Set
	--id_gefilial =  Case When codigo_filial = '12' then 1
	--               			When codigo_filial = '2' then 12
	--                    When codigo_filial = '14' then 15
	--               			When codigo_filial = '19' then 17
	--               			When codigo_filial = '11' then 21
	--                    When codigo_filial = '17' then 22
	--               			When codigo_filial = '6' then 24
        --								 Else 1
	--							 End

	-- Seta filial da Paschoalotto
	Update importabmctmp Set
	id_gefilial =  Case When codigo_filial = '1' then 20
				When codigo_filial = '2' then 12
				When codigo_filial = '3' then 10
				When codigo_filial = '4' then 10
				When codigo_filial = '6' then 24
				When codigo_filial = '8' then 2
				When codigo_filial = '9' then 3
				When codigo_filial = '10' then 29
				When codigo_filial = '11' then 21
				When codigo_filial = '12' then 1
				When codigo_filial = '13' then 26
				When codigo_filial = '14' then 15
				When codigo_filial = '15' then 3
				When codigo_filial = '16' then 18
				When codigo_filial = '17' then 22
				When codigo_filial = '19' then 17
				When codigo_filial = '21' then 20
				When codigo_filial = '23' then 20
				When codigo_filial = '24' then 25
				When codigo_filial = '25' then 20
				When codigo_filial = '27' then 28
				Else 1
				End

	Where tipo_registro = '1';

	-- Seta tipo de negï¿½cio
	--Update importabmctmp Set id_tiponegocio = 18;

	-- Altera contrato - contratos DataFlex
	Update cbcontratobmc Set
	contrato_str = importabmctmp.contrato
	Where contrato_str = importabmctmp.campo_contrato
	And id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro In ('1', '4')
	And importabmctmp.altera_contrato = 'S';

	-- Log alteraï¿½ï¿½o da contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		245,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato (DataFlex)- Importaï¿½ï¿½o',
	  importabmctmp.contrato,
	  'Contrato alterado ' || importabmctmp.campo_contrato || ' para ' || importabmctmp.contrato

	From importabmctmp
	Where importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro In ('1', '4')
	And importabmctmp.altera_contrato = 'S';

  -- 26/08/05 Traz id de etapas
  int_normal:= (Select id_cbetapa_int From cbetapa where id_gecliente_int = '7' and codigo_str = '4');
	int_saldorem:= (Select id_cbetapa_int From cbetapa where id_gecliente_int = '7' and codigo_str = '2');
	int_novo:= (Select id_cbetapa_int From cbetapa where id_gecliente_int = '7' and codigo_str = '5');

	-- 26/08/05 Altera etapa para dif Saldo Remanescente
	Update importabmctmp Set
         id_cbetapa = int_normal
	 Where importabmctmp.cod_produto_cob <> '08' or cod_produto_cob is null;

	Update importabmctmp Set
	id_cbetapa = int_saldorem
	 Where importabmctmp.cod_produto_cob = '08';

	 Update importabmctmp Set
	id_cbetapa = int_novo
	 Where (importabmctmp.cod_produto_cob <> '08' or cod_produto_cob is null)
	 and importabmctmp.contratos_novos_int = '1';

end if;

-- Contrato
if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratobmc
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_fimoeda_int,
	id_cbetapa_int,

	contrato_str,
	id_cbdistribuidorcliente_int,
	nucleo_str,
	tipo_contrato_str,
	codigo_loja_num,
	loja_str,
	data_contrato_dat,
	codigo_produto_num,
	produto_str,
	taxa_financiamento_num,
	numero_total_parcelas_int,
	valor_montante_num,
	valor_prestacao_num,
	data_pri_vencimento_dat,
	data_ult_vencimento_dat,
	marca_str,
	modelo_str,
	ano_str,
	cor_str,
	placa_str,
	endereco_trabalho_str,
	ramal_trabalho_str,
	telefone_trabalho_str,
	bairro_trabalho_str,
	cep_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cpf_str,
	tipo_pessoa_str,
	nome_str,
	sexo_str,
	dt_nascimento_dat,
	rg_str,
	org_exp_rg_str,
	uf_rg_str,
	estado_civil_str,
	nome_conjuge_str,
	pai_str,
	mae_str,
	endereco_str,
	bairro_str,
	cep_str,
	cidade_str,
	estado_str,
	telefone_str,
	local_trabalho_str,
	cpf_avalista1_str,
	nome_avalista1_str,
	endereco_avalista1_str,
	bairro_avalista1_str,
	cep_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	fone_avalista1_str,
	fone_cel_avalista1_str,
	nome_ref1_avalista1_str,
	fone_ref1_avalista1_str,
	nome_ref2_avalista1_str,
	fone_ref2_avalista1_str,
	cpf_avalista2_str,
	nome_avalista2_str,
	endereco_avalista2_str,
	bairro_avalista2_str,
	cep_avalista2_str,
	cidade_avalista2_str,
	estado_avalista2_str,
	fone_avalista2_str,
	fone_cel_avalista2_str,
	nome_ref1_avalista2_str,
	fone_ref1_avalista2_str,
	nome_ref2_avalista2_str,
	fone_ref2_avalista2_str,
	codigo_empresa_str,
	empresa_str,
	codigo_produto_cob_str,
	produto_cob_str,
	tipo_seguro_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,

	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_tiponegocio,
	id_fimoeda,
	id_cbetapa,

	contrato,
	id_filialcliente,
	nucleo,
	operacao,
	codigo_loja,
	loja,
	data_contrato,
	codigo_produto,
	produto,
	taxa_financiamento,
	plano,
	valor_financiado ,
	valor_prestacao,
	data_pri_vencimento,
	data_ult_vencimento,
	marca,
	modelo,
	ano,
	cor,
	placa,
	endereco_com_cli,
	ramal_com_cli,
	telefone_com_cli,
	bairro_com_cli,
	cep_com_cli,
	cidade_com_cli ,
	uf_com_cli,
	cpf_cli,
	Case When (length(cpf_cli) <= 11) Then 'F'
			 When (length(cpf_cli) > 11) Then 'J'
			 Else NULL
	End,
	nome_cli,
	sexo_cli,
	data_nascimento_cli,
	identidade_cli,
	orgao_emissor_cli,
	uf_identidade_cli,
	estado_civil_cli,
	conjuge_cli,
	pai,
	mae,
	endereco_cli,
	bairro_cli,
	cep_cli,
	cidade_cli,
	Case When (uf_cli <> '') Then uf_cli Else NULL End,
	telefone_cli,
	empresa_cli,
	cpf_aval1,
	nome_aval1,
	endereco_aval1,
	bairro_aval1,
	cep_aval1,
	cidade_aval1,
	uf_aval1,
	telefone_aval1,
	telefone_cel_aval1,
	referencia1_aval1,
	tel_referencia1_aval1,
	referencia2_aval1,
	tel_referencia2_aval1,
	cpf_aval2,
	nome_aval2,
	endereco_aval2,
	bairro_aval2,
	cep_aval2,
	cidade_aval2,
	uf_aval2,
	telefone_aval2,
	telefone_cel_aval2,
	referencia1_aval2,
	tel_referencia1_aval2,
	referencia2_aval2,
	tel_referencia2_aval2,
	cod_empresa_bmc,
	empresa_bmc,
	cod_produto_cob,
	produto_cob,
	tipo_seguro,

	dt_distribuicao,
	dt_distribuicao,
	1,

	current_timestamp,
	usuario

	From importabmctmp
	Where processo = 'E0'
	And tipo_registro = '1'
	And inclui_altera = 'I';

	-- Alteracao de Contrato
	Update cbcontratobmc Set
	tipo_contrato_str = importabmctmp.operacao,
	codigo_loja_num	=	importabmctmp.codigo_loja,
	loja_str	=	importabmctmp.loja,
	data_contrato_dat	=	importabmctmp.data_contrato,
	codigo_produto_num	=	importabmctmp.codigo_produto,
	produto_str	=	importabmctmp.produto,
	taxa_financiamento_num	=	importabmctmp.taxa_financiamento,
	numero_total_parcelas_int	=	importabmctmp.plano,
	valor_montante_num	=	importabmctmp.valor_financiado,
	valor_prestacao_num	=	importabmctmp.valor_prestacao,
	data_pri_vencimento_dat	=	importabmctmp.data_pri_vencimento,
	data_ult_vencimento_dat	=	importabmctmp.data_ult_vencimento,
	marca_str	=	importabmctmp.marca,
	modelo_str	=	importabmctmp.modelo,
	ano_str	=	importabmctmp.ano,
	cor_str	=	importabmctmp.cor,
	placa_str	=	importabmctmp.placa,
	endereco_trabalho_str	=	importabmctmp.endereco_com_cli,
	ramal_trabalho_str	=	importabmctmp.ramal_com_cli,
	telefone_trabalho_str	=	importabmctmp.telefone_com_cli,
	bairro_trabalho_str	=	importabmctmp.bairro_com_cli,
	cep_trabalho_str	=	importabmctmp.cep_com_cli,
	cidade_trabalho_str	=	importabmctmp.cidade_com_cli,
	estado_trabalho_str	=	importabmctmp.uf_com_cli,
	cpf_str	=	importabmctmp.cpf_cli,
	tipo_pessoa_str = Case When (length(importabmctmp.cpf_cli) <= 11) Then 'F'
			 									 When (length(importabmctmp.cpf_cli) > 11) Then 'J'
			 									 Else NULL
										End,
	nome_str	=	importabmctmp.nome_cli,
	sexo_str	=	importabmctmp.sexo_cli,
	dt_nascimento_dat	=	importabmctmp.data_nascimento_cli,
	rg_str	=	importabmctmp.identidade_cli,
	org_exp_rg_str	=	importabmctmp.orgao_emissor_cli,
	uf_rg_str	=	importabmctmp.uf_identidade_cli,
	estado_civil_str	=	importabmctmp.estado_civil_cli,
	nome_conjuge_str	=	importabmctmp.conjuge_cli,
	pai_str	=	importabmctmp.pai,
	mae_str	=	importabmctmp.mae,
	endereco_str	=	importabmctmp.endereco_cli,
	bairro_str	=	importabmctmp.bairro_cli,
	cep_str	=	importabmctmp.cep_cli,
	cidade_str 	=	importabmctmp.cidade_cli,
	estado_str	=	Case When (importabmctmp.uf_cli <> '') Then importabmctmp.uf_cli Else NULL End,
	telefone_str	=	importabmctmp.telefone_cli,
	local_trabalho_str	=	importabmctmp.empresa_cli,
	cpf_avalista1_str	=	importabmctmp.cpf_aval1,
	nome_avalista1_str	=	importabmctmp.nome_aval1,
	endereco_avalista1_str	=	importabmctmp.endereco_aval1,
	bairro_avalista1_str	=	importabmctmp.bairro_aval1,
	cep_avalista1_str	=	importabmctmp.cep_aval1,
	cidade_avalista1_str	=	importabmctmp.cidade_aval1,
	estado_avalista1_str	=	importabmctmp.uf_aval1,
	fone_avalista1_str	=	importabmctmp.telefone_aval1,
	fone_cel_avalista1_str	=	importabmctmp.telefone_cel_aval1,
	nome_ref1_avalista1_str	=	importabmctmp.referencia1_aval1,
	fone_ref1_avalista1_str	=	importabmctmp.tel_referencia1_aval1,
	nome_ref2_avalista1_str	=	importabmctmp.referencia2_aval1,
	fone_ref2_avalista1_str	=	importabmctmp.tel_referencia2_aval1,
	cpf_avalista2_str	=	importabmctmp.cpf_aval2,
	nome_avalista2_str	=	importabmctmp.nome_aval2,
	endereco_avalista2_str	=	importabmctmp.endereco_aval2,
	bairro_avalista2_str	=	importabmctmp.bairro_aval2,
	cep_avalista2_str	=	importabmctmp.cep_aval2,
	cidade_avalista2_str	=	importabmctmp.cidade_aval2,
	estado_avalista2_str	=	importabmctmp.uf_aval2,
	fone_avalista2_str	=	importabmctmp.telefone_aval2,
	fone_cel_avalista2_str	=	importabmctmp.telefone_cel_aval2,
	nome_ref1_avalista2_str	=	importabmctmp.referencia1_aval2,
	fone_ref1_avalista2_str	=	importabmctmp.tel_referencia1_aval2,
	nome_ref2_avalista2_str	=	importabmctmp.referencia2_aval2,
	fone_ref2_avalista2_str	=	importabmctmp.tel_referencia2_aval2,
	codigo_empresa_str = importabmctmp.cod_empresa_bmc,
	empresa_str = importabmctmp.empresa_bmc,
	codigo_produto_cob_str = importabmctmp.cod_produto_cob,
	produto_cob_str = importabmctmp.produto_cob,
	tipo_seguro_str = importabmctmp.tipo_seguro,

	data_ultima_distrib_dat = dt_distribuicao,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where contrato_str = importabmctmp.contrato
	And id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '1'
	And importabmctmp.inclui_altera = 'A';

	-- Log alteraï¿½ï¿½o do contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		245,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratobmc.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbsituacaocontrato On cbcontratobmc.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '1'
	And importabmctmp.inclui_altera = 'A';

end if;

-- Parcela
if comando = '4' then

	--Inclusï¿½o Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
        id_esregua_int,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratobmc.id_cbcontrato_int,
	numero_parcela,
	data_vencimento,
	valor_parcela,
	0,
	'1',
	dt_distribuicao,
	dt_distribuicao,
        int_regua,
	usuario,
	current_timestamp

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Where importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'I';

	-- Distrubuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratobmc.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dt_distribuicao

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobmc.id_cbcontrato_int
	Where importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'I'
	And importabmctmp.numero_parcela = cbparcela.parcela_int;

	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		245,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratobmc.contrato_str,
	  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para ' ||
		Case When (cbcontratobmc.id_cbsituacaocontrato_int = 6) Then 'A'
			 	 Else cbsituacaocontrato.codigo_str
		End

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbsituacaocontrato On cbcontratobmc.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'I';

	--Alteraï¿½ï¿½o situacao contrato
	Update cbcontratobmc Set
	id_cbsituacaocontrato_int = Case When (cbcontratobmc.id_cbsituacaocontrato_int = 6) Then 1
			 									 					 Else cbcontratobmc.id_cbsituacaocontrato_int
															End,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where contrato_str = importabmctmp.contrato
	And id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'I';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	data_vencimento_dat = importabmctmp.data_vencimento,
	valor_principal_num = importabmctmp.valor_parcela,
	data_ultima_distrib_dat = dt_distribuicao

	Where cbparcela.parcela_int = importabmctmp.numero_parcela
	And cbparcela.situacao_int <> '4'
	And cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
	And cbcontratobmc.contrato_str = importabmctmp.contrato
	And cbcontratobmc.id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'A';

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	245,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratobmc.contrato_str,
	importabmctmp.numero_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbparcela on cbcontratobmc.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importabmctmp.numero_parcela
	And cbparcela.situacao_int <> '4'
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'A';

	--Reenvio de parcela
	--E0

	--Alteraï¿½ï¿½o situacao contrato
	for cursor_contrato in
		Select Distinct cbcontratobmc.id_cbcontrato_int, cbcontratobmc.contrato_str, cbcontratobmc.id_cbsituacaocontrato_int
		From cbcontratobmc Inner Join importabmctmp On
		(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
		Inner Join cbparcela On cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
		Where cbparcela.parcela_int = importabmctmp.numero_parcela
		And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
		And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
		And cbcontratobmc.id_cbsituacaocontrato_int = 6
		And importabmctmp.processo = 'E0'
		And importabmctmp.tipo_registro = '4'
		And importabmctmp.inclui_altera = 'A'

	loop

		Update cbcontratobmc Set id_cbsituacaocontrato_int = 1
		Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

		-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
		Insert Into gehistoricousuario
			(id_geusuario_int,
			id_gecliente_int,
			id_geaplicacao_int,
			data_hora_dat,
			evento_str,
			contrato_str,
			obs_txt)

		Values(
			usuario,
			cliente,
			245,
			current_timestamp,
			'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			cursor_contrato.contrato_str,
			'Parcela redirecioanda. Contrato Aberto');

	end loop;

	--Log renvio parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	245,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratobmc.contrato_str,
	importabmctmp.numero_parcela,
	'Reabertura da parcela'

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbparcela on cbcontratobmc.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importabmctmp.numero_parcela
	And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'A';

	--Redistribuiï¿½ï¿½o Parcela
	Update cbdistribparcela Set
	data_pre_distrib_dat = dt_distribuicao

	Where cbdistribparcela.id_cbcontrato_int = cbcontratobmc.id_cbcontrato_int
	And cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int
	And cbparcela.parcela_int = importabmctmp.numero_parcela
	And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
	And cbcontratobmc.contrato_str = importabmctmp.contrato
	And cbcontratobmc.id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'A';

	--Reenvio Parcela
	Update cbparcela Set
	situacao_int = 0,
	valor_principal_num = importabmctmp.valor_parcela,
	data_pagamento_dat = Null,

	data_ultima_distrib_dat = dt_distribuicao

	Where cbparcela.parcela_int = importabmctmp.numero_parcela
	And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
	And cbcontratobmc.contrato_str = importabmctmp.contrato
	And cbcontratobmc.id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'E0'
	And importabmctmp.tipo_registro = '4'
	And importabmctmp.inclui_altera = 'A';

	--Retirada de parcela
	--R1 / R2 / R3 / R5 / R6 / R&

	Update cbparcela Set
	data_pagamento_dat = importabmctmp.data_pagamento,
	valor_pago_num = Null,
	situacao_int = Case When importabmctmp.processo In ('R1', 'R2', 'R3', 'R5', 'R6', 'R7') Then 4
			 								When importabmctmp.processo = 'R4' Then 6
								 End

	Where cbparcela.parcela_int = importabmctmp.numero_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
	And cbcontratobmc.contrato_str = importabmctmp.contrato
	And cbcontratobmc.id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And cbparcela.situacao_int Not In ('4', '6')
	And importabmctmp.processo In ('R1', 'R2','R3', 'R4', 'R5', 'R6', 'R7')
	And importabmctmp.tipo_registro = '4';

	--FollowuP retirada parcela
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobmc.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	Case When importabmctmp.processo = 'R2' Then 'Baixada Pagamento - parcela ' || cbparcela.parcela_int
	 		 Else 'Cancelada - parcela ' || cbparcela.parcela_int
	End,
	Case When importabmctmp.processo = 'R1' Then 10438
			 When importabmctmp.processo = 'R2' Then 10439
			 When importabmctmp.processo = 'R3' Then 10440
			 When importabmctmp.processo = 'R4' Then 10441
			 When importabmctmp.processo = 'R5' Then 10442
			 When importabmctmp.processo = 'R6' Then 10443
			 When importabmctmp.processo = 'R7' Then 10831
	End,

	1,
	current_timestamp

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobmc.id_cbcontrato_int
	Where cbparcela.parcela_int = importabmctmp.numero_parcela
	And cbparcela.situacao_int In ('4', '6')
	And cbparcela.valor_pago_num Is Null
	And importabmctmp.processo In ('R1', 'R2','R3', 'R4', 'R5', 'R6', 'R7')
	And importabmctmp.tipo_registro = '4';

	-- Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbcontratobmc.id_cbtiponegocio_int, cbcontratobmc.id_cbcontrato_int, cbcontratobmc.contrato_str, cbcontratobmc.id_cbsituacaocontrato_int
		From cbcontratobmc Inner Join importabmctmp On
		(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
		Where importabmctmp.processo In ('R1', 'R2', 'R3', 'R4', 'R5', 'R6', 'R7')
		And importabmctmp.tipo_registro = '4'
		And cbcontratobmc.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela
																 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			-- Armazena contratos que estavam no Jurï¿½dico
			if cursor_contrato.id_cbsituacaocontrato_int = 4 then

				Update importabmctmp Set
				juridico = 'S'

				Where importabmctmp.id_tiponegocio = cursor_contrato.id_cbtiponegocio_int
				And importabmctmp.contrato = cursor_contrato.contrato_str
				And importabmctmp.processo In ('R1', 'R2', 'R3', 'R4', 'R5', 'R6', 'R7')
				And importabmctmp.tipo_registro = '4';

			end if;

			Update cbcontratobmc Set id_cbsituacaocontrato_int = 6
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
				245,
				current_timestamp,
			  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			  cursor_contrato.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

	--Quitaï¿½ï¿½o de contrato
	--R8

	--Log alteraï¿½ï¿½o siutaï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	245,
	current_timestamp,
	'Baixa da Parcela - Importaï¿½ï¿½o',
	cbcontratobmc.contrato_str,
	cbparcela.parcela_int,
	'Parcela baixada. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbparcela on cbcontratobmc.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.situacao_int Not In ('4', '6')
	And importabmctmp.processo = 'R8'
	And importabmctmp.tipo_registro = '4';

	-- Alteraï¿½ï¿½o situaï¿½ï¿½o parcela
	Update cbparcela Set
	data_pagamento_dat = importabmctmp.data_pagamento,
	valor_pago_num = Null,
	situacao_int = 4

	Where cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
	And cbcontratobmc.contrato_str = importabmctmp.contrato
	And cbcontratobmc.id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And cbparcela.situacao_int Not In ('4', '6')
	And importabmctmp.processo = 'R8'
	And importabmctmp.tipo_registro = '4';

	--Follow UP	baixa contrato
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobmc.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Quitaï¿½ï¿½o do Contrato',
	10832,

	1,
	current_timestamp

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	And importabmctmp.processo  = 'R8'
	And importabmctmp.tipo_registro = '4'
	And cbcontratobmc.id_cbsituacaocontrato_int <> '6';

	-- Contratos Jurï¿½dico
	Update importabmctmp Set
	juridico = 'S'

	Where importabmctmp.id_tiponegocio = cbcontratobmc.id_cbtiponegocio_int
	And importabmctmp.contrato = cbcontratobmc.contrato_str
	And importabmctmp.processo  = 'R8'
	And importabmctmp.tipo_registro = '4'
	And cbcontratobmc.id_cbsituacaocontrato_int = '4';

	-- Baixa contrato
	Update cbcontratobmc Set id_cbsituacaocontrato_int = 6

	Where contrato_str = importabmctmp.contrato
	And id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'R8'
	And importabmctmp.tipo_registro = '4'
	And cbcontratobmc.id_cbsituacaocontrato_int <> '6';

		--Transferï¿½ncia de contrato
	--R9

	--Log alteraï¿½ï¿½o siutaï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	245,
	current_timestamp,
	'Baixa da Parcela - Importaï¿½ï¿½o',
	cbcontratobmc.contrato_str,
	cbparcela.parcela_int,
	'Parcela baixada. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	Inner Join cbparcela on cbcontratobmc.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.situacao_int Not In ('4', '6')
	And importabmctmp.processo = 'R9'
	And importabmctmp.tipo_registro = '4';

	-- Alteraï¿½ï¿½o situaï¿½ï¿½o parcela
	Update cbparcela Set
	data_pagamento_dat = importabmctmp.data_pagamento,
	valor_pago_num = Null,
	situacao_int = 5

	Where cbparcela.id_cbcontrato_int =  cbcontratobmc.id_cbcontrato_int
	And cbcontratobmc.contrato_str = importabmctmp.contrato
	And cbcontratobmc.id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And cbparcela.situacao_int Not In ('4', '6')
	And importabmctmp.processo = 'R9'
	And importabmctmp.tipo_registro = '4';

	--Follow UP	baixa contrato
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobmc.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Transferï¿½ncia do Contrato',
	12492,

	1,
	current_timestamp

	From importabmctmp Inner Join cbcontratobmc On
	(cbcontratobmc.contrato_str, cbcontratobmc.id_cbtiponegocio_int) = (importabmctmp.contrato, importabmctmp.id_tiponegocio)
	And importabmctmp.processo  = 'R9'
	And importabmctmp.tipo_registro = '4'
	And cbcontratobmc.id_cbsituacaocontrato_int <> '6';

	-- Contratos Jurï¿½dico
	Update importabmctmp Set
	juridico = 'S'

	Where importabmctmp.id_tiponegocio = cbcontratobmc.id_cbtiponegocio_int
	And importabmctmp.contrato = cbcontratobmc.contrato_str
	And importabmctmp.processo  = 'R9'
	And importabmctmp.tipo_registro = '4'
	And cbcontratobmc.id_cbsituacaocontrato_int = '4';

	-- Baixa contrato
	Update cbcontratobmc Set id_cbsituacaocontrato_int = 6

	Where contrato_str = importabmctmp.contrato
	And id_cbtiponegocio_int = importabmctmp.id_tiponegocio
	And importabmctmp.processo = 'R9'
	And importabmctmp.tipo_registro = '4'
	And cbcontratobmc.id_cbsituacaocontrato_int <> '6';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12028 (class 0 OID 0)
-- Dependencies: 2010
-- Name: FUNCTION importa_bmc(text, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_bmc(text, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Bmc';

--
-- TOC entry 2011 (class 1255 OID 27506)
-- Name: importa_bradesco(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_bradesco(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$
DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;

cursor_contrato record;
int_retiradas int4;
int_total  int4;

BEGIN

-- Seta campos dos registros importados
if comando = '0' then

  -- Seta moeda
  Update importabradescotmp Set
  id_fimoeda = 1;

  -- Seta filial da Paschoalotto
  Update importabradescotmp Set
  id_gefilial =  1;

  -- Seta tipo de negï¿½cio
  Update importabradescotmp Set
  id_cbtiponegocio = cbtiponegocio.id_cbtiponegocio_int
  Where cbtiponegocio.id_gecliente_int = cliente
  And Trim(cbtiponegocio.codigo_str) = Trim(tipo_negocio);

end if;

-- Contrato
if comando = '1' then

  --1
  -- Inclusao de Contrato
  Insert Into cbcontratobradesco
  (id_gecliente_int,
  id_geempresa_int,
  id_gefilial_int,
  id_cbtiponegocio_int,
  id_cbdistribuidorcliente_int,
  id_fimoeda_int,
  contrato_str,

  nome_str,
  agencia_int,
  conta_str,
  carteira_str,
  contrato_esp_int,
  cep_str,
  cep_trabalho_str,
  cpf_str,
  cidade_str,
  cidade_trabalho_str,
  complemento_end_fica_str,
  data_fim_operacao_dat,
  data_contrato_dat,
  ddd_str,
  ddd_trabalho_str,
  diretoria_regional_int,
  endereco_str,
  endereco_trabalho_str,
  telefone_str,
  telefone_trabalho_str,
  nome_conjuge_str,
  nome_conjuge_fica_str,
  nome_empresa_cli_str,
  nome_empresa_fica_str,
  mae_str,
  mae_fica_str,
  pai_str,
  pai_fica_str,
  estado_str,
  estado_trabalho_str,

  data_primeira_distrib_dat,
  data_ultima_distrib_dat,
  id_cbsituacaocontrato_int,
  tstamp,
  id_geusuario_int)

  Select
  cliente,
  empresa,
  id_gefilial,
  id_cbtiponegocio,
  id_cbdistribuidorcliente,
  id_fimoeda,
  num_contrato,

  nome,
  agencia,
  conta,
  carteira,
  contrato,
  cep_cli,
  cep_fica,
  cgc_cfp,
  cidade_cli,
  cidade_fica,
  complemento_endereco_fica,
  data_fim_operacao,
  data_ini_operacao,
  ddd_cli,
  ddd_fica,
  diretoria_regional,
  endereco_cli,
  endereco_fica,
  fone_cli,
  fone_fica,
  nome_conjuge_cli,
  nome_conjuge_fica,
  nome_empresa_cli,
  nome_empresa_fica,
  nome_mae_cli,
  nome_mae_fica,
  nome_pai_cli,
  nome_pai_fica,
  uf_cli,
  uf_fica,

  data_remessa,
  data_remessa,
  1,
  current_timestamp,
  usuario

  From importabradescotmp
  Where inclui_altera = 'I';

  -- Alteracao de Contrato
  Update cbcontratobradesco Set

-- Alterado 02/05 - solicitaï¿½ï¿½o da Cytnhtia
--  cep_str                               = importabradescotmp.cep_cli,
--  cidade_str                          = importabradescotmp.cidade_cli,
--  complemento_end_fica_str = importabradescotmp.complemento_endereco_fica,
--  endereco_str                      = importabradescotmp.endereco_cli,

  nome_str                            = importabradescotmp.nome,
  agencia_int                        = importabradescotmp.agencia,
  conta_str                           = importabradescotmp.conta,
  carteira_str                          = importabradescotmp.carteira,
  contrato_esp_int                 = importabradescotmp.contrato,
  cep_trabalho_str                = importabradescotmp.cep_fica,
  cpf_str                                = importabradescotmp.cgc_cfp,
  cidade_trabalho_str           = importabradescotmp.cidade_fica,
  data_fim_operacao_dat     = importabradescotmp.data_fim_operacao,
  data_contrato_dat             = importabradescotmp.data_ini_operacao,
  ddd_str                               = importabradescotmp.ddd_cli,
  ddd_trabalho_str                = importabradescotmp.ddd_fica,
  diretoria_regional_int          = importabradescotmp.diretoria_regional,
  endereco_trabalho_str       = importabradescotmp.endereco_fica,
  telefone_str                        = importabradescotmp.fone_cli,
  telefone_trabalho_str         = importabradescotmp.fone_fica,
  nome_conjuge_str             = importabradescotmp.nome_conjuge_cli,
  nome_conjuge_fica_str     = importabradescotmp.nome_conjuge_fica,
  nome_empresa_cli_str       = importabradescotmp.nome_empresa_cli,
  nome_empresa_fica_str     = importabradescotmp.nome_empresa_fica,
  mae_str                              = importabradescotmp.nome_mae_cli,
  mae_fica_str                      = importabradescotmp.nome_mae_fica,
  pai_str                                = importabradescotmp.nome_pai_cli,
  pai_fica_str                        = importabradescotmp.nome_pai_fica,
  estado_str                          = importabradescotmp.uf_cli,
  estado_trabalho_str           = importabradescotmp.uf_fica,
  data_primeira_distrib_dat   = importabradescotmp.data_remessa,

  data_ultima_distrib_dat      = importabradescotmp.data_remessa,
  tstamp = current_timestamp,
  id_geusuario_int = usuario

  Where contrato_str = importabradescotmp.num_contrato
  And id_cbtiponegocio_int = importabradescotmp.id_cbtiponegocio
  And importabradescotmp.inclui_altera = 'A';

  -- Log alteraï¿½ï¿½o contrato
  Insert Into gehistoricousuario
   (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    evento_str,
    contrato_str,
    obs_txt)

  Select
    usuario,
    cliente,
    300,
    current_timestamp,
    'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
                cbcontratobradesco.contrato_str,
    'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

  From importabradescotmp Inner Join cbcontratobradesco On
  (cbcontratobradesco.contrato_str, cbcontratobradesco.id_cbtiponegocio_int) =

(importabradescotmp.num_contrato, importabradescotmp.id_cbtiponegocio)
  Inner Join cbsituacaocontrato On cbcontratobradesco.id_cbsituacaocontrato_int =

cbsituacaocontrato.id_cbsituacaocontrato_int
  Where importabradescotmp.inclui_altera = 'A';

  --Inclusï¿½o Parcela
  Insert Into cbparcela
  (id_cbcontrato_int,
  parcela_int,
  tipo_str,
  data_vencimento_dat,
  data_entrada_ca_dat,
  valor_principal_num,
  vlr_devedor_total_num,
  situacao_int,
  id_str,
  id_esregua_int,

  data_primeira_distrib_dat,
  data_ultima_distrib_dat,
  id_geusuario_int,
  tstamp)

  Select
  cbcontratobradesco.id_cbcontrato_int,
  num_parcela,
  '1',
  data_vencimento,
  data_ca,
  valor_inicial,
  valor_corrente,
  0,
  id,
  153,

  data_remessa,
  data_remessa,
  usuario,
  current_timestamp

  From importabradescotmp Inner Join cbcontratobradesco On
  (cbcontratobradesco.contrato_str, cbcontratobradesco.id_cbtiponegocio_int) =

(importabradescotmp.num_contrato, importabradescotmp.id_cbtiponegocio)
  Where importabradescotmp.inclui_altera_parcela = 'I'
  Order by importabradescotmp.num_contrato, importabradescotmp.num_parcela;

  -- Distrubuiï¿½ï¿½o da parcela
  Insert Into cbdistribparcela
  (id_cbcontrato_int,
   id_cbparcela_int,
   data_pre_distrib_dat)

  Select
  cbcontratobradesco.id_cbcontrato_int,
  cbparcela.id_cbparcela_int,
  data_remessa

  From importabradescotmp Inner Join cbcontratobradesco On
  (cbcontratobradesco.contrato_str, cbcontratobradesco.id_cbtiponegocio_int) =

(importabradescotmp.num_contrato, importabradescotmp.id_cbtiponegocio)
  Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobradesco.id_cbcontrato_int
  Where importabradescotmp.inclui_altera_parcela = 'I'
  And importabradescotmp.num_parcela = cbparcela.parcela_int;

  --Log alteraï¿½ï¿½o Parcela
  Insert Into gehistoricousuario
  (id_geusuario_int,
  id_gecliente_int,
  id_geaplicacao_int,
  data_hora_dat,
  evento_str,
  contrato_str,
  parcela_int,
  obs_txt)

  Select
  usuario,
  cliente,
  300,
  current_timestamp,
  'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
  cbcontratobradesco.contrato_str,
  importabradescotmp.num_parcela,
  'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

  From importabradescotmp Inner Join cbcontratobradesco On
  (cbcontratobradesco.contrato_str, cbcontratobradesco.id_cbtiponegocio_int) =

(importabradescotmp.num_contrato, importabradescotmp.id_cbtiponegocio)
  Inner Join cbparcela on cbcontratobradesco.id_cbcontrato_int = cbparcela.id_cbcontrato_int

  Where cbparcela.parcela_int = importabradescotmp.num_parcela
  And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
  And importabradescotmp.inclui_altera_parcela = 'A';

  --Alteraï¿½ï¿½o Parcela
  Update cbparcela Set
  data_vencimento_dat = importabradescotmp.data_vencimento,
  data_entrada_ca_dat = importabradescotmp.data_ca,
  valor_principal_num = importabradescotmp.valor_inicial,
  vlr_devedor_total_num = importabradescotmp.valor_corrente,
  situacao_int = Case When cbparcela.situacao_int In ('4', '6') Then 0
                      Else cbparcela.situacao_int
                  End,
  data_pagamento_dat = NULL,
  valor_pago_num = NULL,
  id_str = importabradescotmp.id,

  data_ultima_distrib_dat = importabradescotmp.data_remessa

  Where cbparcela.parcela_int = importabradescotmp.num_parcela
  And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
  And cbparcela.id_cbcontrato_int =  cbcontratobradesco.id_cbcontrato_int
  And cbcontratobradesco.contrato_str = importabradescotmp.num_contrato
  And cbcontratobradesco.id_cbtiponegocio_int = importabradescotmp.id_cbtiponegocio
  And importabradescotmp.inclui_altera_parcela = 'A';

  -- Log alteraï¿½ï¿½o situaï¿½ï¿½o do contrato
  Insert Into gehistoricousuario
   (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    evento_str,
    contrato_str,
    obs_txt)

    Select
    usuario,
    cliente,
    300,
    current_timestamp,
    'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o.',
    cbcontratobradesco.contrato_str,
    'Situaï¿½ï¿½o do Contrato alterada de B para A'

    From importabradescotmp Inner Join cbcontratobradesco On
    (cbcontratobradesco.contrato_str, cbcontratobradesco.id_cbtiponegocio_int) =

(importabradescotmp.num_contrato, importabradescotmp.id_cbtiponegocio)
    Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobradesco.id_cbcontrato_int
    Where cbcontratobradesco.id_cbsituacaocontrato_int = '6'
    And cbparcela.parcela_int = importabradescotmp.num_parcela
    And cbparcela.situacao_int = '0'
    And importabradescotmp.inclui_altera_parcela In ('I', 'A');

    --Alteraï¿½ï¿½o situacao contrato
    Update cbcontratobradesco Set
      id_cbsituacaocontrato_int = 1,

    tstamp = current_timestamp,
    id_geusuario_int = usuario

    Where cbcontratobradesco.contrato_str = importabradescotmp.num_contrato
    And cbcontratobradesco.id_cbtiponegocio_int = importabradescotmp.id_cbtiponegocio
    And cbparcela.id_cbcontrato_int = cbcontratobradesco.id_cbcontrato_int
    And cbparcela.parcela_int = importabradescotmp.num_parcela
    And cbparcela.situacao_int = '0'
    And cbcontratobradesco.id_cbsituacaocontrato_int = '6'
    And importabradescotmp.inclui_altera_parcela  In ('I', 'A');

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 2012 (class 1255 OID 27516)
-- Name: importa_bradescocartao(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_bradescocartao(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$
DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;
arquivo alias for $5;

BEGIN

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importabradescocartaotmp Set id_fimoeda = 1
	Where importabradescocartaotmp.tipo_registro In ('001', '002');

	-- Seta filial da Paschoalotto
	Update importabradescocartaotmp Set id_gefilial =  1
	Where importabradescocartaotmp.tipo_registro In ('001', '002');

	-- Seta tipo de negï¿½cio
	Update importabradescocartaotmp Set
	id_cbtiponegocio = cbtiponegocio.id_cbtiponegocio_int
 	Where cbtiponegocio.id_gecliente_int = cliente
	And Trim(cbtiponegocio.codigo_str) = '1';

	--Seta etapa

	-- Na 1ï¿½ Fase entram Dias de atraso Atï¿½ a Faixa Final
	Update importabradescocartaotmp Set
	  id_cbetapa = Case When importabradescocartaotmp.dias_atraso Between '0'   And '130'  Then 14
										When importabradescocartaotmp.dias_atraso Between '131'  And '191'  Then 15
										When importabradescocartaotmp.dias_atraso Between '192'  And '252'  Then 16
										When importabradescocartaotmp.dias_atraso Between '253'  And '313'  Then 17
										When importabradescocartaotmp.dias_atraso Between '314'  And '374'  Then 18
										When importabradescocartaotmp.dias_atraso Between '375'  And '465'  Then 19
										When importabradescocartaotmp.dias_atraso Between '466'  And '556'  Then 20
										When importabradescocartaotmp.dias_atraso Between '557'  And '647'  Then 21
										When importabradescocartaotmp.dias_atraso Between '648'  And '738'  Then 22
										When importabradescocartaotmp.dias_atraso Between '739'  And '859'  Then 23
										When importabradescocartaotmp.dias_atraso Between '860'  And '980'  Then 24
										When importabradescocartaotmp.dias_atraso Between '981'  And '1101' Then 25
										When importabradescocartaotmp.dias_atraso Between '1102' And '1464' Then 26
										When importabradescocartaotmp.dias_atraso Between '1465' And '9999' Then 27
									Else Null
						 End
 	Where importabradescocartaotmp.tipo_registro In ('001', '002')
  And importabradescocartaotmp.status <> 'R1';

	Update importabradescocartaotmp Set
	id_cbetapa = Case When importabradescocartaotmp.dias_atraso Between '0'   And '110'  Then 28
										When importabradescocartaotmp.dias_atraso Between '111'  And '176'  Then 29
										When importabradescocartaotmp.dias_atraso Between '177'  And '242'  Then 30
										When importabradescocartaotmp.dias_atraso Between '243'  And '308'  Then 31
										When importabradescocartaotmp.dias_atraso Between '309'  And '374'  Then 32
										When importabradescocartaotmp.dias_atraso Between '375'  And '465'  Then 33
										When importabradescocartaotmp.dias_atraso Between '466'  And '556'  Then 34
										When importabradescocartaotmp.dias_atraso Between '557'  And '647'  Then 35
										When importabradescocartaotmp.dias_atraso Between '648'  And '738'  Then 36
										When importabradescocartaotmp.dias_atraso Between '739'  And '859'  Then 37
										When importabradescocartaotmp.dias_atraso Between '860'  And '980'  Then 38
										When importabradescocartaotmp.dias_atraso Between '981'  And '1101' Then 39
										When importabradescocartaotmp.dias_atraso Between '1102' And '1460' Then 40
										When importabradescocartaotmp.dias_atraso Between '1460' And '9999' Then 41
									Else Null
						 End
 	Where importabradescocartaotmp.tipo_registro In ('001', '002')
  And importabradescocartaotmp.status = 'R1';

end if;

-- Contrato
if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratobradescocartao
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_fimoeda_int,
	id_cbetapa_int,
	contrato_str,

	status_cartao_str,
	cpf_str,
	nome_str,
	endereco_str,
	cidade_str,
	estado_str,
	cep_str,
	telefone_str,
	local_trabalho_str,
	telefone_trabalho_str,

	ciclo_cartao_str,
	ciclo_atraso_int,
	data_ultima_fatura_dat,
	calculo_convencionais_dat,
	data_calculo_dat,

	data_status_cartao_dat,
	idade_cartao_int,
	data_contrato_dat,
	valor_limite_num,
	produto_str,
	data_fechamento_dat,
	valor_gastos_num,
	data_pagamento_dat,
	valor_pagamento_num,
	situacao_cacs_str,
	dias_atraso_ult_parc_int,
	despesas_finan_num,
  valor_principal_num,

	ddd_avalista1_str,
	bairro_avalista1_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
  id_cbtiponegocio,
  id_fimoeda,
	id_cbetapa,
  cartao,

	status,
	cgc_portador,
	nome_portador,
	endereco_portador || ' ' || complemento_portador,
	cidade_portador,
	uf_portador,
	cep_portador,
	fone_res_portador,
	empresa_portador,
	fone_com_portador,

	ciclo_cartao,
	ciclo_atraso,
	data_ultima_fatura,
	calculo_convencionais,
	data_calculo,

	data_status,
	idade,
	data_validade,
	limite_gastos,
	identificacao_produto,
	data_fechamento,
	gasto_mes,
	data_ultimo_pagamento,
	valor_ultimo_pagamento,
	situacao_cacs,
	dias_atraso,
	saldo_atual,
	valor_principal,

	codigo_escritorio,
	arquivo,

	data_envio,
	data_envio,
	1,
	current_timestamp,
	usuario

	From importabradescocartaotmp
	Where inclui_altera = 'I';

	--OS: 16952 - Coloquei o log primeiro para poder gerar log com o valor anterior
	-- Log alteraï¿½ï¿½o contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		368,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
    importabradescocartaotmp.cartao,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str ||
		' Valor: ' || cbcontratobradescocartao.valor_principal_num || ' para ' || importabradescocartaotmp.valor_principal

	From importabradescocartaotmp Inner Join cbcontratobradescocartao On cbcontratobradescocartao.id_cbcontrato_int = importabradescocartaotmp.id_cbcontrato
	Inner Join cbsituacaocontrato On cbcontratobradescocartao.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int

	Where importabradescocartaotmp.inclui_altera = 'A';

	-- Alteracao de Contrato
	Update cbcontratobradescocartao Set

	--status_cartao_str			= importabradescocartaotmp.status,
	cpf_str								= importabradescocartaotmp.cgc_portador,
	nome_str							=	importabradescocartaotmp.nome_portador,
	endereco_str					= importabradescocartaotmp.endereco_portador || ' ' || importabradescocartaotmp.complemento_portador,
	cidade_str						= importabradescocartaotmp.cidade_portador,
	estado_str						= importabradescocartaotmp.uf_portador,
	cep_str								= importabradescocartaotmp.cep_portador,
	telefone_str					= importabradescocartaotmp.fone_res_portador,
	local_trabalho_str		= importabradescocartaotmp.empresa_portador,
	telefone_trabalho_str	= importabradescocartaotmp.fone_com_portador,

	ciclo_cartao_str			    = importabradescocartaotmp.ciclo_cartao,
	ciclo_atraso_int			    = importabradescocartaotmp.ciclo_atraso,
	data_ultima_fatura_dat    = importabradescocartaotmp.data_ultima_fatura,
	calculo_convencionais_dat = importabradescocartaotmp.calculo_convencionais,
	data_calculo_dat					= importabradescocartaotmp.data_calculo,

	data_status_cartao_dat	= importabradescocartaotmp.data_status,
	idade_cartao_int			= importabradescocartaotmp.idade,
	data_contrato_dat			= importabradescocartaotmp.data_validade,
	valor_limite_num			= importabradescocartaotmp.limite_gastos,
	produto_str						= importabradescocartaotmp.identificacao_produto,
	data_fechamento_dat		= importabradescocartaotmp.data_fechamento,
	valor_gastos_num			= importabradescocartaotmp.gasto_mes,
	data_pagamento_dat		= importabradescocartaotmp.data_ultimo_pagamento,
	valor_pagamento_num		=	importabradescocartaotmp.valor_ultimo_pagamento,
	situacao_cacs_str			= importabradescocartaotmp.situacao_cacs,
	despesas_finan_num		= importabradescocartaotmp.saldo_atual,
	valor_principal_num		= importabradescocartaotmp.valor_principal,

	data_ultima_distrib_dat	= current_date,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratobradescocartao.id_cbcontrato_int = importabradescocartaotmp.id_cbcontrato
  And importabradescocartaotmp.inclui_altera = 'A';

	-- FollowUp de Status enviado para o contrato
	Insert Into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobradescocartao.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,

	Case When Upper(importabradescocartaotmp.status) = 'A1' Then 11295
			 When Upper(importabradescocartaotmp.status) = 'B1' Then 11296
			 When Upper(importabradescocartaotmp.status) = 'E1' Then 11297
			 When Upper(importabradescocartaotmp.status) = 'F1' Then 11298
			 When Upper(importabradescocartaotmp.status) = 'J1' Then 11299
			 When Upper(importabradescocartaotmp.status) = 'L1' Then 11300
			 When Upper(importabradescocartaotmp.status) = 'N1' Then 11301
			 When Upper(importabradescocartaotmp.status) = 'P1' Then 11302
			 When Upper(importabradescocartaotmp.status) = 'R1' Then 11303
			 When Upper(importabradescocartaotmp.status) = 'S1' Then 11304
			 When Upper(importabradescocartaotmp.status) = 'T1' Then 11305
			 When Upper(importabradescocartaotmp.status) = 'W1' Then 11306
			 When Upper(importabradescocartaotmp.status) = 'X1' Then 11307
			 When Upper(importabradescocartaotmp.status) = 'D1' Then 11308
			 When Upper(importabradescocartaotmp.status) = 'Y1' Then 11309
	End,

	1,
	current_timestamp

	From importabradescocartaotmp Inner Join cbcontratobradescocartao On
	(cbcontratobradescocartao.contrato_str, cbcontratobradescocartao.id_cbtiponegocio_int) = (importabradescocartaotmp.cartao, importabradescocartaotmp.id_cbtiponegocio)
	Where importabradescocartaotmp.tipo_registro In ('001', '002');

	--Inclusï¿½o Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	id_esregua_int,
	parcela_int,
	tipo_str,

	data_vencimento_dat,
	data_status_dat,

	valor_principal_num,
	situacao_int,
	data_entrada_ca_dat,
	saldo_devedor_num,
	valor_devedor_num,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratobradescocartao.id_cbcontrato_int,
	id_esregua,
	numero_parcela,
	'1',

	importabradescocartaotmp.data_ultima_fatura,
	Case WHen importabradescocartaotmp.status = 'R1' Then
	   		data_vencimento
			else
				importabradescocartaotmp.data_ultima_fatura
	end,

	Case When importabradescocartaotmp.status = 'R1' Then
					(importabradescocartaotmp.saldo_atraso + importabradescocartaotmp.saldo_parcelado)
			 Else
			 		(importabradescocartaotmp.saldo_parcelado + importabradescocartaotmp.valor_principal)
	End,
	0,
	Case When importabradescocartaotmp.status = 'R1' Then
					importabradescocartaotmp.data_calculo
			 Else
					importabradescocartaotmp.data_ultima_fatura
	End,

	saldo_atraso,
	saldo_parcelado,

	data_envio,
	data_envio,
	usuario,
	current_timestamp

	From importabradescocartaotmp Inner Join cbcontratobradescocartao On
	(cbcontratobradescocartao.contrato_str, cbcontratobradescocartao.id_cbtiponegocio_int) = (importabradescocartaotmp.cartao, importabradescocartaotmp.id_cbtiponegocio)
	Where importabradescocartaotmp.inclui_altera_parcela = 'I'
	Order by importabradescocartaotmp.cartao, importabradescocartaotmp.numero_parcela;

	-- Distribuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratobradescocartao.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	importabradescocartaotmp.data_envio

	From importabradescocartaotmp Inner Join cbcontratobradescocartao On
	(cbcontratobradescocartao.contrato_str, cbcontratobradescocartao.id_cbtiponegocio_int) = (importabradescocartaotmp.cartao, importabradescocartaotmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobradescocartao.id_cbcontrato_int
	Where importabradescocartaotmp.inclui_altera_parcela = 'I'
	And   importabradescocartaotmp.numero_parcela = cbparcela.parcela_int;

	--Log alteraï¿½ï¿½o Parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	368,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	importabradescocartaotmp.cartao,
	importabradescocartaotmp.numero_parcela,
	'Dados da parcela alterados. ' ||
	'Situaï¿½ï¿½o da Parcela: ' || cbparcela.situacao_int || '. ' ||
	'Rï¿½gua: ' || esregua.abrev_str  || '. ' ||
	'Valor: ' || cbparcela.valor_principal_num || ' para ' ||
        Case When importabradescocartaotmp.status = 'R1' Then
	        			(importabradescocartaotmp.saldo_atraso + importabradescocartaotmp.saldo_parcelado)
             Else
	      				(importabradescocartaotmp.saldo_parcelado + importabradescocartaotmp.valor_principal)
	     			 End

	From importabradescocartaotmp
	Inner Join cbparcela On importabradescocartaotmp.id_cbparcela = cbparcela.id_cbparcela_int
	Inner Join esregua on cbparcela.id_esregua_int = esregua.id_esregua_int

	Where cbparcela.situacao_int <> '4'
	And   importabradescocartaotmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	id_esregua_int = importabradescocartaotmp.id_esregua,

	valor_principal_num = Case
	                        When importabradescocartaotmp.status = 'R1' Then
	                              (importabradescocartaotmp.saldo_atraso + importabradescocartaotmp.saldo_parcelado)
									 		    Else
													      (importabradescocartaotmp.saldo_parcelado + importabradescocartaotmp.valor_principal)
	                        End,

	data_vencimento_dat =  importabradescocartaotmp.data_ultima_fatura,

	data_status_dat =  Case When importabradescocartaotmp.status = 'R1' Then
														data_vencimento_dat
			 									 Else
												 		importabradescocartaotmp.data_ultima_fatura
												 End,

	saldo_devedor_num = importabradescocartaotmp.saldo_atraso,
	valor_devedor_num = importabradescocartaotmp.saldo_parcelado,

	data_ultima_distrib_dat = current_date

	Where cbparcela.id_cbparcela_int = importabradescocartaotmp.id_cbparcela
	And   cbparcela.situacao_int <> '4'
	And   importabradescocartaotmp.inclui_altera_parcela = 'A';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12029 (class 0 OID 0)
-- Dependencies: 2012
-- Name: FUNCTION importa_bradescocartao(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_bradescocartao(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Bradesco Cartï¿½o';

--
-- TOC entry 2013 (class 1255 OID 27531)
-- Name: importa_fiat99(text, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_fiat99(text, bigint, bigint, bigint, bigint) RETURNS integer
    LANGUAGE plpgsql
    AS $_$

DECLARE
        comando alias for $1;
        filial alias for $2;
        empresa alias for $3;
        usuario alias for $4;
        cliente alias for $5;
        idfup bigint;
        contrato_atual integer;
        usuautomatico integer;
				--Cï¿½digo da Instruï¿½ï¿½o CANCE = 1001
        sitfupcance integer;
				--Cï¿½digo da Instruï¿½ï¿½o PGPAR = 1002
        sitfuppgpar integer;
				--Cï¿½digo da Instruï¿½ï¿½o PGTOT = 1003
        sitfuppgtot integer;

				-- Sï¿½o usados no tipo 060
				instPGPAR integer;
				instPGTOT integer;
				instPGEST integer;
				instSUSPE integer;
				instACAOC integer;
				instAGAPR integer;
				instCANCE integer;
        instAGACP integer;
				instPJBLO integer;
				instPJDES integer;
				instPJCAN integer;
				instPENDE integer;

				intSitContratoA integer;
				intSitContratoB integer;
				intSitContratoW  integer;
				intSitContratoJ integer;
                        intSitContratoY integer;
                           -- intSitContratoY - Contrato Cancelado - Criado 01/07/2003 - Bicudo / Luiz

        datapre date;

BEGIN

 --BEGIN TRANSACTION
 	--VACUUM VERBOSE ANALYZE "importafiattmp";
	--COMMIT;
 --END TRANSACTION

 -- Usados para pegar id_cbsituacaocontrato_int
 intSitContratoA := (select id_cbsituacaocontrato_int from cbsituacaocontrato where codigo_str = 'A');
 intSitContratoB := (select id_cbsituacaocontrato_int from cbsituacaocontrato where codigo_str = 'B');
 intSitContratoW := (select id_cbsituacaocontrato_int from cbsituacaocontrato where codigo_str = 'W');
 intSitContratoJ := (select id_cbsituacaocontrato_int from cbsituacaocontrato where codigo_str = 'J');
 intSitContratoY := (select id_cbsituacaocontrato_int from cbsituacaocontrato where codigo_str = 'Y');

 usuautomatico:= 1;

 -- Usado para pegar a data de distribuiï¿½ï¿½o do arquivo importado
 datapre:= (select dtpredistrib from importafiattmp where vlr_inicial_str = '000');

-- 000

   if comando = '000' then

---------------------------------------------------------------------------
 -- ATUALIZAR A SITUAï¿½ï¿½O DO CONTRATO
  Update importafiattmp set
  	sitcontrato = cbcontratofiat.id_cbsituacaocontrato_int
  Where cbcontratofiat.contrato_str = importafiattmp.nmcont
	And importafiattmp.vlr_inicial_str in ('010', '060', '120')
  And importafiattmp.inclui_altera = 'A'
  And importafiattmp.idneg =
  Case
    When cbcontratofiat.id_cbtiponegocio_int = '1' then 'FEP'
    When cbcontratofiat.id_cbtiponegocio_int = '2' then 'LSG'
    When cbcontratofiat.id_cbtiponegocio_int = '3' then 'FEB'
    When cbcontratofiat.id_cbtiponegocio_int = '4' then 'SAC'
    When cbcontratofiat.id_cbtiponegocio_int = '5' then 'ROT'
    When cbcontratofiat.id_cbtiponegocio_int = '6' then 'FES'

  End;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
 -- ATUALIZAR ID MOEDA
  Update importafiattmp set
  	idmoeda = fidescindicebanco.id_fimoeda_int
  Where upper(trim(fidescindicebanco.descricao_str)) = upper(trim(importafiattmp.tipmoed))
  And fidescindicebanco.id_gecliente_int = cliente
	And importafiattmp.vlr_inicial_str in ('050', '051', '052', '053');
---------------------------------------------------------------------------

end if;

---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 010 - DADOS CADASTRAIS DO CLIENTE

   if comando = '010' then

	-----------------------------------------------
	--    Alteraï¿½ï¿½o Bicudo 11/08/2003
	--    Tendo em vista problema no sistema da Fiat, temos a necessidade de executar as alteraï¿½ï¿½es
	--    do CANCE (comando 060) antes de executarmos a atualizaï¿½ï¿½o do contrato (010). Trouxemos a rotina abaixo,
	--    que atualiza as parcelas do CANCE para ser executada antes da atualizaï¿½ï¿½o do contrato (Dentro do Cï¿½digo 010)

	--    Como estamos no cï¿½digo 010, foi alterada a linha abaixo nos 2 UPDATEï¿½s :
                    --             and importafiattmp.vlr_inicial_str = comando
                    --        para and importafiattmp.vlr_inicial_str = '060'

    -----------------------------------------------------------------------
    -- Instrucao CANCE --
    -----------------------------------------------------------------------

    -- Alteraï¿½ï¿½o 01/07/2003 - Bicudo / Luiz : Instruï¿½ï¿½o Cance Muda para Contrato Cancelado : intSitContratoY

    update cbcontratofiat set
         -- situacao_str=parampgtot,
         data_stand_by_dat = importafiattmp.dtsusp,
         tstamp = current_timestamp,
         id_geusuario_int = usuario,
       id_cbsituacaocontrato_int = CASE WHEN (importafiattmp.sitcontrato = intSitContratoJ) THEN intSitContratoW
									 ELSE intSitContratoY END
    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = '060'
					and importafiattmp.nminst = 'CANCE'
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

-- Alteraï¿½ï¿½o 01/07/2003 - Bicudo / Luiz  - Muda Situaï¿½ï¿½o da Parcela para Cancelado
    update cbparcela set
        situacao_int = 6,
        data_pagamento_dat = current_date,
   	  valor_pago_num = 0,
    	  tstamp = current_timestamp,
	  id_geusuario_int = usuario

    where cbparcela.data_pagamento_dat is NULL
			and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
			and cbcontratofiat.contrato_str = importafiattmp.nmcont
			and cbcontratofiat.id_cbtiponegocio_int =
			case
				when importafiattmp.idneg= 'FEP' then  '1'
				when importafiattmp.idneg= 'LSG' then  '2'
				when importafiattmp.idneg= 'FEB' then  '3'
				when importafiattmp.idneg= 'SAC' then  '4'
				when importafiattmp.idneg= 'ROT' then  '5'
				when importafiattmp.idneg= 'FES' then  '6'
			end
			and importafiattmp.vlr_inicial_str = '060'
	    and importafiattmp.nminst = 'CANCE';

---------------------------------------------------------------------------

---------------------------------------------------------------------------

		insert into cbcontratofiat
			 (codigo_buc_int,
        contrato_str,
				tipo_pessoa_str,
				cpf_str,
        nome_str,
				ident_func_str,
				ident_reincid_str,
				ident_pref_str,
        endereco_str,
        bairro_str,
        cidade_str,
        estado_str,
				cep_str,
        ddd_str,
        telefone_str,
        local_trabalho_str,
        endereco_trabalho_str,
        bairro_trabalho_str,
        cidade_trabalho_str,
        estado_trabalho_str,
				cep_trabalho_str,
        ddd_trabalho_str,
        telefone_trabalho_str,
        ramal_trabalho_str,
				ddd_fax_str,
        telefone_fax_str,
				data_primeira_distrib_dat,
        data_ultima_distrib_dat,
        id_cbsituacaocontrato_int,
				id_gecliente_int,
        id_gefilial_int,
        id_geempresa_int,
				id_geusuario_int,
        tstamp,
				id_cbtiponegocio_int)

    select
				to_number(cdcli, 9999999),
        nmcont,
				tipopess,
				cgccpf,
        nomecli,
				idfunc,
				reincid,
				indpref,
        endresi,
        bairesi,
        cidresi,
			  CASE WHEN (estresi <> '') THEN estresi ELSE NULL END,
				cepresi,
        dddresi,
        telresi,
        empresa,
        endcom,
        baicom,
        cidcom,
        estcom,
				cepcom,
        dddcom,
        telcom,
        ramcom,
				dddfax,
        numfax,
        datapre,
        datapre,
        intSitContratoA,
				cliente,
				filial,
				empresa,
				usuario,
				current_timestamp,
				--idneg
				case
					when importafiattmp.idneg = 'FEP' then 1
          when importafiattmp.idneg = 'LSG' then 2
          when importafiattmp.idneg = 'FEB' then 3
          when importafiattmp.idneg = 'SAC' then 4
          when importafiattmp.idneg = 'ROT' then 5
          when importafiattmp.idneg = 'FES' then 6
       	end

    from importafiattmp
    where vlr_inicial_str = comando and inclui_altera = 'I';

		update cbcontratofiat set
			  codigo_buc_int = to_number(importafiattmp.cdcli, 9999999),
        contrato_str = importafiattmp.nmcont,
				tipo_pessoa_str = importafiattmp.tipopess,
				cpf_str = importafiattmp.cgccpf,
        nome_str = importafiattmp.nomecli,
				ident_func_str = importafiattmp.idfunc,
				ident_reincid_str = importafiattmp.reincid,
				ident_pref_str = importafiattmp.indpref,
        endereco_str = importafiattmp.endresi,
        bairro_str = importafiattmp.bairesi,
        cidade_str = importafiattmp.cidresi,
				estado_str = CASE WHEN (importafiattmp.estresi <> '') THEN importafiattmp.estresi ELSE NULL END,
				cep_str = importafiattmp.cepresi,
        ddd_str = importafiattmp.dddresi,
        telefone_str = importafiattmp.telresi,
        local_trabalho_str = importafiattmp.empresa,
        endereco_trabalho_str = importafiattmp.endcom,
        bairro_trabalho_str = importafiattmp.baicom,
        cidade_trabalho_str = importafiattmp.cidcom,
        estado_trabalho_str = importafiattmp.estcom,
				cep_trabalho_str = importafiattmp.cepcom,
        ddd_trabalho_str = importafiattmp.dddcom,
        telefone_trabalho_str = importafiattmp.telcom,
        ramal_trabalho_str = importafiattmp.ramcom,
				ddd_fax_str = importafiattmp.dddfax,
        telefone_fax_str = importafiattmp.numfax,
		    data_ultima_distrib_dat = datapre,
				id_gecliente_int = cliente,
        id_gefilial_int = filial,
        id_geempresa_int = empresa,
				id_geusuario_int = usuario,
        tstamp = current_timestamp,
   	     id_cbsituacaocontrato_int = CASE WHEN (id_cbsituacaocontrato_int <> intSitContratoW) 
                     THEN intSitContratoA else intSitContratoW END,
				data_stand_by_dat = null,
				data_contato_dat = CASE WHEN (importafiattmp.sitcontrato = intSitContratoB) THEN NULL  
                                                              else importafiattmp.dtcont END

				where contrato_str = importafiattmp.nmcont and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
					and importafiattmp.inclui_altera = 'A'
    			and id_cbtiponegocio_int =
					case
						when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

   end if;

--
-- Alteraï¿½ï¿½o para Migraï¿½ï¿½o : data_contato_dat nï¿½o tinha o else para situaï¿½ï¿½es diferente de B
--
	  -- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato qdo for alteraï¿½ï¿½o
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Select
			  usuario,
			  cliente,
			  current_timestamp,
			  'Alt Situaï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			  cbcontratofiat.contrato_str,
			  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para A.'

			From importafiattmp Inner Join cbcontratofiat On cbcontratofiat.contrato_str = importafiattmp.nmcont
			Inner Join cbsituacaocontrato On cbcontratofiat.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
			Where importafiattmp.vlr_inicial_str = comando
					and importafiattmp.inclui_altera = 'A'
    			and id_cbtiponegocio_int =
					case
						when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 020 - INCLUSï¿½O DO NEGï¿½CIO EM ATRASO PARA FEB, FES E FEP

	 if comando = '020' then

	 	update cbcontratofiat set
		 		codigo_buc_int = to_number(importafiattmp.cdcli, 9999999),
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				numero_total_parcelas_int = importafiattmp.totparcc,
        total_parc_atraso_int = importafiattmp.totparca,
        total_parc_vencer_int = importafiattmp.totparav,
				media_atraso_int = importafiattmp.medatras,
				dias_atraso_ult_parc_int = importafiattmp.atrultpg,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				vlr_devedor_num = importafiattmp.vlrdeve,
				vlr_desconto_num = importafiattmp.vlrdesc,
				vlr_comissao_perm_num = importafiattmp.vlrcperm,
				vlr_multa_num = importafiattmp.vlrmulta,
				codigo_concessionaria_str = importafiattmp.cdconce,
				taxa_diaria_cp_num = importafiattmp.cperdia,
				contrato_gescob_str = importafiattmp.contgcob,
				nome_seguradora_str = importafiattmp.nmsegur,
				data_ultima_distrib_dat = datapre,
				tstamp = current_timestamp,
        id_geusuario_int = usuario,
				codigo_banco_int = importafiattmp.codigo_banco

		where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
    			and id_cbtiponegocio_int =
					case
						when importafiattmp.idneg = 'FEP' then '1'
						when importafiattmp.idneg = 'FEB' then '3'
				 		when importafiattmp.idneg = 'FES' then '6'
          end;
	 end if;

---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 021 - ALTERAï¿½ï¿½O DO NEGï¿½CIO EM ATRASO PARA FEB, FES E FEP

   if comando = '021' then

	  update cbcontratofiat set
	   		codigo_buc_int = to_number(importafiattmp.cdcli, 9999999),
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				numero_total_parcelas_int = importafiattmp.totparcc,
        total_parc_atraso_int = importafiattmp.totparca,
        total_parc_vencer_int = importafiattmp.totparav,
				media_atraso_int = importafiattmp.medatras,
				dias_atraso_ult_parc_int = importafiattmp.atrultpg,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				vlr_devedor_num = importafiattmp.vlrdeve,
				vlr_desconto_num = importafiattmp.vlrdesc,
				vlr_comissao_perm_num = importafiattmp.vlrcperm,
				vlr_multa_num = importafiattmp.vlrmulta,
				codigo_concessionaria_str = importafiattmp.cdconce,
				taxa_diaria_cp_num = importafiattmp.cperdia,
				contrato_gescob_str = importafiattmp.contgcob,
				nome_seguradora_str = importafiattmp.nmsegur,
				data_ultima_distrib_dat = datapre,
				tstamp = current_timestamp,
        id_geusuario_int = usuario,
				codigo_banco_int = importafiattmp.codigo_banco

		where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
    			and id_cbtiponegocio_int =
					case
						when importafiattmp.idneg = 'FEP' then '1'
						when importafiattmp.idneg = 'FEB' then '3'
				 		when importafiattmp.idneg = 'FES' then '6'
          end;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 022 - INCLUSï¿½O DO NEGï¿½CIO EM ATRASO PARA LSG

   if comando = '022' then

    update cbcontratofiat set
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				numero_total_parcelas_int = importafiattmp.totparend,
				tot_parc_arrend_int = importafiattmp.totparend,
				tot_parc_residu_int = importafiattmp.totpares,
				tot_parca_arren_int = importafiattmp.totatrend,
				tot_parca_resid_int = importafiattmp.totpatres,
				tot_parcv_arren_int = importafiattmp.totparav,
				tot_parcv_resid_int = importafiattmp.totparavres,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				vlr_devedor_arrend_num = importafiattmp.vldevear,
				vlr_cp_arrend_num = importafiattmp.vlcperar,
				vlr_multa_arrend_num = importafiattmp.vlmultar,
				vlr_desc_arrend_num = importafiattmp.vlrdesc,
        vlr_devedor_res_num = importafiattmp.vlrdevere,
        vlr_cp_residual_num = importafiattmp.vlcperre,
        vlr_multa_resid_num = importafiattmp.vlrmultre,
				codigo_concessionaria_str = importafiattmp.cdconce,
				taxa_diaria_cp_num = importafiattmp.cperdia,
				contrato_gescob_str = importafiattmp.contgcob,
				nome_seguradora_str = importafiattmp.nmsegur,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
		      	when importafiattmp.idneg = 'LSG' then '2'
          end;
	 end if;

---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 023 - ALTERAï¿½ï¿½O DO NEGï¿½CIO EM ATRASO PARA LSG

   if comando = '023' then

    update cbcontratofiat set
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				tot_parc_arrend_int = importafiattmp.totparend,
				tot_parc_residu_int = importafiattmp.totpares,
				tot_parca_arren_int = importafiattmp.totatrend,
				tot_parca_resid_int = importafiattmp.totpatres,
				tot_parcv_arren_int = importafiattmp.totparav,
				tot_parcv_resid_int = importafiattmp.totparavres,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				vlr_devedor_arrend_num = importafiattmp.vldevear,
				vlr_cp_arrend_num = importafiattmp.vlcperar,
				vlr_multa_arrend_num = importafiattmp.vlmultar,
				vlr_desc_arrend_num = importafiattmp.vlrdesc,
        vlr_devedor_res_num = importafiattmp.vlrdevere,
        vlr_cp_residual_num = importafiattmp.vlcperre,
        vlr_multa_resid_num = importafiattmp.vlrmultre,
				codigo_concessionaria_str = importafiattmp.cdconce,
				taxa_diaria_cp_num = importafiattmp.cperdia,
				contrato_gescob_str = importafiattmp.contgcob,
				nome_seguradora_str = importafiattmp.nmsegur,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
		      	when importafiattmp.idneg = 'LSG' then '2'
          end;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 024 - INCLUSï¿½O DO NEGï¿½CIO EM ATRASO PARA SAC

   if comando = '024' then

    update cbcontratofiat set
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				produto_str = importafiattmp.bemcont,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				codigo_concessionaria_str = importafiattmp.cdconce,
				nome_seguradora_str = importafiattmp.nmsegur,
				data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
          	when importafiattmp.idneg = 'SAC' then '4'
          end;

  end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 025 - ALTERAï¿½ï¿½O DO NEGï¿½CIO EM ATRASO PARA SAC

   if comando = '025' then

	  update cbcontratofiat set
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				produto_str = importafiattmp.bemcont,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				codigo_concessionaria_str = importafiattmp.cdconce,
				nome_seguradora_str = importafiattmp.nmsegur,
				data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
          	when importafiattmp.idneg = 'SAC' then '4'
          end;

	end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 026 - INCLUSï¿½O DO NEGï¿½CIO EM ATRASO PARA ROT

   if comando = '026' then

    update cbcontratofiat set
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				codigo_concessionaria_str = importafiattmp.cdconce,
				nome_seguradora_str = importafiattmp.nmsegur,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
          	when importafiattmp.idneg = 'ROT' then '5'
          end;

   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 027 - ALTERAï¿½ï¿½O DO NEGï¿½CIO EM ATRASO PARA ROT

   if comando = '027' then

    update cbcontratofiat set
				agencia_fiat_str = importafiattmp.agefiat,
				ident_reincid_str = importafiattmp.reincid,
				tipo_operacao_str = importafiattmp.tpopera,
				data_contrato_dat = importafiattmp.dtcont,
				data_contabil_dat = importafiattmp.dtcontab,
				nome_concessionaria_str = importafiattmp.nomconce,
				vlr_orig_promiss_num = importafiattmp.vlrorig,
				vlr_promiss_prot_num = importafiattmp.vlrprot,
				codigo_concessionaria_str = importafiattmp.cdconce,
				nome_seguradora_str = importafiattmp.nmsegur,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
          	when importafiattmp.idneg = 'ROT' then '5'
          end;

   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 030 - DADOS CADASTRAIS DO AVALISTA

 	 if comando = '030' then

   	update cbcontratofiat set
				tipo_pessoa_avalista1_str = importafiattmp.tipopess,
				cpf_avalista1_str = importafiattmp.cgccpf,
				nome_avalista1_str = importafiattmp.nomecli,
				endereco_avalista1_str = importafiattmp.endresi,
				bairro_avalista1_str = importafiattmp.bairesi,
				cidade_avalista1_str = importafiattmp.cidresi,
				estado_avalista1_str = importafiattmp.estresi,
				cep_avalista1_str = importafiattmp.cepresi,
				ddd_avalista1_str = importafiattmp.dddresi,
				fone_avalista1_str = importafiattmp.telresi,
				local_trab_avalista1_str = importafiattmp.empresa,
				endereco_trab_avalista1_str = importafiattmp.endcom,
				bairro_trab_avalista1_str = importafiattmp.baicom,
				cidade_trab_avalista1_str = importafiattmp.cidcom,
				estado_trab_avalista1_str = importafiattmp.estcom,
				cep_trab_avalista1_str = importafiattmp.cepcom,
				ddd_trab_avalista2_str = importafiattmp.dddcom,
   			fone_trab_avalista2_str = importafiattmp.telcom,
				ramal_trab_avalista2_str = importafiattmp.ramcom,
   			ddd_fax_avalista2_str = importafiattmp.dddfax,
   			fax_avalista2_str = importafiattmp.numfax,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
						when importafiattmp.idneg = 'FEP' then '1'
						when importafiattmp.idneg = 'LSG' then '2'
						when importafiattmp.idneg = 'FEB' then '3'
						when importafiattmp.idneg = 'SAC' then '4'
						when importafiattmp.idneg = 'ROT' then '5'
						when importafiattmp.idneg = 'FES' then '6'
          end;
   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 040 - INCLUSï¿½O DADOS DO BEM FATURADO / FINANCIADO / ARRENDADO

	 if comando = '040' then

    update cbcontratofiat set
				qtde_bens_int = importafiattmp.qtdbem,
        tipo_bem_str = importafiattmp.tpbem,
        desc_bem_str = importafiattmp.descri,
				marca_str = importafiattmp.marca,
				modelo_str = importafiattmp.modelo,
				ano_str = importafiattmp.anofab,
        placa_str = importafiattmp.placa,
        cor_str = importafiattmp.cor,
        chassis_str = importafiattmp.chassi,
        combustivel_str = importafiattmp.combust,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 041 - ALTERAï¿½ï¿½O DADOS DO BEM FATURADO / FINANCIADO / ARRENDADO

	 if comando = '041' then

    update cbcontratofiat set
				qtde_bens_int = importafiattmp.qtdbem,
        tipo_bem_str = importafiattmp.tpbem,
        desc_bem_str = importafiattmp.descri,
				marca_str = importafiattmp.marca,
				modelo_str = importafiattmp.modelo,
				ano_str = importafiattmp.anofab,
        placa_str = importafiattmp.placa,
        cor_str = importafiattmp.cor,
        chassis_str = importafiattmp.chassi,
        combustivel_str = importafiattmp.combust,
        data_ultima_distrib_dat = datapre,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then  '1'
	          when importafiattmp.idneg = 'LSG' then  '2'
	          when importafiattmp.idneg = 'FEB' then  '3'
	          when importafiattmp.idneg = 'SAC' then  '4'
	          when importafiattmp.idneg = 'ROT' then  '5'
	          when importafiattmp.idneg = 'FES' then  '6'
          end;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 050 - INCLUSï¿½O DADOS DA PARCELA EM ATRASO PARA FEP, FES E FEB

   if comando = '050' then

    insert into cbparcela
		 	 (id_cbcontrato_int,
        parcela_int,
				data_vencimento_dat,
				desc_indice_str,
				qtd_moeda_num,
				indice_moeda_num,
        valor_principal_num,
				valor_comissao_perm_num,
				valor_multa_num,
				tipo_str,
				data_primeira_distrib_dat,
        data_ultima_distrib_dat,
				situacao_int,
        id_geusuario_int,
        tstamp)

    select
	  cbcontratofiat.id_cbcontrato_int,
        importafiattmp.numparc,
	  importafiattmp.dtvcto,
	  importafiattmp.tipmoed,
	  importafiattmp.qtdmoed,
        importafiattmp.vlrmoed,
	  importafiattmp.vlrparc,
        importafiattmp.vlrcper,
        importafiattmp.vlrmulta,
	  '1',
        CASE WHEN (importafiattmp.dtpredistrib is null) then datapre 
                     else importafiattmp.dtpredistrib END,
        datapre,
	  0,
        usuario,
        current_timestamp

    from importafiattmp inner join cbcontratofiat on (id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
 				 case
	       	when importafiattmp.idneg = 'FEP' then '1'
	        when importafiattmp.idneg = 'FEB' then '3'
	        when importafiattmp.idneg = 'FES' then '6'
         end)

    where vlr_inicial_str = comando;

    -- Insere a Parcela na Tabela cbatendimentotemp - TIPO = FEP-FEB-FES, para ser chamado no Followup - Atendimento automï¿½tico

--    insert into cbatendimentotemp
--		 	 (id_gecliente_int,
--	      id_cbcontrato_int,
--	      situacao_str,
--	      data_pre_distrib_dat,
--	      data_pendente_dat,
--	      data_ult_atual_dat)
--
--		select
--		    cliente,
--        cbcontratofiat.id_cbcontrato_int,
--        'I',
--        datapre,
--      	NULL,
--        NULL
--
--    from importafiattmp inner join cbcontratofiat on (id_gecliente_int = cliente
--		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
--		     and cbcontratofiat.id_cbtiponegocio_int =
--         case
--		     	when importafiattmp.idneg = 'FEP' then '1'
--		      when importafiattmp.idneg = 'FEB' then '3'
--		      when importafiattmp.idneg = 'FES' then '6'
--         end)
--
--    where vlr_inicial_str = comando;

    update cbcontratofiat set
				id_fimoeda_int = importafiattmp.idmoeda,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
					and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 051 - ALTERAï¿½ï¿½O DADOS DA PARCELA EM ATRASO PARA FEP, FES E FEB

   if comando = '051' then

		update cbparcela set
				data_vencimento_dat = importafiattmp.dtvcto,
        desc_indice_str = importafiattmp.tipmoed,
				qtd_moeda_num = importafiattmp.qtdmoed,
				indice_moeda_num = importafiattmp.vlrmoed,
        valor_principal_num = importafiattmp.vlrparc,
        valor_comissao_perm_num = importafiattmp.vlrcper,
        valor_multa_num = importafiattmp.vlrmulta,
				data_ultima_distrib_dat = datapre,
			  situacao_int = CASE WHEN (cbparcela.situacao_int = '6' and cbparcela.valor_pago_num = '0') THEN 0
														ELSE cbparcela.situacao_int END,
				data_pagamento_dat = CASE WHEN (cbparcela.situacao_int = '6' and cbparcela.valor_pago_num = '0') THEN NULL
														ELSE cbparcela.data_pagamento_dat END,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

		where importafiattmp.vlr_inicial_str = comando
					and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
		      and cbparcela.parcela_int = importafiattmp.numparc
					and cbcontratofiat.contrato_str = importafiattmp.nmcont;

    update cbcontratofiat set
				id_fimoeda_int = importafiattmp.idmoeda,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
					and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 052 - INCLUSï¿½O DADOS DA PARCELA EM ATRASO PARA LSG

   if comando = '052' then

   	insert into cbparcela
			 (id_cbcontrato_int,
 			  tipo_str,
        parcela_int,
        data_vencimento_dat,
				desc_indice_str,
        qtd_moeda_num,
        indice_moeda_num,
				valor_principal_num,
        valor_comissao_perm_num,
        valor_multa_num,
				situacao_int,
        data_primeira_distrib_dat,
        data_ultima_distrib_dat,
        tstamp,
        id_geusuario_int)

    select
		    cbcontratofiat.id_cbcontrato_int,
				importafiattmp.tpparc,
				importafiattmp.numparc,
        importafiattmp.dtvcto,
				importafiattmp.tipmoed,
        importafiattmp.qtdmoed,
        importafiattmp.vlrmoed,
				importafiattmp.vlrparc,
        importafiattmp.vlrcper,
        importafiattmp.vlrmulta,
				0,
        datapre,
        datapre,
				current_timestamp,
        usuario

    from importafiattmp inner join cbcontratofiat on (id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
	       	when importafiattmp.idneg = 'LSG' then '2'
         end)

    where vlr_inicial_str = comando;

    -- Insere a Parcela na Tabela cbatendimentotemp - TIPO = FEP-FEB-FES, para ser chamado no Followup - Atendimento automï¿½tico

--    insert into cbatendimentotemp
--		 	 (id_gecliente_int,
--	      id_cbcontrato_int,
--	      situacao_str,
--	      data_pre_distrib_dat,
--	      data_pendente_dat,
--	      data_ult_atual_dat)
--
--		select
--		    cliente,
--        cbcontratofiat.id_cbcontrato_int,
--        'I',
--        datapre,
--      	NULL,
--        NULL
--
--    from importafiattmp inner join cbcontratofiat on (id_gecliente_int = cliente
--		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
--				 and cbcontratofiat.id_cbtiponegocio_int =
--         case
--         	when importafiattmp.idneg = 'LSG' then '2'
--	       end)
--
--    where vlr_inicial_str = comando;

    update cbcontratofiat set
				id_fimoeda_int = importafiattmp.idmoeda,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
					and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 053 - ALTERAï¿½ï¿½O DADOS DA PARCELA EM ATRASO PARA LSG

   if comando = '053' then

    update cbparcela set
		    data_vencimento_dat = importafiattmp.dtvcto,
				desc_indice_str = importafiattmp.tipmoed,
        qtd_moeda_num = importafiattmp.qtdmoed,
        indice_moeda_num = importafiattmp.vlrmoed,
        valor_principal_num = importafiattmp.vlrparc,
        valor_comissao_perm_num = importafiattmp.vlrcper,
        valor_multa_num = importafiattmp.vlrmulta,
				data_ultima_distrib_dat = datapre,
			  situacao_int = CASE WHEN (cbparcela.situacao_int = '4' and cbparcela.valor_pago_num = '0') THEN 0
														ELSE cbparcela.situacao_int END,
				data_pagamento_dat = CASE WHEN (cbparcela.situacao_int = '4' and cbparcela.valor_pago_num = '0') THEN NULL
														ELSE cbparcela.data_pagamento_dat END,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where	importafiattmp.vlr_inicial_str = comando
		      and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
					and cbparcela.parcela_int = importafiattmp.numparc
					and cbparcela.tipo_str = importafiattmp.tpparc
					and cbcontratofiat.contrato_str = importafiattmp.nmcont;

    update cbcontratofiat set
				id_fimoeda_int = importafiattmp.idmoeda,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
					and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

    end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 054 - INCLUSï¿½O DADOS DA PARCELA EM ATRASO PARA SAC

   if comando = '054' then

        -- Contratos SAC, nao existe parcela entï¿½o no campo parcela serï¿½ gerado antes de realizar a importaï¿½ï¿½o no form CB008

        -- Alteraï¿½ï¿½o Bicudo 12/09/2003
        -- A partir do dia 15/09/2003, a fiat enviarï¿½ no registro 130, se o contrato
        -- ï¿½ novo (N) ou redirecionado (R).
        -- Para os contratos novos : Data vencimento = (data distribuicao - 11 dias)
        -- Para os redirecionados  : Data vencimento = (data distribuicao - 31 dias)
        
        -- Como ï¿½ maior a quantidade de contratos novos, vou incluir todas as parcelas  
        -- com Data vencimento = (data distribuicao - 11 dias).
     
        -- Lï¿½ no registro 130 : Verificar os contratos que sï¿½o redirecionados
        -- e alterar a Data vencimento = (data distribuicao - 31 dias).

    insert into cbparcela
		   (id_cbcontrato_int,
        parcela_int,
        tipo_str,
				valor_principal_num,
        valor_comissao_perm_num,
        valor_multa_num,
				vlr_devedor_total_num,
				valor_multa_quitacao_num,
				vencidop_num,
				data_vencimento_dat,
				situacao_int,
				data_primeira_distrib_dat,
        data_ultima_distrib_dat,
				tstamp,
        id_geusuario_int)

    select
		    cbcontratofiat.id_cbcontrato_int,
				numparc,
        '1',
				importafiattmp.sldvenc,
        importafiattmp.vlrcper,
        importafiattmp.vlrmulta,
				importafiattmp.vlrdeved,
				importafiattmp.vlrmultaqui,
				importafiattmp.vencidop,
        (current_date - 11),
        0,
        CASE WHEN (importafiattmp.dtpredistrib is null) then datapre 
                     else importafiattmp.dtpredistrib END,
        datapre,
        current_timestamp,
        usuario

    from importafiattmp inner join cbcontratofiat on (id_gecliente_int = cliente
			   and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
         	when importafiattmp.idneg= 'SAC' then '4'
         end)

      where importafiattmp.vlr_inicial_str = comando;

    -- Insere a Parcela na Tabela cbatendimentotemp - TIPO = FEP-FEB-FES, para ser chamado no Followup - Atendimento automï¿½tico

--    insert into cbatendimentotemp
--		 	 (id_gecliente_int,
--	      id_cbcontrato_int,
--	      situacao_str,
--	      data_pre_distrib_dat,
--	      data_pendente_dat,
--	      data_ult_atual_dat)
--
--		select
--		    cliente,
--        cbcontratofiat.id_cbcontrato_int,
--        'I',
--        datapre,
--      	NULL,
--        NULL
--
--    from importafiattmp inner join cbcontratofiat on (id_gecliente_int = cliente
--	     	 and cbcontratofiat.contrato_str = importafiattmp.nmcont
--				 and cbcontratofiat.id_cbtiponegocio_int =
--         case
--         	when importafiattmp.idneg = 'SAC' then '4'
--	       end)
--
--    where vlr_inicial_str = comando;

-- Alteraï¿½ï¿½o Bicudo - 24/09/2003
-- Reabrir o Contrato, tendo em vista que no SAC pode chegar parcelas como Alteraï¿½ï¿½o
-- que na importaï¿½ï¿½o estamos reabrindo a parcela, e com isto, precisamos reabrir o contrato.   

    update cbcontratofiat set
                        id_cbsituacaocontrato_int = intSitContratoA,
				id_fimoeda_int = '1',
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
					and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 055 - ALTERAï¿½ï¿½O DADOS DA PARCELA EM ATRASO PARA SAC

	 if comando = '055' then

    update cbparcela set
				valor_principal_num = importafiattmp.sldvenc,
                        valor_comissao_perm_num = importafiattmp.vlrcper,
                        valor_multa_num = importafiattmp.vlrmulta,
				vlr_devedor_total_num = importafiattmp.vlrdeved,
				valor_multa_quitacao_num = importafiattmp.vlrmultaqui,
                        vencidop_num = importafiattmp.vencidop,				
                        data_ultima_distrib_dat = datapre,
			      situacao_int = CASE WHEN (cbparcela.situacao_int = '4' and cbparcela.valor_pago_num = '0') THEN 0
														ELSE cbparcela.situacao_int END,
				data_pagamento_dat = CASE WHEN (cbparcela.situacao_int = '4' and cbparcela.valor_pago_num = '0') THEN NULL
														ELSE cbparcela.data_pagamento_dat END,
				tstamp = current_timestamp,
                        id_geusuario_int = usuario

    where importafiattmp.vlr_inicial_str = comando
		      and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
		      and cbcontratofiat.contrato_str = importafiattmp.nmcont
                  and cbparcela.id_cbparcela_int  = (select id_cbparcela_int from cbcontratofiat, cbparcela
                                                                                        where cbcontratofiat.id_gecliente_int = cliente
                                                                                              and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
                                                                                              and cbcontratofiat.contrato_str = importafiattmp.nmcont
                                                                                              and cbparcela.situacao_int = '0' 
                                                                                              and importafiattmp.vlr_inicial_str = comando
                                                                                              and cbcontratofiat.id_cbtiponegocio_int = (case
                                                                                                              when importafiattmp.idneg= 'SAC' then '4'
                                                                                                                                end)
                                                                                       order by cbparcela.parcela_int desc limit 1 offset 0);

                                -- Alteraï¿½ï¿½o 30/06/2003 - Atualizar a ï¿½ltima parcela se situaï¿½ï¿½o da parcela = 0 

		     -- Alteraï¿½ï¿½o Bicudo 23/06/2003 - Alterar somente a ï¿½ltima parcela de SAC

		--		 		  and cbparcela.vencidop_num = importafiattmp.vencidop

		-- Alteraï¿½ï¿½o 18/06/2003 - Bicudo - Retirada da condiï¿½ï¿½o de vencidop_num do Sac, atualiza sempre a ï¿½ltima parcela
		--		 		  and cbparcela.vencidop_num = importafiattmp.vencidop

    update cbcontratofiat set
				id_fimoeda_int = 1,
				tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
					and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

    end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 056 - INCLUSï¿½O DADOS DA PARCELA EM ATRASO PARA ROT
		--PASCHOALOTTO Nï¿½O COBRA ESTE TIPO DE CONTRATO
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 057- ALTERAï¿½ï¿½O DADOS DA PARCELA EM ATRASO PARA ROT
		--PASCHOALOTTO Nï¿½O COBRA ESTE TIPO DE CONTRATO
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 060 - INSTRUï¿½ï¿½ES DE COBRANï¿½A

   if comando = '060' then

 -- Sï¿½o usados no tipo 060
 sitfupcance := (select id_cbsitcontato_int from cbsitcontato where codigo_int = '1001' and id_gecliente_int = cliente);
 sitfuppgpar := (select id_cbsitcontato_int from cbsitcontato where codigo_int = '1002' and id_gecliente_int = cliente);
 sitfuppgtot := (select id_cbsitcontato_int from cbsitcontato where codigo_int = '1003' and id_gecliente_int = cliente);

 -- Sï¿½o usados no tipo 060
 instPGPAR := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PGPAR' and id_gecliente_int = cliente);
 instPGTOT := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PGTOT' and id_gecliente_int = cliente);
 instPGEST := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PGEST' and id_gecliente_int = cliente);
 instSUSPE := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'SUSPE' and id_gecliente_int = cliente);
 instACAOC := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'ACAOC' and id_gecliente_int = cliente);
 instAGAPR := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'AGAPR' and id_gecliente_int = cliente);
 instCANCE := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'CANCE' and id_gecliente_int = cliente);
 instAGACP := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'AGACP' and id_gecliente_int = cliente);
 instPJBLO := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PJBLO' and id_gecliente_int = cliente);
 instPJDES := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PJDES' and id_gecliente_int = cliente);
 instPJCAN := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PJCAN' and id_gecliente_int = cliente);
 instPENDE := (select id_cbinstrucaocobranca_int from cbinstrucaocobranca where codigo_str = 'PENDE' and id_gecliente_int = cliente);

	 -- PARA PJBLO, PJDES e PJCAN  -  PARA LSG
			insert into cbfiatret
	       (id_cbcontrato_int,
					codigo_registro_int,
	        id_cbinstrucaocobranca_int,
	        id_cbparcela_int,
					data_suspensao_dat,
					tipo_acao_str,
					data_acao_dat,
					numero_processo_str,
					vara_str,
					comarca_str,
					observacao_str,
					data_dat,
					tstamp,
	        id_geusuario_int)

	    select
		      cbcontratofiat.id_cbcontrato_int,
					to_number(comando,'999'),
					case
						when importafiattmp.nminst = 'PJBLO' then instPJBLO
						when importafiattmp.nminst = 'PJDES' then instPJDES
						when importafiattmp.nminst = 'PJCAN' then instPJCAN
					end,
	        cbparcela.id_cbparcela_int,
					importafiattmp.dtsusp,
	        importafiattmp.tpacao,
	        importafiattmp.dtacao,
	        importafiattmp.nmproc,
	        importafiattmp.vara,
					importafiattmp.comarca,
					importafiattmp.texto,
					current_date,
					current_timestamp,
					usuario

	    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
				   and cbcontratofiat.contrato_str = importafiattmp.nmcont
					 and cbcontratofiat.id_cbtiponegocio_int =
	         case
					   when importafiattmp.idneg = 'LSG' then '2'
	         end
					 inner join cbparcela on cbcontratofiat.id_cbcontrato_int = cbparcela.id_cbcontrato_int
					 and cbparcela.parcela_int = importafiattmp.numparc

	    where vlr_inicial_str = comando;

			-- PARA PJBLO, PJDES e PJCAN  -  PARA FEP, FES, FEP, LSG
			insert into cbfiatret
	       (id_cbcontrato_int,
					codigo_registro_int,
	        id_cbinstrucaocobranca_int,
	        id_cbparcela_int,
					data_suspensao_dat,
					tipo_acao_str,
					data_acao_dat,
					numero_processo_str,
					vara_str,
					comarca_str,
					observacao_str,
					data_dat,
					tstamp,
	        id_geusuario_int)

	    select
		      cbcontratofiat.id_cbcontrato_int,
					to_number(comando,'999'),
					case
						when importafiattmp.nminst = 'PJBLO' then instPJBLO
						when importafiattmp.nminst = 'PJDES' then instPJDES
						when importafiattmp.nminst = 'PJCAN' then instPJCAN
					end,
	        cbparcela.id_cbparcela_int,
					importafiattmp.dtsusp,
	        importafiattmp.tpacao,
	        importafiattmp.dtacao,
	        importafiattmp.nmproc,
	        importafiattmp.vara,
					importafiattmp.comarca,
					importafiattmp.texto,
					current_date,
					current_timestamp,
					usuario

	    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
				   and cbcontratofiat.contrato_str = importafiattmp.nmcont
					 and cbcontratofiat.id_cbtiponegocio_int =
	         case
					   when importafiattmp.idneg = 'FEP' then '1'
					   when importafiattmp.idneg = 'LSG' then '2'
					   when importafiattmp.idneg = 'FEB' then '3'
					   when importafiattmp.idneg = 'FES' then '6'
	         end
					 inner join cbparcela on cbcontratofiat.id_cbcontrato_int = cbparcela.id_cbcontrato_int
					 and cbparcela.parcela_int = importafiattmp.numparc

	    where vlr_inicial_str = comando;

			-- PARA PGPAR, PGTOT, PGEST, SUSPE, ACAOAC, AGAPR, CANCE, AGACP, PENDE
			insert into cbfiatret
	       (id_cbcontrato_int,
					codigo_registro_int,
	        id_cbinstrucaocobranca_int,
					data_suspensao_dat,
					tipo_acao_str,
					data_acao_dat,
					numero_processo_str,
					vara_str,
					comarca_str,
					observacao_str,
					data_dat,
					tstamp,
	        id_geusuario_int)

	    select
		      cbcontratofiat.id_cbcontrato_int,
					to_number(comando,'999'),
					case
						when importafiattmp.nminst = 'PGPAR' then instPGPAR
						when importafiattmp.nminst = 'PGTOT' then instPGTOT
						when importafiattmp.nminst = 'PGEST' then instPGEST
						when importafiattmp.nminst = 'SUSPE' then instSUSPE
						when importafiattmp.nminst = 'ACAOC' then instACAOC
						when importafiattmp.nminst = 'AGAPR' then instAGAPR
						when importafiattmp.nminst = 'CANCE' then instCANCE
						when importafiattmp.nminst = 'AGACP' then instAGACP
						when importafiattmp.nminst = 'PENDE' then instPENDE
					end,
					importafiattmp.dtsusp,
	        importafiattmp.tpacao,
	        importafiattmp.dtacao,
	        importafiattmp.nmproc,
	        importafiattmp.vara,
					importafiattmp.comarca,
					importafiattmp.texto,
					current_date,
					current_timestamp,
					usuario

	    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
				   and cbcontratofiat.contrato_str = importafiattmp.nmcont
					 and cbcontratofiat.id_cbtiponegocio_int =
	         case
					   when importafiattmp.idneg = 'FEP' then '1'
					   when importafiattmp.idneg = 'LSG' then '2'
					   when importafiattmp.idneg = 'FEB' then '3'
					   when importafiattmp.idneg = 'SAC' then '4'
					   when importafiattmp.idneg = 'ROT' then '5'
					   when importafiattmp.idneg = 'FES' then '6'
	         end

	    where vlr_inicial_str = comando;

    -----------------------------------------------------------------------
    -- Instrucao PGPAR --
    -----------------------------------------------------------------------
		update cbcontratofiat set
				--situacao_str=parampgpar,
        data_stand_by_dat = importafiattmp.dtsusp,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

    where contrato_str = importafiattmp.nmcont
				  and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
					and importafiattmp.nminst = 'PGPAR'
          and cbcontratofiat.id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg= 'FEP' then  '1'
	          when importafiattmp.idneg= 'LSG' then  '2'
            when importafiattmp.idneg= 'FEB' then  '3'
	          when importafiattmp.idneg= 'SAC' then  '4'
	          when importafiattmp.idneg= 'ROT' then  '5'
	          when importafiattmp.idneg= 'FES' then  '6'
          end;

    update cbparcela set
				situacao_int = 4,
				data_pagamento_dat = current_date,
				valor_pago_num = 0,
         tstamp = current_timestamp,
        id_geusuario_int = usuario

		where importafiattmp.vlr_inicial_str = comando
		      and importafiattmp.nminst = 'PGPAR'
					and cbparcela.id_cbparcela_int = (select cbparcela.id_cbparcela_int from cbparcela
					                                  where cbparcela.data_pagamento_dat is NULL
																							and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
																							and cbcontratofiat.contrato_str = importafiattmp.nmcont
																							and cbcontratofiat.id_cbtiponegocio_int =
																								case
																				        	when importafiattmp.idneg= 'FEP' then  '1'
																				          when importafiattmp.idneg= 'LSG' then  '2'
																			            when importafiattmp.idneg= 'FEB' then  '3'
																				          when importafiattmp.idneg= 'SAC' then  '4'
																				          when importafiattmp.idneg= 'ROT' then  '5'
																				          when importafiattmp.idneg= 'FES' then  '6'
																			          end
																							order by cbparcela.parcela_int limit 1 offset 0);

    -----------------------------------------------------------------------
    -- Instrucao PGTOT --
    -----------------------------------------------------------------------
	  update cbcontratofiat set
        -- situacao_str=parampgtot,
        data_stand_by_dat = importafiattmp.dtsusp,
        tstamp = current_timestamp,
        id_geusuario_int = usuario,
				id_cbsituacaocontrato_int = CASE WHEN (importafiattmp.sitcontrato = intSitContratoJ) THEN intSitContratoW
																				 ELSE intSitContratoB END

		where contrato_str = importafiattmp.nmcont
	        and id_gecliente_int = cliente
		  	  and importafiattmp.vlr_inicial_str = comando
			 	  and importafiattmp.nminst = 'PGTOT'
          and cbcontratofiat.id_cbtiponegocio_int =
				  case
		     	 when importafiattmp.idneg = 'FEP' then '1'
		       when importafiattmp.idneg = 'LSG' then '2'
           when importafiattmp.idneg = 'FEB' then '3'
	         when importafiattmp.idneg = 'SAC' then '4'
		       when importafiattmp.idneg = 'ROT' then '5'
		       when importafiattmp.idneg = 'FES' then '6'
          end;

    update cbparcela set
   			situacao_int = 4,
        data_pagamento_dat = current_date,
				valor_pago_num = 0,
        tstamp = current_timestamp,
        id_geusuario_int = usuario

	  where cbparcela.data_pagamento_dat is NULL
			and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
			and cbcontratofiat.contrato_str = importafiattmp.nmcont
			and cbcontratofiat.id_cbtiponegocio_int =
				case
					when importafiattmp.idneg= 'FEP' then  '1'
					when importafiattmp.idneg= 'LSG' then  '2'
					when importafiattmp.idneg= 'FEB' then  '3'
					when importafiattmp.idneg= 'SAC' then  '4'
					when importafiattmp.idneg= 'ROT' then  '5'
					when importafiattmp.idneg= 'FES' then  '6'
				end
			and importafiattmp.vlr_inicial_str = comando
	    and importafiattmp.nminst = 'PGTOT';

-----------------------------------------------
--    Alteraï¿½ï¿½o Bicudo 11/08/2003
--    Tendo em vista problema no sistema da Fiat, temos a necessidade de executar as alteraï¿½ï¿½es
--    do CANCE antes de executarmos a atualizaï¿½ï¿½o do contrato (010). Levamos a rotina abaixo,
--    que atualiza as parcelas do CANCE para ser executada antes da atualizaï¿½ï¿½o do contrato (Dentro do Cï¿½digo 010)

    -----------------------------------------------------------------------
    -- Instrucao CANCE --
    -----------------------------------------------------------------------
--        update cbcontratofiat set
--        -- situacao_str=parampgtot,
--        data_stand_by_dat = importafiattmp.dtsusp,
--				tstamp = current_timestamp,
--        id_geusuario_int = usuario,
--		id_cbsituacaocontrato_int = CASE WHEN (importafiattmp.sitcontrato = intSitContratoJ) THEN intSitContratoW
--	  								 ELSE intSitContratoY END
--                                        -- Alteraï¿½ï¿½o 01/07/2003 - Bicudo / Luiz : Instruï¿½ï¿½o Cance Muda para Contrato Cancelado
--
--    where contrato_str = importafiattmp.nmcont
--		      and id_gecliente_int = cliente
--					and importafiattmp.vlr_inicial_str = comando
--					and importafiattmp.nminst = 'CANCE'
--          and id_cbtiponegocio_int =
--					case
--	        	when importafiattmp.idneg = 'FEP' then '1'
--	          when importafiattmp.idneg = 'LSG' then '2'
--	          when importafiattmp.idneg = 'FEB' then '3'
--	          when importafiattmp.idneg = 'SAC' then '4'
--	          when importafiattmp.idneg = 'ROT' then '5'
--	          when importafiattmp.idneg = 'FES' then '6'
--        end;
--
-- Alteraï¿½ï¿½o 01/07/2003 - Bicudo / Luiz  - Muda Situaï¿½ï¿½o da Parcela para Cancelado
--    update cbparcela set
--        situacao_int = 6,
--        data_pagamento_dat = current_date,
--				valor_pago_num = 0,
--    	  tstamp = current_timestamp,
--	      id_geusuario_int = usuario
--
--	  where cbparcela.data_pagamento_dat is NULL
--			and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
--			and cbcontratofiat.contrato_str = importafiattmp.nmcont
--			and cbcontratofiat.id_cbtiponegocio_int =
--				case
--					when importafiattmp.idneg= 'FEP' then  '1'
--					when importafiattmp.idneg= 'LSG' then  '2'
--					when importafiattmp.idneg= 'FEB' then  '3'
--					when importafiattmp.idneg= 'SAC' then  '4'
--					when importafiattmp.idneg= 'ROT' then  '5'
--					when importafiattmp.idneg= 'FES' then  '6'
--				end
--			and importafiattmp.vlr_inicial_str = comando
--	    and importafiattmp.nminst = 'CANCE';
--

-- Insere os followupï¿½s para PGPAR, PGTOT e CANCE
-- Alteraï¿½ï¿½o Bicudo 05/08/2003
-- O processo de incluir Folloup para PGPAR, PGTOT e CANCE, foi levado para o form CB008 - Importaï¿½ï¿½o
--           para permitir o acesso ao ID da parcela para apresentar na grid do followup.

--    PARA PGPAR, PGTOT e CANCE

--		insert into cbfollowup
--       (id_cbcontrato_int,
--        data_dat,
--        hora_tim,
--        historico_str,
--				tipo_contato_str,
--        id_geusuario_int,
--        id_cbsitcontato_int,
--        alterado_str,
--        data_cobranca_dat,
--        hora_cobranca_tim)
--
--		select
--        cbcontratofiat.id_cbcontrato_int,
--        current_date,
--        current_timestamp,
--				case
--				   	when importafiattmp.nminst = 'CANCE' then 'Instruï¿½ï¿½o Fiat CANCE Cancelamento'
--	          when importafiattmp.nminst = 'PGPAR' then 'Instruï¿½ï¿½o Fiat PGPAR - Pagamento Parcial'
--	          when importafiattmp.nminst = 'PGTOT' then 'Instruï¿½ï¿½o Fiat PGTOT - Pagamento Total'
--        end,
--				'N',
--        usuautomatico,
--				case
--				   	when importafiattmp.nminst = 'CANCE' then sitfupcance
--	          when importafiattmp.nminst = 'PGPAR' then sitfuppgpar
--	          when importafiattmp.nminst = 'PGTOT' then sitfuppgtot
--				end,
--        'S' ,
--        current_date,
--        current_timestamp
--
--	    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
--				   and cbcontratofiat.contrato_str = importafiattmp.nmcont
--
--	    where vlr_inicial_str = comando;
--

	  -- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato qdo for alteraï¿½ï¿½o
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Select
			  usuario,
			  cliente,
			  current_timestamp,
			  'Alt Situaï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			  cbcontratofiat.contrato_str,
			  'ID da Situaï¿½ï¿½o do Contrato alterada de ' || importafiattmp.sitcontrato || ' para ' || cbsituacaocontrato.id_cbsituacaocontrato_int ||'.'

			From importafiattmp Inner Join cbcontratofiat On cbcontratofiat.contrato_str = importafiattmp.nmcont
			Where importafiattmp.vlr_inicial_str = comando
					and importafiattmp.nminst in ('PGTOT', 'CANCE')
    			and id_cbtiponegocio_int =
					case
						when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 080 - AUTORIZAï¿½ï¿½ES PROCESSUAIS - SOLICITAï¿½ï¿½ES AUTORIZADAS

   if comando = '080' then

	  insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
        n_solicitacao_int,
        tipo_acao_str,
        observacao_str,
        data_dat,
        tstamp,
        id_geusuario_int)

    select
		    cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
        importafiattmp.nmauto,
        importafiattmp.tpacao,
        importafiattmp.texto,
        current_date,
				current_timestamp,
				usuario

		from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
	         when importafiattmp.idneg = 'FEP' then '1'
	         when importafiattmp.idneg = 'LSG' then '2'
	         when importafiattmp.idneg = 'FEB' then '3'
	         when importafiattmp.idneg = 'SAC' then '4'
	         when importafiattmp.idneg = 'ROT' then '5'
           when importafiattmp.idneg = 'FES' then '6'
         end

         where vlr_inicial_str = comando;
   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 081 - AUTORIZAï¿½ï¿½ES PROCESSUAIS - SOLICITAï¿½ï¿½ES NEGADAS

   if comando = '081' then

	  insert into cbfiatret
       (id_cbcontrato_int,
 			  codigo_registro_int,
        n_solicitacao_int,
        tipo_acao_str,
        observacao_str,
        data_dat,
				tstamp,
        id_geusuario_int)

    select
		    cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
        importafiattmp.nmauto,
        importafiattmp.tpacao,
        importafiattmp.texto,
        current_date,
				current_timestamp,
				usuario

		from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
	         when importafiattmp.idneg = 'FEP' then '1'
	         when importafiattmp.idneg = 'LSG' then '2'
	         when importafiattmp.idneg = 'FEB' then '3'
	         when importafiattmp.idneg = 'SAC' then '4'
	         when importafiattmp.idneg = 'ROT' then '5'
           when importafiattmp.idneg = 'FES' then '6'
         end

         where vlr_inicial_str = comando;
   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 082 - AUTORIZAï¿½ï¿½ES PROCESSUAIS - SOLICITAï¿½ï¿½ES AUTORIZADAS COM MODIFICAï¿½ï¿½O DO TIPO DE Aï¿½ï¿½O

   if comando = '082' then

	  insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
        n_solicitacao_int,
        tipo_acao_str,
        observacao_str,
        data_dat,
				tstamp,
        id_geusuario_int)

    select
		    cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
				importafiattmp.nmauto,
        importafiattmp.tpacao,
        importafiattmp.texto,
        current_date,
				current_timestamp,
				usuario

		from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
	         when importafiattmp.idneg = 'FEP' then '1'
	         when importafiattmp.idneg = 'LSG' then '2'
	         when importafiattmp.idneg = 'FEB' then '3'
	         when importafiattmp.idneg = 'SAC' then '4'
	         when importafiattmp.idneg = 'ROT' then '5'
           when importafiattmp.idneg = 'FES' then '6'
         end

         where vlr_inicial_str = comando;
   end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 090 - AUTORIZAï¿½ï¿½ES DE REMUNERAï¿½ï¿½O - SOLICITAï¿½ï¿½ES AUTORIZADAS

   if comando = '090' then

    insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
        n_solicitacao_int,
        valor_num,
				observacao_str,
				motivo_solicitacao_str,
				data_dat,
				tstamp,
        id_geusuario_int)

		select
        cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
        importafiattmp.nmauto,
        importafiattmp.vlraut,
        importafiattmp.texto,
        importafiattmp.idmoti,
        current_date,
				current_timestamp,
				usuario

    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
				 	 when importafiattmp.idneg = 'FEP' then '1'
					 when importafiattmp.idneg = 'LSG' then '2'
					 when importafiattmp.idneg = 'FEB' then '3'
					 when importafiattmp.idneg = 'SAC' then '4'
					 when importafiattmp.idneg = 'ROT' then '5'
					 when importafiattmp.idneg = 'FES' then '6'
         end

    where vlr_inicial_str = comando;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 091 - AUTORIZAï¿½ï¿½ES DE REMUNERAï¿½ï¿½O - SOLICITAï¿½ï¿½ES NEGADAS

   if comando = '091' then

    insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
        n_solicitacao_int,
        valor_num,
				observacao_str,
				motivo_solicitacao_str,
				data_dat,
				tstamp,
        id_geusuario_int)

    select
        cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
        importafiattmp.nmauto,
        importafiattmp.vlraut,
        importafiattmp.texto,
        importafiattmp.idmoti,
        current_date,
				current_timestamp,
				usuario

    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
				 	 when importafiattmp.idneg = 'FEP' then '1'
					 when importafiattmp.idneg = 'LSG' then '2'
					 when importafiattmp.idneg = 'FEB' then '3'
					 when importafiattmp.idneg = 'SAC' then '4'
					 when importafiattmp.idneg = 'ROT' then '5'
					 when importafiattmp.idneg = 'FES' then '6'
         end

    where vlr_inicial_str = comando;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 092 - AUTORIZAï¿½ï¿½ES DE REMUNERAï¿½ï¿½O - SOLICITAï¿½ï¿½ES AUTORIZADAS COM MODIFICAï¿½AO DE VALOR

   if comando = '092' then

    insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
        n_solicitacao_int,
        valor_num,
				observacao_str,
				motivo_solicitacao_str,
				data_dat,
				tstamp,
        id_geusuario_int)

		select
        cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
				importafiattmp.nmauto,
        importafiattmp.vlraut,
        importafiattmp.texto,
        importafiattmp.idmoti,
        current_date,
				current_timestamp,
				usuario

    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		     and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
				 	 when importafiattmp.idneg = 'FEP' then '1'
					 when importafiattmp.idneg = 'LSG' then '2'
					 when importafiattmp.idneg = 'FEB' then '3'
					 when importafiattmp.idneg = 'SAC' then '4'
					 when importafiattmp.idneg = 'ROT' then '5'
					 when importafiattmp.idneg = 'FES' then '6'
         end

    where vlr_inicial_str = comando;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 100 - INCONSISTï¿½NCIAS

   if comando = '100' then

    insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
				documento_str,
        data_dat,
				motivo_inconsistencia_str,
        usuario_str,
        tipo_registro_str,
				tstamp,
        id_geusuario_int)

    select
	      cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
				importafiattmp.numdocto,
        current_date,
        importafiattmp.motinc,
        importafiattmp.usuario,
        importafiattmp.tpreg,
				current_timestamp,
				usuario

    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
			   and cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
				   when importafiattmp.idneg = 'FEP' then '1'
				   when importafiattmp.idneg = 'LSG' then '2'
				   when importafiattmp.idneg = 'FEB' then '3'
				   when importafiattmp.idneg = 'SAC' then '4'
				   when importafiattmp.idneg = 'ROT' then '5'
				   when importafiattmp.idneg = 'FES' then '6'
         end
				 --inner join cbparcela on cbcontratofiat.id_cbcontrato_int = cbparcela.id_cbcontrato_int
				 --and cbparcela.parcela_int = importafiattmp.numparc

    where vlr_inicial_str = comando;
	 end if;
---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 120 - SITUAï¿½ï¿½O DOS PROCESSOS

   if comando = '120' then

---------------------------------------------------------------------------
 -- ATUALIZAR O CAMPO SUB-ESTABELECIDO
  Update importafiattmp set
  	subestabelecido = 'S'
  Where importafiattmp.vlr_inicial_str = '120'
	and importafiattmp.vara <> ''
	or importafiattmp.comarca <> '';
---------------------------------------------------------------------------

    insert into cbfiatret
       (id_cbcontrato_int,
				codigo_registro_int,
        situacao_str,
        tipo_interrupcao_str,
        data_acordo_dat,
        notificacao_str,
        np_protestada_str,
        carta_precatoria_str,
        tipo_acao_str,
        data_acao_dat,
        numero_processo_str,
        vara_str,
				comarca_str,
        acao_ajuizamento_str,
        observacao_str,
        data_dat,
				tstamp,
        id_geusuario_int,
				sub_estabelecido_str)

    select
		    cbcontratofiat.id_cbcontrato_int,
				to_number(comando,'999'),
				importafiattmp.situacao,
        importafiattmp.tpinterr,
        importafiattmp.dtacordo,
        importafiattmp.notifica,
	      importafiattmp.npprotes,
        importafiattmp.cartapre,
        importafiattmp.tpacao,
        importafiattmp.dtacao,
        importafiattmp.nmproc,
        importafiattmp.vara,
        importafiattmp.comarca,
	 			importafiattmp.acaoaj,
        importafiattmp.texto,
        current_date,
				current_timestamp,
				usuario,
				importafiattmp.subestabelecido

				from importafiattmp, cbcontratofiat
            where
               cbcontratofiat.contrato_str = importafiattmp.nmcont
               and vlr_inicial_str = comando
               and cbcontratofiat.id_gecliente_int = cliente
               and cbcontratofiat.id_cbtiponegocio_int =
							 	case
                	when importafiattmp.idneg = 'FEP' then '1'
                  when importafiattmp.idneg = 'LSG' then '2'
                  when importafiattmp.idneg = 'FEB' then '3'
                  when importafiattmp.idneg = 'SAC' then '4'
                  when importafiattmp.idneg = 'ROT' then '5'
                  when importafiattmp.idneg = 'FES' then '6'
                end;

--    from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
--			   and cbcontratofiat.contrato_str = importafiattmp.nmcont
--				 and cbcontratofiat.id_cbtiponegocio_int =
--         case
--					 when importafiattmp.idneg = 'FEP' then '1'
--					 when importafiattmp.idneg = 'LSG' then '2'
--					 when importafiattmp.idneg = 'FEB' then '3'
--					 when importafiattmp.idneg = 'SAC' then '4'
--					 when importafiattmp.idneg = 'ROT' then '5'
--					 when importafiattmp.idneg = 'FES' then '6'
--         end

--		where vlr_inicial_str = comando;

	 -- Atualizar a situaï¿½ï¿½o do contrato : se o contrato nï¿½o estiver no Jurï¿½dico (sit contr. = J ou W): se estiver baixado,
	 -- mudar sit contrato para W senï¿½o mudar sit contrato para J

	 update cbcontratofiat set
			id_cbsituacaocontrato_int = CASE WHEN (importafiattmp.sitcontrato = intsitcontratoB) THEN intsitcontratoW
																			 ELSE intsitcontratoJ END
    where contrato_str = importafiattmp.nmcont
		      and id_gecliente_int = cliente
					and importafiattmp.vlr_inicial_str = comando
					and importafiattmp.sitcontrato <> intsitcontratoJ or importafiattmp.sitcontrato <> intsitcontratoW
					and importafiattmp.subestabelecido = 'S'
          and id_cbtiponegocio_int =
					case
	        	when importafiattmp.idneg = 'FEP' then '1'
	          when importafiattmp.idneg = 'LSG' then '2'
	          when importafiattmp.idneg = 'FEB' then '3'
	          when importafiattmp.idneg = 'SAC' then '4'
	          when importafiattmp.idneg = 'ROT' then '5'
	          when importafiattmp.idneg = 'FES' then '6'
          end;

	  -- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato qdo for alteraï¿½ï¿½o
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Select
			  usuario,
			  cliente,
			  current_timestamp,
			  'Alt Situaï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			  cbcontratofiat.contrato_str,
			  'ID da Situaï¿½ï¿½o do Contrato alterada de ' || importafiattmp.sitcontrato || ' para ' || cbsituacaocontrato.id_cbsituacaocontrato_int ||'.'

       From importafiattmp, cbcontratofiat
              where
                  cbcontratofiat.contrato_str = importafiattmp.nmcont
                  and importafiattmp.vlr_inicial_str = comando
                  and importafiattmp.subestabelecido = 'S'
                  and cbcontratofiat.id_cbtiponegocio_int =
										case
                    	when importafiattmp.idneg = 'FEP' then '1'
                      when importafiattmp.idneg = 'LSG' then '2'
                      when importafiattmp.idneg = 'FEB' then '3'
                      when importafiattmp.idneg = 'SAC' then '4'
                      when importafiattmp.idneg = 'ROT' then '5'
                      when importafiattmp.idneg = 'FES' then '6'
                    end;

			--From importafiattmp Inner Join cbcontratofiat On cbcontratofiat.contrato_str = importafiattmp.nmcont
			--Where importafiattmp.vlr_inicial_str = comando
			--		and importafiattmp.subestabelecido = 'S'
    	--		and id_cbtiponegocio_int =
			--		case
			--			when importafiattmp.idneg = 'FEP' then '1'
	    --      when importafiattmp.idneg = 'LSG' then '2'
	    --      when importafiattmp.idneg = 'FEB' then '3'
	    --      when importafiattmp.idneg = 'SAC' then '4'
	    --      when importafiattmp.idneg = 'ROT' then '5'
	    --      when importafiattmp.idneg = 'FES' then '6'
      --    end;

	 end if;

---------------------------------------------------------------------------

---------------------------------------------------------------------------
-- 130 - REMUNERAï¿½ï¿½O RESTANTE FASE ADMINISTRATIVA E JUDICIAL

   if comando = '130' then

		--insert into cbfiatret
    --  (id_cbcontrato_int,
		--		codigo_registro_int,
		--		vlr_remuneracao_adm_num,
    --    vlr_remuneracao_jud_num,
    --    etapa_str,
    --    tipo_np_str,
    --    data_np_dat,
		--		data_dat,
		--		tstamp,
    --    id_geusuario_int)

		--select
		--    cbcontratofiat.id_cbcontrato_int,
		--		to_number(comando,'999'),
		--		importafiattmp.remradm,
    --    importafiattmp.rehojud,
    --    importafiattmp.etapa,
    --    importafiattmp.tpntpro,
    --   importafiattmp.dtntpro,
		--		current_date,
		--		current_timestamp,
		--		usuario

    --from importafiattmp inner join cbcontratofiat on id_gecliente_int = cliente
		--     and cbcontratofiat.contrato_str = importafiattmp.nmcont
		--		 and cbcontratofiat.id_cbtiponegocio_int =
    --     case
		--		   when importafiattmp.idneg = 'FEP' then '1'
		--			 when importafiattmp.idneg = 'LSG' then '2'
		--			 when importafiattmp.idneg = 'FEB' then '3'
		--			 when importafiattmp.idneg = 'SAC' then '4'
		--			 when importafiattmp.idneg = 'ROT' then '5'
		--			 when importafiattmp.idneg = 'FES' then '6'
    --     end

    --where vlr_inicial_str = comando;
	 --end if;

	 -- alterado conforme sugestï¿½o do Nï¿½lio

        -- Alteraï¿½ï¿½o Bicudo 12/09/2003
        -- A partir do dia 15/09/2003, a fiat enviarï¿½ no registro 130, se o contrato
        -- ï¿½ novo (N) ou redirecionado (R) e a data de atraso. Vamos gravï¿½-los na cbfiatret.

	  insert into cbfiatret
           (id_cbcontrato_int,
		codigo_registro_int,
		vlr_remuneracao_adm_num,
            vlr_remuneracao_jud_num,
            etapa_str,
            tipo_np_str,
            data_np_dat,
		data_dat,
		tstamp,
            id_geusuario_int,
            tipodirec_str,
            dt_atraso_dat)

        select
		    cbcontratofiat.id_cbcontrato_int,
	    	    to_number(comando,'999'),
		    importafiattmp.remradm,
        importafiattmp.rehojud,
        importafiattmp.etapa,
        importafiattmp.tpntpro,
        importafiattmp.dtntpro,
				current_date,
				current_timestamp,
				usuario,
        importafiattmp.tipodirec,
        importafiattmp.dt_atraso 
         

    from importafiattmp, cbcontratofiat
			where cbcontratofiat.contrato_str = importafiattmp.nmcont
				 and cbcontratofiat.id_cbtiponegocio_int =
         case
				   when importafiattmp.idneg = 'FEP' then '1'
					 when importafiattmp.idneg = 'LSG' then '2'
					 when importafiattmp.idneg = 'FEB' then '3'
					 when importafiattmp.idneg = 'SAC' then '4'
					 when importafiattmp.idneg = 'ROT' then '5'
					 when importafiattmp.idneg = 'FES' then '6'
         end
				 and cbcontratofiat.id_gecliente_int = cliente
				 and vlr_inicial_str = comando;

		end if;

-- Alteraï¿½ï¿½o 01/07/2003 - Bicudo - Atualiza na ContratoFiat os campos etapa e data ï¿½ltima etapa que ï¿½ utilizado no Cadastro de Contrato e Relatï¿½rios 

-- Alteraï¿½ï¿½o 18/09/2003 - Bicudo - Atualiza ID da etapa de acordo com o tipo de direcionamento 

            update cbcontratofiat set
                        etapa_str = importafiattmp.etapa,
                        data_ult_etapa_dat  = current_date,
                        id_cbetapa_int = case
  	          	                      when importafiattmp.tipodirec = 'N' then 1
	                                  when importafiattmp.tipodirec = 'R' then 2
                                    end
                  where contrato_str = importafiattmp.nmcont
  	                 and id_cbtiponegocio_int =
		      case
	          	    when importafiattmp.idneg = 'FEP' then '1'
	                    when importafiattmp.idneg = 'LSG' then '2'
	                    when importafiattmp.idneg = 'FEB' then '3'
	                    when importafiattmp.idneg = 'SAC' then '4'
	                    when importafiattmp.idneg = 'ROT' then '5'
	                    when importafiattmp.idneg = 'FES' then '6'
                                 end
                      and id_gecliente_int = cliente
	            and importafiattmp.vlr_inicial_str = comando;

        -- Alteraï¿½ï¿½o Bicudo 12/09/2003
        -- A partir do dia 15/09/2003, a fiat enviarï¿½ no registro 130, se o contrato
        -- ï¿½ novo (N) ou redirecionado (R).
        -- Para os contratos novos : Data vencimento = (data distribuicao - 11 dias)
        -- Para os redirecionados  : Data vencimento = (data distribuicao - 32 dias)
        
        -- Como ï¿½ maior a quantidade de contratos novos, vou incluir todas as parcelas  
        -- com Data vencimento = (data distribuicao - 11 dias).
     
        -- Lï¿½ no registro 130 : Verificar os contratos que sï¿½o redirecionados
        -- e alterar a Data vencimento = (data distribuicao - 32 dias).

        update cbparcela set 
            data_vencimento_dat =  current_date - 32 
        where cbparcela.data_ultima_distrib_dat = datapre
              and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int 
              and cbcontratofiat.contrato_str = importafiattmp.nmcont 
              and cbcontratofiat.id_cbtiponegocio_int = '4' 
              and cbcontratofiat.id_gecliente_int = cliente
              and importafiattmp.vlr_inicial_str = '130'
              and importafiattmp.idneg = 'SAC'
              and importafiattmp.tipodirec = 'R';

        update cbparcela set 
            data_vencimento_dat =  current_date - 11 
        where cbparcela.data_ultima_distrib_dat = datapre
              and cbparcela.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int 
              and cbcontratofiat.contrato_str = importafiattmp.nmcont 
              and cbcontratofiat.id_cbtiponegocio_int = '4' 
              and cbcontratofiat.id_gecliente_int = cliente
              and importafiattmp.vlr_inicial_str = '130'
              and importafiattmp.idneg = 'SAC'
              and importafiattmp.tipodirec = 'N';
              

--	 if comando = '999' then
--		update cbcontrato set
--			  valor_montante_num = (select sum(valor_principal_num) from cbparcela inner join cbcontratofiat
--														  on cbcontratofiat.id_cbcontrato_int = cbparcela.id_cbcontrato_int)
--		where contrato_str = importafiattmp.nmcont and id_gecliente_int = cliente;
--	 end if;

RETURN NULL;
end;
$_$;

--
-- TOC entry 12030 (class 0 OID 0)
-- Dependencies: 2013
-- Name: FUNCTION importa_fiat99(text, bigint, bigint, bigint, bigint); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_fiat99(text, bigint, bigint, bigint, bigint) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o da FIAT';

--
-- TOC entry 2014 (class 1255 OID 27542)
-- Name: importa_honda(text, integer, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_honda(text, integer, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
comando alias for $1;
filial alias for $2;
empresa alias for $3;
usuario alias for $4;
cliente alias for $5;

BEGIN

if comando = '0' then
	-- Verificaï¿½ï¿½o de Tipo de Negocio
	Update importahondatmp Set tiponegocio = Case When Upper(segmento) = '2W' Then 11
																								When Upper(segmento) = '4W' Then 12
																					 End;
end if;

if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratohonda
	(id_gecliente_int,
	id_gefilial_int,
	id_geempresa_int,
	id_cbtiponegocio_int,

	nosso_numero_str,
	contrato_str,
	nome_str,
	cpf_str,
	rg_str,
	data_contrato_dat,
	tabela_str,
	endereco_str,
	complemento_str,
	telefone_str,
	bairro_str,
	cidade_str,
	estado_str,
	cep_str,
	endereco_trabalho_str,
	complemento_trabalho_str,
	telefone_trabalho_str,
	bairro_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cep_trabalho_str,
	nome_avalista1_str,
	cpf_avalista1_str,
	endereco_avalista1_str,
	complemento_avalista1_str,
	fone_avalista1_str,
	bairro_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	cep_avalista1_str,
	endereco_trab_avalista1_str,
	complemento_trab_avalista1_str,
	fone_trab_avalista1_str,
	bairro_trab_avalista1_str,
	cidade_trab_avalista1_str,
	estado_trab_avalista1_str,
	cep_trab_avalista1_str,
	taxa_contrato_int,
	numero_total_parcelas_int,
	marca_str,
	segmento_str,
	veiculo_str,
	cor_str,
	ano_str,
	nome_concessionaria_str,
	fax_concessionaria_str,
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	id_fimoeda_int,
	tstamp,
	id_geusuario_int)

	select
	cliente,
	filial,
	empresa,
	tiponegocio,

	codigo_acesso,
	contrato,
	nome_cliente,
	cpf_cliente,
	rg_cliente,
	data_contrato,
	tabela,
	endereco_cliente,
	complemento_cliente,
	fone_cliente,
	bairro_cliente,
	cidade_cliente,
	Case When (estado_cliente <> '') Then estado_cliente Else NULL End,
	cep_cliente,
	end_com_cliente,
	complemento_com_cliente,
	fone_com_cliente,
	bairro_com_cliente,
	cidade_com_cliente,
	estado_com_cliente,
	cep_com_cliente,
	nome_avalista,
	cpf_avalista,
	endereco_avalista,
	complemento_avalista,
	fone_avalista,
	bairro_avalista,
	cidade_avalista,
	estado_avalista,
	cep_avalista,
	endereco_com_avalista,
	complemento_com_avalista,
	fone_com_avalista,
	bairro_com_avalista,
	cidade_com_avalista,
	estado_com_avalista,
	cep_com_avalista,
	(taxa_contrato/100),
	prazo_contrato,
	marca,
	segmento,
	veiculo,
	cor_veiculo,
	ano_fabricacao,
	concessionaria,
	fax_concessionaria,
	current_date,
	current_date,
	1,
	1,
	current_timestamp,
	usuario

	From importahondatmp 
	Where vlr_inicial_str = '1' 
	And inclui_altera = 'I';

	-- Inclusao da parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,
	
	data_entrada_ca_dat,
	id_esregua_int,
	
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratohonda.id_cbcontrato_int,
	importahondatmp.parcela_vencida,
	importahondatmp.vencimento_parcela,
	importahondatmp.valor_parcela,
	0,
	importahondatmp.tipo,
	
	current_date,
	Case When (current_date - importahondatmp.vencimento_parcela) < 11 Then 154 Else 155 End,
	
	current_date,
	current_date,
	usuario,
	current_timestamp
	From importahondatmp Inner Join cbcontratohonda On
	(cbcontratohonda.contrato_str, cbcontratohonda.id_cbtiponegocio_int) =
	(importahondatmp.contrato, importahondatmp.tiponegocio)
	Where vlr_inicial_str = '1' 
	And inclui_altera_parc = 'I';

	-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
	  current_timestamp,
	  'Alt Situaï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratohonda.contrato_str,
	  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para A.'

	From importahondatmp Inner Join cbcontratohonda On
	(cbcontratohonda.contrato_str, cbcontratohonda.id_cbtiponegocio_int) =
	(importahondatmp.contrato, importahondatmp.tiponegocio)
	Inner Join cbsituacaocontrato On cbcontratohonda.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where cbcontratohonda.id_cbsituacaocontrato_int Not In ('2', '4', '13')
	And importahondatmp.vlr_inicial_str = '1' 
	And importahondatmp.inclui_altera_parc = 'I';

	Update cbcontratohonda Set id_cbsituacaocontrato_int = 1

	Where cbcontratohonda.contrato_str = importahondatmp.contrato
	And cbcontratohonda.id_cbtiponegocio_int = importahondatmp.tiponegocio
	And cbcontratohonda.id_gecliente_int = cliente
	And cbcontratohonda.id_cbsituacaocontrato_int Not In ('2', '4', '13')
	And importahondatmp.vlr_inicial_str = '1'
	And importahondatmp.inclui_altera_parc = 'I';

	-- Alteracao de Contrato
	Update cbcontratohonda Set
	id_gefilial_int = filial,
	id_geempresa_int = empresa,
	nome_str = importahondatmp.nome_cliente,
	cpf_str = importahondatmp.cpf_cliente,
	rg_str = importahondatmp.rg_cliente,
	data_contrato_dat = importahondatmp.data_contrato,
	tabela_str = importahondatmp.tabela,
	endereco_str = importahondatmp.endereco_cliente,
	complemento_str = importahondatmp.complemento_cliente,
	telefone_str = importahondatmp.fone_cliente,
	bairro_str = importahondatmp.bairro_cliente,
	cidade_str = importahondatmp.cidade_cliente,
	estado_str = Case When (importahondatmp.estado_cliente <> '') Then importahondatmp.estado_cliente Else NULL End,
	cep_str = importahondatmp.cep_cliente,
	endereco_trabalho_str = importahondatmp.end_com_cliente,
	telefone_trabalho_str = importahondatmp.fone_com_cliente,
	bairro_trabalho_str = importahondatmp.bairro_com_cliente,
	cidade_trabalho_str = importahondatmp.cidade_com_cliente,
	estado_trabalho_str = importahondatmp.estado_com_cliente,
	cep_trabalho_str = importahondatmp.cep_com_cliente,
	nome_avalista1_str = importahondatmp.nome_avalista,
	cpf_avalista1_str = importahondatmp.cpf_avalista,
	endereco_avalista1_str = importahondatmp.endereco_avalista,
	fone_avalista1_str = importahondatmp.fone_avalista,
	bairro_avalista1_str = importahondatmp.bairro_avalista,
	estado_avalista1_str = importahondatmp.estado_avalista,
	cep_avalista1_str = importahondatmp.cep_avalista,
	endereco_trab_avalista1_str = importahondatmp.endereco_com_avalista,
	fone_trab_avalista1_str = importahondatmp.fone_com_avalista,
	bairro_trab_avalista1_str = importahondatmp.bairro_com_avalista,
	cidade_trab_avalista1_str = importahondatmp.cidade_com_avalista,
	estado_trab_avalista1_str = importahondatmp.estado_com_avalista,
	cep_trab_avalista1_str = importahondatmp.cep_com_avalista,
	numero_total_parcelas_int = importahondatmp.prazo_contrato,
	marca_str = importahondatmp.marca,
	cor_str = importahondatmp.cor_veiculo,
	ano_str = importahondatmp.ano_fabricacao,
	nome_concessionaria_str = importahondatmp.concessionaria,
	data_ultima_distrib_dat = current_date,
	--nosso_numero_str = importahondatmp.codigo_acesso,
	complemento_trabalho_str = importahondatmp.complemento_com_cliente,
	complemento_avalista1_str = importahondatmp.complemento_avalista,
	complemento_trab_avalista1_str = importahondatmp.complemento_com_avalista,
	taxa_contrato_int = (importahondatmp.taxa_contrato/100),
	segmento_str = importahondatmp.segmento,
	veiculo_str = importahondatmp.veiculo,
	fax_concessionaria_str = importahondatmp.fax_concessionaria ,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where contrato_str = importahondatmp.contrato
	And id_cbtiponegocio_int = importahondatmp.tiponegocio
	And id_gecliente_int = cliente
	And importahondatmp.vlr_inicial_str = '1'
	And importahondatmp.inclui_altera = 'A';

-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o da parcela

--Insert Into gehistoricousuario
-- (id_geusuario_int,
--  id_gecliente_int,
--  data_hora_dat,
--  evento_str,
--  contrato_str,
--  parcela_int,
--  obs_txt)

--Select
--  usuario,
--  cliente,
--  current_timestamp,
--  'Alt Situaï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
--  cbcontratohonda.contrato_str,
--  importahondatmp.parcela_vencida,
--  'Situaï¿½ï¿½o da Parcela alterada de ' || cbparcela.situacao_int || ' para 0.'

--From importahondatmp Inner Join cbcontratohonda On cbcontratohonda.contrato_str = importahondatmp.contrato
--inner join cbparcela on cbcontratohonda.id_cbcontrato_int = cbparcela.id_cbcontrato_int
--Where parcela_int = importahondatmp.parcela_vencida
--And importahondatmp.vlr_inicial_str = '1'
--And importahondatmp.inclui_altera_parc = 'A';
--And id_cbtiponegocio_int =
--case
--when Upper(importahondatmp.segmento)  = '2W' then '11'
--when Upper(importahondatmp.segmento) = '4W' then '12'
--end

-- Alteracao da parcela

--Update cbparcela Set
--data_vencimento_dat = importahondatmp.vencimento_parcela,
--valor_principal_num = importahondatmp.valor_parcela,
--situacao_int = 0,
--tipo_str = importahondatmp.tipo,
--data_ultima_distrib_dat = current_date,
--id_geusuario_int = usuario,
--tstamp = current_timestamp

--Where parcela_int = importahondatmp.parcela_vencida
--And id_cbcontrato_int =  cbcontratohonda.id_cbcontrato_int
--And cbcontratohonda.contrato_str = importahondatmp.contrato
--And situacao_int <> '4'
--And importahondatmp.vlr_inicial_str = '1'
--And importahondatmp.inclui_altera_parc = 'A'
--And cbcontratohonda.id_gecliente_int = cliente ;

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12031 (class 0 OID 0)
-- Dependencies: 2014
-- Name: FUNCTION importa_honda(text, integer, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_honda(text, integer, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Honda';

--
-- TOC entry 2015 (class 1255 OID 27554)
-- Name: importa_itau(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_itau(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
status alias   for $1;
empresa_logada alias  for $2;
usuario alias  for $3;
cliente alias  for $4;
arquivo alias  for $5;

cursor_contrato 		  record;
dt_distribuicao 			date;
int_retiradas 				int4;
int_total  						int4;
empresa								int4;

BEGIN

--Retorna data de distribuiï¿½ï¿½o
dt_distribuicao:= (Select data_lote From importaitautmp Where tipo_registro = '0');
-- Empresa fixa
empresa :=  1;

if status = '0' then

	-- Seta qtde de registros no cabecalho (gravacao na gestatusimporta)
	Update importaitautmp Set
	qtde_registros = (Select qtde_registros From importaitautmp Where tipo_registro  = '9')
	Where tipo_registro  = '0';

	-- Seta moeda
	Update importaitautmp Set
	id_fimoeda = 1
	Where tipo_registro  = '1';

	-- Seta plataform e fiial do Itau/filial da Paschoalotto
	Update importaitautmp Set
	id_cbplataforma = cbplataforma.id_cbplataforma_int,
	id_gefilial = cbplataforma.id_gefilial_int
	Where importaitautmp.agencia_plataforma = cbplataforma.codigo_int
	And importaitautmp.tipo_registro  = '1'
	And cbplataforma.id_gecliente_int = cliente;

	--Seta Etapa 
	--Contratos Finaustria com carteira 2/3 etapa 4-SRFIN / 5-F180 - filial 17(23) Bauru 7 de Setembro
	Update importaitautmp Set
	id_cbetapa = Case When escontratofinaustria.carteira_int = 2 Then 4
										When escontratofinaustria.carteira_int = 3 Then 5
										Else Null
							 End,

	id_gefilial = Case When (escontratofinaustria.carteira_int = 2 or escontratofinaustria.carteira_int = 3) Then 23
							 		   Else importaitautmp.id_gefilial
								End

	Where importaitautmp.num_contratos_finaustria = escontratofinaustria.contrato_str
	And tipo_registro  = '1'
	And Trim(Upper(empresaitau)) Not In ('96', '97', '98', '89');

	
	--Contratos InterCap 
	Update importaitautmp Set
	id_cbetapa = Case When importaitautmp.num_contratos_finaustria Is Not Null And importaitautmp.num_contratos_finaustria <> '' Then 50
										Else id_cbetapa
							 End
	Where importaitautmp.id_cbetapa Is Null
	And tipo_registro  = '1'
	And Trim(Upper(empresaitau)) = '91';

	-- Contratos Fiat (operacao 62/63) com/sme num_contratos_finaustria,  7-Fiata Antiga - / Fiat Nova - Filial 30(24) Bauru - Fiat Centralizada
	-- Demais contratos 6-2ï¿½ fase
	Update importaitautmp Set
	id_cbetapa = Case When (Trim(Upper(empresaitau)) In ('96', '97', '98', '89') And importaitautmp.num_contratos_finaustria Is Not Null) Then 7
										When (Trim(Upper(empresaitau)) In ('96', '97', '98', '89') And importaitautmp.num_contratos_finaustria Is Null) Then 8
										Else 6
							 End
	Where importaitautmp.id_cbetapa Is Null
	And tipo_registro  = '1';

	-- Seta tipo de negocio
	-- Se contrato jï¿½ existe ignora arquivo de remessa (duplicaï¿½ï¿½o contrato por TN)
	Update importaitautmp Set
	id_cbtiponegocio = cbtiponegocio.id_cbtiponegocio_int
	Where Trim(Upper(empresaitau)) = Trim(Upper(cbtiponegocio.codigo_str))
	And importaitautmp.tipo_registro In ('1', '2')
	And cbtiponegocio.id_gecliente_int = cliente;

	-- Seta rï¿½gua da parcela - sem subclassificaï¿½ï¿½o
	-- 08/11/05 retirado codigo 8-correntistas devido atualizaï¿½ï¿½o do documento
	Update importaitautmp Set
	id_esregua = esregua.id_esregua_int
	Where esregua.id_gecliente_int = cliente 
	And codigo_estrategia = esregua.codigo_int
	And tipo_registro  = '1'
	And codigo_estrategia In ('1','2','4','5','9');

	-- Seta rï¿½gua da parcela - com subclassificaï¿½ï¿½o (defualt CAMPEï¿½)
	-- 08/11/05 inserido codigo 8-correntistas devido atualizaï¿½ï¿½o do documento
	Update importaitautmp Set
	id_esregua = Case When codigo_estrategia = '7'  Then 168
	                  When codigo_estrategia = '8'  Then 8
										When codigo_estrategia = '10' Then 128
										When codigo_estrategia = '11' Then 129
										When codigo_estrategia = '12' Then 130
							 End
	Where esregua.id_gecliente_int = cliente 
	And codigo_estrategia = esregua.codigo_int
	And tipo_registro  = '1'
	And codigo_estrategia In ('7','8','10','11','12');

	-- 28/11 - Alteraï¿½ï¿½o subclassificaï¿½ï¿½o
	Update importaitautmp Set id_esregua = 
	Case When (codigo_estrategia = '2' And (current_date - data_geral) Between 21 and 30) Then 15
  
	-- fpd novos 7
	--Campeï¿½
	When (codigo_estrategia = '7' And (subclassificacao In (
	      '492', '494', '501', '504', '1022', '1283', '1285', '1286', '1287', '1288', '1289', '1290', '1291', '1308', 
			  '1309', '1310', '1311', '1331', '1336', '1342',
				'1529', '1530', '1531', '1532', '1719', '1720', '1794', '1795', '1796', '1797', '1806', '1807', '1808', 
				'1809', '1810', '1811', '1812', '1813', '1814', '1815', '1816', '1839', '1840', '1841', '1842', '1843',
				'1905', ' 1906', ' 1907', ' 1908', '1913', '1914', '1915', '1916', '1921', '1922', '1923', '1927', '1928', 
				'1929', '1930', '1935', '1936', '1937', '1938', '1942' 
				))) Then 168

	--Desafiante 1
	When (codigo_estrategia = '7' And (subclassificacao In (
	      '1293', '1294', '1295', '1296', '1297', '1298', '1300', '1301', '1302', '1303', '1304', '1305', '1306', 
			  '1307', '1312', '1330', '1332', '1337', '1340', '1343',
				'1798', '1799', '1800', '1801', '1817', '1818', '1819', '1820', '1821', '1822', '1823', '1824', '1825', 
				'1826', '1827', '1844', '1845', '1846', '1847', '1848'
				))) Then 169

	--Desafiante 2
	When (codigo_estrategia = '7' And (subclassificacao In (
		    '1314', '1315', '1316', '1317', '1318', '1319', '1320', '1321', '1322', '1323', '1324', '1325', '1326', 
			  '1327', '1328', '1329', '1333', '1338', '1341', '1344',
				'1802', '1803', '1804', '1805', '1828', '1829', '1830', '1831', '1832', '1833', '1834', '1835', '1836', 
				'1837', '1838', '1849', '1850', '1851', '1852', '1853'				
				))) Then 170

	-- Desafiante (criado em 16/01 - documento de 03012006)
	When (codigo_estrategia = '7' And (subclassificacao In (
			  '1909', ' 1910', ' 1911', ' 1912', ' 1917', '1918', ' 1919', '1920', ' 1924', ' 1925', ' 1926', ' 1931', 
			  '1932', '1933', '1934', '1939', '1940', '1941', ' 1943', '1944'
				))) Then 177

	-- correntistas 8
	--Campeï¿½
	When (codigo_estrategia = '8' And (subclassificacao In (
			  '1229', '1230', '1231', '1232', '1241', '1242', '1243', '1244', '1253', '1254', '1255', '1256', '1266', 
			  '1267', '1268', '1269', '1278', '1488', '1490', '1492', '1494', '1496', '1498', '1500', '1502', '1504', 
				'1506', '1508', '1510', '1512', '1514', '1517', '1519', '1521',
				'1725', '1726', '1727', '1728', '1729', '1730', '1731', '1732'
				))) Then 8

	--Desafiante 1
  When (codigo_estrategia = '8' And (subclassificacao In (
	      '72', '1233', '1234', '1235', '1236', '1245', '1246', '1247', '1248', '1257','1258', '1259', '1260', 
			  '1270', '1271', '1272', '1273', '1281','1489', '1491', '1493', '1495', '1497', '1499', '1501', '1503', 
				'1505', '1507', '1509', '1511', '1513', '1516', '1518', '1520', '1522', '1779', '1780'
				))) Then 10

	--Desafiante 2
  When (codigo_estrategia = '8' And (subclassificacao In (
	      '1237', '1238', '1239', '1240', '1249', '1250', '1251', '1252', '1261', '1262', '1263', '1264', '1274', 
			  '1275', '1276', '1277', '1282', '1781', '1782'
				))) Then 11

	-- mb paulista 10
	--Campeï¿½
  When (codigo_estrategia = '10' And (subclassificacao In (
	      '945', '947', '953','957','1050', '1052', '1167', '1168', '1169', '1170', '1179', '1188', '1191', '1194', 
			  '1197', '1200', '1203', '1209', '1212', '1219', '1345', '1346', '1347', '1356', '1359', '1362','1614',
				'1615',	'1616', '1618', '1619', '1620', '1621', '1633', '1634', '1635', '1783', '1784',
				'1536', '1537', '1539', '1540'
				))) Then 128

	--Desafiante 1
	When (codigo_estrategia = '10' And (subclassificacao In (
	      '1172', '1173', '1174', '1182', '1189', '1192', '1195', '1198', '1201', '1204', '1207', '1210', '1220', 
			 	'1348', '1349', '1350', '1351', '1357', '1360', '1363', '1623', '1624', '1625', '1626', '1627', '1628', 
				'1629', '1630', '1631', '1632', '1636', '1637', '1638', '1639', '1640', '1706', '1779', '1780',
				'1707', '1708', '1709', '1710', '1715', '1790', '1791', '1792', '1793'
				))) Then 131

	--Desafiante 2
  When (codigo_estrategia = '10' And (subclassificacao In (
	      '1176', '1177', '1178', '1185', '1190', '1193', '1196', '1199', '1202', '1205', '1208', '1211', '1221', 
			  '1352', '1353', '1354', '1355', '1358', '1361', '1364', '1785', '1786',
				'1711', '1712', '1713', '1714', '1716', '1789'
				))) Then 156

	-- demais regioes 11
	--Campeï¿½
  When (codigo_estrategia = '11' And (subclassificacao In (
	      '961', '963', '969', '973', '999', '1057', '1059', '1365', '1367', '1370', '1371', '1373', '1375', '1377', 
			  '1379', '1381', '1383', '1385', '1387', '1389', '1641', '1642', '1643', '1644', '1645', '1646', '1647', 
				'1648', '1649', '1650', '1651', '1663', '1664', '1665', '1666', '1672',
				'1543', '1544', '1545', '1546', '1733', '1734', '1735', '1736', '1737', '1738', '1739', '1740', '1741', 
				'1742', '1743', '1744', '1745', '1746', '1747', '1748', '1749', '1750'
				))) Then 129

	--Desafiante 
  When (codigo_estrategia = '11' And (subclassificacao In (
	      '962', '964', '970', '974', '1000', '1058', '1060', '1366', '1368', '1369', '1372', '1374', '1376', 
			  '1378', '1380', '1382', '1384', '1386', '1388', '1390', '1652', '1653', '1654', '1655', '1656', '1657', 
				'1658', '1659', '1660', '1661', '1662', '1667', '1668', '1669', '1670', '1671',
				'1751', '1752', '1753', '1754', '1755', '1756', '1757', '1758', '1759', '1760', '1761', '1762', '1763', 
				'1764', '1765', '1766'
				))) Then 132

	-- bons pagadores 12
	--Campeï¿½
  When (codigo_estrategia = '12' And (subclassificacao In (
	      '979', '985', '989', '993', '1065', '1067', '1391', '1393', '1395', '1397', '1399', '1401', '1403', '1407', 
			  '1409', '1411', '1413', '1415', '1417', '1419', '1673', '1674', '1675', '1676', '1677', '1678', '1679', 
				'1680', '1681', '1682', '1683', '1696', '1697', '1698', '1699', '1700', '1787', '1788',
				'1549', '1550', '1551', '1552' 
				))) Then 130

	--Desafiante 
  When (codigo_estrategia = '12' And (subclassificacao In ( 
	      '980', '986', '990', '992', '1066', '1068', '1392', '1394', '1396', '1398', '1400', '1402', '1404', '1406', 
			  '1408', '1410', '1412', '1414', '1416', '1418', '1684', '1685', '1687', '1688', '1689', '1690', '1691', 
				'1692', '1693', '1694', '1695', '1701', '1702', '1703', '1704', '1705'
				))) Then 133

	Else id_esregua
	End

	Where tipo_registro  = '1';

	-- Rï¿½gua nula - 4 Hiper Pressï¿½o
	Update importaitautmp Set
	id_esregua = 4
	Where id_esregua Is Null
	And tipo_registro  = '1';
	
	
	-- Seta data de distribuicao da parcela
	-- Status 10 - data_envio / Status 13 - dt_distribuicao / Status 20/27 - data_envio se preenchida, se nao preenchida dt_distribuicao
	Update importaitautmp Set
	distribuicao_parcela = Case When status_registro = '10' Then data_envio
															When status_registro = '13' Then dt_distribuicao
															When status_registro = '20' Then data_envio
															When status_registro = '27' Then data_envio
												 			Else Null
							 					 End
	Where tipo_registro  = '1'
	And inclui_altera_parcela = 'I'
	And num_parcela Is Not Null;

	Update importaitautmp Set
	distribuicao_parcela = dt_distribuicao
	Where tipo_registro  = '1'
	And status_registro In ('20', '27')
	And inclui_altera_parcela = 'I'
	And num_parcela Is Not Null
	And data_envio Is Null;

end if;

-- 03/11 Inserido campo data_ativacao_dat

-- Status 10/13/20/27
-- Inclusï¿½o de contratos   - Status 10/13/20/27
-- Alteraï¿½ï¿½o de contratos  - Status 10
-- Inclusï¿½o de parcelas    - Status 10/13/20/27
-- Alteraï¿½ï¿½o de parcelas   - Status 10/13
if status = '10' then

	-- Inclusï¿½o de Contrato
	Insert Into cbcontratoitau
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,

	codigo_operacao_str,
	contrato_str,
	id_fimoeda_int,
	id_cbplataforma_int,
	id_cbetapa_int,
	tipo_contrato_str,

	codigo_escritorio_str,
	numero_lote_int,
	regiao_plataforma_str,
	recebimento_str,
	data_contrato_dat,
	data_vencimento_dat,
	valor_montante_num,
	numero_total_parcelas_int,
	numero_parcelas_atraso_int,
	valor_contratado_num,
	tipo_pessoa_str,
	cpf_str,
	nome_str,
	endereco_str,
	complemento_str,
	bairro_str,
	cidade_str,
	estado_str,
	cep_str,
	ddd_str,
	telefone_str,
	ramal_str,
	endereco_trabalho_str,
	complemento_trabalho_str,
	bairro_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cep_trabalho_str,
	ddd_trabalho_str,
	telefone_trabalho_str,
	ramal_trabalho_str,
	tipo_pessoa_avalista1_str,
	cpf_avalista1_str,
	nome_avalista1_str,
	endereco_avalista1_str,
	complemento_avalista1_str,
	bairro_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	cep_avalista1_str,
	ddd_avalista1_str,
	fone_avalista1_str,
	ramal_trab_avalista1_str,
	tipo_pessoa_avalista2_str,
	cpf_avalista2_str,
	nome_avalista2_str,
	endereco_avalista2_str,
	complemento_avalista2_str,
	bairro_avalista2_str,
	cidade_avalista2_str,
	estado_avalista2_str,
	cep_avalista2_str,
	ddd_avalista2_str,
	fone_avalista2_str,
	ramal_trab_avalista2_str,
	codigo_concessionaria_str,
	porte_empresa_str,
	spr_str,
	codigo_seguradora_int,
	codigo_op_finaustria_str,
	contrato_finaustria_str,

	data_ativacao_dat,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,

	codigo_operacao,
	contrato,
	id_fimoeda,
	id_cbplataforma,
	id_cbetapa,
	tipo_contrato,

	codigo_escritorio,
	num_lote,
	regiao_plataforma,
	num_recebimento,
	data_contratacao,
	data_vencimento,
	valor_atualizado,
	qtde_parcelas,
	qtde_atraso,
	valor_vencimento,
	pessoa_cli,
	cpf_cli,
	nome_cli,
	(logradouro_cli || '-' || Coalesce(numero_cli, '')),
	complemento_cli,
	bairro_cli,
	cidade_cli,
	estado_cli,
	cep_cli,
	ddd_cli,
	telefone_cli,
	ramal_cli,
	(logradouro_com_cli || '-' || Coalesce(numero_com_cli, '')),
	complemento_com_cli,
	bairro_com_cli,
	cidade_com_cli,
	estado_com_cli,
	cep_com_cli,
	ddd_com_cli,
	telefone_com_cli,
	ramal_com_cli,
	pessoa_aval1,
	cpf_aval1,
	nome_aval1,
	(logradouro_aval1 || '-' || Coalesce(numero_aval1, '')),
	complemento_aval1,
	bairro_aval1,
	cidade_aval1,
	estado_aval1,
	cep_aval1,
	ddd_aval1,
	telefone_aval1,
	ramal_aval1,
	pessoa_aval2,
	cpf_aval2,
	nome_aval2,
	(logradouro_aval2 || '-' || Coalesce(numero_aval2, '')),
	complemento_aval2,
	bairro_aval2,
	cidade_aval2,
	estado_aval2,
	cep_aval2,
	ddd_aval2,
	telefone_aval2,
	ramal_aval2,
	codigo_filial,
	porte_empresa,
	produtos_rede,
	codigo_seguradora,
	codigo_finaustria,
	num_contratos_finaustria,

	data_ativacao,

	data_envio,
	data_envio,
	1,
	current_timestamp,
	usuario

	From importaitautmp
	Where tipo_registro  = '1'
	And status_registro In ('10', '13', '20', '27')
	And inclui_altera = 'I';

  -- 25/10/05 Inserido campo cp_parcela_num
	-- Inclusï¿½o de Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	data_limite_retorno_dat,
	id_esregua_int,
	produto_int,
	tarifa_cobranca_num,
	situacao_int,
	tipo_str,
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	status_registro_str,
	cp_parcela_num,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitau.id_cbcontrato_int,
	num_parcela,
	data_geral,
	valor_geral,
	data_limite,
 	id_esregua,
	subclassificacao,
	tarifa_cobranca,
	0,
	'1',
	distribuicao_parcela,
	dt_distribuicao,
	status_registro,
	valor_encargo,

	usuario,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
	Where importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'I'
	Order by importaitautmp.contrato, importaitautmp.num_parcela, importaitautmp.data_geral;

	-- Distribuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratoitau.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	distribuicao_parcela

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitau.id_cbcontrato_int
	Where importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'I'
	And importaitautmp.num_parcela = cbparcela.parcela_int
	And cbparcela.tipo_str = '1';

	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato aberto
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo,
	  cbcontratoitau.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
	Where cbcontratoitau.id_cbsituacaocontrato_int = 6
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'I';

	--Alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato baixado
	Update cbcontratoitau Set
	id_cbsituacaocontrato_int = 1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And cbcontratoitau.id_cbsituacaocontrato_int = '6'
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'I';

	-- Inserï¿½ï¿½o FollosUp cliente
	Insert Into cbfollowupcliente
	(id_cbcontrato_int,
  data_lancamento_dat,
  sequencia_descricao_num,
  descricao_text,

  id_geusuario_int,
  tstamp)

	Select
	cbcontratoitau.id_cbcontrato_int,
	dt_distribuicao,
	seq_parecer_anterior,
	parecer1_esc_anterior,

	usuario,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
	Where importaitautmp.tipo_registro = '2'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera = 'I';

	-- 03/11/05 Log alteraï¿½ï¿½o data de ativacao
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o da Data de ativaï¿½ï¿½o - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	  cbcontratoitau.contrato_str,
		case when (cbcontratoitau.data_ativacao_dat is null) then 
    'Data estava em branco e foi alterada para ' || to_char(importaitautmp.data_ativacao, 'dd/mm/yyyy') 
		else
	  'Data alterada de ' || to_char(cbcontratoitau.data_ativacao_dat,'dd/mm/yyyy') || ' para ' || to_char(importaitautmp.data_ativacao, 'dd/mm/yyyy') 
		end

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
	Where importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera In ('A', '')
	and importaitautmp.data_ativacao is not null;

	-- 03/11/05 Altera campo data_ativacao_dat
	-- Alteraï¿½ï¿½o Contrato
	Update cbcontratoitau Set
	tipo_contrato_str	= Coalesce(importaitautmp.tipo_contrato, cbcontratoitau.tipo_contrato_str),
	codigo_escritorio_str = Coalesce(importaitautmp.codigo_escritorio,	cbcontratoitau.codigo_escritorio_str),
	numero_lote_int	= Coalesce(importaitautmp.num_lote,	cbcontratoitau.numero_lote_int),
	--codigo_operacao_str	= Coalesce(importaitautmp.codigo_operacao, cbcontratoitau.codigo_operacao_str),
	regiao_plataforma_str	= Coalesce(importaitautmp.regiao_plataforma, cbcontratoitau.estado_str),
	recebimento_str	= Coalesce(importaitautmp.num_recebimento, cbcontratoitau.recebimento_str	),
	data_contrato_dat	= Coalesce(importaitautmp.data_contratacao, cbcontratoitau.data_contrato_dat),
	data_vencimento_dat	= Coalesce(importaitautmp.data_vencimento, cbcontratoitau.data_vencimento_dat),
	valor_contratado_num	= Coalesce(importaitautmp.valor_vencimento, cbcontratoitau.valor_contratado_num),
	numero_total_parcelas_int	= Coalesce(importaitautmp.qtde_parcelas, cbcontratoitau.numero_total_parcelas_int),
	numero_parcelas_atraso_int	= Coalesce(importaitautmp.qtde_atraso, cbcontratoitau.numero_parcelas_atraso_int),
	valor_montante_num	= Coalesce(importaitautmp.valor_atualizado,	cbcontratoitau.valor_montante_num),
	tipo_pessoa_str	= Coalesce(importaitautmp.pessoa_cli, cbcontratoitau.tipo_pessoa_str),
	cpf_str	= Coalesce(importaitautmp.cpf_cli, cbcontratoitau.cpf_str),
	nome_str	= Coalesce(importaitautmp.nome_cli, cbcontratoitau.nome_str),
	endereco_str	= Coalesce((importaitautmp.logradouro_cli || '-' || importaitautmp.numero_cli), importaitautmp.logradouro_cli, cbcontratoitau.endereco_str),
	complemento_str	= Coalesce(importaitautmp.complemento_cli, cbcontratoitau.complemento_str),
	bairro_str = Coalesce(importaitautmp.bairro_cli, cbcontratoitau.bairro_str),
	cidade_str = Coalesce(importaitautmp.cidade_cli, cbcontratoitau.cidade_str),
	estado_str = Coalesce(importaitautmp.estado_cli, cbcontratoitau.estado_str),
	cep_str	= Coalesce(importaitautmp.cep_cli, cbcontratoitau.cep_str),
	ddd_str	= Coalesce(importaitautmp.ddd_cli, cbcontratoitau.ddd_str),
	telefone_str	= Coalesce(importaitautmp.telefone_cli, cbcontratoitau.telefone_str),
	ramal_str	= Coalesce(importaitautmp.ramal_cli, cbcontratoitau.ramal_str),
	endereco_trabalho_str	= Coalesce((importaitautmp.logradouro_com_cli || '-' || importaitautmp.numero_com_cli), importaitautmp.logradouro_com_cli, cbcontratoitau.endereco_trabalho_str),
	complemento_trabalho_str	= Coalesce(importaitautmp.complemento_com_cli	, cbcontratoitau.complemento_trabalho_str),
	bairro_trabalho_str	= Coalesce(importaitautmp.bairro_com_cli,	cbcontratoitau.bairro_trabalho_str),
	cidade_trabalho_str	= Coalesce(importaitautmp.cidade_com_cli,	cbcontratoitau.cidade_trabalho_str),
	estado_trabalho_str	= Coalesce(importaitautmp.estado_com_cli,	cbcontratoitau.estado_trabalho_str),
	cep_trabalho_str	= Coalesce(importaitautmp.cep_com_cli	,	cbcontratoitau.cep_trabalho_str),
	ddd_trabalho_str	= Coalesce(importaitautmp.ddd_com_cli	,	cbcontratoitau.	ddd_trabalho_str),
	telefone_trabalho_str	= Coalesce(importaitautmp.telefone_com_cli, cbcontratoitau.telefone_trabalho_str),
	ramal_trabalho_str	= Coalesce(importaitautmp.ramal_com_cli,	cbcontratoitau.ramal_trabalho_str),
	tipo_pessoa_avalista1_str	= Coalesce(importaitautmp.pessoa_aval1,	cbcontratoitau.tipo_pessoa_avalista1_str),
	cpf_avalista1_str	= Coalesce(importaitautmp.cpf_aval1, cbcontratoitau.cpf_avalista1_str),
	nome_avalista1_str	= Coalesce(importaitautmp.nome_aval1,	cbcontratoitau.nome_avalista1_str),
	endereco_avalista1_str	= Coalesce((importaitautmp.logradouro_aval1 || '-' || importaitautmp.numero_aval1), importaitautmp.logradouro_aval1, cbcontratoitau.endereco_avalista1_str),
	complemento_avalista1_str	= Coalesce(importaitautmp.complemento_aval1, cbcontratoitau.complemento_avalista1_str),
	bairro_avalista1_str	= Coalesce(importaitautmp.bairro_aval1,	cbcontratoitau.	bairro_avalista1_str),
	cidade_avalista1_str	= Coalesce(importaitautmp.cidade_aval1,	cbcontratoitau.	cidade_avalista1_str),
	estado_avalista1_str	= Coalesce(importaitautmp.estado_aval1,	cbcontratoitau.	estado_avalista1_str),
	cep_avalista1_str	= Coalesce(importaitautmp.cep_aval1, cbcontratoitau.cep_avalista1_str),
	ddd_avalista1_str	= Coalesce(importaitautmp.ddd_aval1, cbcontratoitau.ddd_avalista1_str),
	fone_avalista1_str	= Coalesce(importaitautmp.telefone_aval1, cbcontratoitau.fone_avalista1_str),
	ramal_trab_avalista1_str	= Coalesce(importaitautmp.ramal_aval1, cbcontratoitau.ramal_trab_avalista1_str),
	tipo_pessoa_avalista2_str	= Coalesce(importaitautmp.pessoa_aval2,	cbcontratoitau.tipo_pessoa_avalista2_str),
	cpf_avalista2_str	= Coalesce(importaitautmp.cpf_aval2, cbcontratoitau.cpf_avalista2_str),
	nome_avalista2_str	= Coalesce(importaitautmp.nome_aval2,	cbcontratoitau.nome_avalista2_str),
	endereco_avalista2_str	= Coalesce((importaitautmp.logradouro_aval2 || '-' || importaitautmp.numero_aval2),	importaitautmp.logradouro_aval2, cbcontratoitau.endereco_avalista2_str),
	complemento_avalista2_str	= Coalesce(importaitautmp.complemento_aval2, cbcontratoitau.complemento_avalista2_str),
	bairro_avalista2_str = Coalesce(importaitautmp.bairro_aval2, cbcontratoitau.bairro_avalista2_str),
	cidade_avalista2_str = Coalesce(importaitautmp.cidade_aval2,	cbcontratoitau.cidade_avalista2_str),
	estado_avalista2_str = Coalesce(importaitautmp.estado_aval2,	cbcontratoitau.estado_avalista2_str),
	cep_avalista2_str	= Coalesce(importaitautmp.cep_aval2, cbcontratoitau.cep_avalista2_str),
	ddd_avalista2_str	= Coalesce(importaitautmp.ddd_aval2, cbcontratoitau.ddd_avalista2_str),
	fone_avalista2_str	= Coalesce(importaitautmp.telefone_aval2,	cbcontratoitau.fone_avalista2_str),
	ramal_trab_avalista2_str	= Coalesce(importaitautmp.ramal_aval2, cbcontratoitau.ramal_trab_avalista2_str),
	codigo_concessionaria_str = Coalesce(importaitautmp.codigo_filial,	cbcontratoitau.codigo_concessionaria_str),
	porte_empresa_str	= Coalesce(importaitautmp.porte_empresa	,	cbcontratoitau.porte_empresa_str),
 	spr_str	= Coalesce(importaitautmp.produtos_rede, cbcontratoitau.spr_str),
	codigo_seguradora_int	= Coalesce(importaitautmp.codigo_seguradora, cbcontratoitau.codigo_seguradora_int),
	codigo_op_finaustria_str	= Coalesce(importaitautmp.codigo_finaustria, cbcontratoitau.codigo_op_finaustria_str),

	data_ativacao_dat	= Coalesce(importaitautmp.data_ativacao, cbcontratoitau.data_ativacao_dat),
	
	data_ultima_distrib_dat = dt_distribuicao,
	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera In ('A', 'Z');

	-- Log alteraï¿½ï¿½o dados contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	  cbcontratoitau.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Dados do Contrato alterados. Situaï¿½ï¿½o ' || cbsituacaocontrato.codigo_str 

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratoitau.id_cbsituacaocontrato_int
	Where importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera In ('A', '');

	-- Plano contrato NULO
	-- Log 
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	  cbcontratoitau.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Valor nulo do plano alterado.'

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbsituacaocontrato On cbcontratoitau.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where (cbcontratoitau.numero_total_parcelas_int = 0 Or cbcontratoitau.numero_total_parcelas_int Is Null)
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('20', '27')
	And importaitautmp.inclui_altera In ('A', '')
	And importaitautmp.qtde_parcelas Is Not Null;
	
	-- Contrato
	Update cbcontratoitau Set
	numero_total_parcelas_int	= importaitautmp.qtde_parcelas

	Where cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And (cbcontratoitau.numero_total_parcelas_int = 0 Or cbcontratoitau.numero_total_parcelas_int Is Null)
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('20', '27')
	And importaitautmp.inclui_altera In ('A', '')
	And importaitautmp.qtde_parcelas Is Not Null;

	-- Parcela valor NULO
	-- Log 
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	importaitautmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Valor nulo da parcela alterado.'

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num Is Null;

	--Parcela
	Update cbparcela Set
	valor_principal_num = importaitautmp.valor_geral,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num Is Null;

	-- Parcela vencimento NULO
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	importaitautmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Vencimento nulo da parcela alterado.'

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat Is Null
	And importaitautmp.data_geral Is Not Null;

	--Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitautmp.data_geral,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13', '20', '27')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat Is Null
	And importaitautmp.data_geral Is Not Null;

	-- Parcela valor DIFERENTE
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	importaitautmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Valor da parcela alterado. Valor anterior ' || cbparcela.valor_principal_num

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num <> importaitautmp.valor_geral;
	 
	--Parcela
	Update cbparcela Set
	valor_principal_num = importaitautmp.valor_geral,
	produto_int = Case When cbparcela.produto_int Is Null Then importaitautmp.subclassificacao 
										Else cbparcela.produto_int
							 End,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num <> importaitautmp.valor_geral;

	-- Parcela vencimento DIFERENTE
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	importaitautmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Vencimento da parcela alterado. Vencimento anterior ' || to_char(cbparcela.data_vencimento_dat, 'dd/mm/yyyy')

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat <> importaitautmp.data_geral;

	--Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitautmp.data_geral,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio 
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat <> importaitautmp.data_geral;

	-- 25/10/05 Inserido campo cp_parcela_num
	--Alteraï¿½ï¿½o Parcela Manual/Automï¿½tica
	Update cbparcela Set
	id_esregua_int = importaitautmp.id_esregua,
	produto_int = importaitautmp.subclassificacao,
	data_limite_retorno_dat = importaitautmp.data_limite,
	tarifa_cobranca_num = importaitautmp.tarifa_cobranca,
	data_primeira_distrib_dat = Case When importaitautmp.status_registro = '10' Then importaitautmp.data_envio
																	 When importaitautmp.status_registro = '13' Then dt_distribuicao
							 					      End,
	data_ultima_distrib_dat = dt_distribuicao,
	status_registro_str = importaitautmp.status_registro,
	cp_parcela_num = importaitautmp.valor_encargo,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And Upper(cbparcela.manual_str) In ('A', 'S')
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	importaitautmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And Upper(cbparcela.manual_str) In ('A', 'S')
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

	-- Alteraï¿½ï¿½o distribparcela
	Update cbdistribparcela Set
	data_pre_distrib_dat = Case When importaitautmp.status_registro = '10' Then importaitautmp.data_envio
															When importaitautmp.status_registro <> '10' Then dt_distribuicao
							 					 End

	Where cbdistribparcela.id_cbcontrato_int = cbcontratoitau.id_cbcontrato_int
	And cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int
	And cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And Upper(cbparcela.manual_str) In ('A', 'S')
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

	-- Parcela REDIRECIONADA
	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato aberto
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo,
	  cbcontratoitau.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para A'

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela On cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbcontratoitau.id_cbsituacaocontrato_int = 6
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato baixado
	Update cbcontratoitau Set
	id_cbsituacaocontrato_int = 1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And cbcontratoitau.id_cbsituacaocontrato_int = 6
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

	
	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	importaitautmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Parcela redirecionada. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int || '. Data do pagamento ' || Coalesce(to_char(cbparcela.data_pagamento_dat, 'dd/mm/yyyy'), '')

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

	Update cbparcela Set
	situacao_int = 0,
	data_pagamento_dat = Null,
	valor_pago_num = Null,
	produto_int = Case When cbparcela.produto_int Is Null Then importaitautmp.subclassificacao 
										Else cbparcela.produto_int
							 End,
	
	data_ultima_distrib_dat = dt_distribuicao,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And cbcontratoitau.id_gecliente_int = cliente
	And cbcontratoitau.id_geempresa_int = empresa
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('10', '13')
	And importaitautmp.inclui_altera_parcela = 'A';

end if;

-- Status 11
-- Baixa contrato e parcelas
if status = '11' then

	--Log baixa parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitautmp.status_registro,
	cbcontratoitau.contrato_str,
	cbparcela.parcela_int,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitau.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.situacao_int Not In ('4', '6')
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro = '11';

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 6,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbparcela.situacao_int Not In ('4', '6')
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro = '1'
	And importaitautmp.status_registro = '11';

	-- Baixa contrato
	Update cbcontratoitau Set
	id_cbsituacaocontrato_int = 6,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro = '11';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitau.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
	10664,

	1,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
	Where importaitautmp.tipo_registro = '1'
	And importaitautmp.status_registro = '11';

end if;

-- Status 15/17/30/31
-- Baixa parcelas
if status = '15' then

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 4,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And cbparcela.situacao_int Not In ('4', '6')
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('15', '17', '30', '31');

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitau.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	Case When importaitautmp.status_registro = '15' Then 10667
			 When importaitautmp.status_registro = '17' Then 10669
			 When importaitautmp.status_registro = '30' Then 10674
			 When importaitautmp.status_registro = '31' Then 10675
	End,

	1,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitau.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int  In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = 0)
	And importaitautmp.tipo_registro = '1'
	And importaitautmp.status_registro In ('15', '17', '30', '31');

	--Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbtiponegocio.codigo_str, cbcontratoitau.id_cbcontrato_int, cbcontratoitau.contrato_str
		From cbcontratoitau Inner Join importaitautmp On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
												Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
		Where importaitautmp.tipo_registro = '1'
		And importaitautmp.status_registro In ('15', '17', '30', '31')
		And cbcontratoitau.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela
															 	 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratoitau Set
			id_cbsituacaocontrato_int = 6,

			id_geusuario_int = usuario,
			tstamp = current_timestamp

			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				254,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo ' || arquivo,
			  cursor_contrato.contrato_str,
				'(' || cursor_contrato.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- Status 35 - PAGA
-- Baixa parcela
if status = '35' then

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 4,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.codigo_operacao_str = importaitautmp.codigo_operacao
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And cbparcela.situacao_int Not In ('4', '6')
	And importaitautmp.tipo_registro = '6'
	And importaitautmp.status_registro  = '35';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitau.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	10667,

	1,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.codigo_operacao_str, cbcontratoitau.contrato_str) = (importaitautmp.codigo_operacao, importaitautmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitau.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int  In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = 0)
	And importaitautmp.tipo_registro  = '6'
	And importaitautmp.status_registro  = '35';

	--Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbtiponegocio.codigo_str, cbcontratoitau.id_cbcontrato_int, cbcontratoitau.contrato_str
		From cbcontratoitau Inner Join importaitautmp On (cbcontratoitau.codigo_operacao_str, cbcontratoitau.contrato_str) = (importaitautmp.codigo_operacao, importaitautmp.contrato)
												Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitau.id_cbtiponegocio_int
		Where importaitautmp.tipo_registro = '6'
		And importaitautmp.status_registro  = '35'
		And cbcontratoitau.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela
															 	 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratoitau Set
			id_cbsituacaocontrato_int = 6,

			id_geusuario_int = usuario,
			tstamp = current_timestamp

			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				254,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo ' || arquivo,
			  cursor_contrato.contrato_str,
				'(' || cursor_contrato.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- Status 20
-- Parcelas em Risco CL
if status = '20' then

	-- Risco cl
	Update cbparcela Set
	data_riscocl_dat = dt_distribuicao,
	status_registro_str = importaitautmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
	And cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.status_registro = '20';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitau.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	10670,

	1,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitau.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitautmp.num_parcela
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro In ('20');

end if;

-- Status 27
-- Contrato Jurï¿½dico
if status = '27' then

	-- Seta situaï¿½ï¿½o contrato J se contrato nï¿½o estiver em S
	Update cbcontratoitau Set
	id_cbsituacaocontrato_int = Case When id_cbsituacaocontrato_int = '2' Then 2
																	 Else 4
															End,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitau.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
	And contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro = '27';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select 
	cbcontratoitau.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
	10673,

	1,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
	Where importaitautmp.tipo_registro  = '1'
	And importaitautmp.status_registro = '27';

end if;

-- Status 12/14/16/25/26/32/33/34
-- FollowUps
if status = '12' then

	for cursor_contrato in
		Select Distinct cbcontratoitau.id_cbcontrato_int, importaitautmp.status_registro

		From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.id_cbtiponegocio_int, cbcontratoitau.contrato_str) = (importaitautmp.id_cbtiponegocio, importaitautmp.contrato)
		Where importaitautmp.tipo_registro  = '1'
		And importaitautmp.status_registro In ('12', '14', '16', '25', '26', '32', '33', '34')

	loop

		Insert Into cbfollowup
		(id_cbcontrato_int,
		id_cbparcela_int,
		data_cobranca_dat,
		data_dat,
		hora_cobranca_tim,
		hora_tim,
		coloca_stand_str,
		alterado_str,
		historico_str,
		id_cbsitcontato_int,

		id_geusuario_int,
		tstamp)

		Values (
		cursor_contrato.id_cbcontrato_int,
		Null,
		current_date,
		current_date,
		current_timestamp,
		current_timestamp,
		'N',
		'N',
		'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
		Case When cursor_contrato.status_registro = '12' Then 10665
				 When cursor_contrato.status_registro = '14' Then 10666
				 When cursor_contrato.status_registro = '16' Then 10668
				 When cursor_contrato.status_registro = '25' Then 10671
				 When cursor_contrato.status_registro = '26' Then 10672
				 When cursor_contrato.status_registro = '32' Then 10676
				 When cursor_contrato.status_registro = '33' Then 10677
				 When cursor_contrato.status_registro = '34' Then 10678
		End,

		1,
		current_timestamp);

	end loop;

end if;

-- Registros do tipo 3
-- novo layout de cobranï¿½a  - 23/02/2006 - Danny
if status = '99' then
	Update cbcontratoitau Set
	nome_contato_str	= Coalesce(importaitautmp.nome_contato_str, cbcontratoitau.nome_contato_str),
	ddd_residencial_str	= Coalesce(importaitautmp.ddd_residencial_str, cbcontratoitau.ddd_residencial_str),
	tel_residencial_str	= Coalesce(importaitautmp.tel_residencial_str, cbcontratoitau.tel_residencial_str),
	ramal_residencial_str	= Coalesce(importaitautmp.ramal_residencial_str, cbcontratoitau.ramal_residencial_str),
	ddd_celular_str	= Coalesce(importaitautmp.ddd_celular_str, cbcontratoitau.ddd_celular_str),
	tel_celular_str	= Coalesce(importaitautmp.tel_celular_str, cbcontratoitau.tel_celular_str),
	nome_conjuge_str	= Coalesce(importaitautmp.nome_conjuge_str, cbcontratoitau.nome_conjuge_str),
	ddd_conjuge_str	= Coalesce(importaitautmp.ddd_conjuge_str, cbcontratoitau.ddd_conjuge_str),
	tel_conjuge_str	= Coalesce(importaitautmp.tel_conjuge_str, cbcontratoitau.tel_conjuge_str),
	ramal_conjuge_str	= Coalesce(importaitautmp.ramal_conjuge_str, cbcontratoitau.ramal_conjuge_str),
	ddd_profissional_str	= Coalesce(importaitautmp.ddd_profissional_str, cbcontratoitau.ddd_profissional_str),
	tel_profissional_str	= Coalesce(importaitautmp.tel_profissional_str, cbcontratoitau.tel_profissional_str),
	ramal_profissional_str	= Coalesce(importaitautmp.ramal_profissional_str, cbcontratoitau.ramal_profissional_str),
	nome_referencia1_str	= Coalesce(importaitautmp.nome_referencia1_str, cbcontratoitau.nome_referencia1_str),
	parentesco_referencia1_str	= Coalesce(importaitautmp.parentesco_referencia1_str, cbcontratoitau.parentesco_referencia1_str),
	ddd_referencia1_str	= Coalesce(importaitautmp.ddd_referencia1_str, cbcontratoitau.ddd_referencia1_str),
	tel_referencia1_str	= Coalesce(importaitautmp.tel_referencia1_str, cbcontratoitau.tel_referencia1_str),
	ramal_referencia1_str	= Coalesce(importaitautmp.ramal_referencia1_str, cbcontratoitau.ramal_referencia1_str),
	nome_referencia2_str	= Coalesce(importaitautmp.nome_referencia2_str, cbcontratoitau.nome_referencia2_str),
	parentesco_referencia2_str	= Coalesce(importaitautmp.parentesco_referencia2_str, cbcontratoitau.parentesco_referencia2_str),
	ddd_referencia2_str	= Coalesce(importaitautmp.ddd_referencia2_str, cbcontratoitau.ddd_referencia2_str),
	tel_referencia2_str	= Coalesce(importaitautmp.tel_referencia2_str, cbcontratoitau.tel_referencia2_str),
	ramal_referencia2_str	= Coalesce(importaitautmp.ramal_referencia2_str, cbcontratoitau.ramal_referencia2_str),
	data_ultima_distrib_dat = dt_distribuicao,
	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitau.contrato_str = importaitautmp.contrato
	And importaitautmp.tipo_registro  = '3';

end if;

-- Registros do tipo 4
-- novo layout de cobranï¿½a  - 23/02/2006 - Danny
if status = '999' then
	--dados do veï¿½culo (cbgarantia)
	Insert into cbgarantia
	(id_cbtiponegocio_int,
	id_cbcontrato_int,
	marca_str,
	modelo_str,
	ano_fabricacao_str,
	ano_modelo_str,
	placa_str,
	chassi_str,
	tstamp)

	Select
	cbcontratoitau.id_cbtiponegocio_int,
	cbcontratoitau.id_cbcontrato_int,
	importaitautmp.marca_str,
	importaitautmp.modelo_str,
	importaitautmp.ano_fabricacao_str,
        importaitautmp.ano_modelo_str,
	importaitautmp.placa_str,
	importaitautmp.chassi_str,
	current_timestamp

	From importaitautmp Inner Join cbcontratoitau On (cbcontratoitau.contrato_str) = (importaitautmp.contrato)
	Where importaitautmp.tipo_registro  = '4' 
		and inclui_altera_garantia = 'I';

	update cbgarantia set
		marca_str = Coalesce(importaitautmp.marca_str, cbgarantia.marca_str),
		modelo_str = Coalesce(importaitautmp.modelo_str, cbgarantia.modelo_str),
		ano_fabricacao_str = Coalesce(importaitautmp.ano_fabricacao_str, cbgarantia.ano_fabricacao_str),
		ano_modelo_str =  Coalesce(importaitautmp.ano_modelo_str, cbgarantia.ano_modelo_str),
		placa_str = Coalesce(importaitautmp.placa_str, cbgarantia.placa_str),
		chassi_str = Coalesce(importaitautmp.chassi_str, cbgarantia.chassi_str)
		Where cbgarantia.id_cbcontrato_int =  cbcontratoitau.id_cbcontrato_int
			And cbgarantia.id_cbtiponegocio_int = importaitautmp.id_cbtiponegocio
			And cbcontratoitau.contrato_str = importaitautmp.contrato
			And importaitautmp.tipo_registro  = '4' 
			And importaitautmp.inclui_altera_garantia = 'A';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12032 (class 0 OID 0)
-- Dependencies: 2015
-- Name: FUNCTION importa_itau(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_itau(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Itaï¿½';

--
-- TOC entry 2016 (class 1255 OID 27564)
-- Name: importa_itauacaoadv(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_itauacaoadv(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$

DECLARE

comando 			 alias for $1;
empresa_logada alias for $2;
usuario 			 alias for $3;
cliente 			 alias for $4;
arquivo 			 alias for $5;

data_processamento date;
empresa						 int4;

BEGIN

--Retorna data de distribuiï¿½ï¿½o
data_processamento := (Select current_date);

-- Empresa fixa
empresa :=  1;

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update  importaitauadversatmp Set id_fimoeda = 1;

	-- Seta filial da Paschoalotto
	Update  importaitauadversatmp Set id_gefilial =  1;

	-- Seta tipo de negï¿½cio (produto/campanha (operacao))
	-- acertar id
	Update  importaitauadversatmp Set
	id_cbtiponegocio = Case When operacao <= 30000 Then 127
										      Else 126
										 End;

	--Seta etapa (empresa)
	Update  importaitauadversatmp Set
	id_cbetapa = cbetapa.id_cbetapa_int
	Where Trim(Upper(importaitauadversatmp.empresa)) = Trim(Upper(cbetapa.descricao_str))
	And cbetapa.id_gecliente_int = cliente;

	--Seta regua (faixa atraso)
	Update  importaitauadversatmp Set
	id_esregua = Case When atraso Between '0'    And '60'   Then 158
										When atraso Between '61'   And '120'  Then 159
										When atraso Between '121'  And '240'  Then 160
										When atraso Between '241'  And '360'  Then 161
										When atraso Between '361'  And '720'  Then 162
										When atraso Between '721'  And '1080' Then 163
										When atraso Between '1081' And '1440' Then 164
										When atraso Between '1141' And '1800' Then 165
										When atraso > '1800' Then 166
										Else Null 
							 End;
			 
	-- Seta terceiro
	Update  importaitauadversatmp Set
	id_geterceiro = geterceiro.id_geterceiro_int
	Where Trim(importaitauadversatmp.codigo_adv) = Trim(geterceiro.codigo_str)
	And geterceiro.id_cbcontrato_int Is Null;

	-- Seta aï¿½ao
	Update importaitauadversatmp Set cobranca = '0';

	-- Seta acao indenizaroria
	Update importaitauadversatmp Set
	acao_indenizatoria = 	Case When importaitauadversatmp.acao_indenizatoria  = '' Then '0'
			 						 					 Else '1'
	 											End;

end if;

-- Contrato
if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratoitauacaoadv
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_fimoeda_int,
	id_cbetapa_int,
	id_geterceiro_int,
	contrato_str,

	nome_orgao_str,
	acao_indenizatoria_str,
	nome_advogado_contrario_str,
	pasta_str,
	tipo_acao_str,
	numero_processo_str,
	nome_str,
	tipo_pessoa_str,
	cpf_str,
	codigo_operacao_str,
	produto_str,
	dias_atraso_ult_parc_int,
	data_contrato_dat,
	data_operacao_dat,
	endereco_str,
	complemento_str,
	bairro_str,
	cidade_str,
	estado_str,
	cep_str,
	ddd_str,
	telefone_str,
	endereco_trabalho_str,
	complemento_trabalho_str,
	bairro_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cep_trabalho_str,
	ddd_trabalho_str,
	telefone_trabalho_str,
	ramal_trabalho_str,
	valor_montante_num,
	cobranca_str,
	obs_pasc_txt,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
  id_cbtiponegocio,
  id_fimoeda,
	id_cbetapa,
  id_geterceiro,
	contrato,

	nome_orgao,
	acao_indenizatoria,
	nome_advogado_contrario,
	pasta,
	tipo_acao,
	numero_processo,
	nome_cli,
	pessoa_cli,
	cpf_cli,
	operacao,
	produto,
	atraso,
	data_ajuizamento,
	data_operacao,
	(logradouro_cli || '-' || Coalesce(numero_cli, '')),
	complemento_cli,
	bairro_cli,
	cidade_cli,
	estado_cli,
	cep_cli,
	ddd_cli,
	telefone_cli,
	(logradouro_com || '-' || Coalesce(numero_com, '')),
	complemento_com,
	bairro_com,
	cidade_com,
	estado_com,
	cep_com,
	ddd_com,
	telefone_com,
	ramal_com,
	valor_ca,
	cobranca,
	Case When duplicado = 'S' Then 'Existe uma medida cautelar'
			 Else Null
	End,

	data_processamento,
	data_processamento,
	1,
	current_timestamp,
	usuario

	From  importaitauadversatmp
	Where inclui_altera = 'I';

	-- Log alteraï¿½ï¿½o contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		300,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
     importaitauadversatmp.contrato,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From  importaitauadversatmp Inner Join cbcontratoitauacaoadv On
	(cbcontratoitauacaoadv.contrato_str, cbcontratoitauacaoadv.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato, importaitauadversatmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratoitauacaoadv.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int

	Where importaitauadversatmp.inclui_altera = 'A';

	-- Alteracao de Contrato
	Update cbcontratoitauacaoadv Set

	nome_orgao_str 							= importaitauadversatmp.nome_orgao,
	acao_indenizatoria_str 		 	= importaitauadversatmp.acao_indenizatoria,
	nome_advogado_contrario_str = importaitauadversatmp.nome_advogado_contrario,
	pasta_str			= importaitauadversatmp.pasta,
	tipo_acao_str	= importaitauadversatmp.tipo_acao,
	numero_processo_str = importaitauadversatmp.numero_processo,
	nome_str						= importaitauadversatmp.nome_cli,
	tipo_pessoa_str			= importaitauadversatmp.pessoa_cli,
	cpf_str							= importaitauadversatmp.cpf_cli,
	codigo_operacao_str	= importaitauadversatmp.operacao,
	produto_str					= importaitauadversatmp.produto,
	dias_atraso_ult_parc_int	= importaitauadversatmp.atraso,
	data_contrato_dat	= importaitauadversatmp.data_ajuizamento,
	data_operacao_dat	= importaitauadversatmp.data_operacao,
	endereco_str			= (importaitauadversatmp.logradouro_cli || '-' || Coalesce(importaitauadversatmp.numero_cli, '')),
	complemento_str		= importaitauadversatmp.complemento_cli,
	bairro_str				= importaitauadversatmp.bairro_cli,
	cidade_str				= importaitauadversatmp.cidade_cli,
	estado_str				= importaitauadversatmp.estado_cli,
	cep_str						= importaitauadversatmp.cep_cli,
	ddd_str						= importaitauadversatmp.ddd_cli,
	telefone_str			= importaitauadversatmp.telefone_cli,
	endereco_trabalho_str 	 = (importaitauadversatmp.logradouro_com || '-' || Coalesce(importaitauadversatmp.numero_com, '')),
	complemento_trabalho_str = importaitauadversatmp.complemento_com,
	bairro_trabalho_str	 		 = importaitauadversatmp.bairro_com,
	cidade_trabalho_str	 		 = importaitauadversatmp.cidade_com,
	estado_trabalho_str	 		 = importaitauadversatmp.estado_com,
	cep_trabalho_str			 	 = importaitauadversatmp.cep_com,
	ddd_trabalho_str			 	 = importaitauadversatmp.ddd_com,
	telefone_trabalho_str 	 = importaitauadversatmp.telefone_com,
	ramal_trabalho_str			 = importaitauadversatmp.ramal_com,
	valor_montante_num		 	 = importaitauadversatmp.valor_ca,
	cobranca_str					 	 = importaitauadversatmp.cobranca,
			
	data_ultima_distrib_dat = data_processamento,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratoitauacaoadv.contrato_str =  importaitauadversatmp.contrato
	And cbcontratoitauacaoadv.id_cbtiponegocio_int =  importaitauadversatmp.id_cbtiponegocio
	And importaitauadversatmp.inclui_altera = 'A';

	--Inclusï¿½o Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	tipo_str,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	id_esregua_int,	

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitauacaoadv.id_cbcontrato_int,
	numero_parcela,
	'1',
	data_atraso,
	valor_nb,
	0,
	id_esregua,

	data_processamento,
	data_processamento,
	usuario,
	current_timestamp

	From  importaitauadversatmp Inner Join cbcontratoitauacaoadv On
	(cbcontratoitauacaoadv.contrato_str, cbcontratoitauacaoadv.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato,  importaitauadversatmp.id_cbtiponegocio)
	Where importaitauadversatmp.inclui_altera_parcela = 'I'
	Order by  importaitauadversatmp.contrato, importaitauadversatmp.numero_parcela;

	-- Distribuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbparcela.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	data_processamento

	From importaitauadversatmp Inner Join cbcontratoitauacaoadv On
	(cbcontratoitauacaoadv.contrato_str, cbcontratoitauacaoadv.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato,  importaitauadversatmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitauacaoadv.id_cbcontrato_int
	Where importaitauadversatmp.numero_parcela = cbparcela.parcela_int 
	And importaitauadversatmp.inclui_altera_parcela = 'I';

	--Log alteraï¿½ï¿½o Parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	300,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	 importaitauadversatmp.contrato,
	 importaitauadversatmp.numero_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From  importaitauadversatmp Inner Join cbcontratoitauacaoadv On
	(cbcontratoitauacaoadv.contrato_str, cbcontratoitauacaoadv.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato,  importaitauadversatmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratoitauacaoadv.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int =  importaitauadversatmp.numero_parcela
	And cbparcela.situacao_int <> '4'
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0') 
	And importaitauadversatmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitauadversatmp.data_atraso,
	valor_principal_num = importaitauadversatmp.valor_nb,
								 		  
	data_ultima_distrib_dat =  data_processamento
	
	Where cbparcela.parcela_int =  importaitauadversatmp.numero_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratoitauacaoadv.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0') 
	And cbcontratoitauacaoadv.contrato_str =  importaitauadversatmp.contrato
	And cbcontratoitauacaoadv.id_cbtiponegocio_int =  importaitauadversatmp.id_cbtiponegocio
	And  importaitauadversatmp.inclui_altera_parcela = 'A';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 2017 (class 1255 OID 27574)
-- Name: importa_itauadversa(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_itauadversa(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$

DECLARE

comando 			 alias for $1;
empresa_logada alias for $2;
usuario 			 alias for $3;
cliente 			 alias for $4;
arquivo 			 alias for $5;

data_processamento date;
empresa						 int4;

BEGIN

--Retorna data de distribuiï¿½ï¿½o
data_processamento := (Select current_date);

-- Empresa fixa
empresa :=  1;

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update  importaitauadversatmp Set id_fimoeda = 1;

	-- Seta filial da Paschoalotto
	Update  importaitauadversatmp Set id_gefilial =  1;

	-- Seta tipo de negï¿½cio
	Update  importaitauadversatmp Set
	id_cbtiponegocio = cbtiponegocio.id_cbtiponegocio_int
	Where Trim(Upper(importaitauadversatmp.empresa)) = Trim(Upper(cbtiponegocio.descricao_str ))
	And cbtiponegocio.id_gecliente_int = cliente;

	--Seta etapa
	Update  importaitauadversatmp Set
	id_cbetapa = cbetapa.id_cbetapa_int
	Where Trim(Upper(importaitauadversatmp.faixa_atraso)) = Trim(Upper(cbetapa.descricao_str));
	
	-- Seta terceiro
	Update  importaitauadversatmp Set
	id_geterceiro = geterceiro.id_geterceiro_int
	Where Trim(importaitauadversatmp.codigo_adv) = Trim(geterceiro.codigo_str);

	-- Seta aï¿½ao
	Update importaitauadversatmp Set
	cobranca = 	Case When importaitauadversatmp.data_ajuizamento Is Null Then '0'
			 						 Else '1'
	 						End;

end if;

-- Contrato
if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratoitauadversa
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_fimoeda_int,
	id_cbetapa_int,
	id_geterceiro_int,
	contrato_str,

	pasta_str,
	tipo_acao_str,
	numero_processo_str,
	nome_str,
	tipo_pessoa_str,
	cpf_str,
	codigo_operacao_str,
	produto_str,
	dias_atraso_ult_parc_int,
	data_contrato_dat,
	data_operacao_dat,
	endereco_str,
	complemento_str,
	bairro_str,
	cidade_str,
	estado_str,
	cep_str,
	ddd_str,
	telefone_str,
	endereco_trabalho_str,
	complemento_trabalho_str,
	bairro_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cep_trabalho_str,
	ddd_trabalho_str,
	telefone_trabalho_str,
	valor_montante_num,
	cobranca_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
  id_cbtiponegocio,
  id_fimoeda,
	id_cbetapa,
  id_geterceiro,
	contrato,

	pasta,
	tipo_acao,
	numero_processo,
	nome_cli,
	pessoa_cli,
	cpf_cli,
	operacao,
	produto,
	atraso,
	data_ajuizamento,
	data_operacao,
	(logradouro_cli || '-' || Coalesce(numero_cli, '')),
	complemento_cli,
	bairro_cli,
	cidade_cli,
	estado_cli,
	cep_cli,
	ddd_cli,
	telefone_cli,
	(logradouro_com || '-' || Coalesce(numero_com, '')),
	complemento_com,
	bairro_com,
	cidade_com,
	estado_com,
	cep_com,
	ddd_com,
	telefone_com,
	valor_ca,
	cobranca,

	data_processamento,
	data_processamento,
	1,
	current_timestamp,
	usuario

	From  importaitauadversatmp
	Where inclui_altera = 'I';

	-- Log alteraï¿½ï¿½o contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		300,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
     importaitauadversatmp.contrato,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From  importaitauadversatmp Inner Join cbcontratoitauadversa On
	(cbcontratoitauadversa.contrato_str, cbcontratoitauadversa.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato, importaitauadversatmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratoitauadversa.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int

	Where importaitauadversatmp.inclui_altera = 'A';

	-- Alteracao de Contrato
	Update cbcontratoitauadversa Set

	pasta_str			= importaitauadversatmp.pasta,
	tipo_acao_str	= importaitauadversatmp.tipo_acao,
	numero_processo_str = importaitauadversatmp.numero_processo,
	nome_str						= importaitauadversatmp.nome_cli,
	tipo_pessoa_str			= importaitauadversatmp.pessoa_cli,
	cpf_str							= importaitauadversatmp.cpf_cli,
	codigo_operacao_str	= importaitauadversatmp.operacao,
	produto_str					= importaitauadversatmp.produto,
	dias_atraso_ult_parc_int	= importaitauadversatmp.atraso,
	data_contrato_dat	= importaitauadversatmp.data_ajuizamento,
	data_operacao_dat	= importaitauadversatmp.data_operacao,
	endereco_str			= (importaitauadversatmp.logradouro_cli || '-' || Coalesce(importaitauadversatmp.numero_cli, '')),
	complemento_str		= importaitauadversatmp.complemento_cli,
	bairro_str				= importaitauadversatmp.bairro_cli,
	cidade_str				= importaitauadversatmp.cidade_cli,
	estado_str				= importaitauadversatmp.estado_cli,
	cep_str						= importaitauadversatmp.cep_cli,
	ddd_str						= importaitauadversatmp.ddd_cli,
	telefone_str			= importaitauadversatmp.telefone_cli,
	endereco_trabalho_str 	 = (importaitauadversatmp.logradouro_com || '-' || Coalesce(importaitauadversatmp.numero_com, '')),
	complemento_trabalho_str = importaitauadversatmp.complemento_com,
	bairro_trabalho_str	 		 = importaitauadversatmp.bairro_com,
	cidade_trabalho_str	 		 = importaitauadversatmp.cidade_com,
	estado_trabalho_str	 		 = importaitauadversatmp.estado_com,
	cep_trabalho_str			 	 = importaitauadversatmp.cep_com,
	ddd_trabalho_str			 	 = importaitauadversatmp.ddd_com,
	telefone_trabalho_str 	 = importaitauadversatmp.telefone_com,
	valor_montante_num		 	 = importaitauadversatmp.valor_ca,
	cobranca_str					 	 = importaitauadversatmp.cobranca,
			
	data_ultima_distrib_dat = data_processamento,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where cbcontratoitauadversa.contrato_str =  importaitauadversatmp.contrato
	And cbcontratoitauadversa.id_cbtiponegocio_int =  importaitauadversatmp.id_cbtiponegocio
	And importaitauadversatmp.inclui_altera = 'A';

	--Inclusï¿½o Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	id_esregua_int,
	parcela_int,
	tipo_str,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitauadversa.id_cbcontrato_int,
	id_esregua,
	numero_parcela,
	'1',
	data_atraso,
	valor_nb,
	0,

	data_processamento,
	data_processamento,
	usuario,
	current_timestamp

	From  importaitauadversatmp Inner Join cbcontratoitauadversa On
	(cbcontratoitauadversa.contrato_str, cbcontratoitauadversa.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato,  importaitauadversatmp.id_cbtiponegocio)
	Where importaitauadversatmp.inclui_altera_parcela = 'I'
	Order by  importaitauadversatmp.contrato, importaitauadversatmp.numero_parcela;

	-- Distribuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbparcela.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	data_processamento

	From importaitauadversatmp Inner Join cbcontratoitauadversa On
	(cbcontratoitauadversa.contrato_str, cbcontratoitauadversa.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato,  importaitauadversatmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitauadversa.id_cbcontrato_int
	Where importaitauadversatmp.numero_parcela = cbparcela.parcela_int 
	And importaitauadversatmp.inclui_altera_parcela = 'I';

	--Log alteraï¿½ï¿½o Parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	300,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	 importaitauadversatmp.contrato,
	 importaitauadversatmp.numero_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From  importaitauadversatmp Inner Join cbcontratoitauadversa On
	(cbcontratoitauadversa.contrato_str, cbcontratoitauadversa.id_cbtiponegocio_int) = ( importaitauadversatmp.contrato,  importaitauadversatmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratoitauadversa.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int =  importaitauadversatmp.numero_parcela
	And cbparcela.situacao_int <> '4'
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0') 
	And importaitauadversatmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitauadversatmp.data_atraso,
	valor_principal_num = importaitauadversatmp.valor_nb,
								 		  
	data_ultima_distrib_dat =  data_processamento
	
	Where cbparcela.parcela_int =  importaitauadversatmp.numero_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratoitauadversa.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0') 
	And cbcontratoitauadversa.contrato_str =  importaitauadversatmp.contrato
	And cbcontratoitauadversa.id_cbtiponegocio_int =  importaitauadversatmp.id_cbtiponegocio
	And  importaitauadversatmp.inclui_altera_parcela = 'A';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12033 (class 0 OID 0)
-- Dependencies: 2017
-- Name: FUNCTION importa_itauadversa(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_itauadversa(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Itaï¿½ Adversas';

--
-- TOC entry 2018 (class 1255 OID 27586)
-- Name: importa_itaubanco(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_itaubanco(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
status alias   for $1;
empresa_logada alias  for $2;
usuario alias  for $3;
cliente alias  for $4;
arquivo alias  for $5;

cursor_contrato 		  record;
dt_distribuicao 			date;
int_retiradas 				int4;
int_total  						int4;
empresa								int4;

int_etapa1            int4;
int_etapa2            int4;

BEGIN

--Retorna data de distribuiï¿½ï¿½o
dt_distribuicao:= (Select data_lote From importaitaubancotmp Where tipo_registro = '0');
-- Empresa fixa
empresa :=  1;

if status = '0' then

	-- Seta qtde de registros no cabecalho (gravacao na gestatusimporta)
	Update importaitaubancotmp Set 
	qtde_registros = (Select qtde_registros From importaitaubancotmp Where tipo_registro  = '9')
	Where tipo_registro  = '0';

	-- Seta moeda
	Update importaitaubancotmp Set
	id_fimoeda = 1
	Where tipo_registro  = '1';

	-- Seta plataform e fiial do Itau/filial da Paschoalotto
	Update importaitaubancotmp Set
	id_cbplataforma = cbplataforma.id_cbplataforma_int,
	id_gefilial = cbplataforma.id_gefilial_int
	Where importaitaubancotmp.agencia_plataforma = cbplataforma.codigo_int
	And importaitaubancotmp.tipo_registro  = '1'
	And cbplataforma.id_gecliente_int = cliente;

	--Seta Etapa 
	Update importaitaubancotmp Set
	id_cbetapa = Null
	Where tipo_registro  = '1';

	-- 17/11/05 Seta etapa blitz se campo campanha <> branco
	int_etapa1:= (Select id_cbetapa_int from cbetapa where codigo_str = '1' and id_gecliente_int = cliente);
	int_etapa2:= (Select id_cbetapa_int from cbetapa where codigo_str = '2' and id_gecliente_int = cliente);

	Update importaitaubancotmp 
	   Set id_cbetapa = Case when (campanha is not null or vl_cdesc_avista is not null) Then int_etapa2 
	  Else int_etapa1 End 
	Where tipo_registro  = '1';

	-- Seta tipo de negocio
	Update importaitaubancotmp Set
	id_cbtiponegocio = cbtiponegocio.id_cbtiponegocio_int
	Where Trim(Upper(importaitaubancotmp.empresaitau)) = Trim(Upper(cbtiponegocio.codigo_str))
	And cbtiponegocio.id_gecliente_int = cliente
	And importaitaubancotmp.tipo_registro In ('1', '2');

	
	-- Seta rï¿½gua da parcela
	Update importaitaubancotmp Set
	id_esregua = esregua.id_esregua_int
	Where esregua.id_gecliente_int = cliente
	And to_number(produtos_rede, '99') = esregua.codigo_int
	And tipo_registro  = '1';

	-- Seta produto
	Update importaitaubancotmp Set
	id_cbproduto = cbprodutocliente.id_cbproduto_int
	Where to_number(importaitaubancotmp.codigo_operacao, '99999') = trim(cbprodutocliente.codigo_produto_cliente_str)
	And cbprodutocliente.id_cbproduto_int = cbproduto.id_cbproduto_int 
	And cbproduto.id_gecliente_int = cliente
	And importaitaubancotmp.tipo_registro  = '1';
	

	-- Seta data de distribuicao da parcela
	-- Status 10 - data_envio / Status 13 - dt_distribuicao / Status 20/27 - data_envio se preenchida, se nao preenchida dt_distribuicao
	Update importaitaubancotmp Set
	distribuicao_parcela = Case When status_registro = '10' Then data_envio
															When status_registro = '13' Then dt_distribuicao
												 			Else Null
							 					 End
	Where tipo_registro  = '1'
	And inclui_altera_parcela = 'I'
	And num_parcela Is Not Null;

	-- Produtos Fic Pl(38) / Fai PL(40)   -> Principal valor acordo(1178-1192)
	Update importaitaubancotmp Set
	valor_devedor = valor_geral,  	valor_geral = valor_acordo
	Where tipo_registro  = '1'
	And empresaitau In ('38', '40');

	-- Produtos Fit(34) / Fai Cheque(34I) -> Principal valor_atualizado(113 - 127)
	Update importaitaubancotmp Set
	valor_devedor = valor_acordo,  	valor_geral = valor_atualizado
	Where tipo_registro  = '1'
	And empresaitau In ('34', '34I');

end if;

-- Status 10/13/20/27
-- Inclusï¿½o de contratos   - Status 10/13/20/27
-- Alteraï¿½ï¿½o de contratos  - Status 10
-- Inclusï¿½o de parcelas    - Status 10/13/20/27
-- Alteraï¿½ï¿½o de parcelas   - Status 10/13
if status = '10' then

	-- Inclusï¿½o de Contrato
	Insert Into cbcontratoitaubanco
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,

	id_cbproduto_int,
	codigo_operacao_str,
	contrato_str,
	id_fimoeda_int,
	id_cbplataforma_int,
	id_cbetapa_int,
	tipo_contrato_str,

	codigo_escritorio_str,
	numero_lote_int,
	regiao_plataforma_str,
	recebimento_str,
	data_contrato_dat,
	data_vencimento_dat,
	valor_montante_num,
	numero_total_parcelas_int,
	numero_parcelas_atraso_int,
	valor_contratado_num,
	tipo_pessoa_str,
	cpf_str,
	nome_str,
	endereco_str,
	complemento_str,
	bairro_str,
	cidade_str,
	estado_str,
	cep_str,
	ddd_str,
	telefone_str,
	ramal_str,
	endereco_trabalho_str,
	complemento_trabalho_str,
	bairro_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cep_trabalho_str,
	ddd_trabalho_str,
	telefone_trabalho_str,
	ramal_trabalho_str,
	tipo_pessoa_avalista1_str,
	cpf_avalista1_str,
	nome_avalista1_str,
	endereco_avalista1_str,
	complemento_avalista1_str,
	bairro_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	cep_avalista1_str,
	ddd_avalista1_str,
	fone_avalista1_str,
	ramal_trab_avalista1_str,
	tipo_pessoa_avalista2_str,
	cpf_avalista2_str,
	nome_avalista2_str,
	endereco_avalista2_str,
	complemento_avalista2_str,
	bairro_avalista2_str,
	cidade_avalista2_str,
	estado_avalista2_str,
	cep_avalista2_str,
	ddd_avalista2_str,
	fone_avalista2_str,
	ramal_trab_avalista2_str,
	codigo_concessionaria_str,
	porte_empresa_str,
	spr_str,
	codigo_seguradora_int,
	codigo_op_finaustria_str,
	contrato_finaustria_str,
	vl_cdesc_avista_num, 
	perc_maxdesc_num,

	numero_cartao_str,
	agencia_conta_virtual_str,
	numero_carteira_str,
	valor_acordo_num,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,

	id_cbproduto,
	codigo_operacao,
	contrato,
	id_fimoeda,
	id_cbplataforma,
	id_cbetapa,
	tipo_contrato,

	codigo_escritorio,
	num_lote,
	regiao_plataforma,
	num_recebimento,
	data_contratacao,
	data_vencimento,
	valor_atualizado,
	qtde_parcelas,
	qtde_atraso,
	valor_vencimento,
	pessoa_cli,
	cpf_cli,
	nome_cli,
	(logradouro_cli || '-' || Coalesce(numero_cli, '')),
	complemento_cli,
	bairro_cli,
	cidade_cli,
	estado_cli,
	cep_cli,
	ddd_cli,
	telefone_cli,
	ramal_cli,
	(logradouro_com_cli || '-' || Coalesce(numero_com_cli, '')),
	complemento_com_cli,
	bairro_com_cli,
	cidade_com_cli,
	estado_com_cli,
	cep_com_cli,
	ddd_com_cli,
	telefone_com_cli,
	ramal_com_cli,
	pessoa_aval1,
	cpf_aval1,
	nome_aval1,
	(logradouro_aval1 || '-' || Coalesce(numero_aval1, '')),
	complemento_aval1,
	bairro_aval1,
	cidade_aval1,
	estado_aval1,
	cep_aval1,
	ddd_aval1,
	telefone_aval1,
	ramal_aval1,
	pessoa_aval2,
	cpf_aval2,
	nome_aval2,
	(logradouro_aval2 || '-' || Coalesce(numero_aval2, '')),
	complemento_aval2,
	bairro_aval2,
	cidade_aval2,
	estado_aval2,
	cep_aval2,
	ddd_aval2,
	telefone_aval2,
	ramal_aval2,
	codigo_filial,
	porte_empresa,
	produtos_rede,
	codigo_seguradora,
	codigo_finaustria,
	num_contratos_finaustria,
	vl_cdesc_avista, 
	perc_maxdesc,    

	numero_cartao,
	agencia_conta_virtual,
	numero_carteira,
	valor_acordo,
	 
	data_envio,
	data_envio,
	1,
	current_timestamp,
	usuario

	From importaitaubancotmp
	Where tipo_registro  = '1'
	And status_registro In ('10', '13')
	And inclui_altera = 'I';

	-- Inclusï¿½o de Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	data_limite_retorno_dat,
	id_esregua_int,
	tarifa_cobranca_num,
	situacao_int,
	tipo_str,
	valor_devedor_num,
	
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	status_registro_str,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaubanco.id_cbcontrato_int,
	num_parcela,
	data_geral,
	valor_geral,
	data_limite,
	id_esregua,
	tarifa_cobranca,
	Case When num_parcela = 0 Then 6
			 Else 0
	End,
	'1',
	valor_devedor,

	distribuicao_parcela,
	dt_distribuicao,
	status_registro,

	usuario,
	current_timestamp

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
	Where importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'I'
	Order by importaitaubancotmp.contrato, importaitaubancotmp.num_parcela, importaitaubancotmp.data_geral;

	-- Distribuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratoitaubanco.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	distribuicao_parcela

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitaubanco.id_cbcontrato_int
	Where importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'I'
	And importaitaubancotmp.num_parcela = cbparcela.parcela_int
	And importaitaubancotmp.num_parcela <> '0';
		

	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato aberto
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select 
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo,
	  cbcontratoitaubanco.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
	Where cbcontratoitaubanco.id_cbsituacaocontrato_int = 6
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'I';

	--Alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato baixado
	Update cbcontratoitaubanco Set
	id_cbsituacaocontrato_int = 1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And cbcontratoitaubanco.id_cbsituacaocontrato_int = '6'
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'I';

	-- Inserï¿½ï¿½o FollosUp cliente
	Insert Into cbfollowupcliente
	(id_cbcontrato_int,
  data_lancamento_dat,
  sequencia_descricao_num,
  descricao_text,

  id_geusuario_int,
  tstamp)

	Select
	cbcontratoitaubanco.id_cbcontrato_int,
	dt_distribuicao,
	seq_parecer_anterior,
	parecer1_esc_anterior,

	usuario,
	current_timestamp

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
	Where importaitaubancotmp.tipo_registro = '2'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera = 'I';

	-- Alteraï¿½ï¿½o Contrato
	Update cbcontratoitaubanco Set
	tipo_contrato_str	= Coalesce(importaitaubancotmp.tipo_contrato, cbcontratoitaubanco.tipo_contrato_str),
	codigo_escritorio_str = Coalesce(importaitaubancotmp.codigo_escritorio,	cbcontratoitaubanco.codigo_escritorio_str),
	numero_lote_int	= Coalesce(importaitaubancotmp.num_lote,	cbcontratoitaubanco.numero_lote_int),
	regiao_plataforma_str	= Coalesce(importaitaubancotmp.regiao_plataforma, cbcontratoitaubanco.estado_str),
	recebimento_str	= Coalesce(importaitaubancotmp.num_recebimento, cbcontratoitaubanco.recebimento_str	),
	data_contrato_dat	= Coalesce(importaitaubancotmp.data_contratacao, cbcontratoitaubanco.data_contrato_dat),
	data_vencimento_dat	= Coalesce(importaitaubancotmp.data_vencimento, cbcontratoitaubanco.data_vencimento_dat),
	valor_contratado_num	= Coalesce(importaitaubancotmp.valor_vencimento, cbcontratoitaubanco.valor_contratado_num),
	numero_total_parcelas_int	= Coalesce(importaitaubancotmp.qtde_parcelas, cbcontratoitaubanco.numero_total_parcelas_int),
	numero_parcelas_atraso_int	= Coalesce(importaitaubancotmp.qtde_atraso, cbcontratoitaubanco.numero_parcelas_atraso_int),
	valor_montante_num	= Coalesce(importaitaubancotmp.valor_atualizado,	cbcontratoitaubanco.valor_montante_num),
	tipo_pessoa_str	= Coalesce(importaitaubancotmp.pessoa_cli, cbcontratoitaubanco.tipo_pessoa_str),
	cpf_str	= Coalesce(importaitaubancotmp.cpf_cli, cbcontratoitaubanco.cpf_str),
	nome_str	= Coalesce(importaitaubancotmp.nome_cli, cbcontratoitaubanco.nome_str),
	endereco_str	= Coalesce((importaitaubancotmp.logradouro_cli || '-' || importaitaubancotmp.numero_cli), importaitaubancotmp.logradouro_cli, cbcontratoitaubanco.endereco_str),
	complemento_str	= Coalesce(importaitaubancotmp.complemento_cli, cbcontratoitaubanco.complemento_str),
	bairro_str = Coalesce(importaitaubancotmp.bairro_cli, cbcontratoitaubanco.bairro_str),
	cidade_str = Coalesce(importaitaubancotmp.cidade_cli, cbcontratoitaubanco.cidade_str),
	estado_str = Coalesce(importaitaubancotmp.estado_cli, cbcontratoitaubanco.estado_str),
	cep_str	= Coalesce(importaitaubancotmp.cep_cli, cbcontratoitaubanco.cep_str),
	ddd_str	= Coalesce(importaitaubancotmp.ddd_cli, cbcontratoitaubanco.ddd_str),
	telefone_str	= Coalesce(importaitaubancotmp.telefone_cli, cbcontratoitaubanco.telefone_str),
	ramal_str	= Coalesce(importaitaubancotmp.ramal_cli, cbcontratoitaubanco.ramal_str),
	endereco_trabalho_str	= Coalesce((importaitaubancotmp.logradouro_com_cli || '-' || importaitaubancotmp.numero_com_cli), importaitaubancotmp.logradouro_com_cli, cbcontratoitaubanco.endereco_trabalho_str),
	complemento_trabalho_str	= Coalesce(importaitaubancotmp.complemento_com_cli	, cbcontratoitaubanco.complemento_trabalho_str),
	bairro_trabalho_str	= Coalesce(importaitaubancotmp.bairro_com_cli,	cbcontratoitaubanco.bairro_trabalho_str),
	cidade_trabalho_str	= Coalesce(importaitaubancotmp.cidade_com_cli,	cbcontratoitaubanco.cidade_trabalho_str),
	estado_trabalho_str	= Coalesce(importaitaubancotmp.estado_com_cli,	cbcontratoitaubanco.estado_trabalho_str),
	cep_trabalho_str	= Coalesce(importaitaubancotmp.cep_com_cli	,	cbcontratoitaubanco.cep_trabalho_str),
	ddd_trabalho_str	= Coalesce(importaitaubancotmp.ddd_com_cli	,	cbcontratoitaubanco.	ddd_trabalho_str),
	telefone_trabalho_str	= Coalesce(importaitaubancotmp.telefone_com_cli, cbcontratoitaubanco.telefone_trabalho_str),
	ramal_trabalho_str	= Coalesce(importaitaubancotmp.ramal_com_cli,	cbcontratoitaubanco.ramal_trabalho_str),
	tipo_pessoa_avalista1_str	= Coalesce(importaitaubancotmp.pessoa_aval1,	cbcontratoitaubanco.tipo_pessoa_avalista1_str),
	cpf_avalista1_str	= Coalesce(importaitaubancotmp.cpf_aval1, cbcontratoitaubanco.cpf_avalista1_str),
	nome_avalista1_str	= Coalesce(importaitaubancotmp.nome_aval1,	cbcontratoitaubanco.nome_avalista1_str),
	endereco_avalista1_str	= Coalesce((importaitaubancotmp.logradouro_aval1 || '-' || importaitaubancotmp.numero_aval1), importaitaubancotmp.logradouro_aval1, cbcontratoitaubanco.endereco_avalista1_str),
	complemento_avalista1_str	= Coalesce(importaitaubancotmp.complemento_aval1, cbcontratoitaubanco.complemento_avalista1_str),
	bairro_avalista1_str	= Coalesce(importaitaubancotmp.bairro_aval1,	cbcontratoitaubanco.	bairro_avalista1_str),
	cidade_avalista1_str	= Coalesce(importaitaubancotmp.cidade_aval1,	cbcontratoitaubanco.	cidade_avalista1_str),
	estado_avalista1_str	= Coalesce(importaitaubancotmp.estado_aval1,	cbcontratoitaubanco.	estado_avalista1_str),
	cep_avalista1_str	= Coalesce(importaitaubancotmp.cep_aval1, cbcontratoitaubanco.cep_avalista1_str),
	ddd_avalista1_str	= Coalesce(importaitaubancotmp.ddd_aval1, cbcontratoitaubanco.ddd_avalista1_str),
	fone_avalista1_str	= Coalesce(importaitaubancotmp.telefone_aval1, cbcontratoitaubanco.fone_avalista1_str),
	ramal_trab_avalista1_str	= Coalesce(importaitaubancotmp.ramal_aval1, cbcontratoitaubanco.ramal_trab_avalista1_str),
	tipo_pessoa_avalista2_str	= Coalesce(importaitaubancotmp.pessoa_aval2,	cbcontratoitaubanco.tipo_pessoa_avalista2_str),
	cpf_avalista2_str	= Coalesce(importaitaubancotmp.cpf_aval2, cbcontratoitaubanco.cpf_avalista2_str),
	nome_avalista2_str	= Coalesce(importaitaubancotmp.nome_aval2,	cbcontratoitaubanco.nome_avalista2_str),
	endereco_avalista2_str	= Coalesce((importaitaubancotmp.logradouro_aval2 || '-' || importaitaubancotmp.numero_aval2),	importaitaubancotmp.logradouro_aval2, cbcontratoitaubanco.endereco_avalista2_str),
	complemento_avalista2_str	= Coalesce(importaitaubancotmp.complemento_aval2, cbcontratoitaubanco.complemento_avalista2_str),
	bairro_avalista2_str = Coalesce(importaitaubancotmp.bairro_aval2, cbcontratoitaubanco.bairro_avalista2_str),
	cidade_avalista2_str = Coalesce(importaitaubancotmp.cidade_aval2,	cbcontratoitaubanco.cidade_avalista2_str),
	estado_avalista2_str = Coalesce(importaitaubancotmp.estado_aval2,	cbcontratoitaubanco.estado_avalista2_str),
	cep_avalista2_str	= Coalesce(importaitaubancotmp.cep_aval2, cbcontratoitaubanco.cep_avalista2_str),
	ddd_avalista2_str	= Coalesce(importaitaubancotmp.ddd_aval2, cbcontratoitaubanco.ddd_avalista2_str),
	fone_avalista2_str	= Coalesce(importaitaubancotmp.telefone_aval2,	cbcontratoitaubanco.fone_avalista2_str),
	ramal_trab_avalista2_str	= Coalesce(importaitaubancotmp.ramal_aval2, cbcontratoitaubanco.ramal_trab_avalista2_str),
	codigo_concessionaria_str = Coalesce(importaitaubancotmp.codigo_filial,	cbcontratoitaubanco.codigo_concessionaria_str),
	porte_empresa_str	= Coalesce(importaitaubancotmp.porte_empresa	,	cbcontratoitaubanco.porte_empresa_str),
 	spr_str	= Coalesce(importaitaubancotmp.produtos_rede, cbcontratoitaubanco.spr_str),
	codigo_seguradora_int	= Coalesce(importaitaubancotmp.codigo_seguradora, cbcontratoitaubanco.codigo_seguradora_int),
	codigo_op_finaustria_str	= Coalesce(importaitaubancotmp.codigo_finaustria, cbcontratoitaubanco.codigo_op_finaustria_str),
	vl_cdesc_avista_num	= Coalesce(importaitaubancotmp.vl_cdesc_avista, cbcontratoitaubanco.vl_cdesc_avista_num),
	perc_maxdesc_num = Coalesce(importaitaubancotmp.perc_maxdesc, cbcontratoitaubanco.perc_maxdesc_num),

	valor_acordo_num = Coalesce(importaitaubancotmp.valor_acordo, cbcontratoitaubanco.valor_acordo_num),
--	numero_cartao_str = Coalesce(importaitaubancotmp.numero_cartao, cbcontratoitaubanco.numero_cartao_str),
--	agencia_conta_virtual_str = Coalesce(importaitaubancotmp.agencia_conta_virtual, cbcontratoitaubanco.agencia_conta_virtual_str),
--	numero_carteira_str = Coalesce(importaitaubancotmp.numero_carteira, cbcontratoitaubanco.numero_carteira_str),
	 
	data_ultima_distrib_dat = dt_distribuicao,
	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera = 'A';

	-- Log alteraï¿½ï¿½o dados contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select Distinct
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	  cbcontratoitaubanco.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Dados do Contrato alterados. Situaï¿½ï¿½o ' || cbsituacaocontrato.codigo_str 

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbsituacaocontrato On cbsituacaocontrato.id_cbsituacaocontrato_int = cbcontratoitaubanco.id_cbsituacaocontrato_int
	Where importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera = 'A';

	-- Parcela REDIRECIONADA
	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato aberto
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo,
	  cbcontratoitaubanco.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para A'

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela On cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.parcela_int <> '0'
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbcontratoitaubanco.id_cbsituacaocontrato_int = 6
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	--Alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato baixado
	Update cbcontratoitaubanco Set
	id_cbsituacaocontrato_int = 1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.parcela_int <> '0'
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And cbcontratoitaubanco.id_cbsituacaocontrato_int = 6
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	
	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	cbcontratoitaubanco.contrato_str,
	importaitaubancotmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Parcela redirecionada. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int || '. Data do pagamento ' || Coalesce(to_char(cbparcela.data_pagamento_dat, 'dd/mm/yyyy'), '')

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitaubanco.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.parcela_int <> '0'
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	Update cbparcela Set
	situacao_int = 0,
	data_pagamento_dat = Null,
	valor_pago_num = Null,
	
	data_ultima_distrib_dat = dt_distribuicao,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.parcela_int <> '0'
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And cbcontratoitaubanco.id_gecliente_int = cliente
	And cbcontratoitaubanco.id_geempresa_int = empresa
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	-- 15/02/2006
	--Fit(34)/Fic(38) - Marcar parcelas redirecinadas com pagamento para controle
	Update cbparcela Set nome_produto_str = arquivo || ' - ' || current_date

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.parcela_int <> '0'
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int In ('4', '6')
	And (cbparcela.valor_pago_num Is Not Null And cbparcela.valor_pago_num <> '0')
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int In ('140', '141')
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And cbcontratoitaubanco.id_gecliente_int = cliente
	And cbcontratoitaubanco.id_geempresa_int = empresa
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	-- Parcela valor NULO
	-- Log 
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	cbcontratoitaubanco.contrato_str,
	importaitaubancotmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Valor nulo da parcela alterado.'

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitaubanco.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num Is Null;

	--Parcela
	Update cbparcela Set
	valor_principal_num = importaitaubancotmp.valor_geral,
	valor_devedor_num   = importaitaubancotmp.valor_devedor,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num Is Null;

	-- Parcela vencimento NULO
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	cbcontratoitaubanco.contrato_str,
	importaitaubancotmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Vencimento nulo da parcela alterado.'

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitaubanco.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat Is Null
	And importaitaubancotmp.data_geral Is Not Null;

	--Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitaubancotmp.data_geral,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat Is Null
	And importaitaubancotmp.data_geral Is Not Null;

	-- Parcela valor DIFERENTE
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	cbcontratoitaubanco.contrato_str,
	importaitaubancotmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Valor da parcela alterado. Valor anterior ' || cbparcela.valor_principal_num

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitaubanco.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num <> importaitaubancotmp.valor_geral;
	 
	--Parcela
	Update cbparcela Set
	valor_principal_num = importaitaubancotmp.valor_geral,
	valor_devedor_num   = importaitaubancotmp.valor_devedor,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num <> importaitaubancotmp.valor_geral;

	-- Parcela vencimento DIFERENTE
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	cbcontratoitaubanco.contrato_str,
	importaitaubancotmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Vencimento da parcela alterado. Vencimento anterior ' || to_char(cbparcela.data_vencimento_dat, 'dd/mm/yyyy')

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitaubanco.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int <> '4'
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat <> importaitaubancotmp.data_geral;

	--Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitaubancotmp.data_geral,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio 
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat <> importaitaubancotmp.data_geral;

	--Alteraï¿½ï¿½o Parcela Manual/Automï¿½tica
	Update cbparcela Set
	valor_devedor_num   		= importaitaubancotmp.valor_devedor,
	id_esregua_int 					= importaitaubancotmp.id_esregua,
	data_limite_retorno_dat = importaitaubancotmp.data_limite,
	tarifa_cobranca_num 		= importaitaubancotmp.tarifa_cobranca,
	data_primeira_distrib_dat = Case When importaitaubancotmp.status_registro = '10' Then importaitaubancotmp.data_envio
																	 When importaitaubancotmp.status_registro = '13' Then dt_distribuicao
							 					      End,
	data_ultima_distrib_dat = dt_distribuicao,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And Upper(cbparcela.manual_str) = 'S'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaubancotmp.status_registro,
	cbcontratoitaubanco.contrato_str,
	importaitaubancotmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
											Inner Join cbparcela on cbcontratoitaubanco.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And Upper(cbparcela.manual_str) = 'S'
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

	-- Alteraï¿½ï¿½o distribparcela
	Update cbdistribparcela Set
	data_pre_distrib_dat = Case When importaitaubancotmp.status_registro = '10' Then importaitaubancotmp.data_envio
															When importaitaubancotmp.status_registro <> '10' Then dt_distribuicao
							 					 End

	Where cbdistribparcela.id_cbcontrato_int = cbcontratoitaubanco.id_cbcontrato_int
	And cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int
	And cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And Upper(cbparcela.manual_str) = 'S'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('10', '13')
	And importaitaubancotmp.inclui_altera_parcela = 'A';

end if;

-- Status 11/15/17/30/31
-- Baixa parcelas
if status = '15' then

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 4,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.id_cbtiponegocio_int = importaitaubancotmp.id_cbtiponegocio
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And cbparcela.situacao_int Not In ('4', '6')
	And importaitaubancotmp.tipo_registro  = '1'
	And importaitaubancotmp.status_registro In ('11', '15', '17', '30', '31');

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaubanco.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	11953,

	1,
	current_timestamp

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitaubanco.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int  In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = 0)
	And importaitaubancotmp.tipo_registro = '1'
	And importaitaubancotmp.status_registro In ('11', '15', '17', '30', '31');

	--Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbtiponegocio.codigo_str, cbcontratoitaubanco.id_cbcontrato_int, cbcontratoitaubanco.contrato_str
		From cbcontratoitaubanco Inner Join importaitaubancotmp On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
												Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
		Where importaitaubancotmp.tipo_registro = '1'
		And importaitaubancotmp.status_registro In ('11', '15', '17', '30', '31')
		And cbcontratoitaubanco.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela
															 	 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratoitaubanco Set
			id_cbsituacaocontrato_int = 6,

			id_geusuario_int = usuario,
			tstamp = current_timestamp

			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				254,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo ' || arquivo,
			  cursor_contrato.contrato_str,
				'(' || cursor_contrato.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- Status 35 - PAGA
-- Baixa parcela
if status = '35' then

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 4,
	status_registro_str = importaitaubancotmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaubanco.id_cbcontrato_int
	And cbcontratoitaubanco.codigo_operacao_str = importaitaubancotmp.codigo_operacao
	And cbcontratoitaubanco.contrato_str = importaitaubancotmp.contrato
	And cbparcela.situacao_int Not In ('4', '6')
	And importaitaubancotmp.tipo_registro = '6'
	And importaitaubancotmp.status_registro  = '35';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaubanco.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	10667,

	1,
	current_timestamp

	From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.codigo_operacao_str, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.codigo_operacao, importaitaubancotmp.contrato)
											Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitaubanco.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaubancotmp.num_parcela
	And cbparcela.tipo_str = '1'
	And cbparcela.situacao_int  In ('4', '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = 0)
	And importaitaubancotmp.tipo_registro  = '6'
	And importaitaubancotmp.status_registro  = '35';

	--Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbtiponegocio.codigo_str, cbcontratoitaubanco.id_cbcontrato_int, cbcontratoitaubanco.contrato_str
		From cbcontratoitaubanco Inner Join importaitaubancotmp On (cbcontratoitaubanco.codigo_operacao_str, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.codigo_operacao, importaitaubancotmp.contrato)
												Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaubanco.id_cbtiponegocio_int
		Where importaitaubancotmp.tipo_registro = '6'
		And importaitaubancotmp.status_registro  = '35'
		And cbcontratoitaubanco.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela
															 	 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratoitaubanco Set
			id_cbsituacaocontrato_int = 6,

			id_geusuario_int = usuario,
			tstamp = current_timestamp

			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				254,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo ' || arquivo,
			  cursor_contrato.contrato_str,
				'(' || cursor_contrato.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- Status 12/14/16/25/26/32/33/34
-- FollowUps
if status = '12' then

	for cursor_contrato in
		Select Distinct cbcontratoitaubanco.id_cbcontrato_int, importaitaubancotmp.status_registro

		From importaitaubancotmp Inner Join cbcontratoitaubanco On (cbcontratoitaubanco.id_cbtiponegocio_int, cbcontratoitaubanco.contrato_str) = (importaitaubancotmp.id_cbtiponegocio, importaitaubancotmp.contrato)
		Where importaitaubancotmp.tipo_registro  = '1'
		And importaitaubancotmp.status_registro In ('12', '14', '16', '25', '26', '32', '33', '34')

	loop

		Insert Into cbfollowup
		(id_cbcontrato_int,
		id_cbparcela_int,
		data_cobranca_dat,
		data_dat,
		hora_cobranca_tim,
		hora_tim,
		coloca_stand_str,
		alterado_str,
		historico_str,
		id_cbsitcontato_int,

		id_geusuario_int,
		tstamp)

		Values (
		cursor_contrato.id_cbcontrato_int,
		Null,
		current_date,
		current_date,
		current_timestamp,
		current_timestamp,
		'N',
		'N',
		'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
		Case When cursor_contrato.status_registro = '12' Then 10665
				 When cursor_contrato.status_registro = '14' Then 10666
				 When cursor_contrato.status_registro = '16' Then 10668
				 When cursor_contrato.status_registro = '25' Then 10671
				 When cursor_contrato.status_registro = '26' Then 10672
				 When cursor_contrato.status_registro = '32' Then 10676
				 When cursor_contrato.status_registro = '33' Then 10677
				 When cursor_contrato.status_registro = '34' Then 10678
		End,

		1,
		current_timestamp);

	end loop;

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12034 (class 0 OID 0)
-- Dependencies: 2018
-- Name: FUNCTION importa_itaubanco(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_itaubanco(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Itaï¿½ Banco';

--
-- TOC entry 2019 (class 1255 OID 27599)
-- Name: importa_itaupic(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_itaupic(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
status alias   for $1;
empresa_logada alias  for $2;
usuario alias  for $3;
cliente alias  for $4;
arquivo alias  for $5;

cursor_contrato 		  record;
dt_distribuicao 			date;
int_retiradas 				int4;
int_total  						int4;
empresa								int4;

BEGIN

--Retorna data de distribuiï¿½ï¿½o
dt_distribuicao:= (Select data_lote From importaitaupictmp Where tipo_registro = '0');
-- Empresa fixa
empresa :=  2;

if status = '0' then

	-- Seta qtde de registros no cabecalho (gravacao na gestatusimporta)
	Update importaitaupictmp Set
	qtde_registros = (Select qtde_registros From importaitaupictmp Where tipo_registro  = '9')
	Where tipo_registro  = '0';

	-- Seta moeda
	Update importaitaupictmp Set
	id_fimoeda = 1
	Where tipo_registro  = '1';

	-- Seta plataform e fiial do Itau/filial da Paschoalotto
	Update importaitaupictmp Set
	id_cbplataforma = cbplataforma.id_cbplataforma_int,
	id_gefilial = cbplataforma.id_gefilial_int
	Where importaitaupictmp.agencia_plataforma = cbplataforma.codigo_int
	And importaitaupictmp.tipo_registro  = '1'
	And cbplataforma.id_gecliente_int = cliente;

	-- Contratos Fiat TN 96/97/98
	Update importaitaupictmp Set
	id_cbetapa = Case When (Trim(Upper(importaitaupictmp.empresaitau)) In ('96', '97', '98', '89')) And importaitaupictmp.num_contratos_finaustria Is Not Null Then 10
										When (Trim(Upper(importaitaupictmp.empresaitau)) In ('96', '97', '98', '89')) And importaitaupictmp.num_contratos_finaustria Is Null Then 11
										Else id_cbetapa
							 End
	Where tipo_registro  = '1';

	--Contratos InterCap 
	Update importaitaupictmp Set
	id_cbetapa = Case When importaitaupictmp.num_contratos_finaustria Is Not Null And importaitaupictmp.num_contratos_finaustria <> '' Then 51
										Else id_cbetapa 
							 End
	Where tipo_registro  = '1'
	And Trim(Upper(empresaitau)) = '91';

	-- Atribui 9-1a. fase para etapa nula
	Update importaitaupictmp Set id_cbetapa = 9
	Where tipo_registro  = '1' and id_cbetapa is null;

	-- Seta tipo de negocio
	-- Se contrato jï¿½ existe ignora arquivo de remessa (duplicaï¿½ï¿½o contrato por TN)
	Update importaitaupictmp Set
	id_cbtiponegocio = cbtiponegocio.id_cbtiponegocio_int
	Where Trim(Upper(empresaitau)) = Trim(Upper(cbtiponegocio.codigo_str))
	And importaitaupictmp.tipo_registro In ('1', '2')
	And cbtiponegocio.id_gecliente_int = cliente;

	-- Seta rï¿½gua da parcela - sem subclassificaï¿½ï¿½o
  -- 08/11/05 retirado codigo 8-correntistas devido atualizaï¿½ï¿½o do documento
	Update importaitaupictmp Set
	id_esregua = esregua.id_esregua_int
	Where esregua.id_gecliente_int = cliente 
	And codigo_estrategia = esregua.codigo_int
	And tipo_registro  = '1'
	And codigo_estrategia In ('1','2','4','5','9');

  -- 08/11/05 inserido codigo 8-correntistas devido atualizaï¿½ï¿½o do documento
	-- Seta rï¿½gua da parcela - com subclassificaï¿½ï¿½o (defualt CAMPEï¿½)
	-- Alterado em 15/03/06 - a rï¿½gua serï¿½ setada como 9999 - RSC - Sem classificaï¿½ï¿½o
	Update importaitaupictmp Set
	id_esregua = 179
	Where esregua.id_gecliente_int = cliente 
	And codigo_estrategia = esregua.codigo_int
	And tipo_registro  = '1'
	And codigo_estrategia In ('7','8','10','11','12');

	-- 28/11 - Alteraï¿½ï¿½o subclassificaï¿½ï¿½o
	Update importaitaupictmp Set id_esregua = 
	Case 
	
	-- fpd novos 7
	--Campeï¿½
	When (codigo_estrategia = '7' And (subclassificacao In
	     ('492', '494', '501', '504', '1022', '1283', '1285', '1286', '1287', '1288', '1289', '1290', '1291', '1308', 
			  '1309', '1310', '1311', '1331', '1336', '1342',
				'1529', '1530', '1531', '1532', '1719', '1720', '1794', '1795', '1796', '1797', '1806', '1807', '1808', 
				'1809', '1810', '1811', '1812', '1813', '1814', '1815', '1816', '1839', '1840', '1841', '1842', '1843'
				))) Then 172

	--Desafiante 1
	When (codigo_estrategia = '7' And (subclassificacao In 
	     ('1293', '1294', '1295', '1296', '1297', '1298', '1300', '1301', '1302', '1303', '1304', '1305', '1306', 
			  '1307', '1312', '1330', '1332', '1337', '1340', '1343',
				'1798', '1799', '1800', '1801', '1817', '1818', '1819', '1820', '1821', '1822', '1823', '1824', '1825', 
				'1826', '1827', '1844', '1845', '1846', '1847', '1848'
				))) Then 173

	--Desafiante 2
	When (codigo_estrategia = '7' And (subclassificacao In 
		   ('1314', '1315', '1316', '1317', '1318', '1319', '1320', '1321', '1322', '1323', '1324', '1325', '1326', 
			  '1327', '1328', '1329', '1333', '1338', '1341', '1344',
				'1802', '1803', '1804', '1805', '1828', '1829', '1830', '1831', '1832', '1833', '1834', '1835', '1836', 
				'1837', '1838', '1849', '1850', '1851', '1852', '1853'				
				))) Then 174

	-- Desafiante (criado em 11/03 - documento de 03012006)
	When (codigo_estrategia = '7' And (subclassificacao In (
			  '1909', '1910', '1911', '1912', '1917', '1918', '1919', '1920', '1924', '1925', '1926', '1931', 
			  '1932', '1933', '1934', '1939', '1940', '1941', '1943', '1944'
				))) Then 178

	-- correntistas 8
	--Campeï¿½
	When (codigo_estrategia = '8' And (subclassificacao In
			 ('1229', '1230', '1231', '1232', '1241', '1242', '1243', '1244', '1253', '1254', '1255', '1256', '1266', 
			  '1267', '1268', '1269', '1278', '1488', '1490', '1492', '1494', '1496', '1498', '1500', '1502', '1504', 
				'1506', '1508', '1510', '1512', '1514', '1517', '1519', '1521',
				'1725', '1726', '1727', '1728', '1729', '1730', '1731', '1732'
				))) Then 139

	--Desafiante 1
  When (codigo_estrategia = '8' And (subclassificacao In
	     ('72', '1233', '1234', '1235', '1236', '1245', '1246', '1247', '1248', '1257','1258', '1259', '1260', 
			  '1270', '1271', '1272', '1273', '1281','1489', '1491', '1493', '1495', '1497', '1499', '1501', '1503', 
				'1505', '1507', '1509', '1511', '1513', '1516', '1518', '1520', '1522', '1779', '1780'
				))) Then 140

	--Desafiante 2
  When (codigo_estrategia = '8' And (subclassificacao In
	     ('1237', '1238', '1239', '1240', '1249', '1250', '1251', '1252', '1261', '1262', '1263', '1264', '1274', 
			  '1275', '1276', '1277', '1282', '1781', '1782'
				))) Then 141

	-- mb paulista 10
	--Campeï¿½
  When (codigo_estrategia = '10' And (subclassificacao In
	     ('945', '947', '953','957','1050', '1052', '1167', '1168', '1169', '1170', '1179', '1188', '1191', '1194', 
			  '1197', '1200', '1203', '1209', '1212', '1219', '1345', '1346', '1347', '1356', '1359', '1362','1614',
				'1615',	'1616', '1618', '1619', '1620', '1621', '1633', '1634', '1635', '1783', '1784',
				'1536', '1537', '1539', '1540'
				))) Then 147

	--Desafiante 1
	When (codigo_estrategia = '10' And (subclassificacao In
	     ('1172', '1173', '1174', '1182', '1189', '1192', '1195', '1198', '1201', '1204', '1207', '1210', '1220', 
			 	'1348', '1349', '1350', '1351', '1357', '1360', '1363', '1623', '1624', '1625', '1626', '1627', '1628', 
				'1629', '1630', '1631', '1632', '1636', '1637', '1638', '1639', '1640', '1706', '1779', '1780',
				'1707', '1708', '1709', '1710', '1715', '1790', '1791', '1792', '1793'
				))) Then 150

	--Desafiante 2
  When (codigo_estrategia = '10' And (subclassificacao In
	     ('1176', '1177', '1178', '1185', '1190', '1193', '1196', '1199', '1202', '1205', '1208', '1211', '1221', 
			  '1352', '1353', '1354', '1355', '1358', '1361', '1364', '1785', '1786',
				'1711', '1712', '1713', '1714', '1716', '1789'
				))) Then 157

	-- demais regioes 11
	--Campeï¿½
  When (codigo_estrategia = '11' And (subclassificacao In
	     ('961', '963', '969', '973', '999', '1057', '1059', '1365', '1367', '1370', '1371', '1373', '1375', '1377', 
			  '1379', '1381', '1383', '1385', '1387', '1389', '1641', '1642', '1643', '1644', '1645', '1646', '1647', 
				'1648', '1649', '1650', '1651', '1663', '1664', '1665', '1666', '1672',
				'1543', '1544', '1545', '1546', '1733', '1734', '1735', '1736', '1737', '1738', '1739', '1740', '1741', 
				'1742', '1743', '1744', '1745', '1746', '1747', '1748', '1749', '1750'
				))) Then 148

	--Desafiante 
  When (codigo_estrategia = '11' And (subclassificacao In
	     ('962', '964', '970', '974', '1000', '1058', '1060', '1366', '1368', '1369', '1372', '1374', '1376', 
			  '1378', '1380', '1382', '1384', '1386', '1388', '1390', '1652', '1653', '1654', '1655', '1656', '1657', 
				'1658', '1659', '1660', '1661', '1662', '1667', '1668', '1669', '1670', '1671',
				'1751', '1752', '1753', '1754', '1755', '1756', '1757', '1758', '1759', '1760', '1761', '1762', '1763', 
				'1764', '1765', '1766'
				))) Then 151

	-- bons pagadores 12
	--Campeï¿½
  When (codigo_estrategia = '12' And (subclassificacao In
	     ('979', '985', '989', '993', '1065', '1067', '1391', '1393', '1395', '1397', '1399', '1401', '1403', '1407', 
			  '1409', '1411', '1413', '1415', '1417', '1419', '1673', '1674', '1675', '1676', '1677', '1678', '1679', 
				'1680', '1681', '1682', '1683', '1696', '1697', '1698', '1699', '1700', '1787', '1788',
				'1549', '1550', '1551', '1552' 
				))) Then 149

	--Desafiante
  When (codigo_estrategia = '12' And (subclassificacao In
	     ('980', '986', '990', '992', '1066', '1068', '1392', '1394', '1396', '1398', '1400', '1402', '1404', '1406', 
			  '1408', '1410', '1412', '1414', '1416', '1418', '1684', '1685', '1687', '1688', '1689', '1690', '1691', 
				'1692', '1693', '1694', '1695', '1701', '1702', '1703', '1704', '1705'
				))) Then 152

	Else id_esregua
	End

	Where tipo_registro  = '1';

	-- Rï¿½gua nula - 4 Hiper Pressï¿½o
	Update importaitaupictmp Set
	id_esregua = 136
	Where id_esregua Is Null
	And tipo_registro  = '1';

	-- Seta data de distribuicao da parcela
	-- Status 10 - data_envio / Status 13 - dt_distribuicao / Status 20/27 - data_envio se preenchida, se nao preenchida dt_distribuicao
	Update importaitaupictmp Set
	distribuicao_parcela = Case When status_registro = '10' Then data_envio
															When status_registro = '13' Then dt_distribuicao
															When status_registro = '20' Then data_envio
															When status_registro = '27' Then data_envio
												 			Else Null
							 					 End
	Where tipo_registro  = '1'
	And inclui_altera_parcela = 'I'
	And num_parcela Is Not Null;

	Update importaitaupictmp Set
	distribuicao_parcela = dt_distribuicao
	Where tipo_registro  = '1'
	And status_registro In ('20', '27')
	And inclui_altera_parcela = 'I'
	And num_parcela Is Not Null
	And data_envio Is Null;

end if;

-- Status 10/13/20/27
-- Inclusï¿½o de contratos   - Status 10/13/20/27
-- Alteraï¿½ï¿½o de contratos  - Status 10
-- Inclusï¿½o de parcelas    - Status 10/13/20/27
-- Alteraï¿½ï¿½o de parcelas   - Status 10/13
if status = '10' then

	-- Inclusï¿½o de Contrato
	Insert Into cbcontratoitaupic
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,

	codigo_operacao_str,
	contrato_str,
	id_fimoeda_int,
	id_cbplataforma_int,
	id_cbetapa_int,
	tipo_contrato_str,

	codigo_escritorio_str,
	numero_lote_int,
	regiao_plataforma_str,
	recebimento_str,
	data_contrato_dat,
	data_vencimento_dat,
	valor_montante_num,
	numero_total_parcelas_int,
	numero_parcelas_atraso_int,
	valor_contratado_num,
	data_envio_dat,
	tipo_pessoa_str,
	cpf_str,
	nome_str,
	endereco_str,
	complemento_str,
	bairro_str,
	cidade_str,
	estado_str,
	cep_str,
	ddd_str,
	telefone_str,
	ramal_str,
	endereco_trabalho_str,
	complemento_trabalho_str,
	bairro_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	cep_trabalho_str,
	ddd_trabalho_str,
	telefone_trabalho_str,
	ramal_trabalho_str,
	tipo_pessoa_avalista1_str,
	cpf_avalista1_str,
	nome_avalista1_str,
	endereco_avalista1_str,
	complemento_avalista1_str,
	bairro_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	cep_avalista1_str,
	ddd_avalista1_str,
	fone_avalista1_str,
	ramal_trab_avalista1_str,
	tipo_pessoa_avalista2_str,
	cpf_avalista2_str,
	nome_avalista2_str,
	endereco_avalista2_str,
	complemento_avalista2_str,
	bairro_avalista2_str,
	cidade_avalista2_str,
	estado_avalista2_str,
	cep_avalista2_str,
	ddd_avalista2_str,
	fone_avalista2_str,
	ramal_trab_avalista2_str,
	codigo_concessionaria_str,
	porte_empresa_str,
	spr_str,
	codigo_seguradora_int,
	codigo_op_finaustria_str,
	contrato_finaustria_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,

	codigo_operacao,
	contrato,
	id_fimoeda,
	id_cbplataforma,
	id_cbetapa,
	tipo_contrato,

	codigo_escritorio,
	num_lote,
	regiao_plataforma,
	num_recebimento,
	data_contratacao,
	data_vencimento,
	valor_atualizado,
	qtde_parcelas,
	qtde_atraso,
	valor_vencimento,
	data_envio,
	pessoa_cli,
	cpf_cli,
	nome_cli,
	(logradouro_cli || '-' || Coalesce(numero_cli, '')),
	complemento_cli,
	bairro_cli,
	cidade_cli,
	estado_cli,
	cep_cli,
	ddd_cli,
	telefone_cli,
	ramal_cli,
	(logradouro_com_cli || '-' || Coalesce(numero_com_cli, '')),
	complemento_com_cli,
	bairro_com_cli,
	cidade_com_cli,
	estado_com_cli,
	cep_com_cli,
	ddd_com_cli,
	telefone_com_cli,
	ramal_com_cli,
	pessoa_aval1,
	cpf_aval1,
	nome_aval1,
	(logradouro_aval1 || '-' || Coalesce(numero_aval1, '')),
	complemento_aval1,
	bairro_aval1,
	cidade_aval1,
	estado_aval1,
	cep_aval1,
	ddd_aval1,
	telefone_aval1,
	ramal_aval1,
	pessoa_aval2,
	cpf_aval2,
	nome_aval2,
	(logradouro_aval2 || '-' || Coalesce(numero_aval2, '')),
	complemento_aval2,
	bairro_aval2,
	cidade_aval2,
	estado_aval2,
	cep_aval2,
	ddd_aval2,
	telefone_aval2,
	ramal_aval2,
	codigo_filial,
	porte_empresa,
	produtos_rede,
	codigo_seguradora,
	codigo_finaustria,
	num_contratos_finaustria,

	data_envio,
	data_envio,
	1,
	current_timestamp,
	usuario

	From importaitaupictmp
	Where tipo_registro  = '1'
	And status_registro In ('10', '13', '20', '27')
	And inclui_altera = 'I';

	-- Inclusï¿½o de Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	data_limite_retorno_dat,
	id_esregua_int,
	produto_int,
	modalidade_int,
	tarifa_cobranca_num,
	situacao_int,
	tipo_str,
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	status_registro_str,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaupic.id_cbcontrato_int,
	num_parcela,
	data_geral,
	valor_geral,
	data_limite,
	id_esregua,
	subclassificacao,
	codigo_estrategia,
	tarifa_cobranca,
	0,
	'1',

	distribuicao_parcela,
	dt_distribuicao,
	status_registro,

	usuario,
	current_timestamp

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
	Where importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera_parcela = 'I'
	Order by importaitaupictmp.contrato, importaitaupictmp.num_parcela, importaitaupictmp.data_geral;

	-- Distrubuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratoitaupic.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	distribuicao_parcela

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitaupic.id_cbcontrato_int
	Where importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera_parcela = 'I'
	And importaitaupictmp.num_parcela = cbparcela.parcela_int;

	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato aberto
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo,
	cbcontratoitaupic.contrato_str,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
	Where cbcontratoitaupic.id_cbsituacaocontrato_int = '6'
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera = 'A'
	And importaitaupictmp.inclui_altera_parcela = 'I';

	--Alteraï¿½ï¿½o situaï¿½ï¿½o contrato - contrato baixado
	Update cbcontratoitaupic Set
	id_cbsituacaocontrato_int = 1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitaupic.id_cbsituacaocontrato_int = '6'
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera = 'A'
	And importaitaupictmp.inclui_altera_parcela = 'I';

	-- Inserï¿½ï¿½o FollosUp cliente
	Insert Into cbfollowupcliente
	(id_cbcontrato_int,
  data_lancamento_dat,
  sequencia_descricao_num,
  descricao_text,

  id_geusuario_int,
  tstamp)

	Select
	cbcontratoitaupic.id_cbcontrato_int,
	dt_distribuicao,
	seq_parecer_anterior,
	parecer1_esc_anterior,

	usuario,
	current_timestamp

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
	Where importaitaupictmp.tipo_registro = '2'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera = 'I';

	-- Alteraï¿½ï¿½o Contrato
	Update cbcontratoitaupic Set

	tipo_contrato_str	= Coalesce(importaitaupictmp.tipo_contrato, cbcontratoitaupic.tipo_contrato_str),
	codigo_escritorio_str = Coalesce(importaitaupictmp.codigo_escritorio,	cbcontratoitaupic.codigo_escritorio_str),
	numero_lote_int	= Coalesce(importaitaupictmp.num_lote,	cbcontratoitaupic.numero_lote_int),
	--codigo_operacao_str	= Coalesce(importaitaupictmp.codigo_operacao, cbcontratoitaupic.codigo_operacao_str),
	regiao_plataforma_str	= Coalesce(importaitaupictmp.regiao_plataforma, cbcontratoitaupic.estado_str),
	recebimento_str	= Coalesce(importaitaupictmp.num_recebimento, cbcontratoitaupic.recebimento_str	),
	data_contrato_dat	= Coalesce(importaitaupictmp.data_contratacao, cbcontratoitaupic.data_contrato_dat),
	data_vencimento_dat	= Coalesce(importaitaupictmp.data_vencimento, cbcontratoitaupic.data_vencimento_dat),
	valor_contratado_num	= Coalesce(importaitaupictmp.valor_vencimento, cbcontratoitaupic.valor_contratado_num),
	numero_total_parcelas_int	= Coalesce(importaitaupictmp.qtde_parcelas, cbcontratoitaupic.numero_total_parcelas_int),
	numero_parcelas_atraso_int	= Coalesce(importaitaupictmp.qtde_atraso, cbcontratoitaupic.numero_parcelas_atraso_int),
	valor_montante_num	= Coalesce(importaitaupictmp.valor_atualizado,	cbcontratoitaupic.valor_montante_num),
	data_envio_dat	= Coalesce(importaitaupictmp.data_envio,	cbcontratoitaupic.data_envio_dat),
	tipo_pessoa_str	= Coalesce(importaitaupictmp.pessoa_cli, cbcontratoitaupic.tipo_pessoa_str),
	cpf_str	= Coalesce(importaitaupictmp.cpf_cli, cbcontratoitaupic.cpf_str),
	nome_str	= Coalesce(importaitaupictmp.nome_cli, cbcontratoitaupic.nome_str),
	endereco_str	= Coalesce((importaitaupictmp.logradouro_cli || '-' || importaitaupictmp.numero_cli), importaitaupictmp.logradouro_cli, cbcontratoitaupic.endereco_str),
	complemento_str	= Coalesce(importaitaupictmp.complemento_cli, cbcontratoitaupic.complemento_str),
	bairro_str = Coalesce(importaitaupictmp.bairro_cli, cbcontratoitaupic.bairro_str),
	cidade_str = Coalesce(importaitaupictmp.cidade_cli, cbcontratoitaupic.cidade_str),
	estado_str = Coalesce(importaitaupictmp.estado_cli, cbcontratoitaupic.estado_str),
	cep_str	= Coalesce(importaitaupictmp.cep_cli, cbcontratoitaupic.cep_str),
	ddd_str	= Coalesce(importaitaupictmp.ddd_cli, cbcontratoitaupic.ddd_str),
	telefone_str	= Coalesce(importaitaupictmp.telefone_cli, cbcontratoitaupic.telefone_str),
	ramal_str	= Coalesce(importaitaupictmp.ramal_cli, cbcontratoitaupic.ramal_str),
	endereco_trabalho_str	= Coalesce((importaitaupictmp.logradouro_com_cli || '-' || importaitaupictmp.numero_com_cli), importaitaupictmp.logradouro_com_cli, cbcontratoitaupic.endereco_trabalho_str),
	complemento_trabalho_str	= Coalesce(importaitaupictmp.complemento_com_cli	, cbcontratoitaupic.complemento_trabalho_str),
	bairro_trabalho_str	= Coalesce(importaitaupictmp.bairro_com_cli,	cbcontratoitaupic.bairro_trabalho_str),
	cidade_trabalho_str	= Coalesce(importaitaupictmp.cidade_com_cli,	cbcontratoitaupic.cidade_trabalho_str),
	estado_trabalho_str	= Coalesce(importaitaupictmp.estado_com_cli,	cbcontratoitaupic.estado_trabalho_str),
	cep_trabalho_str	= Coalesce(importaitaupictmp.cep_com_cli	,	cbcontratoitaupic.cep_trabalho_str),
	ddd_trabalho_str	= Coalesce(importaitaupictmp.ddd_com_cli	,	cbcontratoitaupic.	ddd_trabalho_str),
	telefone_trabalho_str	= Coalesce(importaitaupictmp.telefone_com_cli, cbcontratoitaupic.telefone_trabalho_str),
	ramal_trabalho_str	= Coalesce(importaitaupictmp.ramal_com_cli,	cbcontratoitaupic.ramal_trabalho_str),
	tipo_pessoa_avalista1_str	= Coalesce(importaitaupictmp.pessoa_aval1,	cbcontratoitaupic.tipo_pessoa_avalista1_str),
	cpf_avalista1_str	= Coalesce(importaitaupictmp.cpf_aval1, cbcontratoitaupic.cpf_avalista1_str),
	nome_avalista1_str	= Coalesce(importaitaupictmp.nome_aval1,	cbcontratoitaupic.nome_avalista1_str),
	endereco_avalista1_str	= Coalesce((importaitaupictmp.logradouro_aval1 || '-' || importaitaupictmp.numero_aval1), importaitaupictmp.logradouro_aval1, cbcontratoitaupic.endereco_avalista1_str),
	complemento_avalista1_str	= Coalesce(importaitaupictmp.complemento_aval1, cbcontratoitaupic.complemento_avalista1_str),
	bairro_avalista1_str	= Coalesce(importaitaupictmp.bairro_aval1,	cbcontratoitaupic.	bairro_avalista1_str),
	cidade_avalista1_str	= Coalesce(importaitaupictmp.cidade_aval1,	cbcontratoitaupic.	cidade_avalista1_str),
	estado_avalista1_str	= Coalesce(importaitaupictmp.estado_aval1,	cbcontratoitaupic.	estado_avalista1_str),
	cep_avalista1_str	= Coalesce(importaitaupictmp.cep_aval1, cbcontratoitaupic.cep_avalista1_str),
	ddd_avalista1_str	= Coalesce(importaitaupictmp.ddd_aval1, cbcontratoitaupic.ddd_avalista1_str),
	fone_avalista1_str	= Coalesce(importaitaupictmp.telefone_aval1, cbcontratoitaupic.fone_avalista1_str),
	ramal_trab_avalista1_str	= Coalesce(importaitaupictmp.ramal_aval1, cbcontratoitaupic.ramal_trab_avalista1_str),
	tipo_pessoa_avalista2_str	= Coalesce(importaitaupictmp.pessoa_aval2,	cbcontratoitaupic.tipo_pessoa_avalista2_str),
	cpf_avalista2_str	= Coalesce(importaitaupictmp.cpf_aval2, cbcontratoitaupic.cpf_avalista2_str),
	nome_avalista2_str	= Coalesce(importaitaupictmp.nome_aval2,	cbcontratoitaupic.nome_avalista2_str),
	endereco_avalista2_str	= Coalesce((importaitaupictmp.logradouro_aval2 || '-' || importaitaupictmp.numero_aval2),	importaitaupictmp.logradouro_aval2, cbcontratoitaupic.endereco_avalista2_str),
	complemento_avalista2_str	= Coalesce(importaitaupictmp.complemento_aval2, cbcontratoitaupic.complemento_avalista2_str),
	bairro_avalista2_str = Coalesce(importaitaupictmp.bairro_aval2, cbcontratoitaupic.bairro_avalista2_str),
	cidade_avalista2_str = Coalesce(importaitaupictmp.cidade_aval2,	cbcontratoitaupic.cidade_avalista2_str),
	estado_avalista2_str = Coalesce(importaitaupictmp.estado_aval2,	cbcontratoitaupic.estado_avalista2_str),
	cep_avalista2_str	= Coalesce(importaitaupictmp.cep_aval2, cbcontratoitaupic.cep_avalista2_str),
	ddd_avalista2_str	= Coalesce(importaitaupictmp.ddd_aval2, cbcontratoitaupic.ddd_avalista2_str),
	fone_avalista2_str	= Coalesce(importaitaupictmp.telefone_aval2,	cbcontratoitaupic.fone_avalista2_str),
	ramal_trab_avalista2_str	= Coalesce(importaitaupictmp.ramal_aval2, cbcontratoitaupic.ramal_trab_avalista2_str),
	codigo_concessionaria_str = Coalesce(importaitaupictmp.codigo_filial,	cbcontratoitaupic.codigo_concessionaria_str),
	porte_empresa_str	= Coalesce(importaitaupictmp.porte_empresa	,	cbcontratoitaupic.porte_empresa_str),
 	spr_str	= Coalesce(importaitaupictmp.produtos_rede, cbcontratoitaupic.spr_str),
	codigo_seguradora_int	= Coalesce(importaitaupictmp.codigo_seguradora, cbcontratoitaupic.codigo_seguradora_int),
	codigo_op_finaustria_str	= Coalesce(importaitaupictmp.codigo_finaustria, cbcontratoitaupic.codigo_op_finaustria_str),

	data_ultima_distrib_dat = dt_distribuicao,
	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13')
	And importaitaupictmp.inclui_altera = 'A';

	-- Log alteraï¿½ï¿½o dados contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo,
	  cbcontratoitaupic.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Dados do Contrato alterados. Situaï¿½ï¿½o ' || cbsituacaocontrato.codigo_str

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
												 Inner Join cbsituacaocontrato On cbcontratoitaupic.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13')
	And importaitaupictmp.inclui_altera = 'A';

	-- Plano contrato NULO
	-- Log 
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		254,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaupictmp.status_registro,
	  cbcontratoitaupic.contrato_str,
	  '(' || cbtiponegocio.codigo_str || ') ' || 'Valor nulo do plano alterado.'

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
												 Inner Join cbsituacaocontrato On cbcontratoitaupic.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where (cbcontratoitaupic.numero_total_parcelas_int = 0 Or cbcontratoitaupic.numero_total_parcelas_int Is Null)
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('20', '27')
	And importaitaupictmp.inclui_altera In ('A', '')
	And importaitaupictmp.qtde_parcelas Is Not Null;

	-- Contrato
	Update cbcontratoitaupic Set
	numero_total_parcelas_int	= importaitaupictmp.qtde_parcelas

	Where cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And (cbcontratoitaupic.numero_total_parcelas_int = 0 Or cbcontratoitaupic.numero_total_parcelas_int Is Null)
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('20', '27')
	And importaitaupictmp.inclui_altera In ('A', '')
	And importaitaupictmp.qtde_parcelas Is Not Null;

	-- Parcela valor NULO
	-- Log 
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaupictmp.status_registro,
	cbcontratoitaupic.contrato_str,
	importaitaupictmp.num_parcela,
 '(' || cbtiponegocio.codigo_str || ') ' || 	'Valor nulo da parcela alterado.'

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
												 Inner Join cbparcela on cbcontratoitaupic.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num Is Null;

	--Parcela
	Update cbparcela Set
	valor_principal_num = importaitaupictmp.valor_geral,
	status_registro_str = importaitaupictmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera_parcela = 'A'
	And cbparcela.valor_principal_num Is Null;

	-- Parcela vencimento NULO
	-- Log
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaupictmp.status_registro,
	cbcontratoitaupic.contrato_str,
	importaitaupictmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Vencimento nulo da parcela alterado.'

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
												 Inner Join cbparcela on cbcontratoitaupic.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And cbparcela.situacao_int <> '4'
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat Is Null
	And importaitaupictmp.data_geral Is Not Null;

	--Parcela
	Update cbparcela Set
	data_vencimento_dat = importaitaupictmp.data_geral,
	status_registro_str = importaitaupictmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbparcela.situacao_int <> '4'
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13', '20', '27')
	And importaitaupictmp.inclui_altera_parcela = 'A'
	And cbparcela.data_vencimento_dat Is Null
	And importaitaupictmp.data_geral Is Not Null;

	--Alteraï¿½ï¿½o Parcela Manual/Automï¿½tica
	Update cbparcela Set
	id_esregua_int = importaitaupictmp.id_esregua,
	produto_int = Case When produto_int Is Null Then importaitaupictmp.subclassificacao 
										Else produto_int
							 End,
	data_limite_retorno_dat = importaitaupictmp.data_limite,
	tarifa_cobranca_num = importaitaupictmp.tarifa_cobranca,
	data_primeira_distrib_dat = Case When importaitaupictmp.status_registro = '10' Then importaitaupictmp.data_envio
																	 When importaitaupictmp.status_registro = '13' Then dt_distribuicao
							 					      End,
	data_ultima_distrib_dat = dt_distribuicao,
	status_registro_str = importaitaupictmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And Upper(cbparcela.manual_str) = 'S'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13')
	And importaitaupictmp.inclui_altera_parcela = 'A';

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaupictmp.status_registro,
	cbcontratoitaupic.contrato_str,
	importaitaupictmp.num_parcela,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
												 Inner Join cbparcela on cbcontratoitaupic.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And Upper(cbparcela.manual_str) = 'S'
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13')
	And importaitaupictmp.inclui_altera_parcela = 'A';

	-- Alteraï¿½ï¿½o distribparcela
	Update cbdistribparcela Set
	data_pre_distrib_dat = Case When importaitaupictmp.status_registro = '10' Then importaitaupictmp.data_envio
															When importaitaupictmp.status_registro <> '10' Then dt_distribuicao
							 					 End

	Where cbdistribparcela.id_cbcontrato_int = cbcontratoitaupic.id_cbcontrato_int
	And cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int
	And cbparcela.parcela_int = importaitaupictmp.num_parcela
	And Upper(cbparcela.manual_str) = 'S'
	And cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('10', '13')
	And importaitaupictmp.inclui_altera_parcela = 'A';

end if;

-- Status 11
-- Baixa contrato e parcelas
if status = '11' then

	--Log baixa parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	254,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o. Arquivo' || arquivo || '. Status - ' || importaitaupictmp.status_registro,
	cbcontratoitaupic.contrato_str,
	cbparcela.parcela_int,
	'(' || cbtiponegocio.codigo_str || ') ' || 'Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
												 Inner Join cbparcela on cbcontratoitaupic.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.situacao_int Not In ('4', '6')
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro = '11';

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 6,
	status_registro_str = importaitaupictmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbparcela.situacao_int Not In ('4', '6')
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro = '1'
	And importaitaupictmp.status_registro = '11';

	-- Baixa contrato
	Update cbcontratoitaupic Set
	id_cbsituacaocontrato_int = 6,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro = '11';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaupic.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
	10597,

	1,
	current_timestamp

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
	Where importaitaupictmp.tipo_registro = '1'
	And importaitaupictmp.status_registro = '11';

end if;

-- Status 15/17/30/31
-- Baixa parcelas
if status = '15' then

	-- Baixa parcela
	Update cbparcela Set
	data_pagamento_dat = dt_distribuicao,
	valor_pago_num = Null,
	situacao_int = 4,
	status_registro_str = importaitaupictmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And cbparcela.situacao_int Not In ('4', '6')
	And importaitaupictmp.tipo_registro In ('1', '6')
	And importaitaupictmp.status_registro In ('15', '17', '30', '31');

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaupic.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',

	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	Case When importaitaupictmp.status_registro = '15' Then 10600
			 When importaitaupictmp.status_registro = '17' Then 10602
			 When importaitaupictmp.status_registro = '30' Then 10607
			 When importaitaupictmp.status_registro = '31' Then 10656
	End,

	1,
	current_timestamp

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitaupic.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And cbparcela.situacao_int  = '4'
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = 0)
	And importaitaupictmp.tipo_registro In ('1', '6')
	And importaitaupictmp.status_registro In ('15', '17', '30', '31');

	--Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbtiponegocio.codigo_str, cbcontratoitaupic.id_cbcontrato_int, cbcontratoitaupic.contrato_str
		From cbcontratoitaupic Inner Join importaitaupictmp On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
													 Inner Join cbtiponegocio On cbtiponegocio.id_cbtiponegocio_int = cbcontratoitaupic.id_cbtiponegocio_int
		Where importaitaupictmp.tipo_registro In ('1', '6')
		And importaitaupictmp.status_registro In ('15', '17', '30', '31')
		And cbcontratoitaupic.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela
															 	 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
																 		 Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
																		 And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			Update cbcontratoitaupic Set
			id_cbsituacaocontrato_int = 6,

			id_geusuario_int = usuario,
			tstamp = current_timestamp

			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				254,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o. Arquivo ' || arquivo,
			  cursor_contrato.contrato_str,
				'(' || cursor_contrato.codigo_str || ') ' || 'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

end if;

-- Status 20
-- Parcelas em Risco CL
if status = '20' then

	-- Risco cl
	Update cbparcela Set
	data_riscocl_dat = dt_distribuicao,
	status_registro_str = importaitaupictmp.status_registro,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
	And cbcontratoitaupic.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
	And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.status_registro = '20';

	--FollowUp
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratoitaupic.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo || ' referente ï¿½ parcela ' || cbparcela.parcela_int,
	10603,

	1,
	current_timestamp

	From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
												 Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratoitaupic.id_cbcontrato_int
	Where cbparcela.parcela_int = importaitaupictmp.num_parcela
	And importaitaupictmp.tipo_registro  = '1'
	And importaitaupictmp.status_registro In ('20');

end if;

-- Status 12/14/16/25/26/32/33/34
-- FollowUps
if status = '12' then

	for cursor_contrato in
		Select Distinct cbcontratoitaupic.id_cbcontrato_int, importaitaupictmp.status_registro

		From importaitaupictmp Inner Join cbcontratoitaupic On (cbcontratoitaupic.id_cbtiponegocio_int, cbcontratoitaupic.contrato_str) = (importaitaupictmp.id_cbtiponegocio, importaitaupictmp.contrato)
		Where importaitaupictmp.tipo_registro  = '1'
		And importaitaupictmp.status_registro In ('12', '14', '16', '25', '26', '32', '33', '34')

	loop

		Insert Into cbfollowup
		(id_cbcontrato_int,
		id_cbparcela_int,
		data_cobranca_dat,
		data_dat,
		hora_cobranca_tim,
		hora_tim,
		coloca_stand_str,
		alterado_str,
		historico_str,
		id_cbsitcontato_int,

		id_geusuario_int,
		tstamp)

		Values (
		cursor_contrato.id_cbcontrato_int,
		Null,
		current_date,
		current_date,
		current_timestamp,
		current_timestamp,
		'N',
		'N',
		'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
		Case When cursor_contrato.status_registro = '12' Then 10598
				 When cursor_contrato.status_registro = '14' Then 10599
				 When cursor_contrato.status_registro = '16' Then 10601
				 When cursor_contrato.status_registro = '25' Then 10604
				 When cursor_contrato.status_registro = '26' Then 10605
				 When cursor_contrato.status_registro = '32' Then 10657
				 When cursor_contrato.status_registro = '33' Then 10658
				 When cursor_contrato.status_registro = '34' Then 10659
		End,

		1,
		current_timestamp);

	end loop;

end if;

-- Registros do tipo 3
-- novo layout de cobranï¿½a  - 23/02/2006 - Danny
if status = '99' then
	Update cbcontratoitaupic Set
	nome_contato_str	= Coalesce(importaitaupictmp.nome_contato_str, cbcontratoitaupic .nome_contato_str),
	ddd_residencial_str	= Coalesce(importaitaupictmp.ddd_residencial_str, cbcontratoitaupic .ddd_residencial_str),
	tel_residencial_str	= Coalesce(importaitaupictmp.tel_residencial_str, cbcontratoitaupic .tel_residencial_str),
	ramal_residencial_str	= Coalesce(importaitaupictmp.ramal_residencial_str, cbcontratoitaupic .ramal_residencial_str),
	ddd_celular_str	= Coalesce(importaitaupictmp.ddd_celular_str, cbcontratoitaupic .ddd_celular_str),
	tel_celular_str	= Coalesce(importaitaupictmp.tel_celular_str, cbcontratoitaupic .tel_celular_str),
	nome_conjuge_str	= Coalesce(importaitaupictmp.nome_conjuge_str, cbcontratoitaupic .nome_conjuge_str),
	ddd_conjuge_str	= Coalesce(importaitaupictmp.ddd_conjuge_str, cbcontratoitaupic .ddd_conjuge_str),
	tel_conjuge_str	= Coalesce(importaitaupictmp.tel_conjuge_str, cbcontratoitaupic .tel_conjuge_str),
	ramal_conjuge_str	= Coalesce(importaitaupictmp.ramal_conjuge_str, cbcontratoitaupic .ramal_conjuge_str),
	ddd_profissional_str	= Coalesce(importaitaupictmp.ddd_profissional_str, cbcontratoitaupic .ddd_profissional_str),
	tel_profissional_str	= Coalesce(importaitaupictmp.tel_profissional_str, cbcontratoitaupic .tel_profissional_str),
	ramal_profissional_str	= Coalesce(importaitaupictmp.ramal_profissional_str, cbcontratoitaupic .ramal_profissional_str),
	nome_referencia1_str	= Coalesce(importaitaupictmp.nome_referencia1_str, cbcontratoitaupic .nome_referencia1_str),
	parentesco_referencia1_str	= Coalesce(importaitaupictmp.parentesco_referencia1_str, cbcontratoitaupic .parentesco_referencia1_str),
	ddd_referencia1_str	= Coalesce(importaitaupictmp.ddd_referencia1_str, cbcontratoitaupic .ddd_referencia1_str),
	tel_referencia1_str	= Coalesce(importaitaupictmp.tel_referencia1_str, cbcontratoitaupic .tel_referencia1_str),
	ramal_referencia1_str	= Coalesce(importaitaupictmp.ramal_referencia1_str, cbcontratoitaupic .ramal_referencia1_str),
	nome_referencia2_str	= Coalesce(importaitaupictmp.nome_referencia2_str, cbcontratoitaupic .nome_referencia2_str),
	parentesco_referencia2_str	= Coalesce(importaitaupictmp.parentesco_referencia2_str, cbcontratoitaupic .parentesco_referencia2_str),
	ddd_referencia2_str	= Coalesce(importaitaupictmp.ddd_referencia2_str, cbcontratoitaupic .ddd_referencia2_str),
	tel_referencia2_str	= Coalesce(importaitaupictmp.tel_referencia2_str, cbcontratoitaupic .tel_referencia2_str),
	ramal_referencia2_str	= Coalesce(importaitaupictmp.ramal_referencia2_str, cbcontratoitaupic .ramal_referencia2_str),
	data_ultima_distrib_dat = dt_distribuicao,
	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
	And importaitaupictmp.tipo_registro  = '3';

end if;

-- Registros do tipo 4
-- novo layout de cobranï¿½a  - 23/02/2006 - Danny
if status = '999' then
	--dados do veï¿½culo (cbgarantia)
	Insert into cbgarantia
	(id_cbtiponegocio_int,
	id_cbcontrato_int,
	marca_str,
	modelo_str,
	ano_fabricacao_str,
	ano_modelo_str,
	placa_str,
	chassi_str,
	tstamp)

	Select
	cbcontratoitaupic .id_cbtiponegocio_int,
	cbcontratoitaupic .id_cbcontrato_int,
	importaitaupictmp.marca_str,
	importaitaupictmp.modelo_str,
	importaitaupictmp.ano_fabricacao_str,
        importaitaupictmp.ano_modelo_str,
	importaitaupictmp.placa_str,
	importaitaupictmp.chassi_str,
	current_timestamp

	From importaitaupictmp Inner Join cbcontratoitaupic On
	(cbcontratoitaupic.contrato_str) = (importaitaupictmp.contrato) Where
	importaitaupictmp.tipo_registro  = '4'
		and importaitaupictmp.inclui_altera_garantia = 'I';

	update cbgarantia set
		marca_str = Coalesce(importaitaupictmp.marca_str, cbgarantia.marca_str),
		modelo_str = Coalesce(importaitaupictmp.modelo_str, cbgarantia.modelo_str),
		ano_fabricacao_str = Coalesce(importaitaupictmp.ano_fabricacao_str, cbgarantia.ano_fabricacao_str),
		ano_modelo_str =  Coalesce(importaitaupictmp.ano_modelo_str, cbgarantia.ano_modelo_str),
		placa_str = Coalesce(importaitaupictmp.placa_str, cbgarantia.placa_str),
		chassi_str = Coalesce(importaitaupictmp.chassi_str, cbgarantia.chassi_str)
		Where cbgarantia.id_cbcontrato_int =  cbcontratoitaupic.id_cbcontrato_int
			And cbgarantia.id_cbtiponegocio_int = importaitaupictmp.id_cbtiponegocio
			And cbcontratoitaupic.contrato_str = importaitaupictmp.contrato
			And importaitaupictmp.tipo_registro  = '4' 
			And importaitaupictmp.inclui_altera_garantia = 'A';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12035 (class 0 OID 0)
-- Dependencies: 2019
-- Name: FUNCTION importa_itaupic(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_itaupic(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Itaï¿½Pic';

--
-- TOC entry 2020 (class 1255 OID 27610)
-- Name: importa_mercantil(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_mercantil(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando 			 alias for $1;
empresa_logada alias for $2;
usuario 			 alias for $3;
cliente 			 alias for $4;

cursor_contrato record;
empresa			int4;
int_total   int4;
id_contrato int8;

BEGIN

-- Empresa fixa
empresa :=  2;

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importamercantiltmp Set
	id_fimoeda = 1;

	-- Seta filial do Mercantil
	Update importamercantiltmp Set
	id_cbdistribuidorcliente = NULL;

	-- Seta filial da Paschoalotto
	Update importamercantiltmp Set
	id_gefilial =  1;

        -- Seta tipo de registro
	Update importamercantiltmp Set
	tipo_registro =  1 where tipo_registro is null;

	-- Seta inclui_altera - verificar se realmente o banco sempre ira mandar somente inclusao
	 Update importamercantiltmp Set inclui_altera
	= 'I';

	-- Seta inclui_altera_parcela  - verificar se realmente o banco sempre 	ira mandar somente inclusao
	Update importamercantiltmp Set
	inclui_altera_parcela = 'I';

              -- Insere o tipo de negï¿½cio na coluna das parcelas
               for cursor_contrato in
                   
                   select contrato_codopr_str,  id_cbtiponegocio 
                   from importamercantiltmp
                  where tipo_registro  = '1'

	loop

                   Update importamercantiltmp 
                   Set id_cbtiponegocio = cursor_contrato.id_cbtiponegocio
                    Where contrato_codopr_str = cursor_contrato.contrato_codopr_str
                   and tipo_registro = '2' ;
                 
              end loop;

               -- Verifica na remessa se veio parclas/contrato baixado p/ alertar o usuï¿½rio e uma possï¿½vel alteraï¿½ï¿½o na regra.
               for cursor_contrato in
                   
	   Select Distinct cbcontratomercantil.id_cbcontrato_int, cbcontratomercantil.contrato_str
  	   From cbcontratomercantil 
                   Inner Join importamercantiltmp On (importamercantiltmp.contrato_codopr_str, importamercantiltmp.id_cbtiponegocio) = (cbcontratomercantil.contrato_str,                                   cbcontratomercantil.id_cbtiponegocio_int) 
                   Where cbcontratomercantil.id_cbsituacaocontrato_int = '6'

	loop

          	   Update importamercantiltmp 
                   Set inclui_altera = 'B',
                   inclui_altera_parcela = 'B'
	   Where importamercantiltmp.contrato_codopr_str = cursor_contrato.contrato_str;
                 
              end loop;

	-- Seta data de distribuicao como current_date
	Update importamercantiltmp Set data_distribuicao_dat = current_date;
	--where importamercantiltmp.tipo_registro = '2';

	--Update importamercantiltmp Set contrato_codopr_str =
	--ltrim(contrato_codopr_str, '0');

end if;

-- Contrato
if comando = '1' then

               -- Baixa contrato/parcelas cujo produto seja CRï¿½DITO EM LIQUIDAï¿½ï¿½O. Serï¿½ incluï¿½do novo contrato com uma parcela somando os totais (saldo devedor)
               --

                for cursor_contrato in
                   
--                   select distinct id_cbcontrato_int, contrato_codopr_str, contrato_str, id_cbtiponegocio 
--                   from importamercantiltmp
--                   inner join cbcontratomercantil on importamercantiltmp.contrato_codopr_str = cbcontratomercantil.contrato_str
--                   where importamercantiltmp.id_cbtiponegocio = '78'
--                   and cbcontratomercantil.id_cbsituacaocontrato_int <> '6'                   

                     select distinct contrato_codopr_str, id_cbtiponegocio 
                     from importamercantiltmp where id_cbtiponegocio = '78' 

	loop

              	       int_total:= (Select Count(*) From cbcontratomercantil  Where contrato_str = cursor_contrato.contrato_codopr_str
                       And id_cbtiponegocio_int = '78');

  	      if int_total = 0 then

                         id_contrato = (Select id_cbcontrato_int From cbcontratomercantil  Where contrato_str = cursor_contrato.contrato_codopr_str
                       And id_cbtiponegocio_int <> '78');

                        if id_contrato is not null then 
                   --
       	   -- Log alteraï¿½ï¿½o da parcela 

    	   Insert Into gehistoricousuario
	     (id_geusuario_int,
	     id_gecliente_int,
	     id_geaplicacao_int,
	     data_hora_dat,
	     evento_str,
	     contrato_str,
	     parcela_int,
	     obs_txt)

                   Select
	      1,
	      cliente,
	      339,
	      current_timestamp,
	      'Baixa da parcela - Importaï¿½ï¿½o Mercantil',
	      cursor_contrato.contrato_codopr_str,
	      cbparcela.parcela_int,
	      'Situaï¿½ï¿½o da Parcela alterada para 4.' 

                   from  cbcontratomercantil 
                   inner join cbparcela  on  cbcontratomercantil.id_cbcontrato_int = cbparcela.id_cbcontrato_int
                   where cbcontratomercantil.id_cbcontrato_int = id_contrato;

     	Update cbparcela Set
    	situacao_int = '4',
    	data_pagamento_dat = Null,
 	valor_pago_num = Null,
 	id_geusuario_int = usuario,
	tstamp = current_timestamp
	Where cbparcela.id_cbcontrato_int = id_contrato
                And cbparcela.situacao_int <> '4';
                 

                -- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
                --

	Insert Into gehistoricousuario
	  (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Values(
	  usuario,
	  cliente,
	  339,
	  current_timestamp,
                  'Baixa do Contrato - Importaï¿½ï¿½o Mercantil ' ,
	  cursor_contrato.contrato_codopr_str,
	  'Contrato alterado para B' );

                Update cbcontratomercantil
                Set id_cbsituacaocontrato_int = '6'     
	Where cbcontratomercantil.id_cbcontrato_int = id_contrato;

                Insert Into cbfollowup
     	   (id_cbcontrato_int,
    	   id_cbparcela_int,
    	   data_cobranca_dat,
    	   data_dat,
  	   hora_cobranca_tim,
 	   hora_tim,
  	   coloca_stand_str,
 	   alterado_str,
	    historico_str,
	    id_cbsitcontato_int,
                    id_geusuario_int,
	    tstamp)

	 Values(
	   id_contrato,
	   null,
	   current_date,
	   current_date,
	   current_timestamp,
	   current_timestamp,
	   'N',
                   'N',
    	    'Contrato Baixado em ' || to_char (current_date, 'dd/mm/yyyy') || ' Importaï¿½ï¿½o Mercantil - Contrato - ' || cursor_contrato.contrato_codopr_str,
             	    11077, 
                    1,
	    current_timestamp);                
                                   
                  end if;
                 end if;
              end loop;

	--
	-- Inclusao de Contrato
  	Insert Into cbcontratomercantil

	( id_gecliente_int,
	  id_geempresa_int,
	  id_gefilial_int,
	  id_cbtiponegocio_int,
	  id_cbdistribuidorcliente_int,
	  id_fimoeda_int,

	  contrato_str,
	  nome_str,
	  cpf_str,
	  tipo_pessoa_str,
	  endereco_str,
	  complemento_str,
	  bairro_str,
	  cep_str,
	  cidade_str,
	  estado_str,
	  ddd_str,
	  telefone_str,
	  endereco_trabalho_str,
	  bairro_trabalho_str,
	  cep_trabalho_str,
	  cidade_trabalho_str,
	  estado_trabalho_str,
              complemento_trabalho_str,
	  data_contrato_dat,
	  data_vencimento_dat,
	  numero_total_parcelas_int,
	  valor_montante_num,
	  comissao_perm_num,
	  nome_concessionaria_str,
	  nome_avalista1_str,
	  cpf_avalista1_str,
	  endereco_avalista1_str,
	  complemento_avalista1_str,
	  bairro_avalista1_str,
	  cep_avalista1_str,
	  cidade_avalista1_str,
	  estado_avalista1_str,
	  ddd_avalista1_str,
	  fone_avalista1_str,
	  endereco_avalista2_str,
	  bairro_avalista2_str,
	  cidade_avalista2_str,
	  estado_avalista2_str,
	  cep_avalista2_str,
	  email_str,
	  produto_str,
	  data_primeira_distrib_dat,
	  data_ultima_distrib_dat,
	  id_cbsituacaocontrato_int,
	  valor_contratado_num,
	  valor_operacao_num ,
	  identi_terceirizada_str,
	  numpessoa_int,
	  identi_operacao,
	  sisogm_str,
	  lograc_str,
	  bairrc_str,
	  localc_str,
	  cepc_str,
	  ufc_str,
	  fonec_str,
	  obs_banco_txt,
	  tstamp,
          id_geusuario_int)

	Select

    cliente,
    empresa,
	  id_gefilial,
	  id_cbtiponegocio,
	  id_cbdistribuidorcliente,
	  id_fimoeda,

          contrato_codopr_str,
	  nomdev_str,
	  cpfcgc_str,
	  Case When (Length(cpfcgc_str) <= 11) Then 'F'
	             When (Length(cpfcgc_str) > 11) Then 'J'
	  Else NULL
	  End,

	  numer1_str,
	  compl1_str,
	  bairr1_str,
	  cep1_str,
	  cidad1_str,
	  uf1_str,
	  substr(fone_str,1,4),
	  substr(fone_str,5,8),
	  numer2_str,
	  bairr2_str,
	  cep2_str,
	  cidad2_str,
	  uf2_str,
              compl2_str,
	  dtaini_dat,
	  dtavct_dat,
	  1,
	  saldev_num,
	  vlrtxa_num,
	  nomage_str,
	  avanome_str,
	  avacpfcgc_str,
	  avanumer1_str,
	  avacompl1_str,
	  avabairr1_str,
	  avacep1_str,
	  avacidad1_str,
	  avauf1_str,
	  substr(avafone_str,1,4),
	  substr(avafone_str,5,8),
	  avanumer2_str,
	  avabairr2_str,
	  avacidad2_str,
	  avauf2_str,
	  avacep2_str,
	  mailc_str,
	  nompdt_str,
	  data_distribuicao_dat,
	  data_distribuicao_dat,
	  1,
	  vlrcon_num ,
	  valor_operacao_num,
	  identi_str,
	  numpes_int,
	  idtopr_int,
	  sisogm_str,
	  lograc_str,
	  bairrc_str,
	  localc_str,
	  cepc_str,
	  ufc_str,
	  fonec_str,
	  obs_banco_txt,
	  current_timestamp,
	  usuario

          From importamercantiltmp
	  Where tipo_registro = '1'
	  And inclui_altera = 'I';
End if;

if comando = '2' then
	--
	-- Inclusï¿½o Parcela
        Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratomercantil.id_cbcontrato_int,
	numpcl_int,
	parcdtavct_dat,
	parcsaldev_num,
	Case When (parcdtavct_dat >= current_date) Then 7 Else 0 End,
	'1',

	data_distribuicao_dat,
	data_distribuicao_dat,
	usuario,
	current_timestamp

	From importamercantiltmp
	Inner Join cbcontratomercantil On (cbcontratomercantil.contrato_str, cbcontratomercantil.id_cbtiponegocio_int) = (importamercantiltmp.contrato_codopr_str,  importamercantiltmp.id_cbtiponegocio)
--               	Inner Join cbcontratomercantil On (cbcontratomercantil.contrato_str) = (importamercantiltmp.contrato_codopr_str)
 Where	importamercantiltmp.tipo_registro = '2' And  importamercantiltmp.inclui_altera_parcela = 'I' Order
by importamercantiltmp.contrato_codopr_str, importamercantiltmp.numpcl_int;

	--
	-- Insere na distrib a primeira parcela que veio no arquivo
	--
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   	 data_pre_distrib_dat)

	Select
	cbcontratomercantil.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	data_distribuicao_dat

	From importamercantiltmp Inner Join cbcontratomercantil On
	(cbcontratomercantil.contrato_str, cbcontratomercantil.id_cbtiponegocio_int) = (importamercantiltmp.contrato_codopr_str, importamercantiltmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratomercantil.id_cbcontrato_int
	Where importamercantiltmp.tipo_registro = '2'  And  importamercantiltmp.inclui_altera_parcela = 'I'
                 And importamercantiltmp.numpcl_int = cbparcela.parcela_int
        	And importamercantiltmp.numpcl_int = ( Select numpcl_int from importamercantiltmp
                where (contrato_codopr_str) =  (cbcontratomercantil.contrato_str) order by numpcl_int limit 1 );

	--------

End if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12036 (class 0 OID 0)
-- Dependencies: 2020
-- Name: FUNCTION importa_mercantil(text, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_mercantil(text, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Mercantil';

--
-- TOC entry 2021 (class 1255 OID 27621)
-- Name: importa_pan(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_pan(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;

cursor_contrato record;
dt_geracao date;
int_retiradas int4;
int_total  int4;

BEGIN

--Seta data de distribuiï¿½ï¿½o
dt_geracao:= (Select data_geracao From importapantmp where tipo_registro = '0');

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importapantmp Set
	id_fimoeda = 1
	Where tipo_registro = '1';

	-- Seta filial do PAN
	Update importapantmp Set
	id_cbdistribuidorcliente = NULL
	Where tipo_registro = '1';

	-- Seta filial da Paschoalotto
	Update importapantmp Set
	id_gefilial =  1
	Where tipo_registro = '1';

	-- Seta tipo de negï¿½cio
	Update importapantmp Set
	id_cbtiponegocio = cbprodutocliente.id_cbtiponegocio_int,
	massificado = cbprodutocliente.massificado_str
 	Where cbprodutocliente.id_gecliente_int = cliente
	And Trim(Upper(cbprodutocliente.codigo_produto)) = Trim(Upper(codigo_produto))
	And tipo_registro = '1';

	Update importapantmp Set
	id_cbtiponegocio = 32
 	Where id_cbtiponegocio Is Null
	And tipo_registro = '1';

end if;

-- Contrato
if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratopan
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
	id_cbtiponegocio_int,
	id_cbdistribuidorcliente_int,
	id_fimoeda_int,
	contrato_str,

	nome_str,
	dt_nascimento_dat,
	cidade_nascimento_str,
	uf_nascimento_str,
	nacionalidade_str,
	cpf_str,
	tipo_pessoa_str,
	mae_str,
	rg_str,
	dt_exp_rg_dat,
	org_exp_rg_str,
	uf_rg_str,
	estado_civil_str,
	nome_conjuge_str,
	endereco_str,
	numero_str,
	complemento_str,
	bairro_str,
	cep_str,
	cidade_str,
	estado_str,
	ddd_str,
	telefone_str,
	ramal_str,
	residencia_str,
	local_trabalho_str,
	endereco_trabalho_str,
	numero_trabalho_str,
	complemento_trabalho_str,
	bairro_trabalho_str,
	cep_trabalho_str,
	cidade_trabalho_str,
	estado_trabalho_str,
	ddd_trabalho_str,
	telefone_trabalho_str,
	ramal_trabalho_str,
	modelo_finan_int,
	indexador_str,
	codigo_empresa_str,
	empresa_str,
	data_contrato_dat,
	valor_bem_num,
	valor_financiado_num,
	valor_entrada_num,
	data_vencimento_dat,
	numero_total_parcelas_int,
	valor_montante_num,
	banco_devedor_int,
	agencia_devedor_int,
	conta_devedor_str,
	cheque_devedor_str,
	valor_cheque_str,
	tipo_financiamento_str,
	alinea_str,
	marca_str,
	modelo_str,
	cor_str,
	ano_str,
	ano_modelo_str,
	chassis_str,
	placa_str,
	combustivel_str,
	certificado_str,
	nome_avalista1_str,
	cpf_avalista1_str,
	endereco_avalista1_str,
	numero_avalista1_str,
	complemento_avalista1_str,
	bairro_avalista1_str,
	cep_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	ddd_avalista1_str,
	fone_avalista1_str,
	ramal_avalista1_str,
	nome_ref_avalista1_str,
	ddd_ref_avalista1_str,
	telefone_ref_avalista1_str,
	ramal_ref_avalista1_str,
	nome_loja_str,
	endereco_loja_str,
	numero_loja_str,
	complemento_loja_str,
	bairro_loja_str,
	cep_loja_str,
	cidade_loja_str,
	uf_loja_str,
	ddd_loja_str,
	telefone_loja_str,
	ramal_loja_str,
	data_envio_dat,
	prazo_solucao_dat,
	fase_cobranca_str,
	massificado_str,
	produto_str,
	parcelas_pagas_int,
	parcelas_devidas_int,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,
	contrato,

	nome_cli,
	data_nascimento_cli,
	cidade_natal_cli,
	uf_cidade_natal_cli,
	nacionalidade_cli,
	cpf_cli,
	Case When (Length(cpf_cli) <= 11) Then 'F'
			 When (Length(cpf_cli) > 11) Then 'J'
			 Else NULL
	End,
	mae_cli,
	rg_cli,
	data_rg_cli,
	emissor_rg_cli,
	uf_rg_cli,
	estado_civil_cli,
	conjuge_cli,
	endereco_cli,
	numero_cli,
	complemento_cli,
	bairro_cli,
	cep_cli,
	cidade_cli,
	uf_cli,
	ddd_cli,
	telefone_cli,
	ramal_cli,
	residencia_cli,
	empresa,
	endereco_com_cli,
	numero_com_cli,
	complemento_com_cli,
	bairro_com_cli,
	cep_com_cli,
	cidade_com_cli,
	uf_com_cli,
	ddd_com_cli,
	telefone_com_cli,
	ramal_com_cli,
	modelo_finan,
	indexador,
	codigo_empresa,
	descricao_empresa,
	data_financiamento,
	valor_bem,
	valor_financiado,
	valor_entrada,
	data_vencimento,
	qtde_parcelas_financiadas,
	valor_montante,
	banco_devedor,
	agencia_devedor,
	conta_devedor,
	cheque_devedor,
	valor_cheque,
	tipo_financiamento,
	alinea,
	marca,
	modelo,
	cor,
	ano_fabricacao,
	ano_modelo,
	chassi,
	placa,
	combustivel,
	certificado,
	nome_aval1,
	cpf_aval1,
	endereco_aval1,
	numero_aval1,
	complemento_aval1,
	bairro_aval1,
	cep_aval1,
	cidade_aval1,
	uf_aval1,
	ddd_aval1,
	telefone_aval1,
	ramal_aval1,
	nome_ref_aval1,
	ddd_ref_aval1,
	telefone_ref_aval1,
	ramal_ref_aval1,
	nome_loja,
	endereco_loja,
	numero_loja,
	complemento_loja,
	bairro_loja,
	cep_loja,
	cidade_loja,
	uf_loja,
	ddd_loja,
	telefone_loja,
	ramal_loja,
	data_envio,
	data_retorno,
	fase_cobranca,
	massificado,
	codigo_produto,
	qtde_parcelas_pagas,
	qtde_parcelas_devidas,

	dt_geracao,
	dt_geracao,
	1,
	current_timestamp,
	usuario

	From importapantmp
	Where tipo_registro = '1'
	And inclui_altera = 'I';

	-- Alteracao de Contrato
	Update cbcontratopan Set

	nome_str = importapantmp.nome_cli,
	dt_nascimento_dat	=	 importapantmp.data_nascimento_cli,
	cidade_nascimento_str	=	importapantmp.cidade_natal_cli,
	uf_nascimento_str	=	importapantmp.uf_cidade_natal_cli,
	nacionalidade_str	=	importapantmp.nacionalidade_cli,
	cpf_str	=	importapantmp.cpf_cli,
	mae_str	=	importapantmp.mae_cli,
	rg_str	=	importapantmp.rg_cli,
	dt_exp_rg_dat	=	importapantmp.data_rg_cli,
	org_exp_rg_str = importapantmp.emissor_rg_cli,
	uf_rg_str	=	importapantmp.uf_rg_cli,
	estado_civil_str	=	importapantmp.estado_civil_cli,
	nome_conjuge_str	=	importapantmp.conjuge_cli,
	endereco_str	=	importapantmp.endereco_cli,
	numero_str	=	importapantmp.numero_cli,
	complemento_str	=	importapantmp.complemento_cli,
	bairro_str	=	importapantmp.bairro_cli,
	cep_str	=	importapantmp.cep_cli,
	cidade_str =	importapantmp.cidade_cli,
	estado_str =	importapantmp.uf_cli,
	ddd_str	=	importapantmp.ddd_cli,
	telefone_str	=	importapantmp.telefone_cli,
	ramal_str	=	importapantmp.ramal_cli,
	residencia_str	=	importapantmp.residencia_cli,
	local_trabalho_str	=	 importapantmp.empresa,
	endereco_trabalho_str	=	 importapantmp.endereco_com_cli,
	numero_trabalho_str	=	 importapantmp.numero_com_cli,
	complemento_trabalho_str	=	 importapantmp.complemento_com_cli,
	bairro_trabalho_str	=	 importapantmp.bairro_com_cli,
	cep_trabalho_str	=	 importapantmp.cep_com_cli,
	cidade_trabalho_str	=	 importapantmp.cidade_com_cli	,
	estado_trabalho_str	=	 importapantmp.uf_com_cli,
	ddd_trabalho_str	=	 importapantmp.ddd_com_cli,
	telefone_trabalho_str	=	importapantmp.telefone_com_cli,
	ramal_trabalho_str	=	 importapantmp.ramal_com_cli,
	modelo_finan_int	=	 importapantmp.modelo_finan,
	indexador_str	=	 importapantmp.indexador,
	codigo_empresa_str	=	 importapantmp.codigo_empresa,
	empresa_str	=	 importapantmp.descricao_empresa,
	data_contrato_dat =	 importapantmp.data_financiamento,
	valor_bem_num	=	 importapantmp.valor_bem,
	valor_financiado_num	=	 importapantmp.valor_financiado,
	valor_entrada_num	=	 importapantmp.valor_entrada,
	data_vencimento_dat	=	importapantmp.data_vencimento,
	numero_total_parcelas_int	=	importapantmp.qtde_parcelas_financiadas,
	valor_montante_num	=	importapantmp.valor_montante,
	banco_devedor_int	=	 importapantmp.banco_devedor,
	agencia_devedor_int	=	importapantmp.agencia_devedor,
	conta_devedor_str	=	importapantmp.conta_devedor,
	cheque_devedor_str = importapantmp.cheque_devedor,
	valor_cheque_str	=	importapantmp.valor_cheque,
	tipo_financiamento_str = importapantmp.tipo_financiamento,
	alinea_str = importapantmp.alinea,
	marca_str	=	 importapantmp.marca,
	modelo_str =  importapantmp.modelo,
	cor_str	=	 importapantmp.cor,
	ano_str	=	 importapantmp.ano_fabricacao,
	ano_modelo_str =  importapantmp.ano_modelo,
	chassis_str	=	 importapantmp.chassi,
	placa_str	=	 importapantmp.placa,
	combustivel_str	=	importapantmp.combustivel,
	certificado_str	=	importapantmp.certificado,
	nome_avalista1_str	=	 importapantmp.nome_aval1,
	cpf_avalista1_str	=	 importapantmp.cpf_aval1,
	endereco_avalista1_str	=	 importapantmp.endereco_aval1,
	numero_avalista1_str	=	 importapantmp.numero_aval1,
	complemento_avalista1_str	=	importapantmp.complemento_aval1,
	bairro_avalista1_str	=	 importapantmp.bairro_aval1,
	cep_avalista1_str	=	 importapantmp.cep_aval1,
	cidade_avalista1_str =	importapantmp.cidade_aval1,
	estado_avalista1_str =	importapantmp.uf_aval1,
	ddd_avalista1_str	=	 importapantmp.ddd_aval1,
	fone_avalista1_str	=	importapantmp.telefone_aval1,
	ramal_avalista1_str	=	importapantmp.ramal_aval1,
	nome_ref_avalista1_str = importapantmp.nome_ref_aval1,
	ddd_ref_avalista1_str	=	 importapantmp.ddd_ref_aval1,
	telefone_ref_avalista1_str = importapantmp.telefone_ref_aval1,
	ramal_ref_avalista1_str	=	importapantmp.ramal_ref_aval1,
	nome_loja_str =	importapantmp.nome_loja,
	endereco_loja_str = importapantmp.endereco_loja,
	numero_loja_str	=	importapantmp.numero_loja,
	complemento_loja_str = importapantmp.complemento_loja	,
	bairro_loja_str	=	importapantmp.bairro_loja,
	cep_loja_str	=	importapantmp.cep_loja,
	cidade_loja_str	=	importapantmp.cidade_loja,
	uf_loja_str	=	importapantmp.uf_loja,
	ddd_loja_str = importapantmp.ddd_loja,
	telefone_loja_str	=	importapantmp.telefone_loja,
	ramal_loja_str	=	importapantmp.ramal_loja,
	data_envio_dat	=	 importapantmp.data_envio,
	prazo_solucao_dat	=	importapantmp.data_retorno,
	fase_cobranca_str	=	importapantmp.fase_cobranca,
	parcelas_pagas_int = importapantmp.qtde_parcelas_pagas,
	parcelas_devidas_int = importapantmp.qtde_parcelas_devidas,

	data_ultima_distrib_dat = dt_geracao,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where contrato_str = importapantmp.contrato
	And id_cbtiponegocio_int = importapantmp.id_cbtiponegocio
	And id_gecliente_int = cliente
	And id_geempresa_int = empresa
	And id_gefilial_int = importapantmp.id_gefilial
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera = 'A';

	-- Log alteraï¿½ï¿½o do contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		255,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratopan.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratopan.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where cbcontratopan.id_gecliente_int = cliente
	And cbcontratopan.id_geempresa_int = empresa
	And cbcontratopan.id_gefilial_int = importapantmp.id_gefilial
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera = 'A';

	--Inclusï¿½o Parcela
	-- Abertura de Contrato Baixado
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratopan.id_cbcontrato_int,
	num_parcela,
	data_vencimento,
	valor_parcela,
	Case When (data_vencimento < current_date) Then 0
			 Else 7
	End,
	'1',

	dt_geracao,
	dt_geracao,
	usuario,
	current_timestamp

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Where importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'I'
	Order by importapantmp.contrato, importapantmp.num_parcela;

	-- Distr8buiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratopan.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dt_geracao

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratopan.id_cbcontrato_int
	Where importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'I'
	And importapantmp.num_parcela = cbparcela.parcela_int;

	-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		255,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratopan.contrato_str,
	  'Inclusï¿½o de Parcela. Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Where cbcontratopan.id_cbsituacaocontrato_int = 6
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'I'
	Group By cbcontratopan.contrato_str;

	--Situacao do contrato
	Update cbcontratopan Set
	id_cbsituacaocontrato_int = 1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbcontratopan.contrato_str = importapantmp.contrato
	And cbcontratopan.id_cbtiponegocio_int = importapantmp.id_cbtiponegocio
	And cbcontratopan.id_cbsituacaocontrato_int = 6
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'I';

	--Alteraï¿½ï¿½o Parcela
	-- Parcelas sï¿½o abertas, exceto pagas(4) e com boletos(1) e a vencer
	-- Abertura de Contrato Baixado para parcelas redirecionadas nï¿½o pagas
	-- Alteraï¿½ï¿½o da distribuiï¿½ï¿½o de parcelas, exceto pagas(4)

	--Log Distribuiï¿½ï¿½o da parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	255,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratopan.contrato_str,
	importapantmp.num_parcela,
	'Distribuiï¿½ï¿½o da parcela alterada. Distribuiï¿½ï¿½o anterior ' || to_char(cbdistribparcela.data_pre_distrib_dat, 'dd/mm/yyyy')

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratopan.id_cbcontrato_int
	Inner Join cbdistribparcela On (cbdistribparcela.id_cbcontrato_int, cbdistribparcela.id_cbparcela_int) = (cbparcela.id_cbcontrato_int, cbparcela.id_cbparcela_int)

	Where cbparcela.parcela_int = importapantmp.num_parcela
	And cbparcela.situacao_int <> '4' 
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'A';

	-- Alteraï¿½ï¿½o distrubuiï¿½ï¿½o parcela
	Update cbdistribparcela Set 
  data_pre_distrib_dat = dt_geracao

	Where cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int
	And cbparcela.parcela_int = importapantmp.num_parcela
	And cbparcela.situacao_int <> '4' 
	And cbparcela.id_cbcontrato_int = cbcontratopan.id_cbcontrato_int
	And cbcontratopan.contrato_str = importapantmp.contrato
	And cbcontratopan.id_cbtiponegocio_int = importapantmp.id_cbtiponegocio
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'A';

	--Log alteraï¿½ï¿½o dados parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	255,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratopan.contrato_str,
	importapantmp.num_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratopan.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importapantmp.num_parcela
	And cbparcela.situacao_int <> '4'
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'A';

	-- Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	data_vencimento_dat = importapantmp.data_vencimento,
	valor_principal_num = importapantmp.valor_parcela,
	situacao_int = Case When (  cbparcela.situacao_int = '1' Or 
													   (cbparcela.situacao_int = '7' And cbparcela.data_vencimento_dat >= current_date) ) Then cbparcela.situacao_int
											Else 0
								 End,
	data_ultima_distrib_dat = dt_geracao,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importapantmp.num_parcela
	And cbparcela.situacao_int <> '4'
	And cbparcela.id_cbcontrato_int =  cbcontratopan.id_cbcontrato_int
	And cbcontratopan.contrato_str = importapantmp.contrato
	And cbcontratopan.id_cbtiponegocio_int = importapantmp.id_cbtiponegocio
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'A';

	-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		255,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratopan.contrato_str,
	  'Redirecionamento de parcela. Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importapantmp Inner Join cbcontratopan On
	(cbcontratopan.contrato_str, cbcontratopan.id_cbtiponegocio_int) = (importapantmp.contrato, importapantmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratopan.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	Where cbparcela.parcela_int = importapantmp.num_parcela
	And cbparcela.situacao_int Not In ('4', '7')
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'A'
	And cbcontratopan.id_cbsituacaocontrato_int = 6
	Group By cbcontratopan.contrato_str;

	--Situacao do contrato
	Update cbcontratopan Set
	id_cbsituacaocontrato_int =  1,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where contrato_str = importapantmp.contrato
	And id_cbtiponegocio_int = importapantmp.id_cbtiponegocio
	And cbcontratopan.id_cbsituacaocontrato_int = 6
	And cbcontratopan.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	And cbparcela.parcela_int = importapantmp.num_parcela
	And cbparcela.situacao_int Not In ('4', '7')
	And importapantmp.tipo_registro = '1'
	And importapantmp.inclui_altera_parcela = 'A';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12037 (class 0 OID 0)
-- Dependencies: 2021
-- Name: FUNCTION importa_pan(text, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_pan(text, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Pan';

--
-- TOC entry 2022 (class 1255 OID 27632)
-- Name: importa_panam(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_panam(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;
arquivo alias for $5;

cursor_contrato record;
int_idveic int4;
int_idmassif int4;
int_idterceira int4;
int_idsegunda int4;

int_stdby int4;
int_aberto int4;

int_pagas int4;
int_todas int4;

BEGIN

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importapanamtmp Set id_fimoeda = 1
	 Where tipo_registro = '1' Or tipo_registro = '3' ;

	-- Seta distribuidorcliente (regional recebe id_cbdistribuidorcliente_int)
	Update importapanamtmp Set id_cbdistribuidorcliente = importapanamtmp.regional
   Where tipo_registro = '1' or tipo_registro = '3';

	-- Seta tipo de negï¿½cio e se ï¿½ massificado
	Update importapanamtmp Set

						id_cbtiponegocio = cbprodutocliente.id_cbtiponegocio_int,
	          massificado = cbprodutocliente.massificado_str,
						cod_fase_cobranca = cbprodutocliente.massificado_str || cod_fase_cobranca
  Where
		cbprodutocliente.id_gecliente_int = cliente And
		Trim(Upper(cbprodutocliente.codigo_produto)) = Trim(Upper(codigo_produto)) And
		(tipo_registro = '1' Or tipo_registro = '3') and
		substr(cod_fase_cobranca,1,1) <> 'M' and substr(cod_fase_cobranca,1,1) <> 'V';
	--Esta ultima condiï¿½ï¿½o do update ï¿½ necessï¿½ria para nï¿½o termos problemas com o reprocessamento da
	--funï¿½ï¿½o. Quando os registros jï¿½ possuem o M ou V no comeï¿½o do cï¿½digo da fase ï¿½ porque esse update
	--jï¿½ foi realizado.

	-- Seta Etapas (Os cï¿½digos 392 e 201 sï¿½o de batimento,por isto estï¿½o excluï¿½dos do processo)
	Update importapanamtmp Set

				id_cbetapa = (select id_cbetapa_int from cbetapa where codigo_str = importapanamtmp.cod_fase_cobranca and id_gecliente_int = cliente),
				etapa_nova = 'N'

  Where
		(tipo_registro = '1' Or tipo_registro = '3') and
		(cod_fase_cobranca <> 'M392' and
		 cod_fase_cobranca <> 'M201' and
		 cod_fase_cobranca <> 'V392' and
		 cod_fase_cobranca <> 'V201' );

	--Marca o registro que possui uma nova etapa
	Update importapanamtmp Set

				etapa_nova = 'S'

  Where
		(tipo_registro = '1' Or tipo_registro = '3') and
		id_cbetapa is null and
		(cod_fase_cobranca <> 'M392' and
		 cod_fase_cobranca <> 'M201' and
		 cod_fase_cobranca <> 'V392' and
		 cod_fase_cobranca <> 'V201' );

	-- Inserir Novas etapa do processo de importacao
	insert into cbetapa
					 (id_gecliente_int,codigo_str,descricao_str,id_geusuario_int,tstamp)
		(select distinct cliente,
		        cod_fase_cobranca, substr(fase_cobranca,4,length(fase_cobranca)) ,
					  usuario,current_timestamp
		 from importapanamtmp
		 where
		  (tipo_registro = '1' Or tipo_registro = '3') and
		  (etapa_nova = 'S') and
			(cod_fase_cobranca <> 'M392' and
		   cod_fase_cobranca <> 'M201' and
		   cod_fase_cobranca <> 'V392' and
		   cod_fase_cobranca <> 'V201' )
		);

	--Atualiza a tabela com as novas etapas
	Update importapanamtmp Set

				id_cbetapa = (select id_cbetapa_int from cbetapa where codigo_str = importapanamtmp.cod_fase_cobranca and id_gecliente_int = cliente)

  Where
		(tipo_registro = '1' Or tipo_registro = '3') and
		(cod_fase_cobranca <> 'M392' and
		 cod_fase_cobranca <> 'M201' and
		 cod_fase_cobranca <> 'V392' and
		 cod_fase_cobranca <> 'V201' );

	--Atuaila a tabela temporï¿½ria com a etapa atual do contrato, serï¿½ usado
	--para identificar mudanï¿½as de fases. Joga tambï¿½m a etapa atual do contrato
	--para a temporaria quando ï¿½ nulo, isso ocorrera quando vierem fases de batimento.
	Update importapanamtmp Set

				id_cbetapa_ant_int = cbcontratopanam.id_cbetapa_int,
				id_cbetapa = (case when id_cbetapa is null then cbcontratopanam.id_cbetapa_int else id_cbetapa end)

	Where
		(tipo_registro = '1' Or tipo_registro = '3') and
	  cbcontratopanam.contrato_str = importapanamtmp.contrato and
	  cbcontratopanam.id_cbtiponegocio_int = importapanamtmp.id_cbtiponegocio;

End if;

-- Contrato
if comando = '1' then
	--
	-- Inclusao de Contrato
  --

	Insert Into cbcontratopanam
  (id_gecliente_int,
  id_geempresa_int,
  id_gefilial_int,
  id_cbtiponegocio_int,
  id_cbdistribuidorcliente_int,
  id_fimoeda_int,
	id_cbetapa_int,

  contrato_str,
  nome_str,
  dt_nascimento_dat,
  cidade_nascimento_str,
  uf_nascimento_str,
  nacionalidade_str,
  cpf_str,
  tipo_pessoa_str,
  mae_str,
  rg_str,
  dt_exp_rg_dat,
  org_exp_rg_str,
  uf_rg_str,
  estado_civil_str,
  nome_conjuge_str,
  endereco_str,
  numero_str,
  complemento_str,
  bairro_str,
  cep_str,
  cidade_str,
  estado_str,
  ddd_str,
  telefone_str,
  ramal_str,
  residencia_str,
  local_trabalho_str,
  endereco_trabalho_str,
  numero_trabalho_str,
  complemento_trabalho_str,
  bairro_trabalho_str,
  cep_trabalho_str,
  cidade_trabalho_str,
  estado_trabalho_str,
  ddd_trabalho_str,
  telefone_trabalho_str,
  ramal_trabalho_str,
  modelo_finan_int,
  indexador_str,
  codigo_empresa_str,
  empresa_str,
  data_contrato_dat,
  valor_bem_num,
  valor_financiado_num,
  valor_entrada_num,
  data_vencimento_dat,
  numero_total_parcelas_int,
  valor_montante_num,
  banco_devedor_int,
  agencia_devedor_int,
	conta_devedor_str,
	cheque_devedor_str,
	valor_cheque_str,
	tipo_financiamento_str,
	alinea_str,
	marca_str,
	modelo_str,
	cor_str,
	ano_str,
	ano_modelo_str,
	chassis_str,
	placa_str,
	combustivel_str,
	certificado_str,
	nome_avalista1_str,
	cpf_avalista1_str,
	endereco_avalista1_str,
	numero_avalista1_str,
	complemento_avalista1_str,
	bairro_avalista1_str,
	cep_avalista1_str,
	cidade_avalista1_str,
	estado_avalista1_str,
	ddd_avalista1_str,
	fone_avalista1_str,
	ramal_avalista1_str,
	nome_ref_avalista1_str,
	ddd_ref_avalista1_str,
	telefone_ref_avalista1_str,
	ramal_ref_avalista1_str,
	nome_loja_str,
	endereco_loja_str,
	numero_loja_str,
	complemento_loja_str,
	bairro_loja_str,
	cep_loja_str,
	cidade_loja_str,
	uf_loja_str,
	ddd_loja_str,
	telefone_loja_str,
	ramal_loja_str,
	prazo_solucao_dat,
	fase_cobranca_str,
	massificado_str,
	produto_str,
	parcelas_pagas_int,
	parcelas_devidas_int,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,
	tstamp,
	id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,
	id_cbetapa,

	contrato,

	nome_cli,
	data_nascimento_cli,
	cidade_natal_cli,
	uf_cidade_natal_cli,
	nacionalidade_cli,
	cpf_cli,
	Case When (Length(cpf_cli) <= 11) Then 'F'
			 When (Length(cpf_cli) > 11) Then 'J'
			 Else NULL
	End,
	mae_cli,
	rg_cli,
	data_rg_cli,
	emissor_rg_cli,
	uf_rg_cli,
	estado_civil_cli,
	conjuge_cli,
	endereco_cli,
	numero_cli,
	complemento_cli,
	bairro_cli,
	cep_cli,
	cidade_cli,
	uf_cli,
	ddd_cli,
	telefone_cli,
	ramal_cli,
	residencia_cli,
	empresa,
	endereco_com_cli,
	numero_com_cli,
	complemento_com_cli,
	bairro_com_cli,
	cep_com_cli,
	cidade_com_cli,
	uf_com_cli,
	ddd_com_cli,
	telefone_com_cli,
	ramal_com_cli,
	modelo_finan,
	indexador,
	codigo_empresa,
	descricao_empresa,
	data_financiamento,
	valor_bem,
	valor_financiado,
	valor_entrada,
	data_vencimento,
	qtde_parcelas_financiadas,
	valor_montante,
	banco_devedor,
	agencia_devedor,
	conta_devedor,
	cheque_devedor,
	valor_cheque,
	tipo_financiamento,
	alinea,
	marca,
	modelo,
	cor,
	ano_fabricacao,
	ano_modelo,
	chassi,
	placa,
	combustivel,
	certificado,
	nome_aval1,
	cpf_aval1,
	endereco_aval1,
	numero_aval1,
	complemento_aval1,
	bairro_aval1,
	cep_aval1,
	cidade_aval1,
	uf_aval1,
	ddd_aval1,
	telefone_aval1,
	ramal_aval1,
	nome_ref_aval1,
	ddd_ref_aval1,
	telefone_ref_aval1,
	ramal_ref_aval1,
	nome_loja,
	endereco_loja,
	numero_loja,
	complemento_loja,
	bairro_loja,
	cep_loja,
	cidade_loja,
	uf_loja,
	ddd_loja,
	telefone_loja,
	ramal_loja,
	data_retorno,
	fase_cobranca,
	massificado,
	codigo_produto,
	qtde_parcelas_pagas,
	qtde_parcelas_devidas,

	data_envio,
	data_envio,
	1,
	current_timestamp,
	usuario

	From importapanamtmp
	Where tipo_registro = '1'
	And inclui_altera = 'I';

	--
	-- Alteracao de Contrato, filtrando por empresa, cliente, filial e tipo de negocio
	--

	Update cbcontratopanam Set

	nome_str = importapanamtmp.nome_cli,
	dt_nascimento_dat	=	 importapanamtmp.data_nascimento_cli,
	cidade_nascimento_str	=	importapanamtmp.cidade_natal_cli,
	uf_nascimento_str	=	importapanamtmp.uf_cidade_natal_cli,
	nacionalidade_str	=	importapanamtmp.nacionalidade_cli,
	cpf_str	=	importapanamtmp.cpf_cli,
	mae_str	=	importapanamtmp.mae_cli,
	rg_str	=	importapanamtmp.rg_cli,
	dt_exp_rg_dat	=	importapanamtmp.data_rg_cli,
	org_exp_rg_str = importapanamtmp.emissor_rg_cli,
	uf_rg_str	=	importapanamtmp.uf_rg_cli,
	estado_civil_str	=	importapanamtmp.estado_civil_cli,
	nome_conjuge_str	=	importapanamtmp.conjuge_cli,
	endereco_str	=	importapanamtmp.endereco_cli,
	numero_str	=	importapanamtmp.numero_cli,
	complemento_str	=	importapanamtmp.complemento_cli,
	bairro_str	=	importapanamtmp.bairro_cli,
	cep_str	=	importapanamtmp.cep_cli,
	cidade_str =	importapanamtmp.cidade_cli,
	estado_str =	importapanamtmp.uf_cli,
	ddd_str	=	importapanamtmp.ddd_cli,
	telefone_str	=	importapanamtmp.telefone_cli,
	ramal_str	=	importapanamtmp.ramal_cli,
	residencia_str	=	importapanamtmp.residencia_cli,
	local_trabalho_str	=	 importapanamtmp.empresa,
	endereco_trabalho_str	=	 importapanamtmp.endereco_com_cli,
	numero_trabalho_str	=	 importapanamtmp.numero_com_cli,
	complemento_trabalho_str	=	 importapanamtmp.complemento_com_cli,
	bairro_trabalho_str	=	 importapanamtmp.bairro_com_cli,
	cep_trabalho_str	=	 importapanamtmp.cep_com_cli,
	cidade_trabalho_str	=	 importapanamtmp.cidade_com_cli	,
	estado_trabalho_str	=	 importapanamtmp.uf_com_cli,
	ddd_trabalho_str	=	 importapanamtmp.ddd_com_cli,
	telefone_trabalho_str	=	importapanamtmp.telefone_com_cli,
	ramal_trabalho_str	=	 importapanamtmp.ramal_com_cli,
	modelo_finan_int	=	 importapanamtmp.modelo_finan,
	indexador_str	=	 importapanamtmp.indexador,
	codigo_empresa_str	=	 importapanamtmp.codigo_empresa,
	empresa_str	=	 importapanamtmp.descricao_empresa,
	data_contrato_dat =	 importapanamtmp.data_financiamento,
	valor_bem_num	=	 importapanamtmp.valor_bem,
	valor_financiado_num	=	 importapanamtmp.valor_financiado,
	valor_entrada_num	=	 importapanamtmp.valor_entrada,
	data_vencimento_dat	=	importapanamtmp.data_vencimento,
	numero_total_parcelas_int	=	importapanamtmp.qtde_parcelas_financiadas,
	valor_montante_num	=	importapanamtmp.valor_montante,
	banco_devedor_int	=	 importapanamtmp.banco_devedor,
	agencia_devedor_int	=	importapanamtmp.agencia_devedor,
	conta_devedor_str	=	importapanamtmp.conta_devedor,
	cheque_devedor_str = importapanamtmp.cheque_devedor,
	valor_cheque_str	=	importapanamtmp.valor_cheque,
	tipo_financiamento_str = importapanamtmp.tipo_financiamento,
	alinea_str = importapanamtmp.alinea,
	marca_str	=	 importapanamtmp.marca,
	modelo_str =  importapanamtmp.modelo,
	cor_str	=	 importapanamtmp.cor,
	ano_str	=	 importapanamtmp.ano_fabricacao,
	ano_modelo_str =  importapanamtmp.ano_modelo,
	chassis_str	=	 importapanamtmp.chassi,
	placa_str	=	 importapanamtmp.placa,
	combustivel_str	=	importapanamtmp.combustivel,
	certificado_str	=	importapanamtmp.certificado,
	nome_avalista1_str	=	 importapanamtmp.nome_aval1,
	cpf_avalista1_str	=	 importapanamtmp.cpf_aval1,
	endereco_avalista1_str	=	 importapanamtmp.endereco_aval1,
	numero_avalista1_str	=	 importapanamtmp.numero_aval1,
	complemento_avalista1_str	=	importapanamtmp.complemento_aval1,
	bairro_avalista1_str	=	 importapanamtmp.bairro_aval1,
	cep_avalista1_str	=	 importapanamtmp.cep_aval1,
	cidade_avalista1_str =	importapanamtmp.cidade_aval1,
	estado_avalista1_str =	importapanamtmp.uf_aval1,
	ddd_avalista1_str	=	 importapanamtmp.ddd_aval1,
	fone_avalista1_str	=	importapanamtmp.telefone_aval1,
	ramal_avalista1_str	=	importapanamtmp.ramal_aval1,
	nome_ref_avalista1_str = importapanamtmp.nome_ref_aval1,
	ddd_ref_avalista1_str	=	 importapanamtmp.ddd_ref_aval1,
	telefone_ref_avalista1_str = importapanamtmp.telefone_ref_aval1,
	ramal_ref_avalista1_str	=	importapanamtmp.ramal_ref_aval1,
	nome_loja_str =	importapanamtmp.nome_loja,
	endereco_loja_str = importapanamtmp.endereco_loja,
	numero_loja_str	=	importapanamtmp.numero_loja,
	complemento_loja_str = importapanamtmp.complemento_loja	,
	bairro_loja_str	=	importapanamtmp.bairro_loja,
	cep_loja_str	=	importapanamtmp.cep_loja,
	cidade_loja_str	=	importapanamtmp.cidade_loja,
	uf_loja_str	=	importapanamtmp.uf_loja,
	ddd_loja_str = importapanamtmp.ddd_loja,
	telefone_loja_str	=	importapanamtmp.telefone_loja,
	ramal_loja_str	=	importapanamtmp.ramal_loja,
	prazo_solucao_dat	=	importapanamtmp.data_retorno,

	id_cbetapa_int = importapanamtmp.id_cbetapa,
	fase_cobranca_str	=	importapanamtmp.fase_cobranca,

	parcelas_pagas_int = importapanamtmp.qtde_parcelas_pagas,
	parcelas_devidas_int = importapanamtmp.qtde_parcelas_devidas,
	produto_str = importapanamtmp.codigo_produto,
	data_primeira_distrib_dat = importapanamtmp.data_envio,
	data_ultima_distrib_dat = importapanamtmp.data_envio,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where contrato_str = importapanamtmp.contrato
	And id_cbtiponegocio_int = importapanamtmp.id_cbtiponegocio
	And id_gecliente_int = cliente
	And id_geempresa_int = empresa
	And importapanamtmp.tipo_registro = '1'
	And importapanamtmp.inclui_altera = 'A';

	--
	-- Inclui Log de alteraï¿½ï¿½o do contrato
	--
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		308,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratopanam.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importapanamtmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importapanamtmp.contrato, importapanamtmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratopanam.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where cbcontratopanam.id_gecliente_int = cliente
	And cbcontratopanam.id_geempresa_int = empresa
	And cbcontratopanam.id_gefilial_int = importapanamtmp.id_gefilial
	And importapanamtmp.tipo_registro = '1'
	And importapanamtmp.inclui_altera = 'A';

	--
	-- 12/08/05 Inclui Log de alteraï¿½ï¿½o de etapa
	--
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
				usuario,
				cliente,
				308,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
				contrato,
				'Etapa do Contrato foi alterada : - Etapa anterior: ' ||
	       		              (select cbetapa.codigo_str || ' - '|| cbetapa.descricao_str
						  						 from cbetapa
				 			  					 where cbetapa.id_cbetapa_int = importapanamtmp.id_cbetapa_ant_int) ||
											' Etapa Nova : ' ||
	                     		(select cbetapa.codigo_str || ' - '|| cbetapa.descricao_str
				 									from cbetapa
				 									where cbetapa.id_cbetapa_int = importapanamtmp.id_cbetapa)

	From importapanamtmp
	Where
	  importapanamtmp.tipo_registro = '1' and
	  importapanamtmp.inclui_altera = 'A' and
	  importapanamtmp.id_cbetapa <> importapanamtmp.id_cbetapa_ant_int;

	--
	-- Inclusï¿½o Parcela
	--
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratopanam.id_cbcontrato_int,
	num_parcela,
	data_vencimento,
	valor_parcela,
	Case When (data_vencimento <= current_date - 15 ) Then 0 Else 7	End,
	'1',

	data_envio,
	data_envio,
	usuario,
	current_timestamp

	From importapanamtmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importapanamtmp.contrato, importapanamtmp.id_cbtiponegocio)
	Where importapanamtmp.tipo_registro = '1'
  	And importapanamtmp.inclui_altera_parcela = 'I'
	Order by importapanamtmp.contrato, importapanamtmp.num_parcela;

-- 31/03/2007 Mikael -> Comentei porque a atualizaï¿½ï¿½o dava problemas de duplicaï¿½ï¿½o, coloquei a rotina sequencial no cï¿½digo
/*	--
	-- OS: 18197 -> Atualiza a data de distribuiï¿½ï¿½o das parcelas que foram cadastradas manualmente
	-- O campo cbparcela.data_entrada_ca_dat grava a distribuiï¿½ï¿½o original no momento do cadastro
		update cbdistribparcela
 				set data_pre_distrib_dat = importapanamtmp.data_envio

	where
	cbcontratopanam.contrato_str = importapanamtmp.contrato and
	cbcontratopanam.id_cbtiponegocio_int = importapanamtmp.id_cbtiponegocio and
	cbparcela.id_cbcontrato_int = cbcontratopanam.id_cbcontrato_int and
	cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int and
	importapanamtmp.tipo_registro = '1' and
	importapanamtmp.num_parcela = cbparcela.parcela_int and
	cbparcela.manual_str = 'S' and
	importapanamtmp.num_parcela = ( Select num_parcela from importapanamtmp
 		                             where (contrato, id_cbtiponegocio) = (cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int)
 		                             order by num_parcela limit 1 );

	--
	-- OS: 18197 -> Atualiza a data de distribuiï¿½ï¿½o das parcelas que foram cadastradas manualmente
	-- O campo cbparcela.data_performance_dat grava a distribuiï¿½ï¿½o original no momento do cadastro
	update cbparcela
 				set data_primeira_distrib_dat = importapanamtmp.data_envio,
 					  data_ultima_distrib_dat   = importapanamtmp.data_envio

	where
	cbcontratopanam.contrato_str = importapanamtmp.contrato and
	cbcontratopanam.id_cbtiponegocio_int = importapanamtmp.id_cbtiponegocio and
	cbparcela.id_cbcontrato_int = cbcontratopanam.id_cbcontrato_int and
	importapanamtmp.tipo_registro = '1' and
	importapanamtmp.num_parcela = cbparcela.parcela_int and
	cbparcela.manual_str = 'S' and
	importapanamtmp.num_parcela = ( Select num_parcela from importapanamtmp
 		                             where (contrato, id_cbtiponegocio) = (cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int)
 		                             order by num_parcela limit 1 );

*/

	--
	-- Insere na distrib a primeira parcela que veio no arquivo
	-- OS: 18197 -> Inlcusï¿½o da etapa na cbdistribparcela para acompanhar as mudanï¿½as de fase
	-- OS: 18197 -> Teste para incluir nova distribuiï¿½ï¿½o somente para os casos que nï¿½o possuem parcela manual jï¿½ cadastrada
	--              Os contratos que jï¿½ tiverem parcelas manuais tiveram a data atualizaï¿½ï¿½o no update acima
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat,
	 id_cbetapa_int)

	Select
	cbcontratopanam.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	data_envio,
	cbcontratopanam.id_cbetapa_int

	From importapanamtmp
	Inner Join cbcontratopanam On (cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importapanamtmp.contrato, importapanamtmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratopanam.id_cbcontrato_int
	Where importapanamtmp.tipo_registro = '1'
	  And importapanamtmp.num_parcela = cbparcela.parcela_int
		And (cbparcela.manual_str is null or cbparcela.manual_str = '')
		And importapanamtmp.num_parcela = ( Select num_parcela from importapanamtmp
                                         where (contrato, id_cbtiponegocio) = (cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int)
                                         order by num_parcela limit 1 );

	--
	-- Log alteraï¿½ï¿½o dados parcela
  --
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	308,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratopanam.contrato_str,
	importapanamtmp.num_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importapanamtmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importapanamtmp.contrato, importapanamtmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratopanam.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importapanamtmp.num_parcela
	And cbparcela.situacao_int <> '4'
	And importapanamtmp.tipo_registro = '1'
	And importapanamtmp.inclui_altera_parcela = 'A';

	--
	-- Alteraï¿½ï¿½o Parcela
	--
	Update cbparcela Set
	data_vencimento_dat = importapanamtmp.data_vencimento,
	valor_principal_num = importapanamtmp.valor_parcela,
	situacao_int = Case When ( cbparcela.situacao_int = '1' Or
													   ( cbparcela.situacao_int = '7' And cbparcela.data_vencimento_dat > current_date - 15 ) ) Then
										  cbparcela.situacao_int
								 Else
								    Case When ( cbparcela.data_vencimento_dat > current_date - 15 and
										            ( valor_pago_num = '0' or  valor_pago_num is null ) ) Then 7  Else 0  End
								 End,
	data_primeira_distrib_dat = importapanamtmp.data_envio,
	data_ultima_distrib_dat = importapanamtmp.data_envio,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importapanamtmp.num_parcela
  	And ( cbparcela.situacao_int <> '4' or
		      ( cbparcela.situacao_int = '4' and ( cbparcela.valor_pago_num = '0' or cbparcela.valor_pago_num is null ) ) )
	  And cbparcela.id_cbcontrato_int =  cbcontratopanam.id_cbcontrato_int
	  And cbcontratopanam.contrato_str = importapanamtmp.contrato
	  And cbcontratopanam.id_cbtiponegocio_int = importapanamtmp.id_cbtiponegocio
	  And importapanamtmp.tipo_registro = '1'
	  And importapanamtmp.inclui_altera_parcela = 'A';

	--
 	-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato para Aberto
  --
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
		308,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratopanam.contrato_str,
	  'Inclusï¿½o de Parcela. Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importapanamtmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importapanamtmp.contrato, importapanamtmp.id_cbtiponegocio)
	Where cbcontratopanam.id_cbsituacaocontrato_int = 6
	And importapanamtmp.tipo_registro = '1'
	And importapanamtmp.inclui_altera_parcela = 'I'
	Group By cbcontratopanam.contrato_str;

	--
	-- Situacao do contrato : abre contrato baixado que teve parcela incluida
	--

  -- Ao inserir parcela, deve-se reabrir o contrato somente se estiver Baixado ?
	-- R: Sim, mais seguindo a regra dos 15 dias, ou seja, verificar se a primeira parcela com a
	-- situaï¿½ï¿½o 0 ï¿½ maior ou igual a 15 o contrato serï¿½ reaberto, se nï¿½o for, o contrato serï¿½
	-- colocado em stand-by, se a primeira parcela estiver com a situaï¿½ï¿½o 0

	--
	-- Abre o contrato que possuir a 1a. parcela em aberto e com mais de ou com 15 dias de atraso
	-- Deixa em Standby ctr que nï¿½o possuir parcela em cobranï¿½a (estiver sï¿½ com 7 ou 4)
	--

	For cursor_contrato in
	  Select distinct cbcontratopanam.id_cbcontrato_int, cbcontratopanam.contrato_str from cbcontratopanam
		 where cbcontratopanam.contrato_str = importapanamtmp.contrato
		   and cbcontratopanam.id_cbtiponegocio_int = importapanamtmp.id_cbtiponegocio
			 and importapanamtmp.tipo_registro = '1'
	loop

		int_stdby:= ( Select Count(*) From cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int And situacao_int = '7' ) ;
		int_aberto:= ( Select count(*) from cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int And situacao_int = '0' );

		if int_aberto = 0 and int_stdby > 0 then
      -- Seta contrato para standby
			Update cbcontratopanam Set id_cbsituacaocontrato_int = 2,
			  data_stand_by_dat = (select data_vencimento_dat + 15 from cbparcela
				                      where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int and situacao_int = '7'
				                      order by parcela_int limit 1),
			  id_geusuario_int = usuario,
			  tstamp = current_timestamp

			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Gera FUP indicando que contrato foi reaberto
			-- se o resultado for menor que 15 dias de atraso, coloca o contrato em stand-by,
			-- grava o resultado do calculo  (data de vencimento + 15 dias) na data de stand by e
			-- gera o follow-up com a situaï¿½ï¿½o igual a 27  Em prazo bancï¿½rio alterando a situaï¿½ï¿½o
			-- da parcela para 7 (a vencer), usar o cobrador automï¿½tico.
			Insert into cbfollowup
  	      (id_cbcontrato_int,
	         id_cbparcela_int,
	         data_cobranca_dat,
	         data_dat,
	         hora_cobranca_tim,
	         hora_tim,
	         coloca_stand_str,
	         alterado_str,
	         historico_str,
	         id_cbsitcontato_int,
					 id_geusuario_int,
	         tstamp)
			Values
			    (cursor_contrato.id_cbcontrato_int,
					 Null,
					 current_date,
					 current_date,
	         current_timestamp,
	         current_timestamp,
	         'S',
	         'S',
					 'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
	         10944,
					 1,
	         current_timestamp);

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				308,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o ',
			  cursor_contrato.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para S');

		else
		   if int_aberto > 0 then
          -- Seta contrato para aberto
			    Update cbcontratopanam Set id_cbsituacaocontrato_int = 1,
   	 		     id_geusuario_int = usuario,
			       tstamp = current_timestamp
			     Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

    			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			    Insert Into gehistoricousuario
			      (id_geusuario_int,
			       id_gecliente_int,
				     id_geaplicacao_int,
			       data_hora_dat,
			       evento_str,
			       contrato_str,
			       obs_txt)

			    Values(
			       1,
			       cliente,
				     308,
				     current_timestamp,
				     'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o ',
			       cursor_contrato.contrato_str,
				     'Situaï¿½ï¿½o do Contrato alterada para A');

			 end if;

		end if;

	end loop;

end if;

RETURN NULL;

END;
$_$;

--
-- TOC entry 12038 (class 0 OID 0)
-- Dependencies: 2022
-- Name: FUNCTION importa_panam(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_panam(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Panamericano';

--
-- TOC entry 2023 (class 1255 OID 27650)
-- Name: importa_paulista(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_paulista(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;

cursor_contrato record;
dt_distribuicao date;
int_retiradas int4;
int_total  int4;

int_normal int4;
int_saldorem int4;
int_novo int4;
int_regua int8;

BEGIN

--Seta data de distribuiï¿½ï¿½o
dt_distribuicao:= (Select data_processamento From tmpremessapaulista where tipo_registro = '0');

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update tmpremessapaulista Set
	id_fimoeda = 1
	Where tipo_registro = '1';

	Update tmpremessapaulista Set 	id_gefilial =   '1'
	Where tipo_registro = '1';

	-- Seta tipo de negï¿½cio
	Update tmpremessapaulista Set id_cbtiponegocio = 151;

end if;
-- Contrato
if comando = '1' then

	-- Inclusao de Contrato
	Insert Into cbcontratobancopaulista
	(id_gecliente_int,
	id_geempresa_int,
	id_gefilial_int,
        id_cbdistribuidorcliente_int,
	id_cbtiponegocio_int,
	id_fimoeda_int,

	ano_str,
	bairro_avalista1_str,
	bairro_str,
	bairro_trabalho_str,
	cep_avalista1_str,
	cep_str,
	cep_trabalho_str,
	cidade_avalista1_str,
	cidade_str,
	cidade_trabalho_str,
	codigo_concessionaria_str,
	codigo_grupo_str,
	codigo_produto_str,
	contrato_str,
	cor_str,
	cpf_avalista1_str,
	cpf_str,
	data_contrato_dat,
	taxa_financiamento_num,
	data_primeiro_vecto_dat,
	data_ultim_vecto_dat,
	dt_nascimento_dat,
	endereco_avalista1_str,
	endereco_str,
	endereco_trabalho_str,
	estado_avalista1_str,
	estado_civil_str,
	estado_str,
	estado_trabalho_str,
	fone_avalista1_str,
	fone_ref1_avalista2_str,
	fone_ref2_avalista2_str,
	fone_trab_avalista1_str,
	nome_grupo_str,
	local_trabalho_str,
	mae_str,
	marca_str,
	modelo_str,
	nome_avalista1_str,
	nome_concessionaria_str,
	nome_conjuge_str,
	nome_str,
	nome_ref1_avalista2_str,
	nome_ref2_avalista2_str,
	nucleo_str,
	numero_total_parcelas_int,
	org_exp_rg_str,
	pai_str,
	placa_str,
	produto_str,
	ramal_trabalho_str,
	rg_str,
	sexo_str,
	telefone_str,
	telefone_trabalho_str,
	tipo_contrato_str,
	tipo_seguro_str,
	uf_rg_str,
	valor_montante_num,
	valor_prestacao_num,
	data_primeira_distrib_dat,
        data_ultima_distrib_dat,
	id_cbsituacaocontrato_int,

	tstamp,
	id_geusuario_int)

	Select
	33,
	2,
	id_gefilial,
        id_cbdistribuidorcliente,
	id_cbtiponegocio,
	id_fimoeda,

	ano,
	bairro_aval,
	bairro_cli,
	bairro_com,
	cep_aval,
	cep_cli,
	cep_com,
	cidade_aval,
	cidade_cli,
	cidade_com,
	cod_loja,
	cod_grupo,
	cod_produto,
	contrato,
	cor,
	cpf_aval,
	cpf_cli,
	data_contrato,
	taxa_financiamento,
	primeiro_vcto,
	ultimo_vecto,
	data_nascimento,
	endereco_aval,
	endereco_cli,
	endereco_com,
	uf_aval,
	estado_civil,
	uf_cli,
	uf_com,
	fone_aval,
	fone_ref1,
	fone_ref2,
	cel_aval,
	grupo,
	local_trabalho,
	nome_mae,
	marca,
	modelo,
	nome_aval,
	nome_loja,
	conjuge,
	nome_cli,
	nome_ref1,
	nome_ref2,
	nucleo,
	plano,
	orgao_emissor,
	nome_pai,
	placa,
	produto,
	ramal_com,
	rg_cli,
	sexo_cli,
	fone_cli,
	fone_com,
	tipo_operacao,
	tipo_seguro,
	uf_rg,
	valor_financiado,
	valor_prestacao,

	dt_distribuicao,
	dt_distribuicao,
	1,

	current_timestamp,
	usuario

	From tmpremessapaulista
	Where processo = 'E0'
	And tipo_registro = '1'
	And inclui_altera = 'I';

	-- Alteracao de Contrato
	Update cbcontratobancopaulista Set
	ano_str = tmpremessapaulista.ano,
	bairro_avalista1_str = tmpremessapaulista.bairro_aval,
	bairro_str = tmpremessapaulista.bairro_cli,
	bairro_trabalho_str = tmpremessapaulista.bairro_com,
	cep_avalista1_str = tmpremessapaulista.cep_aval,
	cep_str = tmpremessapaulista.cep_cli,
	cep_trabalho_str = tmpremessapaulista.cep_com,
	cidade_avalista1_str = tmpremessapaulista.cidade_aval,
	cidade_str = tmpremessapaulista.cidade_cli,
	cidade_trabalho_str = tmpremessapaulista.cidade_com,
	codigo_concessionaria_str = tmpremessapaulista.cod_loja,
	codigo_grupo_str = tmpremessapaulista.cod_grupo,
	codigo_produto_str = tmpremessapaulista.cod_produto,
	cor_str = tmpremessapaulista.cor,
	cpf_avalista1_str = tmpremessapaulista.cpf_aval,
	data_contrato_dat = tmpremessapaulista.data_contrato,
	taxa_financiamento_num = tmpremessapaulista.taxa_financiamento,
	data_primeiro_vecto_dat = tmpremessapaulista.primeiro_vcto,
	data_ultim_vecto_dat = tmpremessapaulista.ultimo_vecto,
	dt_nascimento_dat = tmpremessapaulista.data_nascimento,
	endereco_avalista1_str = tmpremessapaulista.endereco_aval,
	endereco_str = tmpremessapaulista.endereco_cli,
	endereco_trabalho_str = tmpremessapaulista.endereco_com,
	estado_avalista1_str = tmpremessapaulista.uf_aval,
	estado_civil_str = tmpremessapaulista.estado_civil,
	estado_str = tmpremessapaulista.uf_cli,
	estado_trabalho_str = tmpremessapaulista.uf_com,
	fone_avalista1_str = tmpremessapaulista.fone_aval,
	fone_ref1_avalista2_str = tmpremessapaulista.fone_ref1,
	fone_ref2_avalista2_str = tmpremessapaulista.fone_ref2,
	fone_trab_avalista1_str = tmpremessapaulista.cel_aval,
	nome_grupo_str = tmpremessapaulista.grupo,
	local_trabalho_str = tmpremessapaulista.local_trabalho,
	mae_str = tmpremessapaulista.nome_mae,
	marca_str = tmpremessapaulista.marca,
	modelo_str = tmpremessapaulista.modelo,
	nome_avalista1_str = tmpremessapaulista.nome_aval,
	nome_concessionaria_str = tmpremessapaulista.nome_loja,
	nome_conjuge_str = tmpremessapaulista.conjuge,
	nome_str = tmpremessapaulista.nome_cli,
	nome_ref1_avalista2_str = tmpremessapaulista.nome_ref1,
	nome_ref2_avalista2_str = tmpremessapaulista.nome_ref2,
	nucleo_str = tmpremessapaulista.nucleo,
	numero_total_parcelas_int = tmpremessapaulista.plano,
	org_exp_rg_str = tmpremessapaulista.orgao_emissor,
	pai_str = tmpremessapaulista.nome_pai,
	placa_str = tmpremessapaulista.placa,
	produto_str = tmpremessapaulista.produto,
	ramal_trabalho_str = tmpremessapaulista.ramal_com,
	rg_str = tmpremessapaulista.rg_cli,
	telefone_str = tmpremessapaulista.fone_cli,
	telefone_trabalho_str = tmpremessapaulista.fone_com,
	tipo_contrato_str = tmpremessapaulista.tipo_operacao,
	tipo_seguro_str = tmpremessapaulista.tipo_seguro,
	uf_rg_str = tmpremessapaulista.uf_rg,
	valor_montante_num  = tmpremessapaulista.valor_financiado,
	valor_prestacao_num = tmpremessapaulista.valor_prestacao,

	data_ultima_distrib_dat = dt_distribuicao,
	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And id_cbtiponegocio_int = tmpremessapaulista.id_cbtiponegocio
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '1'
	And tmpremessapaulista.inclui_altera = 'A';

	-- Log alteraï¿½ï¿½o do contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
	  501,
	  current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratobancopaulista.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbsituacaocontrato On cbcontratobancopaulista.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '1'
	And tmpremessapaulista.inclui_altera = 'A';

end if;

-- Parcela
if comando = '4' then

	--Inclusï¿½o Parcela
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
        id_esregua_int,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratobancopaulista.id_cbcontrato_int,
	numero_parcela,
	vecto_parcela,
	valor_parcela,
	0,
	'1',
	dt_distribuicao,
	dt_distribuicao,
        id_esregua,
	usuario,
	current_timestamp

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.contrato_str = tmpremessapaulista.contrato
	Where tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'I';

	-- Distrubuiï¿½ï¿½o da parcela
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
         data_pre_distrib_dat)

	Select
	cbcontratobancopaulista.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dt_distribuicao

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.contrato_str = tmpremessapaulista.contrato
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobancopaulista.id_cbcontrato_int
	Where tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'I'
	And tmpremessapaulista.numero_parcela = cbparcela.parcela_int;

	-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  usuario,
	  cliente,
	  501,
	  current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratobancopaulista.contrato_str,
	  'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para ' ||
	   Case When (cbcontratobmc.id_cbsituacaocontrato_int = 6) Then 'A'
	   Else cbsituacaocontrato.codigo_str
	   End

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbsituacaocontrato On cbcontratobancopaulista.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And inclui_altera = 'A'
	And tmpremessapaulista.inclui_altera_parcela = 'I';

	--Alteraï¿½ï¿½o situacao contrato
	Update cbcontratobancopaulista Set
	id_cbsituacaocontrato_int = Case When (cbcontratobancopaulista.id_cbsituacaocontrato_int = 6) Then 1
			 	      Else cbcontratobancopaulista.id_cbsituacaocontrato_int
				    End,

	tstamp = current_timestamp,
	id_geusuario_int = usuario

	Where id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
        And tmpremessapaulista.inclui_altera = 'A'
	And tmpremessapaulista.inclui_altera_parcela = 'I';

	--Alteraï¿½ï¿½o Parcela
	Update cbparcela Set
	valor_principal_num = tmpremessapaulista.valor_parcela,
	data_ultima_distrib_dat = dt_distribuicao

	Where cbparcela.id_cbparcela_int = tmpremessapaulista.id_cbparcela
	And cbparcela.situacao_int <> '4'
	And cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'A';

	--Log alteraï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	501,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratobancopaulista.contrato_str,
	tmpremessapaulista.numero_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbparcela on cbcontratobancopaulista.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.id_cbparcela_int = tmpremessapaulista.id_cbparcela
	And cbparcela.situacao_int <> '4'
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'A';

	--Reenvio de parcela
	--E0

	--Alteraï¿½ï¿½o situacao contrato
	for cursor_contrato in
		Select Distinct cbcontratobancopaulista.id_cbcontrato_int, cbcontratobancopaulista.contrato_str,
		cbcontratobancopaulista.id_cbsituacaocontrato_int
		From cbcontratobancopaulista Inner Join tmpremessapaulista On
		cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
		Inner Join cbparcela On cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
		Where cbparcela.parcela_int = tmpremessapaulista.numero_parcela
		And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
		And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
		And cbcontratobancopaulista.id_cbsituacaocontrato_int = 6
		And tmpremessapaulista.processo = 'E0'
		And tmpremessapaulista.tipo_registro = '4'
		And tmpremessapaulista.inclui_altera = 'A'

	loop

		Update cbcontratobancopaulista Set id_cbsituacaocontrato_int = 1
		Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

		-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
		Insert Into gehistoricousuario
			(id_geusuario_int,
			id_gecliente_int,
			id_geaplicacao_int,
			data_hora_dat,
			evento_str,
			contrato_str,
			obs_txt)

		Values(
			usuario,
			cliente,
			501,
			current_timestamp,
			'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			cursor_contrato.contrato_str,
			'Parcela redirecioanda. Contrato Aberto');

	end loop;

	--Log renvio parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	500,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratobancopaulista.contrato_str,
	tmpremessapaulista.numero_parcela,
	'Reabertura da parcela'

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbparcela on cbcontratobancopaulista.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = tmpremessapaulista.numero_parcela
	And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'A';

	--Redistribuiï¿½ï¿½o Parcela
	Update cbdistribparcela Set
	data_pre_distrib_dat = dt_distribuicao

	Where cbdistribparcela.id_cbcontrato_int = cbcontratobancopaulista.id_cbcontrato_int
	And cbdistribparcela.id_cbparcela_int = cbparcela.id_cbparcela_int
	And cbparcela.parcela_int = tmpremessapaulista.numero_parcela
	And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
	And cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'A';

	--Reenvio Parcela
	Update cbparcela Set
	situacao_int = 0,
	valor_principal_num = tmpremessapaulista.valor_parcela,
	data_pagamento_dat = Null,

	data_ultima_distrib_dat = dt_distribuicao

	Where cbparcela.parcela_int = tmpremessapaulista.numero_parcela
	And (cbparcela.situacao_int = '4' Or cbparcela.situacao_int = '6')
	And (cbparcela.valor_pago_num Is Null Or cbparcela.valor_pago_num = '0')
	And cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
	And cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo = 'E0'
	And tmpremessapaulista.tipo_registro = '4'
	And tmpremessapaulista.inclui_altera_parcela = 'A';

	--Retirada de parcela
	--R1 / R2 / R3 / R5 / R6 / R7 

	

	--Followup retirada parcela
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobancopaulista.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	Case When tmpremessapaulista.processo = 'R2' Then 'Baixada Pagamento - parcela ' || cbparcela.parcela_int
	 		 Else 'Cancelada - parcela ' || cbparcela.parcela_int
	End,
	Case When tmpremessapaulista.processo = 'R1' Then 12974
			 When tmpremessapaulista.processo = 'R2' Then 12975
			 When tmpremessapaulista.processo = 'R3' Then 12976
			 When tmpremessapaulista.processo = 'R4' Then 12977
			 When tmpremessapaulista.processo = 'R5' Then 12978
			 When tmpremessapaulista.processo = 'R6' Then 12979
			 When tmpremessapaulista.processo = 'R7' Then 12980
			 
	End,

	1,
	current_timestamp

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratobancopaulista.id_cbcontrato_int
	Where cbparcela.parcela_int = tmpremessapaulista.numero_parcela
	And cbparcela.situacao_int Not In ('4', '6')
	And cbparcela.valor_pago_num Is Null
	And tmpremessapaulista.processo In ('R1', 'R2','R3', 'R4', 'R5', 'R6', 'R7')
	And tmpremessapaulista.tipo_registro = '4';

	Update cbparcela Set
	data_pagamento_dat = tmpremessapaulista.data_pagto,
	valor_pago_num = Null,
	situacao_int = Case When tmpremessapaulista.processo In ('R1', 'R2', 'R3', 'R5', 'R6', 'R7') Then 4
			    When tmpremessapaulista.processo = 'R4' Then 6
		       End

	Where cbparcela.parcela_int = tmpremessapaulista.numero_parcela
	And cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
	And cbcontratobancopaulista.contrato_str = tmpremessapaulista.contrato
	And cbcontratobancopaulista.id_cbtiponegocio_int = tmpremessapaulista.id_cbtiponegocio
	And cbparcela.situacao_int Not In ('4', '6')
	And tmpremessapaulista.processo In ('R1', 'R2','R3', 'R4', 'R5', 'R6', 'R7')
	And tmpremessapaulista.tipo_registro = '4';

	

	-- Situaï¿½ï¿½o do contrato
	for cursor_contrato in
		Select Distinct cbcontratobancopaulista.id_cbtiponegocio_int, cbcontratobancopaulista.id_cbcontrato_int, 
                cbcontratobancopaulista.contrato_str, cbcontratobancopaulista.id_cbsituacaocontrato_int
		From cbcontratobancopaulista Inner Join tmpremessapaulista On
		cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
		Where tmpremessapaulista.processo In ('R1', 'R2', 'R3', 'R4', 'R5', 'R6', 'R7')
		And tmpremessapaulista.tipo_registro = '4'
		And cbcontratobancopaulista.id_cbsituacaocontrato_int <> '6'

	loop

		int_total:= (Select Count(*) From cbparcela where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int);

		int_retiradas:= (Select Count(*) From cbparcela
				  Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
				  And situacao_int In ('4', '6'));

		if int_total = int_retiradas then

			-- Armazena contratos que estavam no Jurï¿½dico
			if cursor_contrato.id_cbsituacaocontrato_int = 4 then

				Update tmpremessapaulista Set
				juridico = 'S'

				Where tmpremessapaulista.id_cbtiponegocio = cursor_contrato.id_cbtiponegocio_int
				And tmpremessapaulista.contrato = cursor_contrato.contrato_str
				And tmpremessapaulista.processo In ('R1', 'R2', 'R3', 'R4', 'R5', 'R6', 'R7')
				And tmpremessapaulista.tipo_registro = '4';

			end if;

			Update cbcontratobancopaulista Set id_cbsituacaocontrato_int = 6
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
			Insert Into gehistoricousuario
			  (id_geusuario_int,
			  id_gecliente_int,
			  id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
			  501,
			  current_timestamp,
			  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			  cursor_contrato.contrato_str,
			  'Situaï¿½ï¿½o do Contrato alterada para B');

		end if;

	end loop;

	--Quitaï¿½ï¿½o de contrato
	--R8

	--Log alteraï¿½ï¿½o siutaï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	501,
	current_timestamp,
	'Baixa da Parcela - Importaï¿½ï¿½o',
	cbcontratobancopaulista.contrato_str,
	cbparcela.parcela_int,
	'Parcela baixada. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbparcela on cbcontratobancopaulista.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.situacao_int Not In ('4', '6')
	And tmpremessapaulista.processo = 'R8'
	And tmpremessapaulista.tipo_registro = '4';

	-- Alteraï¿½ï¿½o situaï¿½ï¿½o parcela
	Update cbparcela Set
	data_pagamento_dat = tmpremessapaulista.data_pagto,
	valor_pago_num = Null,
	situacao_int = 4

	Where cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
	And cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And cbparcela.situacao_int Not In ('4', '6')
	And tmpremessapaulista.processo = 'R8'
	And tmpremessapaulista.tipo_registro = '4';

	--Follow UP	baixa contrato
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobancopaulista.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Quitaï¿½ï¿½o do Contrato',
	12981,

	1,
	current_timestamp

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo  = 'R8'
	And tmpremessapaulista.tipo_registro = '4'
	And cbcontratobancopaulista.id_cbsituacaocontrato_int <> '6';

	-- Contratos Jurï¿½dico
	Update tmpremessapaulista Set
	juridico = 'S'

	Where tmpremessapaulista.id_cbtiponegocio = cbcontratobancopaulista.id_cbtiponegocio_int
	And tmpremessapaulista.contrato = cbcontratobancopaulista.contrato_str
	And tmpremessapaulista.processo  = 'R8'
	And tmpremessapaulista.tipo_registro = '4'
	And cbcontratobancopaulista.id_cbsituacaocontrato_int = '4';

	-- Baixa contrato
	Update cbcontratobancopaulista Set id_cbsituacaocontrato_int = 6

	Where  id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo = 'R8'
	And tmpremessapaulista.tipo_registro = '4'
	And cbcontratobancopaulista.id_cbsituacaocontrato_int <> '6';

	

	--Tranferï¿½ncia de contrato
	--R9

	--Log alteraï¿½ï¿½o siutaï¿½ï¿½o parcela
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	usuario,
	cliente,
	500,
	current_timestamp,
	'Baixa da Parcela - Importaï¿½ï¿½o',
	cbcontratobancopaulista.contrato_str,
	cbparcela.parcela_int,
	'Parcela baixada. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	Inner Join cbparcela on cbcontratobancopaulista.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.situacao_int Not In ('4', '6')
	And tmpremessapaulista.processo = 'R9'
	And tmpremessapaulista.tipo_registro = '4';

	-- Alteraï¿½ï¿½o situaï¿½ï¿½o parcela
	Update cbparcela Set
	data_pagamento_dat = tmpremessapaulista.data_pagto,
	valor_pago_num = Null,
	situacao_int = 5

	Where cbparcela.id_cbcontrato_int =  cbcontratobancopaulista.id_cbcontrato_int
	And cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And cbparcela.situacao_int Not In ('4', '6')
	And tmpremessapaulista.processo = 'R9'
	And tmpremessapaulista.tipo_registro = '4';

	--Follow UP	baixa contrato
	Insert into cbfollowup
	(id_cbcontrato_int,
	id_cbparcela_int,
	data_cobranca_dat,
	data_dat,
	hora_cobranca_tim,
	hora_tim,
	coloca_stand_str,
	alterado_str,
	historico_str,
	id_cbsitcontato_int,

	id_geusuario_int,
	tstamp)

	Select
	cbcontratobancopaulista.id_cbcontrato_int,
	Null,
	current_date,
	current_date,
	current_timestamp,
	current_timestamp,
	'N',
	'N',
	'Transferï¿½ncia do Contrato',
	12982,

	1,
	current_timestamp

	From tmpremessapaulista Inner Join cbcontratobancopaulista On
	cbcontratobancopaulista.id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo  = 'R9'
	And tmpremessapaulista.tipo_registro = '4'
	And cbcontratobancopaulista.id_cbsituacaocontrato_int <> '6';

	-- Contratos Jurï¿½dico
	Update tmpremessapaulista Set
	juridico = 'S'

	Where tmpremessapaulista.id_cbtiponegocio = cbcontratobancopaulista.id_cbtiponegocio_int
	And tmpremessapaulista.contrato = cbcontratobancopaulista.contrato_str
	And tmpremessapaulista.processo  = 'R9'
	And tmpremessapaulista.tipo_registro = '4'
	And cbcontratobancopaulista.id_cbsituacaocontrato_int = '4';

	-- Baixa contrato
	Update cbcontratobancopaulista Set id_cbsituacaocontrato_int = 6

	Where  id_cbcontrato_int = tmpremessapaulista.id_cbcontrato
	And tmpremessapaulista.processo = 'R9'
	And tmpremessapaulista.tipo_registro = '4'
	And cbcontratobancopaulista.id_cbsituacaocontrato_int <> '6';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12039 (class 0 OID 0)
-- Dependencies: 2023
-- Name: FUNCTION importa_paulista(text, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_paulista(text, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco paulista';

--
-- TOC entry 2024 (class 1255 OID 27657)
-- Name: importa_zogbi(text, integer, integer, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importa_zogbi(text, integer, integer, integer, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;
arquivo alias for $5;

cursor_contrato record;

int_stdby int4;
int_aberto int4;

BEGIN

if comando = '1' then
	--
	-- Inclusao de Contrato
  --
	Insert Into cbcontratozogbi
	( id_gecliente_int,
	  id_cbtiponegocio_int,
	  id_cbdistribuidorcliente_int,
		id_geempresa_int,
	  contrato_str,
	  nome_str,
	  cpf_str,
	  endereco_str,
	  complemento_str,
	  bairro_str,
	  cep_str,
	  cidade_str,
	  estado_str,
	  ddd_str,
	  telefone_str,
	  ramal_str,
	  local_trabalho_str,
	  profissao_str,
	  endereco_trabalho_str,
	  bairro_trabalho_str,
		complemento_trabalho_str,
	  cep_trabalho_str,
	  cidade_trabalho_str,
	  estado_trabalho_str,
	  ddd_trabalho_str,
	  telefone_trabalho_str,
	  ramal_trabalho_str,
	  salario_num,
	  tipo_pessoa_str,
	  nome_avalista1_str,
	  cpf_avalista1_str,
	  endereco_avalista1_str,
	  bairro_avalista1_str,
		complemento_avalista1_str,
	  cidade_avalista1_str,
	  estado_avalista1_str,
	  cep_avalista1_str,
	  ddd_avalista1_str,
	  fone_avalista1_str,
		ramal_avalista1_str,
	  tipo_pessoa_avalista1_str,
	  produto_str,
	  marca_str,
	  modelo_str,
	  cor_str,
	  ano_str,
	  placa_str,
	  numero_dut_str,
	  numero_total_parcelas_int,
	  data_contrato_dat,
	  dias_atraso_ult_parc_int,
	  valor_montante_num,
	  id_fimoeda_int,
	  despesas_finan_num,
	  id_cbsituacaocontrato_int,
	  data_primeira_distrib_dat,
	  data_ultima_distrib_dat,
	  id_gefilial_int,
	  obs_banco_txt,
	  obs_pasc_txt,
	  id_geusuario_int,
	  tstamp,
	  observacao_str,
	  sexo_str,
	  codigo_pdv,
	  nome_pdv,
	  reenvio_parc,
	  ret_assessoria,
	  tipo_retirada,
	  motivo_retirada,
	  ano_modelo_str,
		operadorpdv_str,
		responsavel_notificacao_str,
		fase_int,
		indicadorpagamento_int,
		numerocartao_str,
		nomeloja_str )

	Select
	  cliente,
		id_cbtiponegocio,
		id_cbdistribuidorcliente,
		empresa,
		contrato_str,
	  nomecliente_str,
		cpf_str,
		logradouro_str,
		complemento_str,
		bairro_str,
		cep_str,
		cidade_str,
		estado_str,
		ddd_str,
		fone_str,
		ramal_str,
		empresa_lt_str,
		profissao_str,
		logradouro_lt_str,
		bairro_lt_str,
		complemento_lt_str,
		cep_lt_str,
		cidade_lt_str,
		estado_lt_str,
		ddd_lt_str,
		fone_lt_str,
		ramal_lt_str,
		salario_num,
	  Case When (Length(cpf_str) <= 11) Then 'F'
		  	 When (Length(cpf_str) > 11) Then 'J'
		Else NULL
	  End,
		nome_avalista_str,
		cpf_avalista_str,
		logradouro_avalista_str,
		bairro_avalista_str,
		complemento_avalista_str,
		cidade_avalista_str,
		estado_avalista_str,
		cep_avalista_str,
		ddd_avalista_str,
		fone_avalista_str,
		ramal_avalista_str,
	  Case When (Length(cpf_avalista_str) <= 11) Then 'F'
			   When (Length(cpf_avalista_str) > 11) Then 'J'
		Else NULL
	  End,
		codproduto_str,
    marca_str,
    modelo_str,
		cor_str,
		anofabricacao_str,
		placa_str,
		numerodut_str,
		plano_int,
		emissao_dat,
		Null,
		saldo_num,
		1,
		Null,
		1,
		dataarquivo_dat,
		dataarquivo_dat,
		id_gefilial,
		Null,
		Null,
		usuario,
		current_date,
		Null,
		Null,
		pdv_int,
		nomepdv_str,
		reenvioparcela_str,
		Null,
		tiporetirada_str,
		observacao_ass_str,
		anomodelo_str,
		operadorpdv_str,
		responsavel_str,
		fase_int,
		indicador_int,
		numerocartao_str,
		nomeloja_str

    From importazogbitmp
   Where tiporegistro_int = '1'
	   And inclui_altera = 'I';

	--
	-- Alteracao de Contrato, filtrando por empresa, cliente, filial e tipo de negocio
	--

	Update cbcontratozogbi Set
	  nome_str = Coalesce( importazogbitmp.nomecliente_str, cbcontratozogbi.nome_str ),
	  cpf_str = Coalesce( importazogbitmp.cpf_str, cbcontratozogbi.cpf_str ),
	  endereco_str = Coalesce( importazogbitmp.logradouro_str, cbcontratozogbi.endereco_str ),
	  complemento_str = Coalesce( importazogbitmp.complemento_str, cbcontratozogbi.complemento_str ),
	  bairro_str = Coalesce( importazogbitmp.bairro_str, cbcontratozogbi.bairro_str ),
	  cep_str = Coalesce( importazogbitmp.cep_str, cbcontratozogbi.cep_str ),
	  cidade_str = Coalesce( importazogbitmp.cidade_str, cbcontratozogbi.cidade_str ),
	  estado_str = Coalesce( importazogbitmp.estado_str, cbcontratozogbi.estado_str ),
	  ddd_str = Coalesce( importazogbitmp.ddd_str, cbcontratozogbi.ddd_str ),
	  telefone_str = Coalesce( importazogbitmp.fone_str, cbcontratozogbi.telefone_str ),
	  ramal_str = Coalesce( importazogbitmp.ramal_str, cbcontratozogbi.ramal_str ),
	  local_trabalho_str = Coalesce( importazogbitmp.empresa_lt_str, cbcontratozogbi.local_trabalho_str ),
	  profissao_str = Coalesce( importazogbitmp.profissao_str, cbcontratozogbi.profissao_str ),
	  endereco_trabalho_str = Coalesce( importazogbitmp.logradouro_lt_str, cbcontratozogbi.endereco_trabalho_str ),
	  bairro_trabalho_str = Coalesce( importazogbitmp.bairro_lt_str, cbcontratozogbi.bairro_trabalho_str ),
		complemento_trabalho_str = Coalesce( importazogbitmp.complemento_lt_str, cbcontratozogbi.complemento_trabalho_str ),
	  cep_trabalho_str = Coalesce( importazogbitmp.cep_lt_str, cbcontratozogbi.cep_trabalho_str ),
	  cidade_trabalho_str = Coalesce( importazogbitmp.cidade_lt_str, cbcontratozogbi.cidade_trabalho_str ),
	  estado_trabalho_str = Coalesce( importazogbitmp.estado_lt_str, cbcontratozogbi.estado_trabalho_str ),
	  ddd_trabalho_str = Coalesce( importazogbitmp.ddd_lt_str, cbcontratozogbi.ddd_trabalho_str ),
	  telefone_trabalho_str = Coalesce( importazogbitmp.fone_lt_str, cbcontratozogbi.telefone_trabalho_str ),
	  ramal_trabalho_str = Coalesce( importazogbitmp.ramal_lt_str, cbcontratozogbi.ramal_trabalho_str ),
	  salario_num = Coalesce( importazogbitmp.salario_num, cbcontratozogbi.salario_num ),
	  nome_avalista1_str = Coalesce( importazogbitmp.nome_avalista_str, cbcontratozogbi.nome_avalista1_str ),
	  cpf_avalista1_str = Coalesce( importazogbitmp.cpf_avalista_str, cbcontratozogbi.cpf_avalista1_str ),
	  endereco_avalista1_str = Coalesce( importazogbitmp.logradouro_avalista_str, cbcontratozogbi.endereco_avalista1_str ),
	  bairro_avalista1_str = Coalesce( importazogbitmp.bairro_avalista_str, cbcontratozogbi.bairro_avalista1_str ),
		complemento_avalista1_str = Coalesce( importazogbitmp.complemento_avalista_str, cbcontratozogbi.complemento_avalista1_str ),
	  cidade_avalista1_str = Coalesce( importazogbitmp.cidade_avalista_str, cbcontratozogbi.cidade_avalista1_str ),
	  estado_avalista1_str = Coalesce( importazogbitmp.estado_avalista_str, cbcontratozogbi.estado_avalista1_str ),
	  cep_avalista1_str = Coalesce( importazogbitmp.cep_avalista_str, cbcontratozogbi.cep_avalista1_str ),
	  ddd_avalista1_str = Coalesce( importazogbitmp.ddd_avalista_str, cbcontratozogbi.ddd_avalista1_str ),
	  fone_avalista1_str = Coalesce( importazogbitmp.fone_avalista_str, cbcontratozogbi.fone_avalista1_str ),
		ramal_avalista1_str = Coalesce( importazogbitmp.ramal_avalista_str, cbcontratozogbi.ramal_avalista1_str ),
	  produto_str = Coalesce( importazogbitmp.codproduto_str, cbcontratozogbi.produto_str ),
	  marca_str = Coalesce( importazogbitmp.marca_str, cbcontratozogbi.marca_str ),
	  modelo_str = Coalesce( importazogbitmp.modelo_str, cbcontratozogbi.modelo_str ),
	  cor_str = Coalesce( importazogbitmp.cor_str, cbcontratozogbi.cor_str ),
	  ano_str = Coalesce( importazogbitmp.anofabricacao_str, cbcontratozogbi.ano_str ),
	  placa_str = Coalesce( importazogbitmp.placa_str, cbcontratozogbi.placa_str ),
	  numero_dut_str = Coalesce( importazogbitmp.numerodut_str, cbcontratozogbi.numero_dut_str ),
	  numero_total_parcelas_int = Coalesce( importazogbitmp.plano_int, cbcontratozogbi.numero_total_parcelas_int ),
	  data_contrato_dat = Coalesce( importazogbitmp.emissao_dat, cbcontratozogbi.data_contrato_dat ),
	  valor_montante_num = Coalesce( importazogbitmp.saldo_num, cbcontratozogbi.valor_montante_num ),
	  data_ultima_distrib_dat = Coalesce( importazogbitmp.dataarquivo_dat, cbcontratozogbi.data_ultima_distrib_dat ),
	  codigo_pdv = Coalesce( importazogbitmp.pdv_int, cbcontratozogbi.codigo_pdv ),
	  nome_pdv = Coalesce( importazogbitmp.nomepdv_str, cbcontratozogbi.nome_pdv ),
	  reenvio_parc = Coalesce( importazogbitmp.reenvioparcela_str, cbcontratozogbi.reenvio_parc ),
	  tipo_retirada = Coalesce( importazogbitmp.tiporetirada_str, cbcontratozogbi.tipo_retirada ),
	  ano_modelo_str = Coalesce( importazogbitmp.anomodelo_str, cbcontratozogbi.ano_modelo_str ),
		operadorpdv_str = Coalesce( importazogbitmp.operadorpdv_str, cbcontratozogbi.operadorpdv_str ),
		responsavel_notificacao_str = Coalesce( importazogbitmp.responsavel_str, cbcontratozogbi.responsavel_notificacao_str ),
		fase_int = Coalesce( importazogbitmp.fase_int, cbcontratozogbi.fase_int ),
		indicadorpagamento_int = Coalesce( importazogbitmp.indicador_int, cbcontratozogbi.indicadorpagamento_int ),
		numerocartao_str = Coalesce( importazogbitmp.numerocartao_str, cbcontratozogbi.numerocartao_str ),
		nomeloja_str = Coalesce( importazogbitmp.nomeloja_str, cbcontratozogbi.nomeloja_str )

	Where contrato_str = importazogbitmp.contrato_str
	  And id_cbtiponegocio_int = importazogbitmp.id_cbtiponegocio
	  And id_gecliente_int = cliente
	  And id_geempresa_int = empresa
	  And id_gefilial_int = importazogbitmp.id_gefilial
	  And importazogbitmp.tiporegistro_int = '1'
	  And importazogbitmp.inclui_altera = 'A';

	--
	-- Inclui Log de alteraï¿½ï¿½o do contrato
	--
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		328,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratozogbi.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importazogbitmp Inner Join cbcontratozogbi On
	(cbcontratozogbi.contrato_str, cbcontratozogbi.id_cbtiponegocio_int) = (importazogbitmp.contrato_str, importazogbitmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratozogbi.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where cbcontratozogbi.id_gecliente_int = cliente
	  And cbcontratozogbi.id_geempresa_int = empresa
	  And cbcontratozogbi.id_gefilial_int = importazogbitmp.id_gefilial
	  And importazogbitmp.tiporegistro_int = '1'
	  And importazogbitmp.inclui_altera = 'A';

	--
	-- Inclusï¿½o Parcela: zogbi sï¿½ trabalha com parcela em cobranï¿½a
	--
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	valor_pago_num,
	tarifa_cobranca_num,
	situacao_int,
	tipo_str,
	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratozogbi.id_cbcontrato_int,
	parcela_int,
	venctoparcela_dat,
	valorparcela_num,
	valorpago_num,
	1.89,
	Case When (importazogbitmp.venctoparcela_dat > current_date) Then 7 Else 0 End,
	'1',
	dataarquivo_dat,
	dataarquivo_dat,
	usuario,
	current_timestamp

	From importazogbitmp Inner Join cbcontratozogbi On
	(cbcontratozogbi.contrato_str, cbcontratozogbi.id_cbtiponegocio_int) = (importazogbitmp.contrato_str, importazogbitmp.id_cbtiponegocio)
	Where importazogbitmp.tiporegistro_int = '1'
  	And importazogbitmp.inclui_altera_parcela = 'I'
	Order by importazogbitmp.contrato_str, importazogbitmp.parcela_int;

	--
	-- Insere na distrib a primeira parcela que veio no arquivo
	--
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
   data_pre_distrib_dat)

	Select
	cbcontratozogbi.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	dataarquivo_dat

	From importazogbitmp Inner Join cbcontratozogbi On
	(cbcontratozogbi.contrato_str, cbcontratozogbi.id_cbtiponegocio_int) = (importazogbitmp.contrato_str, importazogbitmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratozogbi.id_cbcontrato_int
	Where importazogbitmp.tiporegistro_int = '1'
	  And importazogbitmp.parcela_int = cbparcela.parcela_int;

	--
	-- Log alteraï¿½ï¿½o dados parcela
  --
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

	Select
	1,
	cliente,
	328,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
	cbcontratozogbi.contrato_str,
	importazogbitmp.parcela_int,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importazogbitmp Inner Join cbcontratozogbi On
	(cbcontratozogbi.contrato_str, cbcontratozogbi.id_cbtiponegocio_int) = (importazogbitmp.contrato_str, importazogbitmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratozogbi.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importazogbitmp.parcela_int
	And cbparcela.situacao_int <> '4'
	And importazogbitmp.tiporegistro_int = '1'
	And importazogbitmp.inclui_altera_parcela = 'A';

	--
	-- Alteraï¿½ï¿½o Parcela
	--
	Update cbparcela Set
	data_vencimento_dat = importazogbitmp.venctoparcela_dat,
	valor_principal_num = importazogbitmp.valorparcela_num,
	situacao_int = Case When (( cbparcela.situacao_int = 7 and data_vencimento_dat < current_date ) Or
														( cbparcela.situacao_int = 4 and (valor_pago_num is null or valor_pago_num = 0 ))) Then 0
								 Else cbparcela.situacao_int End,
	data_primeira_distrib_dat = importazogbitmp.dataarquivo_dat,
	data_ultima_distrib_dat = importazogbitmp.dataarquivo_dat,
	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importazogbitmp.parcela_int
	  And cbparcela.id_cbcontrato_int =  cbcontratozogbi.id_cbcontrato_int
	  And cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
	  And cbcontratozogbi.id_cbtiponegocio_int = importazogbitmp.id_cbtiponegocio
	  And importazogbitmp.tiporegistro_int = '1'
	  And importazogbitmp.inclui_altera_parcela = 'A';

	--
	-- Reabre contrato que teve parcela reaberta
	--
	Update cbcontratozogbi set id_cbsituacaocontrato_int = '1'
	 Where cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
		 And cbcontratozogbi.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	   And cbparcela.parcela_int = importazogbitmp.parcela_int
		 And importazogbitmp.tiporegistro_int = '1'
		 And cbparcela.situacao_int = '0';

	 Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)
	 Select
			  1,
			  cliente,
				328,
				current_timestamp,
				'Alteraï¿½ï¿½o da Situaï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
			  cbcontratozogbi.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para A'

	  From cbcontratozogbi
	 Where cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
		 And cbcontratozogbi.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	   And cbparcela.parcela_int = importazogbitmp.parcela_int
		 And importazogbitmp.tiporegistro_int = '1'
		 And cbparcela.situacao_int = '0';

	--
 	-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato para Aberto
  --
	Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

	Select
	  1,
	  cliente,
		328,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o',
	  cbcontratozogbi.contrato_str,
	  'Inclusï¿½o de Parcela. Situaï¿½ï¿½o do Contrato alterada de B para A'

	From importazogbitmp Inner Join cbcontratozogbi On
	(cbcontratozogbi.contrato_str, cbcontratozogbi.id_cbtiponegocio_int) = (importazogbitmp.contrato_str, importazogbitmp.id_cbtiponegocio)
	Where cbcontratozogbi.id_cbsituacaocontrato_int = 6
	And importazogbitmp.tiporegistro_int = '1'
	And importazogbitmp.inclui_altera_parcela = 'I'
	Group By cbcontratozogbi.contrato_str;

	--
	-- Situacao do contrato : abre contrato baixado que teve parcela incluida
	--
	For cursor_contrato in
	  Select distinct cbcontratozogbi.id_cbcontrato_int, cbcontratozogbi.contrato_str from cbcontratozogbi
		 where cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
		   and cbcontratozogbi.id_cbtiponegocio_int = importazogbitmp.id_cbtiponegocio
			 and importazogbitmp.tiporegistro_int = '1'
			 and importazogbitmp.inclui_altera_parcela = 'I'
	Loop

		int_stdby:= ( Select Count(*) From cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int And situacao_int = 7 ) ;
		int_aberto:= ( Select count(*) from cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int And situacao_int = 0 );

		If int_aberto = 0 and int_stdby > 0 then
      -- Seta contrato para standby
			Update cbcontratozogbi Set id_cbsituacaocontrato_int = 2,
			  data_stand_by_dat = (select data_vencimento_dat from cbparcela
				                      where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int and situacao_int = 7
				                      order by parcela_int limit 1),
			  id_geusuario_int = usuario,
			  tstamp = current_timestamp
			Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

			-- Situacao contato 99999 - Generica
			-- Verificar se ficara em standby
			Insert into cbfollowup
  	      (id_cbcontrato_int,
	         id_cbparcela_int,
	         data_dat,
	         hora_tim,
	         coloca_stand_str,
	         alterado_str,
	         historico_str,
	         id_cbsitcontato_int,
					 id_geusuario_int,
	         tstamp)
			Values
			    (cursor_contrato.id_cbcontrato_int,
					 Null,
					 current_date,
	         current_timestamp,
	         'N',
	         'N',
					 'Instruï¿½ï¿½o Enviada no arquivo ' || arquivo,
	         11042,
					 1,
	         current_timestamp);

			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
				id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  1,
			  cliente,
				328,
				current_timestamp,
				'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o ',
			  cursor_contrato.contrato_str,
				'Situaï¿½ï¿½o do Contrato alterada para S');

		Else
		   If int_aberto > 0 then
          -- Seta contrato para aberto
			    Update cbcontratozogbi Set id_cbsituacaocontrato_int = 1,
   	 		     id_geusuario_int = usuario,
			       tstamp = current_timestamp
			     Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

    			-- Log alteraï¿½ï¿½o da situaï¿½ï¿½o do contrato
			    Insert Into gehistoricousuario
			      (id_geusuario_int,
			       id_gecliente_int,
				     id_geaplicacao_int,
			       data_hora_dat,
			       evento_str,
			       contrato_str,
			       obs_txt)

			    Values(
			       1,
			       cliente,
				     328,
				     current_timestamp,
				     'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o ',
			       cursor_contrato.contrato_str,
				     'Situaï¿½ï¿½o do Contrato alterada para A');

			 End if;

		End if;

	End loop;

End if;

--
-- Registro de ocorrencia
--
If comando = '5' Then

Insert into cbfollowup
   (id_cbcontrato_int,
    id_cbparcela_int,
    data_dat,
    hora_tim,
    coloca_stand_str,
    alterado_str,
    historico_str,
    id_cbsitcontato_int,
    id_geusuario_int,
	  tstamp)

Select
    cbcontratozogbi.id_cbcontrato_int,
		cbparcela.id_cbparcela_int,
		importazogbitmp.ocorrencia_dat,
	  current_timestamp,
	  'N',
	  'S',
		'Instruï¿½ï¿½o do arquivo ' || arquivo || ': ' || importazogbitmp.observacao_oc_str,
		importazogbitmp.codigo_oc_int,
		1,
	  current_timestamp

 From cbcontratozogbi inner join importazogbitmp On cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
Where	cbparcela.id_cbcontrato_int = cbcontratozogbi.id_cbcontrato_int
  And cbparcela.parcela_int = importazogbitmp.parcela_int
  And importazogbitmp.tiporegistro_int = '5';

End If;

--
-- Registro de baixa de contrato, parcelas e despesa
--
If comando = '6' Then

	--
  -- Historico de baixa de contrato
  --
	Insert Into gehistoricousuario
		(id_geusuario_int,
		id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
		evento_str,
		contrato_str,
		obs_txt)

	Select
		1,
		cliente,
		328,
		current_timestamp,
		'Baixa de Contrato - Importaï¿½ï¿½o',
		importazogbitmp.contrato_str,
		'Instruï¿½ï¿½o do arquivo ' || arquivo || ': Baixa do contrato - Situaï¿½ï¿½o anterior = ' || cbsituacaocontrato.codigo_str

  From importazogbitmp inner join cbcontratozogbi
	 On (cbcontratozogbi.contrato_str)=(importazogbitmp.contrato_str)
 Where cbcontratozogbi.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
   And importazogbitmp.tiporegistro_int = '6'
 Group by importazogbitmp.contrato_str, importazogbitmp.parcela_int,cbsituacaocontrato.codigo_str;

	--
	-- Baixa de contrato
	--
	Update cbcontratozogbi Set
	    id_cbsituacaocontrato_int = 6,
			id_geusuario_int = usuario,
			tstamp = current_timestamp
	Where cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
		And importazogbitmp.tiporegistro_int = '6';

	--
	-- Historico de baixa de parcela
	--
	Insert Into gehistoricousuario
		(id_geusuario_int,
		id_gecliente_int,
		id_geaplicacao_int,
		data_hora_dat,
		evento_str,
		contrato_str,
		parcela_int,
		obs_txt)

	Select
		1,
		cliente,
		328,
		current_timestamp,
		'Baixa de Parcelas - Importaï¿½ï¿½o',
		importazogbitmp.contrato_str,
		cbparcela.parcela_int,
		'Instruï¿½ï¿½o do arquivo ' || arquivo || ' - Baixa da parcela ' || cbparcela.parcela_int

	From cbcontratozogbi inner join importazogbitmp
	  On (cbcontratozogbi.contrato_str)=(importazogbitmp.contrato_str)
 Where cbcontratozogbi.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	 And importazogbitmp.tiporegistro_int = '6'
 Group by importazogbitmp.contrato_str, importazogbitmp.parcela_int;

  --
	-- Baixa de parcela
	--
	Update cbparcela set situacao_int = 4
	 Where cbparcela.id_cbcontrato_int = cbcontratozogbi.id_cbcontrato_int
		 And cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
	   And cbparcela.situacao_int not in ( '4', '6' )
		 And importazogbitmp.tiporegistro_int = '6';

	--
	-- Insere FUP de baixa
	--
	Insert into cbfollowup
			(id_cbcontrato_int,
			data_dat,
			hora_tim,
			coloca_stand_str,
			alterado_str,
			historico_str,
			id_cbsitcontato_int,
			id_geusuario_int,
			tstamp)

	Select
			cbcontratozogbi.id_cbcontrato_int,
			importazogbitmp.dataarquivo_dat,
			current_timestamp,
			'N',
			'N',
			'ZOGBI - Retirar da assessoria (Baixa)',
			11029,
			1,
			current_timestamp

	From cbcontratozogbi inner join importazogbitmp
	  On (cbcontratozogbi.contrato_str)=(importazogbitmp.contrato_str)
 Where cbcontratozogbi.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	 And importazogbitmp.tiporegistro_int = '6'
 Group by importazogbitmp.contrato_str, importazogbitmp.parcela_int;

	--
	-- Baixa despesas em aberto do contrato e gera historico
	--
	Update cbdespesa set situacao_str = 'B',
			   observacoes_txt = observacoes_txt || ' Despesa baixada pela importaï¿½ï¿½o em ' || importazogbitmp.dataarquivo_dat

	Where cbdespesa.id_cbcontrato_int = cbcontratozogbi.id_cbcontrato_int
		And cbcontratozogbi.contrato_str = importazogbitmp.contrato_str
		and importazogbitmp.tiporegistro_int = '6'
		And cbdespesa.situacao_str = 'A';

	Insert Into gehistoricousuario
		(id_geusuario_int,
		 id_gecliente_int,
		 id_geaplicacao_int,
		 data_hora_dat,
		 evento_str,
		 contrato_str,
		 obs_txt)

	Select
		 1,
		 cliente,
		 328,
		 current_timestamp,
		 'Baixa de Despesa - Importaï¿½ï¿½o',
		 importazogbitmp.contrato_str,
		 'Instruï¿½ï¿½o do arquivo ' || arquivo || ' - Contrato/Parcela/Despesa Baixada'

	From cbcontratozogbi inner join importazogbitmp
	  On (cbcontratozogbi.contrato_str)=(importazogbitmp.contrato_str)
 Where cbcontratozogbi.id_cbcontrato_int = cbparcela.id_cbcontrato_int
	 And importazogbitmp.tiporegistro_int = '6'
 Group by importazogbitmp.contrato_str, importazogbitmp.parcela_int	 ;

End If;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12040 (class 0 OID 0)
-- Dependencies: 2024
-- Name: FUNCTION importa_zogbi(text, integer, integer, integer, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importa_zogbi(text, integer, integer, integer, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o Zogbi-Promovel';

--
-- TOC entry 2025 (class 1255 OID 27673)
-- Name: importaconsorcio_panam(text, integer, integer, integer, text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.importaconsorcio_panam(text, integer, integer, integer, text, text) RETURNS integer
    LANGUAGE plpgsql
    AS $_$-- NOVA VERSï¿½O - DANNY 25/10/2006
DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;
batimento alias for $5;
arquivo alias for $6;

cursor_contrato record;
int_total int4;

BEGIN

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importaconsorciopanantmp Set
       id_fimoeda = 1;

	-- Seta filial do Mercantil
	Update importaconsorciopanantmp Set
	id_cbdistribuidorcliente = NULL;

End if;

--Batimento

if batimento = '1' then

-- Baixa contrato
   for cursor_contrato in
             select distinct cbcontratopanam.contrato_str , importaconsorciopanantmp.contrato, cbcontratopanam.id_cbcontrato_int
             from  cbcontratopanam
             left join importaconsorciopanantmp on cbcontratopanam.contrato_str = importaconsorciopanantmp.contrato
             where importaconsorciopanantmp.contrato is null
             and cbcontratopanam. id_cbsituacaocontrato_int not in ('6', '9')
             and cbcontratopanam.id_cbtiponegocio_int in ('65','70')

	loop
  	   int_total:= (Select Count(*) From cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
                       And situacao_int not In ('4', '6'));

  	      if int_total > 0 then

                   --
       	   -- Log alteraï¿½ï¿½o da parcela
                  --
    	          Insert Into gehistoricousuario
	            (id_geusuario_int,
	             id_gecliente_int,
	             id_geaplicacao_int,
	             data_hora_dat,
	             evento_str,
	             contrato_str,
	             parcela_int,
	             obs_txt)

                          Select
	             1,
	             cliente,
	             308,
	             current_timestamp,
	             'Baixa da parcela - Importaï¿½ï¿½o/Batimento Consï¿½rcio',
	             cursor_contrato.contrato_str,
	             cbparcela.parcela_int,
	             'Situaï¿½ï¿½o da Parcela alterada para 4.'

                             from  cbcontratopanam
                             left join importaconsorciopanantmp on cbcontratopanam.contrato_str = importaconsorciopanantmp.contrato
                             inner join cbparcela  on  cbcontratopanam.id_cbcontrato_int = cbparcela.id_cbcontrato_int
                             where importaconsorciopanantmp.contrato is null
                             and cbcontratopanam.id_cbtiponegocio_int in ('65','70')
                             and cbcontratopanam.contrato_str = cursor_contrato.contrato_str;

            	          Update cbparcela Set
    	          situacao_int = '4',
    	          data_pagamento_dat = Null,
 	          valor_pago_num = Null,

 	          id_geusuario_int = usuario,
	          tstamp = current_timestamp

  	          Where cbparcela.id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
                          And cbparcela.situacao_int <> '4';
                      end if;

                 --
                 -- Baixa Contrato
                 --

	            Update cbcontratopanam Set id_cbsituacaocontrato_int = 6
	             Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

	          Insert Into cbfollowup
     	          (id_cbcontrato_int,
    	           id_cbparcela_int,
    	           data_cobranca_dat,
    	           data_dat,
  	           hora_cobranca_tim,
 	           hora_tim,
  	           coloca_stand_str,
 	           alterado_str,
	           historico_str,
	           id_cbsitcontato_int,

	           id_geusuario_int,
	           tstamp)

	           Values(
	           cursor_contrato.id_cbcontrato_int,
	           null,
	           current_date,
	           current_date,
	           current_timestamp,
	           current_timestamp,
	           'N',
                           'N',

     	           'Contrato Baixado em ' || to_char (current_date, 'dd/mm/yyyy') || ' Importaï¿½ï¿½o/Batimento Consï¿½rcio - ' || arquivo || ' Contrato - ' || cursor_contrato.contrato_str,
             	           10956,

	           1,
	           current_timestamp);

                    --
	    -- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
                    --
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
			  id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
			  308,
			  current_timestamp,
                    	  'Baixa do Contrato - Importaï¿½ï¿½o / Batimento Consï¿½rcio ' ,
			   cursor_contrato.contrato_str,
	             ' Contrato alterado para B' );

         end loop;
end if;

-- Contrato
if comando = '1' then

      --
      -- Inclusao de Contrato
      --
       Insert Into cbcontratopanam
           (id_gecliente_int,
            id_geempresa_int,
            id_gefilial_int,
            id_cbtiponegocio_int,
            id_cbdistribuidorcliente_int,
            id_fimoeda_int,
            id_cbetapa_int,

            contrato_str,
            nome_str,
            tipo_pessoa_str,
            cpf_str,
            dt_nascimento_dat,
            endereco_str,
				    bairro_str,
            cidade_str,
            estado_str,
            cep_str,
				    telefone_str,
            telefone_trabalho_str,

						chassis_str,
						marca_str,
						modelo_str,
  				  cor_str,
						renavam_str,
						placa_str,

            valor_bem_num,
					  numero_total_parcelas_int,
	          grupo_str,
            cota_str,
            produto_str,
            obs_banco_txt,
            data_contrato_dat,

            data_primeira_distrib_dat,
            data_ultima_distrib_dat,
            id_cbsituacaocontrato_int,
            tstamp,
            id_geusuario_int,
	    numero_aviso_str)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,
	id_cbetapa,

	contrato,
	nome_consorciado,
	tp_pessoa,
  cnpj_cpf,
	dt_nascimento,
	endereco ||  ' ' || numero_end,
	bairro,
	cidade,
	estado,
	cep,
	telefone,
	telefone2,

	chassi,
	fabricante,
	linha_modelo,
  cor,
	substr(renavam,1,10),
	placa,

  valor_bem,
	plano,
  grupo,
  cota,
  cod_produto,
  'Tipo da Cota - ' || importaconsorciopanantmp.tipo_cota || '  Plano - ' || importaconsorciopanantmp.plano || ' Descriï¿½ï¿½o - ' || importaconsorciopanantmp.descricao || ' Nï¿½mero Externo -  ' || importaconsorciopanantmp.num_externo || ' Amortizaï¿½ï¿½o - ' || importaconsorciopanantmp.valor_amortizacao,
  data_venda,

  current_date,
  current_date,
  case when importaconsorciopanantmp.situacao = 'A' then 1 else  4 End,

	current_timestamp,
	usuario,
	coalesce(numero_aviso, 0) as numero_aviso

	From importaconsorciopanantmp
	Where inclui_altera = 'I'
                and situacao in ('A', 'J');

        --
        -- Inclui Log de alteraï¿½ï¿½o do contrato
        --
        Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

 	 Select
	  1,
	  cliente,
		308,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o Consï¿½rcio',
	  cbcontratopanam.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratopanam.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where cbcontratopanam.id_gecliente_int = cliente
	And cbcontratopanam.id_geempresa_int = empresa
	And cbcontratopanam.id_gefilial_int = importaconsorciopanantmp.id_gefilial
	And importaconsorciopanantmp.inclui_altera = 'A'
                and importaconsorciopanantmp.situacao in ('A', 'J') ;

          --
          -- Alteracao de Contrato, filtrando por empresa, cliente, filial e tipo de negocio
          --

       Update cbcontratopanam Set

       nome_str = importaconsorciopanantmp.nome_consorciado,
			 tipo_pessoa_str = importaconsorciopanantmp.tp_pessoa,
			 cpf_str = importaconsorciopanantmp.cnpj_cpf,
			 dt_nascimento_dat = importaconsorciopanantmp.dt_nascimento,
			 endereco_str = importaconsorciopanantmp.endereco ||  ' '  || importaconsorciopanantmp.numero_end,
       bairro_str = importaconsorciopanantmp.bairro,
       cidade_str = importaconsorciopanantmp.cidade,
       estado_str = importaconsorciopanantmp.estado,
       cep_str = importaconsorciopanantmp.cep,
       telefone_str = importaconsorciopanantmp.telefone,
       --telefone_str = trim(substring(importaconsorciopanantmp.telefone,4,20)),
      -- ddd_str = trim(substring(importaconsorciopanantmp.telefone,1,3)),
       telefone_trabalho_str = importaconsorciopanantmp.telefone2,
			 valor_bem_num = importaconsorciopanantmp.valor_bem,
			 numero_total_parcelas_int = importaconsorciopanantmp.plano,

       grupo_str = importaconsorciopanantmp.grupo,
       cota_str = importaconsorciopanantmp.cota,
       produto_str = importaconsorciopanantmp.cod_produto,

       obs_banco_txt = 'Tipo da Cota - ' || importaconsorciopanantmp.tipo_cota || '  Plano - ' || importaconsorciopanantmp.plano || ' Descriï¿½ï¿½o - ' || importaconsorciopanantmp.descricao || ' Nï¿½mero Externo -  ' || importaconsorciopanantmp.num_externo || ' Amortizaï¿½ï¿½o - ' || importaconsorciopanantmp.valor_amortizacao,
       data_contrato_dat = importaconsorciopanantmp.data_venda,

       data_primeira_distrib_dat = current_date,
       data_ultima_distrib_dat = current_date,

       id_cbsituacaocontrato_int =  case when importaconsorciopanantmp.situacao = 'A' then 1 else  4 End,
       tstamp = current_timestamp,
       id_geusuario_int = usuario

       Where contrato_str = importaconsorciopanantmp.contrato
       And id_cbtiponegocio_int = importaconsorciopanantmp.id_cbtiponegocio
       And id_gecliente_int = cliente
       And id_geempresa_int = empresa
       And id_gefilial_int = importaconsorciopanantmp.id_gefilial
       and  importaconsorciopanantmp.inclui_altera = 'A'
       and importaconsorciopanantmp.situacao in ('A', 'J') ;

	--
	-- Inclusï¿½o Parcela
                --
       -- Se os campos Amortizaï¿½ï¿½o e total pago estiverem zerados significa que temos parcela jï¿½ existente e deve ser incluï¿½da com tipo = 2                             -- (PanMix), terï¿½ o mesmo numerro nï¿½mero de parcelas mas com tipo diferente.
	--
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	numero_unico_str,
	tstamp)

	Select
	cbcontratopanam.id_cbcontrato_int,
	num_parcela,
	data_venc,
	valor_parcela,
                Case When (data_venc >= current_date) Then 7 Else 0 End,

                case when (importaconsorciopanantmp.valor_amortizacao = 0 ) then '2' else  '1' End,

	current_date,
	current_date,
	usuario,
	coalesce(numero_aviso, 0) as numero_aviso,
	current_timestamp

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Where importaconsorciopanantmp.inclui_altera_parcela = 'I'
                and importaconsorciopanantmp.situacao in ('A', 'J')
	Order by importaconsorciopanantmp.contrato, importaconsorciopanantmp.num_parcela;

	--
	-- Insere na distrib a primeira parcela que veio no arquivo
	--
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
                 data_pre_distrib_dat)

	Select
	cbcontratopanam.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratopanam.id_cbcontrato_int
	Where importaconsorciopanantmp.num_parcela = cbparcela.parcela_int
                and importaconsorciopanantmp.valor_total_pago <> 0
                and importaconsorciopanantmp.valor_amortizacao <> 0
                and importaconsorciopanantmp.inclui_altera_parcela = 'I'
                and importaconsorciopanantmp.situacao in ('A', 'J') ;

	--
	-- Log alteraï¿½ï¿½o dados parcela
                --
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

                Select
	1,
	cliente,
	308,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o Consï¿½rcio',
	cbcontratopanam.contrato_str,
	importaconsorciopanantmp.num_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratopanam.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importaconsorciopanantmp.num_parcela
	And cbparcela.situacao_int <> '4'
	And importaconsorciopanantmp.inclui_altera_parcela = 'A'
                and importaconsorciopanantmp.situacao in ('A', 'J') ;

	--
	-- Alteraï¿½ï¿½o Parcela
	--
	Update cbparcela Set
	data_vencimento_dat = importaconsorciopanantmp.data_venc,
	valor_principal_num = importaconsorciopanantmp.valor_parcela,
	situacao_int = cbparcela.situacao_int,
	data_primeira_distrib_dat = current_date,
	data_ultima_distrib_dat = current_date,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaconsorciopanantmp.num_parcela
	  And cbparcela.id_cbcontrato_int =  cbcontratopanam.id_cbcontrato_int
	  And cbcontratopanam.contrato_str = importaconsorciopanantmp.contrato
	  And cbcontratopanam.id_cbtiponegocio_int = importaconsorciopanantmp.id_cbtiponegocio
	  And importaconsorciopanantmp.inclui_altera_parcela = 'A'
                  and importaconsorciopanantmp.situacao in ('A', 'J') ;

End if;

RETURN NULL;
END;

-- ORIGINAL
/*
DECLARE
comando alias for $1;
empresa alias for $2;
usuario alias for $3;
cliente alias for $4;
batimento alias for $5;
arquivo alias for $6;

cursor_contrato record;
int_total int4;

BEGIN

-- Seta campos dos registros importados
if comando = '0' then

	-- Seta moeda
	Update importaconsorciopanantmp Set
       id_fimoeda = 1;

	-- Seta filial do Mercantil
	Update importaconsorciopanantmp Set
	id_cbdistribuidorcliente = NULL;

End if;

--Batimento

if batimento = '1' then

-- Baixa contrato
   for cursor_contrato in
             select distinct cbcontratopanam.contrato_str , importaconsorciopanantmp.contrato, cbcontratopanam.id_cbcontrato_int
             from  cbcontratopanam
             left join importaconsorciopanantmp on cbcontratopanam.contrato_str = importaconsorciopanantmp.contrato
             where importaconsorciopanantmp.contrato is null
             and cbcontratopanam. id_cbsituacaocontrato_int not in ('6', '9')
             and cbcontratopanam.id_cbtiponegocio_int in ('65','70')

	loop
  	   int_total:= (Select Count(*) From cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
                       And situacao_int not In ('4', '6'));

  	      if int_total > 0 then

                   --
       	   -- Log alteraï¿½ï¿½o da parcela
                  --
    	          Insert Into gehistoricousuario
	            (id_geusuario_int,
	             id_gecliente_int,
	             id_geaplicacao_int,
	             data_hora_dat,
	             evento_str,
	             contrato_str,
	             parcela_int,
	             obs_txt)

                          Select
	             1,
	             cliente,
	             308,
	             current_timestamp,
	             'Baixa da parcela - Importaï¿½ï¿½o/Batimento Consï¿½rcio',
	             cursor_contrato.contrato_str,
	             cbparcela.parcela_int,
	             'Situaï¿½ï¿½o da Parcela alterada para 4.'

                             from  cbcontratopanam
                             left join importaconsorciopanantmp on cbcontratopanam.contrato_str = importaconsorciopanantmp.contrato
                             inner join cbparcela  on  cbcontratopanam.id_cbcontrato_int = cbparcela.id_cbcontrato_int
                             where importaconsorciopanantmp.contrato is null
                             and cbcontratopanam.id_cbtiponegocio_int in ('65','70')
                             and cbcontratopanam.contrato_str = cursor_contrato.contrato_str;

            	          Update cbparcela Set
    	          situacao_int = '4',
    	          data_pagamento_dat = Null,
 	          valor_pago_num = Null,

 	          id_geusuario_int = usuario,
	          tstamp = current_timestamp

  	          Where cbparcela.id_cbcontrato_int = cursor_contrato.id_cbcontrato_int
                          And cbparcela.situacao_int <> '4';
                      end if;

                 --
                 -- Baixa Contrato
                 --

	            Update cbcontratopanam Set id_cbsituacaocontrato_int = 6
	             Where id_cbcontrato_int = cursor_contrato.id_cbcontrato_int;

	          Insert Into cbfollowup
     	          (id_cbcontrato_int,
    	           id_cbparcela_int,
    	           data_cobranca_dat,
    	           data_dat,
  	           hora_cobranca_tim,
 	           hora_tim,
  	           coloca_stand_str,
 	           alterado_str,
	           historico_str,
	           id_cbsitcontato_int,

	           id_geusuario_int,
	           tstamp)

	           Values(
	           cursor_contrato.id_cbcontrato_int,
	           null,
	           current_date,
	           current_date,
	           current_timestamp,
	           current_timestamp,
	           'N',
                           'N',

     	           'Contrato Baixado em ' || to_char (current_date, 'dd/mm/yyyy') || ' Importaï¿½ï¿½o/Batimento Consï¿½rcio - ' || arquivo || ' Contrato - ' || cursor_contrato.contrato_str,
             	           10956,

	           1,
	           current_timestamp);

                    --
	    -- Log alteraï¿½ï¿½o situaï¿½ï¿½o contrato
                    --
			Insert Into gehistoricousuario
			 (id_geusuario_int,
			  id_gecliente_int,
			  id_geaplicacao_int,
			  data_hora_dat,
			  evento_str,
			  contrato_str,
			  obs_txt)

			Values(
			  usuario,
			  cliente,
			  308,
			  current_timestamp,
                    	  'Baixa do Contrato - Importaï¿½ï¿½o / Batimento Consï¿½rcio ' ,
			   cursor_contrato.contrato_str,
	             ' Contrato alterado para B' );

         end loop;
end if;

-- Contrato
if comando = '1' then

      --
      -- Inclusao de Contrato
      --
       Insert Into cbcontratopanam
           (id_gecliente_int,
            id_geempresa_int,
            id_gefilial_int,
            id_cbtiponegocio_int,
            id_cbdistribuidorcliente_int,
            id_fimoeda_int,
            id_cbetapa_int,

            contrato_str,
            nome_str,
            tipo_pessoa_str,
            cpf_str,
            dt_nascimento_dat,
            endereco_str,
				    bairro_str,
            cidade_str,
            estado_str,
            cep_str,
				    telefone_str,
            telefone_trabalho_str,

						chassis_str,
						marca_str,
						modelo_str,
  				  cor_str,
						renavam_str,
						placa_str,

            valor_bem_num,
					  numero_total_parcelas_int,
	          grupo_str,
            cota_str,
            produto_str,
            obs_banco_txt,
            data_contrato_dat,

            data_primeira_distrib_dat,
            data_ultima_distrib_dat,
            id_cbsituacaocontrato_int,
            tstamp,
            id_geusuario_int)

	Select
	cliente,
	empresa,
	id_gefilial,
	id_cbtiponegocio,
	id_cbdistribuidorcliente,
	id_fimoeda,
	id_cbetapa,

	contrato,
	nome_consorciado,
	tp_pessoa,
  cnpj_cpf,
	dt_nascimento,
	endereco ||  ' ' || numero_end,
	bairro,
	cidade,
	estado,
	cep,
	telefone,
	telefone2,

	chassi,
	fabricante,
	linha_modelo,
  cor,
	renavam,
	placa,

  valor_bem,
	plano,
  grupo,
  cota,
  cod_produto,
  'Tipo da Cota - ' || importaconsorciopanantmp.tipo_cota || '  Plano - ' || importaconsorciopanantmp.plano || ' Descriï¿½ï¿½o - ' || importaconsorciopanantmp.descricao || ' Nï¿½mero Externo -  ' || importaconsorciopanantmp.num_externo || ' Amortizaï¿½ï¿½o - ' || importaconsorciopanantmp.valor_amortizacao,
  data_venda,

  current_date,
  current_date,
  case when importaconsorciopanantmp.situacao = 'A' then 1 else  4 End,

	current_timestamp,
	usuario

	From importaconsorciopanantmp
	Where inclui_altera = 'I'
                and situacao in ('A', 'J');

        --
        -- Inclui Log de alteraï¿½ï¿½o do contrato
        --
        Insert Into gehistoricousuario
	 (id_geusuario_int,
	  id_gecliente_int,
	  id_geaplicacao_int,
	  data_hora_dat,
	  evento_str,
	  contrato_str,
	  obs_txt)

 	 Select
	  1,
	  cliente,
		308,
		current_timestamp,
	  'Alteraï¿½ï¿½o do Contrato - Importaï¿½ï¿½o Consï¿½rcio',
	  cbcontratopanam.contrato_str,
	  'Dados do contrato alterados. Situaï¿½ï¿½o do Contrato ' || cbsituacaocontrato.codigo_str

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Inner Join cbsituacaocontrato On cbcontratopanam.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
	Where cbcontratopanam.id_gecliente_int = cliente
	And cbcontratopanam.id_geempresa_int = empresa
	And cbcontratopanam.id_gefilial_int = importaconsorciopanantmp.id_gefilial
	And importaconsorciopanantmp.inclui_altera = 'A'
                and importaconsorciopanantmp.situacao in ('A', 'J') ;

          --
          -- Alteracao de Contrato, filtrando por empresa, cliente, filial e tipo de negocio
          --

       Update cbcontratopanam Set

       nome_str = importaconsorciopanantmp.nome_consorciado,
			 tipo_pessoa_str = importaconsorciopanantmp.tp_pessoa,
			 cpf_str = importaconsorciopanantmp.cnpj_cpf,
			 dt_nascimento_dat = importaconsorciopanantmp.dt_nascimento,
			 endereco_str = importaconsorciopanantmp.endereco ||  ' '  || importaconsorciopanantmp.numero_end,
       bairro_str = importaconsorciopanantmp.bairro,
       cidade_str = importaconsorciopanantmp.cidade,
       estado_str = importaconsorciopanantmp.estado,
       cep_str = importaconsorciopanantmp.cep,
       telefone_str = importaconsorciopanantmp.telefone,
       --telefone_str = trim(substring(importaconsorciopanantmp.telefone,4,20)),
      -- ddd_str = trim(substring(importaconsorciopanantmp.telefone,1,3)),
       telefone_trabalho_str = importaconsorciopanantmp.telefone2,
			 valor_bem_num = importaconsorciopanantmp.valor_bem,
			 numero_total_parcelas_int = importaconsorciopanantmp.plano,

       grupo_str = importaconsorciopanantmp.grupo,
       cota_str = importaconsorciopanantmp.cota,
       produto_str = importaconsorciopanantmp.cod_produto,

       obs_banco_txt = 'Tipo da Cota - ' || importaconsorciopanantmp.tipo_cota || '  Plano - ' || importaconsorciopanantmp.plano || ' Descriï¿½ï¿½o - ' || importaconsorciopanantmp.descricao || ' Nï¿½mero Externo -  ' || importaconsorciopanantmp.num_externo || ' Amortizaï¿½ï¿½o - ' || importaconsorciopanantmp.valor_amortizacao,
       data_contrato_dat = importaconsorciopanantmp.data_venda,

       data_primeira_distrib_dat = current_date,
       data_ultima_distrib_dat = current_date,

       id_cbsituacaocontrato_int =  case when importaconsorciopanantmp.situacao = 'A' then 1 else  4 End,
       tstamp = current_timestamp,
       id_geusuario_int = usuario

       Where contrato_str = importaconsorciopanantmp.contrato
       And id_cbtiponegocio_int = importaconsorciopanantmp.id_cbtiponegocio
       And id_gecliente_int = cliente
       And id_geempresa_int = empresa
       And id_gefilial_int = importaconsorciopanantmp.id_gefilial
       and  importaconsorciopanantmp.inclui_altera = 'A'
       and importaconsorciopanantmp.situacao in ('A', 'J') ;

	--
	-- Inclusï¿½o Parcela
                --
       -- Se os campos Amortizaï¿½ï¿½o e total pago estiverem zerados significa que temos parcela jï¿½ existente e deve ser incluï¿½da com tipo = 2                             -- (PanMix), terï¿½ o mesmo numerro nï¿½mero de parcelas mas com tipo diferente.
	--
	Insert Into cbparcela
	(id_cbcontrato_int,
	parcela_int,
	data_vencimento_dat,
	valor_principal_num,
	situacao_int,
	tipo_str,

	data_primeira_distrib_dat,
	data_ultima_distrib_dat,
	id_geusuario_int,
	tstamp)

	Select
	cbcontratopanam.id_cbcontrato_int,
	num_parcela,
	data_venc,
	valor_parcela,
                Case When (data_venc >= current_date) Then 7 Else 0 End,

                case when (importaconsorciopanantmp.valor_amortizacao = 0 ) then '2' else  '1' End,

	current_date,
	current_date,
	usuario,
	current_timestamp

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Where importaconsorciopanantmp.inclui_altera_parcela = 'I'
                and importaconsorciopanantmp.situacao in ('A', 'J')
	Order by importaconsorciopanantmp.contrato, importaconsorciopanantmp.num_parcela;

	--
	-- Insere na distrib a primeira parcela que veio no arquivo
	--
	Insert Into cbdistribparcela
	(id_cbcontrato_int,
	 id_cbparcela_int,
                 data_pre_distrib_dat)

	Select
	cbcontratopanam.id_cbcontrato_int,
	cbparcela.id_cbparcela_int,
	current_date

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Inner Join cbparcela On cbparcela.id_cbcontrato_int = cbcontratopanam.id_cbcontrato_int
	Where importaconsorciopanantmp.num_parcela = cbparcela.parcela_int
                and importaconsorciopanantmp.valor_total_pago <> 0
                and importaconsorciopanantmp.valor_amortizacao <> 0
                and importaconsorciopanantmp.inclui_altera_parcela = 'I'
                and importaconsorciopanantmp.situacao in ('A', 'J') ;

	--
	-- Log alteraï¿½ï¿½o dados parcela
                --
	Insert Into gehistoricousuario
	(id_geusuario_int,
	id_gecliente_int,
	id_geaplicacao_int,
	data_hora_dat,
	evento_str,
	contrato_str,
	parcela_int,
	obs_txt)

                Select
	1,
	cliente,
	308,
	current_timestamp,
	'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o Consï¿½rcio',
	cbcontratopanam.contrato_str,
	importaconsorciopanantmp.num_parcela,
	'Dados da parcela alterados. Situaï¿½ï¿½o da Parcela ' || cbparcela.situacao_int

	From importaconsorciopanantmp Inner Join cbcontratopanam On
	(cbcontratopanam.contrato_str, cbcontratopanam.id_cbtiponegocio_int) = (importaconsorciopanantmp.contrato, importaconsorciopanantmp.id_cbtiponegocio)
	Inner Join cbparcela on cbcontratopanam.id_cbcontrato_int = cbparcela.id_cbcontrato_int

	Where cbparcela.parcela_int = importaconsorciopanantmp.num_parcela
	And cbparcela.situacao_int <> '4'
	And importaconsorciopanantmp.inclui_altera_parcela = 'A'
                and importaconsorciopanantmp.situacao in ('A', 'J') ;

	--
	-- Alteraï¿½ï¿½o Parcela
	--
	Update cbparcela Set
	data_vencimento_dat = importaconsorciopanantmp.data_venc,
	valor_principal_num = importaconsorciopanantmp.valor_parcela,
	situacao_int = cbparcela.situacao_int,
	data_primeira_distrib_dat = current_date,
	data_ultima_distrib_dat = current_date,

	id_geusuario_int = usuario,
	tstamp = current_timestamp

	Where cbparcela.parcela_int = importaconsorciopanantmp.num_parcela
	  And cbparcela.id_cbcontrato_int =  cbcontratopanam.id_cbcontrato_int
	  And cbcontratopanam.contrato_str = importaconsorciopanantmp.contrato
	  And cbcontratopanam.id_cbtiponegocio_int = importaconsorciopanantmp.id_cbtiponegocio
	  And importaconsorciopanantmp.inclui_altera_parcela = 'A'
                  and importaconsorciopanantmp.situacao in ('A', 'J') ;

End if;

RETURN NULL;
END;
*/
$_$;

--
-- TOC entry 12041 (class 0 OID 0)
-- Dependencies: 2025
-- Name: FUNCTION importaconsorcio_panam(text, integer, integer, integer, text, text); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.importaconsorcio_panam(text, integer, integer, integer, text, text) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o de Consï¿½rcio do Banco Panamericano';

--
-- TOC entry 2026 (class 1255 OID 27701)
-- Name: lpad(bigint, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.lpad(bigint, integer, text) RETURNS text
    LANGUAGE sql IMMUTABLE
    AS $_$

      SELECT CAST(pg_catalog.lpad($1::text, cast($2 as integer), cast($3 as text)) as text);

$_$;

--
-- TOC entry 2027 (class 1255 OID 27709)
-- Name: lpad(text, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.lpad(text, integer, text) RETURNS text
    LANGUAGE internal IMMUTABLE STRICT
    AS $$lpad$$;

--
-- TOC entry 2028 (class 1255 OID 27715)
-- Name: perh(numeric); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.perh(numeric) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select 
       CASE 
       WHEN $1 < 720 THEN
	  0.32
       WHEN $1 < 1081 THEN
	  0.34
       WHEN $1 < 1441 THEN
	  0.36	  
       ELSE
          0.38
       END    	
       ;

$_$;

--
-- TOC entry 2029 (class 1255 OID 27723)
-- Name: plpgsql_call_handler(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.plpgsql_call_handler() RETURNS language_handler
    LANGUAGE c
    AS '$libdir/plpgsql', 'plpgsql_call_handler';

--
-- TOC entry 2030 (class 1255 OID 27724)
-- Name: prh(numeric); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.prh(numeric) RETURNS numeric
    LANGUAGE sql IMMUTABLE
    AS $_$

       select 
       CASE 
       WHEN $1 < 720 THEN
	  0.32
       WHEN $1 < 1081 THEN
	  0.34
       WHEN $1 < 1441 THEN
	  0.36	  
       ELSE
          0.38
       END    	
       ;

$_$;

--
-- TOC entry 2031 (class 1255 OID 27727)
-- Name: remessa_honda(text, integer, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.remessa_honda(text, integer, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando alias for $1;
empresa alias for $2;
filial alias for $3;
cliente alias for $4;
usuario alias for $5;

cursor_contrato record;
int_baixadas    int4;
int_total                       int4;

BEGIN

-- Inclusï¿½o contrato/parcela
if comando = '10I' then

    -- Contrato
    Insert Into cbcontratohonda
    (id_gecliente_int,
    id_geempresa_int,
    id_gefilial_int,
    id_fimoeda_int,
    id_cbetapa_int,
    id_cbsituacaocontrato_int,

    id_cbtiponegocio_int,
    contrato_str,
    cpf_str,
    nome_str,

    novo_layout_str,
    local_trabalho_str,
    produto_str,
    complemento_contrato_str,
    numero_total_parcelas_int,
    dt_bordero_dat,
    observacao_str,
    obs_banco_txt,
    email_str,
    sexo_str,
    estado_civil_str,
    dt_nascimento_dat,
    dt_vencimento_ini_dat,
    numero_bordero_int,
    rg_str,
    indice_str,

    codigo_concessionaria_str,
    nome_concessionaria_str,
    parcelas_pagas_int,
    parcelas_abertas_int,
    comissao_perm_num,
    despesas_finan_num,
    rating_str,
    perc_maxdesc_num,
    entrada_num,
    finan_num,
    tac_num,
    iof_num,
    profissao_str,
    ramo_str,
    dt_admissao_dat,
    data_contrato_dat,
    tipo_plano_str,
    analista_str,
    vendedor_str,
    valor_bem_num,

    tipo_bem_str,
    descricao_bem_str,
    chassis_str,
    placa_str,
    renavam_str,
    modelo_str,
    cor_str,
    ano_str,
    ano_modelo_str,
    marca_str,

    endereco_str,
    complemento_str,
    bairro_str,
    cep_str,
    cidade_str,
    estado_str,
    endereco_trabalho_str,
    bairro_trabalho_str,
    cep_trabalho_str,
    cidade_trabalho_str,
    estado_trabalho_str,
    ddd_str,
    telefone_str,
    ddd_trabalho_str,
    telefone_trabalho_str,

    data_primeira_distrib_dat,
    data_ultima_distrib_dat,
    tstamp,
    id_geusuario_int)

    select
    cliente,
    empresa,
    filial,
    id_fimoeda,
    id_cbetapa,
    1,

    id_cbtiponegocio,
    contrato,
    cpf_cli,
    nome_cli,

    'S',
    trabalho_cli,
    tipo_financiamento,
    complemento_contrato,
    plano,
    dt_bordero,
    observacao,
    observacao_cli,
    url_cli,
    sexo_cli,
    estado_civil_cli,
    dt_nascimento_cli,
    dt_vencimento,
    numero_bordero,
    rg_cli,
    indice,

    codigo_con,
    nome_con,
    parcelas_pagas,
    parcelas_abertas,
    taxa_perm,
    tarifa_bancaria,
    rating,
    taxa,
    entrada,
    finan,
    tac,
    iof,
    profissao_cli,
    ramo_cli,
    dt_admissao,
    dt_contrato,
    tipo_plano,
    analista,
    vendedor,
    valor_bem,

    tipo_bem,
    descricao_bem,
    chassis,
    placa,
    renavam,
    modelo,
    cor,
    ano_fabricacao,
    ano_modelo,
    marca,

    endereco,
    complemento,
    bairro,
    cep,
    cidade,
    estado,
    endereco_trab,
    bairro_trab,
    cep_trab,
    cidade_trab,
    estado_trab,
    ddd_tel,
    numero_tel,
    ddd_trab,
    numero_trab,

    dt_distribuicao,
    dt_distribuicao,
    current_timestamp,
    usuario

    From tmpremessahonda
    Where operacao = '10'
    And inclui_altera = 'I'
    And id_cbtiponegocio Is Not Null;

    -- Atrbui chave na temporï¿½ria(parcelas)
    Update tmpremessahonda Set
    id_cbcontrato = cbcontratohonda.id_cbcontrato_int

    Where operacao = '10'
    And id_cbtiponegocio = cbcontratohonda.id_cbtiponegocio_int
    And contrato = cbcontratohonda.contrato_str
    And id_cbcontrato Is Null;

    -- Parcela
    Insert Into cbparcela
    (id_cbcontrato_int,
    parcela_int,
    data_vencimento_dat,
    valor_principal_num,
    situacao_int,
    tipo_str,
    data_entrada_ca_dat,
    id_esregua_int,

    data_primeira_distrib_dat,
    data_ultima_distrib_dat,
    id_geusuario_int,
    tstamp)

    Select
    id_cbcontrato,
    parcela,
    data_parcela,
    valor_parcela,
    sit_parcela,
    1,
    current_date,
    id_esregua,

    dt_distribuicao,
    dt_distribuicao,
    usuario,
    current_timestamp

    From tmpremessahonda
    Where operacao = '10'
    And inclui_altera_parcela = 'I'
    And id_cbcontrato Is Not Null;

/*
    -- Distribuiï¿½ï¿½o
    Insert Into cbdistribparcela
    (id_cbcontrato_int,
    id_cbparcela_int,
    data_pre_distrib_dat)

    Select
    id_cbcontrato,
    cbparcela.id_cbparcela_int,
    tmpremessahonda.dt_distribuicao

    From tmpremessahonda Inner Join cbparcela On cbparcela.id_cbcontrato_int = tmpremessahonda.id_cbcontrato
    Where operacao = '10'
    And inclui_altera_parcela = 'I'
    And cbparcela.parcela_int = tmpremessahonda.parcela;

*/

    -- Abre contratos que nï¿½o estï¿½o em A/S/J/D
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    evento_str,
    obs_txt)

    Select Distinct
    usuario,
    cliente,
    496,
    current_timestamp,
    cbcontratohonda.contrato_str,
    'Alteraï¿½ao Contrato - Importaï¿½ï¿½o',
    'Situaï¿½ï¿½o do Contrato alterada de ' || cbsituacaocontrato.codigo_str || ' para A'

    From tmpremessahonda Inner Join cbcontratohonda On cbcontratohonda.id_cbcontrato_int = tmpremessahonda.id_cbcontrato
                         Inner Join cbsituacaocontrato On cbcontratohonda.id_cbsituacaocontrato_int = cbsituacaocontrato.id_cbsituacaocontrato_int
    Where cbcontratohonda.id_cbsituacaocontrato_int Not In ('1', '2', '4', '13')
    And tmpremessahonda.operacao = '10'
    And tmpremessahonda.inclui_altera_parcela = 'I';

    Update cbcontratohonda Set id_cbsituacaocontrato_int = 1

    Where cbcontratohonda.id_cbcontrato_int = tmpremessahonda.id_cbcontrato
    And cbcontratohonda.id_cbsituacaocontrato_int Not In ('1', '2', '4', '13')
    And tmpremessahonda.operacao = '10'
    And tmpremessahonda.inclui_altera_parcela = 'I';

end if;

-- Alteraï¿½ï¿½o contrato/parcela
if comando = '10A' then

    -- Contrato
    Update cbcontratohonda Set

    nome_str                  = Coalesce(tmpremessahonda.nome_cli, cbcontratohonda.nome_str),
    local_trabalho_str        = Coalesce(tmpremessahonda.trabalho_cli, cbcontratohonda.local_trabalho_str),
    produto_str               = Coalesce(tmpremessahonda.tipo_financiamento, cbcontratohonda.produto_str),
    complemento_contrato_str  = Coalesce(tmpremessahonda.complemento_contrato, cbcontratohonda.complemento_contrato_str),
    numero_total_parcelas_int = Coalesce(tmpremessahonda.plano, cbcontratohonda.numero_total_parcelas_int),
    dt_bordero_dat            = Coalesce(tmpremessahonda.dt_bordero, cbcontratohonda.dt_bordero_dat),
    observacao_str            = Coalesce(tmpremessahonda.observacao, cbcontratohonda.observacao_str),
    obs_banco_txt             = Coalesce(tmpremessahonda.observacao_cli, cbcontratohonda.obs_banco_txt),
    email_str                 = Coalesce(tmpremessahonda.url_cli, cbcontratohonda.email_str),
    sexo_str                  = Coalesce(tmpremessahonda.sexo_cli, cbcontratohonda.sexo_str),
    estado_civil_str          = Coalesce(tmpremessahonda.estado_civil_cli, cbcontratohonda.estado_civil_str),
    dt_nascimento_dat         = Coalesce(tmpremessahonda.dt_nascimento_cli, cbcontratohonda.dt_nascimento_dat),
    dt_vencimento_ini_dat     = Coalesce(tmpremessahonda.dt_vencimento, cbcontratohonda.dt_vencimento_ini_dat),
    numero_bordero_int        = Coalesce(tmpremessahonda.numero_bordero, cbcontratohonda.numero_bordero_int),
    rg_str                    = Coalesce(tmpremessahonda.rg_cli, cbcontratohonda.rg_str),
    indice_str                = Coalesce(tmpremessahonda.indice, cbcontratohonda.indice_str),
    codigo_concessionaria_str = Coalesce(tmpremessahonda.codigo_con, cbcontratohonda.codigo_concessionaria_str),
    nome_concessionaria_str   = Coalesce(tmpremessahonda.nome_con, cbcontratohonda.nome_concessionaria_str),
    parcelas_pagas_int        = Coalesce(tmpremessahonda.parcelas_pagas, cbcontratohonda.parcelas_pagas_int),
    parcelas_abertas_int      = Coalesce(tmpremessahonda.parcelas_abertas, cbcontratohonda.parcelas_abertas_int),
    comissao_perm_num         = Coalesce(tmpremessahonda.taxa_perm, cbcontratohonda.comissao_perm_num),
    despesas_finan_num        = Coalesce(tmpremessahonda.tarifa_bancaria, cbcontratohonda.despesas_finan_num),
    rating_str                = Coalesce(tmpremessahonda.rating, cbcontratohonda.rating_str),
    entrada_num               = Coalesce(tmpremessahonda.entrada, cbcontratohonda.entrada_num),
    finan_num                 = Coalesce(tmpremessahonda.finan, cbcontratohonda.finan_num),
    tac_num                   = Coalesce(tmpremessahonda.tac, cbcontratohonda.tac_num),
    iof_num                   = Coalesce(tmpremessahonda.iof, cbcontratohonda.iof_num),
    profissao_str             = Coalesce(tmpremessahonda.profissao_cli, cbcontratohonda.profissao_str),
    ramo_str                  = Coalesce(tmpremessahonda.ramo_cli, cbcontratohonda.ramo_str),
    dt_admissao_dat           = Coalesce(tmpremessahonda.dt_admissao, cbcontratohonda.dt_admissao_dat),
    data_contrato_dat         = Coalesce(tmpremessahonda.dt_contrato, cbcontratohonda.data_contrato_dat),
    tipo_plano_str            = Coalesce(tmpremessahonda.tipo_plano, cbcontratohonda.tipo_plano_str),
    analista_str              = Coalesce(tmpremessahonda.analista, cbcontratohonda.analista_str),
    vendedor_str              = Coalesce(tmpremessahonda.vendedor, cbcontratohonda.vendedor_str),
    valor_bem_num             = Coalesce(tmpremessahonda.valor_bem, cbcontratohonda.valor_bem_num),
    tipo_bem_str              = Coalesce(tmpremessahonda.tipo_bem, cbcontratohonda.tipo_bem_str),
    descricao_bem_str         = Coalesce(tmpremessahonda.descricao_bem, cbcontratohonda.descricao_bem_str),
    chassis_str               = Coalesce(tmpremessahonda.chassis, cbcontratohonda.chassis_str),
    placa_str                 = Coalesce(tmpremessahonda.placa, cbcontratohonda.placa_str),
    renavam_str               = Coalesce(tmpremessahonda.renavam, cbcontratohonda.renavam_str),
    modelo_str                = Coalesce(tmpremessahonda.modelo, cbcontratohonda.modelo_str),
    cor_str                   = Coalesce(tmpremessahonda.cor, cbcontratohonda.cor_str),
    ano_str                   = Coalesce(tmpremessahonda.ano_fabricacao, cbcontratohonda.ano_str),
    ano_modelo_str            = Coalesce(tmpremessahonda.ano_modelo, cbcontratohonda.ano_modelo_str),
    marca_str                 = Coalesce(tmpremessahonda.marca, cbcontratohonda.marca_str),

    /*
    endereco_str                            = Coalesce(tmpremessahonda.endereco, cbcontratohonda.endereco_str),
    complemento_str                 = Coalesce(tmpremessahonda.complemento, cbcontratohonda.complemento_str),
    bairro_str                                      = Coalesce(tmpremessahonda.bairro, cbcontratohonda.bairro_str),
    cep_str                                                 = Coalesce(tmpremessahonda.cep, cbcontratohonda.cep_str),
    cidade_str                                      = Coalesce(tmpremessahonda.cidade, cbcontratohonda.cidade_str),
    estado_str                                      = Coalesce(tmpremessahonda.estado, cbcontratohonda.estado_str),
    endereco_trabalho_str                   = Coalesce(tmpremessahonda.endereco_trab, cbcontratohonda.endereco_trabalho_str),
    bairro_trabalho_str                     = Coalesce(tmpremessahonda.bairro_trab, cbcontratohonda.bairro_trabalho_str),
    cep_trabalho_str                                        = Coalesce(tmpremessahonda.cep_trab, cbcontratohonda.cep_trabalho_str),
    cidade_trabalho_str                     = Coalesce(tmpremessahonda.cidade_trab, cbcontratohonda.cidade_trabalho_str),
    estado_trabalho_str                     = Coalesce(tmpremessahonda.estado_trab, cbcontratohonda.estado_trabalho_str),
    */

    data_ultima_distrib_dat = tmpremessahonda.dt_distribuicao,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbcontratohonda.id_cbcontrato_int = tmpremessahonda.id_cbcontrato
    And tmpremessahonda.operacao = '10'
    And tmpremessahonda.inclui_altera = 'A';

    -- Parcela - somente parcela que teve dados alterado
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    parcela_int,
    evento_str,
    obs_txt)

    Select
    usuario,
    cliente,
    496,
    current_timestamp,
    cbcontratohonda.contrato_str,
    tmpremessahonda.parcela,
    'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
    tmpremessahonda.historico

    From tmpremessahonda Inner Join cbcontratohonda On cbcontratohonda.id_cbcontrato_int = tmpremessahonda.id_cbcontrato
                         Inner Join cbparcela On cbparcela.id_cbparcela_int = tmpremessahonda.id_cbparcela
    Where tmpremessahonda.operacao = '10'
    And tmpremessahonda.inclui_altera_parcela = 'A'
    And tmpremessahonda.alterar_parcela = 'S';

    Update cbparcela Set
    data_vencimento_dat = tmpremessahonda.data_parcela,
    valor_principal_num = tmpremessahonda.valor_parcela,
    situacao_int        = Case When (cbparcela.situacao_int In ('4', '6')) Then '0'
                               Else cbparcela.situacao_int
                          End,

    data_ultima_distrib_dat = tmpremessahonda.dt_distribuicao,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbparcela.id_cbparcela_int = tmpremessahonda.id_cbparcela
    And tmpremessahonda.operacao = '10'
    And tmpremessahonda.inclui_altera_parcela = 'A'
    And tmpremessahonda.alterar_parcela = 'S';

    -- Contrato - reabre somente contrato Baixado que teve parcela(s) alterada(s) reenviadas
    Update cbcontratohonda Set id_cbsituacaocontrato_int = 1

    Where cbcontratohonda.id_cbcontrato_int = tmpremessahonda.id_cbcontrato
    And cbcontratohonda.id_cbsituacaocontrato_int = '6'
    And cbparcela.id_cbparcela_int = tmpremessahonda.id_cbparcela
    And cbparcela.situacao_int = '0'
    And tmpremessahonda.operacao = '10'
    And tmpremessahonda.inclui_altera_parcela = 'A'
    And tmpremessahonda.alterar_parcela = 'S';

end if;

-- Baixa de parcela/contrato
if comando = '20' then

    --Follow
    Insert into cbfollowup
    (id_cbcontrato_int,
    id_cbparcela_int,
    data_cobranca_dat,
    data_dat,
    hora_cobranca_tim,
    hora_tim,
    coloca_stand_str,
    alterado_str,
    historico_str,
    id_cbsitcontato_int,
    id_geusuario_int,
    tstamp)

    Select
    tmpremessahonda.id_cbcontrato,
    tmpremessahonda.id_cbparcela,
    current_date,
    current_date,
    current_timestamp,
    current_timestamp,
    'N',
    'N',
    'Pagamento da parcela ' || tmpremessahonda.parcela,
    13175,
    1,
    current_timestamp

    From tmpremessahonda
    Where operacao = '20'
    And situacao  Not In ('4', '6')
    Order by tmpremessahonda.contrato, tmpremessahonda.parcela;

    -- Parcela
    Update cbparcela Set
    data_pagamento_dat = tmpremessahonda.data_pagamento_parcela,
    situacao_int = 4

    Where cbparcela.id_cbparcela_int = tmpremessahonda.id_cbparcela
    And cbparcela.situacao_int Not In ('4', '6')
    And tmpremessahonda.operacao = '20';

    -- Contrato
    for cursor_contrato in
      Select Distinct id_cbcontrato
      From tmpremessahonda
      Where operacao = '20'

    loop

      int_total    := (Select Count(*) From cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato);
      int_baixadas := (Select Count(*) From cbparcela Where id_cbcontrato_int = cursor_contrato.id_cbcontrato And situacao_int In ('4', '6'));

      if int_total = int_baixadas then

        Update cbcontratohonda Set id_cbsituacaocontrato_int = 6
        Where id_cbcontrato_int = cursor_contrato.id_cbcontrato;

      end if;

    end loop;

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12042 (class 0 OID 0)
-- Dependencies: 2031
-- Name: FUNCTION remessa_honda(text, integer, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.remessa_honda(text, integer, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o do Banco Honda - Novo Layout';

--
-- TOC entry 2032 (class 1255 OID 27739)
-- Name: remessa_telefonica(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.remessa_telefonica(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando alias for $1;
cliente alias for $2;
usuario alias for $3;
tela    alias for $4;

BEGIN

-- Inclusï¿½o contrato/parcela
if comando = 'I' then

    -- Contrato
    Insert Into cbcontratotelefonica
    (id_gecliente_int,
    id_geempresa_int,
    id_gefilial_int,
    id_fimoeda_int,
    id_cbsituacaocontrato_int,

    id_cbtiponegocio_int,
    contrato_str,

    cpf_str,
    rg_str,
    nome_str,
    local_telefone_str,
    telefone_str,
    marca_str,
    telefone_cel_str,
    placa_str,
    modelo_str,

    endereco_str,
    complemento_str,
    cidade_str,
    estado_str,
    cep_str,

    data_primeira_distrib_dat,
    data_ultima_distrib_dat,
    tstamp,
    id_geusuario_int)

    Select
    cliente,
    1,
    id_gefilial,
    id_fimoeda,
    1,

    id_cbtiponegocio,
    contrato,

    cpf_cli,
    rg_cli,
    nome_cli,
    local_telefone_cont,
    num_telefone_cont,
    local_telefone,
    num_telefone,
    segmento,
    modalidade,

    endereco_cli,
    comp_endereco_cli,
    cidade_cli,
    uf_cli,
    cep_cli,

    data_movimento,
    data_movimento,
    current_timestamp,
    usuario

    From tmpremessatelefonica
    Where tipo_registro = 'D'
    And inclui_altera = 'I';

    -- Atrbui chave na temporï¿½ria (parcelas)
    Update tmpremessatelefonica Set
    id_cbcontrato = cbcontratotelefonica.id_cbcontrato_int

    Where tipo_registro = 'D'
    And id_cbtiponegocio = cbcontratotelefonica.id_cbtiponegocio_int
    And contrato = cbcontratotelefonica.contrato_str
    And id_cbcontrato Is Null;

    -- Parcela
    Insert Into cbparcela
    (id_cbcontrato_int,
    parcela_int,
    data_vencimento_dat,
    valor_principal_num,
    situacao_int,
    tipo_str,

    numero_unico_str,
    cp_parcela_num,
    valor_multa_num,

    status_registro_str,
    data_status_dat,
    situacao_cacs_str,
    id_str,

    data_primeira_distrib_dat,
    data_ultima_distrib_dat,
    id_geusuario_int,
    tstamp)

    Select
    id_cbcontrato,
    parcela,
    data_parcela,
    valor_parcela,
    0,
    1,

    data_ref_conta,
    valor_correcao,
    valor_pago,

    status,
    data_status,
    cod_rejeicao,
    ident_rejeicao,

    data_movimento,
    data_movimento,
    usuario,
    current_timestamp

    From tmpremessatelefonica
    Where tipo_registro = 'D'
    And inclui_altera_parcela = 'I'
    And id_cbcontrato Is Not Null;

    -- Distribuiï¿½ï¿½o
    Insert Into cbdistribparcela
    (id_cbcontrato_int,
    id_cbparcela_int,
    data_pre_distrib_dat)

    Select
    id_cbcontrato,
    cbparcela.id_cbparcela_int,
    tmpremessatelefonica.data_movimento

    From tmpremessatelefonica Inner Join cbparcela On cbparcela.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
    Where tipo_registro = 'D'
    And inclui_altera_parcela = 'I'
    And cbparcela.parcela_int = tmpremessatelefonica.parcela;

    -- Abre contratos Baixados
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    evento_str,
    obs_txt)

    Select Distinct
    usuario,
    cliente,
    tela,
    current_timestamp,
    tmpremessatelefonica.contrato,
    'Alteraï¿½ao Contrato - Importaï¿½ï¿½o',
    'Situaï¿½ï¿½o do Contrato alterada de B para A - envio de parcela(s)'

    From tmpremessatelefonica Inner Join cbcontratotelefonica On cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
    Where cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'I';

    Update cbcontratotelefonica Set id_cbsituacaocontrato_int = 1

    Where cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
    And cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'I';

    -- Todos os status enviados
    Insert Into cbparcelastatus
    (id_cbparcela_int,
    data_dat,
    status_registro_str,
    data_status_dat,
    valor_principal_num,
    valor_pago_num,
    valor_correcao_num)

    Select
    cbparcela.id_cbparcela_int,
    current_date,
    status,
    data_status,
    valor_parcela,
    valor_pago,
    valor_correcao

    From tmpremessatelefonica Inner Join cbparcela On cbparcela.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
    Where tipo_registro = 'D'
    And inclui_altera_parcela = 'I'
    And cbparcela.parcela_int = tmpremessatelefonica.parcela;

end if;

-- Alteraï¿½ï¿½o contrato/parcela
if comando = 'A' then

    -- Contrato
    Update cbcontratotelefonica Set

    nome_str          = Coalesce(tmpremessatelefonica.nome_cli, cbcontratotelefonica.nome_str),
--    cpf_str         = Coalesce(tmpremessatelefonica.cpf_cli, cbcontratotelefonica.cpf_str),
--    rg_str          = Coalesce(tmpremessatelefonica.rg_cli, cbcontratotelefonica.rg_str),
    marca_str         = Coalesce(tmpremessatelefonica.local_telefone_cont, cbcontratotelefonica.marca_str),
    telefone_cel_str  = Coalesce(tmpremessatelefonica.num_telefone_cont, cbcontratotelefonica.telefone_cel_str),
    modelo_str        = Coalesce(tmpremessatelefonica.modalidade, cbcontratotelefonica.modelo_str),
    placa_str         = Coalesce(tmpremessatelefonica.segmento, cbcontratotelefonica.placa_str),

/*
    local_telefone      = Coalesce(tmpremessatelefonica.local_telefone, cbcontratotelefonica.local_telefone_str),
    num_telefone        = Coalesce(tmpremessatelefonica.num_telefone, cbcontratotelefonica.telefone_str),
    endereco_cli        = Coalesce(tmpremessatelefonica.endereco_cli, cbcontratotelefonica.endereco_str),
    comp_endereco_cli   = Coalesce(tmpremessatelefonica.comp_endereco_cli, cbcontratotelefonica.complemento_str),
    cidade_cli          = Coalesce(tmpremessatelefonica.cidade_cli, cbcontratotelefonica.cidade_str),
    uf_cli              = Coalesce(tmpremessatelefonica.uf_cli, cbcontratotelefonica.estado_str),
    cep_cli             = Coalesce(tmpremessatelefonica.cep_cli, cbcontratotelefonica.cep_str),
*/

    data_ultima_distrib_dat = tmpremessatelefonica.data_movimento,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera = 'A';

    -- Parcela - somente parcela que teve dados alterado
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    parcela_int,
    evento_str,
    obs_txt)

    Select
    usuario,
    cliente,
    tela,
    current_timestamp,
    tmpremessatelefonica.contrato,
    tmpremessatelefonica.parcela,
    'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
    tmpremessatelefonica.historico

    From tmpremessatelefonica
    Where tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'A'
    And tmpremessatelefonica.alterar_parcela = 'S';

    Update cbparcela Set
    data_vencimento_dat = tmpremessatelefonica.data_parcela,
    valor_principal_num = tmpremessatelefonica.valor_parcela,
    situacao_int        = Case When (cbparcela.situacao_int In ('4', '6')) Then '0'
                               Else cbparcela.situacao_int
                          End,

    cp_parcela_num  = tmpremessatelefonica.valor_correcao,
    valor_multa_num = tmpremessatelefonica.valor_pago,

    data_ultima_distrib_dat = tmpremessatelefonica.data_movimento,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbparcela.id_cbparcela_int = tmpremessatelefonica.id_cbparcela
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'A'
    And tmpremessatelefonica.alterar_parcela = 'S';

    -- Abre contrato Baixado que teve parcela(s) alterada(s) reenviada
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    evento_str,
    obs_txt)

    Select Distinct
    usuario,
    cliente,
    tela,
    current_timestamp,
    tmpremessatelefonica.contrato,
    'Alteraï¿½ao Contrato - Importaï¿½ï¿½o',
    'Situaï¿½ï¿½o do Contrato alterada de B para A - reenvio de parcela(s)'

    From tmpremessatelefonica Inner Join cbcontratotelefonica On cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
                              Inner Join cbparcela            On cbparcela.id_cbparcela_int = tmpremessatelefonica.id_cbparcela
    Where cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And cbparcela.situacao_int = '0'
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'A'
    And tmpremessatelefonica.alterar_parcela = 'S';

    Update cbcontratotelefonica Set id_cbsituacaocontrato_int = 1

    Where cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica.id_cbcontrato
    And cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And cbparcela.id_cbparcela_int = tmpremessatelefonica.id_cbparcela
    And cbparcela.situacao_int = '0'
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'A'
    And tmpremessatelefonica.alterar_parcela = 'S';

    -- ï¿½ltimo status/rejeiï¿½ao enviados
    Update cbparcela Set
    status_registro_str = tmpremessatelefonica.status,
    data_status_dat     = tmpremessatelefonica.data_status,
    situacao_cacs_str   = tmpremessatelefonica.cod_rejeicao,
    id_str              = tmpremessatelefonica.ident_rejeicao,

    data_ultima_distrib_dat = tmpremessatelefonica.data_movimento,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbparcela.id_cbparcela_int = tmpremessatelefonica.id_cbparcela
    And tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'A';

    -- Todos os status enviados
    Insert Into cbparcelastatus
    (id_cbparcela_int,
    data_dat,
    status_registro_str,
    data_status_dat,
    valor_principal_num,
    valor_pago_num,
    valor_correcao_num)

    Select
    id_cbparcela,
    current_date,
    status,
    data_status,
    valor_parcela,
    valor_pago,
    valor_correcao

    From tmpremessatelefonica
    Where tmpremessatelefonica.tipo_registro = 'D'
    And tmpremessatelefonica.inclui_altera_parcela = 'A';

    Insert into cbfollowup
    (id_cbcontrato_int,
    id_cbparcela_int,
    data_cobranca_dat,
    data_dat,
    hora_cobranca_tim,
    hora_tim,
    coloca_stand_str,
    alterado_str,
    historico_str,
    id_cbsitcontato_int,
    id_geusuario_int,
    tstamp)

    Select Distinct
    tmpremessatelefonica.id_cbcontrato,
    tmpremessatelefonica.id_cbparcela,
    current_date,
    current_date,
    current_timestamp,
    current_timestamp,
    'N',
    'N',
    tmpremessatelefonica.historico_follow,
    tmpremessatelefonica.id_cbsitcontato,
    1,
    current_timestamp

    From tmpremessatelefonica
    Where tipo_registro = 'D'
    And gerar_follow = 'S';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 12043 (class 0 OID 0)
-- Dependencies: 2032
-- Name: FUNCTION remessa_telefonica(text, integer, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.remessa_telefonica(text, integer, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o Telefonica';

--
-- TOC entry 2033 (class 1255 OID 27752)
-- Name: remessa_telefonica1(text, integer, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.remessa_telefonica1(text, integer, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$DECLARE

comando alias for $1;
cliente alias for $2;
usuario alias for $3;
tela    alias for $4;

BEGIN

-- Inclusï¿½o contrato/parcela
if comando = 'I' then

    -- Contrato
    Insert Into cbcontratotelefonica
    (id_gecliente_int,
    id_geempresa_int,
    id_gefilial_int,
    id_fimoeda_int,
    id_cbsituacaocontrato_int,

    id_cbtiponegocio_int,
    contrato_str,

    cpf_str,
    rg_str,
    nome_str,
    local_telefone_str,
    telefone_str,
    marca_str,
    telefone_cel_str,
    placa_str,
    modelo_str,

    endereco_str,
    complemento_str,
    cidade_str,
    estado_str,
    cep_str,

    data_primeira_distrib_dat,
    data_ultima_distrib_dat,
    tstamp,
    id_geusuario_int)

    Select
    cliente,
    1,
    id_gefilial,
    id_fimoeda,
    1,

    id_cbtiponegocio,
    contrato,

    cpf_cli,
    rg_cli,
    nome_cli,
    local_telefone_cont,
    num_telefone_cont,
    local_telefone,
    num_telefone,
    segmento,
    modalidade,

    endereco_cli,
    comp_endereco_cli,
    cidade_cli,
    uf_cli,
    cep_cli,

    data_movimento,
    data_movimento,
    current_timestamp,
    usuario

    From tmpremessatelefonica1
    Where tipo_registro = 'D'
    And inclui_altera = 'I';

    -- Atrbui chave na temporï¿½ria (parcelas)
    Update tmpremessatelefonica1 Set
    id_cbcontrato = cbcontratotelefonica.id_cbcontrato_int

    Where tipo_registro = 'D'
    And id_cbtiponegocio = cbcontratotelefonica.id_cbtiponegocio_int
    And contrato = cbcontratotelefonica.contrato_str
    And id_cbcontrato Is Null;

    -- Parcela
    Insert Into cbparcela
    (id_cbcontrato_int,
    parcela_int,
    data_vencimento_dat,
    valor_principal_num,
    situacao_int,
    tipo_str,

    numero_unico_str,
    cp_parcela_num,
    valor_multa_num,

    status_registro_str,
    data_status_dat,
    situacao_cacs_str,
    id_str,

    data_primeira_distrib_dat,
    data_ultima_distrib_dat,
    id_geusuario_int,
    tstamp)

    Select
    id_cbcontrato,
    parcela,
    data_parcela,
    valor_parcela,
    0,
    1,

    data_ref_conta,
    valor_correcao,
    valor_pago,

    status,
    data_status,
    cod_rejeicao,
    ident_rejeicao,

    data_movimento,
    data_movimento,
    usuario,
    current_timestamp

    From tmpremessatelefonica1
    Where tipo_registro = 'D'
    And inclui_altera_parcela = 'I'
    And id_cbcontrato Is Not Null;

    -- Distribuiï¿½ï¿½o
    Insert Into cbdistribparcela
    (id_cbcontrato_int,
    id_cbparcela_int,
    data_pre_distrib_dat)

    Select
    id_cbcontrato,
    cbparcela.id_cbparcela_int,
    tmpremessatelefonica1.data_movimento

    From tmpremessatelefonica1 Inner Join cbparcela On cbparcela.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
    Where tipo_registro = 'D'
    And inclui_altera_parcela = 'I'
    And cbparcela.parcela_int = tmpremessatelefonica1.parcela;

    -- Abre contratos Baixados
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    evento_str,
    obs_txt)

    Select Distinct
    usuario,
    cliente,
    tela,
    current_timestamp,
    tmpremessatelefonica1.contrato,
    'Alteraï¿½ao Contrato - Importaï¿½ï¿½o',
    'Situaï¿½ï¿½o do Contrato alterada de B para A - envio de parcela(s)'

    From tmpremessatelefonica1 Inner Join cbcontratotelefonica On cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
    Where cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'I';

    Update cbcontratotelefonica Set id_cbsituacaocontrato_int = 1

    Where cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
    And cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'I';

    -- Todos os status enviados
    Insert Into cbparcelastatus
    (id_cbparcela_int,
    data_dat,
    status_registro_str,
    data_status_dat,
    valor_principal_num,
    valor_pago_num,
    valor_correcao_num)

    Select
    cbparcela.id_cbparcela_int,
    current_date,
    status,
    data_status,
    valor_parcela,
    valor_pago,
    valor_correcao

    From tmpremessatelefonica1 Inner Join cbparcela On cbparcela.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
    Where tipo_registro = 'D'
    And inclui_altera_parcela = 'I'
    And cbparcela.parcela_int = tmpremessatelefonica1.parcela;

end if;

-- Alteraï¿½ï¿½o contrato/parcela
if comando = 'A' then

    -- Contrato
    Update cbcontratotelefonica Set

    nome_str          = Coalesce(tmpremessatelefonica1.nome_cli, cbcontratotelefonica.nome_str),
--    cpf_str         = Coalesce(tmpremessatelefonica1.cpf_cli, cbcontratotelefonica.cpf_str),
--    rg_str          = Coalesce(tmpremessatelefonica1.rg_cli, cbcontratotelefonica.rg_str),
    marca_str         = Coalesce(tmpremessatelefonica1.local_telefone_cont, cbcontratotelefonica.marca_str),
    telefone_cel_str  = Coalesce(tmpremessatelefonica1.num_telefone_cont, cbcontratotelefonica.telefone_cel_str),
    modelo_str        = Coalesce(tmpremessatelefonica1.modalidade, cbcontratotelefonica.modelo_str),
    placa_str         = Coalesce(tmpremessatelefonica1.segmento, cbcontratotelefonica.placa_str),

/*
    local_telefone      = Coalesce(tmpremessatelefonica1.local_telefone, cbcontratotelefonica.local_telefone_str),
    num_telefone        = Coalesce(tmpremessatelefonica1.num_telefone, cbcontratotelefonica.telefone_str),
    endereco_cli        = Coalesce(tmpremessatelefonica1.endereco_cli, cbcontratotelefonica.endereco_str),
    comp_endereco_cli   = Coalesce(tmpremessatelefonica1.comp_endereco_cli, cbcontratotelefonica.complemento_str),
    cidade_cli          = Coalesce(tmpremessatelefonica1.cidade_cli, cbcontratotelefonica.cidade_str),
    uf_cli              = Coalesce(tmpremessatelefonica1.uf_cli, cbcontratotelefonica.estado_str),
    cep_cli             = Coalesce(tmpremessatelefonica1.cep_cli, cbcontratotelefonica.cep_str),
*/

    data_ultima_distrib_dat = tmpremessatelefonica1.data_movimento,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera = 'A';

    -- Parcela - somente parcela que teve dados alterado
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    parcela_int,
    evento_str,
    obs_txt)

    Select
    usuario,
    cliente,
    tela,
    current_timestamp,
    tmpremessatelefonica1.contrato,
    tmpremessatelefonica1.parcela,
    'Alteraï¿½ï¿½o da Parcela - Importaï¿½ï¿½o',
    tmpremessatelefonica1.historico

    From tmpremessatelefonica1
    Where tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'A'
    And tmpremessatelefonica1.alterar_parcela = 'S';

    Update cbparcela Set
    data_vencimento_dat = tmpremessatelefonica1.data_parcela,
    valor_principal_num = tmpremessatelefonica1.valor_parcela,
    situacao_int        = Case When (cbparcela.situacao_int In ('4', '6')) Then '0'
                               Else cbparcela.situacao_int
                          End,

    cp_parcela_num  = tmpremessatelefonica1.valor_correcao,
    valor_multa_num = tmpremessatelefonica1.valor_pago,

    data_ultima_distrib_dat = tmpremessatelefonica1.data_movimento,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbparcela.id_cbparcela_int = tmpremessatelefonica1.id_cbparcela
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'A'
    And tmpremessatelefonica1.alterar_parcela = 'S';

    -- Abre contrato Baixado que teve parcela(s) alterada(s) reenviada
    Insert Into gehistoricousuario
    (id_geusuario_int,
    id_gecliente_int,
    id_geaplicacao_int,
    data_hora_dat,
    contrato_str,
    evento_str,
    obs_txt)

    Select Distinct
    usuario,
    cliente,
    tela,
    current_timestamp,
    tmpremessatelefonica1.contrato,
    'Alteraï¿½ao Contrato - Importaï¿½ï¿½o',
    'Situaï¿½ï¿½o do Contrato alterada de B para A - reenvio de parcela(s)'

    From tmpremessatelefonica1 Inner Join cbcontratotelefonica On cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
                              Inner Join cbparcela            On cbparcela.id_cbparcela_int = tmpremessatelefonica1.id_cbparcela
    Where cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And cbparcela.situacao_int = '0'
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'A'
    And tmpremessatelefonica1.alterar_parcela = 'S';

    Update cbcontratotelefonica Set id_cbsituacaocontrato_int = 1

    Where cbcontratotelefonica.id_cbcontrato_int = tmpremessatelefonica1.id_cbcontrato
    And cbcontratotelefonica.id_cbsituacaocontrato_int = '6'
    And cbparcela.id_cbparcela_int = tmpremessatelefonica1.id_cbparcela
    And cbparcela.situacao_int = '0'
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'A'
    And tmpremessatelefonica1.alterar_parcela = 'S';

    -- ï¿½ltimo status/rejeiï¿½ao enviados
    Update cbparcela Set
    status_registro_str = tmpremessatelefonica1.status,
    data_status_dat     = tmpremessatelefonica1.data_status,
    situacao_cacs_str   = tmpremessatelefonica1.cod_rejeicao,
    id_str              = tmpremessatelefonica1.ident_rejeicao,

    data_ultima_distrib_dat = tmpremessatelefonica1.data_movimento,
    tstamp                  = current_timestamp,
    id_geusuario_int        = usuario

    Where cbparcela.id_cbparcela_int = tmpremessatelefonica1.id_cbparcela
    And tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'A';

    -- Todos os status enviados
    Insert Into cbparcelastatus
    (id_cbparcela_int,
    data_dat,
    status_registro_str,
    data_status_dat,
    valor_principal_num,
    valor_pago_num,
    valor_correcao_num)

    Select
    id_cbparcela,
    current_date,
    status,
    data_status,
    valor_parcela,
    valor_pago,
    valor_correcao

    From tmpremessatelefonica1
    Where tmpremessatelefonica1.tipo_registro = 'D'
    And tmpremessatelefonica1.inclui_altera_parcela = 'A';

    Insert into cbfollowup
    (id_cbcontrato_int,
    id_cbparcela_int,
    data_cobranca_dat,
    data_dat,
    hora_cobranca_tim,
    hora_tim,
    coloca_stand_str,
    alterado_str,
    historico_str,
    id_cbsitcontato_int,
    id_geusuario_int,
    tstamp)

    Select Distinct
    tmpremessatelefonica1.id_cbcontrato,
    tmpremessatelefonica1.id_cbparcela,
    current_date,
    current_date,
    current_timestamp,
    current_timestamp,
    'N',
    'N',
    tmpremessatelefonica1.historico_follow,
    tmpremessatelefonica1.id_cbsitcontato,
    1,
    current_timestamp

    From tmpremessatelefonica1
    Where tipo_registro = 'D'
    And gerar_follow = 'S';

end if;

RETURN NULL;
END;
$_$;

--
-- TOC entry 2034 (class 1255 OID 27758)
-- Name: retnotif_fiat(text, integer, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.retnotif_fiat(text, integer, integer) RETURNS integer
    LANGUAGE plpgsql
    AS $_$

DECLARE
        comando alias for $1;
        usuario alias for $2;
        cliente alias for $3;

BEGIN

	if comando = '1' then

		update cbdespesa set
		  ar_str = retnotif_fiat.ar_str,
		  data_ar_dat = retnotif_fiat.data_ar_dat,
		  protocolo_int = retnotif_fiat.protocolo_int,
		  livro_protocolo_str = retnotif_fiat.livro_protocolo_str,
		  registro_int = retnotif_fiat.registro_int,
		  livro_registro_str = retnotif_fiat.livro_registro_str,
		  notificado_str = retnotif_fiat.notificado_str,
		  data_retorno_dat = retnotif_fiat.data_retorno_dat,
		  id_geusuario_int = usuario,
		  timestamp = now()

		where retnotif_fiat.vlr_inicial_str = comando
		 	 	  and cbdespesa.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int
				  and cbcontratofiat.contrato_str = retnotif_fiat.contrato_str
					and cbdespesa.data_dat = retnotif_fiat.data_notif_dat
-- Tolerï¿½ncia de 5 dias
--                                      and cbdespesa.data_dat between retnotif_fiat.data_notif_dat
--                                                                 and retnotif_fiat.data_notif_dat + interval '5 day'
					and cbcontratofiat.id_cbtiponegocio_int =
					case
						when retnotif_fiat.tipo_negocio_int = '1' then '1'
						when retnotif_fiat.tipo_negocio_int = '2' then '2'
				 		when retnotif_fiat.tipo_negocio_int = '5' then '3'
						when retnotif_fiat.tipo_negocio_int = '4' then '4'
						when retnotif_fiat.tipo_negocio_int = '6' then '5'
						when retnotif_fiat.tipo_negocio_int = '7' then '6'
          end;

	end if;

-- Table: retnotif_fiat
--CREATE TABLE retnotif_fiat (
--  vlr_inicial_str varchar(1),
--  ar_str varchar(20),
--  contrato_str varchar(30),
--  data_ar_dat date,
--  data_envio_dat date,
--  data_notif_dat date,
--  data_retorno_dat date,
--  livro_protocolo_str varchar(3),
--  livro_registro_str varchar(3),
--  notificado_str varchar(1),
--  parcela_final_int int8,
--  parcela_inicial_int int8,
--  protocolo_int int8,
--  registro_int int8,
--  tipo_negocio_int int8
--) WITH OIDS;

RETURN NULL;
end;
$_$;

--
-- TOC entry 12044 (class 0 OID 0)
-- Dependencies: 2034
-- Name: FUNCTION retnotif_fiat(text, integer, integer); Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON FUNCTION public.retnotif_fiat(text, integer, integer) IS 'Funï¿½ï¿½o de Importaï¿½ï¿½o Retorno Despesa/Cartï¿½rio Fiat';

--
-- TOC entry 2035 (class 1255 OID 27765)
-- Name: rm_special_chars(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.rm_special_chars(stexto text) RETURNS text
    LANGUAGE plpgsql STABLE
    AS $$
DECLARE
  stextonovo TEXT;
BEGIN
  -- Tabela ASCII
  -- Caracteres nï¿½o imprimiveis, 33 ao total, menos o NUL fica 32 
                                                     --  hex d abr ctl descricao  
                                                     --  00  0 NUL ^@ Null - Nulo desativado, pois o nulo no postgres funciona em forma de cascata 
  stextonovo := TRANSLATE(stexto,     chr(01),'');   --  01  1 SOH ^A Start of Header - Inï¿½cio do cabeï¿½alho
  stextonovo := TRANSLATE(stextonovo, chr(02),'');   --  02  2 STX ^B Start of Text - Inï¿½cio do texto
  stextonovo := TRANSLATE(stextonovo, chr(03),'');   --  03  3 ETX ^C End of Text - Fim do texto
  stextonovo := TRANSLATE(stextonovo, chr(04),'');   --  04  4 EOT ^D End of Tape - Fim de fita
  stextonovo := TRANSLATE(stextonovo, chr(05),'');   --  05  5 ENQ ^E Enquire - Interroga identidade do terminal
  stextonovo := TRANSLATE(stextonovo, chr(06),'');   --  06  6 ACK ^F Acknowledge - Reconhecimento
  stextonovo := TRANSLATE(stextonovo, chr(07),'');   --  07  7 BEL ^G Bell - Campainha
  stextonovo := TRANSLATE(stextonovo, chr(08),'');   --  08  8 BS  ^H  Back-space - Espaï¿½o atrï¿½s
  stextonovo := TRANSLATE(stextonovo, chr(09),'');   --  09  9 HT  ^I  Horizontal Tabulation - Tabulaï¿½ï¿½o horizontal
  stextonovo := TRANSLATE(stextonovo, chr(10),'');   --  0A 10 LF  ^J Line-Feed - Alimenta linha
  stextonovo := TRANSLATE(stextonovo, chr(11),'');   --  0B 11 VT  ^K  Vertical Tabulation - Tabulaï¿½ï¿½o vertical  
  stextonovo := TRANSLATE(stextonovo, chr(12),'');   --  0C 12 FF  ^L Form-Feed - Alimenta formulï¿½rio  
  stextonovo := TRANSLATE(stextonovo, chr(13),'');   --  0D 13 CR  ^M Carriage-Return - Retorno do carro (enter)
  stextonovo := TRANSLATE(stextonovo, chr(14),'');   --  0E 14 SO  ^N Shift-Out - Saï¿½da do shift (passa a usar caracteres de baixo da tecla - minï¿½sculas, etc.)
  stextonovo := TRANSLATE(stextonovo, chr(15),'');   --  0F 15 SI  ^O Shift-In-Ent. no shift (passa a usar carac. de cima da tecla: maiï¿½sculas, carac. especiais, etc.)  
  stextonovo := TRANSLATE(stextonovo, chr(16),'');   --  10 16 DLE ^P Data-Link Escape
  stextonovo := TRANSLATE(stextonovo, chr(17),'');   --  11 17 DC1 ^Q Device-Control 1
  stextonovo := TRANSLATE(stextonovo, chr(18),'');   --  12 18 DC2 ^R Device-Control 2
  stextonovo := TRANSLATE(stextonovo, chr(19),'');   --  13 19 DC3 ^S Device-Control 3
  stextonovo := TRANSLATE(stextonovo, chr(20),'');   --  14 20 DC4 ^T Device-Control 4
  stextonovo := TRANSLATE(stextonovo, chr(21),'');   --  15 21 NAK ^U Neg-Acknowledge - Nï¿½o-reconhecimento
  stextonovo := TRANSLATE(stextonovo, chr(22),'');   --  16 22 SYN ^V Synchronous Idle
  stextonovo := TRANSLATE(stextonovo, chr(23),'');   --  17 23 vETB^W  End-of-Transmission Block
  stextonovo := TRANSLATE(stextonovo, chr(24),'');   --  18 24 CAN ^X Cancel
  stextonovo := TRANSLATE(stextonovo, chr(25),'');   --  19 25 EM  ^Y  End-Of-Medium
  stextonovo := TRANSLATE(stextonovo, chr(26),'');   --  1A 26 SUB ^Z Substitute
  stextonovo := TRANSLATE(stextonovo, chr(27),'');   --  1B 27 ESC ^[ Escape
  stextonovo := TRANSLATE(stextonovo, chr(28),'');   --  1C 28 FS  ^\  File Separator
  stextonovo := TRANSLATE(stextonovo, chr(29),'');   --  1D 29 GS  ^] Group Separator
  stextonovo := TRANSLATE(stextonovo, chr(30),'');   --  1E 30 RS  ^^  Record Separator
  stextonovo := TRANSLATE(stextonovo, chr(31),'');   --  1F 31 US  ^_ Unit Separator
  stextonovo := TRANSLATE(stextonovo, chr(127),'');  --  7F127 DEL ^?  Delete
  stextonovo := REPLACE(stextonovo, E'/', '') ; 
  stextonovo := REPLACE(stextonovo, E'''', '') ; 
  stextonovo := REPLACE(stextonovo, E'.', '') ; 
  stextonovo := REPLACE(stextonovo, E'-', '') ; 
  stextonovo := REPLACE(stextonovo, E'\\', '') ; 
  stextonovo := REPLACE(stextonovo, E'\\n', '');       --  Remove caracter de quebra de linha 
  stextonovo := REPLACE(stextonovo, E';', '');       --  Remove caracter de quebra de linha 
 
  RETURN stextonovo;
END;
$$;

--
-- TOC entry 2036 (class 1255 OID 27773)
-- Name: roll_back(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.roll_back() RETURNS text
    LANGUAGE plpgsql
    AS $$
declare
 registro record;
 SQLs text;
 Begin
     SQLs := ' ';
 for registro in select * from replica_tabelas LOOP -- where tabela not in ('geuf', 'cbdistribparcela') loop
        EXECUTE 'drop trigger tr_ins_' || registro.tabela || ' on ' || registro.tabela || ';';
        EXECUTE 'drop trigger tr_upd_'|| registro.tabela ||' on '|| registro.tabela ||';';
        EXECUTE 'drop trigger tr_del_'|| registro.tabela ||' on '|| registro.tabela ||';';
        EXECUTE 'drop function ftr_ins_'|| registro.tabela ||'();';
        EXECUTE 'drop function ftr_upd_'|| registro.tabela ||'();';
        EXECUTE 'drop function ftr_del_'|| registro.tabela ||'();';
    --  EXECUTE 'drop function fchamada_'|| registro.tabela ||'();';
    --  EXECUTE 'drop function repl_atualiza_'|| registro.tabela ||'();';
    --  EXECUTE 'ALTER TABLE ' || registro.tabela || '_r ADD COLUMN data_hora  TIMESTAMP(0) WITHOUT TIME ZONE;';
    --  EXECUTE 'ALTER TABLE ' || registro.tabela || '_r ALTER COLUMN data_hora SET DEFAULT current_timestamp;';
  SQLs := SQLs || registro.tabela || ' - ';
 end loop;
-- return 'OK';
    return SQLs;
 end;
$$;

--
-- TOC entry 2037 (class 1255 OID 27785)
-- Name: round(double precision, integer); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.round(double precision, integer) RETURNS double precision
    LANGUAGE sql IMMUTABLE
    AS $_$

       select cast(round(cast($1 as numeric),$2) as double precision);

$_$;

--
-- TOC entry 2038 (class 1255 OID 27792)
-- Name: smartfcampo(text, integer, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.smartfcampo(text, integer, text) RETURNS text
    LANGUAGE plpgsql STRICT
    AS $_$
declare
   campos text;
   registro record;
   rec2 record;
   tabela alias for $1;
   tipo alias for $2;
   valor alias for $3;

--------------------------------------------------------------------------------
-- PLANAE - TECNOLOGIA DA INFORMACAO
-- By CARLOS E. Smanioto
--  Paramentro numerico:
--  1) Usado geralmente em insert ou em situacoes onde
--     new.campo, new.campo2, new.campo3: New ï¿½ parametro valor
--  2) Usado geralmente em update ou em situacoes onde
--     campo = new.campo, campo2 = new.campo2 onde new ï¿½ parametro valor
--  3) Usado em clausula where
--     campos = new.campo and campo2 = new.campo2 onde new ï¿½ parametro valor
--------------------------------------------------------------------------------
Begin
 campos := '';
     for registro in EXECUTE 'select at.attname as nome, ty.typname as tipo from pg_attribute as at, pg_type as ty where at.attname not like ''%pg.dropped%'' and ty.oid = at.atttypid and at.attnum > 0 and attrelid = (SELECT oid FROM pg_class where relname = ' || '''' || tabela || '''' || ') order by at.attnum' loop
  --  for registro in EXECUTE 'select at.attname as nome, ty.typname as tipo  from pg_attribute as at, pg_type as ty  where attname not in(''ctid'',''oid'',''xmin'',''cmin'',''xmax'',''cmax'',''tableoid'') and ty.oid = at.atttypid and at.attrelid in (SELECT oid FROM pg_class where relname = ' || '''' || tabela || '''' || ')' loop
    if tipo = 1 then
      if campos = '' then
           campos :=  valor || '.' || registro.nome;
       else
             campos := campos || ', '  || valor || '.' ||  registro.nome;
       end if;
    End if;

     if tipo = 2 then
             if campos = '' then
                     campos :=  registro.nome || '= ' || valor || '.' || registro.nome;
             else
                campos := campos || ', ' || registro.nome || '= ' || valor || '.' || registro.nome;
             end if;
    end if;

    if tipo = 3 then
         if campos = '' then
             campos :=  registro.nome || '= ' || valor || '.' || registro.nome;
         else
             campos := campos || ' and ' || registro.nome || '= ' || valor || '.' || registro.nome;
         end if;
    end if;

    if tipo = 4 then
       if registro.nome <> 'idreplicacao' then
  		if registro.tipo = 'text' or registro.tipo = 'char' or registro.tipo = 'varchar' or registro.tipo = 'timestamptz' then
  			if campos = '' then
  				campos :=  ' ''''''''''''||' || valor || '.' || registro.nome || '||'''''''''''' ';
           -- end if;
  			else
				campos := campos || ',' ||  ' ''''''''''''||' || valor || '.' || registro.nome ||  '||'''''''''''' ';
            end if;
	   	else
  			if campos = '' then
  				campos :=   ' ''''||' || valor || '.' || registro.nome || '||'''' ';
  			else
				campos := campos || ',' || ' ''''||'  || valor || '.' || registro.nome || '||'''' ';
            end if;
		end if;
      end if; -- registro.nome
     end if;

    if tipo = 5 then
       if registro.nome <> 'idreplicacao' then
  		if registro.tipo = 'text' or registro.tipo = 'char' or registro.tipo = 'varchar' or registro.tipo = 'timestamptz' then
  			if campos = '' then
  				campos := registro.nome || '=  ''''''''''''||' || valor || '.' || registro.nome ||  '||'''''''''''' ';
  			else
				campos := campos || ',' || registro.nome || '=  ''''''''''''||' || valor || '.' || registro.nome ||  '||'''''''''''' ';
            end if;
	   	else
  			if campos = '' then
  				campos :=  registro.nome || '= ''''||' || valor || '.' || registro.nome || '||'''' ';
  			else
				campos := campos || ',' || registro.nome || '= ''''||' || valor || '.' || registro.nome || '||'''' ';
            end if;
		end if;
      end if; -- registro.nome
     end if;

end loop;
return campos;
end;
$_$;

--
-- TOC entry 2039 (class 1255 OID 27802)
-- Name: to_number(text, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.to_number(text, bigint) RETURNS double precision
    LANGUAGE sql IMMUTABLE
    AS $_$

       select cast(pg_catalog.to_number(cast($1 as text),$2::text) as double precision);

$_$;

--
-- TOC entry 2040 (class 1255 OID 27809)
-- Name: to_number(text, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.to_number(text, text) RETURNS numeric
    LANGUAGE internal IMMUTABLE STRICT
    AS $$numeric_to_number$$;

--
-- TOC entry 2041 (class 1255 OID 27810)
-- Name: to_number(character varying, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.to_number(character varying, text) RETURNS numeric
    LANGUAGE internal IMMUTABLE STRICT
    AS $$numeric_to_number$$;

--
-- TOC entry 2042 (class 1255 OID 27820)
-- Name: tr_bloqueio_desconhece_cliente(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.tr_bloqueio_desconhece_cliente() RETURNS trigger
    LANGUAGE plpgsql
    AS $_$
						declare
						    block           RECORD;
						    id_gecliente    BIGINT := 0;
						    bloqueado       BOOLEAN := false::bool;
						begin 
						    IF (SELECT CASE 
						        WHEN NEW.contato_str ~ '^[0-9]+$' THEN TRUE ELSE FALSE END) = FALSE THEN
						        RETURN NEW;
						    END IF;
						    
						    IF(TG_OP = 'INSERT' OR 
						        (TG_OP = 'UPDATE'))THEN
						        FOR block IN EXECUTE 'SELECT contato_str, cpf_str, id_geqlcliente_int 
						                                FROM es_blocklist_desconhece_bloqueados 
						                                WHERE contato_str = ''' || new.contato_str ||''' 
						                                ORDER BY id_geqlcliente_int, cpf_str'
						        LOOP
						            IF(block.id_geqlcliente_int = new.id_geqlcliente_int) THEN
						                bloqueado = true;
						                EXIT;
						            ELSEIF(coalesce(block.cpf_str, '') != '')THEN
						                SELECT distinct gc.id_geqlcliente_int INTO id_gecliente
						                FROM cbcontratoeleva c
						                INNER JOIN geqlcontrato gc ON gc.id_cbcontrato_int = c.id_cbcontrato_int
						                WHERE c.cpf_str = block.cpf_str
						                    AND gc.id_geqlcliente_int = new.id_geqlcliente_int;
						
						                IF(id_gecliente != 0) THEN
						                    bloqueado = true;
						                    IF(block.id_geqlcliente_int isnull) THEN
						                        BEGIN
						                            UPDATE es_blocklist_desconhece_bloqueados SET id_geqlcliente_int = id_gecliente WHERE cpf_str = block.cpf_str AND id_geqlcliente_int ISNULL;
						                        EXCEPTION
						                            WHEN unique_violation THEN
						                            EXIT;
						                        END;
						                    ELSE
						                        BEGIN
						                            INSERT INTO es_blocklist_desconhece_bloqueados (contato_str, cpf_str, id_geqlcliente_int) 
						                                VALUES(new.contato_str, block.cpf_str, id_gecliente);
						                        EXCEPTION
						                            WHEN unique_violation THEN
						                            EXIT;
						                        END;
						                        EXIT;
						                    END IF;
						                END IF;
						            END IF;
						        END LOOP;
						        
						        IF(bloqueado)THEN
						            new.excluido_bit = '1';
						            new.bloqueado_bit = '1';
						            new.classificacao_str = '3 - Ruim';
						            new.observacao_str = 'trigger: tr_bloqueio_desconhece_cliente';
						        END IF;
						    END IF;
						    RETURN NEW;
						END;
					$_$;

--
-- TOC entry 2043 (class 1255 OID 27829)
-- Name: tr_bloqueio_telefone_suspeito(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.tr_bloqueio_telefone_suspeito() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
 
declare
registro RECORD;
tel_formatado varchar;
begin   
    IF(TG_OP = 'INSERT' OR TG_OP = 'UPDATE') THEN
        --RAISE NOTICE 'Contrato - verificaï¿½ï¿½o blacklist %', new.contato_str;
        -- IF ((new.contato_str != NULL OR new.contato_str != '') and new.excluido_bit = '0') THEN (19/05/2023 - Francisco)
        tel_formatado := fcformatatelefone(''||new.contato_str||''); -- MATHEUS DBA 28/11/2023 - Colocado o formata telefone pois a trigger n estava funcionando quando enviada o zero na frente do numero nï¿½o inibindo.
        raise notice 'Telefone Formatado -> %', tel_formatado;
        IF ((tel_formatado != NULL or tel_formatado != '') and (new.obs_inibicao_tel_suspeito_str <> 'CONTATO INIBIDO DEVIDO ESTAR NA LISTA DE BLOQUEIO DE TELEFONE SUSPEITO.')) THEN -- (19/05/2023 - Francisco) -- 13/06/2024 cmevangelista
            raise notice 'Validaï¿½ï¿½o dos telefones que nï¿½o podem voltar a ser ativo.';
            FOR registro IN EXECUTE 'SELECT contato_str FROM es_telefone_suspeito_bloqueados WHERE contato_str = ''' || tel_formatado ||''' LIMIT 1' --alterado para a tabela es_telefone_suspeito_bloqueados 28/05/2023 alosilva.
            LOOP
                new.excluido_bit = '1';
                new.obs_inibicao_tel_suspeito_str = 'CONTATO INIBIDO DEVIDO ESTAR NA LISTA DE BLOQUEIO DE TELEFONE SUSPEITO.';
                new.data_inibicao_tel_suspeito_tstamp = current_timestamp;
                new.classificacao_str = '3 - Ruim'; --Linha na qual sera adicionada(19 / 05 / 2023 - Francisco)
                raise notice 'ATENï¿½ï¿½O: Contato sendo inserido/alterado jï¿½ inativo devido a lista de bloqueio do telefone suspeito.';
            END LOOP;
        else 
            raise notice 'Telefone nï¿½o verificado. Tel = NULL';
        END IF;
    END IF;
    return new;
end;
$$;

--
-- TOC entry 2044 (class 1255 OID 27831)
-- Name: trim(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public."trim"(bigint) RETURNS text
    LANGUAGE sql IMMUTABLE
    AS $_$

       select cast(pg_catalog.btrim(cast($1 as text)) as text);

$_$;

--
-- TOC entry 2045 (class 1255 OID 27837)
-- Name: troca_gecliente(bigint, bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.troca_gecliente(idclienteorigem bigint, idclientedestino bigint) RETURNS text
    LANGUAGE plpgsql
    AS $$
DECLARE
registro	      RECORD;
	
BEGIN
for registro in execute 'select  c.relname as tabela, a.attname as coluna
from pg_catalog.pg_attribute a 
inner join pg_stat_user_tables c on a.attrelid = c.relid
where a.attnum> 0 
and not a.attisdropped
and c.schemaname = ''public''
and a.attname = ''id_gecliente_int'''
loop
if registro.tabela not in ('gecliente') then
raise notice '%', 'update ' || registro.tabela || ' set id_gecliente_int = ' || idclientedestino || ' where id_gecliente_int = ' || idclienteorigem || ';';
		execute 'update ' || registro.tabela || ' set id_gecliente_int = ' || idclientedestino || ' where id_gecliente_int = ' || idclienteorigem || ';';
end if;
	end loop;

	return 'OK';
END;
$$;

--
-- TOC entry 2046 (class 1255 OID 27842)
-- Name: tstamp_mdm(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.tstamp_mdm() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
DECLARE
BEGIN
	IF TG_OP = 'INSERT' THEN
		new.tstamp_mdm_inclusao = CURRENT_TIMESTAMP;
		new.tstamp_mdm_alteracao = CURRENT_TIMESTAMP;
	ELSEIF new != old THEN
		new.tstamp_mdm_alteracao = CURRENT_TIMESTAMP;
	END IF;
	
	return new;
END;
$$;

--
-- TOC entry 2047 (class 1255 OID 27848)
-- Name: unnest(anyarray); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.unnest(anyarray) RETURNS SETOF anyelement
    LANGUAGE sql IMMUTABLE STRICT
    AS $_$
select $1[i] from generate_series(array_lower($1,1), array_upper($1,1)) as i
$_$;

--
-- TOC entry 2048 (class 1255 OID 27855)
-- Name: valida_cnpj(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.valida_cnpj(cpf_cnpj text) RETURNS text
    LANGUAGE plpgsql
    AS $$

	DECLARE
	vet_cnpj integer [14]; --Recebe o CNPJ DIGITADO
	cpf_cnpj_valid text;
	retorno text; --Recebe Valor final
	dv integer; -- Primeiro nï¿½mero do DV (Dï¿½gito Verificador)
	dv1 integer; -- Segundo nï¿½mero do DV (Dï¿½gito Verificador)
	soma integer; -- Soma utilizada para o cï¿½lculo do DV
	rest integer; -- Resto da divisï¿½o
	
	BEGIN

		--Valida CNPJ
		IF char_length(trim(cpf_cnpj::bigint::text)) <= 14 THEN
			cpf_cnpj_valid := lpad(COALESCE(cpf_cnpj::bigint::text, ''), 14, '0');
		ELSE
			cpf_cnpj_valid := substring (cpf_cnpj FROM (char_length(cpf_cnpj) - 13) FOR 14);
		END IF;
		
		retorno := substring (cpf_cnpj_valid FROM 1 FOR 14);
		
		-- Atribuiï¿½ï¿½o dos valores do Vetor
		vet_cnpj[0] := cast(substring (retorno FROM 1 FOR 1) as integer);
		vet_cnpj[1] := cast(substring (retorno FROM 2 FOR 1) as integer);
		vet_cnpj[2] := cast(substring (retorno FROM 3 FOR 1) as integer);
		vet_cnpj[3] := cast(substring (retorno FROM 4 FOR 1) as integer);
		vet_cnpj[4] := cast(substring (retorno FROM 5 FOR 1) as integer);
		vet_cnpj[5] := cast(substring (retorno FROM 6 FOR 1) as integer);
		vet_cnpj[6] := cast(substring (retorno FROM 7 FOR 1) as integer);
		vet_cnpj[7] := cast(substring (retorno FROM 8 FOR 1) as integer);
		vet_cnpj[8] := cast(substring (retorno FROM 9 FOR 1) as integer);
		vet_cnpj[9] := cast(substring (retorno FROM 10 FOR 1) as integer);
		vet_cnpj[10] := cast(substring (retorno FROM 11 FOR 1) as integer);
		vet_cnpj[11] := cast(substring (retorno FROM 12 FOR 1) as integer);
		vet_cnpj[12] := cast(substring (retorno FROM 13 FOR 1) as integer);
		vet_cnpj[13] := cast(substring (retorno FROM 14 FOR 1) as integer);
		
		-- Cï¿½LCULO DO PRIMEIRO Nï¿½MERO DO DV
		-- Soma dos nove primeiros multiplicados por 9, 8, 7 e assim por diante...

		soma:=  (vet_cnpj[0]*6) + 
			(vet_cnpj[1]*7) + 
			(vet_cnpj[2]*8) + 
			(vet_cnpj[3]*9) + 
			(vet_cnpj[4]*2) + 
			(vet_cnpj[5]*3) + 
			(vet_cnpj[6]*4) + 
			(vet_cnpj[7]*5) + 
			(vet_cnpj[8]*6) + 
			(vet_cnpj[9]*7) + 
			(vet_cnpj[10]*8) + 
			(vet_cnpj[11]*9) ;

		rest:= soma % 11;

		
		if (rest = 10) THEN
			dv:=0;
		ELSE 
			dv:=rest; 
		END IF;
		
		-- Cï¿½LCULO DO SEGUNDO Nï¿½MERO DO DV 
		-- Soma dos nove primeiros multiplicados por 9, 8, 7 e assim por diante...
		soma:=  (vet_cnpj[0]*5) + 
			(vet_cnpj[1]*6) + 
			(vet_cnpj[2]*7) + 
			(vet_cnpj[3]*8) + 
			(vet_cnpj[4]*9) + 
			(vet_cnpj[5]*2) + 
			(vet_cnpj[6]*3) + 
			(vet_cnpj[7]*4) + 
			(vet_cnpj[8]*5) + 
			(vet_cnpj[9]*6) + 
			(vet_cnpj[10]*7) + 
			(vet_cnpj[11]*8) +
			(dv*9);
		rest:=soma % 11;
		
		if (rest = 10) THEN
			dv1:=0;
		ELSE 
			dv1:=rest; 
		END IF;
		
		IF (dv = vet_cnpj[12]) and (dv1 = vet_cnpj[13]) THEN
			
		ELSE
			retorno := '';
		END IF;

		RETURN retorno;
	END;

$$;

--
-- TOC entry 2049 (class 1255 OID 27865)
-- Name: valida_cpf(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.valida_cpf(cpf_cnpj text) RETURNS text
    LANGUAGE plpgsql
    AS $$

	DECLARE
	vet_cpf integer [11]; --Recebe o CPF DIGITADO
	cpf_cnpj_valid text;
	retorno text; --Recebe Valor final
	dv integer; -- Primeiro nï¿½mero do DV (Dï¿½gito Verificador)
	dv1 integer; -- Segundo nï¿½mero do DV (Dï¿½gito Verificador)
	soma integer; -- Soma utilizada para o cï¿½lculo do DV
	rest integer; -- Resto da divisï¿½o
	
	BEGIN

		--Valida CPF
		IF char_length(trim(cpf_cnpj::bigint::text)) <= 11 THEN
			cpf_cnpj_valid := lpad(COALESCE(cpf_cnpj::bigint::text, ''), 11, '0');
		ELSE
			cpf_cnpj_valid := substring (cpf_cnpj FROM (char_length(cpf_cnpj) - 10) FOR 11);
		END IF;
		
		retorno := substring (cpf_cnpj_valid FROM 1 FOR 11);
		
		-- Atribuiï¿½ï¿½o dos valores do Vetor
		vet_cpf[0] := cast(substring (retorno FROM 1 FOR 1) as integer);
		vet_cpf[1] := cast(substring (retorno FROM 2 FOR 1) as integer);
		vet_cpf[2] := cast(substring (retorno FROM 3 FOR 1) as integer);
		vet_cpf[3] := cast(substring (retorno FROM 4 FOR 1) as integer);
		vet_cpf[4] := cast(substring (retorno FROM 5 FOR 1) as integer);
		vet_cpf[5] := cast(substring (retorno FROM 6 FOR 1) as integer);
		vet_cpf[6] := cast(substring (retorno FROM 7 FOR 1) as integer);
		vet_cpf[7] := cast(substring (retorno FROM 8 FOR 1) as integer);
		vet_cpf[8] := cast(substring (retorno FROM 9 FOR 1) as integer);
		vet_cpf[9] := cast(substring (retorno FROM 10 FOR 1) as integer);
		vet_cpf[10] := cast(substring (retorno FROM 11 FOR 1) as integer);
		-- Cï¿½LCULO DO PRIMEIRO Nï¿½MERO DO DV
		-- Soma dos nove primeiros multiplicados por 9, 8, 7 e assim por diante...
		--soma:=(vet_cpf[0]*10)+(vet_cpf[1]*9)+(vet_cpf[2]*8)+(vet_cpf[3]*7)+(vet_cpf[4]*6)+(vet_cpf[5]*5)+(vet_cpf[6]*4)+(vet_cpf[7]*3)+(vet_cpf[8]*2);

		soma:=  (vet_cpf[0]*1) + 
			(vet_cpf[1]*2) + 
			(vet_cpf[2]*3) + 
			(vet_cpf[3]*4) + 
			(vet_cpf[4]*5) + 
			(vet_cpf[5]*6) + 
			(vet_cpf[6]*7) + 
			(vet_cpf[7]*8) + 
			(vet_cpf[8]*9);
		rest:=soma % 11;

		if (rest = 10) THEN
			dv:=0;
		ELSE 
			dv:=rest; 
		END IF;

		-- Cï¿½LCULO DO SEGUNDO Nï¿½MERO DO DV 
		-- Soma dos nove primeiros multiplicados por 9, 8, 7 e assim por diante...
		soma:=  (vet_cpf[0]*0) + 
			(vet_cpf[1]*1) + 
			(vet_cpf[2]*2) + 
			(vet_cpf[3]*3) + 
			(vet_cpf[4]*4) + 
			(vet_cpf[5]*5) + 
			(vet_cpf[6]*6) + 
			(vet_cpf[7]*7) + 
			(vet_cpf[8]*8) + 
			(dv*9);
			
		rest:=soma % 11;
		
		if (rest = 10) THEN
			dv1:=0;
		ELSE 
			dv1:=rest; 
		END IF;
		
		IF (dv = vet_cpf[9]) and (dv1 = vet_cpf[10]) THEN
			--RETURN retorno;
		ELSE
			retorno := '';
		END IF;

		RETURN retorno;
	END;

$$;

--
-- TOC entry 2050 (class 1255 OID 27874)
-- Name: valida_cpf_cnpj(text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.valida_cpf_cnpj(cpf_cnpj text) RETURNS text
    LANGUAGE plpgsql
    AS $$

	DECLARE
	retorno text; --Recebe Valor final
	
	BEGIN

		IF char_length(trim(fsonumero(cpf_cnpj)::bigint::text)) > 11 THEN
			retorno := (Select valida_cnpj(fsonumero(cpf_cnpj)));
		ELSE
			retorno := (Select valida_cpf(fsonumero(cpf_cnpj)));

			IF retorno = '' THEN
				retorno := (Select valida_cnpj(fsonumero(cpf_cnpj)));
			END IF;
		END IF;

		RETURN retorno;
	END;

$$;

--
-- TOC entry 2051 (class 1255 OID 27876)
-- Name: vcf(); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.vcf() RETURNS event_trigger
    LANGUAGE plpgsql
    AS $$
  DECLARE logMessage varchar;
  BEGIN
	BEGIN
		SELECT 'current_database:' || current_database() 
			|| ' - current_schema:' || current_schema() 
			|| ' - current_user:' || current_user 
			|| ' - inet_client_addr:' || inet_client_addr()
			|| ' - current_query():' || current_query() 
		INTO logMessage;

		INSERT INTO vcLogTable (dataExecucao, baseConectada, schemaCorrente, usuarioLogado, ipDoUsuario, queryExecutada) values (now(), current_database(), current_schema(), current_user, inet_client_addr(), current_query());

	EXCEPTION WHEN others THEN
		RAISE NOTICE 'Ocorreu um erro e nada foi abortado';
	END;
	
  END;
$$;

--
-- TOC entry 2052 (class 1255 OID 27886)
-- Name: vw_testeho(date, text); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.vw_testeho(data_inicio date, tabela_filha text) RETURNS TABLE(campanha bigint, valor_ho_sem_desconto double precision, valor_ho_cobrado double precision, login_operador character varying, usuario_operador01 character varying, usuario_operador02 text, usuario_libera_ho text, carteira bigint, id_cbparcelaboleto bigint, inclusao timestamp without time zone, alteracao timestamp without time zone, id_cbboleto bigint, id_cbparcela bigint, valor_principal double precision, valor_cp double precision, valor_multa double precision, valor_notificacao double precision, valor_despesa_banco double precision, valor_desconto double precision, valor_abatimento double precision, valor_juros_mora double precision, valor_honorarios double precision, valor_comissionamento double precision, valor_total double precision)
    LANGUAGE plpgsql
    AS $$

DECLARE

  tSqlF               text;

BEGIN

tSqlF := '
SELECT  

  Distinct(i.id_cbbordero_int)									AS Campanha
, ''0.00''::double precision									AS Valor_HO_Sem_Desconto
, i.honorarios_num												AS Valor_HO_Cobrado
, gc.nomelogin_str												AS Login_Operador
, hu.evento_str													AS Usuario_Operador01
, hu.obs_txt													AS Usuario_Operador02
, ''X''::text													AS Usuario_Libera_HO

, c.id_gecliente_int											AS Carteira
, pi.id_cbparcelaitembordero_int    							AS id_cbparcelaboleto
, COALESCE(pi.tstamp_mdm_inclusao, ''1900-01-01 00:00:00'') 	AS Inclusao
, COALESCE(pi.tstamp_mdm_alteracao, ''1900-01-01 00:00:00'') 	AS Alteracao
, pi.id_cbitembordero_int        								AS id_cbboleto
, pi.id_cbparcela_int        									AS id_cbparcela
, pi.principal_num        										AS Valor_Principal
, pi.cp_num        												AS Valor_CP
, pi.multa_num        											AS Valor_Multa
, pi.notificacao_num        									AS Valor_Notificacao
, pi.despesa_banco_num        									AS Valor_Despesa_Banco
, pi.desconto_num            									AS Valor_Desconto
, pi.abatimento_num        										AS Valor_Abatimento
, pi.juros_mora_num        										AS Valor_Juros_Mora
, pi.honorarios_num        										AS Valor_Honorarios
, pi.comissionamento_num        								AS Valor_Comissionamento
, pi.valor_total_num        									AS Valor_Total

FROM '||Tabela_Filha||' c
JOIN cbitembordero 				i	ON (i.id_cbcontrato_int = c.id_cbcontrato_int)
JOIN cbparcelaitembordero 		pi	ON (pi.id_cbitembordero_int = i.id_cbitembordero_int)
JOIN gehistoricousuario			hu	ON (hu.id_geusuario_int = i.id_geusuario_int)
JOIN geusuario					gc ON (gc.id_geusuario_int = c.id_geusuario_int)
WHERE COALESCE(pi.tstamp_mdm_alteracao, ''1900-01-01 00:00:00'') >= '''||Data_Inicio||''' and hu.evento_str	ilike ''% ho%'' ';

return query execute tSqlF;

END;
$$;

--
-- TOC entry 2053 (class 1255 OID 27894)
-- Name: vw_testeho_honorarios(bigint); Type: FUNCTION; Schema: public; Owner: -
--

CREATE FUNCTION public.vw_testeho_honorarios(id_cbitembordero_int bigint) RETURNS TABLE(valor_honorarios double precision)
    LANGUAGE plpgsql
    AS $$
DECLARE
  tSqlF               text;
BEGIN
tSqlF := '
SELECT honorarios_num AS Valor_Honorarios FROM cbitembordero WHERE id_cbitembordero_int = '||id_cbitembordero_int||' ';
return query execute tSqlF;
END;
$$;

--
-- TOC entry 7585 (class 2328 OID 27900)
-- Name: postgresql; Type: FOREIGN DATA WRAPPER; Schema: -; Owner: -
--

CREATE FOREIGN DATA WRAPPER postgresql;

--
-- TOC entry 7586 (class 1417 OID 27906)
-- Name: fdtest; Type: SERVER; Schema: -; Owner: -
--

CREATE SERVER fdtest FOREIGN DATA WRAPPER postgresql OPTIONS (
    dbname 'contrib_regression'
);

--
-- TOC entry 12045 (class 0 OID 0)
-- Name: USER MAPPING public SERVER fdtest; Type: USER MAPPING; Schema: -; Owner: -
--

CREATE USER MAPPING FOR public SERVER fdtest;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 214 (class 1259 OID 27911)
-- Name: Foo; Type: TABLE; Schema: MySchema; Owner: -
--

CREATE TABLE "MySchema"."Foo" (
    f1 integer NOT NULL,
    f2 text NOT NULL,
    f3 text[]
);

--
-- TOC entry 1694 (class 1259 OID 67272663)
-- Name: pipeline_run; Type: TABLE; Schema: etl_control; Owner: -
--

CREATE TABLE etl_control.pipeline_run (
    pipeline_name text NOT NULL,
    table_name text NOT NULL,
    logical_date date NOT NULL,
    run_id text NOT NULL,
    status text NOT NULL,
    started_at timestamp with time zone DEFAULT now() NOT NULL,
    finished_at timestamp with time zone,
    rows_extracted bigint,
    rows_written_bronze bigint,
    rows_written_silver bigint,
    bytes_bronze bigint,
    bytes_silver bigint,
    message text
);

--
-- TOC entry 1695 (class 1259 OID 67272676)
-- Name: pipeline_state; Type: TABLE; Schema: etl_control; Owner: -
--

CREATE TABLE etl_control.pipeline_state (
    pipeline_name text NOT NULL,
    table_name text NOT NULL,
    key_column text NOT NULL,
    last_value bigint DEFAULT 0 NOT NULL,
    updated_at timestamp with time zone DEFAULT now() NOT NULL
);

--
-- TOC entry 215 (class 1259 OID 27925)
-- Name: _telefones_nao_perturbe; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public._telefones_nao_perturbe (
    telefone character varying,
    evento character varying,
    datacadastro date,
    datadaativacao date,
    datadoevento date
);

--
-- TOC entry 216 (class 1259 OID 27939)
-- Name: _telefones_nao_perturbe_estelefonesuspeito; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public._telefones_nao_perturbe_estelefonesuspeito (
    id_geqlcontato_int bigint,
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    contato_str character varying(256),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geqlendereco_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    observacao_str character varying(1000),
    ramal_str character varying(10),
    nome_contato_str character varying(60),
    cpf_str character varying(30),
    rg_str character varying(30),
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone,
    id_geqltratamentocontato_int bigint,
    id_geusuario_inclusao_int integer,
    id_geqlcontrato_int bigint,
    excluido_bit bit(1),
    contato_antigo_str character varying(256),
    score bigint,
    tipo_pessoa_str character varying(10),
    whatsapp_str character varying(1),
    trava_feriado_str character varying(1),
    id_gecliente_original_int bigint,
    motivo_str character varying(10),
    score_int smallint,
    data_score_dat date,
    id_pessoa_telefone_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    ranking_lemit_int integer,
    data_alteracao_ranking_dat timestamp without time zone,
    score_lemit_int integer,
    data_alteracao_score_dat timestamp without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    data_inibicao_tel_suspeito_tstamp timestamp with time zone,
    obs_inibicao_tel_suspeito_str character varying(300)
);

--
-- TOC entry 217 (class 1259 OID 27949)
-- Name: _telefones_nao_perturbe_geqlcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public._telefones_nao_perturbe_geqlcontato (
    id_geqlcontato_int bigint,
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    contato_str character varying(256),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geqlendereco_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    observacao_str character varying(1000),
    ramal_str character varying(10),
    nome_contato_str character varying(60),
    cpf_str character varying(30),
    rg_str character varying(30),
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone,
    id_geqltratamentocontato_int bigint,
    id_geusuario_inclusao_int integer,
    id_geqlcontrato_int bigint,
    excluido_bit bit(1),
    contato_antigo_str character varying(256),
    score bigint,
    tipo_pessoa_str character varying(10),
    whatsapp_str character varying(1),
    trava_feriado_str character varying(1),
    id_gecliente_original_int bigint,
    motivo_str character varying(10),
    score_int smallint,
    data_score_dat date,
    id_pessoa_telefone_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    ranking_lemit_int integer,
    data_alteracao_ranking_dat timestamp without time zone,
    score_lemit_int integer,
    data_alteracao_score_dat timestamp without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    data_inibicao_tel_suspeito_tstamp timestamp with time zone,
    obs_inibicao_tel_suspeito_str character varying(300)
);

--
-- TOC entry 218 (class 1259 OID 27964)
-- Name: _telefones_procon_insert_tel_suspeito_tratados_dba; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public._telefones_procon_insert_tel_suspeito_tratados_dba (
    telefone character varying
);

--
-- TOC entry 219 (class 1259 OID 27975)
-- Name: acordos; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.acordos (
    acordo_int bigint,
    status_str character varying(1),
    id_cbcontrato_int bigint
);

--
-- TOC entry 220 (class 1259 OID 27981)
-- Name: agenda_cbitembordero_10_101_41_55_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.agenda_cbitembordero_10_101_41_55_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 221 (class 1259 OID 27995)
-- Name: auxblboletagemcusta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.auxblboletagemcusta (
    id_tmpblboletagemcusta_int bigint DEFAULT nextval(('aunxboletagemcusta_seq'::text)::regclass) NOT NULL,
    id_tmpblboletagem_int bigint NOT NULL,
    chave_str character varying(30),
    id_cbblconfiguracaoitem_int integer,
    id_cbblbase_int integer,
    id_cbcontrato_int bigint,
    id_cbdespesa_int bigint,
    valor_total_num double precision,
    desconto_num double precision,
    tstamp timestamp without time zone,
    id_geusuario_int bigint
);

--
-- TOC entry 222 (class 1259 OID 28002)
-- Name: auxboletagemcusta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.auxboletagemcusta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 223 (class 1259 OID 28008)
-- Name: baixaacumuladaitautmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.baixaacumuladaitautmp (
    id_gecliente_int bigint,
    data_processamento date,
    codigo_escritorio character varying(5),
    data_lote date,
    hora_lote character varying(4),
    agencia character varying(4),
    conta_corrente character varying(7),
    arquivo character varying(4),
    nome_arquivo character varying(30),
    qtde_registros bigint,
    tipo_registro bigint,
    status_registro character varying(2),
    codigo_operacao character varying(5),
    contrato character varying(30),
    num_parcela bigint,
    id_cbtiponegocio bigint,
    empresa_itau bigint,
    linha bigint
);

--
-- TOC entry 224 (class 1259 OID 28015)
-- Name: baixabancotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.baixabancotmp (
    id_gecliente_int bigint,
    data_processamento date,
    tipo_registro character varying(1),
    agencia bigint,
    comando bigint,
    conta bigint,
    data_pagamento date,
    nosso_numero character varying(20),
    valor_abatimento double precision,
    valor_recebido double precision,
    sequencial bigint,
    regra_repasse character varying(100),
    valor_comissionamento double precision,
    valor_honorarios double precision,
    data_recebimento date,
    status character varying(1),
    valor_juros double precision,
    natureza_recebimento integer
);

--
-- TOC entry 225 (class 1259 OID 28023)
-- Name: baixabradescocredimobtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.baixabradescocredimobtmp (
    arquivo_str character varying(40),
    tiporegistro character varying(1),
    contrato character varying(30),
    numero_parcela bigint,
    data_vencimento date
);

--
-- TOC entry 226 (class 1259 OID 28028)
-- Name: baixadasitautmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.baixadasitautmp (
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_gecliente_int bigint,
    data_processamento date,
    contrato_str character varying(15),
    parcela_int bigint,
    tipo_arquivo_str character varying(20),
    nome_arquivo_str character varying(30),
    data_arquivo_str date,
    status_registro character varying(2),
    importado_str character varying(1),
    tstamp timestamp with time zone,
    codigo_operacao_str character varying(5),
    cpf_str character varying(15)
);

--
-- TOC entry 227 (class 1259 OID 28034)
-- Name: baixainconsistenciatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.baixainconsistenciatmp (
    id_gecliente_int bigint,
    data_processamento_dat date,
    data_pagamento_arquivo date,
    tipo_registro_int bigint,
    contrato_str character varying(30),
    nome_str character varying(30),
    codigo_operacao_str character varying(5),
    parcela_int bigint,
    nosso_numero_str character varying(17),
    data_pagamento_dat date,
    valor_pagamento_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    desconto_num double precision,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    valor_atualizado_num double precision,
    valor_acordo_num double precision,
    valor_desconto_num double precision,
    codigo_erro_str character varying(3),
    erro_str character varying(80),
    data_recebimento_dat date
);

--
-- TOC entry 228 (class 1259 OID 28043)
-- Name: baixatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.baixatmp (
    id_gecliente_int bigint NOT NULL,
    processo_int smallint NOT NULL,
    comando_str character varying(2) NOT NULL,
    data_processamento_dat date NOT NULL,
    nosso_numero_str character varying(30),
    id_cbitembordero_int bigint,
    data_vencimento_dat date,
    data_pagamento_dat date,
    valor_vencimento_num double precision,
    valor_pagamento_num double precision,
    id_cbtipopagamento_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int bigint,
    tipo_str character varying(30),
    data_vencimento_parcela date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    juros_mora_num double precision,
    retido_num double precision,
    valor_total_num double precision,
    campanha_str character varying(1),
    quitacao_str character varying(1),
    dias_quitacao_num smallint,
    motivo_str character varying(3),
    sequencia_int bigint,
    regra_repasse character varying(100),
    id_gefilial_int bigint,
    parcelamento_str character varying(7),
    tiponegocio_str character varying(3),
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    comissionamento_cliente_num double precision,
    honorarios_cliente_num double precision,
    data_recebimento_dat date,
    observacao_boleto_str character varying(100),
    valor_juros double precision
);

--
-- TOC entry 229 (class 1259 OID 28051)
-- Name: batimentoitautmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.batimentoitautmp (
    id_batimentoitautmp_int bigint DEFAULT nextval(('batimentoitautmp_seq'::text)::regclass),
    id_cbcontrato_int bigint,
    cpf character varying(50),
    operacao character varying(50),
    contrato character varying(50),
    contrato_str character varying(50),
    id_cbsituacaocontrato_int bigint
);

--
-- TOC entry 230 (class 1259 OID 28056)
-- Name: batimentoitautmp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.batimentoitautmp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 231 (class 1259 OID 28063)
-- Name: blocklist_log_hig_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.blocklist_log_hig_386 (
    id_geqlcontato_int bigint,
    cpf_str character varying(50),
    telefone_str character varying(50),
    cod_carteira character varying(50),
    desc_carteira character varying(80),
    qtd_tel character varying(30)
);

--
-- TOC entry 232 (class 1259 OID 28077)
-- Name: blocklistclassificacoes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.blocklistclassificacoes (
    id_geqlcontato_int bigint,
    databloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(15)
);

--
-- TOC entry 233 (class 1259 OID 28088)
-- Name: blocklistclassificacoes386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.blocklistclassificacoes386 (
    id_geqlcontato_int bigint,
    databloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(15)
);

--
-- TOC entry 234 (class 1259 OID 28095)
-- Name: boletocartatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.boletocartatmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbsitcontato_int bigint,
    id_geqlendereco_int bigint
);

--
-- TOC entry 235 (class 1259 OID 28105)
-- Name: bradescotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.bradescotmp (
    id_cbparcela_int bigint,
    id_str character varying(2)
);

--
-- TOC entry 236 (class 1259 OID 28109)
-- Name: cbacompanhamentocontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbacompanhamentocontrato (
    id_cbacompanhamentocontrato_int integer NOT NULL,
    codigo_sequencia_int bigint NOT NULL,
    campanha_str character varying NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    data_hora_tim timestamp without time zone NOT NULL,
    id_gecliente_int bigint
);

--
-- TOC entry 237 (class 1259 OID 28118)
-- Name: cbacompanhamentocontrato_id_cbacompanhamentocontrato_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbacompanhamentocontrato_id_cbacompanhamentocontrato_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12046 (class 0 OID 0)
-- Dependencies: 237
-- Name: cbacompanhamentocontrato_id_cbacompanhamentocontrato_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cbacompanhamentocontrato_id_cbacompanhamentocontrato_int_seq OWNED BY public.cbacompanhamentocontrato.id_cbacompanhamentocontrato_int;

--
-- TOC entry 238 (class 1259 OID 28126)
-- Name: cbagenciacontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbagenciacontrato (
    id_cbagenciacontrato_int integer DEFAULT nextval(('"cbagenciacontrato_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    nome_str character varying(30),
    id_geuf_int integer,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 239 (class 1259 OID 28133)
-- Name: cbapreensao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbapreensao (
    id_cbapreensao_int bigint DEFAULT nextval(('"cbapreensao_seq"'::text)::regclass) NOT NULL,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_gefilial_int bigint,
    protocolo_str character varying(60),
    restricao_str character varying(1),
    id_cbestacionamento_int_est bigint,
    id_cbestacionamento_int_pat bigint,
    marca_str character varying(30),
    modelo_str character varying(30),
    chassi_str character varying(30),
    ano_str character varying(9),
    placa_str character varying(10),
    cor_str character varying(20),
    renavam_str character varying(50),
    data_apreensao_dat date,
    data_patio_dat date,
    percentual_previsto_num double precision,
    data_venda_dat date,
    valor_venda_num double precision,
    valor_honorarios_num double precision,
    valor_despesa_num double precision,
    valor_reembolsado_num double precision,
    data_reembolso_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_gecliente_int bigint,
    data_venda_prevista_dat date,
    antecipacao_num double precision,
    total_final_num double precision,
    perc_recebido_num double precision,
    tipo_bem_str character varying(2),
    combustivel_str character varying(2),
    purgacao_mora_str character varying(2),
    acao_contestada_str character varying(2),
    acordo_str character varying(2),
    sentenca_str character varying(2),
    liberado_str character varying(2),
    patio_str character varying(3),
    observacao_str character varying(50),
    ano_modelo_str character varying(10),
    id_cbgarantia_int bigint
);

--
-- TOC entry 240 (class 1259 OID 28142)
-- Name: cbapreensao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbapreensao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 241 (class 1259 OID 28148)
-- Name: cbatalhositcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbatalhositcontato (
    id_cbatalhositcontato_int integer NOT NULL,
    id_gecliente_int integer,
    num_atalho integer,
    id_cbsitcontato_int integer,
    id_gemotivoinadimplencia_int integer,
    observacao character varying(255),
    classificacao_at character varying(255)
);

--
-- TOC entry 242 (class 1259 OID 28152)
-- Name: cbatalhositcontato_id_cbatalhositcontato_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbatalhositcontato_id_cbatalhositcontato_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12047 (class 0 OID 0)
-- Dependencies: 242
-- Name: cbatalhositcontato_id_cbatalhositcontato_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cbatalhositcontato_id_cbatalhositcontato_int_seq OWNED BY public.cbatalhositcontato.id_cbatalhositcontato_int;

--
-- TOC entry 243 (class 1259 OID 28158)
-- Name: cbatendimentotemp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbatendimentotemp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 244 (class 1259 OID 28170)
-- Name: cbatrasocontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbatrasocontrato (
    id_cbatrasocontrato_int bigint DEFAULT nextval(('"cbatrasocontrato_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_gemotivoinadimplencia_int bigint NOT NULL,
    data_hoje_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    nome_concessionaria_str character varying(30),
    adquiriu_bem_str character varying(2),
    dia_pagamento_int bigint,
    motivo_atraso_str character varying(1),
    meses_desemprego_int integer
);

--
-- TOC entry 245 (class 1259 OID 28183)
-- Name: cbatrasocontrato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbatrasocontrato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 246 (class 1259 OID 28191)
-- Name: cbatualizacaoendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbatualizacaoendereco (
    id_cbatualizacaoendereco_int integer DEFAULT nextval(('"cbatualizacaoendereco_seq"'::text)::regclass) NOT NULL,
    nome_str character varying(60),
    contrato_str character varying(30),
    endereco_str character varying(60),
    bairro_str character varying(60),
    cod_cartorio_str character varying(20),
    cidade_str character varying(60),
    uf_str character varying(2),
    cep_str character varying(9),
    tstamp timestamp without time zone,
    id_gecliente_int bigint
);

--
-- TOC entry 247 (class 1259 OID 28203)
-- Name: cbatualizacaoendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbatualizacaoendereco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 248 (class 1259 OID 28211)
-- Name: cbblacklist; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblacklist (
    id_cbblacklist_int bigint NOT NULL,
    contato_str character varying(256) NOT NULL,
    tipo_contato_str character(1) NOT NULL,
    tstamp timestamp without time zone DEFAULT now(),
    transmite_bit bit(1) DEFAULT (0)::bit(1),
    CONSTRAINT c_validacontato CHECK (
CASE tipo_contato_str
    WHEN 'T'::bpchar THEN (public.fcformatatelefone(contato_str) IS NOT NULL)
    WHEN 'E'::bpchar THEN (public.f_validaemail((contato_str)::text) IS TRUE)
    ELSE NULL::boolean
END),
    CONSTRAINT c_validatipocontato CHECK ((tipo_contato_str = ANY (ARRAY['T'::bpchar, 'E'::bpchar])))
);

--
-- TOC entry 249 (class 1259 OID 28221)
-- Name: cbblacklist_id_cbblacklist_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblacklist_id_cbblacklist_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12048 (class 0 OID 0)
-- Dependencies: 249
-- Name: cbblacklist_id_cbblacklist_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cbblacklist_id_cbblacklist_int_seq OWNED BY public.cbblacklist.id_cbblacklist_int;

--
-- TOC entry 250 (class 1259 OID 28234)
-- Name: cbblacklistcliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblacklistcliente (
    id_cbblacklistcliente_int bigint NOT NULL,
    id_cbblacklist_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL,
    data_inclusao_dat timestamp without time zone,
    data_exclusao_dat timestamp without time zone,
    situacao_str character(1) NOT NULL,
    data_verificacao_dat timestamp without time zone,
    transmite_bit bit(1) DEFAULT (0)::bit(1),
    data_bloqueio_dat date,
    id_geusuario_int bigint,
    CONSTRAINT c_possuidata CHECK (((data_inclusao_dat IS NOT NULL) OR (data_exclusao_dat IS NOT NULL))),
    CONSTRAINT c_validasituacao CHECK ((situacao_str = ANY (ARRAY['I'::bpchar, 'E'::bpchar])))
);

--
-- TOC entry 251 (class 1259 OID 28244)
-- Name: cbblacklistcliente_id_cbblacklistcliente_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblacklistcliente_id_cbblacklistcliente_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12049 (class 0 OID 0)
-- Dependencies: 251
-- Name: cbblacklistcliente_id_cbblacklistcliente_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cbblacklistcliente_id_cbblacklistcliente_int_seq OWNED BY public.cbblacklistcliente.id_cbblacklistcliente_int;

--
-- TOC entry 252 (class 1259 OID 28255)
-- Name: cbblbase; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblbase (
    id_cbblbase_int integer DEFAULT nextval(('"cbblbase_seq"'::text)::regclass) NOT NULL,
    id_cbblconfiguracao_int integer,
    sequencia_int smallint,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 253 (class 1259 OID 28261)
-- Name: cbblbase_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblbase_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 254 (class 1259 OID 28273)
-- Name: cbblbaseendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblbaseendereco (
    id_cbblbaseendereco_int integer DEFAULT nextval(('"cbblbaseendereco_seq"'::text)::regclass) NOT NULL,
    id_cbblboletagem_int integer,
    origem_str character varying(1),
    id_geqltipoendereco_int integer,
    classificacao_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    sequencia_int integer,
    valida_end_novo_str character varying(1)
);

--
-- TOC entry 255 (class 1259 OID 28282)
-- Name: cbblbaseendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblbaseendereco_seq
    START WITH 11
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 256 (class 1259 OID 28294)
-- Name: cbblbaseregistro; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblbaseregistro (
    id_cbblbaseregistro_int integer DEFAULT nextval(('"cbblbaseregistro_seq"'::text)::regclass) NOT NULL,
    id_cbblbase_int integer,
    id_cbcontrato_int bigint,
    status_str text,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    gera_boleto_str character varying(1),
    vencimento_boleto_dat date
);

--
-- TOC entry 257 (class 1259 OID 28305)
-- Name: cbblbaseregistro_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblbaseregistro_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 258 (class 1259 OID 28313)
-- Name: cbblbaseregistroparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblbaseregistroparcela (
    id_cbblbaseregistroparcela_int integer DEFAULT nextval(('"cbblbaseregistroparcela_seq"'::text)::regclass) NOT NULL,
    id_cbblbaseregistro_int integer,
    id_cbparcela_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 259 (class 1259 OID 28321)
-- Name: cbblbaseregistroparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblbaseregistroparcela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 260 (class 1259 OID 28328)
-- Name: cbblboletagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblboletagem (
    id_cbblboletagem_int integer DEFAULT nextval(('"cbblboletagem_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(100),
    id_cbbordero_int bigint,
    id_geusuario_solic_int bigint,
    data_solicitacao_dat date,
    hora_solicitacao_tim timestamp without time zone,
    id_geusuario_proc_int bigint,
    data_processamento_dat date,
    hora_processamento_tim timestamp without time zone,
    id_geusuario_aprov_int bigint,
    data_aprovacao_dat date,
    hora_aprovacao_tim timestamp without time zone,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    id_gecliente_int bigint NOT NULL,
    email_solicitacao_str text,
    id_geusuario_execut_int bigint,
    desconsidera_endereco_solicitacao_str character varying(1)
);

--
-- TOC entry 261 (class 1259 OID 28340)
-- Name: cbblboletagem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblboletagem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 262 (class 1259 OID 28349)
-- Name: cbblboletagemacompanhamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblboletagemacompanhamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 263 (class 1259 OID 28358)
-- Name: cbblboletagemacompanhamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblboletagemacompanhamento (
    id_cbblboletagemacompanhamento_int bigint DEFAULT nextval('public.cbblboletagemacompanhamento_seq'::regclass),
    id_cbblboletagemstatus_int bigint,
    id_cbblboletagem_int bigint,
    "timestamp" timestamp without time zone,
    id_geusuario_int bigint,
    justificativa_txt text
);

--
-- TOC entry 264 (class 1259 OID 28370)
-- Name: cbblboletagembordero_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblboletagembordero_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 265 (class 1259 OID 28377)
-- Name: cbblboletagembordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblboletagembordero (
    id_cbblboletagembordero_int bigint DEFAULT nextval('public.cbblboletagembordero_seq'::regclass),
    id_cbblboletagem_int bigint,
    bordero_int integer,
    id_cbbordero_int bigint,
    quantidade_int integer,
    lote_int integer,
    status_str character varying(255)
);

--
-- TOC entry 266 (class 1259 OID 28386)
-- Name: cbblboletagemprocessamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblboletagemprocessamento (
    id_cbblboletagemprocessamento_int bigint DEFAULT nextval(('"cbblboletagemprocessamento_seq"'::text)::regclass) NOT NULL,
    id_cbblboletagem_int bigint NOT NULL,
    id_geaplicacao_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp without time zone NOT NULL,
    chave_str character varying(500) NOT NULL,
    id_cbbordero_inicial_int bigint,
    id_cbbordero_final_int bigint
);

--
-- TOC entry 267 (class 1259 OID 28398)
-- Name: cbblboletagemprocessamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblboletagemprocessamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 268 (class 1259 OID 28407)
-- Name: cbblboletagemstatus_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblboletagemstatus_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 269 (class 1259 OID 28415)
-- Name: cbblboletagemstatus; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblboletagemstatus (
    id_cbblboletagemstatus_int bigint DEFAULT nextval('public.cbblboletagemstatus_seq'::regclass),
    codigo_str character varying(10),
    descricao_str character varying(255),
    id_geusuario_int bigint,
    "timestamp" timestamp without time zone
);

--
-- TOC entry 270 (class 1259 OID 28425)
-- Name: cbblconfiguracao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblconfiguracao (
    id_cbblconfiguracao_int integer DEFAULT nextval(('"cbblconfiguracao_seq"'::text)::regclass) NOT NULL,
    id_cbblboletagem_int integer,
    sequencia_int smallint,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 271 (class 1259 OID 28434)
-- Name: cbblconfiguracao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblconfiguracao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 272 (class 1259 OID 28443)
-- Name: cbblconfiguracaoitem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblconfiguracaoitem (
    id_cbblconfiguracaoitem_int integer DEFAULT nextval(('"cbblconfiguracaoitem_seq"'::text)::regclass) NOT NULL,
    id_cbblconfiguracao_int integer,
    sequencia_int smallint,
    id_cbtipopagamento_int integer,
    calculo_dat date,
    vencimento_dat date,
    entrada_int smallint,
    parcelas_int smallint,
    desconto_int smallint,
    parcelas_str character varying(2),
    instrucao_str character varying(100),
    minimo_parcela_int smallint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    ativo_str character varying(1),
    tipo_divisao_str character varying(1),
    aumento_int smallint
);

--
-- TOC entry 273 (class 1259 OID 28452)
-- Name: cbblconfiguracaoitem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblconfiguracaoitem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 274 (class 1259 OID 28459)
-- Name: cbblparametros; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbblparametros (
    id_cbblparametros_int integer DEFAULT nextval(('"cbblparametros_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int integer,
    id_cbcampanha_int integer,
    id_cbtipopagamento_int integer,
    id_cbconvenio_int integer,
    trava_boleto_vincendos_str character varying(1),
    atualiza_endereco_str character varying(1),
    boletagem_robo_str character varying(1),
    id_cbtiponegocio_int integer
);

--
-- TOC entry 275 (class 1259 OID 28467)
-- Name: cbblparametros_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbblparametros_seq
    START WITH 21
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 276 (class 1259 OID 28481)
-- Name: cbboletagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboletagem (
    id_cbboletagem_int bigint DEFAULT nextval(('"cbboletagem_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    id_cbtipopagamento_int bigint,
    vencimento_dat date,
    valor_total_num double precision,
    parcelamento_str character varying(7),
    entrada_num double precision,
    total_original_num double precision,
    cp_num double precision,
    desconto_num double precision,
    comissionamento_num double precision,
    id_cbitembordero_form_int bigint
);

--
-- TOC entry 277 (class 1259 OID 28487)
-- Name: cbboletagembaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboletagembaixa (
    id_cbboletagembaixa_int bigint DEFAULT nextval(('"cbboletagembaixa_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    id_cbboletagem_int bigint,
    processado_str character varying(1)
);

--
-- TOC entry 278 (class 1259 OID 28498)
-- Name: cbboletagemparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboletagemparcela (
    id_cbboletagemparcela_int bigint DEFAULT nextval(('"cbboletagemparcela_seq"'::text)::regclass) NOT NULL,
    id_cbboletagem_int bigint,
    id_cbparcela_int bigint,
    valor_total_num double precision,
    desconto_num double precision,
    entrada_num double precision,
    total_original_num double precision,
    cp_num double precision,
    comissionamento_num double precision,
    percentual_desconto_num double precision
);

--
-- TOC entry 279 (class 1259 OID 28507)
-- Name: cbboleto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboleto (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbconvenio_int bigint,
    nosso_numero_str character varying(30),
    vencimento_dat date,
    valor_total_num double precision,
    linha_digitavel_str character varying(200),
    cod_barra_str character varying(200)
);

--
-- TOC entry 280 (class 1259 OID 28517)
-- Name: cbboletoajustado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboletoajustado (
    id_cbbordero_int bigint,
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint,
    acordo_int bigint,
    parcelamento_str character varying(7),
    vencimento_original_dat date,
    vencimento_ajustado_dat date,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 281 (class 1259 OID 28528)
-- Name: cbboletonotif; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboletonotif (
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbparcela_int bigint,
    parcela_inicial_str character varying(1),
    parcela_int character varying(3),
    vencimento_dat date,
    vencimento_boleto_dat date,
    data_dat date,
    gravado_str character varying(1),
    id_cbbordero_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone,
    id_geusuario_int bigint,
    motivo_str character varying(100),
    id_gefilial_int bigint,
    id_geqlendereco_int bigint,
    id_geqlcontato_int bigint
);

--
-- TOC entry 282 (class 1259 OID 28538)
-- Name: cbboletopagamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbboletopagamento (
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    nosso_numero_str character varying(30),
    data_pagamento_dat date,
    valor_pagamento_num double precision,
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    acordo_int bigint,
    envio_baixa_dat date,
    enviado_str character varying(1)
);

--
-- TOC entry 283 (class 1259 OID 28546)
-- Name: cbbordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbbordero (
    id_cbbordero_int bigint DEFAULT nextval(('"cbbordero_seq"'::text)::regclass) NOT NULL,
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    bordero_int bigint NOT NULL,
    data_dat date NOT NULL,
    id_fibanco_int bigint NOT NULL,
    id_ficcbanco_int bigint NOT NULL,
    situacao_int integer,
    total_num double precision,
    id_cbtipopagamento_int bigint,
    itens_int bigint,
    arquivo_str character varying(60),
    carteira_int integer,
    id_cbtiponegocio_int bigint,
    gerado_str character varying(1),
    followup_str character varying(1),
    modelo_carta_int smallint,
    tipo_nosso_numero_int smallint,
    repete_contrato_str character varying(1),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    quitacao_str character varying(1),
    id_cbconvenio_int bigint,
    tipo_bordero_str character varying(1),
    origem_str character varying(1),
    tstamp timestamp without time zone,
    id_geusuario_execut_int bigint
);

--
-- TOC entry 284 (class 1259 OID 28557)
-- Name: cbbordero_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbbordero_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 285 (class 1259 OID 28564)
-- Name: cbborderonum_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbborderonum_seq
    START WITH 7245743
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 286 (class 1259 OID 28571)
-- Name: cbborderosauc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbborderosauc (
    id_cbborderosauc_int integer DEFAULT nextval(('"cbborderosauc_seq"'::text)::regclass) NOT NULL,
    id_cbbordero_int integer,
    entrada_nome_str character varying(100),
    entrada_conteudo_str text,
    ts_entrada date,
    saida_nome_str character varying(100),
    saida_conteudo_str text,
    ts_saida date,
    chave_str character varying(30),
    id_calculo_int integer,
    id_cbcontrato_int integer,
    chave_sauc_str character varying(100)
);

--
-- TOC entry 287 (class 1259 OID 28588)
-- Name: cbborderosauc_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbborderosauc_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 288 (class 1259 OID 28597)
-- Name: cbbradescobatimentotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbbradescobatimentotmp (
    contrato_str character varying(60),
    vencimento_dat date,
    remessa_dat date,
    principal_num double precision,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    sitc_str character varying(1),
    sitp_str smallint
);

--
-- TOC entry 289 (class 1259 OID 28604)
-- Name: cbcalculocomissao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculocomissao (
    id_cbcalculocomissao_int bigint DEFAULT nextval(('"cbcalculocomissao_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(30) NOT NULL,
    descricao_str character varying(60),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    data_calculo_str character varying(20)
);

--
-- TOC entry 290 (class 1259 OID 28614)
-- Name: cbcalculocomissao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculocomissao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 291 (class 1259 OID 28621)
-- Name: cbcalculocomissaofaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculocomissaofaixa (
    id_cbcalculocomissaofaixa_int bigint DEFAULT nextval(('"cbcalculocomissaofaixa_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbcalculocomissao_int bigint,
    dia_inicial_int integer,
    dia_final_int smallint,
    percentual_num double precision,
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_esregua_int bigint
);

--
-- TOC entry 292 (class 1259 OID 28632)
-- Name: cbcalculocomissaofaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculocomissaofaixa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 293 (class 1259 OID 28640)
-- Name: cbcalculodesconto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculodesconto (
    id_cbcalculodesconto_int bigint DEFAULT nextval(('"cbcalculodesconto_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(30) NOT NULL,
    descricao_str character varying(60),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    permite_maior_str character varying(1),
    senha_str character varying(30),
    maior_como_proposta_str character varying(1),
    tipo_teste_str character varying(1),
    desconto_sobre_parcelado_str character(1),
    data_senha_dat date,
    dias_senha_int integer
);

--
-- TOC entry 294 (class 1259 OID 28645)
-- Name: cbcalculodesconto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculodesconto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 295 (class 1259 OID 28654)
-- Name: cbcalculodescontofaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculodescontofaixa (
    id_cbcalculodescontofaixa_int bigint DEFAULT nextval(('"cbcalculodescontofaixa_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbcalculodesconto_int bigint,
    dia_inicial_int smallint,
    dia_final_int smallint,
    percentual_num double precision,
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_esregua_int bigint,
    valor_inicial_num double precision,
    valor_final_num double precision,
    faixa_parcelamento_inicial_int integer,
    faixa_parcelamento_final_int integer,
    faixa_permite_parcelamento_str character varying(1),
    plano_pago_inicial_int integer,
    plano_pago_final_int integer,
    ano_veiculo_inicial_int integer,
    ano_veiculo_final_int integer
);

--
-- TOC entry 296 (class 1259 OID 28664)
-- Name: cbcalculodescontofaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculodescontofaixa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 297 (class 1259 OID 28673)
-- Name: cbcalculodescontofaixaregua; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculodescontofaixaregua (
    id_cbcalculodescontofaixaregua_int bigint DEFAULT nextval(('"cbcalculodescontofaixaregua_seq"'::text)::regclass) NOT NULL,
    id_cbcalculodescontofaixa_int bigint,
    id_esregua_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 298 (class 1259 OID 28683)
-- Name: cbcalculodescontofaixaregua_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculodescontofaixaregua_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 299 (class 1259 OID 28690)
-- Name: cbcalculodescontofator; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculodescontofator (
    id_cbcalculodescontofator_int bigint DEFAULT nextval(('"cbcalculodescontofator_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbcalculodesconto_int bigint,
    dia_inicial_int smallint,
    dia_final_int smallint,
    percentual_num double precision,
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_esregua_int bigint,
    valor_inicial_num double precision,
    valor_final_num double precision,
    faixa_parcelamento_inicial_int integer,
    faixa_parcelamento_final_int integer,
    faixa_permite_parcelamento_str character varying(1)
);

--
-- TOC entry 300 (class 1259 OID 28698)
-- Name: cbcalculodescontofator_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculodescontofator_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 301 (class 1259 OID 28705)
-- Name: cbcalculodescontofatorusuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculodescontofatorusuario (
    id_cbcalculodescontofator_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    id_geusuario_alt_int bigint,
    ativo_bit bit(1)
);

--
-- TOC entry 302 (class 1259 OID 28715)
-- Name: cbcalculoparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculoparcela (
    id_cbcalculoparcela_int bigint,
    id_cbcontrato_int bigint NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    principal_num double precision,
    juros_mora_num double precision,
    multa_num double precision,
    cp_num double precision,
    despesa_banco_num double precision,
    honorarios_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    acrescimo_num double precision,
    valor_total_num double precision,
    notificacao_num double precision,
    data_calculo_dat timestamp with time zone,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_cbitembordero_int bigint,
    comissionamento_num double precision,
    retido_num double precision,
    percentual_desconto_num double precision,
    descapitalizacao_num real,
    chave_bradesco_str character varying(300),
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    pc_cp_num double precision,
    pc_multa_num double precision,
    pc_juros_num double precision,
    pc_mora_num double precision,
    taxa_financiamento_num double precision,
    perc_cp_num double precision,
    perc_multa_num double precision,
    perc_juros_num double precision,
    perc_mora_num double precision
);

--
-- TOC entry 303 (class 1259 OID 28723)
-- Name: cbcalculoparcela_10_130_3; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculoparcela_10_130_3 (
    id_cbcalculoparcela_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    principal_num double precision,
    juros_mora_num double precision,
    multa_num double precision,
    cp_num double precision,
    despesa_banco_num double precision,
    honorarios_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    acrescimo_num double precision,
    valor_total_num double precision,
    notificacao_num double precision,
    data_calculo_dat timestamp with time zone,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_cbitembordero_int bigint,
    comissionamento_num double precision,
    retido_num double precision,
    percentual_desconto_num double precision,
    descapitalizacao_num real,
    chave_bradesco_str character varying(300),
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    pc_cp_num double precision,
    pc_multa_num double precision,
    pc_juros_num double precision,
    pc_mora_num double precision,
    taxa_financiamento_num double precision,
    perc_cp_num double precision,
    perc_multa_num double precision,
    perc_juros_num double precision,
    perc_mora_num double precision
);

--
-- TOC entry 304 (class 1259 OID 28734)
-- Name: cbcalculoparcelaparcelamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculoparcelaparcelamento (
    id_cbcalculoparcelaparcelamento_int integer DEFAULT nextval(('"cbcalculoparcelaparcelamento_seq"'::text)::regclass) NOT NULL,
    id_cbcalculoparcela_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    plano_acordo_int bigint,
    parcela_parcelamento_int bigint,
    data_vencimento_dat date,
    valor_parcelamento_num double precision,
    perc_desconto_num double precision,
    desconto_num double precision,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    juros_num double precision,
    despesas_num double precision,
    tarifa_num double precision,
    ho_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    acrescimo_num double precision,
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    pc_cp_num double precision,
    pc_multa_num double precision,
    pc_juros_num double precision,
    pc_mora_num double precision,
    taxa_financiamento_num double precision
);

--
-- TOC entry 305 (class 1259 OID 28745)
-- Name: cbcalculoparcelaparcelamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculoparcelaparcelamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 306 (class 1259 OID 28752)
-- Name: cbcalculos_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculos_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 307 (class 1259 OID 28761)
-- Name: cbcalculotabela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculotabela (
    id_cbcalculotabela_int bigint DEFAULT nextval(('"cbcalculotabela_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(15) NOT NULL,
    descricao_str character varying(30),
    ativo_str character varying(1),
    orientacao_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 308 (class 1259 OID 28770)
-- Name: cbcalculotabela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculotabela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 309 (class 1259 OID 28779)
-- Name: cbcalculotabelafaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalculotabelafaixa (
    id_cbcalculotabelafaixa_int bigint DEFAULT nextval(('"cbcalculotabelafaixa_seq"'::text)::regclass) NOT NULL,
    id_cbcalculotabela_int bigint,
    dia_inicial_int integer,
    dia_final_int integer,
    valor_num double precision,
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_esregua_int bigint
);

--
-- TOC entry 310 (class 1259 OID 28783)
-- Name: cbcalculotabelafaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcalculotabelafaixa_seq
    START WITH 14
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 311 (class 1259 OID 28802)
-- Name: cbcalparcelamento_10_130_3; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcalparcelamento_10_130_3 (
    id_cbcalculoparcelaparcelamento_int integer,
    id_cbcalculoparcela_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    plano_acordo_int bigint,
    parcela_parcelamento_int bigint,
    data_vencimento_dat date,
    valor_parcelamento_num double precision,
    perc_desconto_num double precision,
    desconto_num double precision,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    juros_num double precision,
    despesas_num double precision,
    tarifa_num double precision,
    ho_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    acrescimo_num double precision,
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    pc_cp_num double precision,
    pc_multa_num double precision,
    pc_juros_num double precision,
    pc_mora_num double precision,
    taxa_financiamento_num double precision
);

--
-- TOC entry 312 (class 1259 OID 28813)
-- Name: cbcampanha; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcampanha (
    id_cbcampanha_int bigint DEFAULT nextval(('"cbcampanha_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(10),
    descricao_str character varying(50),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    mostra_parcelamento_str character varying(1),
    mostra_vista_str character varying(1),
    senha_str character varying(5),
    validade_dat date,
    descricao_colunas_txt text,
    descricao_colunas_item_txt text,
    documentacao_bta bytea,
    documentacao_txt text,
    id_geprocesso_int bigint,
    id_geitemprocesso_int bigint,
    id_gegrupoprocesso_int bigint,
    proposta_obrigatoria_bit bit(1),
    caminho_sauc_str character varying(500),
    campanha_padrao_boletagem_str character varying(1),
    codigo_autorizacao_str character varying(20),
    processo_int bigint,
    pagou_facil_int bigint,
    pagou_facil_opcoes_destaque_str bigint
);

--
-- TOC entry 313 (class 1259 OID 28826)
-- Name: cbcampanha_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcampanha_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 314 (class 1259 OID 28835)
-- Name: cbcampanhacalculo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcampanhacalculo (
    id_cbcampanhacalculo_int bigint DEFAULT nextval(('"cbcampanhacalculo_seq"'::text)::regclass) NOT NULL,
    id_cbcampanha_int bigint,
    id_cbbordero_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    tipo_dias_str character varying(2)
);

--
-- TOC entry 315 (class 1259 OID 28844)
-- Name: cbcampanhacalculo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcampanhacalculo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 316 (class 1259 OID 28853)
-- Name: cbcampanhateste_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcampanhateste_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 317 (class 1259 OID 28861)
-- Name: cbcampanhateste; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcampanhateste (
    id_cbcampanhateste_int bigint DEFAULT nextval('public.cbcampanhateste_seq'::regclass) NOT NULL,
    id_cbcampanha_int bigint,
    id_cbcalculodesconto_int bigint,
    id_gecampotabela_int bigint,
    operador_str character varying(30),
    valor_txt text,
    senha_str character varying(40),
    descricao_teste_str character varying(60),
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 318 (class 1259 OID 28871)
-- Name: cbcampanhatesteautorizado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcampanhatesteautorizado (
    id_cbcampanhateste_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    ativo_bit bit(1),
    tstamp timestamp without time zone
);

--
-- TOC entry 319 (class 1259 OID 28879)
-- Name: cbcampanhatesteitembordero_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcampanhatesteitembordero_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 320 (class 1259 OID 28886)
-- Name: cbcampanhatesteitembordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcampanhatesteitembordero (
    id_cbcampanhatesteitembordero_int bigint DEFAULT nextval('public.cbcampanhatesteitembordero_seq'::regclass) NOT NULL,
    id_cbcampanhateste_int bigint NOT NULL,
    id_cbitembordero_int bigint NOT NULL,
    id_geusuario_int bigint,
    tstamp_inclusao timestamp without time zone DEFAULT now()
);

--
-- TOC entry 321 (class 1259 OID 28896)
-- Name: cbcampanhausuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcampanhausuario (
    id_cbcampanhausuario_int bigint DEFAULT nextval(('"cbcampanhausuario_seq"'::text)::regclass) NOT NULL,
    id_cbcampanha_int bigint,
    id_geusuario_int bigint,
    data_hora_homologacao_dat timestamp without time zone
);

--
-- TOC entry 322 (class 1259 OID 28907)
-- Name: cbcampanhausuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcampanhausuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 323 (class 1259 OID 28914)
-- Name: cbcartorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcartorio (
    id_cbcartorio_int bigint DEFAULT nextval(('"cbcartorio_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint NOT NULL,
    razao_social_str character varying(40),
    id_gecidade_int bigint,
    endereco_str character varying(40),
    bairro_str character varying(30),
    cep_str character varying(10),
    fone_str character varying(10),
    contato_str character varying(20),
    obs_txt text,
    id_cbmodlayout_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_layout_envio_int bigint,
    id_layout_retorno_int bigint,
    ativo_str character varying(1),
    tipo_reg_despesa_int bigint,
    tipo_reg_fisico_int bigint,
    verificacao_int smallint,
    inicio_linha_str character varying(20),
    id_layout_docfisico_int bigint,
    id_cbnotiftiporemessa_int bigint,
    tipo_cliente_str character varying(30),
    id_layout_remessaboletagem_int bigint,
    informa_despesa_str character varying(1),
    modelo_bra_imob_str character varying(1),
    cartorio_comarca_str character varying(1),
    cartorio_email_str character varying(1),
    cartorio_simples_str character varying(1),
    cartorio_cartorial_str character varying(1),
    cartorio_compc_str character varying(1),
    cartorio_sempc_str character varying(1)
);

--
-- TOC entry 324 (class 1259 OID 28931)
-- Name: cbcartorio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcartorio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 325 (class 1259 OID 28938)
-- Name: cbcartorioaviso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcartorioaviso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 326 (class 1259 OID 28946)
-- Name: cbcartorioaviso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcartorioaviso (
    id_cbcartorio_int bigint,
    id_cbcartorio_aviso_int bigint,
    id_cbcartorioaviso_int bigint DEFAULT nextval('public.cbcartorioaviso_seq'::regclass) NOT NULL,
    aviso_str character varying(1)
);

--
-- TOC entry 327 (class 1259 OID 28956)
-- Name: cbcobrancaautomatica; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcobrancaautomatica (
    id_cbcobrancaautomatica_int bigint DEFAULT nextval(('"cbcobrancaautomatica_seq"'::text)::regclass) NOT NULL,
    id_cbsitcontato_int bigint NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    data_retorno_dat date,
    hora_retorno_tim timestamp with time zone,
    descricao_str character varying(1000),
    data_resolucao_dat date,
    hora_resolucao_tim timestamp with time zone,
    historico_str character varying(1000),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_cbitembordero_int bigint,
    id_gegrupo_fila_cobranca_int bigint,
    id_geusuario_fila_cobranca_int bigint
);

--
-- TOC entry 328 (class 1259 OID 28975)
-- Name: cbcobrancaautomatica_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcobrancaautomatica_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 329 (class 1259 OID 28980)
-- Name: cbcobrancaautomaticaboleto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcobrancaautomaticaboleto (
    id_cbcobrancaautomaticaboleto_int integer DEFAULT nextval(('"cbcobrancaautomaticaboleto_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_cbbordero_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    data_hora_envio_tim timestamp without time zone,
    tipo_str character varying(1)
);

--
-- TOC entry 330 (class 1259 OID 28990)
-- Name: cbcobrancaautomaticaboleto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcobrancaautomaticaboleto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 331 (class 1259 OID 28994)
-- Name: cbcodigodivida; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcodigodivida (
    id_cbcodigodivida_int bigint DEFAULT nextval(('"cbcodigodivida_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(6),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 332 (class 1259 OID 29004)
-- Name: cbcodigodivida_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcodigodivida_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 333 (class 1259 OID 29011)
-- Name: cbcodigodividaparametros; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcodigodividaparametros (
    id_cbcodigodividaparametros_int bigint DEFAULT nextval(('"cbcodigodividaparametros_seq"'::text)::regclass) NOT NULL,
    id_cbcodigodivida_int bigint NOT NULL,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_cbproduto_int bigint,
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp with time zone,
    descricao_str character varying(40)
);

--
-- TOC entry 334 (class 1259 OID 29024)
-- Name: cbcodigodividaparametros_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcodigodividaparametros_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 335 (class 1259 OID 29031)
-- Name: cbcontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontrato (
    id_cbcontrato_int bigint DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbtiponegocio_int bigint NOT NULL,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    dt_nascimento_dat date,
    cidade_nascimento_str character varying(30),
    pai_str character varying(60),
    mae_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    profissao_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(30),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    local_trab_avalista1_str character varying(40),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(30),
    cidade_trab_avalista1_str character varying(30),
    estado_trab_avalista1_str character varying(2),
    cep_trab_avalista1_str character varying(10),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_fax_avalista1_str character varying(5),
    fax_avalista1_str character varying(20),
    tipo_pessoa_avalista1_str character varying(1),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(30),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    local_trab_avalista2_str character varying(40),
    endereco_trab_avalista2_str character varying(60),
    bairro_trab_avalista2_str character varying(30),
    cidade_trab_avalista2_str character varying(30),
    estado_trab_avalista2_str character varying(2),
    cep_trab_avalista2_str character varying(10),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_fax_avalista2_str character varying(5),
    fax_avalista2_str character varying(20),
    tipo_pessoa_avalista2_str character varying(1),
    produto_str character varying(30),
    marca_str character varying(30),
    modelo_str character varying(30),
    cor_str character varying(25),
    ano_str character varying(5),
    chassis_str character varying(25),
    placa_str character varying(8),
    combustivel_str character varying(1),
    numero_dut_str character varying(16),
    renavam_str character varying(10),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    dias_atraso_ult_parc_int integer,
    valor_montante_num double precision,
    comissao_perm_num double precision,
    prazo_solucao_dat date,
    id_fimoeda_int bigint,
    despesas_finan_num double precision,
    id_cbsituacaocontrato_int bigint,
    data_stand_by_dat date,
    data_contato_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    notificacao_str character varying(1),
    protesto_str character varying(1),
    documento_str character varying(1),
    alterado_edi_str character varying(1),
    id_gefilial_int bigint,
    obs_banco_txt text,
    obs_pasc_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geempresa_int bigint,
    observacao_str text,
    sexo_str character varying(1),
    id_cbetapa_int bigint,
    email_str character varying(50),
    data_envio_dat date,
    data_notificacao_dat date,
    data_protesto_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    taxa_juridico_num double precision,
    grupo_str character varying(10),
    cota_str character varying(10),
    provisionamento_dat date,
    flag_pdd character varying(1),
    data_ar_dat date,
    vl_cdesc_avista_num double precision,
    perc_maxdesc_num double precision,
    liberacao_dat date,
    data_ajuizamento_dat date,
    envio_tratamento timestamp with time zone,
    retorno_tratamento_dat date,
    solicitacao_tratamento_tmz timestamp with time zone,
    conclusao_tratamento_tmz timestamp with time zone,
    status_tratamento_str character varying(1),
    data_devolucao_documento_dat date,
    lote_str character varying(20),
    data_ult_evento_dat date,
    cliente_localizado_bit bit(1),
    id_gebancoevento_int bigint,
    id_gebancofase_int bigint,
    data_localizado_dat date,
    id_esbancoeventos_int bigint,
    id_esbancofases_int bigint,
    ultima_situacao_str character varying(2),
    data_base_dat date,
    trava_gestor_str character varying(1),
    ultimo_id_cbsitcontato_int bigint,
    ultima_data_contato_dat date,
    ultimo_contato_manual_data_dat date,
    ultimo_contato_manual_id_cbsitcontato_int integer,
    cobranca_piloto_str character varying(1),
    cod_cc character varying(30),
    dsc_cc character varying(60),
    dsc_fam_prod character varying(60),
    dsc_fx_atraso character varying(40),
    dsc_fx_principal character varying(40),
    dsc_fx_sld_dev character varying(40),
    dsc_status character varying(30),
    dsc_regua character varying(60),
    dsc_sit_parcela character varying(30),
    dt_venc_parc date,
    num_parcela bigint,
    vlr_sld_dev double precision,
    vlr_principal double precision,
    vlr_tot_res double precision,
    qtde_parcelas bigint,
    tstampbi timestamp without time zone
);

--
-- TOC entry 336 (class 1259 OID 29045)
-- Name: cbcontrato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcontrato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 337 (class 1259 OID 29049)
-- Name: cbcontratoagrupado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoagrupado (
    id_cbcontratoagrupado_int bigint DEFAULT nextval(('cbcontratoagrupado_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    arquivo_str character varying(20),
    id_cbcontrato_int bigint,
    codigo_operacao_str character varying(5),
    contrato_str character varying(30),
    cpf_str character varying(30),
    parcela_int bigint,
    data_parcela_dat date,
    valor_parcela_num double precision,
    valor_acordo_num double precision,
    valor_atualizado_num double precision,
    alterado_str character varying(1)
);

--
-- TOC entry 338 (class 1259 OID 29060)
-- Name: cbcontratoagrupado_1; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoagrupado_1 (
    id_gecliente_int bigint,
    arquivo_str character varying(20),
    id_cbcontrato_int bigint,
    codigo_operacao_str character varying(5),
    contrato_str character varying(30),
    cpf_str character varying(30),
    parcela_int bigint,
    data_parcela_dat date,
    valor_parcela_num double precision,
    valor_acordo_num double precision,
    valor_atualizado_num double precision
);

--
-- TOC entry 339 (class 1259 OID 29067)
-- Name: cbcontratoagrupado_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcontratoagrupado_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 340 (class 1259 OID 29075)
-- Name: cbcontratoagrupadolinha; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoagrupadolinha (
    id_gecliente_int bigint,
    arquivo_str character varying(20),
    linha_str text
);

--
-- TOC entry 341 (class 1259 OID 29086)
-- Name: cbcontratoalianca; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoalianca (
    codigo_segmento_str character varying(6),
    nome_segmento_str character varying(30),
    tipo_corresp_str character varying(1),
    contrato_remessa_str character varying(10),
    nome_destinatario_str character varying(50),
    data_documento_dat date,
    numero_doc_str character varying(17),
    data_process_dat date,
    quantidade_str character varying(10),
    valor_unitario_str character varying(10),
    nome_sacado_boleto_str character varying(60),
    endereco_boleto_str character varying(60),
    endereco2_boleto_str character varying(60),
    carteira_str character varying(6),
    linha_1_str character varying(60),
    linha_2_str character varying(60),
    linha_3_str character varying(60),
    linha_4_str character varying(60),
    linha_5_str character varying(60),
    local_pagamento_str character varying(60)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 342 (class 1259 OID 29106)
-- Name: cbcontratoaudac; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoaudac (
    id_cbcontrato_int bigint DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass),
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    dt_nascimento_dat date,
    cidade_nascimento_str character varying(30),
    pai_str character varying(60),
    mae_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    profissao_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(30),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    local_trab_avalista1_str character varying(40),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(30),
    cidade_trab_avalista1_str character varying(30),
    estado_trab_avalista1_str character varying(2),
    cep_trab_avalista1_str character varying(10),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_fax_avalista1_str character varying(5),
    fax_avalista1_str character varying(20),
    tipo_pessoa_avalista1_str character varying(1),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(30),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    local_trab_avalista2_str character varying(40),
    endereco_trab_avalista2_str character varying(60),
    bairro_trab_avalista2_str character varying(30),
    cidade_trab_avalista2_str character varying(30),
    estado_trab_avalista2_str character varying(2),
    cep_trab_avalista2_str character varying(10),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_fax_avalista2_str character varying(5),
    fax_avalista2_str character varying(20),
    tipo_pessoa_avalista2_str character varying(1),
    produto_str character varying(30),
    marca_str character varying(30),
    modelo_str character varying(30),
    cor_str character varying(25),
    ano_str character varying(5),
    chassis_str character varying(25),
    placa_str character varying(8),
    combustivel_str character varying(1),
    numero_dut_str character varying(16),
    renavam_str character varying(10),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    dias_atraso_ult_parc_int integer,
    valor_montante_num double precision,
    comissao_perm_num double precision,
    prazo_solucao_dat date,
    id_fimoeda_int bigint,
    despesas_finan_num double precision,
    id_cbsituacaocontrato_int bigint,
    data_stand_by_dat date,
    data_contato_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    notificacao_str character varying(1),
    protesto_str character varying(1),
    documento_str character varying(1),
    alterado_edi_str character varying(1),
    id_gefilial_int bigint,
    obs_banco_txt text,
    obs_pasc_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geempresa_int bigint,
    observacao_str text,
    sexo_str character varying(1),
    id_cbetapa_int bigint,
    email_str character varying(50),
    data_envio_dat date,
    data_notificacao_dat date,
    data_protesto_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    taxa_juridico_num double precision,
    grupo_str character varying(10),
    cota_str character varying(10),
    provisionamento_dat date,
    flag_pdd character varying(1),
    data_ar_dat date,
    vl_cdesc_avista_num double precision,
    perc_maxdesc_num double precision,
    codigo_cli_int bigint,
    codigo_financeira_int bigint,
    tipo_tel_cli_str character varying(2),
    tipo_pessoa_cli_str character varying(2),
    status_ult_ligacao_str character varying(1),
    tel_bloqueado_str character varying(1),
    end_bloqueado_str character varying(1),
    data_dev_contrato_dat date,
    classificacao_audac_str character varying(6),
    posicao_contrato character varying(1),
    tipo_contrato_str character varying(1),
    unidade_gerou_acordo_str character varying(4),
    acordos_realizados_str character varying(10),
    numero_res_str character varying(6),
    data_alteracao_dat date
)
INHERITS (public.cbcontrato);

--
-- TOC entry 343 (class 1259 OID 29119)
-- Name: cbcontratobancopaulista; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobancopaulista (
    dt_nascimento_avalista1_dat date,
    banco_cheque_str character varying(3),
    numero_cheque_str character varying(10),
    agencia_cheque_str character varying(5),
    conta_cheque_str character varying(20),
    numero_comp_cheque_str character varying(3),
    codigo_produto_str character varying(4),
    rg_avalista1_str character varying(20),
    nome_ref1_avalista2_str character varying(40),
    fone_ref1_avalista2_str character varying(15),
    nome_ref2_avalista2_str character varying(40),
    fone_ref2_avalista2_str character varying(15),
    nucleo_str character varying(2),
    tipo_seguro_str character varying(1),
    tipo_contrato_str character varying(4),
    codigo_grupo_str character varying(4),
    valor_prestacao_num double precision,
    data_primeiro_vecto_dat date,
    data_ultim_vecto_dat date,
    taxa_financiamento_num double precision,
    nome_grupo_str character varying(40)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 344 (class 1259 OID 29131)
-- Name: cbcontratobbjur; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobbjur (
    id_cbcontrato_int bigint DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass),
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    dt_nascimento_dat date,
    cidade_nascimento_str character varying(30),
    pai_str character varying(60),
    mae_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    profissao_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(30),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    local_trab_avalista1_str character varying(40),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(30),
    cidade_trab_avalista1_str character varying(30),
    estado_trab_avalista1_str character varying(2),
    cep_trab_avalista1_str character varying(10),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_fax_avalista1_str character varying(5),
    fax_avalista1_str character varying(20),
    tipo_pessoa_avalista1_str character varying(1),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(30),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    local_trab_avalista2_str character varying(40),
    endereco_trab_avalista2_str character varying(60),
    bairro_trab_avalista2_str character varying(30),
    cidade_trab_avalista2_str character varying(30),
    estado_trab_avalista2_str character varying(2),
    cep_trab_avalista2_str character varying(10),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_fax_avalista2_str character varying(5),
    fax_avalista2_str character varying(20),
    tipo_pessoa_avalista2_str character varying(1),
    produto_str character varying(30),
    marca_str character varying(30),
    modelo_str character varying(30),
    cor_str character varying(25),
    ano_str character varying(5),
    chassis_str character varying(25),
    placa_str character varying(8),
    combustivel_str character varying(1),
    numero_dut_str character varying(16),
    renavam_str character varying(10),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    dias_atraso_ult_parc_int integer,
    valor_montante_num double precision,
    comissao_perm_num double precision,
    prazo_solucao_dat date,
    id_fimoeda_int bigint,
    despesas_finan_num double precision,
    id_cbsituacaocontrato_int bigint,
    data_stand_by_dat date,
    data_contato_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    notificacao_str character varying(1),
    protesto_str character varying(1),
    documento_str character varying(1),
    alterado_edi_str character varying(1),
    id_gefilial_int bigint,
    obs_banco_txt text,
    obs_pasc_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geempresa_int bigint,
    observacao_str text,
    sexo_str character varying(1),
    id_cbetapa_int bigint,
    email_str character varying(50),
    data_envio_dat date,
    data_notificacao_dat date,
    data_protesto_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    taxa_juridico_num double precision,
    grupo_str character varying(10),
    cota_str character varying(10),
    provisionamento_dat date,
    flag_pdd character varying(1),
    data_ar_dat date,
    vl_cdesc_avista_num double precision,
    perc_maxdesc_num double precision,
    mci_cliente_int integer
)
INHERITS (public.cbcontrato);

--
-- TOC entry 345 (class 1259 OID 29142)
-- Name: cbcontratobic; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobic (
    liberacao_dat date,
    situacao_str character varying(2),
    vencimento_contrato_dat date,
    titulo_carteira_str character varying(20),
    nome_referencia2_str character varying(40),
    telefone_referencia2_str character varying(20),
    nome_empresa_cli_str character varying(50),
    complemento_end_fica_str character varying(60),
    mae_fica_str character varying(60),
    pai_fica_str character varying(60),
    nome_conjuge_fica_str character varying(60),
    nome_empresa_fica_str character varying(60),
    data_fim_operacao_dat date,
    diretoria_regional_int bigint
)
INHERITS (public.cbcontrato);

--
-- TOC entry 346 (class 1259 OID 29157)
-- Name: cbcontratobidoia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobidoia (
    data_ajuizamento_dat date,
    pasta_str character varying(20),
    banco_str character varying(20),
    cod_estagio_int integer,
    data_estagio_str date,
    renegociados_str character varying(20),
    acao_contra_str character varying(1),
    fase_negociacao_str character varying(20),
    faixa_atraso_str character varying(30),
    fcvs_str character varying(1),
    principal_atraso_num double precision,
    juros_num double precision,
    ultima_prestacao_num double precision,
    ativo_decursado_str character varying(1),
    tipo_financiamento_str character varying(5),
    sistema_amortizacao_str character varying(5),
    prazo_financiamento_int smallint,
    juros_nominal_num double precision,
    juros_mora_num double precision,
    multa_num double precision,
    ultima_prestacao_dat date,
    situacao_cobranca_str character varying(30),
    saldo_vaf_num double precision,
    valor_avaliacao1_num double precision,
    valor_avaliacao2_num double precision,
    contrato_gaveta_str character varying(1),
    data_avaliacao2_dat date,
    data_avaliacao1_dat date,
    empresa_avaliadora1_str character varying(60),
    empresa_avaliadora2_str character varying(60),
    data_ult_pagto_dat date,
    prioridade_negociacao_str character varying(30),
    escritorio_str character varying(50),
    estagio_str character varying(80),
    plano_str character varying(80)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 347 (class 1259 OID 29166)
-- Name: cbcontratobmc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobmc (
    data_devolucao_documento_dat date,
    codigo_produto_num bigint,
    tipo_contrato_str character varying(4),
    codigo_loja_num bigint,
    loja_str character varying(40),
    taxa_financiamento_num double precision,
    valor_prestacao_num double precision,
    data_pri_vencimento_dat date,
    data_ult_vencimento_dat date,
    fone_cel_avalista1_str character varying(15),
    nome_ref1_avalista1_str character varying(40),
    fone_ref1_avalista1_str character varying(15),
    nome_ref2_avalista1_str character varying(40),
    fone_ref2_avalista1_str character varying(15),
    fone_cel_avalista2_str character varying(15),
    nome_ref1_avalista2_str character varying(40),
    fone_ref1_avalista2_str character varying(15),
    nome_ref2_avalista2_str character varying(40),
    fone_ref2_avalista2_str character varying(15),
    codigo_empresa_str character varying(2),
    empresa_str character varying(40),
    codigo_produto_cob_str character varying(2),
    produto_cob_str character varying(40),
    tipo_seguro_str character varying(1),
    nucleo_str character varying(2),
    data_leilao date,
    saldo_remanescente_devedor_num double precision,
    saldo_remanescente_antes_venda_num double precision,
    valor_remanescente_apurado_venda_num double precision,
    valor_remanescente_final_num double precision,
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 348 (class 1259 OID 29183)
-- Name: cbcontratobradesco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobradesco (
    agencia_int bigint,
    carteira_str character varying(3),
    conta_str character varying(8),
    contrato_esp_int bigint,
    diretoria_regional_int bigint,
    complemento_end_fica_str character varying(10),
    nome_conjuge_fica_str character varying(25),
    nome_empresa_cli_str character varying(40),
    nome_empresa_fica_str character varying(40),
    mae_fica_str character varying(40),
    pai_fica_str character varying(40),
    data_fim_operacao_dat date
)
INHERITS (public.cbcontrato);

--
-- TOC entry 349 (class 1259 OID 29202)
-- Name: cbcontratobradescocartao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobradescocartao (
    ciclo_cartao_str character varying(2),
    status_cartao_str character varying(2),
    data_status_cartao_dat date,
    idade_cartao_int smallint,
    valor_limite_num double precision,
    valor_gastos_num double precision,
    data_pagamento_dat date,
    data_fechamento_dat date,
    valor_pagamento_num double precision,
    valor_principal_num double precision,
    situacao_cacs_str character varying(3),
    ciclo_atraso_int smallint,
    data_ultima_fatura_dat date,
    data_calculo_dat date,
    calculo_convencionais_dat date,
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 350 (class 1259 OID 29215)
-- Name: cbcontratobradescocomercial; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobradescocomercial (
    digito_conta_str character varying(1),
    conta_corrente_str character varying(10),
    agencia_str character varying(7),
    cpf_administrador_str character varying(15),
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 351 (class 1259 OID 29228)
-- Name: cbcontratobradescocorporativo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobradescocorporativo (
    data_referencia_dat date,
    data_ultimo_pagto_dat date,
    data_prox_vecto_dat date,
    valor_prestacao_num double precision,
    valor_juros_num double precision,
    saldo_parcelado_num double precision,
    valor_recebido_num double precision,
    numero_conta_str character varying(20),
    data_inicio_acordo_dat date,
    data_final_acordo_dat date,
    status_acordo_str character varying(1),
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 352 (class 1259 OID 29241)
-- Name: cbcontratobradescocredimob; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratobradescocredimob (
    valor_financ double precision,
    valor_venda double precision,
    taxa_juros double precision,
    data_reinicio date,
    valor_quitacao double precision,
    situacao integer,
    valor_multa_num double precision,
    garantia_int bigint,
    compr_num_filial bigint
)
INHERITS (public.cbcontrato);

--
-- TOC entry 353 (class 1259 OID 29254)
-- Name: cbcontratocaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratocaixa (
    data_primerio_vencimento_dat date,
    valor_entrada_num double precision,
    tipo_pagamento_str character varying(1)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 354 (class 1259 OID 29267)
-- Name: cbcontratoconfianca; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoconfianca (
    observacao_txt text
)
INHERITS (public.cbcontrato);

--
-- TOC entry 355 (class 1259 OID 29280)
-- Name: cbcontratocredibel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratocredibel (
    codigo_loja_str character varying(5),
    nome_loja_str character varying(30),
    codigo_cobradora_str character varying(4),
    rg_avalista1_str character varying(10),
    dt_nascimento_avalista1_dat date,
    contrato_original_str character varying(30),
    numero_placa_str character varying(10),
    data_devolucao_dat date,
    complemento_trabalho_str character varying(20),
    dia_medio_pgto_int bigint,
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 356 (class 1259 OID 29299)
-- Name: cbcontratocredigy; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratocredigy (
    tipo_endereco_str character varying(1),
    ramal_fax_str character varying(1),
    ddd_pager_str character varying(5),
    telefone_pager_str character varying(10),
    codigo_pager_str character varying(10),
    justificativa_str character varying(2),
    fonte_pesquisa_str character varying(2),
    codigo_empresa_str character varying(3),
    ultima_atualizacao_dat date,
    subsegmentacao_str character varying(4),
    agencia_str character varying(5),
    conta_corrente_str character varying(10),
    fg_call_str character varying(1)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 357 (class 1259 OID 29314)
-- Name: cbcontratocsc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratocsc (
    data_devolucao_documento_dat date,
    complemento_trabalho_str character varying(20),
    compl_end_avalista1_str character varying(20),
    compl_end_avalista2_str character varying(20),
    valor_bem_num double precision,
    valor_entrada_num double precision,
    valor_financiamento_num double precision,
    qtd_parc_pagas_int bigint,
    qtd_parc_pagar_int bigint,
    cod_veic_legal_int bigint,
    data_inclusao_dat date
)
INHERITS (public.cbcontrato);

--
-- TOC entry 358 (class 1259 OID 29323)
-- Name: cbcontratodevedores; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratodevedores (
    id_cbcontratodevedores_int bigint DEFAULT nextval(('"cbcontratodevedores_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    nome_str character varying(60),
    cpf_str character varying(20)
);

--
-- TOC entry 359 (class 1259 OID 29333)
-- Name: cbcontratodevedores_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbcontratodevedores_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 360 (class 1259 OID 29339)
-- Name: cbcontratoeleva; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoeleva (
    codigo_loja_str character varying(5),
    nome_loja_str character varying(30),
    codigo_cobradora_str character varying(4),
    rg_avalista1_str character varying(10),
    dt_nascimento_avalista1_dat date,
    contrato_original_str character varying(30),
    numero_placa_str character varying(10),
    data_devolucao_dat date,
    complemento_trabalho_str character varying(20),
    dia_medio_pgto_int bigint,
    cod_cliente_str character varying(10),
    nome_func_str character varying(60),
    cod_func_str character varying(10),
    cod_filial_str character varying(10),
    descricao_filial_str character varying(60),
    cod_faturamento_str character varying(10),
    descricao_faturamento_str character varying(60),
    cobranca_str character varying(100),
    batimento_str character varying(1),
    contato_loja_str character varying(20),
    cidade_loja_str character varying(60),
    estado_loja_str character varying(2),
    contato_loja_adm_str character varying(60),
    tipo_str character varying(10),
    id_geterceiro_int integer,
    pasta_str character varying(40),
    tipo_acao_str character varying(40),
    numero_processo_str character varying(40),
    data_operacao_dat date,
    acao_indenizatoria_str character varying(10),
    nome_orgao_str character varying(10),
    nome_advogado_contrario_str character varying(10),
    codigo_operacao_str character varying(10),
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2),
    fonte_score_str character varying(50),
    score_str character varying(50),
    black_list_ouvidoria_int integer,
    ddd_adicional_str character varying(3),
    telefone_adicional_str character varying(20),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    data_obito_dat date,
    nome_fantasia_devedor_str character varying
)
INHERITS (public.cbcontrato);

--
-- TOC entry 1693 (class 1259 OID 66749195)
-- Name: cbcontratoeleva_fila; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoeleva_fila (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    dt_nascimento_dat date,
    cidade_nascimento_str character varying(30),
    pai_str character varying(60),
    mae_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    profissao_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(30),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    local_trab_avalista1_str character varying(40),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(30),
    cidade_trab_avalista1_str character varying(30),
    estado_trab_avalista1_str character varying(2),
    cep_trab_avalista1_str character varying(10),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_fax_avalista1_str character varying(5),
    fax_avalista1_str character varying(20),
    tipo_pessoa_avalista1_str character varying(1),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(30),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    local_trab_avalista2_str character varying(40),
    endereco_trab_avalista2_str character varying(60),
    bairro_trab_avalista2_str character varying(30),
    cidade_trab_avalista2_str character varying(30),
    estado_trab_avalista2_str character varying(2),
    cep_trab_avalista2_str character varying(10),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_fax_avalista2_str character varying(5),
    fax_avalista2_str character varying(20),
    tipo_pessoa_avalista2_str character varying(1),
    produto_str character varying(30),
    marca_str character varying(30),
    modelo_str character varying(30),
    cor_str character varying(25),
    ano_str character varying(5),
    chassis_str character varying(25),
    placa_str character varying(8),
    combustivel_str character varying(1),
    numero_dut_str character varying(16),
    renavam_str character varying(10),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    dias_atraso_ult_parc_int integer,
    valor_montante_num double precision,
    comissao_perm_num double precision,
    prazo_solucao_dat date,
    id_fimoeda_int bigint,
    despesas_finan_num double precision,
    id_cbsituacaocontrato_int bigint,
    data_stand_by_dat date,
    data_contato_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    notificacao_str character varying(1),
    protesto_str character varying(1),
    documento_str character varying(1),
    alterado_edi_str character varying(1),
    id_gefilial_int bigint,
    obs_banco_txt text,
    obs_pasc_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geempresa_int bigint,
    observacao_str text,
    sexo_str character varying(1),
    id_cbetapa_int bigint,
    email_str character varying(50),
    data_envio_dat date,
    data_notificacao_dat date,
    data_protesto_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    taxa_juridico_num double precision,
    grupo_str character varying(10),
    cota_str character varying(10),
    provisionamento_dat date,
    flag_pdd character varying(1),
    data_ar_dat date,
    vl_cdesc_avista_num double precision,
    perc_maxdesc_num double precision,
    liberacao_dat date,
    data_ajuizamento_dat date,
    envio_tratamento timestamp with time zone,
    retorno_tratamento_dat date,
    solicitacao_tratamento_tmz timestamp with time zone,
    conclusao_tratamento_tmz timestamp with time zone,
    status_tratamento_str character varying(1),
    data_devolucao_documento_dat date,
    lote_str character varying(20),
    data_ult_evento_dat date,
    cliente_localizado_bit bit(1),
    id_gebancoevento_int bigint,
    id_gebancofase_int bigint,
    data_localizado_dat date,
    id_esbancoeventos_int bigint,
    id_esbancofases_int bigint,
    ultima_situacao_str character varying(2),
    data_base_dat date,
    trava_gestor_str character varying(1),
    ultimo_id_cbsitcontato_int bigint,
    ultima_data_contato_dat date,
    ultimo_contato_manual_data_dat date,
    ultimo_contato_manual_id_cbsitcontato_int integer,
    cobranca_piloto_str character varying(1),
    cod_cc character varying(30),
    dsc_cc character varying(60),
    dsc_fam_prod character varying(60),
    dsc_fx_atraso character varying(40),
    dsc_fx_principal character varying(40),
    dsc_fx_sld_dev character varying(40),
    dsc_status character varying(30),
    dsc_regua character varying(60),
    dsc_sit_parcela character varying(30),
    dt_venc_parc date,
    num_parcela bigint,
    vlr_sld_dev double precision,
    vlr_principal double precision,
    vlr_tot_res double precision,
    qtde_parcelas bigint,
    tstampbi timestamp without time zone,
    codigo_loja_str character varying(5),
    nome_loja_str character varying(30),
    codigo_cobradora_str character varying(4),
    rg_avalista1_str character varying(10),
    dt_nascimento_avalista1_dat date,
    contrato_original_str character varying(30),
    numero_placa_str character varying(10),
    data_devolucao_dat date,
    complemento_trabalho_str character varying(20),
    dia_medio_pgto_int bigint,
    cod_cliente_str character varying(10),
    nome_func_str character varying(60),
    cod_func_str character varying(10),
    cod_filial_str character varying(10),
    descricao_filial_str character varying(60),
    cod_faturamento_str character varying(10),
    descricao_faturamento_str character varying(60),
    cobranca_str character varying(100),
    batimento_str character varying(1),
    contato_loja_str character varying(20),
    cidade_loja_str character varying(60),
    estado_loja_str character varying(2),
    contato_loja_adm_str character varying(60),
    tipo_str character varying(10),
    id_geterceiro_int integer,
    pasta_str character varying(40),
    tipo_acao_str character varying(40),
    numero_processo_str character varying(40),
    data_operacao_dat date,
    acao_indenizatoria_str character varying(10),
    nome_orgao_str character varying(10),
    nome_advogado_contrario_str character varying(10),
    codigo_operacao_str character varying(10),
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2),
    fonte_score_str character varying(50),
    score_str character varying(50),
    black_list_ouvidoria_int integer,
    ddd_adicional_str character varying(3),
    telefone_adicional_str character varying(20),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    data_obito_dat date,
    nome_fantasia_devedor_str character varying
);

--
-- TOC entry 361 (class 1259 OID 29379)
-- Name: cbcontratofiat; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratofiat (
    codigo_buc_int bigint,
    ident_func_str character varying(1),
    ident_reincid_str character varying(1),
    ident_pref_str character varying(1),
    agencia_fiat_str character varying(2),
    tipo_operacao_str character varying(3),
    total_parc_atraso_int integer,
    total_parc_vencer_int integer,
    media_atraso_int integer,
    vlr_orig_promiss_num double precision,
    vlr_promiss_prot_num double precision,
    vlr_devedor_num double precision,
    vlr_desconto_num double precision,
    vlr_comissao_perm_num double precision,
    vlr_multa_num double precision,
    contrato_gescob_str character varying(10),
    nome_seguradora_str character varying(20),
    tot_parc_arrend_int integer,
    tot_parc_residu_int integer,
    tot_parca_arren_int integer,
    tot_parca_resid_int integer,
    tot_parcv_arren_int integer,
    tot_parcv_resid_int integer,
    vlr_devedor_res_num double precision,
    vlr_cp_residual_num double precision,
    vlr_multa_resid_num double precision,
    qtde_bens_int integer,
    tipo_bem_str character varying(3),
    desc_bem_str character varying(50),
    vlr_devedor_arrend_num double precision,
    vlr_cp_arrend_num double precision,
    vlr_multa_arrend_num double precision,
    vlr_desc_arrend_num double precision,
    taxa_diaria_cp_num double precision,
    data_contabil_dat date,
    id_gemotivonajuizamento_int bigint,
    codigo_banco_int bigint,
    etapa_str character varying(5),
    data_ult_etapa_dat date
)
INHERITS (public.cbcontrato);

--
-- TOC entry 362 (class 1259 OID 29393)
-- Name: cbcontratohonda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratohonda (
    data_devolucao_documento_dat date,
    nosso_numero_str character varying(10),
    tabela_str character varying(10),
    complemento_trabalho_str character varying(60),
    complemento_avalista1_str character varying(60),
    complemento_trab_avalista1_str character varying(60),
    taxa_contrato_int double precision,
    segmento_str character varying(10),
    veiculo_str character varying(20),
    fax_concessionaria_str character varying(20),
    complemento_contrato_str character varying(50),
    indice_str character varying(50),
    rating_str character varying(5),
    tipo_bem_str character varying(50),
    descricao_bem_str character varying(50),
    ano_modelo_str character varying(4),
    ramo_str character varying(50),
    tipo_plano_str character varying(20),
    numero_bordero_int bigint,
    parcelas_pagas_int smallint,
    parcelas_abertas_int smallint,
    dt_bordero_dat date,
    dt_vencimento_ini_dat date,
    dt_admissao_dat date,
    entrada_num double precision,
    finan_num double precision,
    tac_num double precision,
    iof_num double precision,
    novo_layout_str character varying(1),
    analista_str character varying(50),
    vendedor_str character varying(50),
    valor_bem_num double precision
)
INHERITS (public.cbcontrato);

--
-- TOC entry 363 (class 1259 OID 29402)
-- Name: cbcontratoitau; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoitau (
    data_envio_dat date,
    id_cbplataforma_int bigint,
    regiao_plataforma_str character varying(2),
    codigo_escritorio_str character varying(5),
    tipo_contrato_str character varying(30),
    recebimento_str character varying(12),
    spr_str character varying(2),
    porte_empresa_str character varying(3),
    codigo_operacao_str character varying(5),
    complemento_avalista1_str character varying(15),
    complemento_avalista2_str character varying(15),
    codigo_op_finaustria_str character varying(4),
    contrato_finaustria_str character varying(12),
    numero_parcelas_atraso_int bigint,
    numero_lote_int bigint,
    codigo_seguradora_int bigint,
    valor_contratado_num double precision,
    data_vencimento_dat date,
    hora_juridico_tim timestamp with time zone,
    complemento_trabalho_str character varying(60),
    id_cbproduto_int bigint,
    perc_contrib_paga_num double precision,
    data_ativacao_dat date,
    nome_contato_str character varying(20),
    ddd_residencial_str character varying(5),
    tel_residencial_str character varying(10),
    ramal_residencial_str character varying(5),
    ddd_celular_str character varying(5),
    tel_celular_str character varying(10),
    ddd_conjuge_str character varying(5),
    tel_conjuge_str character varying(10),
    ramal_conjuge_str character varying(5),
    ddd_profissional_str character varying(5),
    tel_profissional_str character varying(10),
    ramal_profissional_str character varying(5),
    nome_referencia1_str character varying(30),
    parentesco_referencia1_str character varying(15),
    ddd_referencia1_str character varying(5),
    tel_referencia1_str character varying(10),
    nome_referencia2_str character varying(30),
    tel_referencia2_str character varying(10),
    ramal_referencia2_str character varying(5),
    ramal_referencia1_str character varying(5),
    parentesco_referencia2_str character varying(15),
    ddd_referencia2_str character varying(5)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 364 (class 1259 OID 29421)
-- Name: cbcontratoitauacaoadv; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoitauacaoadv (
    id_geterceiro_int bigint,
    acao_indenizatoria_str character varying(1),
    codigo_operacao_str character varying(5),
    cobranca_str character varying(1),
    complemento_trabalho_str character varying(30),
    data_operacao_dat date,
    numero_processo_str character varying(30),
    nome_orgao_str character varying(60),
    nome_advogado_contrario_str character varying(100),
    pasta_str character varying(20),
    tipo_acao_str character varying(60),
    geterceiro_codigo_str character varying(10),
    id_terceiro bigint
)
INHERITS (public.cbcontrato);

--
-- TOC entry 365 (class 1259 OID 29432)
-- Name: cbcontratoitauadversa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoitauadversa (
    id_geterceiro_int bigint NOT NULL,
    codigo_operacao_str character varying(5),
    cobranca_str character varying(1),
    complemento_trabalho_str character varying(30),
    data_operacao_dat date,
    numero_processo_str character varying(30),
    pasta_str character varying(20),
    tipo_acao_str character varying(15),
    acao_indenizatoria_str character varying(1),
    nome_orgao_str character varying(60),
    nome_advogado_contrario_str character varying(100),
    geterceiro_codigo_str character varying(10),
    id_terceiro bigint
)
INHERITS (public.cbcontrato);

--
-- TOC entry 366 (class 1259 OID 29445)
-- Name: cbcontratoitaubanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoitaubanco (
    id_cbplataforma_int bigint,
    regiao_plataforma_str character varying(2),
    codigo_escritorio_str character varying(5),
    tipo_contrato_str character varying(30),
    recebimento_str character varying(12),
    spr_str character varying(2),
    porte_empresa_str character varying(3),
    codigo_operacao_str character varying(5),
    complemento_avalista1_str character varying(15),
    complemento_avalista2_str character varying(15),
    codigo_op_finaustria_str character varying(4),
    contrato_finaustria_str character varying(12),
    numero_parcelas_atraso_int bigint,
    numero_lote_int bigint,
    codigo_seguradora_int bigint,
    valor_contratado_num double precision,
    data_vencimento_dat date,
    hora_juridico_tim timestamp with time zone,
    complemento_trabalho_str character varying(60),
    id_cbproduto_int bigint,
    data_ativacao_dat date,
    numero_cartao_str character varying(16),
    agencia_conta_virtual_str character varying(12),
    numero_carteira_str character varying(3),
    valor_acordo_num double precision
)
INHERITS (public.cbcontrato);

--
-- TOC entry 367 (class 1259 OID 29465)
-- Name: cbcontratoitaucredimob; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoitaucredimob (
    data_ajuizamento_dat date,
    operacao_int integer,
    cad_int integer,
    data_atualizacao_dat date,
    contrato_n_str character varying(20),
    contrato_dac_str character varying(20),
    contrato_sem_str character varying(20),
    pasta_str character varying(20),
    banco_str character varying(20),
    fase_str character varying(20),
    status_str character varying(10),
    data_lote_dat date,
    data_parecer_dat date,
    parecer_str character varying(20),
    impedimento_str character varying(20),
    prestacao_janela_int smallint,
    local_ca_str character varying(30),
    data_ca_dat date,
    tempo_ca_int smallint,
    data_aviso1_dat date,
    data_aviso2_dat date,
    roteiro_str character varying(5),
    cod_estagio_int integer,
    estagio_str character varying(40),
    data_estagio_str date,
    cod_recursivo_int integer,
    recursivo_str character varying(40),
    data_recursivo_str date,
    renegociados_str character varying(20),
    acao_contra_str character varying(1),
    execucao_str character varying(1),
    aptos_str character varying(1),
    sinistro_str character varying(1),
    pendencia_str character varying(1),
    campanha_str character varying(1),
    fase_negociacao_str character varying(20),
    autorizacao_str character varying(1),
    sentenca_str character varying(1),
    mtres_str character varying(20),
    inibe_cobranca_str character varying(60),
    faixa_atraso_str character varying(30),
    fase_setecentos_str character varying(30),
    divisao_fase_str character varying(5),
    wo_str character varying(1),
    garantia_str character varying(30),
    fcvs_str character varying(1),
    principal_atraso_num double precision,
    correcao_num double precision,
    juros_num double precision,
    ultima_prestacao_num double precision,
    comprometimento_str character varying(20),
    saldo_residual_str character varying(30),
    residuo_num double precision,
    ativo_decursado_str character varying(1),
    tipo_financiamento_str character varying(5),
    sistema_amortizacao_str character varying(5),
    prazo_financiamento_int smallint,
    plano_str character varying(20),
    indicativo_str character varying(10),
    plano_banestado_str character varying(5),
    reajuste_banestado_str character varying(5),
    mes_ass_str character varying(10),
    ano_ass_str character varying(4),
    mes_ano_ass_str character varying(15),
    tempo_decurso_int integer,
    decurso_str character varying(1),
    juros_nominal_num double precision,
    juros_mora_num double precision,
    multa_num double precision,
    cod_interferencia_int smallint,
    interferencia_str character varying(40),
    duplo_financiamento_str character varying(30),
    ultima_prestacao_dat date,
    percentual_num double precision,
    valor_provisionado_num double precision,
    saldo_contabil_num double precision,
    situacao_contabil_str character varying(20),
    ajuste_str character varying(1),
    suslim_str character varying(1),
    cobran_str character varying(1),
    cep_invalido_str character varying(20),
    passiveis_str character varying(20),
    base_campanha_str character varying(20),
    situacao_cobranca_str character varying(30),
    incorporada_str character varying(1),
    codigo_operacao_str character varying(5),
    saldo_vaf_num double precision,
    valor_avaliacao1_num double precision,
    valor_avaliacao2_num double precision,
    contrato_gaveta_str character varying(1),
    data_avaliacao2_dat date,
    data_avaliacao1_dat date,
    empresa_avaliadora1_str character varying(60),
    empresa_avaliadora2_str character varying(60),
    data_ult_pagto_dat date,
    incorporada_contrato_migrado_str character varying(30),
    ultima_parcela_paga_int integer,
    prioridade_negociacao_str character varying(30)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 368 (class 1259 OID 29480)
-- Name: cbcontratoitaupic; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoitaupic (
    data_envio_dat date,
    id_cbplataforma_int bigint,
    regiao_plataforma_str character varying(2),
    codigo_escritorio_str character varying(5),
    tipo_contrato_str character varying(30),
    recebimento_str character varying(12),
    spr_str character varying(2),
    porte_empresa_str character varying(3),
    codigo_operacao_str character varying(5),
    complemento_avalista1_str character varying(15),
    complemento_avalista2_str character varying(15),
    codigo_op_finaustria_str character varying(4),
    contrato_finaustria_str character varying(12),
    numero_parcelas_atraso_int bigint,
    numero_lote_int bigint,
    codigo_seguradora_int bigint,
    valor_contratado_num double precision,
    data_vencimento_dat date,
    hora_juridico_tim timestamp with time zone,
    complemento_trabalho_str character varying(60),
    id_cbproduto_int bigint,
    data_ativacao_dat date,
    nome_contato_str character varying(20),
    ddd_residencial_str character varying(5),
    tel_residencial_str character varying(10),
    ramal_residencial_str character varying(5),
    ddd_celular_str character varying(5),
    tel_celular_str character varying(10),
    ddd_conjuge_str character varying(5),
    tel_conjuge_str character varying(10),
    ramal_conjuge_str character varying(5),
    ddd_profissional_str character varying(5),
    tel_profissional_str character varying(10),
    ramal_profissional_str character varying(5),
    nome_referencia1_str character varying(30),
    parentesco_referencia1_str character varying(15),
    ddd_referencia1_str character varying(5),
    tel_referencia1_str character varying(10),
    nome_referencia2_str character varying(30),
    parentesco_referencia2_str character varying(15),
    ddd_referencia2_str character varying(5),
    tel_referencia2_str character varying(10),
    ramal_referencia2_str character varying(5),
    ramal_referencia1_str character varying(5)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 369 (class 1259 OID 29495)
-- Name: cbcontratomercantil; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratomercantil (
    valor_contratado_num double precision,
    valor_operacao_num double precision,
    identi_terceirizada_str character varying(15),
    numpessoa_int bigint,
    identi_operacao bigint,
    sisogm_str character varying(3),
    lograc_str character varying(50),
    bairrc_str character varying(20),
    localc_str character varying(34),
    ufc_str character varying(2),
    fonec_str character varying(50),
    data_vencimento_dat date,
    complemento_trabalho_str character varying(10),
    complemento_avalista1_str character varying(10),
    cepc_str character varying(8)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 370 (class 1259 OID 29506)
-- Name: cbcontratopan; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratopan (
    data_envio_dat date,
    data_devolucao_documento_dat date,
    uf_nascimento_str character varying(2),
    nacionalidade_str character varying(35),
    numero_str character varying(5),
    residencia_str character varying(1),
    numero_trabalho_str character varying(5),
    complemento_trabalho_str character varying(30),
    modelo_finan_int smallint,
    indexador_str character varying(4),
    codigo_empresa_str character varying(3),
    empresa_str character varying(35),
    valor_bem_num double precision,
    valor_financiado_num double precision,
    valor_entrada_num double precision,
    data_vencimento_dat date,
    parcelas_pagas_int smallint,
    parcelas_devidas_int smallint,
    banco_devedor_int bigint,
    agencia_devedor_int bigint,
    conta_devedor_str character varying(8),
    cheque_devedor_str character varying(8),
    valor_cheque_str character varying(20),
    tipo_financiamento_str character varying(1),
    alinea_str character varying(2),
    ano_modelo_str character varying(4),
    certificado_str character varying(11),
    numero_avalista1_str character varying(5),
    complemento_avalista1_str character varying(30),
    ramal_avalista1_str character varying(4),
    nome_ref_avalista1_str character varying(35),
    ddd_ref_avalista1_str character varying(5),
    telefone_ref_avalista1_str character varying(8),
    ramal_ref_avalista1_str character varying(4),
    fase_cobranca_str character varying(25),
    nome_loja_str character varying(35),
    endereco_loja_str character varying(60),
    numero_loja_str character varying(5),
    complemento_loja_str character varying(30),
    bairro_loja_str character varying(30),
    cep_loja_str character varying(8),
    cidade_loja_str character varying(40),
    uf_loja_str character varying(2),
    ddd_loja_str character varying(5),
    telefone_loja_str character varying(8),
    ramal_loja_str character varying(4),
    massificado_str character varying(1),
    cliente_protestado_str character varying(1),
    ocupacao_str character varying(1),
    bem_financiado_num double precision,
    tac_num double precision,
    premio_num double precision,
    total_manual_num double precision,
    prestacao_int smallint,
    vencimento_calculo_dat date,
    tipo_residencia_str character varying(1),
    prestacao_num double precision,
    promotora_str character varying(20),
    dependentes_int smallint,
    valor_aluguel_num double precision,
    tempo_residencia_int smallint,
    tipo_telefone_str character varying(1),
    endereco_anterior_str character varying(60),
    bairro_anterior_str character varying(30),
    cidade_anterior_str character varying(30),
    estado_anterior_str character varying(2),
    tempo_resid_anterior_int smallint,
    porte_empresa_str character varying(1),
    admissao_dat date,
    nascimento_conjuge_dat date,
    end_correspondencia_str character varying(1),
    origem_str character varying(30),
    ghp_lp character varying(10),
    data_alteracao_dat date,
    coeficiente_num double precision
)
INHERITS (public.cbcontrato);

--
-- TOC entry 371 (class 1259 OID 29525)
-- Name: cbcontratopanam; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratopanam (
    data_devolucao_documento_dat date,
    uf_nascimento_str character varying(2),
    nacionalidade_str character varying(35),
    numero_str character varying(5),
    residencia_str character varying(1),
    numero_trabalho_str character varying(5),
    complemento_trabalho_str character varying(30),
    modelo_finan_int smallint,
    indexador_str character varying(4),
    codigo_empresa_str character varying(3),
    empresa_str character varying(35),
    valor_bem_num double precision,
    valor_financiado_num double precision,
    valor_entrada_num double precision,
    data_vencimento_dat date,
    parcelas_pagas_int smallint,
    parcelas_devidas_int smallint,
    banco_devedor_int bigint,
    agencia_devedor_int bigint,
    conta_devedor_str character varying(8),
    cheque_devedor_str character varying(8),
    valor_cheque_str character varying(20),
    tipo_financiamento_str character varying(1),
    alinea_str character varying(2),
    ano_modelo_str character varying(4),
    certificado_str character varying(11),
    numero_avalista1_str character varying(5),
    complemento_avalista1_str character varying(30),
    ramal_avalista1_str character varying(4),
    nome_ref_avalista1_str character varying(35),
    ddd_ref_avalista1_str character varying(5),
    telefone_ref_avalista1_str character varying(8),
    ramal_ref_avalista1_str character varying(4),
    fase_cobranca_str character varying(25),
    nome_loja_str character varying(35),
    endereco_loja_str character varying(60),
    numero_loja_str character varying(5),
    complemento_loja_str character varying(30),
    bairro_loja_str character varying(30),
    cep_loja_str character varying(8),
    cidade_loja_str character varying(40),
    uf_loja_str character varying(2),
    ddd_loja_str character varying(5),
    telefone_loja_str character varying(8),
    ramal_loja_str character varying(4),
    massificado_str character varying(1),
    cliente_protestado_str character varying(1),
    ocupacao_str character varying(1),
    bem_financiado_num double precision,
    tac_num double precision,
    premio_num double precision,
    total_manual_num double precision,
    prestacao_int smallint,
    prestacao_num double precision,
    vencimento_calculo_dat date,
    tipo_residencia_str character varying(1),
    promotora_str character varying(20),
    dependentes_int smallint,
    valor_aluguel_num double precision,
    tempo_residencia_int smallint,
    tipo_telefone_str character varying(1),
    endereco_anterior_str character varying(60),
    bairro_anterior_str character varying(30),
    cidade_anterior_str character varying(30),
    estado_anterior_str character varying(2),
    tempo_resid_anterior_int smallint,
    porte_empresa_str character varying(1),
    admissao_dat date,
    nascimento_conjuge_dat date,
    end_correspondencia_str character varying(1),
    origem_str character varying(30),
    ghp_lp character varying(10),
    data_alteracao_dat date,
    coeficiente_num double precision,
    numero_aviso_str character varying(10),
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 372 (class 1259 OID 29536)
-- Name: cbcontratopecunia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratopecunia (
    nacionalidade_str character varying(20),
    tipo_docto_str character varying(30),
    tempo_moradia_str character varying(20),
    ident_pref_str character varying(1),
    nome_fant_trabalho_str character varying(60),
    data_admissao_dat date,
    ddd_fax_trabalho_str character varying(5),
    fax_trabalho_str character varying(20),
    outra_renda_str character varying(40),
    valor_outra_renda_num double precision,
    id_getipogarantia_int bigint,
    num_ordem_str character varying(10),
    ano_modelo_str character varying(5),
    complemento_trabalho_str character varying(20),
    qtd_parc_pagas_int bigint,
    qtd_parc_pagar_int bigint,
    taxa_contrato_num double precision,
    data_financiamento_dat date
)
INHERITS (public.cbcontrato);

--
-- TOC entry 373 (class 1259 OID 29557)
-- Name: cbcontratopirelli; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratopirelli (
    codigo_loja_str character varying(5),
    nome_loja_str character varying(30),
    codigo_cobradora_str character varying(4),
    rg_avalista1_str character varying(10),
    dt_nascimento_avalista1_dat date,
    contrato_original_str character varying(30),
    numero_placa_str character varying(10),
    data_devolucao_dat date,
    complemento_trabalho_str character varying(20),
    dia_medio_pgto_int bigint,
    cod_cliente_str character varying(10),
    nome_func_str character varying(60),
    cod_func_str character varying(10),
    cod_filial_str character varying(10),
    descricao_filial_str character varying(60),
    cod_faturamento_str character varying(10),
    descricao_faturamento_str character varying(60),
    cobranca_str character varying(100),
    batimento_str character varying(1),
    contato_loja_str character varying(20),
    cidade_loja_str character varying(60),
    estado_loja_str character varying(2),
    contato_loja_adm_str character varying(60),
    tipo_str character varying(10),
    id_geterceiro_int integer,
    pasta_str character varying(40),
    tipo_acao_str character varying(40),
    numero_processo_str character varying(40),
    data_operacao_dat date,
    acao_indenizatoria_str character varying(10),
    nome_orgao_str character varying(10),
    nome_advogado_contrario_str character varying(10),
    codigo_operacao_str character varying(10),
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2),
    fonte_score_str character varying(50),
    score_str character varying(50),
    black_list_ouvidoria_int integer,
    ddd_adicional_str character varying(3),
    telefone_adicional_str character varying(20),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    data_obito_dat date
)
INHERITS (public.cbcontrato);

--
-- TOC entry 374 (class 1259 OID 29573)
-- Name: cbcontratosantander; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratosantander (
    santander_str character varying(1),
    ajuizado_str character varying(1),
    sistema_atual_str character varying(2),
    diretoria_str character varying(20),
    valor_ajuizado_num double precision,
    advogado_str character varying(50),
    numero_processo_str character varying(50),
    codigo_bu_str character varying(50),
    numero_str character varying(10),
    calculo_risco_str character varying(1),
    codigo_interno_str character varying(50),
    banco_str character varying(50),
    cod_cidade_santander_str character varying(5)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 375 (class 1259 OID 29584)
-- Name: cbcontratosantanderole; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratosantanderole (
    id_cbcontrato_int bigint DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass),
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    dt_nascimento_dat date,
    cidade_nascimento_str character varying(30),
    pai_str character varying(60),
    mae_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    profissao_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(30),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    local_trab_avalista1_str character varying(40),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(30),
    cidade_trab_avalista1_str character varying(30),
    estado_trab_avalista1_str character varying(2),
    cep_trab_avalista1_str character varying(10),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_fax_avalista1_str character varying(5),
    fax_avalista1_str character varying(20),
    tipo_pessoa_avalista1_str character varying(1),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(30),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    local_trab_avalista2_str character varying(40),
    endereco_trab_avalista2_str character varying(60),
    bairro_trab_avalista2_str character varying(30),
    cidade_trab_avalista2_str character varying(30),
    estado_trab_avalista2_str character varying(2),
    cep_trab_avalista2_str character varying(10),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_fax_avalista2_str character varying(5),
    fax_avalista2_str character varying(20),
    tipo_pessoa_avalista2_str character varying(1),
    produto_str character varying(30),
    marca_str character varying(30),
    modelo_str character varying(30),
    cor_str character varying(25),
    ano_str character varying(5),
    chassis_str character varying(25),
    placa_str character varying(8),
    combustivel_str character varying(1),
    numero_dut_str character varying(16),
    renavam_str character varying(10),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    dias_atraso_ult_parc_int integer,
    valor_montante_num double precision,
    comissao_perm_num double precision,
    prazo_solucao_dat date,
    id_fimoeda_int bigint,
    despesas_finan_num double precision,
    id_cbsituacaocontrato_int bigint,
    data_stand_by_dat date,
    data_contato_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    notificacao_str character varying(1),
    protesto_str character varying(1),
    documento_str character varying(1),
    alterado_edi_str character varying(1),
    id_gefilial_int bigint,
    obs_banco_txt text,
    obs_pasc_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geempresa_int bigint,
    observacao_str text,
    sexo_str character varying(1),
    id_cbetapa_int bigint,
    email_str character varying(50),
    data_envio_dat date,
    data_notificacao_dat date,
    data_protesto_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    taxa_juridico_num double precision,
    grupo_str character varying(10),
    cota_str character varying(10),
    provisionamento_dat date,
    flag_pdd character varying(1),
    data_ar_dat date,
    vl_cdesc_avista_num double precision,
    perc_maxdesc_num double precision,
    liberacao_dat date,
    data_ajuizamento_dat date,
    envio_tratamento timestamp with time zone,
    retorno_tratamento_dat date,
    solicitacao_tratamento_tmz timestamp with time zone,
    conclusao_tratamento_tmz timestamp with time zone,
    status_tratamento_str character varying(1),
    data_base_dat date,
    santander_str character varying(1),
    codigo_bu_str character varying(50),
    cnpj_concessionaria_str character varying(20),
    banco_str character varying(50),
    codigo_escob_str character varying(10)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 376 (class 1259 OID 29602)
-- Name: cbcontratoschahin; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratoschahin (
    id_cbcontrato_int bigint DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass),
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    dt_nascimento_dat date,
    cidade_nascimento_str character varying(30),
    pai_str character varying(60),
    mae_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    profissao_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(30),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    local_trab_avalista1_str character varying(40),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(30),
    cidade_trab_avalista1_str character varying(30),
    estado_trab_avalista1_str character varying(2),
    cep_trab_avalista1_str character varying(10),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_fax_avalista1_str character varying(5),
    fax_avalista1_str character varying(20),
    tipo_pessoa_avalista1_str character varying(1),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(30),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    local_trab_avalista2_str character varying(40),
    endereco_trab_avalista2_str character varying(60),
    bairro_trab_avalista2_str character varying(30),
    cidade_trab_avalista2_str character varying(30),
    estado_trab_avalista2_str character varying(2),
    cep_trab_avalista2_str character varying(10),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_fax_avalista2_str character varying(5),
    fax_avalista2_str character varying(20),
    tipo_pessoa_avalista2_str character varying(1),
    produto_str character varying(30),
    marca_str character varying(30),
    modelo_str character varying(30),
    cor_str character varying(25),
    ano_str character varying(5),
    chassis_str character varying(25),
    placa_str character varying(8),
    combustivel_str character varying(1),
    numero_dut_str character varying(16),
    renavam_str character varying(10),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    dias_atraso_ult_parc_int integer,
    valor_montante_num double precision,
    comissao_perm_num double precision,
    prazo_solucao_dat date,
    id_fimoeda_int bigint,
    despesas_finan_num double precision,
    id_cbsituacaocontrato_int bigint,
    data_stand_by_dat date,
    data_contato_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    notificacao_str character varying(1),
    protesto_str character varying(1),
    documento_str character varying(1),
    alterado_edi_str character varying(1),
    id_gefilial_int bigint,
    obs_banco_txt text,
    obs_pasc_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geempresa_int bigint,
    observacao_str text,
    sexo_str character varying(1),
    id_cbetapa_int bigint,
    email_str character varying(50),
    data_envio_dat date,
    data_notificacao_dat date,
    data_protesto_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    taxa_juridico_num double precision,
    grupo_str character varying(10),
    cota_str character varying(10),
    provisionamento_dat date,
    flag_pdd character varying(1),
    id_cbplataforma_int bigint,
    regiao_plataforma_str character varying(2),
    codigo_escritorio_str character varying(5),
    tipo_contrato_str character varying(30),
    recebimento_str character varying(12),
    spr_str character varying(2),
    porte_empresa_str character varying(3),
    codigo_operacao_str character varying(5),
    complemento_avalista1_str character varying(15),
    complemento_avalista2_str character varying(15),
    codigo_op_finaustria_str character varying(4),
    contrato_finaustria_str character varying(12),
    numero_parcelas_atraso_int bigint,
    numero_lote_int bigint,
    codigo_seguradora_int bigint,
    valor_contratado_num double precision,
    data_vencimento_dat date,
    hora_juridico_tim timestamp with time zone,
    complemento_trabalho_str character varying(60),
    id_cbproduto_int bigint,
    cpf_conjuge_str character varying(20),
    rg_conjuge_str character varying(20),
    dt_nascimento_conjuge_dat date,
    profissao_conjuge_str character varying(40),
    salario_conjuge_num double precision,
    cnpj_str character varying(20),
    dados_garantia_txt text,
    taxa_efetiva_num double precision,
    taxa_anual_num double precision,
    prazo_contrato_int integer
)
INHERITS (public.cbcontrato);

--
-- TOC entry 377 (class 1259 OID 29613)
-- Name: cbcontratotelefonica; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratotelefonica (
    local_telefone_str character varying(5)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 378 (class 1259 OID 29626)
-- Name: cbcontratounibanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratounibanco (
    id_cbproduto_int bigint,
    id_cbprodutocliente_int bigint,
    contrato_original_str character varying(30),
    servico_str character varying(50),
    pcc_str character varying(11),
    location_str character varying(11),
    id_str character varying(4),
    state_str character varying(3),
    bem_str character varying(50),
    qtde_parcelas_int smallint,
    arquivo_str character varying(30),
    telefone_s25_str character varying(30)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 379 (class 1259 OID 29639)
-- Name: cbcontratovw; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratovw (
    data_fim_operacao_dat date,
    endereco_not_str character varying(100),
    complemento_not_str character varying(60),
    bairro_not_str character varying(60),
    cep_not_str character varying(10),
    cidade_not_str character varying(60),
    estado_not_str character varying(2)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 380 (class 1259 OID 29663)
-- Name: cbcontratozogbi; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbcontratozogbi (
    codigo_pdv double precision,
    nome_pdv character varying(15),
    reenvio_parc character varying(1),
    ret_assessoria date,
    tipo_retirada character varying(1),
    motivo_retirada text,
    ano_modelo_str character varying(4),
    fase_int bigint,
    indicadorpagamento_int bigint,
    nomeloja_str character varying(40),
    operadorpdv_str character varying(40),
    numerocartao_str character varying(16),
    complemento_trabalho_str character varying(60),
    ramal_avalista1_str character varying(5),
    complemento_avalista1_str character varying(60),
    responsavel_notificacao_str character varying(1)
)
INHERITS (public.cbcontrato);

--
-- TOC entry 381 (class 1259 OID 29677)
-- Name: cbconvenio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbconvenio (
    id_cbconvenio_int bigint DEFAULT nextval(('cbconvenio_seq'::text)::regclass) NOT NULL,
    id_geempresa_int bigint NOT NULL,
    id_gefilial_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_fibanco_int bigint,
    id_ficcbanco_int bigint,
    id_cbmodlayout_int bigint,
    id_cbtiponegocio_int bigint,
    convenio_int bigint NOT NULL,
    descricao_str character varying(40),
    tipo_nosso_numero_int bigint NOT NULL,
    tipo_geracao_bordero_int bigint NOT NULL,
    nosso_numero_str character varying(30),
    dias_perm_web_int bigint,
    aceite_str character varying(1),
    cedente_str character varying(20),
    rzsocial_cedente_str character varying(50),
    tipo_pessoa_str character varying(1),
    cgc_cnpj_str character varying(20),
    especie_str character varying(5),
    comando_str character varying(2),
    codigo_emissao_str character varying(5),
    codigo_servico_str character varying(1),
    instrucao_1_str character varying(200),
    instrucao_2_str character varying(200),
    instrucao_1_ficha_str character varying(200),
    instrucao_2_ficha_str character varying(200),
    instrucao_3_ficha_str character varying(200),
    instrucao_4_ficha_str character varying(200),
    instrucao_5_ficha_str character varying(200),
    instrucao_6_ficha_str character varying(200),
    instrucao_1_recibo_str character varying(200),
    instrucao_2_recibo_str character varying(200),
    instrucao_3_recibo_str character varying(200),
    instrucao_4_recibo_str character varying(200),
    instrucao_5_recibo_str character varying(200),
    instrucao_6_recibo_str character varying(200),
    instrucao_7_recibo_str character varying(200),
    instrucao_8_recibo_str character varying(200),
    remessa_banco_int bigint,
    retorno_banco_int bigint,
    local_remessa_str character varying(60),
    local_retorno_str character varying(60),
    remessa_terc_int bigint,
    local_remessa_terc_str character varying(60),
    login_web_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    carteira_str character varying(3),
    id_modlayterc_int bigint,
    convenio_banco_str character varying(20),
    ativo_str character varying(1),
    qtde_digitos_int bigint,
    calcula_dv_str character varying(1),
    inclui_filial_str character varying(1),
    centralizado_str character varying(1),
    limite_nosso_numero_str character varying(30),
    instrucao_7_ficha_str character varying(200),
    instrucao_8_ficha_str character varying(200),
    instrucao_9_recibo_str character varying(200),
    instrucao_10_recibo_str character varying(200),
    funcao_str character varying(30),
    especie_doc_str character varying(10),
    nome_boleto_str character varying(100),
    local_pagamento_str character varying(100),
    sac_str character varying(100),
    envia_parcelamento_str character varying(1),
    id_gesequencia_int integer,
    dados_cma_grupo_str character varying(1),
    dados_cma_banco_str character varying(1),
    dados_cma_nao_enviar_str character varying(1),
    origem_endereco_str character varying(16),
    id_gemodeloimpressao_int bigint,
    telefone_sac1_str character varying(20),
    telefone_sac2_str character varying(20),
    email_sac_str character varying(70),
    tipo_cobranca_int bigint,
    valida_nosso_numero_str character varying(1),
    conta_externo_str character varying(10),
    valida_linha_digitavel_str character varying(1),
    campo_marcacaopagamento_str character varying(50),
    url_autenticacao_hub_txt text,
    url_consulta_hub_txt text,
    login_hub_str character varying(50),
    senha_hub_str character varying(50),
    url_registro_hub_txt text
);

--
-- TOC entry 382 (class 1259 OID 29686)
-- Name: cbconvenio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbconvenio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 383 (class 1259 OID 29694)
-- Name: cbconvenioetapa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbconvenioetapa (
    id_cbconvenioetapa_int bigint DEFAULT nextval(('cbconvenioetapa_seq'::text)::regclass) NOT NULL,
    id_cbconvenio_int bigint NOT NULL,
    id_cbetapa_int bigint NOT NULL,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 384 (class 1259 OID 29702)
-- Name: cbconvenioetapa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbconvenioetapa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 385 (class 1259 OID 29712)
-- Name: cbconveniofaixaatraso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbconveniofaixaatraso (
    id_cbconveniofaixaatraso_int bigint DEFAULT nextval(('cbconveniofaixaatraso_seq'::text)::regclass) NOT NULL,
    id_cbconvenio_int bigint NOT NULL,
    id_gefaixaatraso_int bigint NOT NULL,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 386 (class 1259 OID 29720)
-- Name: cbconveniofaixaatraso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbconveniofaixaatraso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 387 (class 1259 OID 29728)
-- Name: cbconveniotiponegocio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbconveniotiponegocio (
    id_cbconveniotiponegocio_int bigint DEFAULT nextval(('cbconveniotiponegocio_seq'::text)::regclass) NOT NULL,
    id_cbconvenio_int bigint NOT NULL,
    id_cbtiponegocio_int bigint NOT NULL,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 388 (class 1259 OID 29734)
-- Name: cbconveniotiponegocio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbconveniotiponegocio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 389 (class 1259 OID 29743)
-- Name: cbdespesa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdespesa (
    id_cbdespesa_int bigint DEFAULT nextval(('"cbdespesa_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_cbvalortipodespesa_int bigint NOT NULL,
    data_dat date,
    valor_num double precision,
    situacao_str character varying(2),
    observacoes_txt text,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    ar_str character varying(20),
    data_ar_dat date,
    protocolo_int bigint,
    livro_protocolo_str character varying(6),
    registro_int bigint,
    livro_registro_str character varying(6),
    notificado_str character varying(1),
    data_envio_dat date,
    data_retorno_dat date,
    data_notificacao_dat date,
    origem_str character varying(1),
    arquivo_envio_str character varying(50),
    data_ret_dat date,
    arquivo_ret_str text,
    id_cbsituacaocontrato_int bigint,
    id_jumovfinan integer,
    id_jumovfinanadm integer,
    id_gusuario_envio_int integer,
    dataenvionpjur_dat date,
    num_lote_adiant_npjur character varying(30),
    num_lote_pagto_npjur character varying(30),
    data_aprovacao_dat date,
    data_retorno_fisico_dat date,
    protocolo_parceiro_str character varying(16),
    data_cad_site_parceiro_dat timestamp without time zone,
    lote_parceiro_str character varying(10),
    data_retorno_parceiro_dat timestamp without time zone,
    motivo_retorno_str character varying(70),
    numero_selo_str character varying(10),
    id_geqlendereco_int bigint,
    data_reprovacao_dat date,
    id_cbtipodespesamodalidade_int bigint,
    id_juprotesto integer
);

--
-- TOC entry 390 (class 1259 OID 29758)
-- Name: cbdespesa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdespesa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 391 (class 1259 OID 29769)
-- Name: cbdespesaaut; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdespesaaut (
    id_cbdespesaaut_int bigint DEFAULT nextval(('"cbdespesaaut_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    data_dat date,
    num_identificacao_int bigint,
    parcela_inicial_int bigint,
    parcela_final_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    selecionado_str character varying(1),
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    id_esregua_int bigint,
    critica_str character varying(30),
    id_geqlendereco_int bigint,
    prazo_notificacao_str character varying(7),
    notificada_str character varying(30),
    parcelas_puladas_str character varying(1)
);

--
-- TOC entry 392 (class 1259 OID 29776)
-- Name: cbdespesaaut_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdespesaaut_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 393 (class 1259 OID 29787)
-- Name: cbdespesaendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdespesaendereco (
    id_cbdespesaendereco_int bigint DEFAULT nextval(('"cbdespesaendereco_seq"'::text)::regclass) NOT NULL,
    id_geqltipoendereco_int bigint,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2),
    tstamp timestamp without time zone,
    id_cbdespesa_int bigint NOT NULL
);

--
-- TOC entry 394 (class 1259 OID 29800)
-- Name: cbdespesaendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdespesaendereco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 395 (class 1259 OID 29808)
-- Name: cbdespesavirtual; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdespesavirtual (
    id_cbdespesavirtual_int integer DEFAULT nextval(('"cbdespesavirtual_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(20),
    obs_str text,
    protocolo_npjur_int integer,
    valor_num numeric(9,2),
    id_jutipofinam_int integer,
    reembolso_bol boolean,
    id_gusuario_int integer,
    ts_temp_dat timestamp without time zone,
    status_int integer,
    identificacao_str character varying(1),
    datadespesa_dat date,
    id_gefilial_int integer,
    id_jumovfinan integer,
    id_jumovfinanadm integer,
    dataenvio date,
    id_gusuario_envio_int integer,
    dataenvionpjur_dat date,
    num_lote_adiant_npjur character varying(30),
    num_lote_pagto_npjur character varying(30)
);

--
-- TOC entry 396 (class 1259 OID 29832)
-- Name: cbdespesavirtual_codigo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdespesavirtual_codigo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 397 (class 1259 OID 29834)
-- Name: cbdespesavirtual_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdespesavirtual_seq
    START WITH 17
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 398 (class 1259 OID 29842)
-- Name: cbdetalhelay; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdetalhelay (
    id_cbdetalhelay_int bigint DEFAULT nextval(('"cbdetalhelay_seq"'::text)::regclass) NOT NULL,
    id_cbmodlayout_int bigint NOT NULL,
    codigo_str character varying(20) NOT NULL,
    registro_str character varying(1),
    num_linha_int integer,
    tam_linha_int integer,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    sql_detalhe_txt text,
    antes_criar_linha_txt text,
    ignorar_linha_rotulo_bit bit(1),
    descricao_linha_txt text,
    ignorar_linha_ident_bit bit(1)
);

--
-- TOC entry 399 (class 1259 OID 29856)
-- Name: cbdetalhelay_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdetalhelay_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 400 (class 1259 OID 29865)
-- Name: cbdistribparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdistribparcela (
    id_cbdistribparcela_int bigint DEFAULT nextval(('"cbdistribparcela_seq"'::text)::regclass) NOT NULL,
    id_cbparcela_int bigint,
    id_cbcontrato_int bigint,
    data_pre_distrib_dat date,
    distribuicaosac_str character varying(1),
    tipodirec_str character varying(1),
    id_cbetapa_int bigint,
    data_baixa_dat date,
    tstamp timestamp without time zone
);

--
-- TOC entry 401 (class 1259 OID 29877)
-- Name: cbdistribparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdistribparcela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 402 (class 1259 OID 29886)
-- Name: cbdistribparcelabradesco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdistribparcelabradesco_seq
    START WITH 8000811
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 403 (class 1259 OID 29893)
-- Name: cbdistribuidorcliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbdistribuidorcliente (
    id_cbdistribuidorcliente_int bigint DEFAULT nextval(('"cbdistribuidorcliente_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(10) NOT NULL,
    razao_social_str character varying(50),
    nome_fantasia_str character varying(50),
    endereco_str character varying(40),
    bairro_str character varying(30),
    id_gecidade_int bigint,
    cep_str character varying(10),
    telefone1_str character varying(20),
    telefone2_str character varying(20),
    telefone3_str character varying(20),
    contato1_str character varying(20),
    contato2_str character varying(20),
    contato3_str character varying(20),
    funcao1_str character varying(20),
    funcao2_str character varying(20),
    funcao3_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_cbregionalcliente_int bigint
);

--
-- TOC entry 404 (class 1259 OID 29907)
-- Name: cbdistribuidorcliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbdistribuidorcliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 405 (class 1259 OID 29911)
-- Name: cbedico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbedico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 406 (class 1259 OID 29915)
-- Name: cbentradalay; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbentradalay (
    id_cbentradalay_int bigint DEFAULT nextval(('"cbentradalay_seq"'::text)::regclass) NOT NULL,
    id_cbmodlayout_int bigint NOT NULL,
    sequencia_int integer,
    ordem_par_int integer,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geentradausuario_int bigint,
    obrigatorio_bit bit(1),
    aspa_dupla_bit bit(1)
);

--
-- TOC entry 407 (class 1259 OID 29930)
-- Name: cbentradalay_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbentradalay_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 408 (class 1259 OID 29935)
-- Name: cbenvioemailtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbenvioemailtmp (
    id_cbenvioemailtmp_int bigint DEFAULT nextval(('cbenvioemailtmp_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsitcontato_int bigint,
    email_destinatario_str character varying(300),
    nome_destinatario_str character varying(300),
    assunto_str character varying(300),
    mensagem_str text,
    datahora_fup_dat timestamp with time zone,
    datahora_envio_dat timestamp with time zone
);

--
-- TOC entry 409 (class 1259 OID 29952)
-- Name: cbenvioemailtmp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbenvioemailtmp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 410 (class 1259 OID 29961)
-- Name: cbespeciepagamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbespeciepagamento (
    id_cbespeciepagamento_int bigint DEFAULT nextval(('"cbespeciepagamento_seq"'::text)::regclass) NOT NULL,
    id_cbpagamento_int bigint NOT NULL,
    id_cbformapagamento_int bigint,
    sequencia_int bigint,
    banco_cheque_num bigint,
    conta_cheque_num bigint,
    agencia_cheque_str character varying(5),
    cheque_num bigint,
    data_pre_dat date,
    valor_num double precision,
    data_repasse_dat date,
    id_fibanco_int bigint,
    id_ficcbanco_int bigint,
    data_deposito_dat date,
    valor_deposito_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    situacao_int smallint,
    data_situacao_dat date,
    data_custodia_dat date
);

--
-- TOC entry 411 (class 1259 OID 29967)
-- Name: cbespeciepagamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbespeciepagamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 412 (class 1259 OID 29976)
-- Name: cbestacionamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbestacionamento (
    id_cbestacionamento_int bigint DEFAULT nextval(('"cbestacionamento_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(5) NOT NULL,
    tipo_str character varying(1),
    nome_str character varying(60),
    endereco_str character varying(60),
    bairro_str character varying(60),
    id_gecidade_int bigint,
    fone_str character varying(15),
    fax_str character varying(15),
    responsavel_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    cep_str character varying(10),
    finalizacao_bit bit(1),
    id_cbtipoestacionamento_int bigint,
    id_esagenciabradesco_int bigint
);

--
-- TOC entry 413 (class 1259 OID 29984)
-- Name: cbestacionamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbestacionamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 414 (class 1259 OID 29989)
-- Name: cbestacionamentoapreensao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbestacionamentoapreensao (
    id_cbestacionamento_int bigint NOT NULL,
    id_cbapreensao_int bigint NOT NULL,
    solicitacao_dat date,
    inclusao_dat date,
    remocao_dat date,
    sequencia_int integer,
    tstamp timestamp without time zone DEFAULT now(),
    id_geusuario_int bigint
);

--
-- TOC entry 415 (class 1259 OID 29996)
-- Name: cbestoque; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbestoque (
    id_cbestoque_int bigint DEFAULT nextval(('"cbestoque_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_geusuario_int bigint,
    data_dat date,
    segmento_str character varying(60),
    tstamp timestamp without time zone,
    ativo_bit bit(1)
);

--
-- TOC entry 416 (class 1259 OID 30003)
-- Name: cbestoque_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbestoque_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 417 (class 1259 OID 30014)
-- Name: cbetapa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbetapa (
    id_cbetapa_int bigint DEFAULT nextval(('"cbetapa_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(50),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    fase_banco_str character varying(10),
    ativo_str character varying(1)
);

--
-- TOC entry 418 (class 1259 OID 30024)
-- Name: cbetapa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbetapa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 419 (class 1259 OID 30031)
-- Name: cbfatorhlog; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbfatorhlog (
    id_cbfatorhlog_int integer DEFAULT nextval(('cbfatorhlog_seq'::text)::regclass) NOT NULL,
    nomelogin_str character varying(50),
    ip_str character varying(20),
    id_gecliente_int integer,
    logou_fatorh_bit bit(1) DEFAULT '0'::"bit",
    tstamp_ultimo_logou_npcob timestamp without time zone
);

--
-- TOC entry 420 (class 1259 OID 30039)
-- Name: cbfatorhlog_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfatorhlog_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 421 (class 1259 OID 30045)
-- Name: cbfiatret; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbfiatret (
    id_cbfiatret_int bigint DEFAULT nextval(('"cbfiatret_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_cbparcela_int bigint,
    codigo_registro_int bigint,
    data_dat date NOT NULL,
    n_solicitacao_int integer,
    valor_num double precision,
    documento_str character varying(15),
    observacao_str character(255),
    tipo_acao_str character varying(5),
    motivo_solicitacao_str character varying(5),
    situacao_str character varying(5),
    tipo_interrupcao_str character varying(5),
    data_acordo_dat date,
    notificacao_str character varying(1),
    np_protestada_str character varying(1),
    carta_precatoria_str character varying(1),
    data_acao_dat date,
    numero_processo_str character varying(15),
    vara_str character varying(2),
    comarca_str character varying(25),
    acao_ajuizamento_str character varying(5),
    usuario_str character varying(10),
    motivo_inconsistencia_str character varying(3),
    tipo_registro_str character varying(3),
    vlr_remuneracao_adm_num double precision,
    vlr_remuneracao_jud_num double precision,
    etapa_str character varying(5),
    tipo_np_str character varying(3),
    data_np_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_cbinstrucaocobranca_int bigint,
    data_suspensao_dat date,
    sub_estabelecido_str character varying(1),
    tipodirec_str character varying(1),
    dt_atraso_dat date
);

--
-- TOC entry 422 (class 1259 OID 30057)
-- Name: cbfiatret_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfiatret_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 423 (class 1259 OID 30063)
-- Name: rpa_filaboletoeleva; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rpa_filaboletoeleva (
    id_filaboletoeleva_int bigint NOT NULL,
    id_cbitembordero_int bigint NOT NULL,
    id_boletoeleva_str character varying,
    cod_coligada_str character varying,
    tipo_int integer DEFAULT 0,
    token_str character varying DEFAULT ''::character varying,
    destino_str character varying,
    nome_str character varying,
    cpf_str character varying,
    linha_digitavel_str character varying,
    data_vencimento_date date,
    boleto_bytea bytea,
    status_int integer DEFAULT 1,
    inserido_date timestamp without time zone,
    processado_date timestamp without time zone,
    nossonumero_str character varying
);

--
-- TOC entry 424 (class 1259 OID 30082)
-- Name: cbfilaboletoeleva_id_filaboletoeleva_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfilaboletoeleva_id_filaboletoeleva_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12050 (class 0 OID 0)
-- Dependencies: 424
-- Name: cbfilaboletoeleva_id_filaboletoeleva_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cbfilaboletoeleva_id_filaboletoeleva_int_seq OWNED BY public.rpa_filaboletoeleva.id_filaboletoeleva_int;

--
-- TOC entry 425 (class 1259 OID 30096)
-- Name: cbfilialcliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbfilialcliente (
    id_cbfilialcliente_int bigint DEFAULT nextval(('"cbfilialcliente_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(10) NOT NULL,
    razao_social_str character varying(50),
    nome_fantasia_str character varying(50),
    endereco_str character varying(40),
    bairro_str character varying(30),
    id_gecidade_int bigint,
    cep_str character varying(10),
    telefone1_str character varying(20),
    telefone2_str character varying(20),
    telefone3_str character varying(20),
    contato1_str character varying(20),
    contato2_str character varying(20),
    contato3_str character varying(20),
    funcao1_str character varying(20),
    funcao2_str character varying(20),
    funcao3_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 426 (class 1259 OID 30104)
-- Name: cbfilialcliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfilialcliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 427 (class 1259 OID 30113)
-- Name: cbfollowup; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbfollowup (
    id_cbfollowup_int bigint DEFAULT nextval(('"cbfollowup_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_cbparcela_int bigint,
    data_dat date NOT NULL,
    historico_str character varying(1000),
    id_geusuario_int bigint,
    coloca_stand_str character varying(1),
    data_stand_by_dat date,
    id_cbsitcontato_int bigint,
    alterado_str character varying(1),
    data_cobranca_dat date,
    hora_cobranca_tim timestamp with time zone,
    hora_tim timestamp with time zone,
    tstamp timestamp with time zone,
    tipo_contato_str character varying(1),
    status_registro_str character varying(2),
    data_evento_dat date,
    cobranca_inicio_tim timestamp with time zone,
    cobranca_final_tim timestamp with time zone,
    id_geqlcontato_int bigint,
    call_key_str character varying(60),
    instancia_str character varying(20),
    tempo_ligacao_tim time without time zone,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 428 (class 1259 OID 30120)
-- Name: cbfollowup_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfollowup_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 429 (class 1259 OID 30130)
-- Name: cbfollowupcliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbfollowupcliente (
    id_cbfollowupcliente_int bigint DEFAULT nextval(('"cbfollowupcliente_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    data_lancamento_dat date,
    sequencia_descricao_num integer,
    descricao_text text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 430 (class 1259 OID 30147)
-- Name: cbfollowupcliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfollowupcliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 431 (class 1259 OID 30151)
-- Name: cbformapagamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbformapagamento (
    id_cbformapagamento_int bigint DEFAULT nextval(('"cbformapagamento_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(20),
    descricao_str character varying(30),
    documentos_str character varying(1),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    identificador_txt text
);

--
-- TOC entry 432 (class 1259 OID 30164)
-- Name: cbformapagamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbformapagamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 433 (class 1259 OID 30171)
-- Name: cbfuncaoboleto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbfuncaoboleto (
    id_cbfuncaoboleto_int bigint DEFAULT nextval(('"cbfuncaoboleto_seq"'::text)::regclass) NOT NULL,
    funcao_str character varying(20),
    tipo_str character varying(1),
    campo_str character varying(50),
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 434 (class 1259 OID 30184)
-- Name: cbfuncaoboleto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbfuncaoboleto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 435 (class 1259 OID 30194)
-- Name: cbgarantia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbgarantia (
    id_cbgarantia_int bigint DEFAULT nextval(('"cbgarantia_seq"'::text)::regclass) NOT NULL,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    marca_str character varying(50),
    modelo_str character varying(50),
    ano_fabricacao_str character varying(4),
    ano_modelo_str character varying(4),
    placa_str character varying(10),
    chassi_str character varying(30),
    tstamp timestamp with time zone,
    obs_txt text,
    id_cbparcela_int bigint,
    id_gecliente_int bigint,
    descricao_str character varying(50),
    renavam_str character varying(15),
    cor_str character varying(25),
    localizada_bit bit(1),
    localizada_terc_bit bit(1),
    data_localizacao_dat date,
    criado_normalizacao_bit bit(1),
    codigo_molicar_str character varying(20),
    valor_bem_num double precision,
    valor_molicar_num double precision,
    id_geusuario_int bigint,
    id_cbtipogarantia_int bigint,
    combustivel_str character varying(20)
);

--
-- TOC entry 436 (class 1259 OID 30206)
-- Name: cbgarantia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbgarantia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 437 (class 1259 OID 30211)
-- Name: cbgarantiatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbgarantiatmp (
    id_cbgarantia_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    chassi_str character varying(30)
);

--
-- TOC entry 438 (class 1259 OID 30219)
-- Name: cbgravacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbgravacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 439 (class 1259 OID 30228)
-- Name: cbgravacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbgravacao (
    id_cbgravacao_int bigint DEFAULT nextval('public.cbgravacao_seq'::regclass) NOT NULL,
    ramal_str character varying(10) NOT NULL,
    callid_str character varying(50),
    arquivo_str character varying(500),
    ip_gravador_str character varying(20),
    hora_tim time without time zone,
    data_dat date
);

--
-- TOC entry 440 (class 1259 OID 30236)
-- Name: cbgravacaofollowup_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbgravacaofollowup_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 441 (class 1259 OID 30242)
-- Name: cbgravacaofollowup; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbgravacaofollowup (
    id_cbgravacaofollowup_int bigint DEFAULT nextval('public.cbgravacaofollowup_seq'::regclass) NOT NULL,
    id_cbfollowup_int bigint NOT NULL,
    id_cbgravacao_int bigint NOT NULL
);

--
-- TOC entry 442 (class 1259 OID 30251)
-- Name: cbgravacaosiga_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbgravacaosiga_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 443 (class 1259 OID 30260)
-- Name: cbgravacaosiga; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbgravacaosiga (
    id_cbgravacaosiga_int bigint DEFAULT nextval('public.cbgravacaosiga_seq'::regclass),
    id_cbfollowup_int bigint,
    hash character varying,
    tstamp timestamp with time zone
);

--
-- TOC entry 444 (class 1259 OID 30276)
-- Name: cbgrupolayout_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbgrupolayout_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 445 (class 1259 OID 30281)
-- Name: cbgrupolayout; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbgrupolayout (
    id_cbgrupolayout_int bigint DEFAULT nextval('public.cbgrupolayout_seq'::regclass) NOT NULL,
    codigo_str character varying(15),
    nome_str character varying(80)
);

--
-- TOC entry 446 (class 1259 OID 30287)
-- Name: cbinconsistencia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbinconsistencia (
    id_cbinconsistencia_int bigint DEFAULT nextval(('"cbinconsistencia_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_int bigint NOT NULL,
    descricao_str character varying(80),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 447 (class 1259 OID 30296)
-- Name: cbinconsistencia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbinconsistencia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 448 (class 1259 OID 30309)
-- Name: cbinstrucao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbinstrucao (
    id_cbinstrucao_int bigint DEFAULT nextval(('"cbinstrucao_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone
);

--
-- TOC entry 449 (class 1259 OID 30318)
-- Name: cbinstrucao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbinstrucao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 450 (class 1259 OID 30320)
-- Name: cbinstrucaobanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbinstrucaobanco (
    id_cbinstrucaobanco_int bigint DEFAULT nextval(('"cbinstrucaobanco_seq"'::text)::regclass) NOT NULL,
    id_fibanco_int bigint,
    comando_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    tipo_str character varying(1),
    id_cbmotivobanco_int bigint,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone
);

--
-- TOC entry 451 (class 1259 OID 30331)
-- Name: cbinstrucaobanco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbinstrucaobanco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 452 (class 1259 OID 30338)
-- Name: cbinstrucaocobranca; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbinstrucaocobranca (
    id_cbinstrucaocobranca_int bigint DEFAULT nextval(('"cbinstrucaocobranca_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(5) NOT NULL,
    descricao_str character varying(70),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 453 (class 1259 OID 30349)
-- Name: cbinstrucaocobranca_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbinstrucaocobranca_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 454 (class 1259 OID 30353)
-- Name: cbitembordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero (
    id_cbitembordero_int bigint DEFAULT nextval(('"cbitembordero_seq"'::text)::regclass) NOT NULL,
    id_cbbordero_int bigint NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    nosso_numero_int character(30),
    comando_str character varying(2),
    id_cbinstrucao1_int bigint,
    id_cbinstrucao2_int bigint,
    valor_desconto_num double precision,
    data_desconto_dat date,
    vencimento_dat date,
    emissao_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    destino_str character varying(100),
    boleto_int smallint,
    nosso_numero_str character varying(30),
    linha_digitavel_str character varying(60),
    cod_barra_str character varying(200),
    barra_str text,
    dv_int character varying(3),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    instrucao_1_str character varying(40),
    instrucao_2_str character varying(40),
    parcelamento_str character varying(7),
    pago_str character varying(1),
    acrescimo_num double precision,
    id_geusuario_boleto_int bigint,
    acrescimo_np_num double precision,
    acordo_int bigint,
    quitacao_str character varying(1),
    data_boleto_dat date,
    hora_boleto_tim timestamp with time zone,
    observacao_boleto_str character varying(100),
    tipo_destino_str character varying(1) DEFAULT 'O'::character varying,
    boleto_gravacao_tim timestamp without time zone,
    perc_desc_num double precision,
    principal_original_num double precision,
    boleto_parcelamento_str character varying(3) DEFAULT '001'::character varying,
    id_geqlcontato_int bigint,
    id_geqlendereco_int bigint,
    cp_original_num double precision,
    desconto_original_num double precision,
    acordo_formalizado_int bigint,
    id_gecidade_int bigint,
    data_envio_dat date,
    data_reenvio_dat date,
    arquivo_terc_str character varying(60),
    tipo_geracao_str character varying(2),
    tstamp timestamp without time zone,
    envio_jpg_str character varying(1),
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    id_boletoeleva_str character varying,
    id_ref_cbitembordero_old_int bigint,
    origem_ws_int integer
);

--
-- TOC entry 455 (class 1259 OID 30369)
-- Name: cbitembordero_10_101_41_100_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_10_101_41_100_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    bordero_int bigint,
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 456 (class 1259 OID 30374)
-- Name: cbitembordero_10_101_41_165_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_10_101_41_165_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 457 (class 1259 OID 30390)
-- Name: cbitembordero_10_101_41_169_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_10_101_41_169_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    bordero_int bigint,
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 458 (class 1259 OID 30395)
-- Name: cbitembordero_10_101_41_25_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_10_101_41_25_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 459 (class 1259 OID 30408)
-- Name: cbitembordero_10_101_41_55_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_10_101_41_55_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 460 (class 1259 OID 30415)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    dna_final text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying,
    codprovider_banco_str text,
    tipo_negociacao_str text,
    conta_cartao_str text
);

--
-- TOC entry 461 (class 1259 OID 30429)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying
);

--
-- TOC entry 462 (class 1259 OID 30451)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying
);

--
-- TOC entry 463 (class 1259 OID 30473)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying
);

--
-- TOC entry 464 (class 1259 OID 30493)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying
);

--
-- TOC entry 465 (class 1259 OID 30516)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying
);

--
-- TOC entry 466 (class 1259 OID 30539)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 467 (class 1259 OID 30555)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 468 (class 1259 OID 30578)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 469 (class 1259 OID 30601)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 470 (class 1259 OID 30618)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 471 (class 1259 OID 30639)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 472 (class 1259 OID 30658)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 473 (class 1259 OID 30675)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 474 (class 1259 OID 30696)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 475 (class 1259 OID 30719)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 476 (class 1259 OID 30742)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 477 (class 1259 OID 30758)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text
);

--
-- TOC entry 478 (class 1259 OID 30781)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text
);

--
-- TOC entry 479 (class 1259 OID 30804)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 480 (class 1259 OID 30821)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    dna_final text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying,
    codprovider_banco_str text,
    tipo_negociacao_str text,
    conta_cartao_str text
);

--
-- TOC entry 481 (class 1259 OID 30836)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 482 (class 1259 OID 30851)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 483 (class 1259 OID 30862)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 484 (class 1259 OID 30874)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 485 (class 1259 OID 30897)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 486 (class 1259 OID 30913)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 487 (class 1259 OID 30936)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 488 (class 1259 OID 30960)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 489 (class 1259 OID 30980)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 490 (class 1259 OID 30995)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 491 (class 1259 OID 31010)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 492 (class 1259 OID 31032)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 493 (class 1259 OID 31047)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tipo_acordo character varying
);

--
-- TOC entry 494 (class 1259 OID 31062)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 495 (class 1259 OID 31080)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tipo_acordo character varying
);

--
-- TOC entry 496 (class 1259 OID 31093)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 497 (class 1259 OID 31115)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text
);

--
-- TOC entry 498 (class 1259 OID 31129)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text
);

--
-- TOC entry 499 (class 1259 OID 31144)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 500 (class 1259 OID 31159)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 501 (class 1259 OID 31176)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 502 (class 1259 OID 31191)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    valor_montante_num text,
    dna_final text,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text,
    acordo_formalizado_int text,
    tx_bol text,
    tipo_acordo character varying,
    codprovider_banco_str text,
    tipo_negociacao_str text
);

--
-- TOC entry 503 (class 1259 OID 31206)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 504 (class 1259 OID 31221)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 505 (class 1259 OID 31238)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 506 (class 1259 OID 31254)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    vlclser text
);

--
-- TOC entry 507 (class 1259 OID 31273)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text,
    titulo text,
    codigo_portador text,
    dt_emissao text,
    data_venc_parcela text
);

--
-- TOC entry 508 (class 1259 OID 31289)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text
);

--
-- TOC entry 509 (class 1259 OID 31304)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp with time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    qtde_parc_bordero bigint,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str text,
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date,
    colchao_status text,
    marcacao text,
    marcacao2 text,
    nomenclatura text,
    linha_digitavel_str character varying(60),
    saldo numeric(10,2),
    codigo_campanha text,
    valor_pago double precision,
    dias_atraso integer,
    tipo_str text,
    destino_str character varying(100),
    notificacao_num double precision,
    phygital text
);

--
-- TOC entry 510 (class 1259 OID 31319)
-- Name: cbitembordero_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitembordero_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 511 (class 1259 OID 31324)
-- Name: cbitemborderoboletagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderoboletagem (
    id_cbitemborderoboletagem_int bigint DEFAULT nextval(('"cbitemborderoboletagem_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    id_cbblconfiguracaoitem_int integer,
    entrada_num double precision,
    parcelas_num double precision,
    total_original_num double precision,
    id_cbitembordero_form_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    acrescimo_num double precision,
    perc_desc_num double precision,
    principal_original_num double precision,
    cp_original_num double precision,
    desconto_original_num double precision,
    parcela_int integer,
    parcelas_int smallint,
    chave_calculo_sauc_str character varying(60),
    comissionamento_parcelado_num double precision,
    pc_ho_num double precision,
    pc_comissionamento_num double precision
);

--
-- TOC entry 512 (class 1259 OID 31334)
-- Name: cbitemborderoboletagem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderoboletagem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 513 (class 1259 OID 31338)
-- Name: cbitemborderoboletagemcusta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderoboletagemcusta (
    id_cbitemborderoboletagemcusta_int bigint DEFAULT nextval(('cbitemborderoboletagemcusta_seq'::text)::regclass) NOT NULL,
    id_cbitemborderoboletagem_int bigint NOT NULL,
    id_cbdespesa_int bigint,
    valor_total_num double precision,
    desconto_num double precision,
    tstamp timestamp without time zone,
    id_geusuario_int bigint
);

--
-- TOC entry 514 (class 1259 OID 31352)
-- Name: cbitemborderoboletagemcusta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderoboletagemcusta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 515 (class 1259 OID 31356)
-- Name: cbitemborderoboletagemparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderoboletagemparcela (
    id_cbitemborderoboletagemparcela_int bigint DEFAULT nextval(('"cbitemborderoboletagemparcela_seq"'::text)::regclass) NOT NULL,
    id_cbitemborderoboletagem_int bigint NOT NULL,
    id_cbparcela_int bigint,
    data_vencimento_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    selecionado_int smallint,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    valor_parcela_num double precision,
    percentual_desconto_num double precision,
    cp_original_num double precision,
    desconto_original_num double precision,
    entrada_num double precision,
    parcelas_num double precision,
    comissionamento_parcelado_num double precision
);

--
-- TOC entry 516 (class 1259 OID 31370)
-- Name: cbitemborderoboletagemparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderoboletagemparcela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 517 (class 1259 OID 31374)
-- Name: cbitemborderocalculoparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderocalculoparcela (
    id_cbitemborderocalculoparcela_int bigint DEFAULT nextval(('cbitemborderocalculoparcela_seq'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    principal_num double precision,
    juros_mora_num double precision,
    multa_num double precision,
    cp_num double precision,
    despesa_banco_num double precision,
    honorarios_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    acrescimo_num double precision,
    valor_total_num double precision,
    notificacao_num double precision,
    data_calculo_dat timestamp with time zone,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    comissionamento_num double precision,
    retido_num double precision,
    percentual_desconto_num double precision,
    descapitalizacao_num real,
    chave_bradesco_str character varying(300)
);

--
-- TOC entry 518 (class 1259 OID 31382)
-- Name: cbitemborderocalculoparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderocalculoparcela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 519 (class 1259 OID 31389)
-- Name: cbitemborderocomprovantepgto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderocomprovantepgto (
    id_cbitemborderocomprovantepgto_int bigint DEFAULT nextval(('"cbitemborderocomprovantepgto_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint NOT NULL,
    comprovantepgto bytea NOT NULL,
    status bigint DEFAULT 0 NOT NULL,
    id_geusuario_int bigint NOT NULL,
    "timestamp" timestamp with time zone
);

--
-- TOC entry 520 (class 1259 OID 31407)
-- Name: cbitemborderocomprovantepgto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderocomprovantepgto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 521 (class 1259 OID 31411)
-- Name: cbitemborderocusta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderocusta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 522 (class 1259 OID 31418)
-- Name: cbitemborderocusta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderocusta (
    id_cbitemborderocusta_int bigint DEFAULT nextval('public.cbitemborderocusta_seq'::regclass) NOT NULL,
    id_cbitembordero_int bigint NOT NULL,
    id_cbdespesa_int bigint NOT NULL,
    valor_total_num double precision NOT NULL,
    desconto_num double precision NOT NULL,
    tstamp timestamp without time zone DEFAULT now(),
    id_geusuario_int bigint NOT NULL
);

--
-- TOC entry 523 (class 1259 OID 31427)
-- Name: cbitemborderoenvio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderoenvio (
    id_cbitembordero_int bigint NOT NULL,
    tipo_destino_str character varying(20),
    destino_str character varying(100),
    data_hora_tim timestamp without time zone,
    contador_int smallint
);

--
-- TOC entry 524 (class 1259 OID 31435)
-- Name: cbitemborderofile; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderofile (
    id_cbitemborderofile_int bigint NOT NULL,
    id_cbitembordero_int bigint NOT NULL,
    file_bytea bytea
);

--
-- TOC entry 525 (class 1259 OID 31450)
-- Name: cbitemborderofile_id_cbitemborderofile_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderofile_id_cbitemborderofile_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12051 (class 0 OID 0)
-- Dependencies: 525
-- Name: cbitemborderofile_id_cbitemborderofile_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cbitemborderofile_id_cbitemborderofile_int_seq OWNED BY public.cbitemborderofile.id_cbitemborderofile_int;

--
-- TOC entry 1691 (class 1259 OID 64783826)
-- Name: cbitemborderohistorico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderohistorico (
    id_cbcontrato_int bigint,
    pago_str character varying(1),
    pago_old_str character varying(1),
    tstamp timestamp without time zone,
    queryresponsavel_txt text,
    ipresponsavel_str inet
);

--
-- TOC entry 526 (class 1259 OID 31468)
-- Name: cbitemborderohistoricogeusuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderohistoricogeusuario (
    id_cbitemborderohistoricogeusuario_int bigint DEFAULT nextval(('cbitemborderohistoricogeusuario_seq'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_geusuario_int bigint,
    id_geusuario_old_int bigint,
    id_cbitembordero_int bigint,
    tstamp timestamp without time zone,
    queryresponsavel_txt text,
    ipresponsavel_str text,
    acordo_int bigint,
    contrato_str text,
    usuario_novo text,
    login_novo text,
    usuario_anterior text,
    login_anterior text,
    valor_pago numeric(15,2),
    data_pagamento_dat date,
    codigo_cliente_str text,
    nome_cliente_str text,
    id_gecliente_int bigint,
    tipo_lancamento_str text
);

--
-- TOC entry 527 (class 1259 OID 31482)
-- Name: cbitemborderohistoricogeusuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderohistoricogeusuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 528 (class 1259 OID 31486)
-- Name: cbitemborderoregistroservico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderoregistroservico (
    id_cbitemborderoregistroservico_int bigint DEFAULT nextval(('cbitemborderoregistroservico_seq'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    tstamp timestamp without time zone,
    jsonrequisicao_str character varying,
    jsonretorno_str character varying
);

--
-- TOC entry 529 (class 1259 OID 31500)
-- Name: cbitemborderoregistroservico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderoregistroservico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 530 (class 1259 OID 31504)
-- Name: cbitemborderoretorno; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderoretorno (
    id_cbitemborderoretorno_int bigint DEFAULT nextval(('"cbitemborderoretorno_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    status_envio_str character varying(2),
    descricao_critica_str character varying(531),
    data_dat date,
    id_geusuario_int bigint,
    tela_str character varying,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2)
);

--
-- TOC entry 531 (class 1259 OID 31518)
-- Name: cbitemborderoretorno_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderoretorno_seq
    START WITH 75839
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 532 (class 1259 OID 31526)
-- Name: cbitemborderostatus_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemborderostatus_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 533 (class 1259 OID 31533)
-- Name: cbitemborderostatus; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemborderostatus (
    id_cbitemborderostatus_int bigint DEFAULT nextval('public.cbitemborderostatus_seq'::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    status_str character varying(3),
    tstamp timestamp without time zone,
    id_geusuario_int bigint
);

--
-- TOC entry 534 (class 1259 OID 31541)
-- Name: cbitemlay; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitemlay (
    id_cbitemlay_int bigint DEFAULT nextval(('"cbitemlay_seq"'::text)::regclass) NOT NULL,
    id_cbdetalhelay_int bigint NOT NULL,
    num_seq_int integer,
    posicao_inicial_int integer,
    campo_tam_int integer,
    tipo_arquivo_str character varying(20),
    nome_arquivo_str character varying(100),
    tipo_operacao_str character varying(2),
    campo_tipo_str character varying(2),
    campo_orig_str character varying(2),
    campo_vlr_fixo_str character varying(50),
    tabela_nome_str character varying(30),
    tabela_campo_str character varying(30),
    nome_campo_str character varying(30),
    alinhamento_str character varying(2),
    num_decimais_int smallint,
    formato_data_str character varying(12),
    carac_preenchidos_str character varying(2),
    formata_numero_str character varying(2),
    retira_form_int smallint,
    formula_sql_txt text,
    observacoes_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    invisivel_bit bit(1),
    identificador_linha_bit bit(1),
    nome_rotulo_str character varying(80),
    posicao_rotulo_int smallint,
    vlr_id_fixo_str character varying(255),
    identificador_arquivo_bit bit(1),
    remover_carac_str character varying(30),
    mascara_txt text,
    manter_formato_original_bit bit(1) DEFAULT (0)::bit(1)
);

--
-- TOC entry 535 (class 1259 OID 31554)
-- Name: cbitemlay_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbitemlay_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 536 (class 1259 OID 31560)
-- Name: cbitmbordero_10_101_41_55_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbitmbordero_10_101_41_55_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    nosso_numero_int character(30),
    comando_str character varying(2),
    id_cbinstrucao1_int bigint,
    id_cbinstrucao2_int bigint,
    valor_desconto_num double precision,
    data_desconto_dat date,
    vencimento_dat date,
    emissao_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    destino_str character varying(100),
    boleto_int smallint,
    nosso_numero_str character varying(30),
    linha_digitavel_str character varying(60),
    cod_barra_str character varying(200),
    barra_str text,
    dv_int character varying(3),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    instrucao_1_str character varying(40),
    instrucao_2_str character varying(40),
    parcelamento_str character varying(7),
    pago_str character varying(1),
    acrescimo_num double precision,
    id_geusuario_boleto_int bigint,
    acrescimo_np_num double precision,
    acordo_int bigint,
    quitacao_str character varying(1),
    data_boleto_dat date,
    hora_boleto_tim timestamp with time zone,
    observacao_boleto_str character varying(100),
    tipo_destino_str character varying(1),
    boleto_gravacao_tim timestamp without time zone,
    perc_desc_num double precision,
    principal_original_num double precision,
    boleto_parcelamento_str character varying(3),
    id_geqlcontato_int bigint,
    id_geqlendereco_int bigint,
    cp_original_num double precision,
    desconto_original_num double precision,
    acordo_formalizado_int bigint,
    id_gecidade_int bigint,
    data_envio_dat date,
    data_reenvio_dat date,
    arquivo_terc_str character varying(60),
    tipo_geracao_str character varying(2),
    tstamp timestamp without time zone,
    envio_jpg_str character varying(1)
);

--
-- TOC entry 537 (class 1259 OID 31571)
-- Name: cbligacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbligacao (
    id_cbligacao_int bigint DEFAULT nextval(('"cbligacao_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_geusuario_int bigint,
    data_hora_tim timestamp without time zone,
    tempo_discagem_int integer,
    atendeu_str character varying(1),
    tempo_ligacao_int integer,
    tipo_str character varying(1)
);

--
-- TOC entry 538 (class 1259 OID 31581)
-- Name: cbligacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbligacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 539 (class 1259 OID 31595)
-- Name: cblotebordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cblotebordero (
    id_cblotebordero_int bigint DEFAULT nextval(('"cblotebordero_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    lote_int bigint NOT NULL,
    data_dat date NOT NULL,
    id_cbbordero_int bigint NOT NULL
);

--
-- TOC entry 540 (class 1259 OID 31602)
-- Name: cblotebordero_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cblotebordero_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 541 (class 1259 OID 31613)
-- Name: cbmodlayout; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbmodlayout (
    id_cbmodlayout_int bigint DEFAULT nextval(('"cbmodlayout_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(20) NOT NULL,
    nome_str character varying(60),
    funcao_exec_str character varying(100),
    inicio_linha_str character varying(10),
    tamanho_int integer,
    posicaoinicial_int integer,
    posicaofinal_int integer,
    tstamp timestamp with time zone,
    gatilho_str character varying(30),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tipo_arquivo character varying(1),
    pulalinhasfinal_int integer,
    pulalinhasinicio_int integer,
    tipo_layout_bit bit(1),
    separador_str character varying(5),
    qualidade_bit bit(1),
    abreviacao_str character varying(10),
    script_nome_arquivo_txt text,
    tipo_arquivo_int integer,
    script_depois_selecionar_dados_txt text,
    local_arquivos_txt text,
    script_depois_processamento_txt text,
    tabela_qualidade_str text,
    coluna_linha_inicio_str character varying(10),
    nome_aba_planilha_str character varying(20),
    selecao_default_int integer,
    remove_ult_sep_bit bit(1),
    select_final_str text,
    qtd_separa_imp_int integer,
    acerta_arquivo_bit bit(1),
    importa_copy_bit bit(1),
    converte_excel_bit bit(1),
    tela_nova_bit boolean,
    json_envio_str character varying(50),
    local_arquivos_inc_txt text,
    local_suporte_arquivo_txt character varying(100),
    relatorio_otimizado_bit bit(1)
);

--
-- TOC entry 542 (class 1259 OID 31623)
-- Name: cbmodlayout_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbmodlayout_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 543 (class 1259 OID 31631)
-- Name: cbmodlayoutagrupados; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbmodlayoutagrupados (
    id_cbmodlayout_int bigint NOT NULL,
    id_cbgrupolayout_int bigint NOT NULL,
    sequencia_int integer
);

--
-- TOC entry 544 (class 1259 OID 31637)
-- Name: cbmotivobanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbmotivobanco (
    id_cbmotivobanco_int bigint DEFAULT nextval(('"cbmotivobanco_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone
);

--
-- TOC entry 545 (class 1259 OID 31647)
-- Name: cbmotivobanco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbmotivobanco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 546 (class 1259 OID 31649)
-- Name: cbnotifcodigodivida_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotifcodigodivida_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 547 (class 1259 OID 31654)
-- Name: cbnotifcodigodivida; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifcodigodivida (
    id_cbnotifcodigodivida_int bigint DEFAULT nextval('public.cbnotifcodigodivida_seq'::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(6) NOT NULL,
    descricao_str character varying(60) NOT NULL,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL
);

--
-- TOC entry 548 (class 1259 OID 31658)
-- Name: cbnotifcodigodividaparam_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotifcodigodividaparam_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 549 (class 1259 OID 31663)
-- Name: cbnotifcodigodividaparam; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifcodigodividaparam (
    id_cbnotifcodigodividaparam_int bigint DEFAULT nextval('public.cbnotifcodigodividaparam_seq'::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbnotifcodigodivida_int bigint NOT NULL,
    descricao_str character varying(50) NOT NULL,
    id_cbtiponegocio_int bigint,
    id_cbproduto_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 550 (class 1259 OID 31667)
-- Name: cbnotifdocfisico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifdocfisico (
    id_gecliente_int bigint NOT NULL,
    solicita_int smallint,
    id_cbsituacaocontrato_int bigint,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL
);

--
-- TOC entry 551 (class 1259 OID 31673)
-- Name: cbnotifmarcaparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifmarcaparcela (
    id_cbnotifmarcaparcela_int bigint DEFAULT nextval(('"cbnotifmarcaparcela_seq"'::text)::regclass) NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    id_cbdespesa_int bigint NOT NULL,
    id_gecliente_int bigint,
    data_dat date,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    data_vencimento_dat date
);

--
-- TOC entry 552 (class 1259 OID 31677)
-- Name: cbnotifmarcaparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotifmarcaparcela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 553 (class 1259 OID 31682)
-- Name: cbnotifparametros; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifparametros (
    id_gecliente_int bigint NOT NULL,
    atraso_str character varying(1),
    campo_str character varying(50),
    dias_atraso_int smallint,
    parcela_inicio_int smallint,
    parcela_fim_int smallint,
    marcacao_str character varying(1),
    qtde_marcacao_int smallint,
    sitcontato_rem_int bigint,
    sitcontato_df_rem_int bigint,
    sitcontato_ret_pos_int bigint,
    sitcontato_ret_neg_int bigint,
    sitcontato_df_ret_int bigint,
    sitcontato_can_int bigint,
    sitcontato_exc_int bigint,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL,
    id_cbnotifparametros_int bigint DEFAULT nextval(('"cbnotifparametros_seq"'::text)::regclass) NOT NULL
);

--
-- TOC entry 554 (class 1259 OID 31686)
-- Name: cbnotifparametros_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotifparametros_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 555 (class 1259 OID 31691)
-- Name: cbnotifparametrosda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifparametrosda (
    id_cbnotifparametrosda_int bigint DEFAULT nextval(('"cbnotifparametrosda_seq"'::text)::regclass) NOT NULL,
    atraso_str character varying(1),
    campo_str character varying(50),
    dias_atraso_int smallint,
    parcela_inicio_int smallint,
    parcela_fim_int smallint,
    id_cbtiponegocio_int bigint,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL,
    id_cbnotifparametros_int bigint,
    id_gecliente_int bigint NOT NULL,
    codigo_int smallint
);

--
-- TOC entry 556 (class 1259 OID 31695)
-- Name: cbnotifparametrosda_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotifparametrosda_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 557 (class 1259 OID 31700)
-- Name: cbnotifparametrosnao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifparametrosnao (
    id_gecliente_int bigint NOT NULL,
    id_cbtiponegocio_int bigint,
    id_cbetapa_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL
);

--
-- TOC entry 558 (class 1259 OID 31703)
-- Name: cbnotifparametrostn; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifparametrostn (
    id_cbtiponegocio_int bigint,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL,
    id_cbnotifparametrosda_int bigint,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 559 (class 1259 OID 31709)
-- Name: cbnotifseparado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifseparado (
    id_gecliente_int bigint NOT NULL,
    id_cbtiponegocio_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL
);

--
-- TOC entry 560 (class 1259 OID 31712)
-- Name: cbnotiftiporemessa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotiftiporemessa (
    id_cbnotiftiporemessa_int bigint DEFAULT nextval(('"cbnotiftiporemessa_seq"'::text)::regclass) NOT NULL,
    codigo_int smallint,
    descricao_str character varying(30)
);

--
-- TOC entry 561 (class 1259 OID 31719)
-- Name: cbnotiftiporemessa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotiftiporemessa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 562 (class 1259 OID 31721)
-- Name: cbnotifvalor_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbnotifvalor_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 563 (class 1259 OID 31726)
-- Name: cbnotifvalor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbnotifvalor (
    id_cbnotifvalor_int bigint DEFAULT nextval('public.cbnotifvalor_seq'::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    ativo_str character varying(1) NOT NULL,
    data_dat date,
    id_cbcartorio_int bigint,
    estado_str character varying(2),
    cidade_str character varying(30),
    valor_num double precision NOT NULL,
    id_geusuario_int bigint NOT NULL,
    tstamp timestamp with time zone NOT NULL
);

--
-- TOC entry 564 (class 1259 OID 31730)
-- Name: cbobito; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbobito (
    id_cbobito_int bigint NOT NULL,
    cpf character varying(50),
    data_dat date,
    identificador_int character varying(100),
    registro_str character varying(100),
    tstamp timestamp with time zone
);

--
-- TOC entry 565 (class 1259 OID 31736)
-- Name: cbordemlay; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbordemlay (
    id_cbordemlay_int bigint DEFAULT nextval(('"cbordemlay_seq"'::text)::regclass) NOT NULL,
    id_cbmodlayout_int bigint NOT NULL,
    sequencia_int integer,
    id_geusuario_int bigint,
    id_cbitemlay_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 566 (class 1259 OID 31740)
-- Name: cbordemlay_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbordemlay_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 567 (class 1259 OID 31745)
-- Name: cbpagamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbpagamento (
    id_cbpagamento_int bigint DEFAULT nextval(('"cbpagamento_seq"'::text)::regclass) NOT NULL,
    sequencia_int bigint,
    id_cbcontrato_int bigint,
    id_cbtipopagamento_int bigint,
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    data_calculo_dat date,
    data_pagamento_dat date,
    data_cadastro_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    serie_recibo_str character varying(3),
    recibo_num bigint,
    produto_str character varying(30),
    quitacao_str character varying(1),
    observacao_txt text,
    senha_str character varying(8),
    tipo_recibo_str character varying(1),
    situacao_str character varying(1),
    modalidade_num integer,
    situacao_pagto_str character varying(1),
    pc_magnetico_str character varying(5),
    chave_acesso_int integer,
    parcelamento_str character varying(5),
    percentual_desconto_num double precision,
    data_retorno_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    desconto_principal_num double precision,
    acrescimo_num double precision,
    tipo_pagamento_str character varying(5),
    data_retorno_banco_dat date,
    acrescimo_np_num double precision,
    parcelado_str character varying(1),
    observacao_boleto_str character varying(100),
    id_cbitembordero_int bigint,
    colchao_str character varying(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 568 (class 1259 OID 31752)
-- Name: cbpagamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbpagamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 569 (class 1259 OID 31759)
-- Name: cbparamclifilial; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparamclifilial (
    id_cbparamclifilial_int bigint DEFAULT nextval(('"cbparamclifilial_seq"'::text)::regclass) NOT NULL,
    id_geempresa_int bigint NOT NULL,
    id_gefilial_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_fibanco_int bigint NOT NULL,
    nosso_numero_str character varying(30),
    numserie_recibo_str character varying(5),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    dias_repasse_dinheiro_int smallint,
    dias_repasse_cheque_int smallint,
    forma_repasse_str character varying(1),
    dias_repasse_boleto_int smallint,
    sequencial_comissao_int bigint,
    sequencia_int bigint,
    recibo_num bigint,
    bordero_int bigint,
    tipo_data_str character varying(1),
    dias_repasse_dinheiro_compensar_int smallint
);

--
-- TOC entry 570 (class 1259 OID 31767)
-- Name: cbparamclifilial_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparamclifilial_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 571 (class 1259 OID 31774)
-- Name: cbparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparcela (
    id_cbparcela_int bigint DEFAULT nextval(('"cbparcela_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    parcela_int bigint NOT NULL,
    tipo_str character varying(10),
    data_vencimento_dat date,
    valor_principal_num double precision,
    data_pagamento_dat date,
    valor_pago_num double precision,
    situacao_int smallint,
    nosso_numero_int bigint,
    vencidop_num double precision,
    valor_multa_quitacao_num double precision,
    desc_indice_str character varying(20),
    qtd_moeda_num double precision,
    indice_moeda_num double precision,
    vlr_devedor_total_num double precision,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    alterado_edi_str character varying(1),
    valor_multa_num double precision,
    valor_comissao_perm_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    observacao_str character varying(200),
    referencia_str character varying(20),
    status_registro_str character varying(2),
    id_esregua_int bigint,
    data_limite_retorno_dat date,
    data_performance_dat date,
    data_riscocl_dat date,
    manual_str character varying(1),
    tarifa_cobranca_num double precision,
    data_entrada_ca_dat date,
    id_str character varying(2),
    contrato_rao_str character varying(1),
    produto_int bigint,
    modalidade_int smallint,
    agencia_int smallint,
    contrato_int bigint,
    mci_int integer,
    nome_produto_str character varying(40),
    saldo_devedor_num double precision,
    valor_devedor_num double precision,
    cp_parcela_num double precision,
    data_congelada_dat date,
    numero_unico_str character varying(20),
    nome_portador_str character varying(60),
    ciclo_atraso_str character varying(2),
    ciclo_cartao_str character varying(2),
    data_ultima_fatura_dat date,
    calculo_convencionais_dat date,
    data_status_dat date,
    idade_cartao_str character varying(3),
    data_validade_dat date,
    valor_limite_num double precision,
    valor_gastos_num double precision,
    ultimo_pagamento_dat date,
    ultimo_pagamento_num double precision,
    data_fechamento_dat date,
    situacao_cacs_str character varying(3),
    ciclo_atraso_int smallint,
    notificado_str character varying(1),
    saldo_maximo_num double precision,
    saldo_minimo_num double precision,
    data_saldo_maximo_dat date,
    data_saldo_minimo_dat date,
    nota_fiscal_str character varying(20),
    atribuicao_str character varying(20),
    segmento_str character varying,
    emissao_dat date,
    batimento_str character varying(1),
    nosso_numero_str character varying(50),
    texto_contabil_str character varying(50),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    valor_original_documento_num double precision,
    valor_abatimento_num double precision,
    valor_custa_protesto_num double precision,
    cpf_cnpj_grupo_economico_str character varying,
    codigo_credor_str character varying,
    razao_social_credor_str character varying,
    tipo_documento_str character varying,
    produto_str character varying,
    info_adicional_1_str character varying,
    info_adicional_2_str character varying,
    info_adicional_3_str character varying,
    info_adicional_4_str character varying,
    info_adicional_5_str character varying,
    info_adicional_6_str character varying,
    info_adicional_7_str character varying,
    info_adicional_8_str character varying,
    info_adicional_9_str character varying,
    info_adicional_10_str character varying,
    info_adicional_11_str character varying,
    info_adicional_12_str character varying,
    info_adicional_13_str character varying,
    info_adicional_14_str character varying,
    info_adicional_15_str character varying,
    info_adicional_16_str character varying,
    info_adicional_17_str character varying,
    info_adicional_18_str character varying,
    desconto_minimo_a_aplicar_str character varying,
    desconto_maximo_a_aplicar_str character varying,
    juros_a_aplicar_ao_mes_prorata_dia_str character varying,
    multa_a_aplicar_str character varying
);

--
-- TOC entry 572 (class 1259 OID 31787)
-- Name: cbparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparcela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 573 (class 1259 OID 31792)
-- Name: cbparceladespesa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparceladespesa (
    id_cbparceladespesa_int bigint DEFAULT nextval(('"cbparceladespesa_seq"'::text)::regclass) NOT NULL,
    id_cbdespesa_int bigint NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    valor_principal_parc_num double precision,
    vencimento_parcela_dat date,
    numero_parcela_int integer
);

--
-- TOC entry 574 (class 1259 OID 31802)
-- Name: cbparceladespesa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparceladespesa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 575 (class 1259 OID 31811)
-- Name: cbparcelaitembordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparcelaitembordero (
    id_cbparcelaitembordero_int bigint DEFAULT nextval(('"cbparcelaitembordero_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    data_vencimento_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    selecionado_int smallint,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    valor_parcela_num double precision,
    percentual_desconto_num double precision,
    cp_original_num double precision,
    desconto_original_num double precision,
    data_arquivo_dat date,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 576 (class 1259 OID 31817)
-- Name: cbparcelaitembordero_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparcelaitembordero_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 577 (class 1259 OID 31830)
-- Name: cbparcelapagamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparcelapagamento (
    id_cbparcelapagamento_int bigint DEFAULT nextval(('"cbparcelapagamento_seq"'::text)::regclass) NOT NULL,
    id_cbpagamento_int bigint NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    data_vencimento_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    desconto_principal_num double precision,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 578 (class 1259 OID 31836)
-- Name: cbparcelapagamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparcelapagamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 579 (class 1259 OID 31841)
-- Name: cbparcelaproposta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparcelaproposta (
    id_cbparcelaproposta_int bigint DEFAULT nextval(('"cbparcelaproposta_seq"'::text)::regclass) NOT NULL,
    id_cbproposta_int bigint,
    id_cbparcela_int bigint,
    principal_num double precision,
    juros_mora_num double precision,
    multa_num double precision,
    cp_num double precision,
    despesa_banco_num double precision,
    honorarios_num double precision,
    desconto_num double precision,
    acrescimo_num double precision,
    notificacao_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    valor_total_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    abatimento_num double precision,
    percentual_desconto_num double precision,
    acrescimo_np_num double precision,
    valor_parcela_num double precision
);

--
-- TOC entry 580 (class 1259 OID 31847)
-- Name: cbparcelaproposta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparcelaproposta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 581 (class 1259 OID 31857)
-- Name: cbparcelastatus; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparcelastatus (
    id_cbparcela_int bigint,
    data_dat date,
    data_arquivo_dat date,
    tipo_arquivo_str character varying(50),
    sequencia_arquivo_int bigint,
    status_registro_str character varying(3),
    data_status_dat date,
    valor_principal_num double precision,
    valor_pago_num double precision,
    valor_correcao_num double precision
);

--
-- TOC entry 582 (class 1259 OID 31865)
-- Name: cbparcelatransf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbparcelatransf (
    id_cbparcelatransf_int bigint DEFAULT nextval(('"cbparcelatransf_seq"'::text)::regclass) NOT NULL,
    id_cbparcela_int bigint NOT NULL,
    data_transferencia_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 583 (class 1259 OID 31879)
-- Name: cbparcelatransf_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbparcelatransf_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 584 (class 1259 OID 31883)
-- Name: cbpergunta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbpergunta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 585 (class 1259 OID 31891)
-- Name: cbpergunta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbpergunta (
    id_cbpergunta_int bigint DEFAULT nextval('public.cbpergunta_seq'::regclass) NOT NULL,
    codigo_str character varying(20),
    descricao_str character varying(20),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    "timestamp" timestamp without time zone,
    id_gecliente_int bigint
);

--
-- TOC entry 586 (class 1259 OID 31899)
-- Name: cbperguntarespondida; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbperguntarespondida (
    id_cbperguntarespondidaint bigint DEFAULT nextval('public.cbpergunta_seq'::regclass) NOT NULL,
    id_cbperguntaresposta_int bigint,
    id_geusuario_int bigint,
    "timestamp" timestamp without time zone
);

--
-- TOC entry 587 (class 1259 OID 31908)
-- Name: cbperguntarespondida_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbperguntarespondida_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 588 (class 1259 OID 31917)
-- Name: cbperguntarespondidaacionamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbperguntarespondidaacionamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 589 (class 1259 OID 31924)
-- Name: cbperguntaresposta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbperguntaresposta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 590 (class 1259 OID 31928)
-- Name: cbperguntaresposta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbperguntaresposta (
    id_cbperguntaresposta_int bigint DEFAULT nextval('public.cbperguntaresposta_seq'::regclass) NOT NULL,
    id_cbpergunta_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(20),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    "timestamp" timestamp without time zone
);

--
-- TOC entry 591 (class 1259 OID 31939)
-- Name: cbplataforma; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbplataforma (
    id_cbplataforma_int bigint DEFAULT nextval(('"cbplataforma_seq"'::text)::regclass) NOT NULL,
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    codigo_int bigint NOT NULL,
    descricao_str character varying(40),
    praca_str character varying(30),
    uf_str character varying(2),
    automatico_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_filialretorno_int bigint,
    regiao_str character varying(100),
    empresa_itau_str character varying(50),
    diretoria_int bigint
);

--
-- TOC entry 592 (class 1259 OID 31951)
-- Name: cbplataforma_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbplataforma_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 593 (class 1259 OID 31958)
-- Name: cbproduto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbproduto (
    id_cbproduto_int bigint DEFAULT nextval(('"cbproduto_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 594 (class 1259 OID 31968)
-- Name: cbproduto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbproduto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 595 (class 1259 OID 31976)
-- Name: cbprodutocliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbprodutocliente (
    id_cbprodutocliente_int bigint DEFAULT nextval(('"cbprodutocliente_seq"'::text)::regclass) NOT NULL,
    id_cbtiponegocio_int bigint,
    id_gecliente_int bigint,
    codigo_produto character varying(20),
    descricao_produto character varying(60),
    massificado_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    codigo_produto_cliente_str character varying(20),
    id_cbproduto_int bigint,
    consolidador_str character varying(40)
);

--
-- TOC entry 596 (class 1259 OID 31986)
-- Name: cbprodutocliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbprodutocliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 597 (class 1259 OID 31995)
-- Name: cbproposta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbproposta (
    id_cbproposta_int bigint DEFAULT nextval(('"cbproposta_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_geusuario_int bigint,
    descricao_str character varying(1000),
    data_solicitacao_dat date,
    data_envio_dat date,
    data_retorno_dat date,
    aceito_str character varying(1),
    data_validade_dat date,
    usuario_int bigint,
    tstamp timestamp with time zone,
    id_cbtipopagamento_int bigint,
    data_calculo_dat date,
    alcada_str character varying(1),
    ajuizado_str character varying(1),
    veiculo_apreendido_str character varying(1),
    avaliacao_bem_num double precision,
    assume_debito_str character varying(1),
    conservacao_str character varying(10),
    detalhes_garantia_str character varying(100),
    parecer_escritorio_str character varying(1),
    fundametacao_escritorio_str character varying(100),
    parecer_juridico_str character varying(1),
    fundametacao_juridico_str character varying(100),
    multa_debito_num double precision,
    atualizacao_quitacao_str character varying(1),
    quitacao_str character varying(1),
    saldo_devedor_num double precision,
    id_cbitembordero_int bigint,
    admjur_str character(1)
);

--
-- TOC entry 598 (class 1259 OID 32002)
-- Name: cbproposta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbproposta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 599 (class 1259 OID 32006)
-- Name: cbquitacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbquitacao (
    id_cbquitacao_int bigint DEFAULT nextval(('"cbquitacao_seq"'::text)::regclass) NOT NULL,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_cbitembordero_novo_int bigint,
    acordo_int bigint,
    juros_num double precision,
    valor_total_num double precision
);

--
-- TOC entry 600 (class 1259 OID 32019)
-- Name: cbquitacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbquitacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 601 (class 1259 OID 32025)
-- Name: cbquitacaoitem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbquitacaoitem (
    id_cbquitacaoitem_int bigint DEFAULT nextval(('"cbquitacaoitem_seq"'::text)::regclass) NOT NULL,
    id_cbquitacao_int bigint,
    id_cbitembordero_int bigint,
    juros_num double precision,
    valor_total_num double precision
);

--
-- TOC entry 602 (class 1259 OID 32034)
-- Name: cbquitacaoitem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbquitacaoitem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 603 (class 1259 OID 32039)
-- Name: cbreceptivoretorno_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbreceptivoretorno_seq
    START WITH 27
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 604 (class 1259 OID 32048)
-- Name: cbreceptivoretorno; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbreceptivoretorno (
    id_cbreceptivoretorno_int bigint DEFAULT nextval('public.cbreceptivoretorno_seq'::regclass),
    id_cbcontrato_int bigint,
    data_hora_tim timestamp without time zone DEFAULT now(),
    id_geusuario_int bigint,
    id_cbreceptivoretornotipo_int bigint
);

--
-- TOC entry 605 (class 1259 OID 32055)
-- Name: cbreceptivoretornotipo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbreceptivoretornotipo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 606 (class 1259 OID 32067)
-- Name: cbreceptivoretornotipo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbreceptivoretornotipo (
    id_cbreceptivoretornotipo_int bigint DEFAULT nextval('public.cbreceptivoretornotipo_seq'::regclass) NOT NULL,
    codigo_str character varying(20),
    descricao_str character varying(60),
    id_gecliente_int bigint,
    ativo_str character varying(1)
);

--
-- TOC entry 607 (class 1259 OID 32073)
-- Name: cbreembolso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbreembolso (
    id_cbreembolso_int bigint DEFAULT nextval(('cbreembolso_seq'::text)::regclass) NOT NULL,
    sequencia_int bigint,
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_cbtipodespesa_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    data_lancamento_dat date,
    data_comprov_dat date,
    valor_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 608 (class 1259 OID 32083)
-- Name: cbreembolso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbreembolso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 609 (class 1259 OID 32089)
-- Name: cbregionalcliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbregionalcliente (
    id_cbregionalcliente_int bigint DEFAULT nextval(('"cbregionalcliente_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10) NOT NULL,
    razao_social_str character varying(50),
    nome_fantasia_str character varying(50) NOT NULL,
    endereco_str character varying(40),
    bairro_str character varying(30),
    id_gecidade_int bigint,
    cep_str character varying(10),
    telefone_str character varying(20),
    contato_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_gecliente_int bigint
);

--
-- TOC entry 610 (class 1259 OID 32098)
-- Name: cbregionalcliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbregionalcliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 611 (class 1259 OID 32102)
-- Name: cbregistroboleto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbregistroboleto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 612 (class 1259 OID 32111)
-- Name: cbregistroboletoapi; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbregistroboletoapi (
    id_cbregistroboleto_int integer DEFAULT nextval('public.cbregistroboleto_seq'::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    situacao_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 613 (class 1259 OID 32117)
-- Name: cbregistroboletoapilog; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbregistroboletoapilog (
    id_cbregistroboletoapilog_int integer DEFAULT nextval(('"cbregistroboletoapilog_seq"'::text)::regclass) NOT NULL,
    id_cbitembordero_int bigint,
    envio_tstamp character varying(60),
    retorno_tstamp character varying(60),
    envio_json_str text,
    url_str character varying(255),
    urlauth_str character varying(255),
    canal_str character varying(255),
    usuario_str character varying(255),
    senha_str character varying(255),
    retorno_json_str text
);

--
-- TOC entry 614 (class 1259 OID 32131)
-- Name: cbregistroboletoapilog_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbregistroboletoapilog_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 615 (class 1259 OID 32136)
-- Name: cbretcobranca_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbretcobranca_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 616 (class 1259 OID 32145)
-- Name: cbserasa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbserasa (
    id_cbserasa_int bigint DEFAULT nextval(('"cbserasa_seq"'::text)::regclass) NOT NULL,
    cpf character varying(20),
    restr_financ_resolvida character varying(255),
    restr_financ_ativa character varying(255),
    pend_financ_pefin_refin_ativo real,
    pend_financ_pefin_refin_resolv real,
    cons30 real,
    cons60 real,
    cons90 real,
    cons120 real,
    cons150 real,
    cons180 real,
    cons210 real
);

--
-- TOC entry 617 (class 1259 OID 32151)
-- Name: cbserasa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbserasa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 618 (class 1259 OID 32163)
-- Name: cbsimuladorcomissionamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsimuladorcomissionamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 619 (class 1259 OID 32167)
-- Name: cbsimuladorcomissionamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsimuladorcomissionamento (
    id_cbsimuladorcomissionamento_int bigint DEFAULT nextval('public.cbsimuladorcomissionamento_seq'::regclass) NOT NULL,
    id_gecliente_int bigint,
    descricao_str character varying(60),
    id_geclassificacaocontato_int bigint,
    ativo_str character varying(1)
);

--
-- TOC entry 620 (class 1259 OID 32181)
-- Name: cbsimuladorcomissionamentofaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsimuladorcomissionamentofaixa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 621 (class 1259 OID 32185)
-- Name: cbsimuladorcomissionamentofaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsimuladorcomissionamentofaixa (
    id_cbsimuladorcomissionamentofaixa_int bigint DEFAULT nextval('public.cbsimuladorcomissionamentofaixa_seq'::regclass) NOT NULL,
    faixa_str character varying(10),
    valor_num double precision
);

--
-- TOC entry 622 (class 1259 OID 32198)
-- Name: cbsimuladorcomissionamentofaixavalor_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsimuladorcomissionamentofaixavalor_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 623 (class 1259 OID 32203)
-- Name: cbsimuladorcomissionamentofaixavalor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsimuladorcomissionamentofaixavalor (
    id_cbsimuladorcomissionamentofaixavalor_int bigint DEFAULT nextval('public.cbsimuladorcomissionamentofaixavalor_seq'::regclass) NOT NULL,
    id_cbsimuladorcomissionamentofaixa_int bigint,
    id_cbsimuladorcomissionamento_int bigint,
    tabela1_num double precision,
    tabela3_num double precision,
    tabela2_num double precision
);

--
-- TOC entry 624 (class 1259 OID 32216)
-- Name: cbsitcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsitcontato (
    id_cbsitcontato_int bigint DEFAULT nextval(('"cbsitcontato_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_int bigint NOT NULL,
    descricao_str character varying(100),
    dias_cobranca_int integer,
    exclui_contrato_str character varying(1),
    tp_acao_str character varying(1),
    gera_retorno character varying(1),
    proxima_chamada_tim time without time zone,
    id_geusuario_int bigint,
    positivo_str character varying(1),
    tstamp timestamp with time zone,
    ativo_str character varying(1),
    fup_banco_str character varying(1),
    primordial_str character varying(1),
    envia_email_str character varying(1),
    codigo_banco_str character varying(5),
    tipo_contato_str character varying(1),
    limite_stdby_int bigint,
    id_gemotivonajuizamento_int bigint,
    id_geaplicacao_int bigint,
    preenchimento_obrigatorio_str character varying(1),
    boleto_str character varying(1),
    ouvidoria_str character varying(1),
    fup_filacobranca_str character varying(1),
    provisionamento_str character varying(1),
    liberacao_str character varying(1),
    id_geqlresponsavel_int bigint,
    id_geqlsituacao_int bigint,
    contatou_cliente_str character varying(1),
    doc_anexo_str character varying(1),
    id_getipodocumento_int bigint,
    historico_padrao_str character varying(1000),
    id_gegrupotipodocumento_int bigint,
    id_geprocesso_int bigint,
    id_gegrupoprocesso_int bigint,
    documento_fisico_str character varying(1),
    tempo_ideal_int smallint,
    margem_tolerancia_int smallint,
    monitor_ativo_str character(1),
    id_cbsituacaocontrato_int bigint,
    protesto_str character varying(1),
    standby_automatico_str character varying(1),
    email_automatico_str character varying(1),
    escolhe_usuario_agendamento_str character varying(1),
    recebimento_str character varying(1),
    visualizacao_externa_str character varying(1),
    id_geitemprocesso_int bigint,
    descricao_npcob_web_str character varying(100),
    abre_tela_depois_salvar_str character(1),
    painel_npjur_str character varying(1),
    id_cbvalortipodespesa_int bigint,
    agendamento_str character varying(1),
    agendamento_por_str character varying(1),
    agendamento_dias_int smallint,
    agendamento_agenda_str character varying(5),
    agendamento_unico_str character varying(3),
    situacao_parcela_int integer,
    telefone_str character varying(1),
    situacao_cobranca_str character varying(10),
    painel_jur_npjur_str character varying(1),
    mov_processo_str character varying(1),
    doc_str character varying(255),
    assunto_email_auto_txt text,
    lancamento_unico_str character varying(1),
    lancamento_depende_str character varying(20),
    id_gemotivoinadimplencia_int bigint,
    atualiza_data_contato_manual_str character varying(1) DEFAULT 'N'::character varying,
    apenas_aberto_str character varying(1),
    solic_aju_str character varying(1),
    class_at_str character varying(1),
    at_str character varying(50),
    id_sysatdinamico_int bigint,
    painel_custas_npjur_str character varying(1),
    data_envio_date character varying(1),
    atualiza_data_ultimo_contato_str character varying(1) DEFAULT 'N'::character varying,
    painel_purgacao_str character varying(1),
    contato_alo_str character varying(1),
    atendida_bit bit(1) DEFAULT '0'::"bit" NOT NULL,
    produtiva_bit bit(1) DEFAULT '0'::"bit" NOT NULL,
    cpc_bit bit(1) DEFAULT '0'::"bit" NOT NULL,
    data_evento_bit bit(1) DEFAULT '0'::"bit" NOT NULL,
    id_jutipocontrole integer,
    lanca_movimento_npjur_str character varying(1),
    tipo_protocolo_npjur_bit bit(1),
    classificacao_str character varying(15),
    painel_classificacao_str character varying(1),
    qtde_ocorrencia_follow_int integer,
    horas_blacklist_int integer,
    tp_acio_str character varying(1),
    terceiro_bit bit(1) DEFAULT '0'::"bit" NOT NULL
);

--
-- TOC entry 625 (class 1259 OID 32240)
-- Name: cbsitcontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsitcontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 626 (class 1259 OID 32246)
-- Name: cbsitcontatousuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsitcontatousuario (
    id_cbsitcontato_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    id_geusuario_alt_int bigint,
    ativo_bit bit(1)
);

--
-- TOC entry 627 (class 1259 OID 32251)
-- Name: cbsituacaocontatoemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsituacaocontatoemail (
    id_cbsituacaocontatoemail_int bigint DEFAULT nextval(('"cbsituacaocontatoemail_seq"'::text)::regclass) NOT NULL,
    id_cbsituacaocontato_int bigint,
    id_geusuario_int bigint,
    usuario_int bigint,
    tstamp timestamp with time zone,
    recebe_email_filial_str character varying(1),
    tipo_filial_str character varying(1)
);

--
-- TOC entry 628 (class 1259 OID 32265)
-- Name: cbsituacaocontatoemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsituacaocontatoemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 629 (class 1259 OID 32272)
-- Name: cbsituacaocontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsituacaocontrato (
    id_cbsituacaocontrato_int bigint DEFAULT nextval(('"cbsituacaocontrato_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(1) NOT NULL,
    descricao_str character varying(40),
    acao_str character varying(1),
    com_senha_str character varying(1),
    senha_str character varying(10),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 630 (class 1259 OID 32280)
-- Name: cbsituacaocontrato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsituacaocontrato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 631 (class 1259 OID 32287)
-- Name: cbsituacaocontratohistorico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsituacaocontratohistorico (
    id_cbsituacaocontratohistorico_int bigint DEFAULT nextval(('"cbsituacaocontratohistorico_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_cbsituacaocontrato_old_int bigint,
    queryresponsavel_txt text,
    ipresponsavel_str character varying(50)
);

--
-- TOC entry 632 (class 1259 OID 32301)
-- Name: cbsituacaocontratohistorico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsituacaocontratohistorico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 633 (class 1259 OID 32308)
-- Name: cbsituacaoparcelahistorico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsituacaoparcelahistorico (
    id_cbsituacaoparcelahistorico_int bigint DEFAULT nextval(('"cbsituacaoparcelahistorico_seq"'::text)::regclass) NOT NULL,
    id_cbparcela_int bigint,
    situacao_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    situacao_old_int bigint,
    queryresponsavel_txt text,
    ipresponsavel_str character varying(50)
);

--
-- TOC entry 634 (class 1259 OID 32319)
-- Name: cbsituacaoparcelahistorico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsituacaoparcelahistorico_seq
    START WITH 26
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 635 (class 1259 OID 32326)
-- Name: cbsolicitacaoajuizamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsolicitacaoajuizamento (
    id_cbsolicitacaoajuizamento_int bigint DEFAULT nextval(('"cbsolicitacaoajuizamento_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    data_solicitacao_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 636 (class 1259 OID 32334)
-- Name: cbsolicitacaoajuizamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsolicitacaoajuizamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 637 (class 1259 OID 32342)
-- Name: cbsubformula; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbsubformula (
    id_cbsubformula_int bigint DEFAULT nextval(('"cbsubformula_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_subformula_str character varying(10) NOT NULL,
    unidade_str character varying(20) NOT NULL,
    subformula_str text,
    data_inicio_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    tipo_juros_str character varying(1)
);

--
-- TOC entry 638 (class 1259 OID 32357)
-- Name: cbsubformula_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbsubformula_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 639 (class 1259 OID 32364)
-- Name: cbtipodespesa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipodespesa (
    id_cbtipodespesa_int bigint DEFAULT nextval(('"cbtipodespesa_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint NOT NULL,
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    despesa_reembolso_str character varying(1),
    instcobranca_str character varying(200),
    abreviatura_str character varying(10),
    id_jutipofinan integer,
    codigo_externo_str character varying(5),
    cobrar_cliente_str character varying(1),
    ativo_str character varying(1),
    descricao_externo_str character varying(60),
    descricao_banco_str character varying(60),
    percentual_maximo_desconto_num double precision
);

--
-- TOC entry 640 (class 1259 OID 32372)
-- Name: cbtipodespesa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipodespesa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 641 (class 1259 OID 32379)
-- Name: cbtipodespesamodalidade; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipodespesamodalidade (
    id_cbtipodespesamodalidade_int bigint DEFAULT nextval(('"cbtipodespesamodalide_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(30),
    descricao_str character varying(100),
    faixa_str character varying(1) NOT NULL,
    id_cbtipodespesa_int bigint,
    prioridade_int integer
);

--
-- TOC entry 642 (class 1259 OID 32387)
-- Name: cbtipodespesamodalide_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipodespesamodalide_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 643 (class 1259 OID 32394)
-- Name: cbtipodespesavalida; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipodespesavalida (
    id_cbtipodespesavalida_int bigint DEFAULT nextval('public.cbtipodespesa_seq'::regclass) NOT NULL,
    id_cbtipodespesa_int bigint,
    id_cbtipodespesa_val_int bigint
);

--
-- TOC entry 644 (class 1259 OID 32400)
-- Name: cbtipodespesavalida_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipodespesavalida_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 645 (class 1259 OID 32409)
-- Name: cbtipoestacionamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipoestacionamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 646 (class 1259 OID 32413)
-- Name: cbtipoestacionamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipoestacionamento (
    id_cbtipoestacionamento_int bigint DEFAULT nextval('public.cbtipoestacionamento_seq'::regclass) NOT NULL,
    descricao_str character varying(80),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    codigo_str character varying(20)
);

--
-- TOC entry 647 (class 1259 OID 32422)
-- Name: cbtipogarantia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipogarantia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 648 (class 1259 OID 32429)
-- Name: cbtipogarantia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipogarantia (
    id_cbtipogarantia_int bigint DEFAULT nextval('public.cbtipogarantia_seq'::regclass) NOT NULL,
    descricao_str character varying(80),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    codigo_str character varying(20),
    descricao_caracteristicas_txt text,
    id_gecliente_int bigint
);

--
-- TOC entry 649 (class 1259 OID 32444)
-- Name: cbtipogarantiafiltro; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipogarantiafiltro (
    id_cbtipogarantiafiltro_int bigint DEFAULT nextval(('"cbtipogarantiafiltro_seq"'::text)::regclass) NOT NULL,
    id_cbtipogarantia_int bigint,
    marca_bol boolean,
    modelo_bol boolean,
    chassi_bol boolean,
    ano_fabricacao_bol boolean,
    ano_modelo_bol boolean,
    cor_bol boolean,
    placa_bol boolean,
    renavam_bol boolean,
    valor_bem_bol boolean,
    serie_bol boolean,
    motor_bol boolean,
    combustivel_bol boolean,
    codigo_molicar_bol boolean,
    valor_molicar_bol boolean,
    chave_campo_str character varying(50),
    ativo_str character varying(1)
);

--
-- TOC entry 650 (class 1259 OID 32450)
-- Name: cbtipogarantiafiltro_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipogarantiafiltro_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 651 (class 1259 OID 32457)
-- Name: cbtiponegocio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtiponegocio (
    id_cbtiponegocio_int bigint DEFAULT nextval(('"cbtiponegocio_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(3) NOT NULL,
    descricao_str character varying(40),
    parcelas_num smallint,
    quitacao_str character varying(1),
    dias_quitacao_num smallint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    inclusao_despesa_str character varying(1),
    id_fibanco_int bigint,
    id_ficcbanco_int bigint,
    cnpj_str character varying(20),
    razao_social_str character varying(80),
    id_cbconvenio_int bigint,
    valor_cp_num double precision,
    descricao_npjur_str character varying(50),
    sigla_str character varying(6),
    mostra_parcela_str character varying(1),
    id_gecidade_int bigint,
    inscricao_str character varying(20),
    cgc_str character varying(18),
    cep_str character varying(9),
    endereco2_str character varying(60),
    endereco1_str character varying(60),
    neg_uf_str character varying(2),
    neg_bairro_str character varying(60),
    npjur_id_jupessoa bigint,
    valor_mora_num double precision,
    taxa_ano_str character varying(1)
);

--
-- TOC entry 652 (class 1259 OID 32468)
-- Name: cbtiponegocio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtiponegocio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 653 (class 1259 OID 32474)
-- Name: cbtiponegociocartorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtiponegociocartorio (
    id_cbtiponegociocartorio_int bigint DEFAULT nextval(('"cbtiponegociocartorio_seq"'::text)::regclass) NOT NULL,
    id_gefilial_int bigint NOT NULL,
    id_cbtiponegocio_int bigint NOT NULL,
    id_cbcartorio_int bigint NOT NULL,
    carteira_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 654 (class 1259 OID 32486)
-- Name: cbtiponegociocartorio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtiponegociocartorio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 655 (class 1259 OID 32493)
-- Name: cbtiponegocioimportacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtiponegocioimportacao (
    id_cbtiponegocioimportacao_int bigint DEFAULT nextval(('"cbtiponegocioimportacao_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(10) NOT NULL,
    valor_inicial_str character varying(10),
    valor_final_str character varying(10),
    id_cbtiponegocio_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 656 (class 1259 OID 32499)
-- Name: cbtiponegocioimportacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtiponegocioimportacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 657 (class 1259 OID 32511)
-- Name: cbtipopagamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamento (
    id_cbtipopagamento_int bigint DEFAULT nextval(('"cbtipopagamento_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_pag_str character varying(6) NOT NULL,
    descricao_pag_str character varying(60),
    formula_valorpagar_txt text,
    gera_pagto_str character varying(1),
    qtde_pagto_int integer,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    formula_honorario_txt text,
    inclui_honorario_str character varying(1),
    data_dat date NOT NULL,
    soma_despesa_str character varying(1),
    permite_desconto_str character varying(1),
    campanha_str character varying(1),
    desconto_num double precision,
    atualizacao_monetaria_str character varying(1),
    juros_str character varying(1),
    referencia_juros_str character varying(1),
    id_gefaixaatraso_int bigint,
    parcelas_vencer_str character varying(1),
    desconto_vencer_num double precision,
    origem_desconto_str character varying(1),
    faixas_abaixo_str character varying(1),
    tipo_desconto_str character varying(1),
    desconto_com_senha_str character varying(1),
    senha_desconto_str character varying(10),
    referencia_cp_str character varying(1),
    inclui_permanencia_str character varying(1),
    permanencia_num double precision,
    calculo_acima_str character varying(1),
    id_cbtiponegocio_int bigint,
    gera_depesa_str character varying(1),
    id_cbcartorio_int bigint,
    id_cbtipodespesa_int bigint,
    dias_atraso_despesa_int bigint,
    ativo_str character varying(1),
    formula_comissionamento_txt text,
    decimais_int smallint,
    faixa_parcelas_prazo_str character varying(7),
    entrada_str character varying(1),
    percentual_juros_num double precision,
    percentual_honorario_entrada_num double precision,
    comissao_parcelamento_num double precision,
    parcelas_num smallint,
    id_cbcalculodesconto_int bigint,
    id_cbcalculocomissao_int bigint,
    calcula_por_parcela_str character varying(1),
    entrada_minima_int smallint,
    parametros_ultima_parcela_str character varying(1),
    emite_termo_str character varying(1),
    dias_vencto_int smallint,
    aguarda_aprovacao_str character varying(1),
    parcela_minima_int integer,
    juros_saldo_num double precision,
    honorario_livre_num double precision,
    juros_saldo_divida_num real,
    intervalo_vencto_int smallint,
    tipo_str character varying(1),
    tipo_dias_str character varying(2),
    minim_entrada_demais_int smallint,
    tipo_recebimento_str character varying(1),
    orientacao_tela_str character varying(1),
    parcela_minima_parc_int smallint,
    refinacimaneto_em_dia_str character varying(1),
    juros_saldo_parc_str character varying(1),
    honorario_livre_parc_str character varying(1),
    juros_parcelamento_num double precision,
    agendamento_str character(1),
    aplica_encargos_vincendas_str character varying(1),
    juros_reenvio_str character varying(6),
    inclui_despesa_parcelamento_str character varying(1),
    parcelamento_ajustado_str character(1),
    permite_total_zerado_str character(1),
    codigo_pos_calculo_str text,
    aplica_coeficiente_entrada_str character(1),
    codigo_pos_calculo_bole_str text,
    desconto_parcelamento_str character(1),
    honorario_livre_max_num double precision,
    honorario_livre_principal_str character varying(1),
    calcula_comissao_por_parcela_str character(1),
    recalcula_comis_sobre_total_baixa_str character(1),
    proposta_bit bit(1),
    permite_pular_parcela_bit bit(1),
    faixa_parcelas_senha_str character varying(30),
    sql_chave_xml_txt text,
    aplica_barra_desconto_taxa_bit bit(1),
    direct_proposta_bit bit(1),
    ho_relatorio_str character varying(5),
    calculo_reverso_str character varying(120),
    evita_2x_ho_str character(1),
    sauc_str character varying(1),
    obs_str character varying(500),
    campos_ho_livre_str character varying(100),
    proposta_recalculo_str character varying(1),
    proposta_recalculo_ho_str character varying(1),
    pagou_facil_int bigint
);

--
-- TOC entry 658 (class 1259 OID 32530)
-- Name: cbtipopagamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 659 (class 1259 OID 32542)
-- Name: cbtipopagamentoabat; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentoabat (
    id_cbtipopagamentoabat_int bigint DEFAULT nextval(('"cbtipopagamentoabat_seq"'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    tipo_un_str character varying(20) NOT NULL
);

--
-- TOC entry 660 (class 1259 OID 32551)
-- Name: cbtipopagamentoabat_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentoabat_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 661 (class 1259 OID 32560)
-- Name: cbtipopagamentocampo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentocampo (
    id_cbtipopagamentocampo_int bigint DEFAULT nextval(('"cbtipopagamentocampo_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    campovalido_str text,
    campoinvalido_str text,
    tabela_str character varying(100),
    campo_filtro_str character varying(100)
);

--
-- TOC entry 662 (class 1259 OID 32578)
-- Name: cbtipopagamentocampo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentocampo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 663 (class 1259 OID 32582)
-- Name: cbtipopagamentoestdes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentoestdes (
    id_cbtipopagamentoestdes_int bigint DEFAULT nextval(('"cbtipopagamentoestdes_seq"'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_geuf_int bigint NOT NULL
);

--
-- TOC entry 664 (class 1259 OID 32592)
-- Name: cbtipopagamentoestdes_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentoestdes_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 665 (class 1259 OID 32599)
-- Name: cbtipopagamentoetapa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentoetapa (
    id_cbtipopagamentoetapa_int bigint DEFAULT nextval(('cbtipopagamentoetapa_seq'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_cbetapa_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 666 (class 1259 OID 32610)
-- Name: cbtipopagamentoetapa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentoetapa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 667 (class 1259 OID 32614)
-- Name: cbtipopagamentofilial; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentofilial (
    id_cbtipopagamentofilial_int bigint DEFAULT nextval(('cbtipopagamentofilial_seq'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_gefilial_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 668 (class 1259 OID 32620)
-- Name: cbtipopagamentofilial_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentofilial_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 669 (class 1259 OID 32626)
-- Name: cbtipopagamentoparcela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentoparcela_seq
    START WITH 45
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 670 (class 1259 OID 32637)
-- Name: cbtipopagamentoparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentoparcela (
    id_cbtipopagamentoparcela_int bigint DEFAULT nextval('public.cbtipopagamentoparcela_seq'::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    parcela_inicial_int integer,
    parcela_final_int integer,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 671 (class 1259 OID 32647)
-- Name: cbtipopagamentoparcelamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentoparcelamento (
    id_cbtipopagamentoparcelamento_int integer DEFAULT nextval(('"cbtipopagamentoparcelamento_seq"'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int integer,
    faixa_inicial_int smallint,
    faixa_final_int smallint,
    valor_inicial_num double precision,
    valor_final_num double precision
);

--
-- TOC entry 672 (class 1259 OID 32655)
-- Name: cbtipopagamentoparcelamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentoparcelamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 673 (class 1259 OID 32665)
-- Name: cbtipopagamentoregua_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentoregua_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 674 (class 1259 OID 32678)
-- Name: cbtipopagamentoregua; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentoregua (
    id_cbtipopagamentoregua_int bigint DEFAULT nextval('public.cbtipopagamentoregua_seq'::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_esregua_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 675 (class 1259 OID 32684)
-- Name: cbtipopagamentositdes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentositdes (
    id_cbtipopagamentositdes_int bigint DEFAULT nextval(('"cbtipopagamentositdes_seq"'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_cbsituacaocontrato_int bigint NOT NULL
);

--
-- TOC entry 676 (class 1259 OID 32694)
-- Name: cbtipopagamentositdes_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentositdes_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 677 (class 1259 OID 32700)
-- Name: cbtipopagamentotaxaparc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentotaxaparc (
    id_cbtipopagamentotaxaparc_int bigint DEFAULT nextval(('"cbtipopagamentotaxaparc_seq"'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    parcela_inicial_int integer,
    parcela_final_int integer,
    taxa_num double precision,
    dia_inicial_int integer,
    dia_final_int integer,
    id_esregua_int smallint
);

--
-- TOC entry 678 (class 1259 OID 32706)
-- Name: cbtipopagamentotaxaparc_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentotaxaparc_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 679 (class 1259 OID 32715)
-- Name: cbtipopagamentotipneg; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentotipneg (
    id_cbtipopagamentotipneg_int bigint DEFAULT nextval(('cbtipopagamentotipneg_seq'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_cbtiponegocio_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 680 (class 1259 OID 32721)
-- Name: cbtipopagamentotipneg_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentotipneg_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 681 (class 1259 OID 32730)
-- Name: cbtipopagamentouf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbtipopagamentouf (
    id_cbtipopagamentouf_int bigint DEFAULT nextval(('"cbtipopagamentouf_seq"'::text)::regclass) NOT NULL,
    id_cbtipopagamento_int bigint NOT NULL,
    id_geuf_int bigint NOT NULL,
    id_gecliente_int bigint
);

--
-- TOC entry 682 (class 1259 OID 32741)
-- Name: cbtipopagamentouf_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbtipopagamentouf_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 683 (class 1259 OID 32752)
-- Name: cbunidadevalor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbunidadevalor (
    id_cbunidadevalor_int bigint DEFAULT nextval(('"cbunidadevalor_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_un_str character varying(6) NOT NULL,
    descricao_un_str character varying(30),
    valor_num double precision,
    tipo_un_str character varying(1),
    data_inicio_dat date,
    campo_relacional_str character varying(30),
    tabela_relacional_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    tipo_str character varying(20),
    tabela_alvo_str character varying(30),
    campo_alvo_str character varying(30),
    campo_retorno_str character varying(30),
    condicional_str text,
    outra_condicao_str text
);

--
-- TOC entry 684 (class 1259 OID 32761)
-- Name: cbunidadevalor_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbunidadevalor_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 685 (class 1259 OID 32774)
-- Name: cbvalortipodespesa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbvalortipodespesa (
    id_cbvalortipodespesa_int bigint DEFAULT nextval(('"cbvalortipodespesa_seq"'::text)::regclass) NOT NULL,
    id_cbtipodespesa_int bigint NOT NULL,
    id_cbcartorio_int bigint NOT NULL,
    data_inicio_dat date NOT NULL,
    valor_num double precision
);

--
-- TOC entry 686 (class 1259 OID 32782)
-- Name: cbvalortipodespesa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbvalortipodespesa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 687 (class 1259 OID 32793)
-- Name: cbwhatsapp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cbwhatsapp (
    id_cbwhatsapp_int integer DEFAULT nextval(('"cbwhatsapp_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_geqlcontato_int bigint,
    chat_txt text,
    data_hora_dat timestamp without time zone DEFAULT now(),
    ativo_str character varying(1) DEFAULT 'S'::character varying NOT NULL
);

--
-- TOC entry 688 (class 1259 OID 32804)
-- Name: cbwhatsapp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cbwhatsapp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 689 (class 1259 OID 32817)
-- Name: cnt; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cnt (
    id_cnt bigint DEFAULT nextval(('cnt_seq'::text)::regclass) NOT NULL,
    ncnt character varying(60) NOT NULL,
    clnt character varying(10),
    qtn character varying(10),
    dtg character varying(20),
    hrg character varying(20),
    usr character varying(60),
    dtc character varying(20),
    hrc character varying(20)
);

--
-- TOC entry 690 (class 1259 OID 32823)
-- Name: cnt_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cnt_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 691 (class 1259 OID 32827)
-- Name: connectby_int; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.connectby_int (
    keyid integer,
    parent_keyid integer
);

--
-- TOC entry 692 (class 1259 OID 32841)
-- Name: connectby_text; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.connectby_text (
    keyid text,
    parent_keyid text,
    pos integer
);

--
-- TOC entry 693 (class 1259 OID 32857)
-- Name: contrato_abs; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.contrato_abs (
    cpf_str character varying(20),
    abs_cpf_str character varying(20),
    id_cbcontrato_int bigint,
    tstamp timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 694 (class 1259 OID 32866)
-- Name: coringacbcontratomd2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.coringacbcontratomd2 (
    id_coringacbcontratomd2_int bigint NOT NULL,
    id_cbcontrato_int bigint,
    coringa1_txt text,
    coringa2_txt text,
    coringa3_txt text,
    coringa4_txt text,
    coringa5_txt text,
    coringa6_txt text,
    coringa7_txt text,
    coringa8_txt text,
    coringa9_txt text,
    coringa10_txt text,
    coringa11_txt text,
    coringa12_txt text,
    coringa13_txt text,
    coringa14_txt text,
    coringa15_txt text,
    coringa16_txt text,
    coringa17_txt text,
    coringa18_txt text,
    coringa19_txt text,
    coringa20_txt text,
    coringa21_txt text,
    coringa22_txt text,
    coringa23_txt text,
    coringa24_txt text,
    coringa25_txt text,
    coringa26_txt text,
    coringa27_txt text,
    coringa28_txt text,
    coringa29_txt text,
    coringa30_txt text,
    coringa31_txt text,
    coringa32_txt text,
    coringa33_txt text,
    coringa34_txt text,
    coringa35_txt text,
    coringa36_txt text,
    coringa37_txt text,
    coringa38_txt text,
    coringa39_txt text,
    coringa40_txt text,
    coringa41_txt text,
    coringa42_txt text,
    coringa43_txt text,
    coringa44_txt text,
    coringa45_txt text,
    coringa46_txt text,
    coringa47_txt text,
    coringa48_txt text,
    coringa49_txt text,
    coringa50_txt text,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 695 (class 1259 OID 32883)
-- Name: coringacbcontratomd2_id_coringacbcontratomd2_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.coringacbcontratomd2_id_coringacbcontratomd2_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12052 (class 0 OID 0)
-- Dependencies: 695
-- Name: coringacbcontratomd2_id_coringacbcontratomd2_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.coringacbcontratomd2_id_coringacbcontratomd2_int_seq OWNED BY public.coringacbcontratomd2.id_coringacbcontratomd2_int;

--
-- TOC entry 696 (class 1259 OID 32896)
-- Name: coringacbparcelamd2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.coringacbparcelamd2 (
    id_coringacbparcelamd2_int bigint NOT NULL,
    id_cbparcela_int bigint,
    coringa1_txt text,
    coringa2_txt text,
    coringa3_txt text,
    coringa4_txt text,
    coringa5_txt text,
    coringa6_txt text,
    coringa7_txt text,
    coringa8_txt text,
    coringa9_txt text,
    coringa10_txt text,
    coringa11_txt text,
    coringa12_txt text,
    coringa13_txt text,
    coringa14_txt text,
    coringa15_txt text,
    coringa16_txt text,
    coringa17_txt text,
    coringa18_txt text,
    coringa19_txt text,
    coringa20_txt text,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 697 (class 1259 OID 32908)
-- Name: coringacbparcelamd2_id_coringacbparcelamd2_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.coringacbparcelamd2_id_coringacbparcelamd2_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12053 (class 0 OID 0)
-- Dependencies: 697
-- Name: coringacbparcelamd2_id_coringacbparcelamd2_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.coringacbparcelamd2_id_coringacbparcelamd2_int_seq OWNED BY public.coringacbparcelamd2.id_coringacbparcelamd2_int;

--
-- TOC entry 698 (class 1259 OID 32924)
-- Name: coringageqlcontatomd2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.coringageqlcontatomd2 (
    id_coringageqlcontatomd2_int bigint NOT NULL,
    id_geqlcontato_int bigint,
    coringa1_txt text,
    coringa2_txt text,
    coringa3_txt text,
    coringa4_txt text,
    coringa5_txt text,
    coringa6_txt text,
    coringa7_txt text,
    coringa8_txt text,
    coringa9_txt text,
    coringa10_txt text,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 699 (class 1259 OID 32936)
-- Name: coringageqlcontatomd2_id_coringageqlcontatomd2_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.coringageqlcontatomd2_id_coringageqlcontatomd2_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12054 (class 0 OID 0)
-- Dependencies: 699
-- Name: coringageqlcontatomd2_id_coringageqlcontatomd2_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.coringageqlcontatomd2_id_coringageqlcontatomd2_int_seq OWNED BY public.coringageqlcontatomd2.id_coringageqlcontatomd2_int;

--
-- TOC entry 700 (class 1259 OID 32946)
-- Name: coringageqlemailmd2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.coringageqlemailmd2 (
    id_coringageqlemailmd2_int bigint NOT NULL,
    id_geqlemail_int bigint,
    coringa1_txt text,
    coringa2_txt text,
    coringa3_txt text,
    coringa4_txt text,
    coringa5_txt text,
    coringa6_txt text,
    coringa7_txt text,
    coringa8_txt text,
    coringa9_txt text,
    coringa10_txt text,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 701 (class 1259 OID 32956)
-- Name: coringageqlemailmd2_id_coringageqlemailmd2_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.coringageqlemailmd2_id_coringageqlemailmd2_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12055 (class 0 OID 0)
-- Dependencies: 701
-- Name: coringageqlemailmd2_id_coringageqlemailmd2_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.coringageqlemailmd2_id_coringageqlemailmd2_int_seq OWNED BY public.coringageqlemailmd2.id_coringageqlemailmd2_int;

--
-- TOC entry 702 (class 1259 OID 32976)
-- Name: coringageqlenderecomd2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.coringageqlenderecomd2 (
    id_coringageqlenderecomd2_int bigint NOT NULL,
    id_geqlendereco_int bigint,
    coringa1_txt text,
    coringa2_txt text,
    coringa3_txt text,
    coringa4_txt text,
    coringa5_txt text,
    coringa6_txt text,
    coringa7_txt text,
    coringa8_txt text,
    coringa9_txt text,
    coringa10_txt text,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 703 (class 1259 OID 32990)
-- Name: coringageqlenderecomd2_id_coringageqlenderecomd2_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.coringageqlenderecomd2_id_coringageqlenderecomd2_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12056 (class 0 OID 0)
-- Dependencies: 703
-- Name: coringageqlenderecomd2_id_coringageqlenderecomd2_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.coringageqlenderecomd2_id_coringageqlenderecomd2_int_seq OWNED BY public.coringageqlenderecomd2.id_coringageqlenderecomd2_int;

--
-- TOC entry 704 (class 1259 OID 32999)
-- Name: cpf_pesqui; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cpf_pesqui (
    cpf text
);

--
-- TOC entry 705 (class 1259 OID 33009)
-- Name: ct; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ct (
    id integer,
    rowclass text,
    rowid text,
    attribute text,
    val text
);

--
-- TOC entry 706 (class 1259 OID 33020)
-- Name: cth; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.cth (
    id integer NOT NULL,
    rowid text,
    rowdt timestamp without time zone,
    attribute text,
    val text
);

--
-- TOC entry 707 (class 1259 OID 33035)
-- Name: cth_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.cth_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12057 (class 0 OID 0)
-- Dependencies: 707
-- Name: cth_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.cth_id_seq OWNED BY public.cth.id;

--
-- TOC entry 708 (class 1259 OID 33050)
-- Name: custascifratmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.custascifratmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_contrato_str character varying(30),
    geempresa_cgc_str character varying(18),
    geempresa_codigo_str character varying(7),
    parcela_int bigint,
    data_vencimento_dat date,
    data_lancamento_dat date,
    valor_num double precision,
    gefilial_codigo_str character varying(40),
    cbtipodespesa_codigo_int bigint,
    data_movimentacao_dat date,
    sequencia_int bigint,
    cbcontrato_nome_str character varying(60)
);

--
-- TOC entry 709 (class 1259 OID 33062)
-- Name: dba_pid; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.dba_pid AS
 SELECT pg_stat_get_backend_pid(s.backendid) AS procpid,
    pg_stat_get_backend_activity(s.backendid) AS current_query
   FROM ( SELECT pg_stat_get_backend_idset() AS backendid) s;

--
-- TOC entry 710 (class 1259 OID 33072)
-- Name: dba_locks; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.dba_locks AS
 SELECT DISTINCT dba_pid.procpid AS pids,
    l.mode AS modo,
    dba_pid.current_query AS query
   FROM public.dba_pid,
    pg_locks l
  WHERE (l.pid = dba_pid.procpid)
  ORDER BY dba_pid.procpid, l.mode, dba_pid.current_query;

--
-- TOC entry 711 (class 1259 OID 33078)
-- Name: desbloqueio_tempblocklist_view_dw; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.desbloqueio_tempblocklist_view_dw (
    id_geqlcontato_int bigint
);

--
-- TOC entry 712 (class 1259 OID 33093)
-- Name: devpanamtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.devpanamtmp (
    registro_int bigint,
    cliente_str character varying(60),
    cnpj_str character varying(14),
    num_contrato_str character varying(12),
    regional_int character varying(29),
    cod_produto_str character varying(4),
    cod_empresa_str character varying(3),
    empresa_str character varying(34),
    dt_finan_dat date,
    brancos1_det_str character varying(169),
    dt_envio_dat date,
    dt_retorno_dat date,
    brancos2_det_str character varying(55),
    sequencia_int bigint,
    motivo_devolucao_int smallint,
    motivo_devolucao_str character varying(30)
);

--
-- TOC entry 713 (class 1259 OID 33106)
-- Name: devpantmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.devpantmp (
    registro_int bigint,
    cliente_str character varying(60),
    cnpj_str character varying(14),
    num_contrato_str character varying(12),
    regional_int character varying(29),
    cod_produto_str character varying(4),
    cod_empresa_str character varying(3),
    empresa_str character varying(34),
    dt_finan_dat date,
    brancos1_det_str character varying(169),
    dt_envio_dat date,
    dt_retorno_dat date,
    motivo_devolucao_int smallint,
    brancos2_det_str character varying(55),
    sequencia_int bigint,
    motivo_devolucao_str character varying(30)
);

--
-- TOC entry 714 (class 1259 OID 33115)
-- Name: es015tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es015tmp (
    chave_str character varying(20),
    registro_int bigint,
    nome_banco character varying(20),
    data_arquivo date,
    hora_arquivo character varying(6),
    empresa character varying(3),
    contrato character varying(30),
    codigo_parcela bigint,
    data_ocorrencia date,
    codigo_ocorrencia character varying(4),
    complemento_str character varying(1000),
    data_complementar date,
    codigo_despesa character varying(9),
    valor_num double precision,
    endereco_str character varying(45),
    bairro_str character varying(20),
    cep_str character varying(9),
    cidade_str character varying(20),
    estado_str character varying(2),
    telefone_str character varying(20),
    valor_deposito_num double precision,
    codigo_acao bigint,
    comarca_str bigint,
    foro_regional_str character varying(3),
    vara_str character varying(4),
    num_processo_str character varying(30),
    andamento_str character varying(3),
    tribunal_str character varying(4),
    camara_str character varying(3),
    num_recurso_str character varying(30),
    observacao_str character varying(200)
);

--
-- TOC entry 715 (class 1259 OID 33122)
-- Name: es026tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es026tmp (
    chave_str character varying(20),
    data_movimento date,
    contrato_str character varying(30),
    parcela_int bigint,
    codigo_ocorrencia_int smallint,
    descricao_ocorrencia_str character varying(100)
);

--
-- TOC entry 716 (class 1259 OID 33129)
-- Name: es027tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es027tmp (
    chave_str character varying(20),
    id_cbitembordero_int bigint,
    parcelaatual_str character varying(10),
    pago_atual_str character varying(1),
    pago_entrada_str character varying(1),
    pago_primeira_str character varying(1)
);

--
-- TOC entry 717 (class 1259 OID 33136)
-- Name: es044_2tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es044_2tmp (
    chave_str character varying(20),
    data_movimento date,
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    uf_rg_str character varying(2),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    tipo_pessoa_str character varying(1),
    sexo_str character varying(1),
    email_str character varying(50),
    data_alteracao_dat date,
    codigo_empresa_str character(7),
    dt_nascimento_dat character varying(13),
    dt_exp_rg_dat character varying(13),
    id_cbtiponegocio_int bigint,
    numero_str character varying(7),
    numero_trabalho_str character varying(7)
);

--
-- TOC entry 718 (class 1259 OID 33145)
-- Name: es044tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es044tmp (
    chave_str character varying(20),
    data_movimento date,
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    nome_str character varying(60),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    uf_rg_str character varying(2),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_fax_str character varying(5),
    telefone_fax_str character varying(20),
    local_trabalho_str character varying(60),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    tipo_pessoa_str character varying(1),
    sexo_str character varying(1),
    email_str character varying(50),
    data_alteracao_dat date,
    codigo_empresa_str character(7),
    dt_nascimento_dat character varying(13),
    dt_exp_rg_dat character varying(13),
    id_cbtiponegocio_int bigint,
    numero_str character varying(7),
    numero_trabalho_str character varying(7)
);

--
-- TOC entry 719 (class 1259 OID 33154)
-- Name: es059tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es059tmp (
    chave_str character varying(20),
    registro_int bigint,
    data_arquivo date,
    hora_arquivo character varying(6),
    contrato character varying(30),
    data_ocorrencia date,
    codigo_ocorrencia character varying(6)
);

--
-- TOC entry 720 (class 1259 OID 33163)
-- Name: es120select; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es120select (
    chave_str character varying(20),
    contrato_str character varying(30)
);

--
-- TOC entry 721 (class 1259 OID 33170)
-- Name: es307_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.es307_seq
    START WITH 1046
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 722 (class 1259 OID 33180)
-- Name: es_blocklist_desconhece_bloqueados; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es_blocklist_desconhece_bloqueados (
    contato_str character varying NOT NULL,
    tstamp timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    cpf_str character varying(20),
    id_geqlcliente_int bigint
);

--
-- TOC entry 723 (class 1259 OID 33204)
-- Name: es_telefone_suspeito_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es_telefone_suspeito_386 (
    contato_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 724 (class 1259 OID 33224)
-- Name: es_telefone_suspeito_386_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es_telefone_suspeito_386_log (
    contato_str character varying,
    tstamp timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    carteira smallint,
    contrato_str character varying,
    id_geqlcontato_int bigint,
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    classificacao_str character varying,
    tabela_origem_str character varying,
    id_geqlendereco_int bigint,
    id_geusuario_int bigint,
    observacao_str character varying,
    ramal_str character varying,
    nome_contato_str character varying,
    cpf_str character varying,
    rg_str character varying,
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone,
    id_geqltratamentocontato_int bigint,
    id_geusuario_inclusao_int integer,
    id_geqlcontrato_int bigint,
    excluido_bit bit(1),
    contato_antigo_str character varying,
    score bigint,
    tipo_pessoa_str character varying,
    whatsapp_str character varying,
    trava_feriado_str character varying,
    id_gecliente_original_int bigint,
    motivo_str character varying,
    score_int smallint,
    data_score_dat date,
    id_pessoa_telefone_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp without time zone,
    tstamp_mdm_alteracao timestamp without time zone,
    ranking_lemit_int integer,
    data_alteracao_ranking_dat timestamp without time zone,
    score_lemit_int integer,
    data_alteracao_score_dat timestamp without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone
);

--
-- TOC entry 725 (class 1259 OID 33241)
-- Name: es_telefone_suspeito_bloqueados; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es_telefone_suspeito_bloqueados (
    contato_str character varying NOT NULL,
    tstamp timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 726 (class 1259 OID 33260)
-- Name: es_telefone_suspeito_cpc_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.es_telefone_suspeito_cpc_386 (
    contato_str character varying,
    carteira_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 727 (class 1259 OID 33279)
-- Name: esacordo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esacordo (
    id_gecliente_int bigint,
    acordo_int integer
);

--
-- TOC entry 728 (class 1259 OID 33293)
-- Name: esagenciabbtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esagenciabbtmp (
    chave_str character varying(20),
    agencia_str character varying(10),
    ordem_str character varying(5)
);

--
-- TOC entry 729 (class 1259 OID 33300)
-- Name: esagenciabradesco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esagenciabradesco (
    id_esagenciabradesco_int bigint DEFAULT nextval(('"esagenciabradesco_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(7) NOT NULL,
    nome_str character varying(50),
    gerente_str character varying(30),
    fax_str character varying(15),
    email_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 730 (class 1259 OID 33312)
-- Name: esagenciabradesco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esagenciabradesco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 731 (class 1259 OID 33318)
-- Name: esagendamentofidelizado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esagendamentofidelizado (
    id_esagendamentofidelizado_int bigint DEFAULT nextval(('"esagendamentofidelizado_seq"'::text)::regclass) NOT NULL,
    discador_str character varying(10) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_cbsitcontato_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    login_str character varying(30) NOT NULL,
    outcome_str character varying(30) NOT NULL,
    datahora_tim timestamp without time zone,
    id_geqlcontato_int bigint NOT NULL,
    contato_str character varying(20) NOT NULL,
    tstamp timestamp without time zone
);

--
-- TOC entry 732 (class 1259 OID 33333)
-- Name: esagendamentofidelizado_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esagendamentofidelizado_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 733 (class 1259 OID 33339)
-- Name: esaltitudemsgerror; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esaltitudemsgerror (
    cod_int bigint,
    desc_str character varying,
    grupo_str character varying,
    responsavel_str character varying,
    amigavel_str character varying
);

--
-- TOC entry 734 (class 1259 OID 33353)
-- Name: esbancoeventos; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esbancoeventos (
    id_esbancoeventos_int bigint DEFAULT nextval(('esbancoeventos_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(80)
);

--
-- TOC entry 735 (class 1259 OID 33361)
-- Name: esbancoeventos_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esbancoeventos_seq
    START WITH 446
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 736 (class 1259 OID 33371)
-- Name: esbancofases; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esbancofases (
    id_esbancofases_int bigint DEFAULT nextval(('esbancofases_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(80)
);

--
-- TOC entry 737 (class 1259 OID 33381)
-- Name: esbancofases_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esbancofases_seq
    START WITH 20
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 738 (class 1259 OID 33389)
-- Name: esbatimentocifratmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esbatimentocifratmp (
    id_cbcontrato_int bigint,
    situacao_contrato_str character varying(60),
    data_pre_distrib_dat character varying(10)
);

--
-- TOC entry 739 (class 1259 OID 33398)
-- Name: esboletoincon; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esboletoincon (
    id_cbitembordero_int bigint NOT NULL,
    id_cbbordero_int bigint NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_cbparcela_int bigint,
    parcela_int bigint,
    vencimento_dat date,
    emissao_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    nosso_numero_str character varying(30),
    cod_barra_str character varying(200),
    linha_digitavel_str character varying(60),
    dv_int character varying(2),
    parcelamento_str character varying(7),
    data_envio_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    cbitembordero_int bigint,
    enviado_str character varying(1),
    quitacao_str character varying(1),
    status_str character varying(2),
    id_gecliente_int bigint,
    principal_original_num double precision,
    perc_desc_num double precision
);

--
-- TOC entry 740 (class 1259 OID 33409)
-- Name: escidadeferiado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.escidadeferiado (
    id_escidadeferiado_int bigint DEFAULT nextval(('escidadeferiado_seq'::text)::regclass) NOT NULL,
    data_feriado_dat date,
    municipio_str character varying(100),
    cep_inicial_str character varying(8),
    cep_final_str character varying(8),
    tstamp timestamp without time zone,
    id_geusuario_int bigint,
    uf_str character varying(2)
);

--
-- TOC entry 741 (class 1259 OID 33417)
-- Name: escomissaobb; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.escomissaobb (
    id_escomissaobb_int bigint DEFAULT nextval(('escomissaobb_seq'::text)::regclass) NOT NULL,
    data_dat date,
    produto_int bigint,
    modalidade_int smallint,
    agencia_int smallint,
    contrato_int bigint,
    numero_resumo_int integer,
    numero_comissao_int integer,
    data_recebimento_dat date,
    valor_recebimento_num double precision,
    valor_comissao_num double precision,
    arquivo_str character varying(20),
    sequencial_int character varying(20),
    id_cbdistribuidorcliente_int bigint,
    id_geempresa_int bigint
);

--
-- TOC entry 742 (class 1259 OID 33427)
-- Name: escomissaobb_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.escomissaobb_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 743 (class 1259 OID 33431)
-- Name: escontratofinaustria; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.escontratofinaustria (
    id_escontratofinaustria_int bigint DEFAULT nextval(('"escontratofinaustria_seq"'::text)::regclass) NOT NULL,
    contrato_str character varying(30),
    carteira_int integer,
    parcela_int bigint,
    vencimento_dat date,
    situacao_str character varying(1),
    data_pre_distr_dat date,
    filial_int integer,
    cpf_str character varying(20),
    nome_str character varying(40),
    valor_parcela_num double precision,
    valor_montante_num double precision,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone
);

--
-- TOC entry 744 (class 1259 OID 33437)
-- Name: escontratofinaustria_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.escontratofinaustria_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 745 (class 1259 OID 33446)
-- Name: escontratoitau; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.escontratoitau (
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_gecliente_int bigint,
    data_processamento date,
    contrato_str character varying(15),
    tipo_arquivo_str character varying(20),
    nome_arquivo_str character varying(30),
    data_arquivo_str date,
    status_registro character varying(2),
    importado_str character varying(1),
    tstamp timestamp with time zone,
    codigo_operacao_str character varying(5),
    cpf_str character varying(15)
);

--
-- TOC entry 746 (class 1259 OID 33459)
-- Name: escontrolefilaaspect; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.escontrolefilaaspect (
    id_cbcontrato_int bigint,
    datahora_geracaofila_tim timestamp with time zone,
    id_cbsit_geracaofila_int bigint,
    datahora_entradabl_tim timestamp without time zone,
    id_cbsit_entradabl_int bigint,
    datahora_saidabl_tim timestamp without time zone,
    id_cbsit_saidabl_int bigint,
    nomecampanha character varying,
    nomecampanhaativa character varying,
    codfila_str character varying,
    id_geusuario_int bigint,
    datafila_dat text,
    id_gecliente_int integer,
    desc_cbsit_geracaofila_str character varying(40),
    tela_str character varying,
    inconsistencia_txt text,
    desc_inconsistencia_txt text,
    id_situacoes_contrato_str character varying,
    desc_situacoes_contrato_str character varying,
    situacoes_parcela_str character varying,
    id_scores_str character varying,
    desc_scores_str character varying,
    classificacoes_str character varying,
    id_tipos_negocio_str character varying,
    desc_tipos_negocio_str character varying,
    aplica_grupo_str character varying,
    id_tipos_fone_str character varying,
    desc_tipos_fone_str character varying,
    id_etapas_str character varying,
    desc_etapas_str character varying,
    prioridade_origem_str character varying,
    sexcecao character varying,
    data_inicial_tratamento_str character varying,
    data_final_tratamento_str character varying,
    query_tratados_str character varying,
    apenas_fones_tratados_str character varying,
    telefone1 text,
    telefone2 text,
    telefone3 text,
    telefone4 text,
    telefone5 text,
    telefone6 text,
    telefone7 text,
    telefone8 text,
    telefone9 text,
    telefone10 text,
    classtelefone1 text,
    classtelefone2 text,
    classtelefone3 text,
    classtelefone4 text,
    classtelefone5 text,
    classtelefone6 text,
    classtelefone7 text,
    classtelefone8 text,
    classtelefone9 text,
    classtelefone10 text,
    tipotelefone1 text,
    tipotelefone2 text,
    tipotelefone3 text,
    tipotelefone4 text,
    tipotelefone5 text,
    tipotelefone6 text,
    tipotelefone7 text,
    tipotelefone8 text,
    tipotelefone9 text,
    tipotelefone10 text,
    score1 text,
    score2 text,
    score3 text,
    score4 text,
    score5 text,
    score6 text,
    score7 text,
    score8 text,
    score9 text,
    score10 text,
    origem1 text,
    origem2 text,
    origem3 text,
    origem4 text,
    origem5 text,
    origem6 text,
    origem7 text,
    origem8 text,
    origem9 text,
    origem10 text,
    tratamento1 text,
    tratamento2 text,
    tratamento3 text,
    tratamento4 text,
    tratamento5 text,
    tratamento6 text,
    tratamento7 text,
    tratamento8 text,
    tratamento9 text,
    tratamento10 text,
    idtn text,
    id text,
    nome text,
    contrato text,
    cpf text,
    diasematraso text,
    faixaatraso text,
    produto text,
    etapa text,
    datadistrib text,
    datahoratelefonia text,
    statustelefonia text,
    situacao text,
    outcome text,
    codprocessamento text,
    coringa1 text,
    coringa2 text,
    coringa3 text,
    coringa4 text,
    coringa5 text,
    tipopessoa text,
    uf text,
    valororiginal text,
    saldopagar text,
    cidade text,
    datavencimento text,
    valormontante text,
    valorematraso text,
    parcela text,
    ultimopagto text,
    datavencto text,
    mstatus text,
    cbtime text,
    cbnum text,
    cbphone text,
    owneragend text,
    ddd character varying
);

--
-- TOC entry 747 (class 1259 OID 33477)
-- Name: escontrolelimpafilaaspect; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.escontrolelimpafilaaspect (
    id_escontrolelimpafilaaspect_int bigint DEFAULT nextval(('"escontrolelimpafilaaspect_seq"'::text)::regclass) NOT NULL,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 748 (class 1259 OID 33488)
-- Name: escontrolelimpafilaaspect_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.escontrolelimpafilaaspect_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 749 (class 1259 OID 33492)
-- Name: esctrlerroalt; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esctrlerroalt (
    id_esctrlerroalt_int bigint DEFAULT nextval(('"esctrlerroalt_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    comandoocx_str character varying(60),
    retornoocx_str character varying(60),
    desctentativa_str character varying(1000),
    ip_str character varying(60),
    login_str character varying(20),
    ramal_str character varying(10),
    campanha_str character varying(60),
    caminholog_str character varying(100),
    versaonpcob_str character varying(20),
    versaoocx_str character varying(20),
    tstamp timestamp without time zone,
    last_error_str text,
    last_error_number_int bigint,
    exibe_msg_str character varying(1)
);

--
-- TOC entry 750 (class 1259 OID 33507)
-- Name: esctrlerroalt_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esctrlerroalt_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 751 (class 1259 OID 33513)
-- Name: esdistribsenhavw; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esdistribsenhavw (
    id_esdistribsenhavw_int bigint DEFAULT nextval(('esdistribsenhavw_seq'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_essenhavw_int bigint,
    data_predistrib_dat date,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 752 (class 1259 OID 33528)
-- Name: esdistribsenhavw_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esdistribsenhavw_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 753 (class 1259 OID 33534)
-- Name: esdocfisico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esdocfisico (
    id_esdocfisico_int bigint DEFAULT nextval(('"esdocfisico_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    data_dat date,
    id_cbdespesa_int bigint NOT NULL,
    retorno_dat date,
    envio_dat date,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    id_cbparcela_int bigint,
    arquivo_envio_str character varying(100),
    arquivo_ret_str character varying(200)
);

--
-- TOC entry 754 (class 1259 OID 33550)
-- Name: esdocfisico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esdocfisico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 755 (class 1259 OID 33552)
-- Name: esestadotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esestadotmp (
    chave_str character varying(20),
    estado_str character varying(2),
    ordem_str character varying(5)
);

--
-- TOC entry 756 (class 1259 OID 33557)
-- Name: esfechamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esfechamento (
    id_esfechamento_int bigint DEFAULT nextval(('esfechamento_seq'::text)::regclass) NOT NULL,
    data_dat date,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    saldo_devedor_num double precision,
    saldo_pdd_num double precision,
    faixa_pdd_str character varying(1)
);

--
-- TOC entry 757 (class 1259 OID 33563)
-- Name: esfechamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esfechamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 758 (class 1259 OID 33565)
-- Name: esgeracaoblcklist; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esgeracaoblcklist (
    id_esgeracaoblcklist_int bigint DEFAULT nextval(('"esgeracaoblcklist_seq"'::text)::regclass) NOT NULL,
    datahota_inicio_tim timestamp without time zone,
    datahora_fim_tim timestamp without time zone,
    status_str character varying(500),
    id_geusuario_int bigint,
    ip_str character varying(60),
    campanha_str character varying(30)
);

--
-- TOC entry 759 (class 1259 OID 33574)
-- Name: esgeracaoblcklist_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esgeracaoblcklist_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 760 (class 1259 OID 33582)
-- Name: eshonda199; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.eshonda199 (
    id_eshonda199_int bigint DEFAULT nextval(('"eshonda199_seq"'::text)::regclass) NOT NULL,
    tipo_negocio_str character varying(5),
    contrato_str character varying(30)
);

--
-- TOC entry 761 (class 1259 OID 33588)
-- Name: eshonda199_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.eshonda199_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 762 (class 1259 OID 33603)
-- Name: esinstrucao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esinstrucao (
    id_esinstrucao_int bigint DEFAULT nextval(('esinstrucao_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_cbdistribuidorcliente_int bigint,
    data_dat date,
    codigo_int smallint,
    descricao_str text,
    situacao_str character varying(7)
);

--
-- TOC entry 763 (class 1259 OID 33614)
-- Name: esinstrucao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esinstrucao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 764 (class 1259 OID 33622)
-- Name: esligacaoinbound_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esligacaoinbound_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 765 (class 1259 OID 33631)
-- Name: eslogarquivoblacklist; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.eslogarquivoblacklist (
    id_eslogarquivoblacklist_int bigint DEFAULT nextval(('"eslogarquivoblacklist_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_cbsituacaocontrato_int bigint,
    tstamp timestamp without time zone,
    linha_txt text,
    data_final_tim timestamp without time zone,
    comando_d_str character varying(1),
    acocunt_str character varying(30),
    acao_str character varying(1)
);

--
-- TOC entry 766 (class 1259 OID 33646)
-- Name: eslogarquivoblacklist_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.eslogarquivoblacklist_seq
    START WITH 874575
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 767 (class 1259 OID 33658)
-- Name: eslogattachgen; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.eslogattachgen (
    id_eslogattachgen_int bigint DEFAULT nextval(('"eslogattachgen_seq"'::text)::regclass) NOT NULL,
    agente_str character varying(50),
    conid_str character varying(100),
    codigo_str character varying(50),
    valor_str character varying(50),
    tstamp timestamp without time zone,
    retorno_str character varying(10)
);

--
-- TOC entry 768 (class 1259 OID 33670)
-- Name: eslogattachgen_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.eslogattachgen_seq
    START WITH 51
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 769 (class 1259 OID 33679)
-- Name: eslogconsultamdm; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.eslogconsultamdm (
    id_eslogconsultamdm_int bigint NOT NULL,
    usuario_str character varying(50),
    funcao_str character varying(50),
    id_gecliente_int bigint,
    datahorainicial_tstamp timestamp(0) without time zone,
    datahorafinal_tstamp timestamp(0) without time zone
);

--
-- TOC entry 770 (class 1259 OID 33684)
-- Name: eslogconsultamdm_id_eslogconsultamdm_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.eslogconsultamdm_id_eslogconsultamdm_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12058 (class 0 OID 0)
-- Dependencies: 770
-- Name: eslogconsultamdm_id_eslogconsultamdm_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.eslogconsultamdm_id_eslogconsultamdm_int_seq OWNED BY public.eslogconsultamdm.id_eslogconsultamdm_int;

--
-- TOC entry 771 (class 1259 OID 33698)
-- Name: esmanutencaofila; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esmanutencaofila (
    chave_str character varying(30),
    campanha_str character varying(60),
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbsituacaocontrato_int bigint,
    chavecontato_str character varying(20)
);

--
-- TOC entry 772 (class 1259 OID 33712)
-- Name: esnumeracaoacordo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esnumeracaoacordo (
    id_gecliente_int bigint,
    acordo_int integer
);

--
-- TOC entry 773 (class 1259 OID 33723)
-- Name: espagoufacil; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.espagoufacil (
    id_espagoufacil_int bigint DEFAULT nextval(('"espagoufacil_seq"'::text)::regclass) NOT NULL,
    cpf_str character varying(20),
    nome_str character varying(100),
    situacao_str character varying(1),
    tstamp timestamp without time zone,
    pj_pf_str character varying(1),
    id_gecliente_int bigint,
    cpf_tratado_int bigint,
    id_cbtiponegocio_int bigint
);

--
-- TOC entry 774 (class 1259 OID 33739)
-- Name: espreajuizamentoimporta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.espreajuizamentoimporta (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_cbtiponegocio_int bigint,
    tipo_neg_str character varying(10),
    contrato_str character varying(255),
    critica_str character varying(255),
    parcela_int integer
);

--
-- TOC entry 775 (class 1259 OID 33748)
-- Name: espreajuizamentotabelavalor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.espreajuizamentotabelavalor (
    categoria_str character varying(255),
    marca_str character varying(255),
    modelo_str character varying(255),
    versao_str character varying(255),
    ano_fabricacao_ini_dat character varying(255),
    ano_fabricacao_fin_dat character varying(255),
    ano_modelo_dat character varying(255),
    valor_bem_num double precision,
    acessorio_str character varying(255)
);

--
-- TOC entry 776 (class 1259 OID 33758)
-- Name: esproposta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esproposta (
    id_esproposta_int bigint DEFAULT nextval(('"esproposta_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint NOT NULL,
    id_cbsitcontato_int bigint NOT NULL,
    data_solicitacao_dat timestamp with time zone,
    data_envio_dat timestamp with time zone,
    proposta_cliente_str character varying(1000),
    garantia_str character varying(1000),
    parecer_escritorio_str character varying(1000),
    informacao_adicional_str character varying(1000),
    detalhe_acao_str character varying(1000),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    email_str character varying(1000),
    valor_mercado_num double precision,
    debito_num double precision
);

--
-- TOC entry 777 (class 1259 OID 33771)
-- Name: esproposta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esproposta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 778 (class 1259 OID 33773)
-- Name: espropostabb; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.espropostabb (
    id_espropostabb_int bigint DEFAULT nextval(('espropostabb_seq'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int smallint,
    valor_parcela_num double precision
);

--
-- TOC entry 779 (class 1259 OID 33782)
-- Name: espropostabb_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.espropostabb_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 780 (class 1259 OID 33784)
-- Name: espropostatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.espropostatmp (
    chave_str character varying(30),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int smallint,
    id_cbcobrancaautomatica_int bigint,
    id_cbtipopagamento_int bigint,
    principal_num double precision,
    juros_num double precision,
    total_num double precision,
    data_vencimento date,
    honorarios_num real
);

--
-- TOC entry 781 (class 1259 OID 33799)
-- Name: esregua; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esregua (
    id_esregua_int bigint DEFAULT nextval(('"esregua_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint,
    dia_inicial_int bigint,
    dia_final_int bigint,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    id_gefilial_int bigint,
    abrev_str character varying(6),
    descricao_str character varying(60),
    percentual_vista_num double precision,
    percentual_prazo_num double precision,
    faixa_percentual_vista_str character varying(7),
    faixa_percentual_prazo_str character varying(7),
    percentual_desc_vista_num double precision,
    percentual_desc_prazo_num double precision,
    taxa_parcelamento_str character varying(7),
    faixa_parcelas_vista_str character varying(7),
    faixa_parcelas_prazo_str character varying(7),
    comissao_vista_num double precision,
    comissao_prazo_num double precision,
    da_ajuizamento_int integer,
    id_gecliente_int bigint,
    grupo_str character varying(20),
    dia_prejuridico_int bigint,
    dias_atraso_int integer,
    rao_int smallint,
    convencionais_int smallint,
    da_notificacao_int integer,
    dia_inicial_prazo2_int bigint,
    dia_vcto_parcela_not_int bigint,
    dia_final_prazo2_int bigint,
    dia_notif_pagto_parcial_int bigint,
    dia_minimo_distrib_inicial_int bigint,
    ativo_str character varying(1)
);

--
-- TOC entry 782 (class 1259 OID 33811)
-- Name: esregua_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esregua_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 783 (class 1259 OID 33819)
-- Name: esreguafaixaatraso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esreguafaixaatraso (
    id_esregua_int bigint NOT NULL,
    id_geusuario_int bigint,
    id_gefaixaatraso_int bigint NOT NULL,
    tstamp timestamp without time zone
);

--
-- TOC entry 784 (class 1259 OID 33828)
-- Name: esreguanotificacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esreguanotificacao_seq
    START WITH 9
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 785 (class 1259 OID 33832)
-- Name: esreguanotificacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esreguanotificacao (
    id_esreguanotificacao_int bigint DEFAULT nextval('public.esreguanotificacao_seq'::regclass) NOT NULL,
    codigo_int bigint NOT NULL,
    descricao_str character varying(60) NOT NULL,
    tstamp timestamp without time zone DEFAULT now() NOT NULL,
    id_geusuario_int bigint NOT NULL
);

--
-- TOC entry 786 (class 1259 OID 33843)
-- Name: esreguanotificacaofaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esreguanotificacaofaixa_seq
    START WITH 33
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 787 (class 1259 OID 33857)
-- Name: esreguanotificacaofaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esreguanotificacaofaixa (
    id_esreguanotificacaofaixa_int bigint DEFAULT nextval('public.esreguanotificacaofaixa_seq'::regclass) NOT NULL,
    id_esreguanotificacao_int bigint NOT NULL,
    id_cbetapa_int bigint NOT NULL,
    collection_score_str character varying(2),
    fila_cobranca_str character varying(3),
    dia_inicial_notificacao_int integer NOT NULL,
    dia_inicial_ajuizamento_int integer NOT NULL,
    dia_final_notificacao_int integer DEFAULT 9999 NOT NULL,
    dia_final_ajuizamento_int integer DEFAULT 9999 NOT NULL,
    tstamp timestamp without time zone DEFAULT now() NOT NULL,
    id_geusuario_int bigint,
    dia_inicial_notificacao_amigavel_int integer,
    dia_final_notificacao_amigavel_int integer,
    dia_inicial_notificacao_cartorio_int integer,
    dia_final_notificacao_cartorio_int integer,
    dia_inicial_solicitar_kit_int integer
);

--
-- TOC entry 788 (class 1259 OID 33866)
-- Name: esreguaprazo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esreguaprazo (
    id_esreguaprazo_int bigint DEFAULT nextval(('"esreguaprazo_seq"'::text)::regclass) NOT NULL,
    prazo_inicial_int integer,
    prazo_final_int integer,
    descricao_str character varying(60),
    id_cbtipodespesamodalidade_int bigint,
    id_cbcartorio_int bigint,
    id_esregua_int bigint,
    codigo_str character varying(60)
);

--
-- TOC entry 789 (class 1259 OID 33876)
-- Name: esreguaprazo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esreguaprazo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 790 (class 1259 OID 33884)
-- Name: esretornofiat; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esretornofiat (
    id_esretornofiat_int bigint DEFAULT nextval(('"esretornofiat_seq"'::text)::regclass) NOT NULL,
    data_geracao_dat date NOT NULL,
    codigo_int smallint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    tipo_parcela_str character varying(5),
    num_parcela_int smallint,
    num_documento_int smallint,
    pagamento_parcial_str character varying(1),
    data_recebimento_dat date,
    valor_principal_num double precision,
    valor_cp_num double precision,
    valor_multa_num double precision,
    valor_remuneracao_num double precision,
    valor_desconto_num double precision,
    valor_honorarios_num double precision,
    valor_liquido_num double precision,
    tipo_recebimento_str character varying(1),
    automatico_str character varying(1),
    campanha_str character varying(1),
    valor_pago_real_num double precision,
    tipo_interrupcao_str character varying(5),
    data_interrupcao_dat date,
    data_cumprimento_interrup_dat date,
    observacao_txt text,
    capacidade_financeira_str character varying(3),
    estelionatario_str character varying(1),
    tipo_acao_str character varying(5),
    data_protocolo_dat date,
    data_identificacao_dat date,
    num_processo_str character varying(15),
    comarca_str character varying(25),
    vara_int smallint,
    tipo_cancelamento_str character varying(5),
    tipo_alienacao_str character varying(4),
    data_consulta_dat date,
    tipo_restricao_str character varying(5),
    qtde_restricao_int smallint,
    data_restricao_dat date,
    tipo_resposta_str character varying(1),
    data_resposta_dat date,
    perc_debito_vencido_num double precision,
    valor_notificado_num double precision,
    tipo_localizacao_str character varying(3),
    data_localizacao_dat date,
    localizacao_str character varying(3),
    estado_conservacao_str character varying(3),
    motivo_nao_localizacao_str character varying(4),
    seguro_bem_str character varying(1),
    endereco_str character varying(40),
    bairro_str character varying(20),
    cidade_str character varying(20),
    estado_str character varying(2),
    horario_localizacao_tim time without time zone,
    data_protesto_dat date,
    data_levantamento_dat date,
    bens_cliente_str character varying(1),
    bens_avalista_str character varying(1),
    data_pedido_dat date,
    numero_protocolo_str character varying(10),
    data_citacao_dat date,
    tipo_citacao_str character varying(4),
    resposta_citacao_str character varying(3),
    data_transformacao_dat date,
    tipo_apreensao_str character varying(4),
    data_apreensao_dat date,
    data_penhora_dat date,
    tipo_sentenca_str character varying(3),
    entrada_recurso_str character varying(1),
    data_sentenca_dat date,
    tipo_recurso_str character varying(3),
    data_recurso_dat date,
    data_solicitacao_dat date,
    valor_solicitado_num double precision,
    motivo_solicitacao_str character varying(5),
    cep_str character varying(9),
    data_envio_carta_dat date,
    data_devolucao_dat date,
    codigo_situacao_str character varying(5),
    data_deposito_judicial_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_fibanco_int bigint
);

--
-- TOC entry 791 (class 1259 OID 33900)
-- Name: esretornofiat_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esretornofiat_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 792 (class 1259 OID 33905)
-- Name: esretornostatustelefone; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esretornostatustelefone (
    id_esretornostatustelefone_int integer NOT NULL,
    data_registro_dat date NOT NULL,
    hora_registro_tme time without time zone NOT NULL,
    cod_carteira_str integer,
    cpf_str character varying(30),
    telefone_str character varying(30) NOT NULL,
    status_entrega_str character varying(60) NOT NULL,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 793 (class 1259 OID 33916)
-- Name: esretornostatustelefone_id_esretornostatustelefone_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esretornostatustelefone_id_esretornostatustelefone_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12059 (class 0 OID 0)
-- Dependencies: 793
-- Name: esretornostatustelefone_id_esretornostatustelefone_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.esretornostatustelefone_id_esretornostatustelefone_int_seq OWNED BY public.esretornostatustelefone.id_esretornostatustelefone_int;

--
-- TOC entry 794 (class 1259 OID 33933)
-- Name: esroboblacklist; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esroboblacklist (
    ultimageracao_tim timestamp without time zone,
    caminho_ultimageracao_str character varying(100),
    ip_ultimageracao_str character varying(50),
    id_geusuario_int bigint,
    horariogmt_str character varying(10),
    tipo_str character varying(10),
    obs_txt text,
    id_gecliente_int bigint
);

--
-- TOC entry 795 (class 1259 OID 33945)
-- Name: esscore_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.esscore_seq
    START WITH 4587
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 796 (class 1259 OID 33957)
-- Name: esscore; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esscore (
    id_esscore_int bigint DEFAULT nextval('public.esscore_seq'::regclass),
    id_cbcontrato_int bigint,
    data_hora_tim timestamp without time zone,
    behavior_score_str character varying(2),
    collection_score_str character varying(2),
    fila_cobranca_str character varying(3),
    ind_composicao_divida_str character varying(1),
    ind_grupo_economico_str character varying(2),
    rede_agencia_str character varying(6),
    nivel_risco_cliente character varying(2),
    valor_pdd_cliente_num double precision,
    nivel_risco_operacao_str character varying(2),
    vezes_cobranca_str character varying(3),
    situacao_cobranca_str character varying(3),
    codigo_assessorai_cyber_str character varying(8),
    valor_pdd_operacao_num double precision,
    id_esreguanotificacaofaixa_int bigint
);

--
-- TOC entry 797 (class 1259 OID 33962)
-- Name: essenhavw; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.essenhavw (
    id_essenhavw_int bigint DEFAULT nextval(('essenhavw_seq'::text)::regclass) NOT NULL,
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    senha_str character varying(15),
    mes_str character varying(2),
    ano_str character varying(4),
    quantidade_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 798 (class 1259 OID 33976)
-- Name: essenhavw_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.essenhavw_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 799 (class 1259 OID 33978)
-- Name: esstatus3pantmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.esstatus3pantmp (
    id_gecliente_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_em_aberto_int bigint,
    vencimento_em_aberto_str character varying(10),
    arquivo_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 800 (class 1259 OID 33981)
-- Name: essubclassificacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.essubclassificacao (
    id_essubclassificacao_int bigint DEFAULT nextval(('"essubclassificacoao_seq"'::text)::regclass) NOT NULL,
    id_esregua_int bigint NOT NULL,
    id_gecliente_int bigint,
    estrategia_str character varying(10),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    subclassificacao_int bigint,
    data_alteracao_dat date,
    usuario_alterousub_str character varying(15)
);

--
-- TOC entry 801 (class 1259 OID 33998)
-- Name: essubclassificacoao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.essubclassificacoao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 802 (class 1259 OID 34002)
-- Name: estransferenciaacordo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.estransferenciaacordo (
    id_estransferenciaacordo_int bigint DEFAULT nextval(('"estransferenciaacordo_seq"'::text)::regclass) NOT NULL,
    id_geusuario_old_int bigint,
    id_geusuario_new_int bigint,
    id_cbitembordero_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT statement_timestamp(),
    obs_txt text,
    contrato_str character varying(30),
    id_gecliente_int bigint
);

--
-- TOC entry 803 (class 1259 OID 34016)
-- Name: estransferenciaacordo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.estransferenciaacordo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 804 (class 1259 OID 34020)
-- Name: estratamentodados_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.estratamentodados_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 805 (class 1259 OID 34026)
-- Name: estratamentodados; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.estratamentodados (
    id_estratamentodados_int bigint DEFAULT nextval('public.estratamentodados_seq'::regclass) NOT NULL,
    id_gecliente_int bigint,
    descricao_str character varying(60),
    limpeza_standby_bit bit(1),
    limpeza_standby_int smallint,
    usa_dias_quebra_standby_str character varying(1),
    quebra_acordo_bit bit(1),
    quebra_acordo_dias_bit bit(1),
    quebra_acordo_dias_int smallint,
    quebra_acordo_dias_vista_int smallint,
    quebra_acordo_sem_carenca_reenvios_bit bit(1),
    quebra_acordo_sem_carenca_entrada_bit bit(1),
    alteracao_situacao_parcelas_bit bit(1),
    alteracao_situacao_parcelas_dat date,
    alteracao_contrato_regua_bit bit(1),
    manutencao_standby_bit bit(1),
    manutencao_standby_dat date,
    envio_proximo_acordo_bit bit(1),
    envio_proximo_acordo_int smallint,
    envio_proximo_acordo_desconsiderar_vista_bit bit(1),
    alteracao_contrato_follow_bit bit(1),
    where_limpeza_txt text,
    where_quebra_txt text,
    where_altsit_txt text,
    where_altcontregua_txt text,
    where_manutencao_txt text,
    where_envioprox_txt text,
    where_altcontfollow_txt text
);

--
-- TOC entry 806 (class 1259 OID 34043)
-- Name: fiat180tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fiat180tmp (
    contrato character varying(50),
    parcela character varying(5),
    prazo character varying(5),
    tipo character varying(2),
    dataparcela date,
    datarepasse date,
    datapagamento date,
    valorprincipal double precision,
    valormulta double precision,
    valorcp double precision,
    valordesconto double precision,
    valorhonorarios double precision,
    valornotificacao double precision,
    valortarifa double precision,
    valorpago double precision
);

--
-- TOC entry 807 (class 1259 OID 34050)
-- Name: fibanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fibanco (
    id_fibanco_int bigint DEFAULT nextval(('"fibanco_seq"'::text)::regclass) NOT NULL,
    cod_banco_str character varying(5) NOT NULL,
    nome_str character varying(50),
    aceite_str character varying(1),
    dias_vecto_int integer,
    nosso_numero_int bigint,
    comando_int integer,
    especie_int integer,
    carteira_int integer,
    mensagem1_str character varying(70),
    mensagem2_str character varying(70),
    mensagem3_str character varying(70),
    mensagem4_str character varying(70),
    mensagem5_str character varying(70),
    path_remessa_str text,
    path_retorno_str text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    digito_banco_str character varying(1)
);

--
-- TOC entry 808 (class 1259 OID 34061)
-- Name: fibanco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fibanco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 809 (class 1259 OID 34067)
-- Name: ficcbanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ficcbanco (
    id_ficcbanco_int bigint DEFAULT nextval(('"ficcbanco_seq"'::text)::regclass) NOT NULL,
    id_fibanco_int bigint NOT NULL,
    conta_str character varying(15) NOT NULL,
    agencia_str character varying(10),
    id_cbmodlayout_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    conta_razao_str character varying(10),
    cpf_str character varying(20),
    digito_str character varying(4),
    codigo_cedente_str character varying(10)
);

--
-- TOC entry 810 (class 1259 OID 34071)
-- Name: ficcbanco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ficcbanco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 811 (class 1259 OID 34083)
-- Name: ficheque; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ficheque (
    id_ficheque_int integer DEFAULT nextval(('"ficheque_seq"'::text)::regclass) NOT NULL,
    id_fibanco_int integer NOT NULL,
    agencia_str character varying(10) NOT NULL,
    conta_str character varying(15) NOT NULL,
    numero_int character varying(30) NOT NULL,
    situacao_str character varying(1),
    cpf_str character varying(30),
    nome_str character varying(60),
    data_emissao_dat date,
    vencimento_dat date,
    pagamento_dat date,
    data_devolucao1_dat date,
    data_devolucao2_dat date,
    valor_num double precision,
    obs_str character varying(100),
    id_cbitembordero_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 812 (class 1259 OID 34087)
-- Name: ficheque_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ficheque_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 813 (class 1259 OID 34095)
-- Name: fichequedevolvido; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fichequedevolvido (
    id_fichequedevolvido_int bigint DEFAULT nextval(('"fichequedevolvido_seq"'::text)::regclass) NOT NULL,
    id_fibanco_int bigint NOT NULL,
    agencia_str character varying(10) NOT NULL,
    conta_str character varying(15) NOT NULL,
    num_cheque_int bigint NOT NULL,
    id_cbcontrato_int bigint,
    cpf_emitente_str character varying(20),
    nome_emitente_str character varying(40),
    data_emissao_dat date,
    vencimento_dat date,
    pagamento_dat date,
    id_gealinea1_int bigint,
    id_gealinea2_int bigint,
    data_devolucao1_dat timestamp with time zone,
    data_devolucao2_dat timestamp with time zone,
    valor_num double precision,
    obs_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 814 (class 1259 OID 34104)
-- Name: fichequedevolvido_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fichequedevolvido_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 815 (class 1259 OID 34112)
-- Name: ficoeficiente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ficoeficiente (
    id_ficoeficiente_int bigint DEFAULT nextval(('"ficoeficiente_seq"'::text)::regclass) NOT NULL,
    taxa_str character varying(7),
    parcelas_int smallint NOT NULL,
    coeficiente_num double precision,
    tipo_entrada_str character varying(10),
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    faixa_atraso_str character varying(11)
);

--
-- TOC entry 816 (class 1259 OID 34123)
-- Name: ficoeficiente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ficoeficiente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 817 (class 1259 OID 34129)
-- Name: ficontacliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ficontacliente (
    id_ficontacliente_int bigint DEFAULT nextval(('"ficontacliente_seq"'::text)::regclass) NOT NULL,
    id_ficcbanco_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 818 (class 1259 OID 34140)
-- Name: ficontacliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ficontacliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 819 (class 1259 OID 34142)
-- Name: ficontadeposito_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ficontadeposito_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 820 (class 1259 OID 34157)
-- Name: fidescindicebanco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fidescindicebanco (
    id_fidescindicebanco_int bigint DEFAULT nextval(('"fidescindicebanco_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint,
    descricao_str character varying(20),
    id_fimoeda_int bigint,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 821 (class 1259 OID 34163)
-- Name: fidescindicebanco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fidescindicebanco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 822 (class 1259 OID 34172)
-- Name: fidesconto; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fidesconto (
    id_fidesconto_int bigint DEFAULT nextval(('fidesconto_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    faixa_atraso_str character varying(11),
    percentual_desc_vista double precision,
    percentual_desc_prazo double precision
);

--
-- TOC entry 823 (class 1259 OID 34179)
-- Name: fidesconto_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fidesconto_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 824 (class 1259 OID 34187)
-- Name: fiindicemoeda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fiindicemoeda (
    id_fiindicemoeda_int bigint DEFAULT nextval(('"fiindicemoeda_seq"'::text)::regclass) NOT NULL,
    id_fimoeda_int bigint NOT NULL,
    data_dat date NOT NULL,
    valor_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 825 (class 1259 OID 34196)
-- Name: fiindicemoeda_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fiindicemoeda_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 826 (class 1259 OID 34202)
-- Name: fimoeda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.fimoeda (
    id_fimoeda_int bigint DEFAULT nextval(('"fimoeda_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint NOT NULL,
    descricao_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 827 (class 1259 OID 34212)
-- Name: fimoeda_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.fimoeda_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 828 (class 1259 OID 34221)
-- Name: foo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.foo (
    f1 integer NOT NULL,
    f2 text NOT NULL,
    f3 text[]
);

--
-- TOC entry 829 (class 1259 OID 34241)
-- Name: ge049tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge049tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbsituacaocontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int bigint,
    vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    data_primeira_distrib_dat date,
    regiao_str character varying(15),
    cod_loja_str character varying(10),
    nome_loja_str character varying(60),
    faixa_pagto_str character varying(20),
    qtde_pagtos_int bigint,
    prazo_solucao_dat date,
    ultimo_contato_dat date,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    atraso_int bigint,
    login_usuario_str character varying(30),
    faixa_pagamento character varying(20),
    qtde_pagtos bigint,
    regua_str character varying(60),
    etapa_str character varying(60),
    data_pre_distrib_dat date,
    cidade_str character varying(100),
    bairro_str character varying(40),
    data_ultimo_pagamento_dat date,
    email_str character varying(255),
    tempo_contato character varying(8)
);

--
-- TOC entry 830 (class 1259 OID 34250)
-- Name: ge068tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge068tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    cpf_str character varying(30),
    contrato_str character varying(30),
    nome_str character varying(60),
    id_cbparcela_int bigint,
    parcela_int smallint,
    data_vencimento_dat date,
    id_geqltratamento_int bigint,
    id_geqlresponsavel_int bigint,
    id_geqlsituacao_int bigint,
    valor_principal_num double precision
);

--
-- TOC entry 831 (class 1259 OID 34259)
-- Name: ge068tmp_novo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge068tmp_novo (
    chave_str character varying(30),
    tipo_registro_int integer,
    id_cbcontrato_int bigint,
    cpf character varying(30),
    nome_str character varying(60),
    resultado_tratamento_str character varying(1),
    tipo_endereco_str character varying(3),
    endereco_str character varying(100),
    numero_str character varying(10),
    bairro_str character varying(60),
    cidade_str character varying(60),
    cep_str character varying(30),
    estado_str character varying(2),
    complemento_str character varying(60),
    tipo_telefone_str character varying(3),
    ddd_str character varying(2),
    telefone_str character varying(12),
    brancos character varying(157),
    sequencia_int character varying(5),
    tipo_email_str character varying(3),
    email_str character varying(100)
);

--
-- TOC entry 832 (class 1259 OID 34264)
-- Name: ge070tmp_10101411001195; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge070tmp_10101411001195 (
    tipo_registro_int character varying(1),
    codigo_biro_int character varying(10),
    id_cbcontrato_int character varying(10),
    cpf character varying(30),
    ddd_str character varying(2),
    email_str character varying(100),
    nome_biro_str character varying(30),
    tipo_endereco_str character varying(3),
    endereco_str character varying(60),
    lote_int character varying(10),
    nome_str character varying(60),
    telefone_str character varying(9),
    tipo_email_str character varying(3),
    numero_str character varying(10),
    resultado_tratamento_str character varying(1),
    tipo_telefone_str character varying(3),
    bairro_str character varying(30),
    sequencia_int character varying(7),
    cidade_str character varying(30),
    cep_str character varying(8),
    estado_str character varying(2),
    complemento_str character varying(50),
    brancos character varying(2),
    id_geqltipoqualidade_int bigint
);

--
-- TOC entry 833 (class 1259 OID 34271)
-- Name: ge070tmp_1010141927677; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge070tmp_1010141927677 (
    tipo_registro_int character varying(1),
    codigo_biro_int character varying(10),
    id_cbcontrato_int character varying(10),
    cpf character varying(30),
    ddd_str character varying(2),
    email_str character varying(100),
    nome_biro_str character varying(30),
    tipo_endereco_str character varying(3),
    endereco_str character varying(60),
    lote_int character varying(10),
    nome_str character varying(60),
    telefone_str character varying(9),
    tipo_email_str character varying(3),
    numero_str character varying(10),
    resultado_tratamento_str character varying(1),
    tipo_telefone_str character varying(3),
    bairro_str character varying(30),
    sequencia_int character varying(7),
    cidade_str character varying(30),
    cep_str character varying(8),
    estado_str character varying(2),
    complemento_str character varying(50),
    brancos character varying(2),
    id_geqltipoqualidade_int bigint
);

--
-- TOC entry 834 (class 1259 OID 34279)
-- Name: ge070tmp_1010850707993; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge070tmp_1010850707993 (
    tipo_registro_int character varying(1),
    codigo_biro_int character varying(10),
    id_cbcontrato_int character varying(10),
    cpf character varying(30),
    ddd_str character varying(2),
    email_str character varying(100),
    nome_biro_str character varying(30),
    tipo_endereco_str character varying(3),
    endereco_str character varying(60),
    lote_int character varying(10),
    nome_str character varying(60),
    telefone_str character varying(9),
    tipo_email_str character varying(3),
    numero_str character varying(10),
    resultado_tratamento_str character varying(1),
    tipo_telefone_str character varying(3),
    bairro_str character varying(30),
    sequencia_int character varying(7),
    cidade_str character varying(30),
    cep_str character varying(8),
    estado_str character varying(2),
    complemento_str character varying(50),
    brancos character varying(2),
    id_geqltipoqualidade_int bigint
);

--
-- TOC entry 835 (class 1259 OID 34293)
-- Name: ge070tmp_1013045107993; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge070tmp_1013045107993 (
    tipo_registro_int character varying(1),
    codigo_biro_int character varying(10),
    id_cbcontrato_int character varying(10),
    cpf character varying(30),
    ddd_str character varying(2),
    email_str character varying(100),
    nome_biro_str character varying(30),
    tipo_endereco_str character varying(3),
    endereco_str character varying(60),
    lote_int character varying(10),
    nome_str character varying(60),
    telefone_str character varying(9),
    tipo_email_str character varying(3),
    numero_str character varying(10),
    resultado_tratamento_str character varying(1),
    tipo_telefone_str character varying(3),
    bairro_str character varying(30),
    sequencia_int character varying(7),
    cidade_str character varying(30),
    cep_str character varying(8),
    estado_str character varying(2),
    complemento_str character varying(50),
    brancos character varying(2),
    id_geqltipoqualidade_int bigint
);

--
-- TOC entry 836 (class 1259 OID 34311)
-- Name: ge070tmp_informarketing; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge070tmp_informarketing (
    bairro character varying(30),
    cep character varying(8),
    cidade character varying(30),
    complemento character varying(15),
    cpf character varying(20),
    ddd character varying(2),
    estado character varying(2),
    forma_localizacao character varying(1),
    nome_logradouro character varying(40),
    numero_logradouro character varying(5),
    numero_ocorrencias_ccf character varying(3),
    obs_telefone_adic_1 character varying(5),
    obs_telefone_adic_2 character varying(5),
    obs_telefone_adic_3 character varying(5),
    status character varying(1),
    telefone character varying(8),
    telefone_adic_1 character varying(8),
    telefone_adic_2 character varying(8),
    telefone_adic_3 character varying(8),
    tipo_logradouro character varying(4),
    tipo_telefone_adic_1 character varying(1),
    tipo_telefone_adic_2 character varying(1),
    tipo_telefone_adic_3 character varying(1)
);

--
-- TOC entry 837 (class 1259 OID 34316)
-- Name: ge070tmp_rel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge070tmp_rel (
    chave_str character varying(20),
    cpf_str character varying(30),
    nome_str character varying(60),
    qtde_end_ant_int smallint,
    qtde_cont_ant_int smallint,
    envio_dat date,
    retorno_dat date,
    qtde_end_novo_int smallint,
    qtde_cont_novo_int smallint,
    biro_str character varying(1),
    npcob_str character varying(1),
    qtde_ema_ant_int smallint,
    qtde_ema_novo_int smallint
);

--
-- TOC entry 838 (class 1259 OID 34325)
-- Name: ge083tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge083tmp (
    chave_str character varying(20),
    cpf_str character varying(20),
    endereco_str character varying(80),
    complemento_str character varying(1000),
    bairro_str character varying(30),
    cep_str character varying(9),
    cidade_str character varying(40),
    estado_str character varying(2),
    informacoes character varying(60),
    tipo_endereco smallint,
    status_endereco smallint,
    inibido character varying(1),
    contrato character varying(30),
    descricao_evento character varying(50),
    data_evento character varying(10),
    fase character varying(50),
    sub_fase character varying(50),
    tipo_acao character varying(50),
    comarca_str character varying(50),
    foro_str character varying(50),
    vara_str character varying(50),
    data_distribuicao character varying(10),
    data_apresentacao character varying(10),
    motivo character varying(50),
    numero_parcela bigint,
    descricao_categoria character varying(50),
    data_pagamento character varying(10),
    descricao_lancamento character varying(50),
    valor_lancamento double precision,
    data_vencimento character varying(10),
    numero_processo character varying(60),
    numero_ordem character varying(50),
    data_realizacao character varying(10),
    cod_acao character varying(10),
    complemento_acao text,
    data_agendamento date,
    data_acao date,
    cod_assessoria character varying(10),
    data_apreensao date,
    informacoes_deposito character varying(50),
    valor_deposito double precision,
    outras_ocorrencias character varying(50),
    num_recibo character varying(10),
    cod_usuario character varying(10),
    nome_usuario character varying(10),
    num_notafiscal character varying(10),
    sistema character varying(10),
    tipo_registro character varying(2),
    id_cbcontrato bigint
);

--
-- TOC entry 839 (class 1259 OID 34333)
-- Name: ge119tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge119tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    parcela_int bigint,
    vencimento_dat date,
    contrato_str character varying(30),
    tiponegocio_str character varying(3)
);

--
-- TOC entry 840 (class 1259 OID 34340)
-- Name: ge202tmp_baixa_pirelli; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_baixa_pirelli (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    atribuicao character varying(255),
    bairro character varying(255),
    cep character varying(255),
    cgc_cpf character varying(255),
    cidade character varying(255),
    cidade_loja character varying(255),
    cliente character varying(255),
    contato_loja character varying(255),
    contato_loja_adm character varying(255),
    descricao_filial character varying(255),
    email character varying(255),
    emissao character varying(255),
    endereco character varying(255),
    estado_loja character varying(255),
    filial character varying(255),
    gr_cliente character varying(255),
    inscr_estadual character varying(255),
    nome character varying(255),
    nota_fiscal character varying(255),
    reg character varying(255),
    segmento character varying(255),
    telefone character varying(255),
    texto_contabil character varying(255),
    tipo character varying(255),
    tipo_pessoa character varying(255),
    valor character varying(255),
    vencimento character varying(255)
);

--
-- TOC entry 841 (class 1259 OID 34367)
-- Name: ge202tmp_baixa_pirelli_contrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_baixa_pirelli_contrato (
    id_cbcontrato_int bigint,
    contrato_str text
);

--
-- TOC entry 842 (class 1259 OID 34377)
-- Name: ge202tmp_baixa_pirelli_parcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_baixa_pirelli_parcela (
    id_cbparcela_int bigint,
    id_cbcontrato_int bigint,
    parcela_int bigint,
    nota_fiscal_str character varying(255),
    contrato_str text
);

--
-- TOC entry 843 (class 1259 OID 34393)
-- Name: ge202tmp_bx_eleva; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_bx_eleva (
    codigo_credor character varying(255),
    razao_social_credor character varying(255),
    tipo_devedor character varying(255),
    cpf_cnpj_devedor character varying(255),
    nome_devedor character varying(255),
    numero_documento character varying(255),
    numero_parcela character varying(255),
    data_vencimento date,
    data_baixa date,
    data_pagamento date,
    motivo character varying(255),
    tipo_baixa character varying(255),
    valor_pago double precision,
    valor_amortizar_principal character varying(255),
    meio_pagamento character varying(255),
    id_transacao character varying(255),
    valor_parcela character varying(255),
    valor_juros character varying(255),
    codcoligada character varying(255),
    idlan character varying(255),
    linha integer,
    chave_str character varying(30),
    arquivo_str character varying(255),
    _aviso text,
    _inconsistencia text
);

--
-- TOC entry 844 (class 1259 OID 34407)
-- Name: ge202tmp_bx_eleva_cbbaixa_parcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_bx_eleva_cbbaixa_parcela (
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    data_vencimento_dat date,
    situacao_int integer,
    data_ultima_distrib_dat date,
    id_geusuario_int integer,
    tstamp timestamp with time zone,
    parcela_int integer,
    valor_pago_num double precision,
    valor_amortizar_principal_num double precision,
    valor_parcela_num double precision,
    valor_juros_num double precision,
    tipo_baixa_str character varying(255),
    info_adicional_16_str character varying,
    data_pagamento_dat date,
    data_vencimento date,
    inclui_altera_parcela text,
    chave_str text
);

--
-- TOC entry 845 (class 1259 OID 34421)
-- Name: ge202tmp_bx_eleva_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ge202tmp_bx_eleva_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 846 (class 1259 OID 34432)
-- Name: ge202tmp_bx_eleva_copy; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_bx_eleva_copy (
    linha_str text,
    arquivo_str character varying DEFAULT 'BAIXA_ELEVA_27062025_11333_NPCOB.TXT'::character varying,
    linha integer DEFAULT nextval('public.ge202tmp_bx_eleva_seq'::regclass),
    _aviso text,
    _inconsistencia text,
    chave_str character varying(30) DEFAULT '10.20.10.117.1124'::character varying
);

--
-- TOC entry 847 (class 1259 OID 34449)
-- Name: ge202tmp_imp_fup_massa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_fup_massa (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    at_asm character varying(255),
    atendida character varying(255),
    ativo character varying(255),
    codigo_banco character varying(255),
    codigo_fup character varying(255),
    cpc character varying(255),
    descricao character varying(255),
    fup_automatico character varying(255),
    historico_padrao text,
    motivo_inadimplencia character varying(255),
    produtiva character varying(255),
    terceiro character varying(255),
    tipo_contato character varying(255)
);

--
-- TOC entry 848 (class 1259 OID 34466)
-- Name: ge202tmp_imp_fup_massa_fup_cbsitcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_fup_massa_fup_cbsitcontato (
    tstamp timestamp with time zone,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    chave_str text,
    id_cbsitcontato_int bigint,
    codigo_int integer,
    ativo_str character varying,
    atendida_bit bit(1),
    produtiva_bit bit(1),
    cpc_bit bit(1),
    terceiro_bit bit(1),
    descricao_str text,
    historico_padrao_str text,
    codigo_banco_str text,
    tipo_contato_str character varying,
    atualiza_data_contato_manual_str character varying,
    motivo_inadimplencia_str text,
    at_str text,
    class_at_str character varying,
    inclui_altera text
);

--
-- TOC entry 849 (class 1259 OID 34485)
-- Name: ge202tmp_imp_pirelli; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_pirelli (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    atribuicao character varying(255),
    bairro character varying(255),
    cep character varying(255),
    cgc_cpf character varying(255),
    cidade character varying(255),
    cliente character varying(255),
    codigo_fun character varying(255),
    descr_faturamento character varying(255),
    descricao_filial character varying(255),
    email character varying(255),
    emissao character varying(255),
    endereco character varying(255),
    filial character varying(255),
    filial_falt character varying(255),
    gr_cliente character varying(255),
    inscr_estadual character varying(255),
    nome character varying(255),
    nome_func character varying(255),
    nota_fiscal character varying(255),
    reg character varying(255),
    segmento character varying(255),
    telefone character varying(255),
    vencimento character varying(255),
    valor character varying(255),
    nosso_numero character varying(255),
    cidade_loja character varying(255),
    contato_loja character varying(255),
    contato_loja_adm character varying(255),
    estado_loja character varying(255),
    texto_contabil character varying(255),
    tipo character varying(255),
    tipo_pessoa character varying(255)
);

--
-- TOC entry 850 (class 1259 OID 34496)
-- Name: ge202tmp_imp_pirelli_contrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_pirelli_contrato (
    inclui_altera_contrato_str character varying,
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbetapa_int bigint,
    id_fimoeda_int integer,
    id_gecliente_int bigint,
    id_cbsituacaocontrato_int bigint,
    data_ultima_distrib_dat date,
    tipo_pessoa_str text,
    cpf_str text,
    contrato_str text,
    nome_str text,
    rg_str character varying(255),
    endereco_str character varying(255),
    bairro_str character varying(255),
    cidade_str character varying(255),
    estado_str character varying(255),
    cep_str character varying(255),
    telefone_str character varying(255),
    email_str text,
    cod_cliente_str character varying(255),
    cod_filial_str character varying(255),
    descricao_filial_str character varying(255),
    contato_loja_str character varying(255),
    cidade_loja_str character varying(255),
    estado_loja_str character varying(255),
    contato_loja_adm_str character varying(255),
    tipo_str character varying(255),
    chave_str character varying
);

--
-- TOC entry 851 (class 1259 OID 34502)
-- Name: ge202tmp_imp_pirelli_parcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_pirelli_parcela (
    inclui_altera_parcela_str character varying,
    id_cbparcela_int bigint,
    id_cbcontrato_int bigint,
    data_ultima_distrib_dat date,
    parcela_int bigint,
    valor_principal_num double precision,
    data_vencimento_dat date,
    situacao_int bigint,
    tipo_str character varying,
    id_esregua_int bigint,
    nota_fiscal_str character varying(255),
    atribuicao_str character varying(255),
    segmento_str character varying(255),
    emissao_dat date,
    texto_contabil_str character varying(255),
    chave_str character varying
);

--
-- TOC entry 852 (class 1259 OID 34510)
-- Name: ge202tmp_imp_pirelli_qualidade; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_pirelli_qualidade (
    chave_str character varying,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str text,
    rg_str character varying,
    org_exp_rg_str character varying,
    dt_exp_rg_dat date,
    uf_rg_str character varying,
    cpf_str text,
    nome_str text,
    id_cbcontrato_int bigint,
    endereco_str character varying(255),
    bairro_str character varying(255),
    cep_str character varying(255),
    cidade_str character varying(255),
    estado_str character varying(255),
    telefone_str character varying(255),
    email_str text
);

--
-- TOC entry 853 (class 1259 OID 34516)
-- Name: ge202tmp_imp_planilha_ctr_cpf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_planilha_ctr_cpf (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    contrato character varying(255),
    tipo_negocio character varying(255),
    id_cbcontrato_int bigint,
    cpf character varying(255)
);

--
-- TOC entry 854 (class 1259 OID 34522)
-- Name: ge202tmp_imp_rem_eleva; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva (
    codigo_credor character varying(255),
    razao_social_credor character varying(255),
    tipo_devedor character varying(255),
    cpf_cnpj_grupo_economico character varying(255),
    cpf_cnpj_devedor character varying(255),
    nome_devedor character varying(255),
    nome_fantasia_devedor character varying(255),
    logradouro character varying(255),
    numero character varying(255),
    complemento character varying(255),
    bairro character varying(255),
    cep character varying(255),
    cidade character varying(255),
    uf character varying(255),
    ddd_telefone_1 character varying(255),
    telefone_1 character varying(255),
    tipo_telefone_1 character varying(255),
    ddd_telefone_2 character varying(255),
    telefone_2 character varying(255),
    tipo_telefone_2 character varying(255),
    ddd_telefone_3 character varying(255),
    telefone_3 character varying(255),
    tipo_telefone_3 character varying(255),
    email_1 character varying(255),
    tipo_email_1 character varying(255),
    email_2 character varying(255),
    tipo_email_2 character varying(255),
    email_3 character varying(255),
    tipo_email_3 character varying(255),
    tipo_documento character varying(255),
    produto character varying(255),
    segmento character varying(255),
    numero_documento character varying(255),
    numero_parcela character varying(255),
    data_vencimento date,
    valor_original_documento double precision,
    valor_abatimento double precision,
    valor_saldo_devedor double precision,
    valor_custa_protesto double precision,
    observacao character varying(255),
    info_adicional_1 character varying(255),
    info_adicional_2 character varying(255),
    info_adicional_3 character varying(255),
    info_adicional_4 character varying(255),
    info_adicional_5 character varying(255),
    info_adicional_6 character varying(255),
    info_adicional_7 character varying(255),
    info_adicional_8 character varying(255),
    info_adicional_9 character varying(255),
    info_adicional_10 character varying(255),
    info_adicional_11 character varying(255),
    info_adicional_12 character varying(255),
    info_adicional_13 character varying(255),
    info_adicional_14 character varying(255),
    info_adicional_15 character varying(255),
    info_adicional_16 character varying(255),
    info_adicional_17 character varying(255),
    info_adicional_18 character varying(255),
    desconto_minimo_a_aplicar character varying(255),
    desconto_maximo_a_aplicar character varying(255),
    juros_a_aplicar_ao_mes character varying(255),
    multa_a_aplicar character varying(255),
    linha integer,
    chave_str character varying(30),
    arquivo_str character varying(255),
    _aviso text,
    _inconsistencia text
);

--
-- TOC entry 855 (class 1259 OID 34534)
-- Name: ge202tmp_imp_rem_eleva_cbcontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_cbcontrato (
    id_gecliente_int integer,
    id_cbcontrato_int bigint,
    id_geempresa_int integer,
    id_gefilial_int integer,
    id_cbsituacaocontrato_int bigint,
    contrato_str text,
    id_cbtiponegocio_int integer,
    cpf_str text,
    nome_str character varying(255),
    tipo_pessoa_str character varying(255),
    nome_fantasia_devedor_str character varying(255),
    endereco_str text,
    numero_str character varying(255),
    complemento_str character varying(255),
    bairro_str character varying(40),
    cep_str text,
    cidade_str character varying(255),
    estado_str character varying(255),
    id_fimoeda_int integer,
    id_cbetapa_int integer,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    tstamp timestamp with time zone,
    id_geusuario_int integer,
    inclui_altera_contrato text,
    chave_str text
);

--
-- TOC entry 856 (class 1259 OID 34548)
-- Name: ge202tmp_imp_rem_eleva_cbitembordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_cbitembordero (
    id_ref_cbitembordero_old_int bigint,
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    acordo_int bigint,
    id_cbcontrato_int bigint,
    nosso_numero_int character(30),
    comando_str character varying(2),
    id_cbinstrucao1_int bigint,
    id_cbinstrucao2_int bigint,
    valor_desconto_num double precision,
    data_desconto_dat date,
    vencimento_dat date,
    emissao_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    destino_str character varying(100),
    boleto_int smallint,
    nosso_numero_str character varying(30),
    linha_digitavel_str character varying(60),
    cod_barra_str character varying(200),
    barra_str text,
    dv_int character varying(3),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    instrucao_1_str character varying(40),
    instrucao_2_str character varying(40),
    parcelamento_str character varying(7),
    pago_str character varying(1),
    acrescimo_num double precision,
    id_geusuario_boleto_int bigint,
    acrescimo_np_num double precision,
    quitacao_str character varying(1),
    data_boleto_dat date,
    hora_boleto_tim timestamp with time zone,
    observacao_boleto_str character varying(100),
    tipo_destino_str character varying(1),
    boleto_gravacao_tim timestamp without time zone,
    perc_desc_num double precision,
    principal_original_num double precision,
    boleto_parcelamento_str character varying(3),
    id_geqlcontato_int bigint,
    id_geqlendereco_int bigint,
    cp_original_num double precision,
    desconto_original_num double precision,
    acordo_formalizado_int bigint,
    id_gecidade_int bigint,
    data_envio_dat date,
    data_reenvio_dat date,
    arquivo_terc_str character varying(60),
    tipo_geracao_str character varying(2),
    tstamp timestamp without time zone,
    envio_jpg_str character varying(1),
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    id_boletoeleva_str character varying(255)
);

--
-- TOC entry 857 (class 1259 OID 34556)
-- Name: ge202tmp_imp_rem_eleva_cbparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_cbparcela (
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_esregua_int integer,
    data_vencimento_dat date,
    valor_principal_num double precision,
    tipo_str text,
    valor_original_documento_num double precision,
    valor_abatimento_num double precision,
    valor_custa_protesto_num double precision,
    cpf_cnpj_grupo_economico_str character varying(255),
    codigo_credor_str character varying(255),
    razao_social_credor_str character varying(255),
    tipo_documento_str character varying(255),
    produto_str character varying(255),
    segmento_str character varying(255),
    numero_unico_str character varying(255),
    observacao_str character varying(255),
    info_adicional_1_str character varying(255),
    info_adicional_2_str character varying(255),
    info_adicional_3_str character varying(255),
    info_adicional_4_str character varying(255),
    info_adicional_5_str character varying(255),
    info_adicional_6_str character varying(255),
    info_adicional_7_str character varying(255),
    info_adicional_8_str character varying(255),
    info_adicional_9_str character varying(255),
    info_adicional_10_str character varying(255),
    info_adicional_11_str character varying(255),
    info_adicional_12_str character varying(255),
    info_adicional_13_str character varying(255),
    info_adicional_14_str character varying(255),
    info_adicional_15_str character varying(255),
    info_adicional_16_str character varying(255),
    info_adicional_17_str character varying(255),
    info_adicional_18_str character varying(255),
    desconto_minimo_a_aplicar_str character varying(255),
    desconto_maximo_a_aplicar_str character varying(255),
    juros_a_aplicar_ao_mes_prorata_dia_str character varying(255),
    multa_a_aplicar_str character varying(255),
    situacao_int integer,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    id_geusuario_int integer,
    tstamp timestamp with time zone,
    parcela_int integer,
    inclui_altera_parcela text,
    chave_str text
);

--
-- TOC entry 858 (class 1259 OID 34580)
-- Name: ge202tmp_imp_rem_eleva_cbparcelaitembordero; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_cbparcelaitembordero (
    id_cbparcelaitembordero_int bigint,
    id_cbitembordero_int bigint,
    id_cbparcela_int bigint,
    vencimento_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    selecionado_int integer,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    valor_parcela_num integer,
    perc_desc_num double precision,
    cp_original_num double precision,
    desconto_original_num double precision,
    tstamp_mdm_inclusao timestamp(0) without time zone
);

--
-- TOC entry 859 (class 1259 OID 34594)
-- Name: ge202tmp_imp_rem_eleva_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.ge202tmp_imp_rem_eleva_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 860 (class 1259 OID 34603)
-- Name: ge202tmp_imp_rem_eleva_copy; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_copy (
    linha_str text,
    arquivo_str character varying DEFAULT 'CARGA_MD_ELEVA_27062025_11735.txt'::character varying,
    linha integer DEFAULT nextval('public.ge202tmp_imp_rem_eleva_seq'::regclass),
    _aviso text,
    _inconsistencia text,
    chave_str character varying(30) DEFAULT '10.20.10.117.1124'::character varying
);

--
-- TOC entry 861 (class 1259 OID 34632)
-- Name: ge202tmp_imp_rem_eleva_qualidadeemail_com; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadeemail_com (
    id_cbcontrato_int bigint,
    id_geqltipoemail_int integer,
    cpf_str text,
    email_str text,
    classificacao_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    excluido_bit integer,
    id_gecliente_int integer,
    contrato_str text,
    id_cbtiponegocio_int integer,
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat text,
    uf_rg_str text,
    nome_str character varying(255),
    chave_str text
);

--
-- TOC entry 862 (class 1259 OID 34648)
-- Name: ge202tmp_imp_rem_eleva_qualidadeemail_out; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadeemail_out (
    id_cbcontrato_int bigint,
    id_geqltipoemail_int integer,
    cpf_str text,
    email_str text,
    classificacao_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    excluido_bit integer,
    id_gecliente_int integer,
    contrato_str text,
    id_cbtiponegocio_int integer,
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat text,
    uf_rg_str text,
    nome_str character varying(255),
    chave_str text
);

--
-- TOC entry 863 (class 1259 OID 34661)
-- Name: ge202tmp_imp_rem_eleva_qualidadeemail_res; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadeemail_res (
    id_cbcontrato_int bigint,
    id_geqltipoemail_int integer,
    cpf_str text,
    email_str text,
    classificacao_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    excluido_bit integer,
    id_gecliente_int integer,
    contrato_str text,
    id_cbtiponegocio_int integer,
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat text,
    uf_rg_str text,
    nome_str character varying(255),
    chave_str text
);

--
-- TOC entry 864 (class 1259 OID 34682)
-- Name: ge202tmp_imp_rem_eleva_qualidadeend; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadeend (
    id_gecliente_int integer,
    classificacao_str text,
    endereco_str text,
    complemento_str character varying(255),
    bairro_str character varying(40),
    cidade_str character varying(255),
    cep_str text,
    estado_str character varying(255),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int integer,
    contrato_str text,
    cpf_str text,
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat text,
    uf_rg_str text,
    nome_str character varying(255),
    chave_str text
);

--
-- TOC entry 865 (class 1259 OID 34694)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_cel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadetel_cel (
    id_cbcontrato_int bigint,
    contrato_str text,
    id_geqltipocontato_int integer,
    contato_str character varying,
    classificacao_str text,
    ramal_str character varying(10),
    tabela_origem_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    cpf_str text,
    nome_str character varying(255),
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    tstamp_inclusao timestamp with time zone,
    chave_str character varying(30),
    id_gecliente_int integer,
    id_cbtiponegocio_int integer,
    excluido_bit integer
);

--
-- TOC entry 866 (class 1259 OID 34709)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_com; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadetel_com (
    id_cbcontrato_int bigint,
    contrato_str text,
    id_geqltipocontato_int integer,
    contato_str character varying,
    classificacao_str text,
    ramal_str character varying(10),
    tabela_origem_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    cpf_str text,
    nome_str character varying(255),
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    tstamp_inclusao timestamp with time zone,
    chave_str character varying(30),
    id_gecliente_int integer,
    id_cbtiponegocio_int integer,
    excluido_bit integer
);

--
-- TOC entry 867 (class 1259 OID 34735)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_fax; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadetel_fax (
    id_cbcontrato_int bigint,
    contrato_str text,
    id_geqltipocontato_int integer,
    contato_str character varying,
    classificacao_str text,
    ramal_str character varying(10),
    tabela_origem_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    cpf_str text,
    nome_str character varying(255),
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    tstamp_inclusao timestamp with time zone,
    chave_str character varying(30),
    id_gecliente_int integer,
    id_cbtiponegocio_int integer,
    excluido_bit integer
);

--
-- TOC entry 868 (class 1259 OID 34749)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_out; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadetel_out (
    id_cbcontrato_int bigint,
    contrato_str text,
    id_geqltipocontato_int integer,
    contato_str character varying,
    classificacao_str text,
    ramal_str character varying(10),
    tabela_origem_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    cpf_str text,
    nome_str character varying(255),
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    tstamp_inclusao timestamp with time zone,
    chave_str character varying(30),
    id_gecliente_int integer,
    id_cbtiponegocio_int integer,
    excluido_bit integer
);

--
-- TOC entry 869 (class 1259 OID 34767)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_res; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_rem_eleva_qualidadetel_res (
    id_cbcontrato_int bigint,
    contrato_str text,
    id_geqltipocontato_int integer,
    contato_str character varying,
    classificacao_str text,
    ramal_str character varying(10),
    tabela_origem_str text,
    tstamp timestamp with time zone,
    nome_contato_str character varying(255),
    cpf_str text,
    nome_str character varying(255),
    rg_str text,
    org_exp_rg_str text,
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    tstamp_inclusao timestamp with time zone,
    chave_str character varying(30),
    id_gecliente_int integer,
    id_cbtiponegocio_int integer,
    excluido_bit integer
);

--
-- TOC entry 870 (class 1259 OID 34790)
-- Name: ge202tmp_imp_score; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_score (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    cpf character varying(255),
    fonte_score character varying(255),
    score character varying(255)
);

--
-- TOC entry 871 (class 1259 OID 34804)
-- Name: ge202tmp_imp_score_tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_score_tmp (
    cpf character varying(255),
    fonte_score character varying(255),
    score character varying(255)
);

--
-- TOC entry 872 (class 1259 OID 34811)
-- Name: ge202tmp_imp_usuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_imp_usuario (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    cargo character varying(255),
    carteira character varying(255),
    cpf character varying(255),
    data_admissao character varying(255),
    data_nascimento character varying(255),
    escolaridade character varying(255),
    filial character varying(255),
    login character varying(255),
    nc character varying(255),
    nome character varying(255),
    id_gefilial_int bigint,
    id_geusuario_int bigint,
    login_geusuario boolean,
    cpf_corrigido character varying(255)
);

--
-- TOC entry 873 (class 1259 OID 34832)
-- Name: ge202tmp_importanotifmanual; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.ge202tmp_importanotifmanual (
    chave_str character varying(30),
    linha integer,
    _inconsistencia text,
    _aviso text,
    ar character varying(255),
    cartorio bigint,
    cod_follow bigint,
    contrato character varying(255),
    data_ar date,
    data_envio_despesa date,
    data_geracao_despesa date,
    data_notificacao date,
    data_retorno_despesa date,
    data_retorno_fisico date,
    data_solic_retorno_fisico date,
    historico_follow character varying(255),
    livro_protocolo character varying(255),
    livro_registro character varying(255),
    numero_parcela bigint,
    observacao character varying(255),
    protocolo character varying(255),
    registro character varying(255),
    retorno_notificacao character varying(255),
    tipo_despesa bigint,
    tipo_negocio character varying(255),
    valor_despesa double precision,
    vencimento_parcela date,
    id_cbdespesa_int bigint,
    id_cbdespesa_novo_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_esdocfisico_int bigint,
    id_cbvalortipodespesa_int bigint,
    data_aprovacao_dat date,
    data_envio_arq_remessa date
);

--
-- TOC entry 874 (class 1259 OID 34844)
-- Name: geacesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geacesso (
    id_geacesso_int bigint DEFAULT nextval(('"geacesso_seq"'::text)::regclass) NOT NULL,
    id_geaplicacao_int bigint,
    id_gegrupo_int bigint,
    nomeobjeto_str character varying(70),
    tagobjeto_str character varying(15),
    tipo_str character varying(1),
    inclusao_str character varying(1),
    alteracao_str character varying(1),
    exclusao_str character varying(1),
    pesquisa_str character varying(1),
    habilitado_str character varying(1),
    visivel_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    evento_int bigint,
    unica_str character varying(1)
);

--
-- TOC entry 875 (class 1259 OID 34857)
-- Name: geacesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geacesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 876 (class 1259 OID 34865)
-- Name: geacessogrid; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geacessogrid (
    id_geacessogrid_int bigint DEFAULT nextval(('"geacessogrid_seq"'::text)::regclass) NOT NULL,
    id_gegrupo_int bigint,
    id_geaplicacao_int bigint,
    grid_str character varying(30),
    coluna_str character varying(30),
    habilitado_bit bit(1),
    visivel_bit bit(1)
);

--
-- TOC entry 877 (class 1259 OID 34873)
-- Name: geagendamentorelatorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geagendamentorelatorio (
    id_geagendamentorelatorio_int bigint DEFAULT nextval(('"geagendamentorelatorio_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_geusuario_int bigint,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(50),
    opcao_str character varying(1),
    tstamp timestamp with time zone,
    primeiravez_str character varying(1),
    horainicial time without time zone,
    proxima_data_str character varying(11),
    parametro_str character varying(5000),
    log_processamento timestamp with time zone,
    id_geparametroservidor_int bigint,
    prox_hora time without time zone,
    email_str character varying(1000),
    qtd_horas character varying(10),
    tabela_str character varying(30),
    nome_cliente_str character varying(30),
    exporta_excel_str character varying(1)
);

--
-- TOC entry 878 (class 1259 OID 34884)
-- Name: geagendamentorelatorio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geagendamentorelatorio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 879 (class 1259 OID 34890)
-- Name: gealinea; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gealinea (
    id_gealinea_int bigint DEFAULT nextval(('"gealinea_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 880 (class 1259 OID 34899)
-- Name: gealinea_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gealinea_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 881 (class 1259 OID 34908)
-- Name: geaplicacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geaplicacao (
    id_geaplicacao_int bigint DEFAULT nextval(('"geaplicacao_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(12) NOT NULL,
    nome_str character varying(40),
    siglamodulo_str character varying(3),
    tipo_str character varying(1),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    visualiza_agendador_str character varying(1),
    novo_modelo_bit bit(1),
    id_cbmodlayout_int bigint,
    versao_minima_str character varying(10)
);

--
-- TOC entry 882 (class 1259 OID 34914)
-- Name: geaplicacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geaplicacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 883 (class 1259 OID 34917)
-- Name: geaplicacaolog_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geaplicacaolog_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 884 (class 1259 OID 34927)
-- Name: geaplicacaolog; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geaplicacaolog (
    id_geaplicacaolog_int integer DEFAULT nextval('public.geaplicacaolog_seq'::regclass) NOT NULL,
    id_geaplicacao_int integer,
    id_geusuario_int integer,
    data_hora_tim timestamp without time zone,
    fonte_int smallint,
    ip_str character varying(30)
);

--
-- TOC entry 885 (class 1259 OID 34940)
-- Name: geatuacao01; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geatuacao01 (
    id_geatuacao01_int integer NOT NULL,
    codigo_int bigint,
    id_gecliente_int bigint,
    descricao_str character varying(20),
    id_carteira_int bigint,
    status_int bigint
);

--
-- TOC entry 886 (class 1259 OID 34949)
-- Name: geatuacao01_id_geatuacao01_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geatuacao01_id_geatuacao01_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12060 (class 0 OID 0)
-- Dependencies: 886
-- Name: geatuacao01_id_geatuacao01_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.geatuacao01_id_geatuacao01_int_seq OWNED BY public.geatuacao01.id_geatuacao01_int;

--
-- TOC entry 887 (class 1259 OID 34964)
-- Name: geatuacao02; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geatuacao02 (
    id_geatuacao02_int integer NOT NULL,
    codigo_int bigint,
    id_gecliente_int bigint,
    descricao_str character varying(20),
    id_carteira_int bigint,
    status_int bigint
);

--
-- TOC entry 888 (class 1259 OID 34973)
-- Name: geatuacao02_id_geatuacao02_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geatuacao02_id_geatuacao02_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12061 (class 0 OID 0)
-- Dependencies: 888
-- Name: geatuacao02_id_geatuacao02_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.geatuacao02_id_geatuacao02_int_seq OWNED BY public.geatuacao02.id_geatuacao02_int;

--
-- TOC entry 889 (class 1259 OID 34987)
-- Name: geatuacao03; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geatuacao03 (
    id_geatuacao03_int integer NOT NULL,
    codigo_int bigint,
    id_gecliente_int bigint,
    descricao_str character varying(20),
    id_carteira_int bigint,
    status_int bigint
);

--
-- TOC entry 890 (class 1259 OID 34992)
-- Name: geatuacao03_id_geatuacao03_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geatuacao03_id_geatuacao03_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12062 (class 0 OID 0)
-- Dependencies: 890
-- Name: geatuacao03_id_geatuacao03_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.geatuacao03_id_geatuacao03_int_seq OWNED BY public.geatuacao03.id_geatuacao03_int;

--
-- TOC entry 891 (class 1259 OID 34998)
-- Name: gebancoevento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gebancoevento (
    id_gebancoevento_int bigint DEFAULT nextval(('gebancoevento_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(80),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 892 (class 1259 OID 35005)
-- Name: gebancoevento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gebancoevento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 893 (class 1259 OID 35009)
-- Name: gebancofase; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gebancofase (
    id_gebancofase_int bigint DEFAULT nextval(('gebancofase_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(80),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 894 (class 1259 OID 35018)
-- Name: gebancofase_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gebancofase_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 895 (class 1259 OID 35029)
-- Name: gebasecongeladatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gebasecongeladatmp (
    contrato_str character varying(30),
    parcela_int bigint,
    valor_principal_num double precision,
    data_vencimento_dat date,
    data_congelada_dat date,
    chave_str character varying(20),
    nome_str character varying(60),
    estado_str character varying(2),
    id_cbtiponegocio_int bigint,
    descricao_str character varying(40),
    codigo_tiponegocio_str character varying(3),
    codigo_situacaocontrato_str character varying(1),
    data_pre_distrib_dat date
);

--
-- TOC entry 896 (class 1259 OID 35034)
-- Name: gebatimentotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gebatimentotmp (
    id_gecliente_int bigint,
    contrato_str character varying(60),
    nome_str character varying(60),
    parcela_int bigint,
    situacaocontrato_str character varying(60),
    critica_str character varying(100)
);

--
-- TOC entry 897 (class 1259 OID 35044)
-- Name: gebloqueiotelefonecontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gebloqueiotelefonecontato (
    id_gebloqueiotelefonecontato_int integer NOT NULL,
    id_cbfollowup_int bigint NOT NULL,
    id_geqlcontato_int bigint NOT NULL,
    tstamp timestamp without time zone NOT NULL,
    terceiro_bit bit(1) NOT NULL
);

--
-- TOC entry 898 (class 1259 OID 35051)
-- Name: gebloqueiotelefonecontato_id_gebloqueiotelefonecontato_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gebloqueiotelefonecontato_id_gebloqueiotelefonecontato_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12063 (class 0 OID 0)
-- Dependencies: 898
-- Name: gebloqueiotelefonecontato_id_gebloqueiotelefonecontato_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.gebloqueiotelefonecontato_id_gebloqueiotelefonecontato_int_seq OWNED BY public.gebloqueiotelefonecontato.id_gebloqueiotelefonecontato_int;

--
-- TOC entry 899 (class 1259 OID 35062)
-- Name: gebloqueiotelefonecontatoanterior; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gebloqueiotelefonecontatoanterior (
    id_gebloqueiotelefonecontatoanterior_int integer NOT NULL,
    id_gebloqueiotelefonecontato_int bigint NOT NULL,
    id_geqltipocontato_anterior_int bigint NOT NULL
);

--
-- TOC entry 900 (class 1259 OID 35065)
-- Name: gebloqueiotelefonecontatoante_id_gebloqueiotelefonecontatoa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gebloqueiotelefonecontatoante_id_gebloqueiotelefonecontatoa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12064 (class 0 OID 0)
-- Dependencies: 900
-- Name: gebloqueiotelefonecontatoante_id_gebloqueiotelefonecontatoa_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.gebloqueiotelefonecontatoante_id_gebloqueiotelefonecontatoa_seq OWNED BY public.gebloqueiotelefonecontatoanterior.id_gebloqueiotelefonecontatoanterior_int;

--
-- TOC entry 901 (class 1259 OID 35072)
-- Name: gecampotabela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecampotabela (
    id_gecampotabela_int integer DEFAULT nextval(('"gecampotabela_seq"'::text)::regclass) NOT NULL,
    tabela_str character varying(60),
    campo_str character varying(60),
    tstamp timestamp with time zone,
    tabela_desc_str character varying(60),
    campo_desc_str character varying(60),
    visivel_str character varying(1)
);

--
-- TOC entry 902 (class 1259 OID 35078)
-- Name: gecampotabela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecampotabela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 903 (class 1259 OID 35083)
-- Name: gecargaacesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecargaacesso (
    id_gecargaacesso_int bigint DEFAULT nextval(('"gecargaacesso_seq"'::text)::regclass) NOT NULL,
    tagobjeto_str character varying(12) NOT NULL,
    nomeobjeto_str character varying(70),
    tipo_str character varying(1),
    "timestamp" timestamp with time zone,
    evento_int bigint
);

--
-- TOC entry 904 (class 1259 OID 35093)
-- Name: gecargaacesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecargaacesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 905 (class 1259 OID 35108)
-- Name: gecartapreajuizamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecartapreajuizamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 906 (class 1259 OID 35116)
-- Name: gecartapreajuizamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecartapreajuizamento (
    id_gecartapreajuizamento_int bigint DEFAULT nextval('public.gecartapreajuizamento_seq'::regclass) NOT NULL,
    data_envio_dat date NOT NULL,
    hora_envio_tme timestamp without time zone DEFAULT now() NOT NULL,
    id_geusuario_int bigint,
    id_gesolicitacaodocumento_int bigint
);

--
-- TOC entry 907 (class 1259 OID 35134)
-- Name: gecartapreajuizamentoconclusao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecartapreajuizamentoconclusao (
    id_gecartapreajuizamento_int bigint,
    id_geconclusaopreajuizamento_int bigint,
    hora_tme timestamp without time zone DEFAULT now()
);

--
-- TOC entry 908 (class 1259 OID 35142)
-- Name: gecidade; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecidade (
    id_gecidade_int bigint DEFAULT nextval(('"gecidade_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(50) NOT NULL,
    nome_str character varying(50),
    uf_str character varying(2),
    ibge_int integer,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    codigo_santander_str character varying(7),
    id_geuf_int bigint,
    id_gemunic_npjur_int bigint,
    codigo_ngs_str character varying(10)
);

--
-- TOC entry 909 (class 1259 OID 35150)
-- Name: gecidade_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecidade_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 910 (class 1259 OID 35161)
-- Name: geclassificacaocontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geclassificacaocontato (
    id_geclassificacaocontato_int bigint DEFAULT nextval(('"geclassificacaocontato_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint,
    id_gecliente_int bigint,
    descricao_str character varying(60),
    id_carteira_int bigint,
    status_int bigint,
    meta_num double precision,
    tipo_meta_int bigint,
    id_getipometa_int bigint,
    tipo_meta1_int integer,
    meta1_num double precision,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 911 (class 1259 OID 35165)
-- Name: geclassificacaocontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geclassificacaocontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999999999
    CACHE 1;

--
-- TOC entry 912 (class 1259 OID 35171)
-- Name: geclassificacaopreanalise_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geclassificacaopreanalise_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 913 (class 1259 OID 35177)
-- Name: geclassificacaopreanalise; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geclassificacaopreanalise (
    id_geclassificacaopreanalise_int bigint DEFAULT nextval('public.geclassificacaopreanalise_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(40),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 914 (class 1259 OID 35186)
-- Name: gecliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecliente (
    id_gecliente_int bigint DEFAULT nextval(('"gecliente_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(7) NOT NULL,
    nome_str character varying(60),
    abrev_str character varying(15),
    ativo_str character varying(1),
    endereco1_str character varying(60),
    endereco2_str character varying(60),
    cep_str character varying(9),
    id_gecidade_int integer,
    contato_str character varying(30),
    telefone_str character varying(20),
    fax_str character varying(20),
    email_str character varying(40),
    cgc_str character varying(18),
    inscricao_str character varying(20),
    logo_txt text,
    tabela_filha_str character varying(30),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    chave_filacobranca_str character varying(60),
    id_geempresa_int bigint,
    cod_centro_custo character varying(60),
    dsc_centro_custo character varying(60),
    ngs_str character varying(1),
    id_carteira_npcob_basao_int bigint
);

--
-- TOC entry 915 (class 1259 OID 35198)
-- Name: gecliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 916 (class 1259 OID 35206)
-- Name: geclienteservidor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geclienteservidor (
    id_geclienteservidor_int bigint DEFAULT nextval(('"geclienteservidor_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_geparametroservidor_int bigint
);

--
-- TOC entry 917 (class 1259 OID 35212)
-- Name: geclienteservidor_bkp02092014; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geclienteservidor_bkp02092014 (
    id_geclienteservidor_int bigint,
    id_gecliente_int bigint,
    id_geparametroservidor_int bigint
);

--
-- TOC entry 918 (class 1259 OID 35221)
-- Name: geclienteservidor_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geclienteservidor_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 919 (class 1259 OID 35228)
-- Name: gecma_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecma_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 920 (class 1259 OID 35237)
-- Name: gecomarca_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecomarca_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 921 (class 1259 OID 35239)
-- Name: gecomarca; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecomarca (
    id_gecomarca_int bigint DEFAULT nextval('public.gecomarca_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(40),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    id_gefilial_int bigint,
    id_gecidade_int bigint
);

--
-- TOC entry 922 (class 1259 OID 35254)
-- Name: geconclusaopreajuizamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geconclusaopreajuizamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 923 (class 1259 OID 35258)
-- Name: geconclusaopreajuizamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geconclusaopreajuizamento (
    id_geconclusaopreajuizamento_int bigint DEFAULT nextval('public.geconclusaopreajuizamento_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(255),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 924 (class 1259 OID 35268)
-- Name: gecontrolepa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecontrolepa (
    id_gecontrolepa_int bigint DEFAULT nextval(('"gecontrolepa_seq"'::text)::regclass) NOT NULL,
    ramal_int smallint,
    chave_str character varying(20),
    data_dat timestamp with time zone,
    id_geusuario_int bigint,
    aplicacao_str character varying(10)
);

--
-- TOC entry 925 (class 1259 OID 35274)
-- Name: gecontrolepa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecontrolepa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 926 (class 1259 OID 35281)
-- Name: gecriticanotificacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecriticanotificacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 927 (class 1259 OID 35285)
-- Name: gecriticanotificacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecriticanotificacao (
    id_gecriticanotificacao_int bigint DEFAULT nextval('public.gecriticanotificacao_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(115),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    id_gefilial_int bigint
);

--
-- TOC entry 928 (class 1259 OID 35304)
-- Name: gecriticas; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gecriticas (
    id_gecriticas_int bigint DEFAULT nextval(('"gecriticas_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int character varying(2),
    processo_str character varying(10),
    data_dat date,
    estrategia_str character varying(5),
    subclassificacao_int bigint,
    critica_str character varying(50),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    contrato_ajustado_str character varying(1),
    data_acerto_dat date,
    log_usuario_int bigint,
    historico_txt text
);

--
-- TOC entry 929 (class 1259 OID 35315)
-- Name: gecriticas_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gecriticas_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 930 (class 1259 OID 35321)
-- Name: gedepartamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gedepartamento (
    id_gedepartamento_int bigint DEFAULT nextval(('"gedepartamento_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(8),
    nome_str character varying(40),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 931 (class 1259 OID 35332)
-- Name: gedepartamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gedepartamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 932 (class 1259 OID 35340)
-- Name: gediasatrasotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gediasatrasotmp (
    chave_str character varying(20),
    dias_atraso_int bigint,
    ordem_str character varying(5)
);

--
-- TOC entry 933 (class 1259 OID 35347)
-- Name: gedocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gedocumento (
    id_gedocumento_int bigint DEFAULT nextval(('"gedocumento_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_getipodocumento_int bigint,
    data_anexo_dat date,
    descricao_str character varying(70),
    caminho_arquivo_str character varying(150),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 934 (class 1259 OID 35355)
-- Name: gedocumento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gedocumento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 935 (class 1259 OID 35363)
-- Name: gedocumentogrupoprocesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gedocumentogrupoprocesso (
    id_gedocumentogrupoprocesso_int bigint DEFAULT nextval(('"gedocumentogrupoprocesso_seq"'::text)::regclass) NOT NULL,
    id_gegrupoprocesso_int bigint,
    data_anexo_dat date,
    descricao_str character varying(70),
    caminho_arquivo_str character varying(150),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 936 (class 1259 OID 35371)
-- Name: gedocumentogrupoprocesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gedocumentogrupoprocesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 937 (class 1259 OID 35382)
-- Name: geduplicacaoremessatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geduplicacaoremessatmp (
    id_gecliente_int bigint,
    registro_int integer,
    contrato_str character varying(30),
    parcela_str character varying(3),
    linha_str text
);

--
-- TOC entry 938 (class 1259 OID 35392)
-- Name: geempresa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geempresa (
    id_geempresa_int bigint DEFAULT nextval(('"geempresa_seq"'::text)::regclass) NOT NULL,
    codigo_str character(7) NOT NULL,
    nome_str character varying(40),
    ativo_str character varying(1),
    endereco1_str character varying(40),
    endereco2_str character varying(40),
    cep_str character varying(9),
    id_gecidade_int integer,
    contato_str character varying(30),
    telefone_str character varying(20),
    fax_str character varying(20),
    email_str character varying(40),
    cgc_str character varying(18),
    inscricao_str character(20),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    mci_empresa_int bigint,
    centralizadora_int bigint
);

--
-- TOC entry 939 (class 1259 OID 35396)
-- Name: geempresa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geempresa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 940 (class 1259 OID 35401)
-- Name: geentradausuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geentradausuario (
    id_geentradausuario_int bigint DEFAULT nextval(('"geentradausuario_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(15),
    nome_amigavel_str character varying(50),
    caption_txt text,
    script_load_txt text,
    script_retorno_txt text,
    tipo_entrada_str character varying(50)
);

--
-- TOC entry 941 (class 1259 OID 35413)
-- Name: geentradausuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geentradausuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 942 (class 1259 OID 35415)
-- Name: geenvioemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geenvioemail (
    id_geenvioemail_int bigint DEFAULT nextval(('"geenvioemail_seq"'::text)::regclass) NOT NULL,
    email_str character varying(255),
    tstamp timestamp with time zone,
    bloqueado bit(1)
);

--
-- TOC entry 943 (class 1259 OID 35425)
-- Name: geenvioemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geenvioemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 944 (class 1259 OID 35429)
-- Name: geerrosys; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geerrosys (
    id_geerrosys_int bigint DEFAULT nextval(('"geerrosys_seq"'::text)::regclass) NOT NULL,
    cod_erro bigint NOT NULL,
    tipo_erro character varying(1) NOT NULL,
    tipo_botoes smallint,
    botao_defaut smallint,
    mensagem text,
    detalhes text,
    manut smallint,
    "timestamp" timestamp with time zone,
    cont_senha character varying(1),
    exibe_detalhes character varying(1),
    status character varying(1),
    id_geusuario_int bigint
);

--
-- TOC entry 945 (class 1259 OID 35442)
-- Name: geerrosys_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geerrosys_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 946 (class 1259 OID 35451)
-- Name: gefaixaatraso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefaixaatraso (
    id_gefaixaatraso_int bigint DEFAULT nextval(('"gefaixaatraso_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(60),
    dia_inicial_int bigint,
    dia_final_int bigint,
    caracter_str character varying(1),
    id_cbsitcontato_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    grupo_str character varying(30),
    id_cbetapa_int bigint,
    provisionamento_num double precision,
    meta_int bigint,
    id_gegrupofaixaatraso_int bigint
);

--
-- TOC entry 947 (class 1259 OID 35455)
-- Name: gefaixaatraso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gefaixaatraso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 948 (class 1259 OID 35461)
-- Name: gefasesolicitacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gefasesolicitacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 949 (class 1259 OID 35468)
-- Name: gefasesolicitacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefasesolicitacao (
    id_gefasesolicitacao_int bigint DEFAULT nextval('public.gefasesolicitacao_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(40),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    finalizacao_bit bit(1)
);

--
-- TOC entry 950 (class 1259 OID 35478)
-- Name: geferiado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geferiado (
    id_geferiado_int bigint DEFAULT nextval(('geferiado_seq'::text)::regclass) NOT NULL,
    data_dat date,
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 951 (class 1259 OID 35490)
-- Name: geferiado_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geferiado_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 952 (class 1259 OID 35496)
-- Name: geferiadobradescocredimob; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geferiadobradescocredimob (
    id_geferiado_int bigint DEFAULT nextval(('geferiadobradescocredimob_seq'::text)::regclass) NOT NULL,
    data_dat date,
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 953 (class 1259 OID 35509)
-- Name: geferiadobradescocredimob_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geferiadobradescocredimob_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 954 (class 1259 OID 35511)
-- Name: gefilacobranca; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobranca (
    _chave_str character varying(20),
    _sequencia_int bigint,
    id_gecliente_int bigint,
    id_geparametrofilacobranca_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_geusuario_inclusao_int bigint,
    id_grupo_usuario_vinculado_original_int bigint,
    id_grupo_usuario_vinculado_int bigint,
    _tipo_usuario_vinculado_gu_str character varying(1),
    _contato_em_andamento_str character varying(1),
    _data_hora_agendamento_tmp timestamp with time zone,
    _data_hora_entrada_fila_tmp timestamp with time zone,
    contrato character varying(30),
    nome character varying(60),
    vencimento date,
    parcela bigint,
    principal double precision,
    atraso bigint,
    sit_contato bigint,
    positivo character varying(1),
    ativo_receptivo character varying(1),
    usuario character varying(60),
    _hora_inicio_contato timestamp with time zone,
    _hora_fim_contato timestamp with time zone,
    pz_solucao date,
    dt_ult_contato date,
    estado character varying(2),
    regiao character varying(40),
    tempo_contato character varying(8),
    grupo_usuario_direcionado character varying(60),
    tipo_negocio bigint,
    faixa_pagamento character varying(20),
    qtde_pagtos bigint,
    regua character varying(60),
    etapa character varying(60),
    data_stand_by date,
    data_pre_distrib_dat date,
    cidade_str character varying(100),
    bairro_str character varying(40),
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1),
    recorrencia_str character varying(1),
    _contato_em_andamento_recorrencia_str character varying(1),
    data_ultimo_pagamento_dat date
);

--
-- TOC entry 955 (class 1259 OID 35520)
-- Name: gefilacobrancaconfiguracoes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobrancaconfiguracoes (
    id_gefilacobrancaconfiguracoes_int bigint DEFAULT nextval(('"gefilacobrancaconfiguracoes_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    query text NOT NULL,
    monitoramento_totalizador_mt character varying(1),
    padrao_s character varying(1),
    caption_objeto character varying(60),
    objeto_label character varying(30),
    parametros_label text,
    objeto_text character varying(30),
    parametros_text text,
    objeto_percentual character varying(30),
    parametros_percentual text,
    zera_fila_cobranca character varying(1),
    exclui_apenas_registros_contactados character varying(1),
    id_geusuario_int bigint,
    inclusao_dat timestamp with time zone,
    excluir_contratos_com_situacao_igual character varying(60),
    total_registros_int bigint,
    total_registros_str character varying(1),
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1)
);

--
-- TOC entry 956 (class 1259 OID 35529)
-- Name: gefilacobrancaconfiguracoes_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gefilacobrancaconfiguracoes_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 957 (class 1259 OID 35537)
-- Name: gefilacobrancacredibel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobrancacredibel (
    _chave_str character varying(20),
    _sequencia_int bigint,
    id_gecliente_int bigint,
    id_geparametrofilacobranca_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_geusuario_inclusao_int bigint,
    id_grupo_usuario_vinculado_original_int bigint,
    id_grupo_usuario_vinculado_int bigint,
    _tipo_usuario_vinculado_gu_str character varying(1),
    _contato_em_andamento_str character varying(1),
    _data_hora_agendamento_tmp timestamp with time zone,
    _data_hora_entrada_fila_tmp timestamp with time zone,
    contrato character varying(30),
    nome character varying(60),
    vencimento date,
    parcela bigint,
    principal double precision,
    atraso bigint,
    sit_contato bigint,
    positivo character varying(1),
    ativo_receptivo character varying(1),
    usuario character varying(60),
    _hora_inicio_contato timestamp with time zone,
    _hora_fim_contato timestamp with time zone,
    pz_solucao date,
    dt_ult_contato date,
    estado character varying(2),
    regiao character varying(40),
    tempo_contato character varying(8),
    grupo_usuario_direcionado character varying(60),
    tipo_negocio bigint,
    faixa_pagamento character varying(20),
    qtde_pagtos bigint,
    regua character varying(60),
    etapa character varying(60),
    data_stand_by date,
    data_pre_distrib_dat date,
    cidade_str character varying(100),
    bairro_str character varying(40),
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1),
    recorrencia_str character varying(1),
    _contato_em_andamento_recorrencia_str character varying(1),
    data_ultimo_pagamento_dat date
);

--
-- TOC entry 1692 (class 1259 OID 66749164)
-- Name: gefilacobrancaimporta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobrancaimporta (
    chave_str character varying(30),
    contrato_str character varying(30),
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1),
    id_cbcontrato_int bigint,
    telefone_str character varying(20)
);

--
-- TOC entry 958 (class 1259 OID 35560)
-- Name: gefilacobrancalog; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobrancalog (
    id_gefilacobrancalog_int bigint DEFAULT nextval(('"id_gefilacobrancalog_seq"'::text)::regclass) NOT NULL,
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    data_hora_dat timestamp with time zone,
    evento_str character varying(100),
    observacoes_txt text,
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1)
);

--
-- TOC entry 959 (class 1259 OID 35569)
-- Name: gefilacobrancapirelli; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobrancapirelli (
    _chave_str character varying(20),
    _sequencia_int bigint,
    id_gecliente_int bigint,
    id_geparametrofilacobranca_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_geusuario_inclusao_int bigint,
    id_grupo_usuario_vinculado_original_int bigint,
    id_grupo_usuario_vinculado_int bigint,
    _tipo_usuario_vinculado_gu_str character varying(1),
    _contato_em_andamento_str character varying(1),
    _data_hora_agendamento_tmp timestamp with time zone,
    _data_hora_entrada_fila_tmp timestamp with time zone,
    contrato character varying(30),
    nome character varying(60),
    vencimento date,
    parcela bigint,
    principal double precision,
    atraso bigint,
    sit_contato bigint,
    positivo character varying(1),
    ativo_receptivo character varying(1),
    usuario character varying(60),
    _hora_inicio_contato timestamp with time zone,
    _hora_fim_contato timestamp with time zone,
    pz_solucao date,
    dt_ult_contato date,
    estado character varying(2),
    regiao character varying(40),
    tempo_contato character varying(8),
    grupo_usuario_direcionado character varying(60),
    tipo_negocio bigint,
    faixa_pagamento character varying(20),
    qtde_pagtos bigint,
    regua character varying(60),
    etapa character varying(60),
    data_stand_by date,
    data_pre_distrib_dat date,
    cidade_str character varying(100),
    bairro_str character varying(40),
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1),
    recorrencia_str character varying(1),
    _contato_em_andamento_recorrencia_str character varying(1),
    data_ultimo_pagamento_dat date
);

--
-- TOC entry 960 (class 1259 OID 35581)
-- Name: gefilacobrancaregistrosvinculados; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilacobrancaregistrosvinculados (
    grupo_usuario_direcionado_str character varying(60),
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    contrato_ja_existia_na_fila character varying(1),
    fila_automatica_str character varying(1),
    ligacao_efetuada_str character varying(1)
);

--
-- TOC entry 961 (class 1259 OID 35587)
-- Name: gefilial; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilial (
    id_gefilial_int bigint DEFAULT nextval(('"gefilial_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(7) NOT NULL,
    nome_str character varying(40),
    ativo_str character varying(1),
    id_geempresa_int bigint,
    endereco1_str character varying(40),
    endereco2_str character varying(40),
    cep_str character varying(9),
    id_gecidade_int bigint,
    contato_str character varying(30),
    telefone_str character varying(20),
    fax_str character varying(20),
    email_str character varying(40),
    cgc_str character varying(18),
    inscricao_str character varying(20),
    versao_sistema_str character varying(12),
    path_atualizacao_str character varying(100),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    ddd_fax_str character varying(5),
    ddd_str character varying(5),
    sigla_filial_str character varying(2),
    versao_sistema_compativel_str character varying(12),
    limite_atualizacao_tim timestamp without time zone,
    ip_str character varying(15),
    usuario_str character varying(15),
    senha_str character varying(15),
    horario_str character varying(60),
    bairro_str character varying(60),
    observacao_geral_txt character varying(60),
    gerente_str character varying(60),
    id_gefilial_npjur_int bigint,
    codigo_ngs_str character varying(10)
);

--
-- TOC entry 962 (class 1259 OID 35596)
-- Name: gefilial_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gefilial_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 963 (class 1259 OID 35605)
-- Name: gefilialgrupo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gefilialgrupo (
    id_gefilialgrupo_int bigint DEFAULT nextval(('"gefilialgrupo_seq"'::text)::regclass) NOT NULL,
    id_gegrupo_int bigint NOT NULL,
    id_gefilial_int bigint NOT NULL,
    ativo_str character varying(1),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone
);

--
-- TOC entry 964 (class 1259 OID 35616)
-- Name: gefilialgrupo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gefilialgrupo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 965 (class 1259 OID 35626)
-- Name: geflashback; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geflashback (
    id_geflashback_int integer DEFAULT nextval(('"geflashback_seq"'::text)::regclass) NOT NULL,
    valor_anterior_txt text,
    tstamp timestamp without time zone,
    ip_str character varying(30),
    id_gevalorparametro_int bigint,
    id_geparametro_int bigint
);

--
-- TOC entry 966 (class 1259 OID 35641)
-- Name: geflashback_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geflashback_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 967 (class 1259 OID 35645)
-- Name: gegrupo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupo (
    id_gegrupo_int bigint DEFAULT nextval(('"gegrupo_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    codigo_str character varying(7) NOT NULL,
    nome_str character varying(40),
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    tipo_grupo_str character varying(1),
    query_txt text,
    distribfinal_dat date,
    distribini_dat date,
    faixa_atraso_inicial_int bigint,
    faixa_atraso_final_int bigint,
    query_nova_txt text,
    uf_str character varying(2),
    pesquisa_str character varying(1),
    produto_str text
);

--
-- TOC entry 968 (class 1259 OID 35660)
-- Name: gegrupo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gegrupo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 969 (class 1259 OID 35669)
-- Name: gegrupoespnotificacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupoespnotificacao (
    id_gegrupoespnotificacao_int bigint DEFAULT nextval(('"gegrupoespnotificacao_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(15),
    nome_str character varying(25),
    uf_str character varying(2),
    tstamp timestamp with time zone,
    id_geusuario_int bigint
);

--
-- TOC entry 970 (class 1259 OID 35681)
-- Name: gegrupoetapa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupoetapa (
    id_gegrupoetapa_int bigint DEFAULT nextval(('"gegrupoetapa_seq"'::text)::regclass) NOT NULL,
    id_gegrupo_int bigint NOT NULL,
    id_cbetapa_int bigint NOT NULL,
    ativo_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 971 (class 1259 OID 35692)
-- Name: gegrupoetapa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gegrupoetapa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 972 (class 1259 OID 35696)
-- Name: gegrupofaixaatraso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gegrupofaixaatraso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 973 (class 1259 OID 35708)
-- Name: gegrupofaixaatraso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupofaixaatraso (
    id_gegrupofaixaatraso_int bigint DEFAULT nextval('public.gegrupofaixaatraso_seq'::regclass) NOT NULL,
    codigo_str character varying(30),
    descricao_str character varying(80),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    abrev_str character varying(15)
);

--
-- TOC entry 974 (class 1259 OID 35715)
-- Name: gegrupoparametro; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupoparametro (
    id_gegrupoparametro_int bigint DEFAULT nextval(('"gegrupoparametro_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(3) NOT NULL,
    descricao_str character varying(60),
    observacao_str text,
    status character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 975 (class 1259 OID 35728)
-- Name: gegrupoparametro_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gegrupoparametro_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 976 (class 1259 OID 35732)
-- Name: gegrupoprocesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupoprocesso (
    id_gegrupoprocesso_int bigint DEFAULT nextval(('"gegrupoprocesso_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(15) NOT NULL,
    nome_str character varying(40),
    administrador_str character varying(1),
    id_gegrupoprocessoadm_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    ativo_str character varying(2)
);

--
-- TOC entry 977 (class 1259 OID 35743)
-- Name: gegrupoprocesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gegrupoprocesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 978 (class 1259 OID 35750)
-- Name: gegrupotipodocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupotipodocumento (
    id_gegrupotipodocumento_int bigint DEFAULT nextval(('"gegrupotipodocumento_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(30),
    descricao_str character varying(70),
    obrigatorio_todos_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 979 (class 1259 OID 35756)
-- Name: gegrupousuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gegrupousuario (
    id_gegrupousuario_int bigint DEFAULT nextval(('"gegrupousuario_seq"'::text)::regclass) NOT NULL,
    id_gegrupo_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    ativo_str character varying(1),
    usuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 980 (class 1259 OID 35764)
-- Name: gegrupousuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gegrupousuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 981 (class 1259 OID 35774)
-- Name: gehistorico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gehistorico (
    id_gehistorico_int bigint DEFAULT nextval(('"gehistorico_seq"'::text)::regclass) NOT NULL,
    id_geusuario_int bigint,
    id_geaplicacao_int bigint,
    id_gecliente_int bigint,
    data_hora_dat timestamp with time zone,
    tabela_str character varying(60),
    id_tabela_str character varying(60),
    evento_str character varying(1),
    obs_txt text
);

--
-- TOC entry 982 (class 1259 OID 35789)
-- Name: gehistorico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gehistorico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 983 (class 1259 OID 35793)
-- Name: gehistoricocamponline; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gehistoricocamponline (
    id_historicocamponline_int bigint DEFAULT nextval(('"gehistoricocamponline_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    nome_arquivo_str character varying(40),
    tamanho_arquivo_int bigint,
    processo_executado_str character varying(16),
    situacao_processo_str character varying(7),
    data_hora_dat timestamp without time zone
);

--
-- TOC entry 984 (class 1259 OID 35808)
-- Name: gehistoricocamponline_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gehistoricocamponline_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 985 (class 1259 OID 35812)
-- Name: gehistoricousuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gehistoricousuario (
    id_gehistoricousuario_int bigint DEFAULT nextval(('"gehistoricousuario_seq"'::text)::regclass) NOT NULL,
    id_geusuario_int bigint,
    id_geaplicacao_int bigint,
    id_gecliente_int bigint,
    data_hora_dat timestamp with time zone,
    evento_str character varying(100),
    contrato_str character varying(30),
    parcela_int bigint,
    obs_txt text
);

--
-- TOC entry 986 (class 1259 OID 35829)
-- Name: gehistoricousuario1; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gehistoricousuario1 (
    id_gehistoricousuario1_int bigint DEFAULT nextval(('"gehistoricousuario1_seq"'::text)::regclass) NOT NULL,
    id_geusuario_int bigint,
    id_geaplicacao_int bigint,
    id_gecliente_int bigint,
    data_hora_dat timestamp with time zone,
    evento_str character varying(100),
    contrato_str character varying(30),
    parcela_int bigint,
    obs_txt text
);

--
-- TOC entry 987 (class 1259 OID 35838)
-- Name: gehistoricousuario1_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gehistoricousuario1_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 988 (class 1259 OID 35847)
-- Name: gehistoricousuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gehistoricousuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 989 (class 1259 OID 35857)
-- Name: geinconsistencia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geinconsistencia (
    id_gecliente_int bigint,
    data_processamento_dat date,
    hora_processamento_tim timestamp with time zone,
    data_recebimento_dat date,
    tipo_arquivo_str character varying(10),
    nome_arquivo_str character varying(30),
    qtde_registros_int integer
);

--
-- TOC entry 990 (class 1259 OID 35864)
-- Name: geinconsistencia_backup; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geinconsistencia_backup (
    id_gecliente_int bigint,
    data_processamento_dat date,
    hora_processamento_tim timestamp with time zone,
    data_recebimento_dat date,
    tipo_arquivo_str character varying(10),
    nome_arquivo_str character varying(30),
    qtde_registros_int integer
);

--
-- TOC entry 991 (class 1259 OID 35872)
-- Name: geinconsistenciacontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geinconsistenciacontrato (
    id_gecliente_int bigint,
    data_processamento_dat date,
    contrato_str character varying(30),
    nosso_numero_str character varying(17),
    codigo_erro_str character varying(3),
    erro_str character varying(80),
    data_recebimento_dat date,
    tipo_arquivo_str character varying(10),
    nome_arquivo_str character varying(30)
);

--
-- TOC entry 992 (class 1259 OID 35878)
-- Name: geinfomarketing; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geinfomarketing (
    cpf_str character varying(20),
    endereco_str character varying(100),
    bairro_str character varying(100),
    cidade_str character varying(100),
    estado_str character varying(2),
    cep_int bigint
);

--
-- TOC entry 993 (class 1259 OID 35889)
-- Name: geinstrucaobaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geinstrucaobaixa (
    id_geinstrucaobaixa_int bigint DEFAULT nextval(('"geinstrucaobaixa_seq"'::text)::regclass) NOT NULL,
    id_fibanco_int bigint,
    id_gemotivobaixa_int bigint,
    comando_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    tipo_str character varying(1),
    id_geusuario_int bigint,
    ativo_str character varying(1),
    tstamp timestamp with time zone
);

--
-- TOC entry 994 (class 1259 OID 35893)
-- Name: geinstrucaobaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geinstrucaobaixa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 995 (class 1259 OID 35898)
-- Name: geinstrucaobaixacritica; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geinstrucaobaixacritica (
    id_geinstrucaobaixacritica_int bigint DEFAULT nextval(('geinstrucaobaixacritica_seq'::text)::regclass) NOT NULL,
    id_geinstrucaobaixa_int integer,
    codigo_str character varying(5),
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 996 (class 1259 OID 35906)
-- Name: geinstrucaobaixacritica_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geinstrucaobaixacritica_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 997 (class 1259 OID 35908)
-- Name: geintegracao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geintegracao (
    id_geintegracao_int bigint NOT NULL,
    descricao_str character varying(100) NOT NULL,
    id_gecliente_int bigint NOT NULL
);

--
-- TOC entry 998 (class 1259 OID 35915)
-- Name: geintegracao_id_geintegracao_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geintegracao_id_geintegracao_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12065 (class 0 OID 0)
-- Dependencies: 998
-- Name: geintegracao_id_geintegracao_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.geintegracao_id_geintegracao_int_seq OWNED BY public.geintegracao.id_geintegracao_int;

--
-- TOC entry 999 (class 1259 OID 35925)
-- Name: geitemprocesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geitemprocesso (
    id_geitemprocesso_int bigint DEFAULT nextval(('"geitemprocesso_seq"'::text)::regclass) NOT NULL,
    id_geprocesso_int bigint,
    sequencia_int bigint,
    descricao_str character varying(60),
    prazo_int smallint,
    procedimentos_txt text,
    id_geaplicacao_int bigint,
    carrega_str character varying(1),
    finalizado_str character varying(1),
    id_gegrupoprocesso_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1000 (class 1259 OID 35934)
-- Name: geitemprocesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geitemprocesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1001 (class 1259 OID 35950)
-- Name: gekitdocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gekitdocumento (
    id_gekitdocumento_int bigint DEFAULT nextval(('gekitdocumento_seq'::text)::regclass) NOT NULL,
    codigo_str character varying(20) NOT NULL,
    nome_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp(0) with time zone
);

--
-- TOC entry 1002 (class 1259 OID 35959)
-- Name: gekitdocumento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gekitdocumento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1003 (class 1259 OID 35968)
-- Name: geliberasitcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geliberasitcontato (
    id_geliberasitcontato_int bigint DEFAULT nextval(('"geliberasitcontato_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_gedepartamento_int bigint,
    id_cbsitcontato_int bigint,
    ativo_bit bit(1) DEFAULT (0)::bit(1),
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 1004 (class 1259 OID 35977)
-- Name: geliberasitcontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geliberasitcontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1005 (class 1259 OID 35992)
-- Name: gelogdiscador; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gelogdiscador (
    id_gelogdiscador_int integer NOT NULL,
    id_geusuarioramal_int integer NOT NULL,
    id_cbcontrato_int integer NOT NULL,
    id_geqlcontato_int integer,
    discadormanual_bit bit(1) NOT NULL,
    telefone_num numeric(12,0),
    data_dat date NOT NULL,
    hora_final_int bigint
);

--
-- TOC entry 1006 (class 1259 OID 35997)
-- Name: gelogeventodiscador; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gelogeventodiscador (
    id_getipologeventodiscador_int integer NOT NULL,
    id_gelogdiscador_int integer NOT NULL,
    segundo_int bigint,
    retorno_str character varying(50)
);

--
-- TOC entry 1007 (class 1259 OID 36002)
-- Name: gelogsys; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gelogsys (
    id_gelogsys_int bigint DEFAULT nextval(('"gelogsys_seq"'::text)::regclass) NOT NULL,
    banco_str character varying(20),
    id_geusuario_int bigint,
    data_dat timestamp with time zone,
    valor_inicial_txt text,
    valor_alterado_txt text,
    chave_str character varying(40),
    maquina_str character varying(40),
    tela_str character varying(30)
);

--
-- TOC entry 1008 (class 1259 OID 36018)
-- Name: gelogsys_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gelogsys_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1009 (class 1259 OID 36026)
-- Name: gemenu; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemenu (
    id_gemenu_int bigint DEFAULT nextval(('"gemenu_seq"'::text)::regclass) NOT NULL,
    estrutura_str character varying(20) NOT NULL,
    descricao_str character varying(60),
    tipo_str character varying(1),
    relatorio_str character varying(1),
    disponivel_str character varying(1),
    id_geaplicacao_int bigint,
    imagem_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1010 (class 1259 OID 36035)
-- Name: gemenu_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gemenu_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1011 (class 1259 OID 36040)
-- Name: gemeta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemeta (
    id_gemeta_int integer NOT NULL,
    id_gecliente_int integer NOT NULL,
    codigo_str character varying(10) NOT NULL,
    nome_str character varying(60) NOT NULL,
    turno_str character varying(1) NOT NULL,
    valor_int integer NOT NULL
);

--
-- TOC entry 1012 (class 1259 OID 36049)
-- Name: gemetasitcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemetasitcontato (
    id_cbsitcontato_int bigint NOT NULL,
    id_gemeta_int integer NOT NULL
);

--
-- TOC entry 1013 (class 1259 OID 36057)
-- Name: gemodeloimpressao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemodeloimpressao (
    id_gemodeloimpressao_int integer NOT NULL,
    codigo_str character varying(20),
    descricao_str character varying(100)
);

--
-- TOC entry 1014 (class 1259 OID 36060)
-- Name: gemodeloimpressao_id_gemodeloimpressao_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gemodeloimpressao_id_gemodeloimpressao_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12066 (class 0 OID 0)
-- Dependencies: 1014
-- Name: gemodeloimpressao_id_gemodeloimpressao_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.gemodeloimpressao_id_gemodeloimpressao_int_seq OWNED BY public.gemodeloimpressao.id_gemodeloimpressao_int;

--
-- TOC entry 1015 (class 1259 OID 36070)
-- Name: gemonitoramento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemonitoramento (
    base_str character varying(60),
    ip_str character varying(60),
    pid_str character varying(10),
    query_str text,
    id_geusuario_int bigint,
    login_str character varying(60),
    nomecompleto_str character varying(60),
    ramal_int smallint,
    data_dat character varying(30),
    tipo_contato_str character varying(1),
    data_hora timestamp with time zone
);

--
-- TOC entry 1016 (class 1259 OID 36084)
-- Name: gemotivobaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemotivobaixa (
    id_gemotivobaixa_int bigint DEFAULT nextval(('"gemotivobaixa_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1017 (class 1259 OID 36096)
-- Name: gemotivobaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gemotivobaixa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1018 (class 1259 OID 36109)
-- Name: gemotivoinadimplencia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemotivoinadimplencia (
    id_gemotivoinadimplencia_int bigint DEFAULT nextval(('"gemotivoinadimplencia_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10) NOT NULL,
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_geaplicacao_int bigint,
    codigo_banco_str character varying(10),
    ativo_str character varying(1),
    descricao_banco_str character varying(100),
    tempo_str character varying(1),
    codigo_sem_interesse_str character varying(20)
);

--
-- TOC entry 1019 (class 1259 OID 36115)
-- Name: gemotivoinadimplencia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gemotivoinadimplencia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1020 (class 1259 OID 36126)
-- Name: gemotivonajuizamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemotivonajuizamento (
    id_gemotivonajuizamento_int bigint DEFAULT nextval(('"gemotivonajuizamento_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint,
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    id_getipopendencianaojuizamento_int bigint,
    ativo_str character varying(1),
    codigo_banco_str character varying(10),
    descricao_banco_str character varying(60)
);

--
-- TOC entry 1021 (class 1259 OID 36132)
-- Name: gemotivonajuizamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gemotivonajuizamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1022 (class 1259 OID 36134)
-- Name: gemotivonajuizamentocliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemotivonajuizamentocliente (
    id_gecliente_int bigint NOT NULL,
    id_gemotivonajuizamento_int bigint NOT NULL,
    codigo_str character varying(20)
);

--
-- TOC entry 1023 (class 1259 OID 36147)
-- Name: gemotivoresultadotriagem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gemotivoresultadotriagem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1024 (class 1259 OID 36153)
-- Name: gemotivoresultadotriagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gemotivoresultadotriagem (
    id_gemotivoresultadotriagem_int bigint DEFAULT nextval('public.gemotivoresultadotriagem_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 1025 (class 1259 OID 36162)
-- Name: georgaotriagem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.georgaotriagem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1026 (class 1259 OID 36169)
-- Name: georgaotriagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.georgaotriagem (
    id_georgaotriagem_int bigint DEFAULT nextval('public.georgaotriagem_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 1027 (class 1259 OID 36189)
-- Name: geparamemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparamemail (
    id_geparamemail_int integer DEFAULT nextval(('"geparamemail_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int integer,
    codigo_str character varying(30),
    descricao_str character varying(60),
    assunto_str character varying(60),
    corpo_str text,
    id_geusuario_int integer,
    tstamp timestamp without time zone,
    email_retorno_str text
);

--
-- TOC entry 1028 (class 1259 OID 36198)
-- Name: geparamemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparamemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1029 (class 1259 OID 36206)
-- Name: geparamenvioemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparamenvioemail (
    id_geparamenvioemail_int bigint NOT NULL,
    remetente_str character varying(60),
    servidor_smtp_str character varying(60),
    senha_str character varying(30),
    usuario_str character varying(30),
    porta_smtp_int smallint,
    dominio_str character varying(50)
);

--
-- TOC entry 1030 (class 1259 OID 36211)
-- Name: geparametro; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametro (
    id_geparametro_int bigint DEFAULT nextval(('"geparametro_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(20) NOT NULL,
    id_gegrupoparametro_int bigint NOT NULL,
    descricao_str character varying(60),
    tipo_str character varying(1),
    controle_str character varying(1),
    status_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    seguranca_str character varying(1),
    senha_str character varying(5),
    help_str text,
    estatico_str character varying(1)
);

--
-- TOC entry 1031 (class 1259 OID 36224)
-- Name: geparametro_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparametro_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1032 (class 1259 OID 36231)
-- Name: geparametroaplic; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametroaplic (
    id_geparametroaplic_int bigint DEFAULT nextval(('"geparametroaplic_seq"'::text)::regclass) NOT NULL,
    id_geaplicacao_int bigint,
    id_geparametro_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1033 (class 1259 OID 36244)
-- Name: geparametroaplic_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparametroaplic_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1034 (class 1259 OID 36252)
-- Name: geparametrofilacobranca; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametrofilacobranca (
    id_geparametrofilacobranca_int bigint DEFAULT nextval(('"geparametrofilacobranca_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint
);

--
-- TOC entry 1035 (class 1259 OID 36263)
-- Name: geparametrofilacobranca_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparametrofilacobranca_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1036 (class 1259 OID 36271)
-- Name: geparametroid; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametroid (
    id_geparametroid_int bigint DEFAULT nextval(('"geparametroid_seq"'::text)::regclass) NOT NULL,
    tabela_str character varying(30) NOT NULL,
    id_tabela_int bigint,
    codigo_str character varying(20),
    tamanho_codigo_int bigint,
    codigo_automatico_bit character varying(1),
    preenche_zero_bit character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1037 (class 1259 OID 36284)
-- Name: geparametroid_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparametroid_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1038 (class 1259 OID 36294)
-- Name: geparametroservidor; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametroservidor (
    id_geparametroservidor_int bigint DEFAULT nextval(('"geparametroservidor_seq"'::text)::regclass) NOT NULL,
    ip_str character varying(100),
    senha_str character varying(60),
    banco_str character varying(50),
    descricao_str character varying(100),
    porta_str character varying(10),
    pasta_dump_str character varying(255),
    ip_dump_str character varying(15),
    senha_ssh_str character varying(255),
    senha_ssh_dump_str character varying(255),
    ip_externo_bit bit(1),
    usuario_str character varying(60),
    ip_slave_str character varying(255)
);

--
-- TOC entry 1039 (class 1259 OID 36302)
-- Name: geparametroservidor_26012020; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametroservidor_26012020 (
    id_geparametroservidor_int bigint,
    ip_str character varying(100),
    senha_str character varying(60),
    banco_str character varying(50),
    descricao_str character varying(100),
    porta_str character varying(10),
    pasta_dump_str character varying(255),
    ip_dump_str character varying(15),
    senha_ssh_str character varying(255),
    senha_ssh_dump_str character varying(255),
    ip_externo_bit bit(1),
    usuario_str character varying(60),
    ip_slave_str character varying(255)
);

--
-- TOC entry 1040 (class 1259 OID 36318)
-- Name: geparametroservidor_bkp02092014; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametroservidor_bkp02092014 (
    id_geparametroservidor_int bigint,
    ip_str character varying(100),
    senha_str character varying(20),
    banco_str character varying(50),
    descricao_str character varying(100),
    porta_str character varying(10),
    pasta_dump_str character varying(255),
    ip_dump_str character varying(15),
    senha_ssh_str character varying(255),
    senha_ssh_dump_str character varying(255),
    ip_externo_bit bit(1)
);

--
-- TOC entry 1041 (class 1259 OID 36328)
-- Name: geparametroservidor_bkp15032017; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametroservidor_bkp15032017 (
    id_geparametroservidor_int bigint,
    ip_str character varying(100),
    senha_str character varying(60),
    banco_str character varying(50),
    descricao_str character varying(100),
    porta_str character varying(10),
    pasta_dump_str character varying(255),
    ip_dump_str character varying(15),
    senha_ssh_str character varying(255),
    senha_ssh_dump_str character varying(255),
    ip_externo_bit bit(1),
    usuario_str character varying(60)
);

--
-- TOC entry 1042 (class 1259 OID 36340)
-- Name: geparametroservidor_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparametroservidor_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1043 (class 1259 OID 36348)
-- Name: geparametrosys; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparametrosys (
    servidor_smtp_str character varying(60),
    porta_smtp_int smallint,
    remetente_str character varying(60),
    dominio_str character varying(50),
    usuario_autasc_str character varying(30),
    senha_autasc_str character varying(30),
    usuario_aut64_str character varying(30),
    senha_aut64_str character varying(30),
    path_destino_anexo_str character varying(150),
    calculo_str character varying(30)
);

--
-- TOC entry 1044 (class 1259 OID 36358)
-- Name: geparamrelatorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparamrelatorio (
    id_geparamrelatorio_int bigint DEFAULT nextval(('"geparamrelatorio_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    sequencia_int bigint,
    situacao_str character varying(1),
    condicao_str character varying(150),
    id_cbsituacaocontrato_int bigint,
    situacao_parcela_int character varying(10)
);

--
-- TOC entry 1045 (class 1259 OID 36366)
-- Name: geparamrelatorio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geparamrelatorio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1046 (class 1259 OID 36370)
-- Name: geparcelastatus; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geparcelastatus (
    id_gecliente_int bigint,
    id_cbparcela_int bigint,
    data_dat date,
    data_arquivo_dat date,
    tipo_arquivo_str character varying(50),
    sequencia_arquivo_int bigint,
    contrato_str character varying(11),
    data_vencimento_dat date,
    valor_principal_num double precision,
    status_registro_str character varying(3),
    data_status_dat date,
    valor_pago_num double precision,
    valor_correcao_num double precision,
    linha_int bigint
);

--
-- TOC entry 1047 (class 1259 OID 36381)
-- Name: gepesquisaatual_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gepesquisaatual_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1048 (class 1259 OID 36390)
-- Name: gepolitica; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gepolitica (
    id_gepolitica_int bigint DEFAULT nextval(('"gepolitica_seq"'::text)::regclass) NOT NULL,
    arquivo_str character varying(50),
    banco_int bigint,
    codigo_escob_int bigint,
    codigo_fase_int bigint,
    codigo_politica_int bigint,
    data_base_dat date,
    data_envio_dat date,
    data_fim_vigencia_dat date,
    data_geracao_dat date,
    data_inicio_vigencia_dat date,
    descricao_str character varying(60),
    dias_atraso_max_int integer,
    dias_atraso_min_int integer,
    hora_envio_str character varying(10),
    nome_fase_str character varying(60),
    perc_correcao_divida_num double precision,
    perc_financiamento_num double precision,
    perc_max_desconto_num double precision,
    perc_min_desconto_num double precision,
    perc_min_entrada_num double precision,
    qtd_parcelas_com_desc_int integer,
    qtd_parcelas_int integer,
    qtd_parcelas_sem_reajuste_int integer,
    sequencial_int bigint,
    valor_minimo_entrada_num double precision,
    valor_remuneracao_num double precision,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1049 (class 1259 OID 36400)
-- Name: gepolitica_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gepolitica_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1050 (class 1259 OID 36411)
-- Name: gepreanalise_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gepreanalise_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1051 (class 1259 OID 36419)
-- Name: gepreanalise; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gepreanalise (
    id_gepreanalise_int bigint DEFAULT nextval('public.gepreanalise_seq'::regclass) NOT NULL,
    id_geclassificacaopreanalise_int bigint,
    data_pre_analise_dat date,
    situacao_str character varying(255),
    id_geusuario_int bigint,
    observacao_txt text,
    id_gesolicitacaodocumento_int bigint,
    id_cbfollowup_int bigint,
    bem_localizado_terc_bit bit(1),
    observacao_cliente_txt text,
    cliente_localizado_bit bit(1)
);

--
-- TOC entry 1052 (class 1259 OID 36434)
-- Name: gepreanalisefollowup; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gepreanalisefollowup (
    id_gepreanalise_int bigint NOT NULL,
    id_cbfollowup_int bigint NOT NULL
);

--
-- TOC entry 1053 (class 1259 OID 36441)
-- Name: gepreanaliseveiculo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gepreanaliseveiculo (
    id_gepreanalise_int bigint NOT NULL,
    id_cbgarantia_int bigint NOT NULL,
    localizado_bit bit(1),
    localizado_terc_bit bit(1)
);

--
-- TOC entry 1054 (class 1259 OID 36449)
-- Name: geprocesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geprocesso (
    id_geprocesso_int bigint DEFAULT nextval(('"geprocesso_seq"'::text)::regclass) NOT NULL,
    id_gegrupoprocesso_int bigint,
    codigo_str character varying(20),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    permite_varios_str character varying(1),
    admalteraprazo_str character varying(1),
    id_geraretroativo_str character varying(1),
    sql_campos_txt text,
    sql_tabelas_txt text,
    sql_where_txt text
);

--
-- TOC entry 1055 (class 1259 OID 36465)
-- Name: geprocesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geprocesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1056 (class 1259 OID 36471)
-- Name: geprocessocontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geprocessocontrato (
    id_geprocessocontrato_int bigint DEFAULT nextval(('"geprocessocontrato_seq"'::text)::regclass) NOT NULL,
    id_geitemprocesso_int bigint,
    id_gegrupoprocesso_int bigint,
    id_cbcontrato_int bigint,
    prazo_original_dat timestamp with time zone,
    prazo_dat timestamp with time zone,
    conclusao_dat timestamp with time zone,
    obs_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    chave_str character varying(60)
);

--
-- TOC entry 1057 (class 1259 OID 36491)
-- Name: geprocessocontrato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geprocessocontrato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1058 (class 1259 OID 36495)
-- Name: geprotocoloimportacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geprotocoloimportacao (
    id_geprotocoloimportacao_int bigint DEFAULT nextval(('"geprotocoloimportacao_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    nome_arquivo_str character varying(60),
    codigo_remessa_str character varying(40),
    qtde_contratos_enviados_int bigint,
    qtde_parcelas_enviadas_int bigint,
    qtde_contratos_baixados_int bigint,
    qtde_parcelas_baixadas_int bigint,
    valor_total_parcelas_num double precision,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    data_importacao_dat date,
    faixa_atraso character varying(60),
    faixa_atraso_str character varying(60)
);

--
-- TOC entry 1059 (class 1259 OID 36509)
-- Name: geprotocoloimportacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geprotocoloimportacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1060 (class 1259 OID 36513)
-- Name: geqlbasaofila; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlbasaofila (
    id_geqlbasaofila_int bigint DEFAULT nextval(('geqlbasaofila_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_geqlcliente_int bigint,
    id_pessoa_int bigint,
    nome_str character varying(100),
    estado_civil_str character varying(1),
    dt_nascimento_dat date,
    cpf_str character varying(30),
    cpf_tratado_str character varying(15),
    tipo_pessoa_str character varying(1),
    rg_str character varying(15),
    data_falecimento_dat date,
    sexo_str character varying(1),
    incricao_estadual_str character varying(30),
    id_pessoa_telefone_int bigint,
    telefone_str character varying(20),
    id_pessoa_email_int bigint,
    email_str character varying(100),
    tstamp timestamp with time zone,
    id_transmite_str character varying(1),
    score_int bigint,
    lote_int bigint,
    cpf_usuario_str character varying(30),
    nome_usuario_str character varying(150),
    classificacao bigint
);

--
-- TOC entry 1061 (class 1259 OID 36527)
-- Name: geqlbasaofila_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlbasaofila_seq
    START WITH 310270
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1062 (class 1259 OID 36531)
-- Name: geqlcliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcliente (
    id_geqlcliente_int bigint DEFAULT nextval(('"geqlcliente_seq"'::text)::regclass) NOT NULL,
    cpf_str character varying(30),
    rg_str character varying(15),
    org_exp_str character varying(15),
    uf_rg_str character varying(2),
    data_exp_dat date,
    nome_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    observacao_str character varying(1000),
    ccf_int smallint,
    cpf_provisorio_bit bit(1),
    id_pessoa_int bigint
);

--
-- TOC entry 1063 (class 1259 OID 36545)
-- Name: geqlcliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlcliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1064 (class 1259 OID 36549)
-- Name: geqlconfiguracaocontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlconfiguracaocontato (
    id_geqlconfiguracaocontato_int bigint DEFAULT nextval(('"geqlconfiguracaocontato_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    sequencia_int integer,
    id_geqltipocontato_int bigint,
    tabela_tratamento_str character varying(60),
    campo_tratamento_str character varying(60),
    tabela_contrato_str character varying(60),
    campo_contrato_str character varying(60),
    terceirizada_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1065 (class 1259 OID 36562)
-- Name: geqlconfiguracaocontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlconfiguracaocontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1066 (class 1259 OID 36570)
-- Name: geqlconfiguracaoemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlconfiguracaoemail (
    id_geqlconfiguracaoemail_int bigint DEFAULT nextval(('"geqlconfiguracaoemail_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    sequencia_int integer,
    id_geqltipoemail_int bigint,
    tabela_tratamento_str character varying(60),
    campo_tratamento_str character varying(60),
    tabela_contrato_str character varying(60),
    campo_contrato_str character varying(60),
    terceirizada_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1067 (class 1259 OID 36576)
-- Name: geqlconfiguracaoemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlconfiguracaoemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1068 (class 1259 OID 36582)
-- Name: geqlconfiguracaoendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlconfiguracaoendereco (
    id_geqlconfiguracaoendereco_int bigint DEFAULT nextval(('"geqlconfiguracaoendereco_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    sequencia_int integer,
    id_geqltipoendereco_int bigint,
    tabela_tratamento_str character varying(60),
    campo_tratamento_str character varying(60),
    tabela_contrato_str character varying(60),
    campo_contrato_str character varying(60),
    terceirizada_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1069 (class 1259 OID 36592)
-- Name: geqlconfiguracaoendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlconfiguracaoendereco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1070 (class 1259 OID 36602)
-- Name: geqlconfiguracaotratamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlconfiguracaotratamento (
    id_geqlconfiguracaotratamento_int bigint DEFAULT nextval(('"geqlconfiguracaotratamento_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    sequencia_int integer,
    tabela_tratamento_str character varying(60),
    campo_tratamento_str character varying(60),
    tabela_contrato_str character varying(60),
    campo_contrato_str character varying(60),
    terceirizada_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1071 (class 1259 OID 36616)
-- Name: geqlconfiguracaotratamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlconfiguracaotratamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1072 (class 1259 OID 36620)
-- Name: geqlcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato (
    id_geqlcontato_int bigint DEFAULT nextval(('"geqlcontato_seq"'::text)::regclass) NOT NULL,
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    contato_str character varying(256),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geqlendereco_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone DEFAULT now(),
    observacao_str character varying(1000),
    ramal_str character varying(10),
    nome_contato_str character varying(60),
    cpf_str character varying(30),
    rg_str character varying(30),
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone DEFAULT now(),
    id_geqltratamentocontato_int bigint,
    id_geusuario_inclusao_int integer,
    id_geqlcontrato_int bigint,
    excluido_bit bit(1) DEFAULT (0)::bit(1),
    contato_antigo_str character varying(256),
    score bigint,
    tipo_pessoa_str character varying(10),
    whatsapp_str character varying(1),
    trava_feriado_str character varying(1),
    id_gecliente_original_int bigint,
    motivo_str character varying(10),
    score_int smallint,
    data_score_dat date,
    id_pessoa_telefone_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    ranking_lemit_int integer,
    data_alteracao_ranking_dat timestamp without time zone,
    score_lemit_int integer,
    data_alteracao_score_dat timestamp without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    data_inibicao_tel_suspeito_tstamp timestamp with time zone,
    obs_inibicao_tel_suspeito_str character varying(300),
    origem_carteira_str character varying(50),
    tstamp_data_score timestamp without time zone,
    bloqueado_bit bit(1) DEFAULT (0)::bit(1) NOT NULL,
    CONSTRAINT ck_geqlcontato_classificacao CHECK ((((classificacao_str)::text = '1 - Excelente'::text) OR ((classificacao_str)::text = '2 - Bom'::text) OR ((classificacao_str)::text = '9 - Indefinido'::text) OR ((classificacao_str)::text = '3 - Ruim'::text)))
);

--
-- TOC entry 1073 (class 1259 OID 36638)
-- Name: geqlcontato_backup12022025; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_backup12022025 (
    id_geqlcontato_int bigint,
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    contato_str character varying(256),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geqlendereco_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    observacao_str character varying(1000),
    ramal_str character varying(10),
    nome_contato_str character varying(60),
    cpf_str character varying(30),
    rg_str character varying(30),
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone,
    id_geqltratamentocontato_int bigint,
    id_geusuario_inclusao_int integer,
    id_geqlcontrato_int bigint,
    excluido_bit bit(1),
    contato_antigo_str character varying(256),
    score bigint,
    tipo_pessoa_str character varying(10),
    whatsapp_str character varying(1),
    trava_feriado_str character varying(1),
    id_gecliente_original_int bigint,
    motivo_str character varying(10),
    score_int smallint,
    data_score_dat date,
    id_pessoa_telefone_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    ranking_lemit_int integer,
    data_alteracao_ranking_dat timestamp without time zone,
    score_lemit_int integer,
    data_alteracao_score_dat timestamp without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    data_inibicao_tel_suspeito_tstamp timestamp with time zone,
    obs_inibicao_tel_suspeito_str character varying(300),
    origem_carteira_str character varying(50),
    tstamp_data_score timestamp without time zone,
    bloqueado_bit bit(1)
);

--
-- TOC entry 1074 (class 1259 OID 36647)
-- Name: geqlcontato_bckp_21082018; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_bckp_21082018 (
    id_geqlcontato_int bigint,
    contato_str character varying(256)
);

--
-- TOC entry 1075 (class 1259 OID 36658)
-- Name: geqlcontato_bckp_23082018; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_bckp_23082018 (
    id_geqlcontato_int bigint,
    contato_str character varying(256)
);

--
-- TOC entry 1076 (class 1259 OID 36666)
-- Name: geqlcontato_bckp_29082018; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_bckp_29082018 (
    id_geqlcontato_int bigint,
    contato_str character varying(256)
);

--
-- TOC entry 1077 (class 1259 OID 36677)
-- Name: geqlcontato_bckp_31082018; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_bckp_31082018 (
    id_geqlcontato_int bigint,
    contato_str character varying(256)
);

--
-- TOC entry 1078 (class 1259 OID 36683)
-- Name: geqlcontato_bloqueiohistorico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlcontato_bloqueiohistorico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1079 (class 1259 OID 36693)
-- Name: geqlcontato_bloqueiohistorico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_bloqueiohistorico (
    id_geqlcontato_bloqueiohistorico_int bigint DEFAULT nextval('public.geqlcontato_bloqueiohistorico_seq'::regclass) NOT NULL,
    id_geqlcontato_int bigint NOT NULL,
    historico_str text NOT NULL,
    bloqueado_bit bit(1) NOT NULL,
    bloqueado_old_bit bit(1) NOT NULL,
    id_geusuario_int bigint NOT NULL,
    client_ip_str character varying(100) DEFAULT inet_client_addr(),
    tstamp timestamp without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1080 (class 1259 OID 36710)
-- Name: geqlcontato_dba; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_dba (
    id_geqlcontato_int bigint,
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    contato_str character varying(256),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geqlendereco_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    observacao_str character varying(1000),
    ramal_str character varying(10),
    nome_contato_str character varying(60),
    cpf_str character varying(30),
    rg_str character varying(30),
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone,
    id_geqltratamentocontato_int bigint,
    id_geusuario_inclusao_int integer,
    id_geqlcontrato_int bigint,
    excluido_bit bit(1),
    contato_antigo_str character varying(256),
    score bigint,
    tipo_pessoa_str character varying(10),
    whatsapp_str character varying(1),
    trava_feriado_str character varying(1),
    id_gecliente_original_int bigint,
    motivo_str character varying(10),
    score_int smallint,
    data_score_dat date,
    id_pessoa_telefone_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    ranking_lemit_int integer,
    data_alteracao_ranking_dat timestamp without time zone,
    score_lemit_int integer,
    data_alteracao_score_dat timestamp without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    data_inibicao_tel_suspeito_tstamp timestamp with time zone,
    obs_inibicao_tel_suspeito_str character varying(300)
);

--
-- TOC entry 1081 (class 1259 OID 36730)
-- Name: geqlcontato_excecao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_excecao (
    contato_str character varying(20),
    tamanho_int integer
);

--
-- TOC entry 1082 (class 1259 OID 36744)
-- Name: geqlcontato_improdutivo_block; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_improdutivo_block (
    contato_str character varying(256) NOT NULL,
    tstamp_inclusao_dat timestamp with time zone DEFAULT now() NOT NULL
);

--
-- TOC entry 1083 (class 1259 OID 36751)
-- Name: geqlcontato_old; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontato_old (
    id_geqlcontato_int bigint,
    excluido_old_bit bit(1),
    contato_str character varying(256)
);

--
-- TOC entry 1084 (class 1259 OID 36760)
-- Name: geqlcontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlcontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1085 (class 1259 OID 36768)
-- Name: geqlcontrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlcontrato (
    id_geqlcontrato_int bigint DEFAULT nextval(('"geqlcontrato_seq"'::text)::regclass) NOT NULL,
    id_geqlcliente_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1086 (class 1259 OID 36778)
-- Name: geqlcontrato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlcontrato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1087 (class 1259 OID 36788)
-- Name: geqlemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlemail (
    id_geqlemail_int bigint DEFAULT nextval(('"geqlemail_seq"'::text)::regclass) NOT NULL,
    id_geqlcliente_int bigint,
    id_geqltipoemail_int bigint,
    email_str character varying(255),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone DEFAULT now(),
    observacao_str character varying(1000),
    nome_contato_str character varying(60),
    id_geusuario_inclusao_int integer,
    excluido_bit bit(1) DEFAULT (0)::bit(1),
    id_geqltratamentoemail_int bigint,
    id_geqltratamento_int bigint,
    id_gecliente_original_int bigint,
    id_pessoa_email_int bigint,
    score_int bigint,
    tstamp_envio timestamp with time zone,
    tstamp_retorno timestamp with time zone,
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    CONSTRAINT ck_geqlemail_classificacao CHECK ((((classificacao_str)::text = '1 - Excelente'::text) OR ((classificacao_str)::text = '2 - Bom'::text) OR ((classificacao_str)::text = '9 - Indefinido'::text) OR ((classificacao_str)::text = '3 - Ruim'::text)))
);

--
-- TOC entry 1088 (class 1259 OID 36803)
-- Name: geqlemail_27032018; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlemail_27032018 (
    id_geqlcliente_int bigint,
    email_str character varying(255),
    classificacao_str character varying(15)
);

--
-- TOC entry 1089 (class 1259 OID 36811)
-- Name: geqlemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1090 (class 1259 OID 36820)
-- Name: geqlemailbloqueado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlemailbloqueado (
    id_geqlemailbloqueado_int bigint DEFAULT nextval(('"geqlemailbloqueado_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    email_str character varying(255),
    id_geusuario_int bigint,
    tstamp timestamp with time zone DEFAULT now()
);

--
-- TOC entry 1091 (class 1259 OID 36835)
-- Name: geqlemailbloqueado_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlemailbloqueado_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1092 (class 1259 OID 36844)
-- Name: geqlemaildominiobloqueado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlemaildominiobloqueado (
    id_geqlemaildominiobloqueado_int bigint DEFAULT nextval(('"geqlemaildominiobloqueado_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    dominio_str character varying(255),
    id_geusuario_int bigint,
    tstamp timestamp with time zone DEFAULT now()
);

--
-- TOC entry 1093 (class 1259 OID 36852)
-- Name: geqlemaildominiobloqueado_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlemaildominiobloqueado_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1094 (class 1259 OID 36862)
-- Name: geqlemailexcecao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlemailexcecao (
    id_geqlemailexcecao_int bigint DEFAULT nextval(('"geqlemailexcecao_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    email_str character varying(255),
    id_geusuario_int bigint,
    tstamp timestamp with time zone DEFAULT now()
);

--
-- TOC entry 1095 (class 1259 OID 36870)
-- Name: geqlemailexcecao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlemailexcecao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1096 (class 1259 OID 36875)
-- Name: geqlendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlendereco (
    id_geqlendereco_int bigint DEFAULT nextval(('"geqlendereco_seq"'::text)::regclass) NOT NULL,
    id_geqlcliente_int bigint,
    id_geqltipoendereco_int bigint,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone DEFAULT now(),
    observacao_str character varying(1000),
    inibir_correspondencia_str character varying(1),
    id_geqltratamento_int bigint,
    tstamp_inclusao timestamp without time zone DEFAULT now(),
    id_geqltratamentoendereco_int bigint,
    id_geusuario_inclusao_int integer,
    excluido_bit bit(1) DEFAULT (0)::bit(1),
    contatopagoufacil_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date,
    id_cemiterio_int bigint,
    data_cemiterio_tst timestamp with time zone,
    CONSTRAINT ck_geqlendereco_classificacao CHECK ((((classificacao_str)::text = '1 - Excelente'::text) OR ((classificacao_str)::text = '2 - Bom'::text) OR ((classificacao_str)::text = '9 - Indefinido'::text) OR ((classificacao_str)::text = '3 - Ruim'::text)))
);

--
-- TOC entry 1097 (class 1259 OID 36890)
-- Name: geqlendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlendereco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1098 (class 1259 OID 36901)
-- Name: geqlgrupotipocontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlgrupotipocontato (
    id_geqlgrupotipocontato_int bigint DEFAULT nextval(('"geqlgrupotipocontato_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    prioridade_int smallint,
    quantidade_max_contato_int smallint,
    posicao_altitude_int bigint,
    posicao_aspect_int bigint,
    tamanho_altitude_int bigint,
    tamanho_aspect_int bigint
);

--
-- TOC entry 1099 (class 1259 OID 36909)
-- Name: geqlgrupotipocontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlgrupotipocontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1100 (class 1259 OID 36917)
-- Name: geqlhistorico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlhistorico (
    id_geqlhistorico_int bigint DEFAULT nextval(('"geqlhistorico_seq"'::text)::regclass) NOT NULL,
    id_geqlcliente_int bigint,
    tipo_str character varying(1),
    acao_str character varying(30),
    historico_str character varying(1000),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    classificacao_str character varying(15),
    id_contatodiverso_int bigint
);

--
-- TOC entry 1101 (class 1259 OID 36929)
-- Name: geqlhistorico_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlhistorico_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1102 (class 1259 OID 36934)
-- Name: geqlresponsavel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlresponsavel (
    id_geqlresponsavel_int bigint DEFAULT nextval(('"geqlresponsavel_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    valor_num double precision,
    tipo_valor_str character(1),
    cpf_str text,
    ativo_bit bit(1) DEFAULT '1'::"bit"
);

--
-- TOC entry 1103 (class 1259 OID 36952)
-- Name: geqlresponsavel_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlresponsavel_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1104 (class 1259 OID 36956)
-- Name: geqlresponsavelemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlresponsavelemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1105 (class 1259 OID 36969)
-- Name: geqlresponsavelemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlresponsavelemail (
    id_geqlresponsavelemail_int bigint DEFAULT nextval('public.geqlresponsavelemail_seq'::regclass) NOT NULL,
    id_geqlresponsavel_int bigint,
    id_geusuario_int bigint,
    ativo_str character varying(1)
);

--
-- TOC entry 1106 (class 1259 OID 36977)
-- Name: geqlresultadotratamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlresultadotratamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1107 (class 1259 OID 36990)
-- Name: geqlresultadotratamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlresultadotratamento (
    id_geqlresultadotratamento_int bigint DEFAULT nextval('public.geqlresultadotratamento_seq'::regclass) NOT NULL,
    id_gecliente_int bigint,
    data_dat date,
    hora_tim timestamp without time zone,
    arquivo_str character varying(60),
    cpf_str character varying(30),
    nome_str character varying(60),
    qtde_end_ant_int smallint,
    qtde_cont_ant_int smallint,
    envio_dat date,
    retorno_dat date,
    qtde_end_novo_int smallint,
    qtde_cont_novo_int smallint,
    biro_str character varying(1),
    npcob_str character varying(1),
    qtde_ema_ant_int smallint,
    qtde_ema_novo_int smallint,
    lote_int integer
);

--
-- TOC entry 1108 (class 1259 OID 36998)
-- Name: geqlsituacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlsituacao (
    id_geqlsituacao_int bigint DEFAULT nextval(('"geqlsituacao_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(30),
    posit_neg_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1109 (class 1259 OID 37013)
-- Name: geqlsituacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlsituacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1110 (class 1259 OID 37019)
-- Name: geqlskipping_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqlskipping_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1111 (class 1259 OID 37032)
-- Name: geqlskipping; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqlskipping (
    id_geqlskipping_int integer DEFAULT nextval('public.geqlskipping_seq'::regclass) NOT NULL,
    data_hora_tim timestamp without time zone DEFAULT now() NOT NULL,
    positivonegativo_bit bit(1) NOT NULL,
    id_sysskipping_int integer NOT NULL,
    id_geqlcontato_int integer NOT NULL,
    lote_int integer NOT NULL,
    contato_str character varying(256)
);

--
-- TOC entry 1112 (class 1259 OID 37041)
-- Name: geqltipocontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltipocontato (
    id_geqltipocontato_int bigint DEFAULT nextval(('"geqltipocontato_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    prioridade_int smallint,
    somente_visualizacao_str character varying(1),
    campo_cbcontrato_str character varying(1),
    vincula_contrato_str character varying(10),
    ativo_bit bit(1)
);

--
-- TOC entry 1113 (class 1259 OID 37053)
-- Name: geqltipocontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltipocontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1114 (class 1259 OID 37060)
-- Name: geqltipocontatogrupotipocontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltipocontatogrupotipocontato (
    id_geqltipocontatogrupotipocontato_int bigint DEFAULT nextval(('"geqltipocontatogrupotipocontato_seq"'::text)::regclass) NOT NULL,
    id_geqltipocontato_int bigint NOT NULL,
    id_geqlgrupotipocontato_int bigint NOT NULL,
    ordem_int smallint
);

--
-- TOC entry 1115 (class 1259 OID 37068)
-- Name: geqltipocontatogrupotipocontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltipocontatogrupotipocontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1116 (class 1259 OID 37079)
-- Name: geqltipoemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltipoemail (
    id_geqltipoemail_int bigint DEFAULT nextval(('"geqltipoemail_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    prioridade_int smallint,
    somente_visualizacao_str character varying(1),
    campo_cbcontrato_str character varying(1)
);

--
-- TOC entry 1117 (class 1259 OID 37092)
-- Name: geqltipoemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltipoemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1118 (class 1259 OID 37098)
-- Name: geqltipoendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltipoendereco (
    id_geqltipoendereco_int bigint DEFAULT nextval(('"geqltipoendereco_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(30),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    prioridade_int smallint,
    somente_visualizacao_str character varying(1),
    campo_cbcontrato_str character varying(1),
    senha_alte_str character varying(255)
);

--
-- TOC entry 1119 (class 1259 OID 37110)
-- Name: geqltipoendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltipoendereco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1120 (class 1259 OID 37116)
-- Name: geqltratamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltratamento (
    id_geqltratamento_int bigint DEFAULT nextval(('"geqltratamento_seq"'::text)::regclass) NOT NULL,
    id_geqlcliente_int bigint,
    solicitacao_dat timestamp with time zone,
    conclusao_dat timestamp with time zone,
    id_geqlresponsavel_int bigint,
    id_geqlsituacao_int bigint,
    sequencia_int bigint DEFAULT nextval(('"geqltratamento_seq"'::text)::regclass) NOT NULL,
    id_geusuariotratamento_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    forma_localizacao_str character varying(10),
    retorno_positivo_str character varying(1),
    agregado_npcob_str character varying(1),
    id_geqltratamentolote_int bigint,
    tipo_tratamento_str character varying(5),
    valor_num real,
    tipo_valor_str character(1)
);

--
-- TOC entry 1121 (class 1259 OID 37129)
-- Name: geqltratamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1122 (class 1259 OID 37137)
-- Name: geqltratamentocontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltratamentocontato (
    id_geqltratamentocontato_int bigint DEFAULT nextval(('"geqltratamentocontato_seq"'::text)::regclass) NOT NULL,
    id_geqltratamento_int bigint,
    contato_str character varying(256),
    observacao_str character varying(1000),
    nome_contato_str character varying(60),
    classificacao_str character varying(15),
    id_geqlcliente_int bigint,
    id_geqltipocontato_int bigint,
    agregado_npcob_str character varying(1),
    id_geqlcontato_int bigint,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date
);

--
-- TOC entry 1123 (class 1259 OID 37147)
-- Name: geqltratamentocontato_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentocontato_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1124 (class 1259 OID 37158)
-- Name: geqltratamentocontatoneg_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentocontatoneg_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1125 (class 1259 OID 37165)
-- Name: geqltratamentoemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltratamentoemail (
    id_geqltratamentoemail_int bigint DEFAULT nextval(('"geqltratamentoemail_seq"'::text)::regclass) NOT NULL,
    id_geqltratamento_int bigint,
    email_str character varying(256),
    observacao_str character varying(1000),
    classificacao_str character varying(15),
    id_geqlcliente_int bigint,
    id_geqltipoemail_int bigint,
    agregado_npcob_str character varying(1),
    id_geqlemail_int bigint,
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date
);

--
-- TOC entry 1126 (class 1259 OID 37172)
-- Name: geqltratamentoemail_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentoemail_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1127 (class 1259 OID 37184)
-- Name: geqltratamentoendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltratamentoendereco (
    id_geqltratamentoendereco_int bigint DEFAULT nextval(('"geqltratamentoendereco_seq"'::text)::regclass) NOT NULL,
    id_geqltratamento_int bigint,
    endereco_str character varying(100),
    complemento_str character varying(60),
    observacao_str character varying(1000),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2),
    classificacao_str character varying(15),
    id_geqlcliente_int bigint,
    id_geqltipoendereco_int bigint,
    agregado_npcob_str character varying(1),
    id_geqlresponsavel_int integer,
    id_geusuario_ge070_int integer,
    data_importacao_ge070_dat date
);

--
-- TOC entry 1128 (class 1259 OID 37196)
-- Name: geqltratamentoendereco_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentoendereco_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1129 (class 1259 OID 37203)
-- Name: geqltratamentoendereconeg_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentoendereconeg_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1130 (class 1259 OID 37219)
-- Name: geqltratamentolote; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geqltratamentolote (
    id_geqltratamentolote_int bigint DEFAULT nextval(('"geqltratamentolote_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint,
    nome_str character varying(60),
    data_dat date DEFAULT ('now'::text)::date,
    id_gecliente_int bigint
);

--
-- TOC entry 1131 (class 1259 OID 37229)
-- Name: geqltratamentolote_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentolote_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1132 (class 1259 OID 37238)
-- Name: geqltratamentosequencia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geqltratamentosequencia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1133 (class 1259 OID 37245)
-- Name: geramal; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geramal (
    id_geramal_int integer NOT NULL,
    id_geempresa_int integer,
    id_gefilial_int integer,
    ramal_int bigint NOT NULL,
    ativo_receptivo_bit bit(1),
    ativo_bit bit(1)
);

--
-- TOC entry 1134 (class 1259 OID 37255)
-- Name: geregrabloqueiotelefone; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geregrabloqueiotelefone (
    id_geregrabloqueiotelefone_int integer NOT NULL,
    uf_rg_str character varying(2) NOT NULL,
    ddd_str character varying(2) NOT NULL,
    qtde_acionamento_int integer NOT NULL,
    tipo_bloqueio_str character varying(3) NOT NULL
);

--
-- TOC entry 1135 (class 1259 OID 37264)
-- Name: geregrabloqueiotelefone_id_geregrabloqueiotelefone_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geregrabloqueiotelefone_id_geregrabloqueiotelefone_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12067 (class 0 OID 0)
-- Dependencies: 1135
-- Name: geregrabloqueiotelefone_id_geregrabloqueiotelefone_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.geregrabloqueiotelefone_id_geregrabloqueiotelefone_int_seq OWNED BY public.geregrabloqueiotelefone.id_geregrabloqueiotelefone_int;

--
-- TOC entry 1136 (class 1259 OID 37281)
-- Name: gerelatorioquebras; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gerelatorioquebras (
    tabela_quebra_str character varying(60),
    nome_arq_str character varying(255),
    id_gecliente_int bigint,
    id_geaplicacao_int bigint
);

--
-- TOC entry 1137 (class 1259 OID 37290)
-- Name: geretornocma; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geretornocma (
    id_geretornocma_int bigint DEFAULT nextval(('geretornocma_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbitembordero_int bigint,
    venc_boleto_dat date,
    data_recebido_tim timestamp without time zone,
    data_enviocma_tim timestamp without time zone,
    situacao_str character varying(100),
    tstamp timestamp without time zone,
    chave_cma_str character varying(20),
    destino_str character varying(150),
    tipo_retorno_str character varying(10)
);

--
-- TOC entry 1138 (class 1259 OID 37299)
-- Name: geretornocma_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geretornocma_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1139 (class 1259 OID 37307)
-- Name: geretornosms; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geretornosms (
    id_geretornosms_int bigint DEFAULT nextval(('"geretornosms_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    id_geusuario_int bigint,
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    telefone_envio_int bigint,
    status_retorno_str character varying(100),
    data_envio_dat date,
    data_retorno_dat date,
    nome_arquivo_str character varying(255),
    mensagem_str character varying(150),
    tstamp timestamp without time zone,
    data_agendamento_dat date,
    tipo_registro_str character varying(1) DEFAULT 'T'::character varying,
    codigo_tn_str character varying(3)
);

--
-- TOC entry 1140 (class 1259 OID 37314)
-- Name: geretornosms_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geretornosms_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1141 (class 1259 OID 37322)
-- Name: gesequencia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesequencia (
    id_gesequencia_int bigint DEFAULT nextval(('"gesequencia_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(60),
    tamanho_int bigint,
    inicio_int bigint,
    limite_int bigint,
    alerta_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 1142 (class 1259 OID 37333)
-- Name: gesequencia1_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequencia1_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 8999999999
    CACHE 1;

--
-- TOC entry 1143 (class 1259 OID 37347)
-- Name: gesequencia2_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequencia2_seq
    START WITH 49400000
    INCREMENT BY 1
    MINVALUE 49400000
    MAXVALUE 49599999
    CACHE 1;

--
-- TOC entry 1144 (class 1259 OID 37351)
-- Name: gesequencia3_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequencia3_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 99999999999
    CACHE 1;

--
-- TOC entry 1145 (class 1259 OID 37359)
-- Name: gesequencia4_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequencia4_seq
    START WITH 0
    INCREMENT BY 1
    MINVALUE 0
    MAXVALUE 88888888
    CACHE 1;

--
-- TOC entry 1146 (class 1259 OID 37366)
-- Name: gesequencia5_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequencia5_seq
    START WITH 1
    INCREMENT BY 1
    MINVALUE 0
    MAXVALUE 88888888
    CACHE 1;

--
-- TOC entry 1147 (class 1259 OID 37372)
-- Name: gesequencia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequencia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 899999999
    CACHE 1;

--
-- TOC entry 1148 (class 1259 OID 37379)
-- Name: gesequenciaitem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesequenciaitem (
    id_gesequenciaitem_int bigint DEFAULT nextval(('"gesequenciaitem_seq"'::text)::regclass) NOT NULL,
    id_gesequencia_int bigint,
    tipo_str character(1),
    tabela_str character varying(40),
    posicao_inicial_int integer,
    tamanho_int integer,
    valor_str character varying(100),
    sequencia_int integer,
    campo_str character varying(40)
);

--
-- TOC entry 1149 (class 1259 OID 37387)
-- Name: gesequenciaitem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesequenciaitem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 999999999
    CACHE 1;

--
-- TOC entry 1150 (class 1259 OID 37401)
-- Name: gesititemprocesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesititemprocesso (
    id_gesititemprocesso_int bigint DEFAULT nextval(('"gesititemprocesso_seq"'::text)::regclass) NOT NULL,
    id_geitemprocesso_int bigint,
    id_cbsitcontato_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1151 (class 1259 OID 37410)
-- Name: gesititemprocesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesititemprocesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1152 (class 1259 OID 37421)
-- Name: gesolicitacaocustas_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesolicitacaocustas_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1153 (class 1259 OID 37425)
-- Name: gesolicitacaocustas; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesolicitacaocustas (
    id_gesolicitacaocustas_int bigint DEFAULT nextval('public.gesolicitacaocustas_seq'::regclass) NOT NULL,
    valor_parcelas_num real,
    numero_parcelas_int bigint,
    id_geqlendereco_int bigint,
    id_cbbordero_int bigint,
    id_geusuario_int bigint,
    data_envio_dat date DEFAULT ('now'::text)::date,
    data_calculo_dat date,
    valor_causa_num real,
    id_gesolicitacaodocumento_int bigint,
    valor_vincendas_num real,
    valor_notificacao_num real,
    data_1avincenda_dat date,
    cp_contrato_num real
);

--
-- TOC entry 1154 (class 1259 OID 37440)
-- Name: gesolicitacaodocumento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesolicitacaodocumento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1155 (class 1259 OID 37450)
-- Name: gesolicitacaodocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesolicitacaodocumento (
    id_gesolicitacaodocumento_int bigint DEFAULT nextval('public.gesolicitacaodocumento_seq'::regclass) NOT NULL,
    id_gecomarca_int bigint,
    id_gemotivonajuizamento_int bigint,
    id_cbcontrato_int bigint NOT NULL,
    id_gefilial_int bigint,
    codigo_str character varying(20),
    data_solicitacao_dat date,
    data_devolucao_dat date,
    data_protesto_dat date,
    fase_int integer,
    data_recebimento_dat date,
    id_gefasesolicitacao_int bigint,
    data_provisionamento_dat date,
    data_dat date,
    data_ultimo_evento_dat date,
    id_gebancoevento_int bigint,
    id_gebancofase_int bigint,
    data_migracao_pljur_dat date
);

--
-- TOC entry 1156 (class 1259 OID 37457)
-- Name: gesolicitacaodocumentonotificacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesolicitacaodocumentonotificacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1157 (class 1259 OID 37468)
-- Name: gesolicitacaodocumentonotificacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesolicitacaodocumentonotificacao (
    id_gesolicitacaodocumento_int bigint NOT NULL,
    id_cbdespesa_int bigint NOT NULL,
    critica_str text,
    id_gesolicitacaodocumentonotificacao_int bigint DEFAULT nextval('public.gesolicitacaodocumentonotificacao_seq'::regclass) NOT NULL,
    id_gecriticanotificacao_int bigint
);

--
-- TOC entry 1158 (class 1259 OID 37478)
-- Name: gesolicitacaotipodocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesolicitacaotipodocumento (
    id_getipodocumento_int bigint NOT NULL,
    id_gesolicitacaodocumento_int bigint NOT NULL
);

--
-- TOC entry 1159 (class 1259 OID 37489)
-- Name: gesoundex; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesoundex (
    cpf_str character varying(20),
    endereco_str character varying(100),
    bairro_str character varying(100),
    cidade_str character varying(100),
    estado_str character varying(2),
    cep_int bigint
);

--
-- TOC entry 1160 (class 1259 OID 37492)
-- Name: gestatusbaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gestatusbaixa (
    id_gestatusbaixa_int bigint DEFAULT nextval(('"gestatusbaixa_seq"'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    agencia_int bigint,
    conta_int bigint,
    data_header_dat date,
    arquivo_str character varying(100),
    tipo_baixa_str character varying(1),
    tstamp timestamp with time zone
);

--
-- TOC entry 1161 (class 1259 OID 37508)
-- Name: gestatusbaixa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gestatusbaixa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 2147483647
    CACHE 1;

--
-- TOC entry 1162 (class 1259 OID 37514)
-- Name: gestatusdespesa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gestatusdespesa (
    id_gestatusdespesa_int bigint DEFAULT nextval(('"gestatusdespesa_seq"'::text)::regclass) NOT NULL,
    data_dat date,
    id_gecliente_int bigint,
    id_cbcartorio_int bigint,
    arquivo_str character varying(200),
    tipo_processo_str character varying(15),
    qtde_registros_int integer,
    qtde_processados_int integer,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1163 (class 1259 OID 37522)
-- Name: gestatusdespesa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gestatusdespesa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1164 (class 1259 OID 37528)
-- Name: gestatusimporta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gestatusimporta (
    id_gestatusimporta_int bigint DEFAULT nextval(('"gestatusimporta_seq"'::text)::regclass) NOT NULL,
    data_importacao_dat date,
    status_int smallint,
    id_gecliente_int bigint,
    hora_importacao_tim timestamp with time zone,
    observacoes_str text,
    agencia_str character varying(6),
    nome_arquivo_str text,
    tipo_arquivo_str character varying(60),
    qtde_registros_int integer,
    data_lote_dat date,
    id_geusuario_int bigint,
    codigo_escritorio_str character varying(5),
    hora_lote_str character varying(8),
    conta_corrente_str character varying(8),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    sql_erro_str text,
    id_geaplicacao_int bigint
);

--
-- TOC entry 1165 (class 1259 OID 37542)
-- Name: gestatusimporta_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gestatusimporta_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1166 (class 1259 OID 37550)
-- Name: gestatustriagem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gestatustriagem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1167 (class 1259 OID 37559)
-- Name: gestatustriagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gestatustriagem (
    id_gestatustriagem_int bigint DEFAULT nextval('public.gestatustriagem_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(60),
    id_georgaotriagem_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone DEFAULT now(),
    tipo_str character varying(3)
);

--
-- TOC entry 1168 (class 1259 OID 37569)
-- Name: gesubcarteira; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gesubcarteira (
    id_gesubcarteira_int bigint DEFAULT nextval(('"gesubcarteira_seq"'::text)::regclass) NOT NULL,
    codigo_int bigint,
    id_gecliente_int bigint,
    descricao_str character varying(60)
);

--
-- TOC entry 1169 (class 1259 OID 37579)
-- Name: gesubcarteira_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gesubcarteira_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999999999
    CACHE 1;

--
-- TOC entry 1170 (class 1259 OID 37586)
-- Name: geterceiro; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geterceiro (
    id_geterceiro_int bigint DEFAULT nextval(('"geterceiro_seq"'::text)::regclass) NOT NULL,
    id_cbcontrato_int bigint,
    id_gecidade_int bigint,
    codigo_str character varying(10),
    nome_str character varying(60),
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(30),
    cep_str character varying(10),
    ddd_str character varying(5),
    telefone_str character varying(50),
    ramal_str character varying(5),
    telefone_contato_str character varying(50),
    ddd_cel_str character varying(5),
    celular_str character varying(20),
    ddd_com_str character varying(5),
    telefone_com_str character varying(20),
    ramal_com_str character varying(5),
    email_str character varying(200),
    estado_bem_str character varying(2),
    numero_oab_str character varying(20),
    observacao_txt text,
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1171 (class 1259 OID 37598)
-- Name: geterceiro_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geterceiro_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1172 (class 1259 OID 37612)
-- Name: geteste; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geteste (
    contrato_str character varying(30)
);

--
-- TOC entry 1173 (class 1259 OID 37617)
-- Name: getipodocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipodocumento (
    id_getipodocumento_int bigint DEFAULT nextval(('"getipodocumento_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(30),
    descricao_str character varying(70),
    abreviacao_str character varying(15),
    nomenclatura_arq_str character varying(2),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    codigobanco_int bigint
);

--
-- TOC entry 1174 (class 1259 OID 37623)
-- Name: getipodocumento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipodocumento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1175 (class 1259 OID 37628)
-- Name: getipodocumentokitdocumento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipodocumentokitdocumento (
    id_getipodocumento_int bigint NOT NULL,
    id_gekitdocumento_int bigint NOT NULL,
    id_geusuario_int bigint,
    tstamp timestamp(0) with time zone
);

--
-- TOC entry 1176 (class 1259 OID 37641)
-- Name: getipoenvio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipoenvio (
    id_getipoenvio_int bigint DEFAULT nextval(('"getipoenvio_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(30),
    path_str character varying(100),
    usuario_ftp_str character varying(100),
    ip_ftp_str character varying(100),
    senha_ftp_str character varying(100),
    id_gecliente_int bigint,
    modelo_str character varying(15),
    id_geusuario_txt text
);

--
-- TOC entry 1177 (class 1259 OID 37650)
-- Name: getipoenvio_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipoenvio_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1178 (class 1259 OID 37658)
-- Name: getipoenviomodelo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipoenviomodelo (
    id_getipoenviomodelo_int bigint DEFAULT nextval(('"getipoenviomodelo_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(1),
    descricao_str character varying(60),
    id_gecliente_int bigint
);

--
-- TOC entry 1179 (class 1259 OID 37664)
-- Name: getipoenviomodelo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipoenviomodelo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1180 (class 1259 OID 37670)
-- Name: getipogarantia; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipogarantia (
    id_getipogarantia_int bigint DEFAULT nextval(('"getipogarantia_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(5),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1181 (class 1259 OID 37679)
-- Name: getipogarantia_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipogarantia_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1182 (class 1259 OID 37692)
-- Name: getipologeventodiscador; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipologeventodiscador (
    id_getipologeventodiscador_int integer NOT NULL,
    codigo_str character varying(10) NOT NULL,
    nome_str character varying(60) NOT NULL,
    observacao_str character varying(1000)
);

--
-- TOC entry 1183 (class 1259 OID 37699)
-- Name: getipometa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipometa (
    id_getipometa_int bigint DEFAULT nextval(('getipometa_seq'::text)::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_int bigint,
    descricao_str character varying(60)
);

--
-- TOC entry 1184 (class 1259 OID 37711)
-- Name: getipometa_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipometa_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9999999999
    CACHE 1;

--
-- TOC entry 1185 (class 1259 OID 37718)
-- Name: getiponotificacao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getiponotificacao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1186 (class 1259 OID 37725)
-- Name: getiponotificacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getiponotificacao (
    id_getiponotificacao_int bigint DEFAULT nextval('public.getiponotificacao_seq'::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(40),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone DEFAULT now()
);

--
-- TOC entry 1187 (class 1259 OID 37738)
-- Name: getiponotificacaosolicitacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getiponotificacaosolicitacao (
    id_getiponotificacao_int bigint,
    id_gesolicitacaodocumentonotificacao_int bigint
);

--
-- TOC entry 1188 (class 1259 OID 37747)
-- Name: getipopendencianaojuizamento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipopendencianaojuizamento (
    id_getipopendencianaojuizamento_int bigint DEFAULT nextval(('getipopendencianaojuizamento_seq'::text)::regclass) NOT NULL,
    codigo_str character varying(10),
    descricao_str character varying(60),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1189 (class 1259 OID 37757)
-- Name: getipopendencianaojuizamento_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipopendencianaojuizamento_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1190 (class 1259 OID 37768)
-- Name: getipousuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getipousuario (
    id_getipousuario_int integer DEFAULT nextval(('"getipousuario_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(5),
    descricao_str character varying(30)
);

--
-- TOC entry 1191 (class 1259 OID 37776)
-- Name: getipousuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getipousuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 9223372
    CACHE 1;

--
-- TOC entry 1192 (class 1259 OID 37788)
-- Name: getriagemveiculo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.getriagemveiculo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1193 (class 1259 OID 37794)
-- Name: getriagemveiculo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getriagemveiculo (
    id_getriagemveiculo_int bigint DEFAULT nextval('public.getriagemveiculo_seq'::regclass) NOT NULL,
    id_cbgarantia_int bigint,
    id_gesolicitacaodocumento_int bigint,
    data_triagem_dat date,
    hora_triagem_tme timestamp without time zone,
    adequado_bit bit(1),
    id_geusuario_int bigint,
    id_gemotivoresultadotriagem_int bigint,
    id_georgaotriagem_int bigint,
    total_num real,
    aprovado_bit bit(1)
);

--
-- TOC entry 1194 (class 1259 OID 37806)
-- Name: getriagemveiculostatus; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.getriagemveiculostatus (
    id_getriagemveiculo_int bigint NOT NULL,
    id_gestatustriagem_int bigint NOT NULL,
    valor_num real
);

--
-- TOC entry 1195 (class 1259 OID 37811)
-- Name: geturno; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geturno (
    id_geturno_int smallint NOT NULL,
    codigo_str character varying(10) NOT NULL,
    tipo_int smallint NOT NULL,
    hora_inicial_tme time without time zone NOT NULL,
    intervalo_int smallint,
    hora_final_tme time without time zone NOT NULL
);

--
-- TOC entry 1196 (class 1259 OID 37819)
-- Name: geuf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geuf (
    id_geuf_int bigint DEFAULT nextval(('"geuf_seq"'::text)::regclass) NOT NULL,
    uf_str character varying(2),
    nome_str character varying(25),
    prazo_forum_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    cep_inicial_str character varying(10),
    regiao_str character varying(15)
);

--
-- TOC entry 1197 (class 1259 OID 37829)
-- Name: geuf_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geuf_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1198 (class 1259 OID 37845)
-- Name: geusuario; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geusuario (
    id_geusuario_int bigint DEFAULT nextval(('"geusuario_seq"'::text)::regclass) NOT NULL,
    codigo_str character varying(7) NOT NULL,
    nomecompleto_str character varying(60),
    ativo_str character varying(1),
    nomelogin_str character varying(20),
    senha_str character varying(20),
    usuarioadm_str character varying(1),
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    automatico_str character varying(1),
    usuario_int bigint,
    tstamp timestamp with time zone,
    qtde_fup_int bigint,
    usuario_externo_str character varying(1),
    recebe_email_str character varying(1),
    observacao_str text,
    email_str character varying(60),
    sit_contrato_str character varying(32),
    admissao_dat date,
    funcao_str character varying(120),
    data_nasc_dat date,
    controla_ramal_str character varying(1),
    escolaridade_str character varying(100),
    id_gedepartamento_int bigint,
    agenda_str character varying(1),
    fila_automatica_str character varying(1),
    cpf_str character varying(14),
    sincronizangs_str character varying(1),
    apenas_cb002_new2_str character varying(1),
    discagem_manual_str character varying(1),
    id_getipousuario_int integer,
    codigo_rh_str character varying(10),
    codigo_externo_str character varying(10),
    id_geatuacao01_int integer,
    id_geatuacao02_int integer,
    id_geatuacao03_int integer,
    id_geclassificacaocontao_int integer,
    anotacao_txt text,
    tstamp_ultimo_logou_npcob timestamp without time zone,
    normalizado_bi_str character varying(1),
    controla_softphone_str character varying(1),
    login_alpheratz_str character varying(20),
    id_sysfuncionario_int bigint,
    id_sysusuario_int bigint,
    genero_int integer,
    situacao_ci_int integer,
    loginbanco_str character varying(20),
    senhabanco_str character varying(20),
    campanha_obrigatoria_str character varying(1),
    situacao_ci_1_int integer,
    supervisor_experiencia_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    funcao_old_str character varying(120),
    consultordigital_str character varying(1) DEFAULT 'N'::character varying
);

--
-- TOC entry 1199 (class 1259 OID 37862)
-- Name: geusuario_386_ritm0107371; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geusuario_386_ritm0107371 (
    id_geusuario_int bigint,
    codigo_str character varying(7),
    nomecompleto_str character varying(60),
    ativo_str character varying(1),
    nomelogin_str character varying(20),
    senha_str character varying(20),
    usuarioadm_str character varying(1),
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    automatico_str character varying(1),
    usuario_int bigint,
    tstamp timestamp with time zone,
    qtde_fup_int bigint,
    usuario_externo_str character varying(1),
    recebe_email_str character varying(1),
    observacao_str text,
    email_str character varying(60),
    sit_contrato_str character varying(32),
    admissao_dat date,
    funcao_str character varying(120),
    data_nasc_dat date,
    controla_ramal_str character varying(1),
    escolaridade_str character varying(100),
    id_gedepartamento_int bigint,
    agenda_str character varying(1),
    fila_automatica_str character varying(1),
    cpf_str character varying(14),
    sincronizangs_str character varying(1),
    apenas_cb002_new2_str character varying(1),
    discagem_manual_str character varying(1),
    id_getipousuario_int integer,
    codigo_rh_str character varying(10),
    codigo_externo_str character varying(10),
    id_geatuacao01_int integer,
    id_geatuacao02_int integer,
    id_geatuacao03_int integer,
    id_geclassificacaocontao_int integer,
    anotacao_txt text,
    tstamp_ultimo_logou_npcob timestamp without time zone,
    normalizado_bi_str character varying(1),
    controla_softphone_str character varying(1),
    login_alpheratz_str character varying(20),
    id_sysfuncionario_int bigint,
    id_sysusuario_int bigint,
    genero_int integer,
    situacao_ci_int integer,
    loginbanco_str character varying(20),
    senhabanco_str character varying(20),
    campanha_obrigatoria_str character varying(1),
    situacao_ci_1_int integer,
    supervisor_experiencia_bit bit(1),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    funcao_old_str character varying(120)
);

--
-- TOC entry 1200 (class 1259 OID 37882)
-- Name: geusuario_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geusuario_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1201 (class 1259 OID 37895)
-- Name: geusuariocliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geusuariocliente (
    id_geusuariocliente_int bigint DEFAULT nextval(('"geusuariocliente_seq"'::text)::regclass) NOT NULL,
    id_geusuario_int bigint NOT NULL,
    id_gecliente_int bigint NOT NULL,
    tipo_contato_str character varying(1),
    turno_str character varying(1),
    usuario_int bigint,
    tstamp timestamp with time zone,
    horas_trabalho_int smallint,
    ramal_int bigint,
    faixa_atuacao_str character varying(30),
    atuacao_str character varying(30),
    horario_entrada_str character varying(5),
    horario_saida_str character varying(5),
    id_geclassificacaocontato_int bigint,
    id_geatuacao01_int integer,
    id_geatuacao02_int integer,
    id_geatuacao03_int integer,
    id_gesubcarteira_int bigint,
    id_geusuario_coordenador_int bigint,
    versao_sistema_str character varying(14),
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 1202 (class 1259 OID 37904)
-- Name: geusuariocliente_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geusuariocliente_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1203 (class 1259 OID 37906)
-- Name: geusuariogrupoprocesso; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geusuariogrupoprocesso (
    id_geusuariogrupoprocesso_int bigint DEFAULT nextval(('"geusuariogrupoprocesso_seq"'::text)::regclass) NOT NULL,
    id_gegrupoprocesso_int bigint,
    id_geusuario_int bigint,
    usuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1204 (class 1259 OID 37917)
-- Name: geusuariogrupoprocesso_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geusuariogrupoprocesso_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 999999999999999999
    CACHE 1;

--
-- TOC entry 1205 (class 1259 OID 37923)
-- Name: geusuariointegracao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geusuariointegracao (
    id_geusuariointegracao_int bigint NOT NULL,
    id_geusuario_int bigint NOT NULL,
    id_geintegracao_int bigint NOT NULL,
    usuario_str character varying(30) NOT NULL,
    senha_str character varying(30) NOT NULL
);

--
-- TOC entry 1206 (class 1259 OID 37932)
-- Name: geusuariointegracao_id_geusuariointegracao_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geusuariointegracao_id_geusuariointegracao_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12068 (class 0 OID 0)
-- Dependencies: 1206
-- Name: geusuariointegracao_id_geusuariointegracao_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.geusuariointegracao_id_geusuariointegracao_int_seq OWNED BY public.geusuariointegracao.id_geusuariointegracao_int;

--
-- TOC entry 1207 (class 1259 OID 37949)
-- Name: geusuarioramal; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geusuarioramal (
    id_geusuarioramal_int integer NOT NULL,
    id_geusuario_int integer NOT NULL,
    id_geramal_int integer NOT NULL,
    ip_str character varying(25) NOT NULL,
    data_tmp timestamp without time zone NOT NULL
);

--
-- TOC entry 1208 (class 1259 OID 37954)
-- Name: gevalorparametro; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gevalorparametro (
    id_gevalorparametro_int bigint DEFAULT nextval(('"gevalorparametro_seq"'::text)::regclass) NOT NULL,
    id_gegrupoparametro_int bigint NOT NULL,
    id_geparametro_int bigint NOT NULL,
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    valor_str text,
    status_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone,
    validade_dat date
);

--
-- TOC entry 1209 (class 1259 OID 37970)
-- Name: gevalorparametro2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.gevalorparametro2 (
    id_gevalorparametro_int bigint DEFAULT nextval(('"gevalorparametro_seq"'::text)::regclass) NOT NULL,
    id_gegrupoparametro_int bigint NOT NULL,
    id_geparametro_int bigint NOT NULL,
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    id_gecliente_int bigint,
    valor_str character varying(100),
    status_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp with time zone
);

--
-- TOC entry 1210 (class 1259 OID 37979)
-- Name: gevalorparametro_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.gevalorparametro_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1211 (class 1259 OID 37988)
-- Name: geviewcampo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geviewcampo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1212 (class 1259 OID 38002)
-- Name: geviewcampo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geviewcampo (
    id_geviewcampo_int bigint DEFAULT nextval('public.geviewcampo_seq'::regclass) NOT NULL,
    id_geviewsistema_int bigint,
    id_gecampotabela_int bigint,
    alias_str character varying(30),
    ordem_int smallint,
    tipo_str character varying(1),
    decimais_int smallint,
    formato_data_str character varying(10),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1213 (class 1259 OID 38015)
-- Name: geviewcondicao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geviewcondicao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1214 (class 1259 OID 38021)
-- Name: geviewcondicao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geviewcondicao (
    id_geviewcondicao_int bigint DEFAULT nextval('public.geviewcondicao_seq'::regclass) NOT NULL,
    id_geviewcampo_int bigint,
    operador_equivalencia_str character varying(15),
    valor_str character varying(1000),
    parenteses_str character varying(1),
    operador_condicional_str character varying(3),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1215 (class 1259 OID 38029)
-- Name: geviewordem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geviewordem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1216 (class 1259 OID 38044)
-- Name: geviewordem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geviewordem (
    id_geviewordem_int bigint DEFAULT nextval('public.geviewordem_seq'::regclass) NOT NULL,
    id_geviewcampo_int bigint,
    asc_desc_str character varying(4),
    ordem_int smallint,
    distinct_str character varying(1),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1217 (class 1259 OID 38048)
-- Name: geviewsistema_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geviewsistema_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1218 (class 1259 OID 38058)
-- Name: geviewsistema; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geviewsistema (
    id_geviewsistema_int bigint DEFAULT nextval('public.geviewsistema_seq'::regclass) NOT NULL,
    id_gecliente_int bigint,
    codigo_str character varying(30),
    descricao_str character varying(100),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1219 (class 1259 OID 38069)
-- Name: geviewtabela_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.geviewtabela_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1220 (class 1259 OID 38076)
-- Name: geviewtabela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.geviewtabela (
    id_geviewtabela_int bigint DEFAULT nextval('public.geviewtabela_seq'::regclass) NOT NULL,
    id_geviewsistema_int bigint,
    id_gecampotabela_int bigint,
    ordem_int smallint,
    id_gecampotabela_relac1_int bigint,
    id_gecampotabela_relac2_int bigint,
    tipo_relacionamento_str character varying(20),
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1221 (class 1259 OID 38087)
-- Name: higienizacao_desconhece_cliente386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.higienizacao_desconhece_cliente386 (
    id_geqlcontato_int bigint,
    cpf_str text,
    contato_str character varying(256)
);

--
-- TOC entry 1222 (class 1259 OID 38118)
-- Name: hondabatimento; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.hondabatimento (
    tp_neg_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int bigint,
    situacao_int bigint
);

--
-- TOC entry 1223 (class 1259 OID 38123)
-- Name: id_gefilacobrancalog_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.id_gefilacobrancalog_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1224 (class 1259 OID 38137)
-- Name: importaabntmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaabntmp (
    ano_fabricacao bigint,
    bairro_aval character varying(20),
    bairro_cli character varying(20),
    bairro_com_aval character varying(20),
    bairro_com_cli character varying(20),
    cep_aval bigint,
    cep_cli bigint,
    cep_com_aval bigint,
    cep_com_cli bigint,
    cidade_aval character varying(20),
    cidade_cli character varying(20),
    cidade_com_aval character varying(20),
    cidade_com_cli character varying(20),
    codigo_aval bigint,
    codigo_cli bigint,
    codigo_filial bigint,
    codigo_segmento bigint,
    codigo_subsegmento bigint,
    contrato character varying(11),
    cpf_aval bigint,
    cpf_cli character varying(14),
    data_emissao date,
    data_lancamento date,
    data_movimento date,
    data_nascimento_aval date,
    data_nascimento_cli date,
    data_vencimento date,
    ddd_aval character varying(4),
    ddd_cli bigint,
    ddd_com_aval character varying(4),
    ddd_com_cli character varying(4),
    descricao_cor character varying(20),
    descricao_garantia character varying(70),
    descricao_marca character varying(15),
    descricao_memo character varying(55),
    descricao_modelo character varying(20),
    dias_atraso bigint,
    dut bigint,
    empregador_aval character varying(40),
    empregador_cli character varying(40),
    endereco_aval character varying(40),
    endereco_cli character varying(40),
    endereco_com_aval character varying(40),
    endereco_com_cli character varying(40),
    estado_civil_aval character varying(1),
    estado_civil_cli character varying(1),
    id_filialcliente bigint,
    id_tiponegocio bigint,
    identidade_aval character varying(10),
    identidade_cli character varying(10),
    identificacao_aval character varying(1),
    identificacao_cli character varying(1),
    inclui_altera character varying(1),
    mensagem text,
    moeda_gastos double precision,
    nome_aval character varying(28),
    nome_cli character varying(28),
    numero_chassis character varying(20),
    numero_parcela bigint,
    parcelas_contratadas bigint,
    parcelas_vencidas bigint,
    placa character varying(8),
    produto character varying(5),
    profissao_aval character varying(30),
    profissao_cli character varying(30),
    ramal_aval character varying(5),
    ramal_cli character varying(5),
    ramal_com_aval character varying(5),
    ramal_com_cli character varying(5),
    sequencia_descricao bigint,
    sexo_aval character varying(1),
    sexo_cli character varying(1),
    sigla_correspondencia_aval character varying(1),
    sigla_correspondencia_cli character varying(1),
    telefone_aval character varying(10),
    telefone_cli character varying(10),
    telefone_com_aval character varying(10),
    telefone_com_cli character varying(10),
    tipo_combustivel character varying(1),
    tipo_negocio character varying(3),
    tipo_pessoa_aval character varying(1),
    tipo_pessoa_cli character varying(1),
    tipo_registro bigint,
    uf_aval character varying(2),
    uf_cli character varying(2),
    uf_com_aval character varying(2),
    uf_com_cli character varying(2),
    valor_garantia double precision,
    valor_gastos double precision,
    valor_parcela double precision
);

--
-- TOC entry 1225 (class 1259 OID 38152)
-- Name: importaaliancatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaaliancatmp (
    aceite_str character varying(1),
    agencia_conta_str character varying(20),
    bairro_fiador_str character varying(30),
    bairro_str character varying(30),
    carteira_str character varying(6),
    cedente_str character varying(60),
    cep_fiador_int character varying(8),
    cep_int character varying(8),
    cidade_fiador_str character varying(30),
    cidade_str character varying(30),
    codigo_arquivo_str character varying(8),
    codigo_segmento_int bigint,
    codigo_barra_str character varying(44),
    contrato character varying(30),
    cpf_fiador_int character varying(15),
    cpf_num_int character varying(15),
    data_documento_dat date,
    data_novovencto_dat date,
    data_process_dat date,
    data_remessa_dat date,
    data_venctopar_dat date,
    endereco_fiador_str character varying(30),
    endereco_str character varying(50),
    especie_doc_str character varying(2),
    especie_str character varying(4),
    id_cbdistribuidorcliente bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    juros_num double precision,
    linha_1_str character varying(60),
    linha_2_str character varying(60),
    linha_3_str character varying(60),
    linha_4_str character varying(60),
    linha_5_str character varying(60),
    linha_digitavel_str character varying(60),
    local_pagamento_str character varying(60),
    multa_num double precision,
    nome_consorciado_str character varying(60),
    nome_destinatario_str character varying(50),
    nome_fiador_str character varying(60),
    nosso_numero_str character varying(24),
    num_contrato_str character varying(8),
    num_cota_int bigint,
    numero_documento_str character varying(17),
    numero_fiador_int character varying(1),
    num_grupo_int bigint,
    numero_remessa_int bigint,
    parcela_int bigint,
    principal_num double precision,
    qtde_str character varying(10),
    sacado_1_str character varying(60),
    sacado_2_str character varying(60),
    sacado_3_str character varying(60),
    sequencial_int bigint,
    tipo_corresp_str character varying(2),
    tipo_registro_int bigint,
    total_registro_str bigint,
    uf_fiador_str character varying(2),
    uf_str character varying(2),
    valor_documento_num double precision,
    vencimento_dat date,
    vl_corrigido_par_num double precision,
    vl_unitario_str character varying(10)
);

--
-- TOC entry 1226 (class 1259 OID 38165)
-- Name: importaaudactmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaaudactmp (
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    dt_nascimento_dat date,
    endereco_str character varying(60),
    numero_res_str character varying(6),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    profissao_str character varying(40),
    salario_num double precision,
    tipo_pessoa_str character varying(1),
    estado_civil_str character varying(1),
    numero_total_parcelas_int integer,
    data_contrato_dat date,
    valor_montante_num double precision,
    data_contato_dat date,
    tstamp timestamp with time zone,
    observacao_str text,
    sexo_str character varying(1),
    email_str character varying(50),
    codigo_cli_int bigint,
    codigo_financeira_int bigint,
    tipo_tel_cli_str character varying(2),
    tipo_pessoa_cli_str character varying(2),
    status_ult_ligacao_str character varying(1),
    tel_bloqueado_str character varying(1),
    end_bloqueado_str character varying(1),
    data_dev_contrato_dat date,
    classificacao_audac_str character varying(6),
    posicao_contrato character varying(1),
    tipo_contrato_str character varying(1),
    tipo_registro_str character varying(2),
    data_prim_vecto_dat date,
    data_ult_vecto_dat date,
    qtd_parcelas_pedidas integer,
    prestacoes_pagas_int smallint,
    numero_seq_int bigint,
    total_debito_num double precision,
    num_acordos_int bigint,
    saldo_num double precision,
    prestacao_num double precision,
    seq_int bigint
);

--
-- TOC entry 1227 (class 1259 OID 38177)
-- Name: importabancopaulistatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabancopaulistatmp (
    arquivo_str character varying(40),
    tipo_registro character varying(1),
    seq integer,
    cod_cobradora character varying(5),
    data_sistema date,
    data_inicial date,
    data_final date,
    status character varying(3),
    cod_prod bigint,
    contrato character varying(30),
    num_parcela bigint,
    vencimento_contrato date,
    cod_loja character varying(6),
    nome_loja character varying(60),
    tot_parcelas integer,
    vencimento_parcela date,
    saldo_devedor double precision,
    valor_parcela double precision,
    valor_multa double precision,
    nome_cli character varying(60),
    cpf_cli character varying(20),
    rg_cli character varying(20),
    estado_civil character varying(1),
    data_nascimento date,
    endereco_cli character varying(60),
    bairro_cli character varying(40),
    cidade_cli character varying(30),
    uf_cli character varying(2),
    cep_cli character varying(10),
    fone_cli character varying(20),
    nome_empresa_cli character varying(60),
    endereco_empresa_cli character varying(60),
    bairro_empresa_cli character varying(40),
    cidade_empresa_cli character varying(30),
    uf_empresa_cli character varying(2),
    cep_empresa_cli character varying(10),
    fone_empresa_cli character varying(20),
    cargo_cli character varying(40),
    nome_avalista character varying(60),
    endereco_avalista character varying(60),
    bairro_avalista character varying(40),
    cidade_avalista character varying(30),
    uf_avalista character varying(2),
    cep_avalista character varying(10),
    cpf_avalista character varying(20),
    rg_avalista character varying(20),
    data_nascimento_avalista date,
    fone_avalista character varying(20),
    banco_cheque character varying(3),
    numero_cheque character varying(10),
    agencia_cheque character varying(6),
    conta_cheque character varying(20),
    numero_comp_cheque character varying(3),
    id_geusuario_int bigint,
    id_fimoeda_int bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    id_cbcontrato bigint,
    id_cbparcela bigint,
    taxa_juros double precision
);

--
-- TOC entry 1228 (class 1259 OID 38186)
-- Name: importabbdistmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabbdistmp (
    arquivo character varying(6),
    bairro_cli character varying(25),
    bairro_aval1 character varying(25),
    bairro_aval2 character varying(25),
    centralizadora bigint,
    cep_cli character varying(9),
    cep_aval1 character varying(9),
    cep_aval2 character varying(9),
    conta_cli character varying(9),
    cpf_cli character varying(20),
    cpf_aval1 character varying(20),
    cpf_aval2 character varying(20),
    data_movimento date,
    data_parcela date,
    ddd_cli character varying(4),
    ddd_aval1 character varying(4),
    ddd_aval2 character varying(4),
    endereco_cli character varying(50),
    endereco_aval1 character varying(50),
    endereco_aval2 character varying(50),
    fax_cli character varying(9),
    fax_aval1 character varying(9),
    fax_aval2 character varying(9),
    fone1_cli character varying(9),
    fone1_aval1 character varying(9),
    fone1_aval2 character varying(9),
    fone2_cli character varying(9),
    fone2_aval1 character varying(9),
    fone2_aval2 character varying(9),
    instrucao character varying(240),
    municipio_cli character varying(25),
    municipio_aval1 character varying(25),
    municipio_aval2 character varying(25),
    nome_cli character varying(50),
    nome_aval1 character varying(50),
    nome_aval2 character varying(50),
    numero_parcela bigint,
    nome_produto character varying(40),
    sequencial integer,
    tipo_cli bigint,
    tipo_aval1 bigint,
    tipo_aval2 bigint,
    tipo_registro character varying(2),
    uf_cli character varying(2),
    uf_aval1 character varying(2),
    uf_aval2 character varying(2),
    saldo_devido double precision,
    valor_parcela double precision,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    produto bigint,
    modalidade smallint,
    agencia smallint,
    contrato bigint,
    mci_cliente bigint,
    id_gefilial bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_cbdistribuidorcliente bigint
);

--
-- TOC entry 1229 (class 1259 OID 38195)
-- Name: importabbtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabbtmp (
    agencia_empresa bigint,
    arquivo character varying(6),
    bairro_cli character varying(25),
    centralizadora bigint,
    cep_cli character varying(9),
    codigo_instrucao bigint,
    codigo_retorno bigint,
    conta_empresa bigint,
    contrato_antigo bigint,
    convenio_empresa bigint,
    cpf_cli character varying(20),
    data_atualizacao date,
    data_movimento date,
    data_parcela date,
    data_vencimento date,
    endereco_cli character varying(50),
    instrucao character varying(370),
    mci_empresa bigint,
    modalidade_antigo bigint,
    motivo_retorno character varying(30),
    municipio_cli character varying(25),
    nome_cli character varying(50),
    numero_parcela bigint,
    numero_resumo integer,
    numero_comissao integer,
    nome_produto character varying(40),
    operacao_antigo bigint,
    produto_antigo bigint,
    qtde_parcelas bigint,
    situacao_instrucao character varying(7),
    sequencial integer,
    telefone1_cli character varying(9),
    telefone2_cli character varying(9),
    tipo_cli bigint,
    tipo_registro character varying(2),
    total_registros bigint,
    uf_cli character varying(2),
    ultima_parcela bigint,
    valor_negociado double precision,
    valor_parcela double precision,
    valor_total double precision,
    parcela1 smallint,
    valor_parcela1 double precision,
    parcela2 smallint,
    valor_parcela2 double precision,
    parcela3 smallint,
    valor_parcela3 double precision,
    parcela4 smallint,
    valor_parcela4 double precision,
    parcela5 smallint,
    valor_parcela5 double precision,
    parcela6 smallint,
    valor_parcela6 double precision,
    parcela7 smallint,
    valor_parcela7 double precision,
    parcela8 smallint,
    valor_parcela8 double precision,
    parcela9 smallint,
    valor_parcela9 double precision,
    parcela10 smallint,
    valor_parcela10 double precision,
    parcela11 smallint,
    valor_parcela11 double precision,
    parcela12 smallint,
    valor_parcela12 double precision,
    produto bigint,
    modalidade smallint,
    agencia smallint,
    contrato bigint,
    mci_cliente bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    id_gefilial bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_cbdistribuidorcliente bigint
);

--
-- TOC entry 1230 (class 1259 OID 38207)
-- Name: importabictmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabictmp (
    arquivo_str character varying(40),
    tiporegistro character varying(1),
    fixo character varying(2),
    data1 date,
    sequencia bigint,
    identidade character varying(6),
    codigo_cliente character varying(4),
    data2 date,
    situacao character varying(2),
    produto character varying(4),
    contrato character varying(14),
    vencimento date,
    titulo_carteira character varying(20),
    loja character varying(5),
    nome_loja character varying(30),
    liberacao date,
    numero_parcela smallint,
    qtde_parcela smallint,
    venc_parcela date,
    saldo double precision,
    valor double precision,
    multa double precision,
    nome_cliente character varying(40),
    cpf character varying(14),
    rg character varying(10),
    org_emissor character varying(5),
    estado_civil character varying(1),
    nascimento date,
    nome_pai character varying(40),
    nome_mae character varying(40),
    nome_conjuge character varying(40),
    endereco character varying(50),
    bairro character varying(25),
    cidade character varying(25),
    estado character varying(2),
    cep character varying(8),
    telefone character varying(13),
    empresa character varying(40),
    endereco_comercial character varying(50),
    bairro_comercial character varying(25),
    cidade_comercial character varying(25),
    estado_comercial character varying(2),
    cep_comercial character varying(8),
    telefone_comercial character varying(13),
    ramal_comercial character varying(4),
    cargo character varying(25),
    nome_referencia character varying(40),
    telefone_referencia character varying(13),
    nome_referencia2 character varying(40),
    telefone_referencia2 character varying(13),
    avalista character varying(40),
    endereco_avalista character varying(50),
    bairro_avalista character varying(25),
    cidade_avalista character varying(25),
    estado_avalista character varying(2),
    cep_avalista character varying(8),
    cpf_avalista character varying(14),
    rg_avalista character varying(10),
    data_nascimento_avalista date,
    telefone_avalista character varying(13),
    ramal_avalista character varying(4),
    id_geusuario_int bigint,
    id_fimoeda_int bigint
);

--
-- TOC entry 1231 (class 1259 OID 38217)
-- Name: importabmctmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabmctmp (
    ano character varying(5),
    assessoria bigint,
    bairro_aval1 character varying(20),
    bairro_aval2 character varying(20),
    bairro_cli character varying(20),
    bairro_com_cli character varying(20),
    cep_aval1 character varying(9),
    cep_aval2 character varying(9),
    cep_cli character varying(9),
    cep_com_cli character varying(9),
    cidade_aval1 character varying(20),
    cidade_aval2 character varying(20),
    cidade_cli character varying(20),
    cidade_com_cli character varying(20),
    cod_empresa_bmc character varying(2),
    cod_produto_cob character varying(2),
    codigo_filial bigint,
    codigo_loja bigint,
    codigo_produto bigint,
    conjuge_cli character varying(40),
    contratos_enviados bigint,
    contratos_retirados bigint,
    cor character varying(10),
    cpf_aval1 character varying(14),
    cpf_aval2 character varying(14),
    cpf_cli character varying(14),
    data_contrato date,
    data_nascimento_cli date,
    data_pagamento date,
    data_pri_vencimento date,
    data_processamento date,
    data_ult_vencimento date,
    data_vencimento date,
    empresa_bmc character varying(40),
    empresa_cli character varying(40),
    endereco_aval1 character varying(45),
    endereco_aval2 character varying(45),
    endereco_cli character varying(45),
    endereco_com_cli character varying(45),
    estado_civil_cli bigint,
    hora_processamento character varying(6),
    identidade_cli character varying(12),
    indice_moeda character varying(5),
    loja character varying(40),
    mae character varying(40),
    marca character varying(20),
    modelo character varying(20),
    nome_aval1 character varying(40),
    nome_aval2 character varying(40),
    nome_cli character varying(40),
    operacao character varying(4),
    orgao_emissor_cli character varying(5),
    pai character varying(40),
    placa character varying(10),
    plano bigint,
    processo character varying(2),
    produto character varying(40),
    produto_cob character varying(40),
    ramal_com_cli character varying(5),
    referencia1_aval1 character varying(40),
    referencia1_aval2 character varying(40),
    referencia2_aval1 character varying(40),
    referencia2_aval2 character varying(40),
    sequencial bigint,
    sexo_cli character varying(1),
    taxa_financiamento double precision,
    tel_referencia1_aval1 character varying(15),
    tel_referencia1_aval2 character varying(15),
    tel_referencia2_aval1 character varying(15),
    tel_referencia2_aval2 character varying(15),
    telefone_aval1 character varying(15),
    telefone_aval2 character varying(15),
    telefone_cel_aval1 character varying(15),
    telefone_cel_aval2 character varying(15),
    telefone_cli character varying(15),
    telefone_com_cli character varying(15),
    tipo_seguro character varying(1),
    uf_aval1 character varying(2),
    uf_aval2 character varying(2),
    uf_cli character varying(2),
    uf_com_cli character varying(2),
    uf_identidade_cli character varying(2),
    valor_financiado double precision,
    valor_pagamento double precision,
    valor_parcela double precision,
    valor_prestacao double precision,
    versao bigint,
    juridico character varying(1),
    tipo_registro bigint,
    altera_contrato character varying(1),
    campo_contrato character varying(17),
    nucleo character varying(2),
    contrato character varying(17),
    numero_parcela bigint,
    inclui_altera character varying(1),
    id_filialcliente bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    id_tiponegocio bigint,
    id_cbetapa bigint,
    contratos_novos_int integer
);

--
-- TOC entry 1232 (class 1259 OID 38224)
-- Name: importabmctmp_baixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabmctmp_baixa (
    ano character varying(5),
    assessoria bigint,
    bairro_aval1 character varying(20),
    bairro_aval2 character varying(20),
    bairro_cli character varying(20),
    bairro_com_cli character varying(20),
    cep_aval1 character varying(9),
    cep_aval2 character varying(9),
    cep_cli character varying(9),
    cep_com_cli character varying(9),
    cidade_aval1 character varying(20),
    cidade_aval2 character varying(20),
    cidade_cli character varying(20),
    cidade_com_cli character varying(20),
    cod_empresa_bmc character varying(2),
    cod_produto_cob character varying(2),
    codigo_filial bigint,
    codigo_loja bigint,
    codigo_produto bigint,
    conjuge_cli character varying(40),
    contratos_enviados bigint,
    contratos_retirados bigint,
    cor character varying(10),
    cpf_aval1 character varying(14),
    cpf_aval2 character varying(14),
    cpf_cli character varying(14),
    data_contrato date,
    data_nascimento_cli date,
    data_pagamento date,
    data_pri_vencimento date,
    data_processamento date,
    data_ult_vencimento date,
    data_vencimento date,
    empresa_bmc character varying(40),
    empresa_cli character varying(40),
    endereco_aval1 character varying(45),
    endereco_aval2 character varying(45),
    endereco_cli character varying(45),
    endereco_com_cli character varying(45),
    estado_civil_cli bigint,
    hora_processamento character varying(6),
    identidade_cli character varying(12),
    indice_moeda character varying(5),
    loja character varying(40),
    mae character varying(40),
    marca character varying(20),
    modelo character varying(20),
    nome_aval1 character varying(40),
    nome_aval2 character varying(40),
    nome_cli character varying(40),
    operacao character varying(4),
    orgao_emissor_cli character varying(5),
    pai character varying(40),
    placa character varying(8),
    plano bigint,
    processo character varying(2),
    produto character varying(40),
    produto_cob character varying(40),
    ramal_com_cli character varying(5),
    referencia1_aval1 character varying(40),
    referencia1_aval2 character varying(40),
    referencia2_aval1 character varying(40),
    referencia2_aval2 character varying(40),
    sequencial bigint,
    sexo_cli character varying(1),
    taxa_financiamento double precision,
    tel_referencia1_aval1 character varying(15),
    tel_referencia1_aval2 character varying(15),
    tel_referencia2_aval1 character varying(15),
    tel_referencia2_aval2 character varying(15),
    telefone_aval1 character varying(15),
    telefone_aval2 character varying(15),
    telefone_cel_aval1 character varying(15),
    telefone_cel_aval2 character varying(15),
    telefone_cli character varying(15),
    telefone_com_cli character varying(15),
    tipo_seguro character varying(1),
    uf_aval1 character varying(2),
    uf_aval2 character varying(2),
    uf_cli character varying(2),
    uf_com_cli character varying(2),
    uf_identidade_cli character varying(2),
    valor_financiado double precision,
    valor_pagamento double precision,
    valor_parcela double precision,
    valor_prestacao double precision,
    versao bigint,
    juridico character varying(1),
    tipo_registro bigint,
    altera_contrato character varying(1),
    campo_contrato character varying(17),
    nucleo character varying(2),
    contrato character varying(17),
    numero_parcela bigint,
    inclui_altera character varying(1),
    id_filialcliente bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    id_tiponegocio bigint,
    id_cbetapa bigint
);

--
-- TOC entry 1233 (class 1259 OID 38239)
-- Name: importabradescocartaotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabradescocartaotmp (
    cartao character varying(18),
    cep_portador character varying(9),
    cgc_portador character varying(15),
    cidade_portador character varying(28),
    codigo_escritorio character varying(4),
    complemento_portador character varying(30),
    data_envio date,
    data_fechamento date,
    data_status date,
    data_ultimo_pagamento date,
    data_validade date,
    empresa_portador character varying(25),
    endereco_portador character varying(30),
    fone_com_portador character varying(17),
    fone_res_portador character varying(17),
    gasto_mes double precision,
    idade bigint,
    identificacao_produto bigint,
    limite_gastos bigint,
    numero_parcela smallint,
    nome_portador character varying(30),
    situacao_cacs character varying(3),
    tipo_registro character varying(3),
    uf_portador character varying(2),
    valor_principal double precision,
    valor_ultimo_pagamento double precision,
    saldo_atual double precision,
    saldo_parcelado double precision,
    saldo_atraso double precision,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    ciclo_atraso smallint,
    ciclo_cartao smallint,
    dias_atraso smallint,
    data_vencimento date,
    data_calculo date,
    status character varying(2),
    id_esregua bigint,
    id_cbetapa bigint,
    id_gefilial bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_cbcontrato bigint,
    id_cbparcela bigint,
    data_ultima_fatura date,
    calculo_convencionais date
);

--
-- TOC entry 1234 (class 1259 OID 38246)
-- Name: importabradescocorporativotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabradescocorporativotmp (
    bairro character varying(15),
    bairro_trabalho character varying(15),
    cep character varying(8),
    cep_trabalho character varying(8),
    cidade character varying(30),
    cidade_trabalho character varying(30),
    codigo_devolucao character varying(2),
    cpf character varying(20),
    data_acordo date,
    data_encerramento_acordo date,
    data_inibicao_conta date,
    data_prox_vecto date,
    data_referencia date,
    data_remessa date,
    data_ultimo_pagto date,
    data_atraso date,
    dias_atraso integer,
    digito_cartao character varying(1),
    dt_nascimento date,
    endereco character varying(40),
    endereco_trabalho character varying(40),
    estado character varying(2),
    estado_civil character varying(1),
    estado_trabalho character varying(2),
    hora_remessa character varying(6),
    local_trabalho character varying(60),
    mae character varying(60),
    motivo_devolucao character varying(2),
    nome_cliente character varying(60),
    nome_organizacao character varying(60),
    nome_tipo_negocio character varying(60),
    numero_assessoria character varying(60),
    numero_cartao character varying(30),
    numero_conta character varying(20),
    numero_organizacao character varying(4),
    numero_remessa character varying(5),
    orga_exp_rg character varying(5),
    pai character varying(60),
    profissao character varying(25),
    rg character varying(13),
    saldo_devedor double precision,
    saldo_extrato double precision,
    saldo_parcelado double precision,
    saldo_parcelado_emissor double precision,
    saldo_parcelado_lojista double precision,
    saldo_saque_parcelado double precision,
    status_acordo character varying(1),
    telefone character varying(20),
    telefone_trabalho character varying(20),
    tipo_negocio character varying(4),
    tipo_operacao character varying(2),
    tipo_registro character varying(1),
    valor_principal double precision,
    valor_juros double precision,
    valor_perm double precision,
    valor_prestacao double precision,
    valor_recebido double precision,
    status character varying(2),
    id_esregua bigint,
    id_cbetapa bigint,
    id_gefilial bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_cbcontrato bigint,
    id_cbparcela bigint
);

--
-- TOC entry 1235 (class 1259 OID 38256)
-- Name: importabradescocredimobtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabradescocredimobtmp (
    id_importabradescocredimobtmp_int bigint DEFAULT nextval(('"importabradescocredimobtmp_seq"'::text)::regclass) NOT NULL,
    arquivo_str character varying(40),
    tiporegistro character varying(1),
    ordem_int bigint,
    sequencia_int bigint,
    cod_empresa_int smallint,
    header_codigo_vax character varying(3),
    header_nome_servico character varying(10),
    header_cd_empresa_vax character varying(8),
    header_sistema character varying(3),
    header_data_movimento date,
    header_lrecl smallint,
    header_cd_empresa smallint,
    dados_contrato character varying(30),
    dados_nome_agencia character varying(20),
    dados_data_contrato date,
    dados_valor_financ double precision,
    dados_valor_venda double precision,
    dados_prazo smallint,
    dados_taxa_juros double precision,
    dados_saldo_devedor double precision,
    dados_nome_mutuario character varying(37),
    dados_num_cgc_cpf character varying(20),
    dados_ender_imovel character varying(60),
    dados_bairro character varying(18),
    dados_cep character varying(10),
    dados_sigla_uf character varying(2),
    dados_municipio character varying(30),
    dados_end_coml character varying(40),
    dados_cid_coml character varying(30),
    dados_cep_coml character varying(10),
    dados_sigla_coml character varying(2),
    dados_data_proc date,
    dados_fone character varying(20),
    dados_fax_fone character varying(20),
    dados_data_reinicio date,
    dados_valor_quitacao double precision,
    dados_situacao integer,
    detalhe_numero_parcela bigint,
    detalhe_data_vencimento date,
    detalhe_valor_amortizacao double precision,
    detalhe_valor_juros double precision,
    detalhe_valor_taxa_cobrada double precision,
    detalhe_valor_seguro double precision,
    detalhe_vlr_enc_mensal double precision,
    detalhe_valor_fgts double precision,
    detalhe_valor_liq_pagto double precision,
    detalhe_vl_juros_mora double precision,
    detalhe_valor_sld_devedor double precision,
    sai_mes_reajuste smallint,
    sai_faixa bigint,
    sai_plano character varying(1),
    sai_ramo character varying(1),
    sai_cod_identif character varying(3),
    sai_reserva text,
    sai_sdo_ffiel4 double precision,
    sai_jr_ffiel4 double precision,
    id_geusuario_int bigint,
    id_fimoeda_int bigint,
    tipo_layout character varying(1),
    compr_nome_comprador character varying(39),
    compr_num_cgc_cpf character varying(20),
    compr_ender_imovel character varying(60),
    compr_bairro character varying(20),
    compr_municipio character varying(30),
    compr_sigla_uf character varying(2),
    compr_cep character varying(10),
    compr_multa double precision,
    compr_garantia bigint,
    compr_fone character varying(20),
    compr_num_filial bigint,
    tipoparcela integer,
    valor_original_detalhe_vlr_enc_mensal double precision,
    inclui_altera_str character varying(1),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    situacao_parcela_int bigint
);

--
-- TOC entry 1236 (class 1259 OID 38269)
-- Name: importabradescocredimobtmp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.importabradescocredimobtmp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1237 (class 1259 OID 38280)
-- Name: importabradescotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importabradescotmp (
    agencia bigint,
    carteira character varying(3),
    cep_cli character varying(8),
    cep_fica character varying(8),
    cgc_cfp character varying(15),
    cidade_cli character varying(30),
    cidade_fica character varying(30),
    complemento_endereco_fica character varying(10),
    conta bigint,
    contrato bigint,
    num_contrato character varying(30),
    data_fim_operacao date,
    data_ini_operacao date,
    data_movimento_cli date,
    data_movimento_con date,
    data_remessa date,
    data_trans date,
    data_vencimento date,
    ddd_cli character varying(4),
    ddd_fica character varying(4),
    digito_conta character varying(1),
    diretoria_regional bigint,
    endereco_cli character varying(40),
    endereco_fica character varying(45),
    fone_cli character varying(9),
    fone_fica character varying(9),
    id character varying(2),
    id_cbdistribuidorcliente bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    identificador character varying(40),
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    nome character varying(40),
    nome_conjuge_cli character varying(40),
    nome_conjuge_fica character varying(25),
    nome_empresa_cli character varying(40),
    nome_empresa_fica character varying(40),
    nome_mae_cli character varying(40),
    nome_mae_fica character varying(40),
    nome_pai_cli character varying(40),
    nome_pai_fica character varying(40),
    qtde_registro bigint,
    reserva character varying(3),
    seq_arq bigint,
    tipo_registro bigint,
    uf_cli character varying(2),
    uf_fica character varying(2),
    valor_corrente double precision,
    valor_inicial double precision,
    tipo_negocio character varying(1),
    num_parcela bigint,
    data_ca date,
    ocorrencia smallint,
    data_ocorrencia date,
    numero_processo character varying(15),
    data_inclusao date,
    codigo_diretoria smallint,
    data_pagamento date,
    retorno character varying(1),
    data_saida date
);

--
-- TOC entry 1238 (class 1259 OID 38287)
-- Name: importacaixasegurostmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importacaixasegurostmp (
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    estado_str character varying(2),
    valor_divida_num double precision,
    id_fimoeda_int bigint
);

--
-- TOC entry 1239 (class 1259 OID 38305)
-- Name: importacifratmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importacifratmp (
    arquivo character varying(40),
    id_gecliente_int bigint,
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_fimoeda_int bigint,
    id_cbsituacaocontrato_int bigint,
    bbacfi character varying(6),
    nome_assessoria character varying(40),
    data_de_envio date,
    qtde_cliente bigint,
    valor_montante double precision,
    codigo_da_assessoria character varying(3),
    nome_de_cliente character varying(40),
    cpf_cgc_do_cliente character varying(14),
    rg_do_cliente character varying(15),
    data_emissao_do_rg date,
    orgao_emissor_do_rg character varying(15),
    estado_orgao_emissor character varying(2),
    data_de_nascimento date,
    naturalidade_do_cliente character varying(32),
    cod_estado_civil character varying(1),
    nome_do_conjuge character varying(40),
    nome_do_pai_do_cliente character varying(40),
    nome_da_mae_do_cliente character varying(40),
    endereco character varying(50),
    bairro_endereco character varying(30),
    cep_endereco_res character varying(8),
    cidade_endereco character varying(30),
    numero_telefone character varying(20),
    num_ramal_tel_res character varying(4),
    celular character varying(20),
    nome_empresa character varying(40),
    endereco_empr character varying(40),
    ocupacao character varying(40),
    endereco_comercial character varying(50),
    bairro_comercial character varying(30),
    cep_do_endereco_com character varying(8),
    cidade_do_end_com character varying(30),
    numero_do_telefone character varying(20),
    numero_do_ramal_com character varying(4),
    numero_filial character varying(3),
    contrato character varying(12),
    numero_parcela bigint,
    valor_de_custas character varying(14),
    produto character varying(30),
    codigo_moeda character varying(3),
    data_do_financiamento date,
    valor double precision,
    valor_entrada double precision,
    valor_financiamento double precision,
    data_do_vencimento date,
    qtde_parcelas_financiam smallint,
    valor_parcelas double precision,
    qtde_parcelas_pagas smallint,
    qtde_parcelas_a_pagar smallint,
    valor_montate double precision,
    percentual_comis double precision,
    desc_marca character varying(53),
    descricao_cor_veiculo character varying(8),
    ano_modelo_fabricacao character varying(4),
    numero_chassi_veiculo character varying(21),
    numero_placa_veiculo character varying(7),
    codigo_combustivel character varying(1),
    numero_do_certificado character varying(10),
    nome_do_avalista character varying(40),
    cpf_do_avalista character varying(14),
    endereco_aval1 character varying(50),
    bairro_endereco_aval1 character varying(30),
    cep_endereco_aval1 character varying(8),
    cidade_aval1 character varying(30),
    numero_aval1 character varying(20),
    numero_ramal_aval1 character varying(4),
    nome_referencia_pessoal character varying(40),
    endereco_referencia character varying(50),
    bairro_referencia character varying(30),
    cep_ref character varying(8),
    cidade_ref character varying(30),
    numero_telefone_ref character varying(20),
    numero_ramal_tel_ref character varying(4),
    razao_social_do_escri character varying(40),
    data_inclusao date,
    data_retorno date,
    codigo_empresa character varying(3),
    tipo_arquivo_ed character varying(1)
);

--
-- TOC entry 1240 (class 1259 OID 38312)
-- Name: importaconfiancatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaconfiancatmp (
    vlr_inicial_str character varying(1),
    alineacheque character varying(10),
    bairrocliente character varying(30),
    cepcliente character varying(8),
    cgccredor bigint,
    cidadecliente character varying(30),
    codigoregistro bigint,
    complementoendereco character varying(12),
    cpfcgccliente bigint,
    cpfdevedor bigint,
    databaixa date,
    datadevolucaocheque date,
    dataemissao date,
    datanascimentocliente date,
    dataprecheque date,
    enderecocliente character varying(60),
    incluialtera character varying(1),
    incluialteraparc character varying(1),
    nomecliente character varying(50),
    notafiscal bigint,
    numeroagencia bigint,
    numerobanco bigint,
    numerocheque bigint,
    numeroconta bigint,
    observacao character varying(200),
    observacaocheque character varying(100),
    parcela bigint,
    quantidadecheque bigint,
    rginscricaocliente character varying(10),
    sexocliente character varying(1),
    siglaestadocliente character varying(2),
    telefonecliente character varying(40),
    tipo character varying(15),
    valorcheque double precision,
    valortotal double precision
);

--
-- TOC entry 1241 (class 1259 OID 38323)
-- Name: importaconsorciopanantmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaconsorciopanantmp (
    bairro character varying(25),
    cep character varying(8),
    cidade character varying(25),
    cnpj_cpf character varying(16),
    cod_produto character varying(30),
    contrato character varying(12),
    cota character varying(3),
    data_venc date,
    data_venda date,
    descricao character varying(30),
    endereco character varying(35),
    estado character varying(2),
    grupo character varying(4),
    id_cbdistribuidorcliente bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    id_cbetapa bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    nome_consorciado character varying(35),
    numero_end character varying(6),
    num_externo character varying(20),
    num_parcela bigint,
    pac character varying(6),
    plano integer,
    situacao character varying(1),
    telefone character varying(20),
    tipo_cota character varying(1),
    valor_amortizacao double precision,
    valor_bem double precision,
    valor_parcela double precision,
    valor_total_pago double precision,
    vendedor character varying(15),
    tp_pessoa character varying(1),
    dt_nascimento date,
    telefone2 character varying(20),
    perc_parcela double precision,
    perc_devedor double precision,
    chassi character varying(25),
    fabricante character varying(5),
    linha_modelo character varying(15),
    cor character varying(15),
    renavam character varying(15),
    placa character varying(10),
    dt_encerramento date,
    numero_aviso bigint,
    numero_parcela bigint
);

--
-- TOC entry 1242 (class 1259 OID 38330)
-- Name: importafeptmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importafeptmp (
    data_pre_distrib_dat date,
    contrato_str character varying
);

--
-- TOC entry 1243 (class 1259 OID 38342)
-- Name: importafiattmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importafiattmp (
    vlr_inicial_str character varying(3),
    acaoaj character varying(5),
    agefiat character varying(2),
    anofab bigint,
    atrultpg bigint,
    baicom character varying(15),
    bairesi character varying(15),
    bemcont character varying(20),
    cartapre character varying(1),
    cdcli character varying(7),
    cdconce character varying(7),
    cepcom bigint,
    cepresi bigint,
    cgccpf bigint,
    chassi character varying(25),
    cidcom character varying(15),
    cidresi character varying(15),
    codigo_banco bigint,
    comarca character varying(25),
    combust character varying(1),
    contgcob character varying(10),
    cor character varying(25),
    cperdia double precision,
    dddcom bigint,
    dddfax bigint,
    dddresi bigint,
    descri character varying(50),
    dtacao date,
    dtacordo date,
    dtcont date,
    dtcontab date,
    dtntpro date,
    dtpredistrib date,
    dtsusp date,
    dtvcto date,
    empresa character varying(35),
    endcom character varying(35),
    endresi character varying(35),
    estcom character varying(2),
    estresi character varying(2),
    etapa character varying(5),
    idfunc character varying(1),
    idmoeda bigint,
    idmoti character varying(5),
    idneg character varying(3),
    inclui_altera character varying(1),
    indpref character varying(1),
    marca character varying(20),
    medatras bigint,
    modelo character varying(20),
    motinc character varying(3),
    nmauto bigint,
    nmcont character varying(22),
    nminst character varying(5),
    nmproc character varying(15),
    nmsegur character varying(20),
    nomconce character varying(20),
    nomecli character varying(35),
    notifica character varying(1),
    npprotes character varying(1),
    numdocto bigint,
    numfax character varying(8),
    numparc bigint,
    placa character varying(7),
    qtdbem bigint,
    qtdmoed double precision,
    ramcom bigint,
    rehojud double precision,
    reincid character varying(1),
    remradm double precision,
    sitcontrato character varying(1),
    situacao character varying(5),
    sldvenc double precision,
    subestabelecido character varying(1),
    telcom character varying(8),
    telresi character varying(8),
    texto character varying(100),
    tipmoed character varying(20),
    tipopess character varying(1),
    totatrend bigint,
    totparav bigint,
    totparavres bigint,
    totparca bigint,
    totparcc bigint,
    totparend bigint,
    totpares bigint,
    totpatres bigint,
    tpacao character varying(5),
    tpbem character varying(3),
    tpinterr character varying(5),
    tpntpro character varying(3),
    tpopera character varying(3),
    tpparc bigint,
    tpreg character varying(3),
    usuario character varying(10),
    vara character varying(2),
    vencidop double precision,
    vlcperar double precision,
    vlcperre double precision,
    vldevear double precision,
    vlmultar double precision,
    vlraut double precision,
    vlrcper double precision,
    vlrcperm double precision,
    vlrdesc double precision,
    vlrdeve double precision,
    vlrdeved double precision,
    vlrdevere double precision,
    vlrmoed double precision,
    vlrmulta double precision,
    vlrmultaqui double precision,
    vlrmultre double precision,
    vlrorig double precision,
    vlrparc double precision,
    vlrprot double precision,
    tipodirec character varying(1),
    dt_atraso date
);

--
-- TOC entry 1244 (class 1259 OID 38356)
-- Name: importahondatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importahondatmp (
    vlr_inicial_str character varying(1),
    ano_fabricacao character varying(5),
    bairro_avalista character varying(30),
    bairro_cliente character varying(40),
    bairro_com_avalista character varying(30),
    bairro_com_cliente character varying(30),
    cep_avalista character varying(20),
    cep_cliente character varying(10),
    cep_com_avalista character varying(10),
    cep_com_cliente character varying(10),
    cidade_avalista character varying(30),
    cidade_cliente character varying(30),
    cidade_com_avalista character varying(30),
    cidade_com_cliente character varying(30),
    codigo_acesso character varying(60),
    complemento_avalista character varying(60),
    complemento_cliente character varying(60),
    complemento_com_avalista character varying(60),
    complemento_com_cliente character varying(60),
    concessionaria character varying(30),
    contrato character varying(30),
    cor_veiculo character varying(25),
    cpf_avalista character varying(20),
    cpf_cliente character varying(20),
    data_contrato date,
    end_com_cliente character varying(60),
    endereco_avalista character varying(60),
    endereco_cliente character varying(60),
    endereco_com_avalista character varying(60),
    estado_avalista character varying(2),
    estado_cliente character varying(2),
    estado_com_avalista character varying(2),
    estado_com_cliente character varying(2),
    fax_concessionaria character varying(20),
    fone_avalista character varying(20),
    fone_cliente character varying(20),
    fone_com_avalista character varying(20),
    fone_com_cliente character varying(20),
    marca character varying(30),
    nome_avalista character varying(60),
    nome_cliente character varying(60),
    prazo_contrato bigint,
    rg_cliente character varying(20),
    segmento character varying(10),
    tabela character varying(10),
    taxa_contrato double precision,
    tipo bigint,
    valor_parcela double precision,
    veiculo character varying(20),
    parcela_vencida bigint,
    vencimento_parcela date,
    inclui_altera character varying(1),
    inclui_altera_parc character varying(1),
    tiponegocio bigint,
    id_cbcontrato bigint,
    id_cbparcela bigint
);

--
-- TOC entry 1245 (class 1259 OID 38365)
-- Name: importaitauadversatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaitauadversatmp (
    atraso smallint,
    acao_indenizatoria character varying(1),
    bairro_cli character varying(40),
    bairro_com character varying(30),
    codigo_adv bigint,
    cpf_cli character varying(20),
    cidade_cli character varying(30),
    cidade_com character varying(30),
    complemento_cli character varying(60),
    complemento_com character varying(30),
    cep_cli character varying(10),
    cep_com character varying(10),
    ddd_cli character varying(5),
    ddd_com character varying(5),
    data_ajuizamento date,
    data_operacao date,
    estado_cli character varying(2),
    estado_com character varying(2),
    empresa character varying(50),
    faixa_atraso character varying(30),
    logradouro_cli character varying(60),
    logradouro_com character varying(60),
    nome_cli character varying(60),
    numero_cli character varying(10),
    numero_com character varying(10),
    numero_processo character varying(30),
    nome_orgao character varying(60),
    nome_advogado_contrario character varying(100),
    operacao character varying(5),
    produto character varying(30),
    pessoa_cli character varying(1),
    pasta character varying(20),
    tipo_acao character varying(60),
    telefone_cli character varying(20),
    telefone_com character varying(20),
    ramal_com character varying(5),
    cobranca character varying(1),
    contrato character varying(30),
    numero_parcela smallint,
    data_atraso date,
    valor_ca double precision,
    valor_nb double precision,
    id_esregua bigint,
    id_gefilial bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_cbetapa bigint,
    id_geterceiro bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    duplicado character varying(1),
    redirecionado character varying(1)
);

--
-- TOC entry 1246 (class 1259 OID 38379)
-- Name: importaitaubancotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaitaubancotmp (
    agencia character varying(4),
    agencia_plataforma bigint,
    arquivo character varying(4),
    bairro_aval1 character varying(15),
    bairro_aval2 character varying(15),
    bairro_cli character varying(15),
    bairro_com_cli character varying(15),
    cep_aval1 character varying(8),
    cep_aval2 character varying(8),
    cep_cli character varying(8),
    cep_com_cli character varying(8),
    cidade_aval1 character varying(20),
    cidade_aval2 character varying(20),
    cidade_cli character varying(20),
    cidade_com_cli character varying(20),
    codigo_esc_anterior character varying(4),
    codigo_escritorio character varying(5),
    codigo_filial character varying(5),
    codigo_finaustria character varying(4),
    codigo_operacao character varying(5),
    codigo_seguradora bigint,
    complemento_aval1 character varying(15),
    complemento_aval2 character varying(15),
    complemento_cli character varying(15),
    complemento_com_cli character varying(15),
    conta_corrente character varying(7),
    cpf_aval1 character varying(14),
    cpf_aval2 character varying(14),
    data_contratacao date,
    data_envio date,
    data_limite date,
    data_lote date,
    data_vencimento date,
    ddd_aval1 character varying(4),
    ddd_aval2 character varying(4),
    ddd_cli character varying(4),
    ddd_com_cli character varying(4),
    distribuicao_parcela date,
    estado_aval1 character varying(2),
    estado_aval2 character varying(2),
    estado_cli character varying(2),
    estado_com_cli character varying(2),
    hora_lote character varying(4),
    logradouro_aval1 character varying(30),
    logradouro_aval2 character varying(30),
    logradouro_cli character varying(30),
    logradouro_com_cli character varying(30),
    nome_arquivo character varying(30),
    nome_aval1 character varying(30),
    nome_aval2 character varying(30),
    nome_cli character varying(30),
    num_contratos_finaustria character varying(12),
    num_lote bigint,
    num_recebimento character varying(12),
    numero_aval1 character varying(5),
    numero_aval2 character varying(5),
    numero_cli character varying(5),
    numero_com_cli character varying(5),
    parcela_residual character varying(1),
    parecer1_esc_anterior character varying(68),
    parecer2_esc_anterior character varying(68),
    pessoa_aval1 character varying(1),
    pessoa_aval2 character varying(1),
    pessoa_cli character varying(1),
    porte_empresa character varying(3),
    produtos_rede character varying(2),
    qtde_atraso bigint,
    qtde_parcelas bigint,
    qtde_registros bigint,
    ramal_aval1 character varying(4),
    ramal_aval2 character varying(4),
    ramal_cli character varying(4),
    ramal_com_cli character varying(4),
    regiao_plataforma character varying(2),
    seq_parecer_anterior bigint,
    telefone_aval1 character varying(8),
    telefone_aval2 character varying(8),
    telefone_cli character varying(8),
    telefone_com_cli character varying(8),
    texto_informativo character varying(1194),
    tipo_contrato character varying(30),
    valor_encargo double precision,
    valor_vencimento double precision,
    linha bigint,
    tipo_registro bigint,
    status_registro character varying(2),
    empresa_itau character varying(5),
    empresaitau character varying(5),
    cpf_cli character varying(14),
    contrato character varying(30),
    num_parcela bigint,
    data_geral date,
    valor_geral double precision,
    valor_atualizado double precision,
    valor_devedor double precision,
    codigo_estrategia bigint,
    subclassificacao bigint,
    tarifa_cobranca double precision,
    data_ativacao date,
    vl_cdesc_avista double precision,
    perc_maxdesc double precision,
    campanha character varying(2),
    numero_cartao character varying(16),
    agencia_conta_virtual character varying(12),
    numero_carteira character varying(3),
    valor_acordo double precision,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    id_cbetapa bigint,
    id_cbplataforma bigint,
    id_cbtiponegocio bigint,
    id_esregua bigint,
    id_cbproduto bigint,
    id_fimoeda bigint,
    id_gefilial bigint
);

--
-- TOC entry 1247 (class 1259 OID 38393)
-- Name: importaitaupictmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaitaupictmp (
    agencia character varying(4),
    agencia_plataforma bigint,
    arquivo character varying(4),
    bairro_aval1 character varying(15),
    bairro_aval2 character varying(15),
    bairro_cli character varying(15),
    bairro_com_cli character varying(15),
    cep_aval1 character varying(8),
    cep_aval2 character varying(8),
    cep_cli character varying(8),
    cep_com_cli character varying(8),
    cidade_aval1 character varying(20),
    cidade_aval2 character varying(20),
    cidade_cli character varying(20),
    cidade_com_cli character varying(20),
    codigo_esc_anterior character varying(4),
    codigo_escritorio character varying(5),
    codigo_filial character varying(5),
    codigo_finaustria character varying(4),
    codigo_operacao character varying(5),
    codigo_seguradora bigint,
    complemento_aval1 character varying(15),
    complemento_aval2 character varying(15),
    complemento_cli character varying(15),
    complemento_com_cli character varying(15),
    conta_corrente character varying(7),
    cpf_aval1 character varying(14),
    cpf_aval2 character varying(14),
    cpf_cli character varying(14),
    data_contratacao date,
    data_envio date,
    data_geral date,
    data_limite date,
    data_lote date,
    data_vencimento date,
    ddd_aval1 character varying(4),
    ddd_aval2 character varying(4),
    ddd_cli character varying(4),
    ddd_com_cli character varying(4),
    distribuicao_parcela date,
    estado_aval1 character varying(2),
    estado_aval2 character varying(2),
    estado_cli character varying(2),
    estado_com_cli character varying(2),
    hora_lote character varying(4),
    logradouro_aval1 character varying(30),
    logradouro_aval2 character varying(30),
    logradouro_cli character varying(30),
    logradouro_com_cli character varying(30),
    nome_arquivo character varying(30),
    nome_aval1 character varying(30),
    nome_aval2 character varying(30),
    nome_cli character varying(30),
    num_contratos_finaustria character varying(12),
    num_lote bigint,
    num_recebimento character varying(12),
    numero_aval1 character varying(5),
    numero_aval2 character varying(5),
    numero_cli character varying(5),
    numero_com_cli character varying(5),
    parcela_residual character varying(1),
    parecer1_esc_anterior character varying(68),
    parecer2_esc_anterior character varying(68),
    pessoa_aval1 character varying(1),
    pessoa_aval2 character varying(1),
    pessoa_cli character varying(1),
    porte_empresa character varying(3),
    produtos_rede character varying(2),
    qtde_atraso bigint,
    qtde_parcelas bigint,
    qtde_registros bigint,
    ramal_aval1 character varying(4),
    ramal_aval2 character varying(4),
    ramal_cli character varying(4),
    ramal_com_cli character varying(4),
    regiao_plataforma character varying(2),
    seq_parecer_anterior bigint,
    telefone_aval1 character varying(8),
    telefone_aval2 character varying(8),
    telefone_cli character varying(8),
    telefone_com_cli character varying(8),
    texto_informativo character varying(1194),
    tipo_contrato character varying(30),
    valor_atualizado double precision,
    valor_encargo double precision,
    valor_geral double precision,
    valor_vencimento double precision,
    linha bigint,
    tipo_registro bigint,
    status_registro character varying(2),
    empresa_itau bigint,
    empresaitau bigint,
    contrato character varying(30),
    num_parcela bigint,
    codigo_estrategia bigint,
    subclassificacao bigint,
    tarifa_cobranca double precision,
    data_ativacao date,
    vl_cdesc_avista double precision,
    perc_maxdesc double precision,
    campanha character varying(2),
    numero_cartao character varying(16),
    agencia_conta_virtual character varying(12),
    numero_carteira character varying(3),
    valor_acordo double precision,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    id_cbetapa bigint,
    id_cbplataforma bigint,
    id_cbtiponegocio bigint,
    id_esregua bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    nome_contato_str character varying(20),
    ddd_resindencial_str character varying(5),
    tel_residencial_str character varying(10),
    ramal_residencial_str character varying(5),
    ddd_celular_str character varying(5),
    tel_celular_str character varying(10),
    nome_conjuge_str character varying(30),
    ddd_conjuge_str character varying(5),
    tel_conjuge_str character varying(10),
    ramal_conjuge_str character varying(5),
    ddd_profissional_str character varying(5),
    tel_profissional_str character varying(10),
    ramal_profissional_str character varying(5),
    nome_referencia1_str character varying(30),
    parentesco_referencia1_str character varying(15),
    ddd_referencia1_str character varying(5),
    tel_referencia1_str character varying(10),
    ramal_referencia1_str character varying(5),
    nome_referencia2_str character varying(30),
    parentesco_referencia2_str character varying(15),
    ddd_referencia2_str character varying(5),
    tel_referencia2_str character varying(10),
    ramal_referencia2_str character varying(5),
    marca_str character varying(20),
    modelo_str character varying(20),
    ano_fabricacao_str character varying(4),
    ano_modelo_str character varying(4),
    placa_str character varying(10),
    chassi_str character varying(20),
    obs_txt text,
    ddd_residencial_str character varying(6),
    inclui_altera_garantia character varying(1)
);

--
-- TOC entry 1248 (class 1259 OID 38403)
-- Name: importaitaureguatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaitaureguatmp (
    agencia character varying(4),
    agencia_plataforma bigint,
    arquivo character varying(4),
    bairro_aval1 character varying(15),
    bairro_aval2 character varying(15),
    bairro_cli character varying(15),
    bairro_com_cli character varying(15),
    cep_aval1 character varying(8),
    cep_aval2 character varying(8),
    cep_cli character varying(8),
    cep_com_cli character varying(8),
    cidade_aval1 character varying(20),
    cidade_aval2 character varying(20),
    cidade_cli character varying(20),
    cidade_com_cli character varying(20),
    codigo_esc_anterior character varying(4),
    codigo_escritorio character varying(5),
    codigo_estrategia bigint,
    codigo_filial character varying(5),
    codigo_finaustria character varying(4),
    codigo_operacao character varying(5),
    codigo_seguradora bigint,
    complemento_aval1 character varying(15),
    complemento_aval2 character varying(15),
    complemento_cli character varying(15),
    complemento_com_cli character varying(15),
    conta_corrente character varying(7),
    contrato character varying(30),
    cpf_aval1 character varying(14),
    cpf_aval2 character varying(14),
    cpf_cli character varying(14),
    data_contratacao date,
    data_envio date,
    data_geral date,
    data_limite date,
    data_lote date,
    data_vencimento date,
    ddd_aval1 character varying(4),
    ddd_aval2 character varying(4),
    ddd_cli character varying(4),
    ddd_com_cli character varying(4),
    distribuicao_parcela date,
    empresa_itau bigint,
    estado_aval1 character varying(2),
    estado_aval2 character varying(2),
    estado_cli character varying(2),
    estado_com_cli character varying(2),
    hora_lote character varying(4),
    id_cbetapa bigint,
    id_cbplataforma bigint,
    id_cbtiponegocio bigint,
    id_esregua bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    logradouro_aval1 character varying(30),
    logradouro_aval2 character varying(30),
    logradouro_cli character varying(30),
    logradouro_com_cli character varying(30),
    nome_arquivo character varying(30),
    nome_aval1 character varying(30),
    nome_aval2 character varying(30),
    nome_cli character varying(30),
    num_contratos_finaustria character varying(12),
    num_lote bigint,
    num_parcela bigint,
    num_recebimento character varying(12),
    numero_aval1 character varying(5),
    numero_aval2 character varying(5),
    numero_cli character varying(5),
    numero_com_cli character varying(5),
    parcela_residual character varying(1),
    parecer1_esc_anterior character varying(68),
    parecer2_esc_anterior character varying(68),
    pessoa_aval1 character varying(1),
    pessoa_aval2 character varying(1),
    pessoa_cli character varying(1),
    porte_empresa character varying(3),
    produtos_rede character varying(2),
    qtde_atraso bigint,
    qtde_parcelas bigint,
    qtde_registros bigint,
    ramal_aval1 character varying(4),
    ramal_aval2 character varying(4),
    ramal_cli character varying(4),
    ramal_com_cli character varying(4),
    regiao_plataforma character varying(2),
    seq_parecer_anterior bigint,
    status_registro character varying(2),
    tarifa_cobranca double precision,
    telefone_aval1 character varying(8),
    telefone_aval2 character varying(8),
    telefone_cli character varying(8),
    telefone_com_cli character varying(8),
    texto_informativo character varying(1194),
    tipo_contrato character varying(30),
    tipo_registro bigint,
    valor_atualizado double precision,
    valor_encargo double precision,
    valor_geral double precision,
    valor_vencimento double precision,
    subclassificacao bigint
);

--
-- TOC entry 1249 (class 1259 OID 38416)
-- Name: importaitautmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importaitautmp (
    agencia character varying(4),
    agencia_plataforma bigint,
    arquivo character varying(4),
    bairro_aval1 character varying(15),
    bairro_aval2 character varying(15),
    bairro_cli character varying(15),
    bairro_com_cli character varying(15),
    cep_aval1 character varying(8),
    cep_aval2 character varying(8),
    cep_cli character varying(8),
    cep_com_cli character varying(8),
    cidade_aval1 character varying(20),
    cidade_aval2 character varying(20),
    cidade_cli character varying(20),
    cidade_com_cli character varying(20),
    codigo_esc_anterior character varying(4),
    codigo_escritorio character varying(5),
    codigo_filial character varying(5),
    codigo_finaustria character varying(4),
    codigo_operacao character varying(5),
    codigo_seguradora bigint,
    complemento_aval1 character varying(15),
    complemento_aval2 character varying(15),
    complemento_cli character varying(15),
    complemento_com_cli character varying(15),
    conta_corrente character varying(7),
    cpf_aval1 character varying(14),
    cpf_aval2 character varying(14),
    cpf_cli character varying(14),
    data_contratacao date,
    data_envio date,
    data_geral date,
    data_limite date,
    data_lote date,
    data_vencimento date,
    ddd_aval1 character varying(4),
    ddd_aval2 character varying(4),
    ddd_cli character varying(4),
    ddd_com_cli character varying(4),
    distribuicao_parcela date,
    estado_aval1 character varying(2),
    estado_aval2 character varying(2),
    estado_cli character varying(2),
    estado_com_cli character varying(2),
    hora_lote character varying(4),
    logradouro_aval1 character varying(30),
    logradouro_aval2 character varying(30),
    logradouro_cli character varying(30),
    logradouro_com_cli character varying(30),
    nome_arquivo character varying(30),
    nome_aval1 character varying(30),
    nome_aval2 character varying(30),
    nome_cli character varying(30),
    num_contratos_finaustria character varying(12),
    num_lote bigint,
    num_recebimento character varying(12),
    numero_aval1 character varying(5),
    numero_aval2 character varying(5),
    numero_cli character varying(5),
    numero_com_cli character varying(5),
    parcela_residual character varying(1),
    parecer1_esc_anterior character varying(68),
    parecer2_esc_anterior character varying(68),
    pessoa_aval1 character varying(1),
    pessoa_aval2 character varying(1),
    pessoa_cli character varying(1),
    porte_empresa character varying(3),
    produtos_rede character varying(2),
    qtde_atraso bigint,
    qtde_parcelas bigint,
    qtde_registros bigint,
    ramal_aval1 character varying(4),
    ramal_aval2 character varying(4),
    ramal_cli character varying(4),
    ramal_com_cli character varying(4),
    regiao_plataforma character varying(2),
    seq_parecer_anterior bigint,
    telefone_aval1 character varying(8),
    telefone_aval2 character varying(8),
    telefone_cli character varying(8),
    telefone_com_cli character varying(8),
    texto_informativo character varying(1194),
    tipo_contrato character varying(30),
    valor_atualizado double precision,
    valor_encargo double precision,
    valor_geral double precision,
    valor_vencimento double precision,
    linha bigint,
    tipo_registro bigint,
    status_registro character varying(2),
    empresa_itau bigint,
    empresaitau bigint,
    contrato character varying(30),
    num_parcela bigint,
    codigo_estrategia bigint,
    subclassificacao bigint,
    tarifa_cobranca double precision,
    data_ativacao date,
    vl_cdesc_avista double precision,
    perc_maxdesc double precision,
    campanha character varying(2),
    numero_cartao character varying(16),
    agencia_conta_virtual character varying(12),
    numero_carteira character varying(3),
    valor_acordo double precision,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    id_cbetapa bigint,
    id_cbplataforma bigint,
    id_cbtiponegocio bigint,
    id_esregua bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    nome_contato_str character varying(20),
    ddd_resindencial_str character varying(5),
    tel_residencial_str character varying(10),
    ramal_residencial_str character varying(5),
    ddd_celular_str character varying(5),
    tel_celular_str character varying(10),
    nome_conjuge_str character varying(30),
    ddd_conjuge_str character varying(5),
    tel_conjuge_str character varying(10),
    ramal_conjuge_str character varying(5),
    ddd_profissional_str character varying(5),
    tel_profissional_str character varying(10),
    ramal_profissional_str character varying(5),
    nome_referencia1_str character varying(30),
    parentesco_referencia1_str character varying(15),
    ddd_referencia1_str character varying(5),
    tel_referencia1_str character varying(10),
    ramal_referencia1_str character varying(5),
    nome_referencia2_str character varying(30),
    parentesco_referencia2_str character varying(15),
    ddd_referencia2_str character varying(5),
    tel_referencia2_str character varying(10),
    ramal_referencia2_str character varying(5),
    marca_str character varying(20),
    modelo_str character varying(20),
    ano_fabricacao_str character varying(4),
    ano_modelo_str character varying(4),
    placa_str character varying(10),
    chassi_str character varying(20),
    obs_txt text,
    ddd_residencial_str character varying(6),
    inclui_altera_garantia character varying(1)
);

--
-- TOC entry 1250 (class 1259 OID 38427)
-- Name: importamercantiltmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importamercantiltmp (
    tipo_registro bigint,
    id_cbdistribuidorcliente bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    contrato_codopr_str character varying(20),
    nompdt_str character varying(30),
    nomemp_str character varying(49),
    nomage_str character varying(39),
    dtaini_dat date,
    dtavct_dat date,
    vlrtxa_num double precision,
    vlrcon_num double precision,
    saldev_num double precision,
    valor_operacao_num double precision,
    nomdev_str character varying(49),
    cpfcgc_str character varying(14),
    numer1_str character varying(35),
    compl1_str character varying(10),
    bairr1_str character varying(20),
    cidad1_str character varying(34),
    uf1_str character varying(2),
    cep1_str character varying(8),
    numer2_str character varying(35),
    compl2_str character varying(10),
    bairr2_str character varying(20),
    cidad2_str character varying(34),
    uf2_str character varying(2),
    cep2_str character varying(8),
    fone_str character varying(20),
    identi_str character varying(15),
    numpes_int bigint,
    idtopr_int bigint,
    sisogm_str character varying(3),
    lograc_str character varying(50),
    bairrc_str character varying(20),
    localc_str character varying(34),
    ufc_str character varying(2),
    cepc_str character varying(8),
    fonec_str character varying(51),
    mailc_str character varying(50),
    numpcl_int bigint,
    parcdtavct_dat date,
    parcvlrvct_num double precision,
    parcsaldev_num double precision,
    avanome_str character varying(49),
    avacpfcgc_str character varying(14),
    avanumer1_str character varying(35),
    avacompl1_str character varying(10),
    avabairr1_str character varying(20),
    avacidad1_str character varying(34),
    avauf1_str character varying(2),
    avacep1_str character varying(8),
    avanumer2_str character varying(35),
    avacompl2_str character varying(10),
    avabairr2_str character varying(20),
    avacidad2_str character varying(34),
    avauf2_str character varying(2),
    avacep2_str character varying(8),
    avafone_str character varying(20),
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    obs_banco_txt text,
    data_distribuicao_dat date
);

--
-- TOC entry 1251 (class 1259 OID 38440)
-- Name: importamoeda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importamoeda (
    vlr_inicial_str character varying(3),
    moeda_str character varying(20)
);

--
-- TOC entry 1252 (class 1259 OID 38450)
-- Name: importapanamtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importapanamtmp (
    agencia_devedor bigint,
    alinea character varying(2),
    ano_fabricacao character varying(4),
    ano_modelo character varying(4),
    assessoria bigint,
    bairro_aval1 character varying(30),
    bairro_cli character varying(30),
    bairro_com_cli character varying(30),
    bairro_loja character varying(30),
    banco_devedor bigint,
    cep_aval1 character varying(8),
    cep_cli character varying(8),
    cep_com_cli character varying(8),
    cep_loja character varying(8),
    certificado character varying(11),
    chassi character varying(21),
    cheque_devedor character varying(8),
    cidade_aval1 character varying(30),
    cidade_cli character varying(30),
    cidade_com_cli character varying(30),
    cidade_loja character varying(40),
    cidade_natal_cli character varying(30),
    codigo_empresa character varying(3),
    codigo_produto character varying(4),
    combustivel character varying(1),
    complemento_aval1 character varying(30),
    complemento_cli character varying(30),
    complemento_com_cli character varying(30),
    complemento_loja character varying(30),
    conjuge_cli character varying(35),
    conta_devedor character varying(8),
    contrato character varying(12),
    cor character varying(20),
    cpf_aval1 character varying(14),
    cpf_cli character varying(14),
    data_envio date,
    data_financiamento date,
    data_geracao date,
    data_nascimento_cli date,
    data_retorno date,
    data_rg_cli date,
    data_vencimento date,
    ddd_aval1 character varying(5),
    ddd_cli character varying(5),
    ddd_com_cli character varying(5),
    ddd_loja character varying(5),
    ddd_ref_aval1 character varying(5),
    descricao_empresa character varying(35),
    emissor_rg_cli character varying(3),
    empresa character varying(30),
    endereco_aval1 character varying(60),
    endereco_cli character varying(60),
    endereco_com_cli character varying(60),
    endereco_loja character varying(60),
    estado_civil_cli character varying(1),
    id_cbdistribuidorcliente bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    indexador character varying(4),
    mae_cli character varying(30),
    marca character varying(30),
    massificado character varying(1),
    modelo character varying(30),
    modelo_finan bigint,
    nacionalidade_cli character varying(35),
    nome_aval1 character varying(35),
    nome_cli character varying(60),
    nome_loja character varying(35),
    nome_ref_aval1 character varying(35),
    num_parcela bigint,
    numero_aval1 character varying(5),
    numero_cli character varying(5),
    numero_com_cli character varying(5),
    numero_loja character varying(5),
    placa character varying(7),
    qtde_parcelas_devidas bigint,
    qtde_parcelas_financiadas bigint,
    qtde_parcelas_pagas bigint,
    ramal_aval1 character varying(4),
    ramal_cli character varying(3),
    ramal_com_cli character varying(4),
    ramal_loja character varying(4),
    ramal_ref_aval1 character varying(4),
    regional bigint,
    residencia_cli character varying(1),
    rg_cli character varying(15),
    telefone_aval1 character varying(8),
    telefone_cli character varying(8),
    telefone_com_cli character varying(8),
    telefone_loja character varying(8),
    telefone_ref_aval1 character varying(8),
    tipo_financiamento character varying(1),
    tipo_registro bigint,
    uf_aval1 character varying(2),
    uf_cidade_natal_cli character varying(2),
    uf_cli character varying(2),
    uf_com_cli character varying(2),
    uf_loja character varying(2),
    uf_rg_cli character varying(2),
    valor_bem double precision,
    valor_cheque character varying(20),
    valor_entrada double precision,
    valor_financiado double precision,
    valor_montante double precision,
    valor_parcela double precision,
    endereco_adicional_cli character varying(60),
    numero_adicional_cli character varying(5),
    complemento_adicional_cli character varying(30),
    bairro_adicional_cli character varying(30),
    cep_adicional_cli character varying(10),
    cidade_adicional_cli character varying(40),
    uf_adicional_cli character varying(2),
    ddd_adicional_cli character varying(5),
    fone_adicional_cli character varying(10),
    ramal_adicional_cli character varying(5),
    ddd_cel_adicional_cli character varying(5),
    cel_adicional_cli character varying(10),
    email_adicional_cli character varying(50),
    empresa_adicional_cli character varying(30),
    endereco_com_adicional_cli character varying(60),
    numero_com_adicional_cli character varying(5),
    complemento_com_adicional_cli character varying(30),
    bairro_com_adicional_cli character varying(30),
    cep_com_adicional_cli character varying(10),
    cidade_com_adicional_cli character varying(40),
    uf_com_adicional_cli character varying(2),
    ddd_com_adicional_cli character varying(5),
    fone_com_adicional_cli character varying(10),
    ramal_com_adicional_cli character varying(5),
    endereco_especifico_cli character varying(60),
    numero_especifico_cli character varying(5),
    complemento_especifico_cli character varying(30),
    bairro_especifico_cli character varying(30),
    cep_especifico_cli character varying(10),
    cidade_especifico_cli character varying(40),
    uf_especifico_cli character varying(2),
    ddd_especifico_cli character varying(5),
    fone_especifico_cli character varying(10),
    ramal_especifico_cli character varying(5),
    ddd_cel_especifico_cli character varying(5),
    cel_especifico_cli character varying(10),
    email_especifico_cli character varying(50),
    endereco_com_especifico_cli character varying(60),
    numero_com_especifico_cli character varying(5),
    complemento_com_especifico_cli character varying(30),
    bairro_com_especifico_cli character varying(30),
    cep_com_especifico_cli character varying(10),
    cidade_com_especifico_cli character varying(40),
    uf_com_especifico_cli character varying(2),
    ddd_com_especifico_cli character varying(5),
    fone_com_especifico_cli character varying(10),
    ramal_com_especifico_cli character varying(5),
    cod_fase_cobranca character varying(5),
    fase_cobranca character varying(25),
    id_esregua bigint,
    id_cbetapa bigint,
    id_cbetapa_ant_int bigint,
    etapa_nova character varying(1)
);

--
-- TOC entry 1253 (class 1259 OID 38463)
-- Name: importapantmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importapantmp (
    agencia_devedor bigint,
    alinea character varying(2),
    ano_fabricacao character varying(4),
    ano_modelo character varying(4),
    assessoria bigint,
    bairro_aval1 character varying(30),
    bairro_cli character varying(30),
    bairro_com_cli character varying(30),
    bairro_loja character varying(30),
    banco_devedor bigint,
    cep_aval1 character varying(8),
    cep_cli character varying(8),
    cep_com_cli character varying(8),
    cep_loja character varying(8),
    certificado character varying(11),
    chassi character varying(21),
    cheque_devedor character varying(8),
    cidade_aval1 character varying(30),
    cidade_cli character varying(30),
    cidade_com_cli character varying(30),
    cidade_loja character varying(40),
    cidade_natal_cli character varying(30),
    codigo_empresa character varying(3),
    codigo_produto character varying(4),
    combustivel character varying(1),
    complemento_aval1 character varying(30),
    complemento_cli character varying(30),
    complemento_com_cli character varying(30),
    complemento_loja character varying(30),
    conjuge_cli character varying(35),
    conta_devedor character varying(8),
    contrato character varying(12),
    cor character varying(20),
    cpf_aval1 character varying(14),
    cpf_cli character varying(14),
    data_envio date,
    data_financiamento date,
    data_geracao date,
    data_nascimento_cli date,
    data_retorno date,
    data_rg_cli date,
    data_vencimento date,
    ddd_aval1 character varying(5),
    ddd_cli character varying(5),
    ddd_com_cli character varying(5),
    ddd_loja character varying(5),
    ddd_ref_aval1 character varying(5),
    descricao_empresa character varying(35),
    emissor_rg_cli character varying(3),
    empresa character varying(30),
    endereco_aval1 character varying(60),
    endereco_cli character varying(60),
    endereco_com_cli character varying(60),
    endereco_loja character varying(60),
    estado_civil_cli character varying(1),
    fase_cobranca character varying(25),
    id_cbdistribuidorcliente bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gefilial bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    indexador character varying(4),
    mae_cli character varying(30),
    marca character varying(30),
    massificado character varying(1),
    modelo character varying(30),
    modelo_finan bigint,
    nacionalidade_cli character varying(35),
    nome_aval1 character varying(35),
    nome_cli character varying(60),
    nome_loja character varying(35),
    nome_ref_aval1 character varying(35),
    num_parcela bigint,
    numero_aval1 character varying(5),
    numero_cli character varying(5),
    numero_com_cli character varying(5),
    numero_loja character varying(5),
    placa character varying(7),
    qtde_parcelas_devidas bigint,
    qtde_parcelas_financiadas bigint,
    qtde_parcelas_pagas bigint,
    ramal_aval1 character varying(4),
    ramal_cli character varying(3),
    ramal_com_cli character varying(4),
    ramal_loja character varying(4),
    ramal_ref_aval1 character varying(4),
    regional character varying(30),
    residencia_cli character varying(1),
    rg_cli character varying(15),
    telefone_aval1 character varying(8),
    telefone_cli character varying(8),
    telefone_com_cli character varying(8),
    telefone_loja character varying(8),
    telefone_ref_aval1 character varying(8),
    tipo_financiamento character varying(1),
    tipo_registro bigint,
    uf_aval1 character varying(2),
    uf_cidade_natal_cli character varying(2),
    uf_cli character varying(2),
    uf_com_cli character varying(2),
    uf_loja character varying(2),
    uf_rg_cli character varying(2),
    valor_bem double precision,
    valor_cheque character varying(20),
    valor_entrada double precision,
    valor_financiado double precision,
    valor_montante double precision,
    valor_parcela double precision,
    endereco_adicional_cli character varying(60),
    numero_adicional_cli character varying(5),
    complemento_adicional_cli character varying(30),
    bairro_adicional_cli character varying(30),
    cep_adicional_cli character varying(10),
    cidade_adicional_cli character varying(40),
    uf_adicional_cli character varying(2),
    ddd_adicional_cli character varying(5),
    fone_adicional_cli character varying(10),
    ramal_adicional_cli character varying(5),
    ddd_cel_adicional_cli character varying(5),
    cel_adicional_cli character varying(10),
    email_adicional_cli character varying(50),
    empresa_adicional_cli character varying(30),
    endereco_com_adicional_cli character varying(60),
    numero_com_adicional_cli character varying(5),
    complemento_com_adicional_cli character varying(30),
    bairro_com_adicional_cli character varying(30),
    cep_com_adicional_cli character varying(10),
    cidade_com_adicional_cli character varying(40),
    uf_com_adicional_cli character varying(2),
    ddd_com_adicional_cli character varying(5),
    fone_com_adicional_cli character varying(10),
    ramal_com_adicional_cli character varying(5),
    endereco_especifico_cli character varying(60),
    numero_especifico_cli character varying(5),
    complemento_especifico_cli character varying(30),
    bairro_especifico_cli character varying(30),
    cep_especifico_cli character varying(10),
    cidade_especifico_cli character varying(40),
    uf_especifico_cli character varying(2),
    ddd_especifico_cli character varying(5),
    fone_especifico_cli character varying(10),
    ramal_especifico_cli character varying(5),
    ddd_cel_especifico_cli character varying(5),
    cel_especifico_cli character varying(10),
    email_especifico_cli character varying(50),
    endereco_com_especifico_cli character varying(60),
    numero_com_especifico_cli character varying(5),
    complemento_com_especifico_cli character varying(30),
    bairro_com_especifico_cli character varying(30),
    cep_com_especifico_cli character varying(10),
    cidade_com_especifico_cli character varying(40),
    uf_com_especifico_cli character varying(2),
    ddd_com_especifico_cli character varying(5),
    fone_com_especifico_cli character varying(10),
    ramal_com_especifico_cli character varying(5),
    cod_fase_cobranca bigint
);

--
-- TOC entry 1254 (class 1259 OID 38480)
-- Name: importazogbitmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.importazogbitmp (
    anofabricacao_str character varying(4),
    anomodelo_str character varying(4),
    assessoria_str character varying(40),
    bairro_avalista_str character varying(20),
    bairro_lt_str character varying(20),
    bairro_str character varying(20),
    cep_avalista_str character varying(9),
    cep_lt_str character varying(9),
    cep_str character varying(9),
    cidade_avalista_str character varying(20),
    cidade_lt_str character varying(20),
    cidade_str character varying(20),
    codigo_oc_int bigint,
    codproduto_str character varying(2),
    complemento_avalista_str character varying(10),
    complemento_lt_str character varying(10),
    complemento_str character varying(10),
    contrato_str character varying(9),
    cor_str character varying(20),
    cpf_avalista_str character varying(14),
    cpf_str character varying(14),
    dataarquivo_dat date,
    ddd_avalista_str character varying(4),
    ddd_lt_str character varying(4),
    ddd_str character varying(4),
    desc_oc_str character varying(20),
    emissao_dat date,
    empresa_header_str character varying(40),
    empresa_lt_str character varying(50),
    empresa_trailler_str character varying(40),
    estado_avalista_str character varying(2),
    estado_lt_str character varying(2),
    estado_str character varying(2),
    fase_int bigint,
    financiamento_int bigint,
    fone_avalista_str character varying(25),
    fone_lt_str character varying(25),
    fone_str character varying(25),
    indicador_int bigint,
    logradouro_avalista_str character varying(50),
    logradouro_lt_str character varying(50),
    logradouro_str character varying(50),
    loja_int bigint,
    marca_str character varying(20),
    modelo_str character varying(20),
    nome_avalista_str character varying(50),
    nome_str character varying(12),
    nomearquivo_str character varying(12),
    nomecliente_str character varying(50),
    nomeloja_str character varying(40),
    nomepdv_str character varying(15),
    numerocartao_str character varying(16),
    numerodut_str character varying(16),
    observacao_ass_str character varying(226),
    observacao_oc_str character varying(200),
    ocorrencia_dat date,
    operador_str character varying(10),
    operadorpdv_str character varying(40),
    parcela_int bigint,
    pdv_int bigint,
    placa_str character varying(10),
    plano_int bigint,
    profissao_str character varying(15),
    ramal_avalista_str character varying(5),
    ramal_lt_str character varying(5),
    ramal_str character varying(5),
    reenvioparcela_str character varying(1),
    responsavel_str character varying(1),
    salario_num double precision,
    saldo_num double precision,
    sequencial_int bigint,
    tiporegistro_int bigint,
    tiporetirada_str character varying(1),
    total_int bigint,
    valorpago_num double precision,
    valorparcela_num double precision,
    venctoparcela_dat date,
    id_cbdistribuidorcliente bigint,
    id_cbetapa bigint,
    id_cbtiponegocio bigint,
    id_fimoeda bigint,
    id_gecliente bigint,
    id_geempresa bigint,
    id_gefilial bigint,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1)
);

--
-- TOC entry 1255 (class 1259 OID 38491)
-- Name: inconsistenciaitautmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.inconsistenciaitautmp (
    id_gecliente_int bigint,
    data_processamento date,
    tipo_registro bigint,
    codigo_escritorio character varying(5),
    data_lote date,
    hora_lote character varying(4),
    agencia character varying(4),
    conta_corrente character varying(7),
    arquivo character varying(4),
    nome_arquivo character varying(30),
    num_lote bigint,
    status_registro character varying(2),
    codigo_operacao character varying(5),
    contrato character varying(15),
    parcela bigint,
    codigo_erro character varying(3),
    mensagem character varying(81),
    status_escritorio character varying(2),
    codigo_parecer character varying(4),
    data_parecer date,
    qtde_registros bigint
);

--
-- TOC entry 1256 (class 1259 OID 38498)
-- Name: limpeza_base; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.limpeza_base (
    id_limpeza_base bigint DEFAULT nextval(('"limpeza_base_seq"'::text)::regclass) NOT NULL,
    schema_str character varying(100),
    tabela_str character varying(100),
    count_str character varying(10),
    dump_str bit(1),
    data_dump_dat date,
    drop_str bit(1),
    data_drop_dat date,
    data_truncate_dat date,
    truncate_str bit(1)
);

--
-- TOC entry 1257 (class 1259 OID 38509)
-- Name: limpeza_base_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.limpeza_base_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 92233720368547
    CACHE 1;

--
-- TOC entry 1258 (class 1259 OID 38515)
-- Name: logisticareversaendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.logisticareversaendereco (
    linha_arquivo character varying(255),
    versao_layout character varying(255),
    tipo_layout character varying(255),
    sistema character varying(255),
    carteira character varying(255),
    arquivo_remessa character varying(255),
    chave_acesso character varying(255),
    data_postagem character varying(255),
    data_devolucao character varying(255),
    id_postagem character varying(255),
    codigo_devolucao character varying(255),
    motivo_devolucao character varying(255),
    endereco character varying(255),
    numero character varying(255),
    complemento character varying(255),
    bairro character varying(255),
    cidade character varying(255),
    cep character varying(255),
    estado character varying(255),
    vazio character varying(255),
    chave_str character varying(255)
);

--
-- TOC entry 1259 (class 1259 OID 38529)
-- Name: lotebasao_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.lotebasao_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1260 (class 1259 OID 38536)
-- Name: lp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.lp (
    id_lp bigint DEFAULT nextval(('lp_seq'::text)::regclass) NOT NULL,
    id_cnt bigint NOT NULL,
    nshd character varying(30),
    prdt character varying(10),
    dtx character varying(20)
);

--
-- TOC entry 1261 (class 1259 OID 38547)
-- Name: lp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.lp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1262 (class 1259 OID 38554)
-- Name: nossonumerotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.nossonumerotmp (
    contrato_certo character varying(50),
    nosso_numero_errado character varying(20),
    valor_certo double precision,
    arquivo character varying(1)
);

--
-- TOC entry 1263 (class 1259 OID 38564)
-- Name: npjurtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.npjurtmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbtiponegocio_descricao_str character varying(40),
    gefilial_nome_str character varying(40),
    cbcontrato_data_recebimento_dat date,
    cbcontrato_estado_str character varying(2),
    da_int bigint
);

--
-- TOC entry 1264 (class 1259 OID 38573)
-- Name: numacordo21_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.numacordo21_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 98999
    CACHE 1;

--
-- TOC entry 1265 (class 1259 OID 38582)
-- Name: numacordo2_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.numacordo2_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 899999999
    CACHE 1;

--
-- TOC entry 1266 (class 1259 OID 38589)
-- Name: numacordo30_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.numacordo30_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    MAXVALUE 89999
    CACHE 1;

--
-- TOC entry 1267 (class 1259 OID 38601)
-- Name: numacordo314_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.numacordo314_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1268 (class 1259 OID 38608)
-- Name: numacordo386_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.numacordo386_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1269 (class 1259 OID 38615)
-- Name: numacordo44_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.numacordo44_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1270 (class 1259 OID 38624)
-- Name: pg_proc_bkp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.pg_proc_bkp (
    proname name,
    prosrc text
);

--
-- TOC entry 1271 (class 1259 OID 38646)
-- Name: pg_proc_ctask0028235; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.pg_proc_ctask0028235 (
    proname name,
    pronamespace oid,
    proowner oid,
    prolang oid,
    procost real,
    prorows real,
    provariadic oid,
    protransform regproc,
    proisagg boolean,
    proiswindow boolean,
    prosecdef boolean,
    proleakproof boolean,
    proisstrict boolean,
    proretset boolean,
    provolatile "char",
    proparallel "char",
    pronargs smallint,
    pronargdefaults smallint,
    prorettype oid,
    proargtypes oidvector,
    proallargtypes oid[],
    proargmodes "char"[],
    proargnames text[],
    proargdefaults pg_node_tree,
    protrftypes oid[],
    prosrc text,
    probin text,
    proconfig text[],
    proacl aclitem[]
);

--
-- TOC entry 1272 (class 1259 OID 38662)
-- Name: pg_proc_ctask0042337; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.pg_proc_ctask0042337 (
    proname name,
    prosrc text
);

--
-- TOC entry 1273 (class 1259 OID 38681)
-- Name: pr002tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.pr002tmp (
    id_cbcontrato_int bigint,
    contrato character varying(30),
    taxa_contrato_num double precision,
    taxa_contrato_atual_num double precision
);

--
-- TOC entry 1274 (class 1259 OID 38692)
-- Name: pr002tmp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.pr002tmp_seq
    START WITH 0
    INCREMENT BY 1
    MINVALUE 0
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1275 (class 1259 OID 38701)
-- Name: processacredibel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.processacredibel (
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    parcela_int bigint,
    id_cbparcela_int bigint,
    situacao_parcela bigint,
    data_geracao date
);

--
-- TOC entry 1276 (class 1259 OID 38708)
-- Name: qctmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qctmp (
    id_geqlendereco_int_int bigint,
    id_geqlclinete_int bigint,
    codigo_soundex_str character varying(100),
    endereco_com_numero_str character varying(1),
    endereco_str character varying(100),
    bairro_str character varying(100),
    cidade_str character varying(100),
    estado_str character varying(2),
    cep_str character varying(10)
);

--
-- TOC entry 1277 (class 1259 OID 38717)
-- Name: qlbancopaulistatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbancopaulistatmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    bairro_str character varying(40),
    cidade_str character varying(30),
    estado_str character varying(2),
    cep_str character varying(10),
    telefone_str character varying(20),
    ddd_str character varying(5),
    local_trabalho_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(40),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    cep_trabalho_str character varying(10),
    telefone_trabalho_str character varying(20),
    ddd_trabalho_str character varying(5),
    nome_avalista1_str character varying(60),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(40),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    cpf_avalista1_str character varying(20),
    rg_avalista1_str character varying(20),
    fone_avalista1_str character varying(20),
    ddd_avalista1_str character varying(5),
    complemento_str character varying(60),
    nome_ref1_avalista2_str character varying(50),
    nome_ref2_avalista2_str character varying(50),
    fone_ref1_avalista2_str character varying(20),
    fone_ref2_avalista2_str character varying(20),
    fone_trab_avalista_str character varying(20)
);

--
-- TOC entry 1278 (class 1259 OID 38733)
-- Name: qlbictmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbictmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cidade_str character varying(30),
    cep_str character varying(10),
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    cep_trabalho_str character varying(10),
    bairro_trabalho_str character varying(40),
    cidade_trabalho_str character varying(30),
    endereco_trabalho_str character varying(60),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(40),
    cidade_avalista1_str character varying(30),
    cep_avalista1_str character varying(10),
    estado_avalista1_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    local_trabalho_str character varying(60),
    cpf_avalista1_str character varying(20),
    ddd_avalista1_str character varying(5),
    nome_avalista1_str character varying(60),
    fone_avalista1_str character varying(20),
    fone_trab_avalista2_str character varying(20),
    nome_avalista2_str character varying(60),
    telefone_referencia2_str character varying(20),
    nome_referencia2_str character varying(60)
);

--
-- TOC entry 1279 (class 1259 OID 38741)
-- Name: qlbmctmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbmctmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    bairro_str character varying(40),
    cidade_str character varying(30),
    cep_str character varying(10),
    estado_str character varying(2),
    local_trabalho_str character varying(60),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(40),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    cep_trabalho_str character varying(10),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(40),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    nome_avalista2_str character varying(60),
    cpf_avalista2_str character varying(20),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(40),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    telefone_str character varying(20),
    ramal_str character varying(5),
    telefone_trabalho_str character varying(20),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ramal_trabalho_str character varying(5),
    fone_avalista1_str character varying(20),
    fone_cel_avalista1_str character varying(20),
    fone_avalista2_str character varying(20),
    fone_cel_avalista2_str character varying(20),
    nome_ref1_avalista1_str character varying(60),
    fone_ref1_avalista1_str character varying(20),
    nome_ref2_avalista1_str character varying(60),
    fone_ref2_avalista1_str character varying(20),
    nome_ref1_avalista2_str character varying(60),
    fone_ref1_avalista2_str character varying(20),
    nome_ref2_avalista2_str character varying(60),
    fone_ref2_avalista2_str character varying(20),
    complemento_str character varying(60),
    ddd_str character varying(5),
    ddd_trabalho_str character varying(5)
);

--
-- TOC entry 1280 (class 1259 OID 38751)
-- Name: qlbradescocartaotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbradescocartaotmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    estado_str character varying(2),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5)
);

--
-- TOC entry 1281 (class 1259 OID 38763)
-- Name: qlbradescocomercialtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbradescocomercialtmp (
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    id_gecliente_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(50),
    endereco_str character varying(50),
    cep_str character varying(10),
    complemento_cep_str character varying(5),
    estado_str character varying(2),
    cidade_str character varying(30),
    ddd_str character varying(5),
    telefone_str character varying(20),
    conjuge_str character varying(50),
    pai_str character varying(50),
    mae_str character varying(50),
    empresa_str character varying(50),
    endereco_trabalho_str character varying(50),
    numero_str character varying(10),
    complemento_trabalho_str character varying(50),
    cep_trabalho_str character varying(10),
    complemento_cep_trab_str character varying(5),
    estado_trabalho_str character varying(2),
    cidade_trabalho_str character varying(30),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    conjuge_2_str character varying(50),
    pai_2_str character varying(50),
    mae_2_str character varying(50),
    empresa2_str character varying(50),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2)
);

--
-- TOC entry 1282 (class 1259 OID 38773)
-- Name: qlbradescocorporativotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbradescocorporativotmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    estado_str character varying(2),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(40),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    cep_trabalho_str character varying(10),
    local_trabalho_str character varying(60),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5)
);

--
-- TOC entry 1283 (class 1259 OID 38782)
-- Name: qlbradescocredimobtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbradescocredimobtmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    complemento_str character varying(60),
    estado_str character varying(2),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(40),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    cep_trabalho_str character varying(10),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5)
);

--
-- TOC entry 1284 (class 1259 OID 38792)
-- Name: qlbradescotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlbradescotmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    endereco_trabalho_str character varying(60),
    complemento_end_fica_str character varying(60),
    cep_trabalho_str character varying(10),
    estado_trabalho_str character varying(2),
    cidade_trabalho_str character varying(30),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    bairro_str character varying(40),
    complemento_str character varying(60),
    ramal_str character varying(5),
    ramal_trabalho_str character varying(5),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20)
);

--
-- TOC entry 1285 (class 1259 OID 38801)
-- Name: qlcifratmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlcifratmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    complemento_str character varying(60),
    cidade_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    bairro_trabalho_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_avalista1_str character varying(40),
    cep_avalista1_str character varying(10),
    endereco_avalista1_str character varying(60),
    cidade_avalista1_str character varying(30),
    endereco_avalista2_str character varying(60),
    bairro_avalista2_str character varying(40),
    cidade_avalista2_str character varying(30),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    local_trabalho_str character varying(60),
    ramal_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ddd_trabalho_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_cel_str character varying(5),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    ddd_avalista2_str character varying(5),
    fone_avalista2_str character varying(20),
    nome_avalista2_str character varying(60)
);

--
-- TOC entry 1286 (class 1259 OID 38808)
-- Name: qlhondatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlhondatmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    complemento_str character varying(60),
    endereco_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    cidade_trabalho_str character varying(30),
    cep_trabalho_str character varying(10),
    bairro_trabalho_str character varying(40),
    complemento_trabalho_str character varying(60),
    endereco_trabalho_str character varying(60),
    estado_avalista1_str character varying(2),
    cidade_avalista1_str character varying(30),
    bairro_avalista1_str character varying(40),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    nome_avalista1_str character varying(60),
    cep_avalista1_str character varying(10),
    estado_trab_avalista1_str character varying(2),
    complemento_trab_avalista1_str character varying(60),
    endereco_trab_avalista1_str character varying(60),
    bairro_trab_avalista1_str character varying(40),
    cidade_trab_avalista1_str character varying(30),
    local_trab_avalista1_str character varying(60),
    cep_trab_avalista1_str character varying(10),
    campo_contrato_str character varying(30),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    fax_concessionaria_str character varying(20),
    nome_concessionaria_str character varying(60)
);

--
-- TOC entry 1287 (class 1259 OID 38817)
-- Name: qlpanamtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlpanamtmp (
    id_cbcontrato_int bigint,
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    local_trabalho_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(40),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(40),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    uf_nascimento_str character varying(2),
    nacionalidade_str character varying(35),
    numero_str character varying(5),
    residencia_str character varying(1),
    numero_trabalho_str character varying(5),
    complemento_trabalho_str character varying(60),
    numero_avalista1_str character varying(5),
    complemento_avalista1_str character varying(60),
    ramal_avalista1_str character varying(5),
    nome_ref_avalista1_str character varying(60),
    ddd_ref_avalista1_str character varying(5),
    telefone_ref_avalista1_str character varying(20),
    ramal_ref_avalista1_str character varying(5),
    nome_loja_str character varying(35),
    endereco_loja_str character varying(60),
    numero_loja_str character varying(5),
    complemento_loja_str character varying(60),
    bairro_loja_str character varying(40),
    cep_loja_str character varying(10),
    cidade_loja_str character varying(30),
    uf_loja_str character varying(2),
    ddd_loja_str character varying(5),
    telefone_loja_str character varying(20),
    ramal_loja_str character varying(5),
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_adicional_cli character varying(60),
    numero_adicional_cli character varying(5),
    complemento_adicional_cli character varying(30),
    bairro_adicional_cli character varying(30),
    cep_adicional_cli character varying(10),
    cidade_adicional_cli character varying(40),
    uf_adicional_cli character varying(2),
    ddd_adicional_cli character varying(5),
    fone_adicional_cli character varying(10),
    ramal_adicional_cli character varying(5),
    ddd_cel_adicional_cli character varying(5),
    cel_adicional_cli character varying(10),
    email_adicional_cli character varying(50),
    empresa_adicional_cli character varying(30),
    endereco_com_adicional_cli character varying(60),
    numero_com_adicional_cli character varying(5),
    complemento_com_adicional_cli character varying(30),
    bairro_com_adicional_cli character varying(30),
    cep_com_adicional_cli character varying(10),
    cidade_com_adicional_cli character varying(40),
    uf_com_adicional_cli character varying(2),
    ddd_com_adicional_cli character varying(5),
    fone_com_adicional_cli character varying(10),
    ramal_com_adicional_cli character varying(5),
    endereco_especifico_cli character varying(60),
    numero_especifico_cli character varying(5),
    complemento_especifico_cli character varying(30),
    bairro_especifico_cli character varying(30),
    cep_especifico_cli character varying(10),
    cidade_especifico_cli character varying(40),
    uf_especifico_cli character varying(2),
    ddd_especifico_cli character varying(5),
    fone_especifico_cli character varying(10),
    ramal_especifico_cli character varying(5),
    ddd_cel_especifico_cli character varying(5),
    cel_especifico_cli character varying(10),
    email_especifico_cli character varying(50),
    endereco_com_especifico_cli character varying(60),
    numero_com_especifico_cli character varying(5),
    complemento_com_especifico_cli character varying(30),
    bairro_com_especifico_cli character varying(30),
    cep_com_especifico_cli character varying(10),
    cidade_com_especifico_cli character varying(40),
    uf_com_especifico_cli character varying(2),
    ddd_com_especifico_cli character varying(5),
    fone_com_especifico_cli character varying(10),
    ramal_com_especifico_cli character varying(5)
);

--
-- TOC entry 1288 (class 1259 OID 38827)
-- Name: qlpantmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlpantmp (
    id_cbcontrato_int bigint,
    endereco_str character varying(60),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cep_str character varying(10),
    cidade_str character varying(30),
    estado_str character varying(2),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ramal_str character varying(5),
    local_trabalho_str character varying(40),
    endereco_trabalho_str character varying(60),
    bairro_trabalho_str character varying(40),
    cep_trabalho_str character varying(10),
    cidade_trabalho_str character varying(30),
    estado_trabalho_str character varying(2),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    ramal_trabalho_str character varying(5),
    nome_conjuge_str character varying(60),
    nome_avalista1_str character varying(60),
    cpf_avalista1_str character varying(20),
    endereco_avalista1_str character varying(60),
    bairro_avalista1_str character varying(40),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    ddd_avalista1_str character varying(5),
    fone_avalista1_str character varying(20),
    uf_nascimento_str character varying(2),
    nacionalidade_str character varying(35),
    numero_str character varying(5),
    residencia_str character varying(1),
    numero_trabalho_str character varying(5),
    complemento_trabalho_str character varying(60),
    numero_avalista1_str character varying(5),
    complemento_avalista1_str character varying(60),
    ramal_avalista1_str character varying(5),
    nome_ref_avalista1_str character varying(60),
    ddd_ref_avalista1_str character varying(5),
    telefone_ref_avalista1_str character varying(20),
    ramal_ref_avalista1_str character varying(5),
    nome_loja_str character varying(35),
    endereco_loja_str character varying(60),
    numero_loja_str character varying(5),
    complemento_loja_str character varying(60),
    bairro_loja_str character varying(40),
    cep_loja_str character varying(10),
    cidade_loja_str character varying(30),
    uf_loja_str character varying(2),
    ddd_loja_str character varying(5),
    telefone_loja_str character varying(20),
    ramal_loja_str character varying(5),
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_adicional_cli character varying(60),
    numero_adicional_cli character varying(5),
    complemento_adicional_cli character varying(30),
    bairro_adicional_cli character varying(30),
    cep_adicional_cli character varying(10),
    cidade_adicional_cli character varying(40),
    uf_adicional_cli character varying(2),
    ddd_adicional_cli character varying(5),
    fone_adicional_cli character varying(10),
    ramal_adicional_cli character varying(5),
    ddd_cel_adicional_cli character varying(5),
    cel_adicional_cli character varying(10),
    email_adicional_cli character varying(50),
    empresa_adicional_cli character varying(30),
    endereco_com_adicional_cli character varying(60),
    numero_com_adicional_cli character varying(5),
    complemento_com_adicional_cli character varying(30),
    bairro_com_adicional_cli character varying(30),
    cep_com_adicional_cli character varying(10),
    cidade_com_adicional_cli character varying(40),
    uf_com_adicional_cli character varying(2),
    ddd_com_adicional_cli character varying(5),
    fone_com_adicional_cli character varying(10),
    ramal_com_adicional_cli character varying(5),
    endereco_especifico_cli character varying(60),
    numero_especifico_cli character varying(5),
    complemento_especifico_cli character varying(30),
    bairro_especifico_cli character varying(30),
    cep_especifico_cli character varying(10),
    cidade_especifico_cli character varying(40),
    uf_especifico_cli character varying(2),
    ddd_especifico_cli character varying(5),
    fone_especifico_cli character varying(10),
    ramal_especifico_cli character varying(5),
    ddd_cel_especifico_cli character varying(5),
    cel_especifico_cli character varying(10),
    email_especifico_cli character varying(50),
    endereco_com_especifico_cli character varying(60),
    numero_com_especifico_cli character varying(5),
    complemento_com_especifico_cli character varying(30),
    bairro_com_especifico_cli character varying(30),
    cep_com_especifico_cli character varying(10),
    cidade_com_especifico_cli character varying(40),
    uf_com_especifico_cli character varying(2),
    ddd_com_especifico_cli character varying(5),
    fone_com_especifico_cli character varying(10),
    ramal_com_especifico_cli character varying(5)
);

--
-- TOC entry 1289 (class 1259 OID 38837)
-- Name: qlremessahondatmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlremessahondatmp (
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    rg_str character varying(15),
    endereco_res character varying(100),
    complemento_res character varying(60),
    bairro_res character varying(60),
    cep_res character varying(10),
    cidade_res character varying(60),
    estado_res character varying(2),
    informacoes_res character varying(60),
    tipo_end_res smallint,
    status_end_res smallint,
    inibido_res smallint,
    endereco_com character varying(100),
    complemento_com character varying(60),
    bairro_com character varying(60),
    cep_com character varying(10),
    cidade_com character varying(60),
    estado_com character varying(2),
    informacoes_com character varying(60),
    tipo_end_com smallint,
    status_end_com smallint,
    inibido_com smallint,
    endereco_viz character varying(100),
    complemento_viz character varying(60),
    bairro_viz character varying(60),
    cep_viz character varying(10),
    cidade_viz character varying(60),
    estado_viz character varying(2),
    informacoes_viz character varying(60),
    tipo_end_viz smallint,
    status_end_viz smallint,
    inibido_viz smallint,
    endereco_sede character varying(100),
    complemento_sede character varying(60),
    bairro_sede character varying(60),
    cep_sede character varying(10),
    cidade_sede character varying(60),
    estado_sede character varying(2),
    informacoes_sede character varying(60),
    tipo_end_sede smallint,
    status_end_sede smallint,
    inibido_sede smallint,
    endereco_out character varying(100),
    complemento_out character varying(60),
    bairro_out character varying(60),
    cep_out character varying(10),
    cidade_out character varying(60),
    estado_out character varying(2),
    informacoes_out character varying(60),
    tipo_end_out smallint,
    status_end_out smallint,
    inibido_out smallint,
    endereco_aval character varying(100),
    bairro_aval character varying(60),
    cidade_aval character varying(60),
    estado_aval character varying(2),
    cep_aval character varying(10),
    endereco_con character varying(100),
    complemento_con character varying(60),
    bairro_con character varying(60),
    cep_con character varying(10),
    cidade_con character varying(60),
    estado_con character varying(2),
    observacao_con character varying(1000),
    ddd_res character varying(10),
    numero_res character varying(18),
    status_res smallint,
    ddd_com character varying(10),
    numero_com character varying(18),
    status_com smallint,
    ddd_avalis character varying(10),
    numero_avalis character varying(18),
    status_avalis smallint,
    ddd_viz character varying(10),
    numero_viz character varying(18),
    status_viz smallint,
    ddd_ref character varying(10),
    numero_ref character varying(18),
    status_ref smallint,
    ddd_cel character varying(10),
    numero_cel character varying(18),
    status_cel smallint,
    ddd_bip character varying(10),
    numero_bip character varying(18),
    status_bip smallint,
    ddd_fax character varying(10),
    numero_fax character varying(18),
    status_fax smallint,
    ddd_out character varying(10),
    numero_out character varying(18),
    status_out smallint,
    endereco_email character varying(100),
    endereco_site character varying(100),
    numero_aval character varying(18),
    cpf_aval character varying(20),
    rg_aval character varying(18),
    nome_aval character varying(60),
    numero_con character varying(18),
    org_exp_str character varying(15),
    uf_rg_str character varying(1),
    org_exp_rg_str character varying(1),
    dt_exp_rg_dat date,
    data_exp_dat date,
    observacao_str character varying(1),
    ccf_int smallint
);

--
-- TOC entry 1290 (class 1259 OID 38850)
-- Name: qlremessaunibancotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlremessaunibancotmp (
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    rg_str character varying(15),
    endereco_res character varying(100),
    bairro_res character varying(60),
    cep_res character varying(10),
    cidade_res character varying(60),
    estado_res character varying(2),
    complemento_res character varying(60),
    endereco_com character varying(100),
    cep_com character varying(10),
    numero_res character varying(18),
    numero_com character varying(18),
    org_exp_str character varying(15),
    uf_rg_str character varying(1),
    org_exp_rg_str character varying(1),
    dt_exp_rg_dat date,
    data_exp_dat date,
    observacao_str character varying(1),
    ccf_int smallint
);

--
-- TOC entry 1291 (class 1259 OID 38861)
-- Name: qlsantandertmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.qlsantandertmp (
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    rg_str character varying(20),
    org_exp_rg_str character varying(3),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    endereco_str character varying(60),
    numero_str character varying(5),
    complemento_str character varying(60),
    bairro_str character varying(40),
    cidade_str character varying(30),
    estado_str character varying(2),
    cep_str character varying(10),
    telefone_str character varying(20),
    ddd_str character varying(5),
    ramal_str character varying(5),
    telefone_trabalho_str character varying(20),
    ddd_trabalho_str character varying(5),
    ramal_trabalho_str character varying(5),
    telefone_adicional1_str character varying(20),
    ddd_adicional1_str character varying(5),
    telefone_adicional2_str character varying(20),
    ddd_adicional2_str character varying(5),
    nome_avalista1_str character varying(60),
    endereco_avalista1_str character varying(60),
    numero_avalista1_str character varying(5),
    complemento_avalista1_str character varying(40),
    bairro_avalista1_str character varying(40),
    cidade_avalista1_str character varying(30),
    estado_avalista1_str character varying(2),
    cep_avalista1_str character varying(10),
    cpf_avalista1_str character varying(20),
    rg_avalista1_str character varying(20),
    fone_avalista1_str character varying(20),
    ddd_avalista1_str character varying(5),
    ramal_avalista1_str character varying(5),
    ddd_trab_avalista1_str character varying(5),
    fone_trab_avalista1_str character varying(20),
    ramal_trab_avalista1_str character varying(5),
    ddd_adicional_avalista1_str character varying(5),
    fone_adicional_avalista1_str character varying(20),
    nome_avalista2_str character varying(60),
    endereco_avalista2_str character varying(60),
    numero_avalista2_str character varying(5),
    complemento_avalista2_str character varying(40),
    bairro_avalista2_str character varying(40),
    cidade_avalista2_str character varying(30),
    estado_avalista2_str character varying(2),
    cep_avalista2_str character varying(10),
    cpf_avalista2_str character varying(20),
    rg_avalista2_str character varying(20),
    fone_avalista2_str character varying(20),
    ddd_avalista2_str character varying(5),
    ramal_avalista2_str character varying(5),
    ddd_trab_avalista2_str character varying(5),
    fone_trab_avalista2_str character varying(20),
    ramal_trab_avalista2_str character varying(5),
    ddd_adicional_avalista2_str character varying(5),
    fone_adicional_avalista2_str character varying(20),
    nome_avalista3_str character varying(60),
    endereco_avalista3_str character varying(60),
    numero_avalista3_str character varying(5),
    complemento_avalista3_str character varying(40),
    bairro_avalista3_str character varying(40),
    cidade_avalista3_str character varying(30),
    estado_avalista3_str character varying(2),
    cep_avalista3_str character varying(10),
    cpf_avalista3_str character varying(20),
    rg_avalista3_str character varying(20),
    fone_avalista3_str character varying(20),
    ddd_avalista3_str character varying(5),
    ramal_avalista3_str character varying(5),
    ddd_trab_avalista3_str character varying(5),
    fone_trab_avalista3_str character varying(20),
    ramal_trab_avalista3_str character varying(5),
    ddd_adicional_avalista3_str character varying(5),
    fone_adicional_avalista3_str character varying(20),
    nome_avalista4_str character varying(60),
    endereco_avalista4_str character varying(60),
    numero_avalista4_str character varying(5),
    complemento_avalista4_str character varying(40),
    bairro_avalista4_str character varying(40),
    cidade_avalista4_str character varying(30),
    estado_avalista4_str character varying(2),
    cep_avalista4_str character varying(10),
    cpf_avalista4_str character varying(20),
    rg_avalista4_str character varying(20),
    fone_avalista4_str character varying(20),
    ddd_avalista4_str character varying(5),
    ramal_avalista4_str character varying(5),
    ddd_trab_avalista4_str character varying(5),
    fone_trab_avalista4_str character varying(20),
    ramal_trab_avalista4_str character varying(5),
    ddd_adicional_avalista4_str character varying(5),
    fone_adicional_avalista4_str character varying(20),
    nome_avalista5_str character varying(60),
    endereco_avalista5_str character varying(60),
    numero_avalista5_str character varying(5),
    complemento_avalista5_str character varying(40),
    bairro_avalista5_str character varying(40),
    cidade_avalista5_str character varying(30),
    estado_avalista5_str character varying(2),
    cep_avalista5_str character varying(10),
    cpf_avalista5_str character varying(20),
    rg_avalista5_str character varying(20),
    fone_avalista5_str character varying(20),
    ddd_avalista5_str character varying(5),
    ramal_avalista5_str character varying(5),
    ddd_trab_avalista5_str character varying(5),
    fone_trab_avalista5_str character varying(20),
    ramal_trab_avalista5_str character varying(5),
    ddd_adicional_avalista5_str character varying(5),
    fone_adicional_avalista5_str character varying(20)
);

--
-- TOC entry 1292 (class 1259 OID 38883)
-- Name: re001_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.re001_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1293 (class 1259 OID 38887)
-- Name: re001tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re001tmp (
    sequencia_int bigint DEFAULT nextval(('"re001_seq"'::text)::regclass) NOT NULL,
    chave_str character varying(20),
    id_cbbordero_int bigint,
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint,
    tipo_destino_str character varying(1),
    destino_str character varying(1000),
    rpt_str character varying(256),
    instrucao_1_ficha_str text,
    instrucao_2_ficha_str text,
    instrucao_3_ficha_str text,
    instrucao_4_ficha_str text,
    instrucao_5_ficha_str text,
    instrucao_6_ficha_str text,
    instrucao_7_ficha_str text,
    instrucao_8_ficha_str text,
    instrucao_9_ficha_str text,
    instrucao_10_ficha_str text,
    instrucao_1_recibo_str text,
    instrucao_2_recibo_str text,
    instrucao_3_recibo_str text,
    instrucao_4_recibo_str text,
    instrucao_5_recibo_str text,
    instrucao_6_recibo_str text,
    instrucao_7_recibo_str text,
    instrucao_8_recibo_str text,
    gecliente_codigo_str character varying(7),
    cbtiponegocio_codigo_str character varying(3),
    contrato_str character varying(30),
    nome_str character varying(60),
    bordero_int bigint,
    nosso_numero_str character varying(30),
    vencimento_dat date,
    gecliente_nome_str character varying(60),
    cbtiponegocio_descricao_str character varying(40),
    calculo_original_num double precision,
    lei_transp_instrucao_1_str text,
    lei_transp_instrucao_2_str text,
    lei_transp_instrucao_3_str text
);

--
-- TOC entry 1294 (class 1259 OID 38902)
-- Name: re001tmpimportann; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re001tmpimportann (
    chave_str character varying(20),
    id_cbitembordero_int bigint
);

--
-- TOC entry 1295 (class 1259 OID 38914)
-- Name: re002tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re002tmp (
    chave_str character varying(30),
    id_re002tmp_int integer DEFAULT nextval(('"re002tmp_seq"'::text)::regclass) NOT NULL,
    aceite character varying(1),
    bairro character varying(40),
    brancos character varying(2),
    carteira character varying(5),
    cep character varying(9),
    chave_acesso character varying(20),
    cidade character varying(40),
    cpf_avalista character varying(20),
    cpf_cedente character varying(20),
    cpf_sacado character varying(20),
    agencia character varying(10),
    codigo_terceirizada character varying(5),
    codigo_banco character varying(3),
    codigo_agencia character varying(10),
    codigo_cedente character varying(20),
    codigo_servico character varying(1),
    codigo_layout character varying(20),
    complemento character varying(15),
    contrato character varying(60),
    data_emissao date,
    data_geracao date,
    data_processamento date,
    dias_permanencia_web character varying(3),
    digitao_cobranca_real character varying(1),
    nosso_numero_dv character varying(3),
    email_sac character varying(100),
    endereco character varying(100),
    entrada character varying(60),
    especie_doc character varying(5),
    especie_moeda character varying(5),
    codigo_barra character varying(44),
    hora_geracao timestamp without time zone,
    tipo_registro character varying(1),
    linha_digitavel character varying(54),
    local_pagamento character varying(100),
    mensagem_instrucao character varying(870),
    mensagem_adicional1 character varying(40),
    mensagem_adicional2 character varying(40),
    nome_assessoria character varying(50),
    nome_avalista character varying(40),
    nome_cedente character varying(50),
    nome_sacado character varying(40),
    nosso_numero character varying(30),
    numero_imovel character varying(6),
    numero_conta character varying(20),
    sequencia_arquivo character varying(6),
    sequencia_tipoa character varying(2),
    sequencia_tipob character varying(2),
    sequencia_tipoc character varying(3),
    sequencia_tipop character varying(2),
    sequencia_boleto character varying(6),
    sequencia_cedente character varying(6),
    sequencia_lote character varying(6),
    numero_parcela character varying(3),
    numero_documento character varying(60),
    operacao character varying(1),
    produto character varying(60),
    quantidade_parcelas character varying(2),
    telefone_sac1 character varying(20),
    telefone_sac2 character varying(20),
    tipo_impressao character varying(1),
    uf character varying(2),
    valor_corrigido character varying(10),
    valor_documento character varying(10),
    valor_moeda character varying(5),
    valor_original character varying(10),
    valor_parcelas character varying(10),
    vencimento_boleto date,
    vencimento_parcela date,
    vencimento_opcao date,
    sequencia_linha bigint,
    id_cbitembordero_int bigint,
    codigo_externo character varying(20),
    email character varying(500),
    cp_num character varying(10),
    juros_mora character varying(10),
    multa character varying(10),
    honorarios character varying(10),
    total_num character varying(10),
    desconto character varying(10),
    notificacao character varying(10),
    sequencia_tipol character varying(2),
    nr_parcela character varying(10),
    vencimento_parcelamento date,
    pago_str character varying(1),
    seguros character varying(10),
    anuidade character varying(10),
    tarifas character varying(10),
    iof character varying(10),
    data_base date,
    chave_unica character varying(50),
    produto_contrato character varying(7),
    codigo_agrupador bigint,
    codigo_teste_parcela character varying(100)
);

--
-- TOC entry 1296 (class 1259 OID 38927)
-- Name: re002tmp_selecao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re002tmp_selecao (
    chave_str character varying(30),
    id_cbitembordero_int integer
);

--
-- TOC entry 1297 (class 1259 OID 38936)
-- Name: re002tmp_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.re002tmp_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1298 (class 1259 OID 38944)
-- Name: re008tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re008tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    fone_str character varying(50),
    endereco_comercial_str character varying(100),
    bairro_comercial_str character varying(60),
    cep_comercial_str character varying(10),
    cidade_comercial_str character varying(60),
    fone_comercial_str character varying(50),
    ramal_comercial_str character varying(10),
    nome_aval1_str character varying(60),
    endereco_aval1_str character varying(100),
    fone_aval1_str character varying(50),
    nome_aval2_str character varying(60),
    endereco_aval2_str character varying(100),
    fone_aval2_str character varying(50),
    id_geqlcliente_int bigint
);

--
-- TOC entry 1299 (class 1259 OID 38956)
-- Name: re009tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re009tmp (
    chave_str character varying(20),
    produto_str character varying(15),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    concessionaria_str character varying(60),
    id_cbparcela_int bigint,
    parcela_int integer,
    numero_total_parcelas_int integer,
    data_vencimento_dat date,
    ultimo_contato_dat date,
    filial_str character varying(15),
    situacao_int bigint,
    regiao_str character varying(30),
    distribuidorcliente_str character varying(60)
);

--
-- TOC entry 1300 (class 1259 OID 38971)
-- Name: re011tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re011tmp (
    chave_str character varying(20),
    data_pre_distrib_dat date,
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(20),
    numero_total_parcelas_int integer,
    id_cbetapa_int bigint,
    codigo_buc_int bigint,
    agencia_fiat_str character varying(10),
    situacao_contrato_str character varying(1),
    id_cbparcela_int bigint,
    parcela_int bigint,
    tipo_str character varying(10),
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    tipodirec_str character varying(1),
    filial_str character varying(45),
    id_gecliente_int bigint,
    da_contrato_int bigint,
    tp_neg_str character varying(15),
    produto_str character varying(30),
    regua_str character varying(60),
    faixa_atraso_str character varying(60),
    faixa_atraso_parcela_str character varying(60),
    faixa_dd_str character varying(60),
    situacao_str character varying(1),
    data_pagamento_dat date,
    dia_perfomar_int bigint,
    id_cbdistribuidorcliente_int bigint,
    regiao_str character varying(30),
    da_int bigint,
    data_distrib_dat date,
    quebra_parcela_int bigint,
    id_esregua_int bigint,
    id_cbsituacaocontrato_int integer,
    agencia_str character varying(7),
    tipo_pessoa_str character varying(1),
    valor_liquidacao_num real,
    valor_montante_num real,
    empresa_itau_str character varying(50),
    id_gegrupofaixaatraso_int bigint,
    id_gefaixaatraso_int bigint,
    id_cbdistribparcela_int bigint,
    data_baixa_dat date,
    abrev_str character varying(20)
);

--
-- TOC entry 1301 (class 1259 OID 38987)
-- Name: re012tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re012tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    numero_total_parcela integer,
    id_cbtiponegocio_int bigint,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    situacao_int smallint,
    cbsituacaocontrato_codigo_str character varying(1),
    qtd_followup bigint,
    estado_str character varying(2),
    valor_principal_num double precision,
    data_primeira_distrib_dat date,
    cpf_str character varying(20),
    valor_total_parcelas_num double precision
);

--
-- TOC entry 1302 (class 1259 OID 38992)
-- Name: re013tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re013tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    faixa_atraso_str character varying(30),
    contrato_str character varying(30),
    concessionaria_str character varying(60),
    nome_str character varying(60),
    stand_by_dat date,
    parcela_int smallint,
    prazo_int integer,
    vencimento_dat date,
    principal_num double precision,
    id_cbtiponegocio_int bigint
);

--
-- TOC entry 1303 (class 1259 OID 39001)
-- Name: re014follotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re014follotmp (
    chave_str character varying(20),
    id_cbfollowup_int bigint,
    id_cbcontrato_int bigint,
    data_dat date,
    hora_tim timestamp with time zone,
    nomecompleto_str character varying(40),
    codigo_int bigint,
    descricao_str character varying(100),
    historico_str character varying(1000)
);

--
-- TOC entry 1304 (class 1259 OID 39012)
-- Name: re014tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re014tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    cod_operacao_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1),
    concessionaria_str character varying(60),
    parcela_int integer,
    prazo_int integer,
    vencimento_dat date,
    principal_num double precision,
    soma_parcelas_num double precision,
    cidade_str character varying(60),
    filial_str character varying(60),
    agencia_str character varying(10),
    uf_str character varying(2),
    bem_financiado_num double precision,
    prestacao_num double precision,
    total_manual_num double precision,
    faixa_atraso_str character varying(1),
    data_pimeira_distrib_dat date,
    regiao_str character varying(20),
    data_notificacao_dat date,
    notificacao_str character varying(1),
    data_recebimento_dat date,
    valor_risco_num double precision,
    qtde_risco_num bigint,
    data_contrato_dat date,
    ghp_lp character varying(10),
    conta character varying(20),
    da_contrato_int bigint,
    faixa_atraso_parcela_str character varying(60),
    faixa_dd_str character varying(60),
    da_int bigint,
    faixa_atraso_da_str character varying(60),
    codigo_str character varying(7),
    distribuidorcliente_str character varying(60),
    cod_filial_str character varying(7),
    pdd_num double precision,
    data_dat date,
    id_gefaixaatraso_int bigint
);

--
-- TOC entry 1305 (class 1259 OID 39022)
-- Name: re015tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re015tmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    produto_str character varying(15),
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbcontrato_cpf_str character varying(30),
    numero_total_parcela integer,
    cbsituacaocontrato_codigo_str character varying(1),
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    cbsitcontato_id_cbsitcontato_in bigint,
    cbsitcontato_descricao_str character varying(100),
    cbsitcontato_codigo_int bigint,
    cbfollowup_id_cbfollowup_int bigint,
    cbfollowup_data_dat date,
    geusuario_id_geusuario_int bigint,
    tipo_contato_str character varying(1),
    data_stand_by_dat date,
    gefilial_nome_str character varying(40),
    cbcontrato_uf_str character varying(2),
    valor_principal_num double precision,
    cbfollowup_historico_str character varying(1000),
    ghp_lp character varying(10),
    flag_pdd character varying(1),
    nome_produto_str character varying(30),
    id_cbsituacaocontrato_int bigint,
    situacao_int smallint,
    nome_geusuario_str character varying(40),
    data_limite_retorno_dat date,
    cidade_str character varying(30),
    id_cbdistribuidorcliente_int bigint,
    distribuicao_dat date,
    id_esregua_int bigint,
    valor_total_parcelas_num double precision,
    valor_montante_num double precision,
    documentos_str character varying(50),
    agencia_int bigint,
    filial_apreensao character varying(100),
    data_apreensao_dat date
);

--
-- TOC entry 1306 (class 1259 OID 39029)
-- Name: re016tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re016tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbproposta_int bigint,
    produto_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60)
);

--
-- TOC entry 1307 (class 1259 OID 39034)
-- Name: re017tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re017tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    operacao_str character varying(15),
    estado_str character varying(2),
    situacao_str character varying(1),
    numero_total_parcelas_int integer,
    parcela_int integer,
    principal_num double precision,
    vencimento_dat date,
    multa_num double precision,
    cp_num double precision,
    honorarios_num double precision,
    despesa_banco_num double precision,
    notificacao_num double precision,
    valor_total_num double precision,
    id_cbcobrancaautomatica_int bigint,
    acrescimo_num double precision,
    codigo_str character varying(7),
    id_gefilial_int bigint,
    vencimento_ajustado_dat date,
    cpf_str character varying(20),
    id_cbdistribuidorcliente_int bigint
);

--
-- TOC entry 1308 (class 1259 OID 39053)
-- Name: re019tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re019tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbbordero_int bigint,
    id_cbitembordero_int bigint,
    qtd_parcelas_int smallint,
    qtd_parcelas_vencidas_int smallint,
    qtd_parcelas_vincendas_int smallint,
    qtd_parcelas_pagas_int smallint,
    soma_boletos_num double precision,
    soma_desconto_num double precision,
    soma_boletos_pagos_num double precision,
    id_geusuario_int bigint,
    parcelado_str character varying(1),
    pago_str character varying(1),
    mci_int integer,
    valor_pago_num double precision,
    quebra_str character varying(1),
    data_pagamento_dat date,
    da_int bigint
);

--
-- TOC entry 1309 (class 1259 OID 39065)
-- Name: re021tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re021tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    cbcontrato_data_stand_by_dat date,
    id_cbsituacaocontrato_int bigint,
    id_cbfollowup_int bigint,
    id_gecliente_int bigint,
    data_pre_distrib_dat date,
    followup_data_stand_by_dat date,
    sitcontato_positivo_str character varying(1),
    geusuario_codigo_str character varying(7),
    geusuario_nomelogin_str character varying(20),
    contrato_str character varying(30),
    situacao_int smallint,
    parcela_int bigint,
    abertos_int bigint,
    baixados_int bigint,
    cancelado_int bigint,
    standby_maior_int bigint,
    standby_menor_int bigint
);

--
-- TOC entry 1310 (class 1259 OID 39077)
-- Name: re023tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re023tmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbfollowup_id_cbfollowup_int bigint,
    cbfollowup_data_dat date,
    cbfollowup_data_stand_by_dat date,
    cbfollowup_hora_cobranca_tim timestamp with time zone,
    cbfollowup_tipo_contato_str character varying(1),
    cbtiponegocio_id_cbtiponegocio_ bigint,
    cbtiponegocio_codigo_str character varying(3),
    cbtiponegocio_descricao_str character varying(200),
    gecliente_id_gecliente_int bigint,
    gecliente_codigo_str character varying(7),
    cbsitcontato_id_cbsitcontato_in bigint,
    cbsitcontato_codigo_int bigint,
    cbsitcontato_dias_cobranca_int integer,
    cbsitcontato_positivo_str character varying(1),
    geusuariocliente_turno_str character varying(1),
    geusuario_id_geusuario_int bigint,
    geusuario_codigo_str character varying(7),
    geusuario_nomecompleto_str character varying(60),
    geusuario_usuarioadm_str character varying(1),
    boleto_gerado_str character varying(1),
    cbfollowup_tempo_int integer,
    cobranca_inicio_tim timestamp with time zone,
    cobranca_final_tim timestamp with time zone,
    cbsitcontato_fup_boleto_str character varying(1),
    cbparcela_id_cbparcela_int bigint,
    cbparcela_situacao_int integer,
    cbparcela_principal_num double precision,
    conversao_str character varying(1),
    cbcontrato_estado_str character varying(2),
    gegrupo_nome_str character varying(40),
    boleto_int smallint,
    cbsitcontato_qtde_formal_total_int smallint,
    cbfollowup_tstamp timestamp without time zone,
    cbsitcontato_qtde_refin_int smallint,
    cbcontrato_valor_refin_num double precision,
    cbsitcontato_qtde_formal_int smallint,
    cbcontrato_valor_formal_num double precision,
    montante_calculado_num double precision
);

--
-- TOC entry 1311 (class 1259 OID 39091)
-- Name: re023tmp_2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re023tmp_2 (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_id_cbtiponegocio_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbcontrato_estado_str character varying(2),
    cbfollowup_id_cbfollowup_int bigint,
    cbfollowup_data_dat date,
    cbfollowup_data_stand_by_dat date,
    cbfollowup_hora_cobranca_tim timestamp with time zone,
    cbfollowup_tipo_contato_str character varying(1),
    cbfollowup_tempo_int integer,
    cbsitcontato_id_cbsitcontato_int bigint,
    geusuariocliente_turno_str character varying(1),
    geusuario_id_geusuario_int bigint,
    boleto_gerado_str character varying(1),
    cobranca_inicio_tim timestamp with time zone,
    cobranca_final_tim timestamp with time zone
);

--
-- TOC entry 1312 (class 1259 OID 39098)
-- Name: re023tmp_boletos; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re023tmp_boletos (
    chave_str character varying(20),
    id_cbbordero_int bigint,
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint,
    valor_total_num double precision,
    comissionamento_num double precision,
    honorarios_num double precision,
    pago_str character varying(1),
    parcelamento_str character varying(7),
    id_geusuario_int bigint,
    valor_honorario_num double precision
);

--
-- TOC entry 1313 (class 1259 OID 39104)
-- Name: re023tmp_integrado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re023tmp_integrado (
    chave_str character varying(20),
    id_geusuario_int bigint,
    turno_str character varying(30),
    fup_int integer,
    fup_positivo_int integer,
    fup_negativo_int integer,
    bol_enviado_int integer,
    bol_recebido_int integer,
    valor_enviado_num double precision,
    valor_recebido_num double precision,
    honorarios_num double precision,
    cbfollowup_tempo_int integer,
    tipo_contato_str character varying(20),
    horas_trabalho_str character varying(5),
    comissionamento_num double precision,
    qtdade_pagto_int integer,
    boleto_recebido_num double precision,
    retido_num double precision,
    valor_formal_num double precision,
    valor_refin_num double precision,
    qtde_formal_int smallint,
    qtde_refin_int smallint,
    geusuariocliente_faixa_atuacao_str character varying(30),
    qtde_formal_total_int smallint,
    valor_princ_num real,
    valor_honorario_num double precision
);

--
-- TOC entry 1314 (class 1259 OID 39125)
-- Name: re023tmp_integrado2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re023tmp_integrado2 (
    chave_str character varying(20),
    data_dat date,
    distribuicao_int integer,
    fup_int integer,
    fup_positivo_int integer,
    fup_negativo_int integer,
    bol_enviado_int integer,
    bol_recebido_int integer,
    conversao_int integer,
    valor_enviado_num double precision,
    valor_recebido_num double precision,
    honorarios_num double precision,
    cbfollowup_tempo_int integer
);

--
-- TOC entry 1315 (class 1259 OID 39130)
-- Name: re023tmp_integrado_uf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re023tmp_integrado_uf (
    chave_str character varying(20),
    estado_str character varying(2),
    turno_str character varying(30),
    fup_int integer,
    fup_positivo_int integer,
    fup_negativo_int integer,
    bol_enviado_int integer,
    bol_recebido_int integer,
    valor_enviado_num double precision,
    valor_recebido_num double precision,
    honorarios_num double precision,
    cbfollowup_tempo_int integer,
    tipo_contato_str character varying(20),
    horas_trabalho_str character varying(5),
    comissionamento_num double precision,
    qtdade_pagto_int integer,
    bol_honorario_num double precision,
    parcela_enviada_int integer,
    valor_parcela_enviada_num double precision,
    parcela_recebida_int integer,
    valor_parcela_recebida_num double precision
);

--
-- TOC entry 1316 (class 1259 OID 39140)
-- Name: re024tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re024tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_cbtiponegocio_int bigint,
    data_stand_by_dat date,
    produto_str character varying(30),
    cpf_str character varying(30),
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    situacao_int smallint,
    situacao_contrato_str character varying(1),
    id_cbdistribuidorcliente_int bigint,
    parcela_antiga_int date,
    regiao_str character varying(15),
    id_cbproduto_int bigint,
    codigo_operacao_str character varying(30),
    principal_num double precision,
    prazo_solucao_dat date,
    sexo_str character varying(1),
    telefone_str character varying(30),
    data_pagamento_dat date,
    codigo_loja_num bigint,
    concessionaria_str character varying(100)
);

--
-- TOC entry 1317 (class 1259 OID 39148)
-- Name: re026tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re026tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    codigo_buc_int bigint,
    etapa_str character varying(5),
    regiao_str character varying(15),
    da_contrato_int bigint,
    codigo_operacao_str character varying(10),
    cpf_str character varying(20),
    id_cbetapa_int bigint,
    dias_atraso_int bigint,
    produto_str character varying(60),
    status_acordo_str character varying(1)
);

--
-- TOC entry 1318 (class 1259 OID 39158)
-- Name: re026tmp_2; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re026tmp_2 (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    codigo_buc_int bigint,
    id_cbetapa_int bigint,
    regiao_str character varying(15),
    da_contrato_int bigint,
    codigo_operacao_str character varying(10),
    cpf_str character varying(20)
);

--
-- TOC entry 1319 (class 1259 OID 39166)
-- Name: re027tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re027tmp (
    chave_str character varying(20),
    data_distribuicao_dat date,
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_id_gecliente_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbcontrato_estado_str character varying(2),
    cbcontrato_numero_total_parcela integer,
    cbtiponegocio_id_cbtiponegocio_ bigint,
    cbtiponegocio_descricao_str character varying(40),
    cbsituacaocontrato_id_cbsituaca bigint,
    cbsituacaocontrato_codigo_str character varying(1),
    cbsituacaocontrato_descricao_st character varying(40),
    cbparcela_id_cbparcela_int bigint,
    cbparcela_parcela_int bigint,
    cbparcela_data_vencimento_dat date,
    cbparcela_valor_principal_num double precision,
    cbparcela_situacao_int smallint
);

--
-- TOC entry 1320 (class 1259 OID 39176)
-- Name: re029tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re029tmp (
    chave_str character varying(20),
    qtde_11_30_int bigint,
    valor_11_30_num double precision,
    qtde_31_60_int bigint,
    valor_31_60_num double precision,
    qtde_61_90_int bigint,
    valor_61_90_num double precision,
    qtde_91_120_int bigint,
    valor_91_120_num double precision,
    qtde_121_180_int bigint,
    valor_121_180_num double precision,
    qtde_181_360_int bigint,
    valor_181_360_num double precision,
    qtde_361_maior_int bigint,
    valor_361_maior_num double precision
);

--
-- TOC entry 1321 (class 1259 OID 39185)
-- Name: re030tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re030tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    situacao_str character varying(1),
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    id_cbetapa_int bigint,
    quartil_str character varying(30),
    pmt_str character varying(30),
    id_gefilial_int bigint
);

--
-- TOC entry 1322 (class 1259 OID 39194)
-- Name: re033tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re033tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    empresa_str character varying(10),
    concessionaria_str character varying(30),
    nome_str character varying(60),
    parcela_int bigint,
    prazo_int bigint,
    vencimento_dat date,
    contato_dat timestamp with time zone,
    historico_str character varying(1000)
);

--
-- TOC entry 1323 (class 1259 OID 39201)
-- Name: re034tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re034tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    contrato_str character varying(30),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    sit_contrato_str character varying(1),
    id_cbparcela_int bigint,
    parcela_int bigint,
    vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    data_primeira_distrib_dat date
);

--
-- TOC entry 1324 (class 1259 OID 39212)
-- Name: re035tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re035tmp (
    chave_str character varying(20),
    id_cbdespesa_int bigint,
    despesa_data_dat date,
    despesa_valor_num double precision,
    despesa_situacao_str character varying(2),
    observacoes_txt text,
    id_cbtipodespesa_int bigint,
    tipodespesa_descricao_str character varying(60),
    id_cbparcela_int bigint,
    parcela_int bigint,
    parcela_data_vencimento_dat date,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    tiponegocio_codigo_str character varying(3),
    estado_str character varying(2)
);

--
-- TOC entry 1325 (class 1259 OID 39223)
-- Name: re036tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re036tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    endereco_str character varying(60),
    id_cbsituacaocontrato_int bigint,
    id_cbfollowup_int bigint,
    data_dat date,
    id_geusuario_int bigint,
    coloca_stand_str character varying(1),
    data_stand_by_dat date,
    id_cbsitcontato_int bigint,
    hora_cobranca_tim timestamp with time zone,
    id_cbparcela_int bigint,
    data_vencimento_dat date,
    id_esregua_int bigint,
    codigo_int bigint,
    descricao_str character varying(100),
    filial_str character varying(40),
    nomecompleto_str character varying(60),
    codigo_usuario character varying(7),
    cod_neg_str character varying(3),
    desc_neg_str character varying(40),
    historico_str character varying(1000),
    parcela_int bigint,
    prazo_int integer,
    valor_principal_num double precision,
    sit_contato_str character varying(1),
    data_pagamento_dat date,
    saldo_num double precision,
    valor_montante_num double precision,
    diretoria_int integer,
    empresa_itau_str character varying(50),
    cod_cliente character varying(10),
    cpf_str character varying(18),
    tipo_pessoa_str character varying(1)
);

--
-- TOC entry 1326 (class 1259 OID 39234)
-- Name: re041tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re041tmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_id_gecliente_int bigint,
    cbcontrato_id_cbtiponegocio_int bigint,
    cbcontrato_id_cbdistribuidorcli bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbcontrato_estado_str character varying(20),
    gefilial_codigo_str character varying(15),
    cbpagamento_id_cbpagamento_int bigint,
    cbpagamento_sequencia_int bigint,
    cbpagamento_data_pagamento_dat date,
    cbpagamento_principal_num double precision,
    cbpagamento_cp_num double precision,
    cbpagamento_multa_num double precision,
    cbpagamento_notificacao_num double precision,
    cbpagamento_despesa_banco_num double precision,
    cbpagamento_acrescimo_num double precision,
    cbpagamento_acrescimo_np_num double precision,
    cbpagamento_desconto_num double precision,
    cbpagamento_juros_mora_num double precision,
    cbpagamento_honorarios_num double precision,
    cbpagamento_comissionamento_num double precision,
    cbpagamento_valor_total_num double precision,
    cbpagamento_situacao_str character varying(1),
    cbparcelapagamento_id_cbparcela bigint,
    cbparcelapagamento_data_vencime date,
    cbparcelapagamento_principal_nu double precision,
    cbparcelapagamento_cp_num double precision,
    cbparcelapagamento_multa_num double precision,
    cbparcelapagamento_notificacao_ double precision,
    cbparcelapagamento_despesa_banc double precision,
    cbparcelapagamento_desconto_num double precision,
    cbparcelapagamento_juros_mora_n double precision,
    cbparcelapagamento_honorarios_n double precision,
    cbparcelapagamento_comissioname double precision,
    cbparcelapagamento_acrescimo_np_num double precision,
    cbparcelapagamento_valor_total_ double precision,
    cbparcela_parcela_int bigint,
    cbparcela_data_pre_distrib_dat date,
    cbparcela_prazo_int integer,
    cbparcela_data_vencimento_dat date,
    especie_str character varying(2),
    cbespecie_valor_deposito_num double precision,
    tipo_recibo_str character varying(1),
    data_deposito_dat date,
    data_custodia_dat date,
    data_repasse_dat date,
    valor_repasse_num double precision,
    num_processo_str character varying(30),
    cbpagamento_retido_num double precision,
    nome_filial_str character varying(40),
    qtde_contrato_processo_int smallint,
    ghp_lp character varying(10),
    flag_pdd character varying(1),
    produto_str character varying(60),
    nome_concessionaria_str character varying(30),
    desconto_cp_num double precision,
    desconto_multa_num double precision,
    desconto_principal_num double precision,
    regiao_str character varying(30),
    quebra_parcela_int bigint,
    cbcontrato_regiao_str character varying(30),
    da_int bigint,
    id_esregua_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbetapa_int bigint,
    cbpagamento_data_cadastro_pagamento_dat date,
    cbpagamento_observacao_txt text,
    cbparcelapagamento_retido_num double precision,
    id_geusuario_boleto_int bigint,
    id_geusuario_fez_boleto_int bigint,
    id_gefaixaatraso_int bigint,
    cbcontrato_cpf_str character varying(20),
    saldo_contrato_num double precision,
    cbcontrato_valor_montante_num double precision,
    cbtiponegocio_codigo_str character varying(3),
    nome_usuario_str character varying(40),
    pdd_da_int bigint
);

--
-- TOC entry 1327 (class 1259 OID 39248)
-- Name: re044tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re044tmp (
    chave_str character varying(20),
    id_cbitembordero_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    vencimento_dat date,
    recebimento_dat timestamp without time zone,
    envio_dat timestamp without time zone,
    status_str character varying(20),
    telefone_str character varying(70)
);

--
-- TOC entry 1328 (class 1259 OID 39257)
-- Name: re045tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re045tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    data_pagamento_dat date,
    desconto_num double precision,
    abatimento_num double precision,
    codigo_str character varying(3)
);

--
-- TOC entry 1329 (class 1259 OID 39265)
-- Name: re047tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re047tmp (
    chave_str character varying(20),
    contr_id_cbdistribuidorcliente_int bigint,
    contr_tp_neg_str character varying(10),
    contr_contrato_str character varying(30),
    contr_nome_str character varying(60),
    contr_situacao_str character varying(1),
    bord_id_cbbordero_int bigint,
    bord_bordero_int bigint,
    bord_data_bordero_dat date,
    bord_id_cbtipopagamento_int bigint,
    item_id_cbitembordero_int bigint,
    item_id_cbcontrato_int bigint,
    item_valor_desconto_num double precision,
    item_vencimento_dat date,
    item_emissao_dat date,
    item_principal_num double precision,
    item_honorarios_num double precision,
    item_cp_num double precision,
    item_multa_num double precision,
    item_desconto_num double precision,
    item_valor_total_num double precision,
    item_nosso_numero_str character varying(30),
    parc_id_cbparcela_int bigint,
    parc_parcela_int bigint,
    parc_situacao_int smallint,
    parc_data_vencimento_dat date,
    parc_principal_num double precision,
    parc_honorarios_num double precision,
    parc_cp_num double precision,
    parc_multa_num double precision,
    parc_desconto_num double precision,
    parc_valor_total_num double precision,
    dv_int character varying(3),
    id_geusuario_int bigint,
    filial_str character varying(45),
    item_pago_str character varying(1),
    sit_contato_int integer,
    estado_str character varying(2),
    faixa_parcela_str character varying(30),
    faixa_atraso_str character varying(30),
    codigo_pag_str character varying(6),
    boleto_gravacao_tim timestamp without time zone,
    mci_int bigint,
    cpf_str character varying(20),
    parc_despesa_banco_num double precision,
    destino_str character varying(100),
    tipo_destino_str character varying(1),
    parcelamento_str character varying(7),
    tipo_boleto_str character varying(1),
    item_comissionamento_num double precision,
    data_pagamento_dat date,
    parc_comissionamento_num double precision,
    contr_uf_str character varying(3),
    contato_str character varying(15)
);

--
-- TOC entry 1330 (class 1259 OID 39274)
-- Name: re050tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re050tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    codigo_concessionaria_str character varying(7),
    nome_concessionaria_str character varying(30),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    marca_str character varying(30),
    modelo_str character varying(30),
    ano_str character varying(5),
    numero_total_parcelas_int integer,
    id_cbsituacaocontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int bigint,
    vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    data_primeira_distrib_dat date,
    regiao_str character varying(15),
    cod_loja_str character varying(10),
    nome_loja_str character varying(60),
    faixa_pagto_str character varying(30),
    qtde_pagtos_int bigint,
    centralizadora_str character varying(50),
    produto_cob_str character varying(40),
    data_notificacao_dat date,
    data_recebimento_dat date,
    data_solicitacao_dat date,
    historico_str character varying(1000),
    codigo_centralizadora_str character varying(10),
    codigo_str character varying(10),
    conta_corrente_str character varying(10),
    agencia_str character varying(7)
);

--
-- TOC entry 1331 (class 1259 OID 39283)
-- Name: re052tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re052tmp (
    chave_str character varying(20),
    data_pre_distrib_dat date,
    id_cbcontrato_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_cbtiponegocio_int bigint,
    data_stand_by_dat date,
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    situacao_int smallint,
    situacao_contrato_str character varying(1),
    id_cbdistribuidorcliente_int bigint,
    parcela_antiga_int date,
    principal_num double precision,
    data_pagamento_dat date,
    faixa_parcela_str character varying(30),
    faixa_atraso_str character varying(100),
    id_gefilial_int bigint
);

--
-- TOC entry 1332 (class 1259 OID 39294)
-- Name: re052tmp_contrato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re052tmp_contrato (
    chave_str character varying(20),
    data_pre_distrib_dat date,
    id_cbcontrato_int bigint,
    id_cbsituacaocontrato_int bigint,
    id_cbtiponegocio_int bigint,
    data_stand_by_dat date,
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_vencimento_dat date,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    situacao_int smallint,
    situacao_contrato_str character varying(1),
    id_cbdistribuidorcliente_int bigint,
    parcela_antiga_int date,
    principal_num double precision,
    data_pagamento_dat date,
    faixa_parcela_str character varying(30),
    faixa_atraso_str character varying(30)
);

--
-- TOC entry 1333 (class 1259 OID 39301)
-- Name: re053tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re053tmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    valor_total_num double precision,
    cbfollowup_id_cbfollowup_int bigint,
    cbfollowup_data_dat date,
    cbfollowup_hora_cobranca_tim timestamp with time zone,
    cbsitcontato_id_cbsitcontato_in bigint,
    cbsitcontato_codigo_int bigint,
    cbsitcontato_descricao_str character varying(100),
    geusuariocliente_turno_str character varying(1),
    geusuario_id_geusuario_int bigint,
    geusuario_codigo_str character varying(7),
    geusuario_nomecompleto_str character varying(40),
    geusuario_usuarioadm_str character varying(1),
    tipo_contato_str character varying(1)
);

--
-- TOC entry 1334 (class 1259 OID 39318)
-- Name: re055tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re055tmp (
    chave_str character varying(20),
    data_dat date,
    dif_dias_int bigint,
    dias_adm_int bigint,
    qtd_enviados_int bigint,
    qtd_adm_int bigint,
    qtd_cancelados_int bigint,
    qtd_cobrar_int bigint,
    qtd_pagos_ate_30_dias_int bigint,
    qtd_pagos_ate_31_60_dias_int bigint,
    qtd_pagos_ate_61_90_dias_int bigint,
    total_pagamentos_int bigint,
    saldo_cobrar_int bigint,
    decursoprazo_int bigint,
    total_negativo bigint,
    total_positivo bigint,
    total_boleto bigint,
    total_ligacao bigint,
    qtd_abertos_int bigint,
    qtd_standby_int bigint,
    qtd_naorecup_int bigint,
    qtd_juridico_int bigint
);

--
-- TOC entry 1335 (class 1259 OID 39329)
-- Name: re055tmp_a; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re055tmp_a (
    chave_str character varying(20),
    data_dat date,
    tipo_str character varying(30),
    id_cbparcela_int bigint,
    id_cbcontrato_int bigint,
    situacao_str character varying(1),
    contrato_str character varying(45),
    nome_str character varying(60),
    parcela_int smallint,
    sit_parc_int smallint,
    data_vencimento_dat date
);

--
-- TOC entry 1336 (class 1259 OID 39335)
-- Name: re055tmp_faixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re055tmp_faixa (
    chave_str character varying(20),
    data_dat date,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    situacao_str character varying(1),
    sit_parc_int smallint,
    principal_num double precision,
    data_vencimento_dat date,
    faixa_atraso_str character varying(60)
);

--
-- TOC entry 1337 (class 1259 OID 39344)
-- Name: re057tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re057tmp (
    chave_str character varying(20),
    id_cbatrasocontrato_int bigint,
    data_hoje_dat date,
    id_gemotivoinadimplencia_int bigint,
    gemotivoinadimplencia_codigo_st character varying(10),
    gemotivoinadimplencia_descricao character varying(100),
    produto_str character varying(15),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_primeira_distrib_dat date,
    data_vencimento_dat date,
    situacao_int smallint,
    estado_str character varying(2),
    valor_total_num double precision,
    id_gefilial_int bigint,
    filial_str character varying(35),
    qtd_contatos_int integer,
    qtd_boletos_int integer,
    regiao_str character varying(20),
    nome_concessionaria_mi_str character varying(30),
    dia_pagamento_int bigint,
    motivo_atraso_str character varying(1),
    adquiriu_bem_str character varying(2),
    nome_concessionaria_str character varying(30),
    prazo_quitacao_str character varying(10)
);

--
-- TOC entry 1338 (class 1259 OID 39356)
-- Name: re057tmp_qlcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re057tmp_qlcontato (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_geqlcontato_int bigint,
    contato_str character varying(256),
    nome_contato_str character varying(60)
);

--
-- TOC entry 1339 (class 1259 OID 39365)
-- Name: re057tmp_qlendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re057tmp_qlendereco (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_geqlendereco_int bigint,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2)
);

--
-- TOC entry 1340 (class 1259 OID 39381)
-- Name: re064tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re064tmp (
    chave_str character varying(20),
    fup_id_cbfollowup_int bigint,
    fup_id_cbcontrato_int bigint,
    fup_id_cbparcela_int bigint,
    fup_data_dat date,
    fup_historico_str character varying(1000),
    fup_id_geusuario_int bigint,
    fup_coloca_stand_str character varying(1),
    fup_data_stand_by_dat date,
    fup_id_cbsitcontato_int bigint,
    fup_alterado_str character varying(1),
    fup_data_cobranca_dat date,
    fup_hora_cobranca_tim timestamp with time zone,
    fup_hora_tim timestamp with time zone,
    fup_tstamp timestamp with time zone,
    fup_tipo_contato_str character varying(1),
    par_parcela_int bigint,
    par_data_vencimento_dat date,
    us_nomecompleto_str character varying(60),
    con_id_gecliente_int bigint,
    con_contrato_str character varying(60),
    con_nome_str character varying(60),
    tp_codigo_str character varying(60),
    tp_descricao_str character varying(1000)
);

--
-- TOC entry 1341 (class 1259 OID 39393)
-- Name: re065tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re065tmp (
    chave_str character varying(20),
    id_cbdespesa_int bigint,
    cbcontrato_cidade_str character varying,
    cbcontrato_estado_str character varying(2),
    pagamento_parcial_str character varying(20),
    dt_distrib_parcela_dat date,
    codigo_cartorio_str character varying(6),
    endereco_notif_str character varying(200)
);

--
-- TOC entry 1342 (class 1259 OID 39408)
-- Name: re065virtualtmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re065virtualtmp (
    codigo_str character varying(50),
    tipo_financiamento_int integer,
    tipo_financiamento_str character varying(50),
    protocolo_npjur_int character varying(30),
    id_gefilial_int integer,
    nome_filial_str character varying(50),
    valor_num double precision,
    data_despesa_dat date,
    reembolso_str character varying(50),
    status_str character varying(10),
    identificacao_str character varying(50),
    chave_str character varying(50)
);

--
-- TOC entry 1343 (class 1259 OID 39416)
-- Name: re066tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re066tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    empresa_str character varying(10),
    nome_str character varying(60),
    codigo_buc_int bigint,
    uf_str character varying(2),
    data_vencimento_dat timestamp with time zone,
    situacao_str character varying(1)
);

--
-- TOC entry 1344 (class 1259 OID 39423)
-- Name: re068tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re068tmp (
    chave_str character varying(20),
    empresa_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    data_dat date,
    codigo_registro_int smallint,
    etapa_str character varying(10),
    motivo_solicitacao_str character varying(5),
    valor_num bigint,
    dias_atraso_str character varying(30)
);

--
-- TOC entry 1345 (class 1259 OID 39436)
-- Name: re070tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re070tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    empresa_str character varying(10),
    nome_str character varying(60),
    codigo_buc_int bigint,
    cidade_str character varying(30),
    uf_str character varying(2),
    dias_acaode_int bigint,
    dias_atraso_int bigint,
    data_primeira_distrib_dat date
);

--
-- TOC entry 1346 (class 1259 OID 39448)
-- Name: re072localizado; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re072localizado (
    chave_str character varying(20),
    id_contrato bigint,
    tipo_negocio character varying(4),
    contrato character varying(30),
    nome character varying(80),
    parc_vencimento date,
    parc integer,
    prazo integer,
    parc_valor double precision,
    sit_contrato character varying(3),
    saldo_divida double precision,
    dias_atraso integer,
    regua character varying(40),
    data_limite date,
    comarca character varying(50),
    uf character varying(2),
    data_notificacao date,
    data_retorno date,
    data_docfis date,
    rn character varying(1),
    data_envio date,
    filial_ajuiza character varying(50),
    motivo_inadim character varying(60),
    data_solicitacao date,
    data_recebimento date,
    agencia character varying(60),
    cli_localizado character varying(1),
    data_localizado date,
    veic_localizado character varying(1),
    localizado_com_terc character varying(1),
    data_localizacao_veic date,
    nome_usuario_follow character varying(80),
    ultimo_follow character varying(100),
    garantia_marca character varying(40),
    garantia_modelo character varying(40),
    garantia_ano_fabricacao character varying(6),
    garantia_ano_modelo character varying(6),
    garantia_placa character varying(10),
    garantia_chassi character varying(100),
    garantia_renavam character varying(100),
    tipo_despesa character varying(20),
    situacao_despesa character varying(15)
);

--
-- TOC entry 1347 (class 1259 OID 39455)
-- Name: re072tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re072tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_esregua_int bigint,
    id_cbsitcontato_int bigint,
    retorno_nofif_dat date,
    resposta_notif_str character varying(1),
    provisionamento_dat date,
    situacao_int smallint,
    data_notificacao_dat date,
    data_marcado_dat date,
    retorno_docfis_dat date,
    data_devolucao_dat date,
    id_cbdistribuidorcliente_int bigint,
    lote_str character varying(20),
    faixa_atraso_str character varying(60),
    numero_dossie_str character varying(60),
    valor_montante_num double precision,
    tipo_produto_str character varying(50),
    da_filtro_int integer,
    codigo_cartorio_int integer,
    nome_cartorio_str character varying(100),
    comarca_data_envio_dat date,
    comarca_data_retorno_eletronico_dat date,
    comarca_posicao_str character varying(1),
    comarca_data_retorno_fisico_dat date,
    cidade_str character varying(40),
    estado_str character varying(2),
    email_data_retorno_fisico_dat date,
    simples_data_retorno_fisico_dat date,
    cartorial_data_retorno_fisico_dat date,
    email_posicao_str character varying(1),
    simples_posicao_str character varying(1),
    cartorial_posicao_str character varying(1),
    email_codigo_cartorio_int integer,
    simples_codigo_cartorio_int integer,
    comarca_codigo_cartorio_int integer,
    cartorial_codigo_cartorio_int integer,
    email_data_retorno_eletronico_dat date,
    simples_data_retorno_eletronico_dat date,
    cartorial_data_retorno_eletronico_dat date,
    email_data_envio_dat date,
    simples_data_envio_dat date,
    cartorial_data_envio_dat date,
    compc_data_retorno_fisico_dat date,
    sempc_data_retorno_fisico_dat date,
    compc_posicao_str character varying(1),
    sempc_posicao_str character varying(1),
    compc_data_retorno_eletronico_dat date,
    sempc_data_retorno_eletronico_dat date,
    compc_data_envio_dat date,
    sempc_data_envio_dat date,
    compc_codigo_cartorio_int integer,
    sempc_codigo_cartorio_int integer,
    email_motivo_retorno_str character varying(70),
    simples_motivo_retorno_str character varying(70),
    cartorial_motivo_retorno_str character varying(70),
    comarca_motivo_retorno_str character varying(70),
    compc_motivo_retorno_str character varying(70),
    sempc_motivo_retorno_str character varying(70),
    email_cartorio_nome character varying(40),
    simples_cartorio_nome character varying(40),
    cartorial_cartorio_nome character varying(40),
    comarca_cartorio_nome character varying(40),
    compc_cartorio_nome character varying(40),
    sempc_cartorio_nome character varying(40),
    data_ultimo_envio_dat date,
    data_ret_ultimo_envio_dat date,
    posicao_ultimo_envio_str character varying(20),
    pagamento_parcial character varying(3),
    dias_distrib_notif bigint,
    dt_distrib_contrato_dat date,
    dt_distrib_parcela_dat date
);

--
-- TOC entry 1348 (class 1259 OID 39466)
-- Name: re075tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re075tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    cod_filial_str character varying(10),
    empresa_str character varying(10),
    nome_str character varying(60),
    recibo_num double precision,
    forma_str character varying(15),
    data_pagamento_dat date,
    cheque_num double precision,
    valor_num double precision,
    data_deposito_dat date,
    data_situacao_dat date
);

--
-- TOC entry 1349 (class 1259 OID 39476)
-- Name: re078tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re078tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    empresa_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    cidade_str character varying(50),
    estado_str character varying(2),
    etapa_str character varying(5)
);

--
-- TOC entry 1350 (class 1259 OID 39487)
-- Name: re080tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re080tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    qtd_parcela_int bigint
);

--
-- TOC entry 1351 (class 1259 OID 39494)
-- Name: re081tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re081tmp (
    chave_str character varying(20),
    data_dat date,
    qtd_enviados_int bigint,
    qtd_abertos_1fase_int bigint,
    qtd_abertos_2fase_int bigint,
    qtd_abertos_3fase_int bigint,
    qtd_enviados_1fase_int bigint,
    qtd_enviados_2fase_int bigint,
    qtd_enviados_3fase_int bigint,
    qtd_recup_1fase_int bigint,
    qtd_recup_2fase_int bigint,
    qtd_recup_3fase_int bigint,
    qtd_stdby_1fase_int bigint,
    qtd_stdby_2fase_int bigint,
    qtd_stdby_3fase_int bigint,
    qtd_cancelado_1fase_int bigint,
    qtd_cancelado_2fase_int bigint,
    qtd_cancelado_3fase_int bigint,
    qtd_recup_maior_1fase_int bigint
);

--
-- TOC entry 1352 (class 1259 OID 39502)
-- Name: re081tmp_a; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re081tmp_a (
    chave_str character varying(20),
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int smallint,
    data_pre_distrib_dat date,
    tp_neg_str character varying(15),
    situacaocontrato_str character varying(1),
    valor_principal_num double precision,
    sit_parcela smallint,
    fase_str character varying(2),
    id_cbtiponegocio_int bigint,
    id_cbparcela_int bigint
);

--
-- TOC entry 1353 (class 1259 OID 39512)
-- Name: re081tmp_grafico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re081tmp_grafico (
    chave_str character varying(20),
    data_dat date,
    qtde_recup_1fase_num double precision,
    qtde_recup_2fase_num double precision
);

--
-- TOC entry 1354 (class 1259 OID 39520)
-- Name: re081tmp_outros; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re081tmp_outros (
    chave_str character varying(20),
    tp_neg_sr character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1)
);

--
-- TOC entry 1355 (class 1259 OID 39529)
-- Name: re081tmp_pan; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re081tmp_pan (
    chave_str character varying(20),
    data_dat date,
    qtd_enviados_int bigint,
    soma_enviados_num double precision,
    qtd_abertos_int bigint,
    soma_abertos_num double precision,
    qtd_stdby_int bigint,
    soma_stdby_num double precision,
    qtd_cancelado_int bigint,
    soma_cancelado_num double precision,
    qtd_canc_recup_int bigint,
    soma_canc_recup_num double precision,
    qtd_recuperado_int bigint,
    soma_recuperado_num double precision,
    qtd_outrasit_int bigint,
    soma_outrasit_num double precision
);

--
-- TOC entry 1356 (class 1259 OID 39534)
-- Name: re081tmp_total; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re081tmp_total (
    chave_str character varying(20),
    data_dat date,
    qtd_enviados_int bigint,
    soma_enviados_num double precision,
    qtd_abertos_int bigint,
    soma_abertos_num double precision,
    qtd_stdby_int bigint,
    soma_stdby_num double precision,
    qtd_cancelado_int bigint,
    soma_cancelado_num double precision,
    qtd_juridico_int bigint,
    soma_juridico_num double precision,
    qtd_ne_int bigint,
    soma_ne_num double precision,
    qtd_recup_int bigint,
    soma_recup_num double precision,
    qtd_recup_2fase_int bigint,
    soma_recup_2fase_num double precision,
    qtd_outrasit_int bigint,
    soma_outrasit_num double precision
);

--
-- TOC entry 1357 (class 1259 OID 39543)
-- Name: re084tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re084tmp (
    chave_str character varying(20),
    qtd_distrib_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    situacao_int smallint,
    data_vencimento_dat date,
    data_distrib_dat date,
    data_pagamento_dat date,
    data_repasse_dat date,
    valor_total_num double precision,
    valor_principal_num double precision,
    situacao_str character varying(1)
);

--
-- TOC entry 1358 (class 1259 OID 39552)
-- Name: re087tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re087tmp (
    chave_str character varying(30),
    pago_str character varying(1),
    data_pre_distrib_dat date,
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    sit_contrato_str character varying(1),
    id_gefilial_int bigint,
    nome_gefilial_str character varying(40),
    id_fimoeda_int bigint,
    valor_moeda_num double precision,
    cp_tiponeg_num double precision,
    id_cbparcela_int bigint,
    valor_principal_num double precision,
    parcela_int bigint,
    situacao_int smallint,
    data_vencimento_dat date,
    data_stand_by_dat date,
    manual_str character varying(1),
    data_riscocl_dat date,
    tarifa_cobranca_num double precision,
    cbpagamento_data_pagamento_dat date,
    cbparcelapagamento_principal_num double precision,
    cbparcelapagamento_cp_num double precision,
    cbparcelapagamento_multa_num double precision,
    cbparcelapagamento_notificacao_num double precision,
    cbparcelapagamento_despesa_banco_num double precision,
    cbparcelapagamento_desconto_num double precision,
    cbparcelapagamento_abatimento_num double precision,
    cbparcelapagamento_juros_mora_num double precision,
    cbparcelapagamento_honorarios_num double precision,
    cbparcelapagamento_comissionamento_num double precision,
    cbparcelapagamento_valor_total_num double precision,
    cbparcelapagamento_retido_num double precision,
    codigo_filial character varying(7),
    nome_filial character varying(40),
    codigo_regua character varying(6),
    descricao_regua character varying(30),
    cbparcelapagamento_acrescimo_num double precision,
    filtro_str character varying(10),
    grupo_str character varying(20),
    abrev_str character varying(6),
    estado_str character varying(2),
    id_cbdistribuidorcliente_int bigint
);

--
-- TOC entry 1359 (class 1259 OID 39565)
-- Name: re087tmp_1; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re087tmp_1 (
    chave_str character varying(30),
    id_gefilial_int character varying(7),
    nome_gefilial_str character varying(40),
    codigo_regua character varying(6),
    descricao_regua character varying(30),
    porc_regua_num double precision,
    porc_filial_num double precision,
    abrev_str character varying(6)
);

--
-- TOC entry 1360 (class 1259 OID 39574)
-- Name: re088tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re088tmp (
    chave_str character varying(20),
    data_pre_distrib_dat date,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    numero_total_parcelas_int integer,
    cep_str character varying(10),
    id_gefilial_int bigint,
    nome_gefilial_str character varying(40),
    id_cbparcela_int bigint,
    parcela_int bigint,
    situacao_int smallint,
    valor_principal_num double precision,
    data_vencimento_dat date,
    manual_str character varying(1),
    data_riscocl_dat date,
    id_cbtiponegocio_int bigint,
    id_esregua_int bigint,
    id_cbplataforma_int bigint,
    data_performance_dat date
);

--
-- TOC entry 1361 (class 1259 OID 39583)
-- Name: re089tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re089tmp (
    id_cbcontrato_int bigint,
    contrato_str character varying(40),
    id_cbtiponegocio_int bigint,
    nome_str character varying(60),
    id_cbdistribuidorcliente_int bigint,
    id_cbbordero_int bigint,
    id_cbtipopagamento_int bigint,
    id_gefilial_int bigint,
    id_cbitembordero_int bigint,
    vencimento_dat date,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    pago_str character varying(1),
    id_geusuario_int bigint,
    id_geusuario_boleto_int bigint,
    codigo_usuario_str character varying(7),
    nomecompleto_str character varying(100),
    tipo_contato_str character varying(1),
    turno_str character varying(1),
    chave_str character varying(20),
    retido_num double precision,
    parcelaitem_valor_total_num double precision,
    id_cbparcela_int bigint,
    regiao_str character varying(30),
    id_cbparcelaitembordero_int bigint,
    tiponeg_codigo_str character varying(3),
    parcela_int bigint,
    valor_principal_num double precision,
    telefone_str character varying(20),
    ddd_str character varying(5),
    uf_str character varying(10),
    data_vencimento_dat date,
    parcelamento_str character varying(7),
    tipo_boleto_str character varying(1)
);

--
-- TOC entry 1362 (class 1259 OID 39596)
-- Name: re091tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re091tmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_data_recebimento_dat date,
    cbcontrato_nome_str character varying(60),
    cbcontrato_contrato_str character varying(30),
    cbcontrato_cidade_str character varying(30),
    cbcontrato_estado_str character varying(2),
    cbcontrato_data_envio_dat date,
    geempresa_id_geempresa_int bigint,
    geempresa_nome_str character varying(40),
    da_int bigint,
    total_devedor double precision,
    cbfollowup_id_cbfollowup_int bigint,
    cbfollowup_data_dat date,
    cbsitcontato_id_cbsitcontato_int bigint,
    cbsitcontato_descricao_str character varying(100),
    cbsitcontato_codigo_int bigint,
    cbparcela_id_cbparcela_int bigint,
    cbtiponegocio_codigo_str character varying(3),
    cbtiponegocio_descricao_str character varying(40),
    codigo_sitcontato_str character varying(10),
    prob_sitcontato_str character varying(10),
    cbfollowup_historico_str character varying(1000)
);

--
-- TOC entry 1363 (class 1259 OID 39601)
-- Name: re092tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re092tmp (
    chave_str character varying(20),
    tipo_negocio_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    data_remessa_dat date,
    data_recebimento_dat date,
    usuario_str character varying(60),
    vencimento_dat date,
    da_int bigint,
    parcela_int smallint,
    numero_total_parcelas_int bigint,
    filial_str character varying(60)
);

--
-- TOC entry 1364 (class 1259 OID 39611)
-- Name: re093tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re093tmp (
    chave_str character varying(20),
    tipo_negocio_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    tipo_str character varying(4),
    parcela_int smallint,
    numero_total_parcelas_int bigint,
    vencimento_dat date,
    da_int bigint,
    comarca_str character varying(30),
    uf_str character varying(2),
    filial_str character varying(30),
    veiculo_str character varying(30),
    concessionaria_str character varying(30),
    prazo_dat date,
    data_pre_distrib_dat date
);

--
-- TOC entry 1365 (class 1259 OID 39618)
-- Name: re095tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re095tmp (
    chave_str character varying(20),
    tipo_negocio_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    uf_str character varying(2),
    plano_int character varying(3),
    parcela_int character varying(3),
    placa_str character varying(10),
    concessionaria_str character varying(50),
    marca_str character varying(35),
    cod_parcela_str character varying(2),
    refinanciamento_str character varying(1)
);

--
-- TOC entry 1366 (class 1259 OID 39627)
-- Name: re095tmp_uf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re095tmp_uf (
    chave_str character varying(20),
    uf_str character varying(2),
    qtde_int bigint
);

--
-- TOC entry 1367 (class 1259 OID 39636)
-- Name: re096tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re096tmp (
    chave_str character varying(20),
    codigo_str character varying(10),
    motivo_str character varying(100),
    mes1_str character varying(12),
    qtde_mes1_int integer,
    porc_mes1_int double precision,
    mes2_str character varying(12),
    qtde_mes2_int integer,
    porc_mes2_int double precision,
    mes3_str character varying(12),
    qtde_mes3_int integer,
    porc_mes3_int double precision
);

--
-- TOC entry 1368 (class 1259 OID 39646)
-- Name: re097tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re097tmp (
    chave_str character varying(20),
    filial_str character varying(35),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    vencimento_dat date,
    situcao_int smallint,
    data_pre_distrib_dat date,
    principal_num double precision,
    data_pagamento_dat date
);

--
-- TOC entry 1369 (class 1259 OID 39657)
-- Name: re100tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re100tmp (
    chave_str character varying(20),
    mes_str character varying(15),
    tp_neg_str character varying(45),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    vencimento_dat date,
    situcao_int smallint,
    data_pre_distrib_dat date,
    principal_num double precision,
    data_pagamento_dat date
);

--
-- TOC entry 1370 (class 1259 OID 39667)
-- Name: re101tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re101tmp (
    chave_str character varying(20),
    mes_str character varying(15),
    filial_str character varying(45),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    vencimento_dat date,
    situcao_int smallint,
    data_pre_distrib_dat date,
    principal_num double precision,
    data_pagamento_dat date
);

--
-- TOC entry 1371 (class 1259 OID 39681)
-- Name: re102tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re102tmp (
    chave_str character varying(20),
    mes_str character varying(15),
    cobrador_str character varying(40),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    vencimento_dat date,
    situcao_int smallint,
    data_pre_distrib_dat date,
    principal_num double precision,
    data_pagamento_dat date
);

--
-- TOC entry 1372 (class 1259 OID 39688)
-- Name: re103tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re103tmp (
    chave_str character varying(20),
    mes_str character varying(15),
    risco_str character varying(40),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    vencimento_dat date,
    situcao_int smallint,
    data_pre_distrib_dat date,
    principal_num double precision,
    data_pagamento_dat date
);

--
-- TOC entry 1373 (class 1259 OID 39697)
-- Name: re104tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re104tmp (
    chave_str character varying(20),
    codigo_str character varying(15),
    descricao_str character varying(60),
    id_gefilial_int bigint,
    filial_str character varying(45),
    id_cbcontrato_int bigint,
    principal_num double precision,
    total_num double precision,
    total_int bigint,
    id_cbtiponegocio_int bigint,
    parcela_int bigint,
    estado_str character varying(2),
    cpf_str character varying(20),
    nome_str character varying(60),
    contrato_str character varying(30),
    codigo_sitcontrato_str character varying(1)
);

--
-- TOC entry 1374 (class 1259 OID 39713)
-- Name: re109tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re109tmp (
    chave_str character varying(20),
    faixa1_int bigint,
    faixa2_int bigint,
    faixa3_int bigint,
    faixa4_int bigint,
    faixa5_int bigint,
    total1_num double precision,
    total2_num double precision,
    total3_num double precision,
    total4_num double precision,
    total5_num double precision,
    camp_faixa1_int bigint,
    camp_faixa2_int bigint,
    camp_faixa3_int bigint,
    camp_faixa4_int bigint,
    camp_faixa5_int bigint,
    camp_total1_num double precision,
    camp_total2_num double precision,
    camp_total3_num double precision,
    camp_total4_num double precision,
    camp_total5_num double precision
);

--
-- TOC entry 1375 (class 1259 OID 39717)
-- Name: re112tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re112tmp (
    chave character varying(30),
    descricao_header_str character varying(80),
    descricao_tiponeg_str character varying(60),
    data_notif_str character varying(10),
    contrato_str character varying(30),
    codigo_operacao_str character varying(6),
    cpf_str character varying(20),
    nome_str character varying(40),
    endereco_str character varying(80),
    bairro_str character varying(80),
    cidade_str character varying(50),
    uf_str character varying(2),
    cep_str character varying(15),
    parcela_inicial_str character varying(3),
    vencimento_parinicial_str character varying(10),
    parcela_final_str character varying(3),
    vencimento_parfinal_str character varying(10),
    principal_num double precision,
    multa_num double precision,
    cp_num double precision,
    endereco_pgto_str character varying(40),
    bairro_pgto_str character varying(40),
    cidade_pgto_str character varying(30),
    cep_pgto_num character varying(15),
    fone_pgto_num character varying(15),
    advogado_str character varying(30),
    oab_str character varying(10),
    imp_ok character varying(1),
    id_gefilial_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone
);

--
-- TOC entry 1376 (class 1259 OID 39731)
-- Name: re113tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re113tmp (
    chave_str character varying(30),
    data_distribuicao_dat date,
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_id_gecliente_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    cbcontrato_estado_str character varying(2),
    cbcontrato_numero_total_parcela integer,
    cbtiponegocio_id_cbtiponegocio_ bigint,
    cbtiponegocio_descricao_str character varying(40),
    cbsituacaocontrato_id_cbsituaca bigint,
    cbsituacaocontrato_codigo_str character varying(1),
    cbsituacaocontrato_descricao_st character varying(40),
    cbparcela_id_cbparcela_int bigint,
    cbparcela_parcela_int bigint,
    cbparcela_data_vencimento_dat date,
    cbparcela_valor_principal_num double precision,
    cbparcela_situacao_int smallint,
    cbcontrato_data_solicitacao_dat date,
    cbcontrato_data_recebimento_dat date,
    notificacao_str character varying(1),
    cbsitcontato_descricao_str character varying(40),
    filial_str character varying(60),
    distrib_cliente_str character varying(60),
    agencia_str character varying(15),
    saldo_devedor_num double precision,
    ano_str character varying(5),
    valor_pdd_num double precision,
    produto_cob_str character varying(40),
    solicitacao_str character varying(8),
    cidade_str character varying(30),
    estado_str character varying(2),
    descricao_regua_str character varying(60),
    cpf_str character varying(20),
    descricao_produto_str character varying(60),
    cbcontrato_data_devolucao_dat date
);

--
-- TOC entry 1377 (class 1259 OID 39734)
-- Name: re115tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re115tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1),
    filial_str character varying(15),
    fqa_str character varying(15),
    parcela_int integer,
    prazo_int integer,
    principal_num double precision,
    saldo_dev_num double precision,
    pdd_num double precision,
    faixa_str character varying(1),
    faixa_migrada_str character varying(1),
    sit_contato_int bigint,
    ghp_lp character varying(10),
    nome_produto_str character varying(60),
    id_cbetapa_int bigint,
    uf_str character varying(2),
    vencimento_dat date,
    nome_filial_str character varying(50),
    ultimo_contato_dat date,
    distribuicao_dat date,
    desc_sitcontato_str character varying(100),
    id_cbdistribuidorcliente_int bigint,
    razao_filial_str character varying(50),
    data_congelada_dat date,
    desc_tiponegocio_str character varying(60),
    da_int integer,
    cidade_str character varying(30),
    cod_sitcontato_int bigint,
    tipo_pessoa_str character varying(1),
    id_esregua_int bigint,
    id_gefaixaatraso_int bigint,
    nome_loja_str character varying(60),
    saldo_contrato_num double precision,
    id_cbparcela_int bigint,
    rating_str character varying(1),
    historico_fup_str character varying(1000),
    data_fup_dat date,
    data_contrato_dat date,
    qtde_parcelas_vincendas_int integer,
    situacao_contrato_str character varying(15),
    faixa_pdd_str character varying(5),
    rating_pdd_str character varying(3),
    cpf_str character varying(20)
);

--
-- TOC entry 1378 (class 1259 OID 39742)
-- Name: re116tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re116tmp (
    chave_str character varying(20),
    data_pre_distrib_dat date,
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    tp_neg_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    id_cbdistribuidorcliente_int bigint,
    situacao_contrato_str character varying(1),
    filial_str character varying(45),
    id_cbetapa_int bigint,
    id_cbparcela_int bigint,
    parcela_int bigint,
    prazo_int bigint,
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    data_pagamento_dat date,
    devolvido character varying(3),
    risco_str character varying(15),
    caracter_str character varying(1),
    cp_num double precision,
    hon_com_num double precision,
    desconto_num double precision,
    qtd_cartas_int bigint,
    qtd_cartas_recup_int bigint,
    qtd_boletos_int bigint,
    qtd_boletos_recup_int bigint,
    veic_apreendido_str character varying(1),
    veic_devolvido_str character varying(1),
    irrecuperavel_str character varying(1),
    ligacoes_int bigint
);

--
-- TOC entry 1379 (class 1259 OID 39753)
-- Name: re117tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re117tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1),
    cidade_str character varying(60),
    estado_str character varying(2),
    parcela_int bigint,
    data_vencimento_dat date,
    data_recebimento_dat date,
    data_envio_dat date,
    id_gefilial_ajuiz_int bigint,
    id_gemotivonaoajuizamento_int bigint,
    operacao_str character varying(5),
    regua_str character varying(50),
    provisionamento_dat date,
    risco_str character varying(60),
    produto_cob_str character varying(40),
    cpf_str character varying(20),
    data_devolucao_dat date,
    numero_dossie_str character varying(60),
    id_cbdistribuidorcliente_int bigint,
    lote_str character varying(20),
    da_notificacao_int integer,
    da_juridico_int integer,
    id_cbtiponegocio_int bigint,
    faixa_atraso_str character varying(60),
    protesto_str character varying(2),
    valor_montante_num double precision,
    valor_principal_num double precision,
    tipo_produto_str character varying(50),
    numero_total_parcelas_int smallint,
    data_solicitacao_dat date,
    documento_str character varying(80),
    numero_pasta_str character varying(20),
    id_esregua_int bigint,
    grupo_faixa_str character varying(40),
    grupo_faixa_da_int integer,
    comarca_data_envio_dat date,
    comarca_data_retorno_eletronico_dat date,
    comarca_posicao_str character varying(1),
    comarca_data_retorno_fisico_dat date,
    email_data_retorno_fisico_dat date,
    simples_data_retorno_fisico_dat date,
    cartorial_data_retorno_fisico_dat date,
    email_posicao_str character varying(1),
    simples_posicao_str character varying(1),
    cartorial_posicao_str character varying(1),
    email_codigo_cartorio_int integer,
    simples_codigo_cartorio_int integer,
    comarca_codigo_cartorio_int integer,
    cartorial_codigo_cartorio_int integer,
    email_data_retorno_eletronico_dat date,
    simples_data_retorno_eletronico_dat date,
    cartorial_data_retorno_eletronico_dat date,
    email_data_envio_dat date,
    simples_data_envio_dat date,
    cartorial_data_envio_dat date,
    compc_data_retorno_fisico_dat date,
    sempc_data_retorno_fisico_dat date,
    compc_posicao_str character varying(1),
    sempc_posicao_str character varying(1),
    compc_data_retorno_eletronico_dat date,
    sempc_data_retorno_eletronico_dat date,
    compc_data_envio_dat date,
    sempc_data_envio_dat date,
    compc_codigo_cartorio_int integer,
    sempc_codigo_cartorio_int integer,
    email_motivo_retorno_str character varying(70),
    simples_motivo_retorno_str character varying(70),
    cartorial_motivo_retorno_str character varying(70),
    comarca_motivo_retorno_str character varying(70),
    compc_motivo_retorno_str character varying(70),
    sempc_motivo_retorno_str character varying(70),
    email_cartorio_nome character varying(40),
    simples_cartorio_nome character varying(40),
    cartorial_cartorio_nome character varying(40),
    comarca_cartorio_nome character varying(40),
    compc_cartorio_nome character varying(40),
    sempc_cartorio_nome character varying(40),
    data_ultimo_envio_dat date,
    data_ret_ultimo_envio_dat date,
    posicao_ultimo_envio_str character varying(20),
    data_marcado_dat date,
    data_ultima_distrib_parcela_dat date
);

--
-- TOC entry 1380 (class 1259 OID 39758)
-- Name: re118tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re118tmp (
    chave_str character varying(20),
    data_baixa_dat date,
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1),
    cpf_str character varying(30),
    principal_num double precision,
    cp_num double precision
);

--
-- TOC entry 1381 (class 1259 OID 39772)
-- Name: re121tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re121tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1),
    caracter_str character varying(1),
    valor_recebido_num double precision,
    valor_pdd_num double precision,
    filial_str character varying(60)
);

--
-- TOC entry 1382 (class 1259 OID 39777)
-- Name: re122tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re122tmp (
    chave_str character varying(20),
    id_cbfollowup_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_cbsitcontato_int bigint,
    valor_num double precision,
    tipo_contato_str character varying(1),
    pago_str character varying(1)
);

--
-- TOC entry 1383 (class 1259 OID 39784)
-- Name: re123tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re123tmp (
    chave_str character varying(20),
    id_cbbordero_int bigint,
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint
);

--
-- TOC entry 1384 (class 1259 OID 39789)
-- Name: re124tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re124tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int integer,
    data_vencimento_dat date,
    principal_num double precision
);

--
-- TOC entry 1385 (class 1259 OID 39794)
-- Name: re125tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re125tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    situacao_str character varying(1),
    regiao_str character varying(20),
    ordem_faixa_int smallint,
    faixa_str character varying(20)
);

--
-- TOC entry 1386 (class 1259 OID 39804)
-- Name: re130tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re130tmp (
    chave_str character varying(20),
    data_dat date,
    id_cbcontrato_int bigint,
    produto_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    uf_str character varying(2),
    regiao_str character varying(20),
    saldo_devedor_num double precision,
    saldo_pdd_num double precision,
    faixa_pdd_str character varying(1),
    faixa_pdd_atual_str character varying(1),
    saldo_rec_num double precision,
    saldo_aument_num double precision,
    saldo_reclassi_num double precision,
    faixa_str character varying(25),
    meta_num double precision,
    caracter_dif_str character varying(15)
);

--
-- TOC entry 1387 (class 1259 OID 39809)
-- Name: re131tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re131tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int integer,
    situacao_int smallint,
    codigo_str character varying(3),
    data_vencimento_dat date,
    data_pre_distrib_dat date
);

--
-- TOC entry 1388 (class 1259 OID 39822)
-- Name: re132tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re132tmp (
    chave_str character varying(20),
    data_dat date,
    tipo_negocio_str character varying(3),
    contrato_str character varying(30),
    nome_str character varying(60),
    data_vencimento_dat date,
    parcela_int bigint,
    prazo_int bigint,
    dias_atraso bigint,
    valor_total_num double precision,
    situacao_str character varying(1),
    cpf_str character varying(20)
);

--
-- TOC entry 1389 (class 1259 OID 39827)
-- Name: re132tmp_grafico; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re132tmp_grafico (
    chave_str character varying(20),
    data_dat date,
    qtde_recup_1fase_num double precision,
    qtde_recup_2fase_num double precision
);

--
-- TOC entry 1390 (class 1259 OID 39834)
-- Name: re132tmp_outros; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re132tmp_outros (
    chave_str character varying(20),
    tp_neg_sr character varying(15),
    contrato_str character varying(30),
    nome_str character varying(60),
    situacao_str character varying(1)
);

--
-- TOC entry 1391 (class 1259 OID 39846)
-- Name: re132tmp_total; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re132tmp_total (
    chave_str character varying(20),
    data_dat date,
    qtd_enviados_int bigint,
    soma_enviados_num double precision,
    qtd_abertos_int bigint,
    soma_abertos_num double precision,
    qtd_stdby_int bigint,
    soma_stdby_num double precision,
    qtd_cancelado_int bigint,
    soma_cancelado_num double precision,
    qtd_juridico_int bigint,
    soma_juridico_num double precision,
    qtd_ne_int bigint,
    soma_ne_num double precision,
    qtd_recup_int bigint,
    soma_recup_num double precision,
    qtd_recup_2fase_int bigint,
    soma_recup_2fase_num double precision,
    qtd_outrasit_int bigint,
    soma_outrasit_num double precision
);

--
-- TOC entry 1392 (class 1259 OID 39849)
-- Name: re133tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re133tmp (
    chave_str character varying(20),
    data_dat date,
    valor_principal double precision,
    perc_mes_anterior double precision,
    perc_pagos_ate_30_dias_int double precision,
    perc_pagos_ate_60_dias_int double precision,
    perc_pagos_ate_90_dias_int double precision,
    perc_pagos_ate_120_dias_int double precision,
    perc_pagos_ate_150_dias_int double precision,
    perc_pagos_ate_180_dias_int double precision,
    perc_acumulado double precision,
    valor_saldo double precision,
    qtd_acumulado bigint,
    perc_saldo double precision,
    qtd_enviado bigint
);

--
-- TOC entry 1393 (class 1259 OID 39865)
-- Name: re135tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re135tmp (
    chave_str character varying(20),
    id_cbpagamento_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    data_pagamento_dat date,
    faixa_pagamento_str character varying(30),
    qtde_faixa_int smallint,
    parcela_int smallint,
    faixa_parcela_str character varying(30),
    concessionaria_str character varying(50),
    data_vencimento_dat date,
    faixa_da_str character varying(30),
    id_cbsituacaocontrato_int bigint
);

--
-- TOC entry 1394 (class 1259 OID 39870)
-- Name: re136tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re136tmp (
    chave_str character varying(20),
    id_cbpagamento_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    data_pagamento_dat date,
    faixa_pagamento_str character varying(30),
    qtde_faixa_int smallint,
    parcela_int smallint,
    faixa_parcela_str character varying(30),
    concessionaria_str character varying(50),
    data_vencimento_dat date,
    faixa_da_str character varying(30),
    id_cbsituacaocontrato_int bigint,
    regiao_str character varying(30),
    uf_str character varying(2),
    stand_by_dat date,
    dia_incial_int smallint,
    dia_final_int smallint,
    data_distribuicao_dat date,
    proxima_parcela_int bigint,
    data_distribuicao_parc_dat date
);

--
-- TOC entry 1395 (class 1259 OID 39875)
-- Name: re137tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re137tmp (
    chave_str character varying(20),
    gefilial_nome_str character varying(40),
    data_pagamento_dat date,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    produto_str character varying(30),
    situacao_str character varying(1),
    geempresa_nome_str character varying(40),
    cbdistribuidor_razao_social_str character varying(50),
    faixa_atraso_str character varying(1),
    valor_pago_num double precision,
    valor_montante_num double precision
);

--
-- TOC entry 1396 (class 1259 OID 39881)
-- Name: re138analittmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re138analittmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    data_pre_distrib_dat date,
    valor_principal_num double precision,
    codigo_str character varying(1),
    cidade_str character varying(30),
    estado_str character varying(2),
    agencia_int bigint,
    valor_pago_num double precision,
    codigo_int bigint
);

--
-- TOC entry 1397 (class 1259 OID 39884)
-- Name: re138tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re138tmp (
    chave_str character varying(20),
    data_dat date,
    qtd_enviados_int bigint,
    soma_enviados_num double precision,
    qtd_abertos_int bigint,
    soma_abertos_num double precision,
    qtd_abertolocalizado_int bigint,
    qtd_abertonlocalizado_int bigint,
    qtd_abertodoc_int bigint,
    qtd_stdby_int bigint,
    soma_stdby_num double precision,
    qtd_cancelado_int bigint,
    soma_cancelado_num double precision,
    qtd_juridico_int bigint,
    soma_juridico_num double precision,
    qtd_juridicolocalizado_int bigint,
    qtd_juridiconlocalizado_int bigint,
    qtd_recup_int bigint,
    soma_recup_num double precision,
    qtd_outrasit_int bigint,
    soma_outrasit_num double precision
);

--
-- TOC entry 1398 (class 1259 OID 39895)
-- Name: re140tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re140tmp (
    chave_str character varying(20),
    id_gecliente_int bigint,
    cliente_str character varying(60),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    id_cbparcela_int bigint,
    parcela_int integer,
    data_pre_distrib_dat date,
    situacao_str character varying(1),
    situacao_int smallint,
    principal_num double precision,
    data_vencimento_dat date,
    data_pagamento_dat date,
    valor_pago_num double precision,
    honorario_num double precision,
    faixa_atraso_str character varying(60),
    faixa_direcionamento_str character varying(60)
);

--
-- TOC entry 1399 (class 1259 OID 39910)
-- Name: re140tmp_projecaoda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re140tmp_projecaoda (
    chave_str character varying(20),
    id_gecliente_int bigint,
    cliente_str character varying(60),
    vencimento_boleto_dat date,
    faixa_str character varying(60),
    total_num double precision,
    honorario_num double precision,
    perc_faixa_num double precision,
    perc_cliente_num double precision
);

--
-- TOC entry 1400 (class 1259 OID 39919)
-- Name: re140tmp_projecaodd; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re140tmp_projecaodd (
    chave_str character varying(20),
    id_gecliente_int bigint,
    cliente_str character varying(60),
    vencimento_boleto_dat date,
    faixa_str character varying(60),
    total_num double precision,
    honorario_num double precision,
    perc_faixa_num double precision,
    perc_cliente_num double precision
);

--
-- TOC entry 1401 (class 1259 OID 39930)
-- Name: re141tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re141tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    vencimento_dat date,
    parcelamento_str character varying(7),
    bordero_int bigint,
    valor_total_num double precision
);

--
-- TOC entry 1402 (class 1259 OID 39933)
-- Name: re142tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re142tmp (
    chave_str character varying(20),
    bordero_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    nome_concessionaria_str character varying(30),
    parcela_int bigint,
    vencimento_dat date,
    valor_total_num double precision,
    nosso_numero_str character varying(30)
);

--
-- TOC entry 1403 (class 1259 OID 39942)
-- Name: re143tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re143tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    vencimento_dat date,
    parcelamento_str character varying(7),
    bordero_int bigint,
    valor_total_num double precision,
    pago_str character varying(1),
    data_pagamento_dat date,
    valor_pagamento_num double precision,
    parcela_int integer,
    situacao_int integer,
    todas_parcelas_str character varying(200),
    nosso_numero_str character varying(30),
    codigo_str character varying(7),
    id_cbitembordero_int bigint,
    cpf_str character varying(20),
    dias_atraso_int bigint,
    data_venc_ult_parc date,
    data_venc_prim_parc date,
    id_geusuario_int bigint
);

--
-- TOC entry 1404 (class 1259 OID 39948)
-- Name: re145tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re145tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    id_gefilial_int bigint,
    marca_str character varying(30),
    modelo_str character varying(30),
    ano_str character varying(9),
    valor_honorarios_num double precision,
    id_gecliente_int bigint,
    data_venda_dat date,
    data_apreensao_dat date,
    data_venda_prevista_dat date,
    data_ajuizamento_dat date,
    dias_previsto_retom bigint,
    valor_venda_num double precision,
    placa_str character varying(10),
    chassis_str character varying(25),
    id_cbdistribuidorcliente_int bigint
);

--
-- TOC entry 1405 (class 1259 OID 39953)
-- Name: re146tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re146tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    cbcontrato_nome_str character varying(60),
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    numero_total_parcelas_int integer,
    id_cbparcela_int bigint,
    parcela_int bigint,
    data_pre_distrib_dat date,
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    situacao_str character varying(1),
    codigo_buc_int bigint,
    etapa_str character varying(5),
    regiao_str character varying(15),
    da_contrato_int bigint,
    codigo_operacao_str character varying(10),
    cpf_str character varying(20),
    id_cbetapa_int bigint,
    dias_atraso_int bigint,
    boletos_int integer,
    boletos_pagos_int integer,
    boletos_npagos_int integer,
    acionamentos_int integer,
    acionamentos_pos_int integer,
    acionamentos_neg_int integer,
    motivo_inadimplencia_str character varying(100)
);

--
-- TOC entry 1406 (class 1259 OID 39960)
-- Name: re147tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re147tmp (
    chave_str character varying(20),
    id_cbitembordero_int bigint,
    id_cbcontrato_int bigint,
    tipo_negocio_str character varying(10),
    contrato_str character varying(30),
    nome_str character varying(60),
    select_str character varying(1),
    critica_str character varying(100),
    nivel_critica_str character varying(1),
    cpf_str character varying(20)
);

--
-- TOC entry 1407 (class 1259 OID 39974)
-- Name: re148tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re148tmp (
    estoque_str integer,
    vl_estoque_num double precision,
    nova_str integer,
    vl_nova_str double precision,
    saida_str integer,
    vl_saida_num double precision,
    saldo_str integer,
    vl_saldo_num double precision,
    acordo_novo_str integer,
    vl_acordo_novo_num double precision,
    acordo_vista_str integer,
    vl_acordo_vista_num double precision,
    vista_str integer,
    vl_vista_num double precision,
    entrada_str integer,
    vl_entrada_num double precision,
    corrente_str integer,
    vl_corrente_num double precision,
    quitados_str integer,
    vl_quitados_num double precision,
    chave_str character varying(20),
    id_cbfiltro_int bigint,
    descricao_filtro_str character varying(100),
    id_cbtiponegocio_int bigint,
    tipo_negocio_str character varying(100),
    id_cbetapa_int bigint,
    descricao_str character varying(100)
);

--
-- TOC entry 1408 (class 1259 OID 39982)
-- Name: re149tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re149tmp (
    chave_str character varying(20),
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    id_cbetapa_int bigint,
    produto_str character varying(50),
    id_cbparcela_int bigint,
    parcela_int bigint,
    valor_principal_num double precision,
    data_vencimento_dat date,
    data_distrib_dat date,
    dias_atraso_str character varying(15),
    faixa_atraso_str character varying(30),
    ordem_faixa_int smallint,
    uf_str character varying(2),
    tipo_negocio_str character varying(40)
);

--
-- TOC entry 1409 (class 1259 OID 39990)
-- Name: re149tmp_faixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re149tmp_faixa (
    faixa_str character varying(30),
    ordem_faixa_int smallint,
    chave_str character varying(20)
);

--
-- TOC entry 1410 (class 1259 OID 40000)
-- Name: re149tmp_log; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re149tmp_log (
    chave_str character varying(20),
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    id_cbetapa_int bigint,
    produto_str character varying(30),
    id_cbparcela_int bigint,
    parcela_int bigint,
    valor_principal_num double precision,
    data_vencimento_dat date,
    uf_str character varying(2),
    historico_txt text
);

--
-- TOC entry 1411 (class 1259 OID 40014)
-- Name: re149tmp_sint; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re149tmp_sint (
    chave_str character varying(20),
    produto_str character varying(40),
    faixa_str character varying(30),
    qtd_contratos_int bigint,
    valor_total_num double precision,
    ordem_faixa_int smallint,
    uf_str character varying(2)
);

--
-- TOC entry 1412 (class 1259 OID 40025)
-- Name: re150tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re150tmp (
    chave_str character varying(20),
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_cbetapa_int bigint,
    estado_str character varying(2),
    id_cbfilial_int bigint,
    distrib_valor_num double precision,
    pagto_qtdade_pagto_int integer,
    pagto_qtdade_contrato_int integer,
    pagto_qtdade_parcela_int integer,
    pagto_vlr_princ_num double precision,
    pagto_vlr_total_num double precision,
    pagto_vlr_honor_num double precision,
    pagto_vlr_comis_num double precision,
    pagto_vlr_repas_num double precision,
    regiao_str character varying(15),
    id_cbdistribuidorcliente_int bigint,
    razao_social_str character varying(50)
);

--
-- TOC entry 1413 (class 1259 OID 40041)
-- Name: re152tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re152tmp (
    nomecompleto_str character varying(40),
    id_geempresa_int bigint,
    id_gefilial_int bigint,
    admissao_dat date,
    funcao_str character varying(20),
    turno_str character varying(1),
    horas_trabalho_str character varying(6),
    horario_entrada_str character varying(6),
    horario_saida_str character varying(6),
    ramal_int smallint,
    faixa_atuacao_str character varying(30),
    atuacao_str character varying(30),
    chave_str character varying(20),
    id_geusuario_int smallint,
    escolaridade_str character varying(100),
    data_nasc_dat date,
    horas_trabalho_int smallint
);

--
-- TOC entry 1414 (class 1259 OID 40050)
-- Name: re153tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re153tmp (
    chave_str character varying(20),
    id_geqlcliente_int bigint,
    cpf_str character varying(30),
    nome_str character varying(60),
    estado_str character varying(2),
    id_cbetapa_int bigint,
    da_int smallint,
    faixa_atraso_str character varying(50),
    qtde_end_int smallint,
    qtde_cont_int smallint,
    envio_dat date,
    retorno_dat date,
    end_excelente_int smallint,
    end_bom_int smallint,
    end_ruim_int smallint,
    end_indefinido_int smallint,
    endereco_tratado_str character varying(1),
    contato_excelente_int smallint,
    contato_bom_int smallint,
    contato_ruim_int smallint,
    contato_indefinido_int smallint,
    contato_tratado_str character varying(1),
    fup_positivo_int smallint,
    fup_negativo_int smallint,
    fup_boletos_int smallint,
    fup_localizado_int smallint,
    fup_nao_localizado_int smallint,
    bol_enviados_int smallint,
    bol_valor_num double precision,
    bol_hon_num double precision,
    bol_recuperado_int smallint,
    bol_valor_recup_num double precision,
    bol_hon_recup_num double precision,
    bol_tratado_str character varying(1),
    custas_biro_num double precision,
    custas_npcob_num double precision,
    id_geqlresponsavel_int bigint,
    retorno_positivo_str character varying(1),
    agregado_npcob_str character varying(1),
    dias_atraso_int smallint,
    id_cbsituacaocontrato_int bigint
);

--
-- TOC entry 1415 (class 1259 OID 40059)
-- Name: re154tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re154tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    estado_str character varying(2),
    id_cbsituacaocontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int smallint,
    vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    data_primeira_distrib_dat date,
    id_gefaixaatraso_int bigint,
    descricao_faixaatraso_str character varying(60),
    valor_meta_num double precision,
    valor_pagamento_num double precision,
    meta_int smallint,
    desconto_num double precision,
    tipo_negocio_str character varying(40),
    nome_concessionaria_str character varying(30),
    data_pagamento_dat date,
    nome_str character varying(60),
    situacao_contrato_str character varying(1),
    data_stand_by_dat date,
    codigo_operacao_str character varying(5),
    codigo_tn_str character varying(3),
    cp_num double precision,
    multa_num double precision,
    pagamento_cp_num double precision,
    pagamento_multa_num double precision,
    filial_str character varying(30),
    id_esregua_int bigint,
    valor_acordo_num double precision
);

--
-- TOC entry 1416 (class 1259 OID 40072)
-- Name: re155tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re155tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(60),
    estado_str character varying(2),
    regiao_str character varying(60),
    id_cbsituacaocontrato_int bigint,
    vencimento_dat date,
    da_int bigint,
    valor_principal_num double precision,
    saldo_contrato_num double precision,
    produto_str character varying(200),
    parcela_int bigint,
    numero_total_parcelas_int bigint,
    nome_str character varying(60),
    cpf_str character varying(20),
    produto_int bigint,
    nome_produto_str character varying(40),
    id_distincao_int bigint,
    modalidade_int smallint,
    id_cbparcela_int bigint,
    data_ultimofollowup date,
    etapa character varying(50),
    data_pagto date,
    cartao_str character varying(20),
    conta_cartao_str character varying(20)
);

--
-- TOC entry 1417 (class 1259 OID 40090)
-- Name: re157tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re157tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(60),
    estado_str character varying(2),
    regiao_str character varying(60),
    nome_str character varying(60),
    numero_total_parcelas_int bigint,
    id_cbsituacaocontrato_int bigint,
    vencimento_dat date,
    data_pre_distrib_dat date,
    valor_pagamento_num double precision,
    valor_parcela_num double precision,
    pagamento_dat date,
    parcela_int bigint,
    da_int bigint,
    id_cbparcela_int bigint,
    cobrador_str character varying(40),
    quebra_da_int smallint,
    quebra_parcela_int smallint,
    situacao_int smallint,
    da_pagamento_int smallint
);

--
-- TOC entry 1418 (class 1259 OID 40102)
-- Name: re158tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re158tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(20),
    numero_total_parcelas_int integer,
    id_cbetapa_int bigint,
    codigo_buc_int bigint,
    agencia_fiat_str character varying(10),
    situacao_contrato_str character varying(1),
    id_cbparcela_int bigint,
    parcela_int bigint,
    tipo_str character varying(10),
    data_vencimento_dat date,
    valor_principal_num double precision,
    situacao_int smallint,
    tipodirec_str character varying(1),
    filial_str character varying(45),
    id_gecliente_int bigint,
    da_contrato_int bigint,
    tp_neg_str character varying(15),
    produto_str character varying(30),
    regua_str character varying(10),
    faixa_atraso_str character varying(60),
    faixa_atraso_parcela_str character varying(60),
    faixa_dd_str character varying(60),
    situacao_str character varying(1),
    regiao_str character varying(30),
    id_cbdistribuidorcliente_int bigint,
    da_int bigint,
    quebra_parcela_int bigint,
    data_distrib_dat date,
    id_esregua_int bigint,
    id_cbsituacaocontrato_int bigint,
    dia_performar_int bigint,
    data_ultima_distrib_dat date,
    ult_pag_dat date,
    ult_distrib_dat date
);

--
-- TOC entry 1419 (class 1259 OID 40108)
-- Name: re159tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re159tmp (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    contrato_str character varying(60),
    regiao_str character varying(60),
    vencimento_dat date,
    valor_pagamento_num double precision,
    parcela_int bigint,
    da_int bigint,
    id_cbparcela_int bigint,
    acionamento_int integer,
    valor_honorario_num double precision,
    ql_qtde_biro_int smallint,
    ql_qtde_npcob_int smallint,
    ql_valor_biro_num double precision,
    ql_valor_npcob_num double precision,
    id_cbbordero_int bigint,
    id_cbitembordero_int bigint,
    pago_str character varying(1)
);

--
-- TOC entry 1420 (class 1259 OID 40116)
-- Name: re161tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re161tmp (
    chave_str character varying(20),
    id_cbfollowup_int bigint,
    data_standby_dat date,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(60),
    nome_str character varying(60),
    id_cbparcela_int bigint,
    parcela_int smallint,
    situacao_int smallint,
    vencimento_dat date,
    principal_num double precision,
    divida_num double precision,
    fup_int integer,
    fup_ativo_int integer,
    fup_receptivo_int integer,
    custo_num double precision,
    tratamento_num double precision,
    pagamentos_int integer,
    data1ofup_dat date,
    data_envio_dat timestamp without time zone
);

--
-- TOC entry 1421 (class 1259 OID 40126)
-- Name: re161tmp_boletos; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re161tmp_boletos (
    chave_str character varying(20),
    id_cbcontrato_int bigint,
    id_cbitembordero_int bigint,
    valor_total_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    pago_str character varying(1),
    tipo_contato_str character varying(1)
);

--
-- TOC entry 1422 (class 1259 OID 40134)
-- Name: re164tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re164tmp (
    chave_str character varying(20),
    grupo_str character varying(30),
    id_cbtiponegocio_int bigint,
    id_cbdistribuidorcliente_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(60),
    nome_str character varying(60),
    id_cbsituacaocontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int smallint,
    vencimento_dat date,
    principal_num double precision,
    data_pre_distrib_dat date,
    id_cbpagamento_int bigint,
    id_cbparcelapagamento_int bigint,
    data_pagamento_dat date,
    da_int integer,
    pgto_no_prazo_str character varying(1)
);

--
-- TOC entry 1423 (class 1259 OID 40145)
-- Name: re165tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re165tmp (
    codigo_tn_str character varying(3),
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int bigint,
    data_vencimento_dat date,
    data_documento_dat date,
    retorno_documento_dat date,
    data_retorno_dat date,
    notificado_str character varying(1),
    id_cbdespesa_int bigint,
    id_cbcontrato_int bigint,
    id_esdocfisico_int bigint,
    chave_str character varying(30),
    data_notificacao_dat date,
    codigo_contrato_str character varying(1)
);

--
-- TOC entry 1424 (class 1259 OID 40152)
-- Name: re166tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re166tmp (
    chave_str character varying(20),
    data_dat date,
    qtd_enviados_int bigint,
    soma_enviados_num double precision,
    qtd_abertos_int bigint,
    soma_abertos_num double precision,
    qtd_stdby_int bigint,
    soma_stdby_num double precision,
    qtd_cancelado_int bigint,
    soma_cancelado_num double precision,
    qtd_canc_recup_int bigint,
    soma_canc_recup_num double precision,
    qtd_recuperado_int bigint,
    soma_recuperado_num double precision,
    qtd_outrasit_int bigint,
    soma_outrasit_num double precision
);

--
-- TOC entry 1425 (class 1259 OID 40162)
-- Name: re166tmp_an; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re166tmp_an (
    chave_str character varying(20),
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int smallint,
    data_pre_distrib_dat date,
    tp_neg_str character varying(15),
    situacaocontrato_str character varying(1),
    valor_principal_num double precision,
    sit_parcela smallint,
    fase_str character varying(2),
    id_cbtiponegocio_int bigint,
    regua_int bigint,
    vencimento_dat date,
    cidade_str character varying(40),
    uf_str character varying(2),
    filial_str character varying(50),
    da_int integer,
    recuperado_str character varying(1),
    manual_str character varying(1),
    id_cbetapa_int bigint,
    id_cbdistribuidorcliente_int bigint
);

--
-- TOC entry 1426 (class 1259 OID 40167)
-- Name: re169tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re169tmp (
    chave_str character varying(20),
    contrato_str character varying(30),
    cpf_str character varying(30),
    nome_str character varying(60),
    pre_distrib_dat date,
    parcela_int bigint,
    vencimento_dat date,
    ultima_distrib_dat date,
    primeira_distrib_dat date,
    principal_num double precision,
    pagamento_dat date,
    valor_pagamento_num double precision,
    regua_str character varying(30),
    tipo_negocio_str character varying(30),
    sit_contrato_str character varying(1),
    sit_parcela_str character varying(1),
    conta character varying(10),
    agencia character varying(7),
    id_cbcontrato bigint,
    uf_str character varying(2),
    id_gefilial bigint,
    id_cbtiponegocio bigint,
    id_cbetapa bigint,
    id_cbdistribuidorcliente bigint,
    da_int bigint,
    regiao_str character varying(60),
    operacao character varying(30),
    desc_indice_str character varying(20),
    id_cbsitcontato_int bigint,
    comissionamento_num real,
    id_geusuario_int bigint
);

--
-- TOC entry 1427 (class 1259 OID 40179)
-- Name: re170_ende_tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re170_ende_tmp (
    chave_str character varying(30),
    id_geqlcliente_int bigint,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2),
    classificacao_str character varying(15),
    tabela_origem_str character varying(60)
);

--
-- TOC entry 1428 (class 1259 OID 40190)
-- Name: re170tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re170tmp (
    chave_str character varying(30),
    contrato_str character varying(40),
    nome_str character varying(60),
    codigo_str character varying(3),
    ddd_str character varying(5),
    telefone_str character varying(20),
    ddd_cel_str character varying(5),
    telefone_cel_str character varying(20),
    ddd_trabalho_str character varying(5),
    telefone_trabalho_str character varying(20),
    descricao_sitcontrato_str character varying(20),
    classificacao1_str character varying(15),
    classificacao2_str character varying(15),
    classificacao3_str character varying(15),
    classificacao4_str character varying(15),
    classificacao5_str character varying(15),
    telefone1_str character varying(20),
    telefone2_str character varying(20),
    telefone3_str character varying(20),
    telefone4_str character varying(20),
    telefone5_str character varying(20),
    ddd1_str character varying(5),
    ddd2_str character varying(5),
    ddd3_str character varying(5),
    ddd4_str character varying(5),
    ddd5_str character varying(5),
    da_int bigint,
    valor_devedor_num double precision,
    valor_principal_num double precision,
    id_geqlcliente_int bigint,
    cpf_str character varying(25),
    classificacao6_str character varying(15),
    email_str character varying(255),
    data_vencimento_dat date,
    numero_dossie_str character varying(30),
    data_contrato_dat date,
    prazo_solucao_dat date,
    produto_str character varying(200),
    parcela_int integer,
    data_boletagem_dat date,
    data_dat date,
    data_venc_entrada_dat date,
    status_contrato_str character varying(5),
    tabela_origem1_str character varying(60),
    tabela_origem2_str character varying(60),
    tabela_origem3_str character varying(60),
    tabela_origem4_str character varying(60),
    tabela_origem5_str character varying(60),
    tabela_origem6_str character varying(60)
);

--
-- TOC entry 1429 (class 1259 OID 40209)
-- Name: re176tmp_analitico_10_100_49_250_8314; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_100_49_250_8314 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1430 (class 1259 OID 40231)
-- Name: re176tmp_analitico_10_100_50_112_8133; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_100_50_112_8133 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1431 (class 1259 OID 40253)
-- Name: re176tmp_analitico_10_100_50_169_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_100_50_169_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1432 (class 1259 OID 40268)
-- Name: re176tmp_analitico_10_108_14_160_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_14_160_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1433 (class 1259 OID 40292)
-- Name: re176tmp_analitico_10_108_15_168_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_168_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1434 (class 1259 OID 40314)
-- Name: re176tmp_analitico_10_108_15_252_8193; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_252_8193 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1435 (class 1259 OID 40330)
-- Name: re176tmp_analitico_10_108_15_51_8376; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_51_8376 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1436 (class 1259 OID 40342)
-- Name: re176tmp_analitico_10_108_15_52_8376; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_52_8376 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1437 (class 1259 OID 40359)
-- Name: re176tmp_analitico_10_108_15_54_8193; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_54_8193 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1438 (class 1259 OID 40375)
-- Name: re176tmp_analitico_10_108_15_54_8220; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_54_8220 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1439 (class 1259 OID 40391)
-- Name: re176tmp_analitico_10_108_15_63_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_15_63_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1440 (class 1259 OID 40407)
-- Name: re176tmp_analitico_10_108_17_160_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_17_160_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1441 (class 1259 OID 40437)
-- Name: re176tmp_analitico_10_108_228_120_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_120_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1442 (class 1259 OID 40458)
-- Name: re176tmp_analitico_10_108_228_123_8230; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_123_8230 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1443 (class 1259 OID 40474)
-- Name: re176tmp_analitico_10_108_228_133_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_133_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1444 (class 1259 OID 40492)
-- Name: re176tmp_analitico_10_108_228_138_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_138_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1445 (class 1259 OID 40512)
-- Name: re176tmp_analitico_10_108_228_13_8039; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_13_8039 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1446 (class 1259 OID 40531)
-- Name: re176tmp_analitico_10_108_228_164_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_164_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1447 (class 1259 OID 40549)
-- Name: re176tmp_analitico_10_108_228_172_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_172_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1448 (class 1259 OID 40569)
-- Name: re176tmp_analitico_10_108_228_175_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_175_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1449 (class 1259 OID 40591)
-- Name: re176tmp_analitico_10_108_228_178_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_178_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1450 (class 1259 OID 40614)
-- Name: re176tmp_analitico_10_108_228_179_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_179_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1451 (class 1259 OID 40628)
-- Name: re176tmp_analitico_10_108_228_182_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_182_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1452 (class 1259 OID 40641)
-- Name: re176tmp_analitico_10_108_228_184_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_184_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1453 (class 1259 OID 40655)
-- Name: re176tmp_analitico_10_108_228_186_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_186_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1454 (class 1259 OID 40671)
-- Name: re176tmp_analitico_10_108_228_186_8382; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_186_8382 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1455 (class 1259 OID 40683)
-- Name: re176tmp_analitico_10_108_228_187_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_187_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1456 (class 1259 OID 40704)
-- Name: re176tmp_analitico_10_108_228_188_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_188_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1457 (class 1259 OID 40724)
-- Name: re176tmp_analitico_10_108_228_189_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_189_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1458 (class 1259 OID 40741)
-- Name: re176tmp_analitico_10_108_228_190_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_190_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1459 (class 1259 OID 40757)
-- Name: re176tmp_analitico_10_108_228_199_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_199_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1460 (class 1259 OID 40770)
-- Name: re176tmp_analitico_10_108_228_209_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_209_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1461 (class 1259 OID 40792)
-- Name: re176tmp_analitico_10_108_228_219_8039; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_219_8039 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1462 (class 1259 OID 40809)
-- Name: re176tmp_analitico_10_108_228_219_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_219_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1463 (class 1259 OID 40831)
-- Name: re176tmp_analitico_10_108_228_225_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_225_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1464 (class 1259 OID 40853)
-- Name: re176tmp_analitico_10_108_228_51_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_51_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1465 (class 1259 OID 40874)
-- Name: re176tmp_analitico_10_108_228_67_8038; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_67_8038 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1466 (class 1259 OID 40894)
-- Name: re176tmp_analitico_10_108_228_91_8295; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_228_91_8295 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1467 (class 1259 OID 40908)
-- Name: re176tmp_analitico_10_108_8_116_8137; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_8_116_8137 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1468 (class 1259 OID 40922)
-- Name: re176tmp_analitico_10_108_8_125_8325; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_8_125_8325 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1469 (class 1259 OID 40944)
-- Name: re176tmp_analitico_10_108_8_61_8325; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_8_61_8325 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1470 (class 1259 OID 40963)
-- Name: re176tmp_analitico_10_108_8_72_8354; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_108_8_72_8354 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1471 (class 1259 OID 40982)
-- Name: re176tmp_analitico_10_135_4_205_8377; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_135_4_205_8377 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1472 (class 1259 OID 41002)
-- Name: re176tmp_analitico_10_135_5_108_8193; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_135_5_108_8193 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1473 (class 1259 OID 41024)
-- Name: re176tmp_analitico_10_135_6_167_8193; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_135_6_167_8193 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1474 (class 1259 OID 41041)
-- Name: re176tmp_analitico_10_66_12_144_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_66_12_144_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1475 (class 1259 OID 41064)
-- Name: re176tmp_analitico_10_66_12_44_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_66_12_44_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1476 (class 1259 OID 41084)
-- Name: re176tmp_analitico_10_66_12_80_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_66_12_80_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1477 (class 1259 OID 41102)
-- Name: re176tmp_analitico_10_66_12_92_8104; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re176tmp_analitico_10_66_12_92_8104 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(150),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(5),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(60),
    nome_str character varying(150),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str text,
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    info_adic_cust_txt text,
    saldo_num double precision,
    etapa_str character varying(40),
    parcela_int bigint,
    consolidador_str character varying(20),
    regiao_str character varying(30),
    valor_acordo_num double precision,
    destino_str character varying(30),
    tipo_pagamento_str character varying(20)
);

--
-- TOC entry 1478 (class 1259 OID 41121)
-- Name: re181tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re181tmp (
    chave_str character varying(20),
    id_cbtiponegocio_int bigint,
    id_cbetapa_int bigint,
    id_esregua_int bigint,
    id_cbparcela_int bigint,
    id_cbsitcontato_int bigint,
    data_dat date,
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int integer,
    data_vencimento_dat date,
    data_pre_distrib_dat date,
    data_pagamento_dat date,
    valor_principal_num double precision,
    valor_pago_num double precision,
    id_cbdistribuidorcliente_int integer,
    estado_str character varying(2),
    saldo_devedor_num double precision,
    ultimo_pagamento_dat date,
    id_geusuario_int bigint,
    id_cbcontrato_int bigint
);

--
-- TOC entry 1479 (class 1259 OID 41132)
-- Name: re183_contrato_tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re183_contrato_tmp (
    chave_str character varying(30),
    codigo_str character(3),
    id_cbtiponegocio_int bigint,
    contrato_str character varying(30),
    estado_str character(2),
    montante_num double precision,
    id_geqlcliente_int bigint
);

--
-- TOC entry 1480 (class 1259 OID 41143)
-- Name: re183_ende_anti_tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re183_ende_anti_tmp (
    chave_str character varying(30),
    id_geqlcliente_int bigint,
    id_geqlqualidade_int bigint,
    id_geqltratamento_int bigint,
    id_cbtiponegocio_int bigint,
    descricao_responsavel_str character varying(30),
    solicitacao_dat date,
    conclusao_dat date,
    tipo_infoquali_str character varying(10),
    descquali_str character varying(100),
    classificacao_str character varying(15),
    id_geqlresponsavel_int bigint
);

--
-- TOC entry 1481 (class 1259 OID 41150)
-- Name: re185tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re185tmp (
    fup_int bigint,
    contrato_int character varying(30),
    data_dat date,
    nome_str character varying(60),
    id_geusuario_int bigint,
    bol_enviado integer,
    bol_pago integer,
    tipo_negocio character varying(60),
    id_cbtiponegocio_int bigint,
    chave_str character varying(30),
    id_cbcontrato_int integer,
    id_cbfollowup_int integer,
    followup_int integer,
    valor_recebido_num double precision,
    valor_enviado_num double precision,
    valor_honorario_enviado_num double precision,
    valor_honorario_recebido_num double precision,
    comissionamento_recebido_num double precision,
    retido_recebido_num double precision,
    despesa_recebida_num double precision
);

--
-- TOC entry 1482 (class 1259 OID 41156)
-- Name: re186_pos_boletagem_tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re186_pos_boletagem_tmp (
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    honorarios_num real,
    comissionamento_num real,
    valor_total_num real,
    id_cbitembordero_int bigint,
    pago_str character varying(2),
    parcelamento_str character varying(10),
    retido_num real,
    chave_str character varying(30)
);

--
-- TOC entry 1483 (class 1259 OID 41164)
-- Name: re186tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re186tmp (
    chave_str character varying(20),
    id_cbfollowup_int bigint,
    data_standby_dat date,
    id_cbtiponegocio_int bigint,
    id_cbcontrato_int bigint,
    id_cbitembordero_int bigint,
    contrato_str character varying(60),
    nome_str character varying(60),
    id_cbparcela_int bigint,
    parcela_int smallint,
    situacao_int smallint,
    vencimento_dat date,
    principal_num double precision,
    divida_num double precision,
    fup_int integer,
    fup_ativo_int integer,
    fup_receptivo_int integer,
    custo_num double precision,
    tratamento_num double precision,
    pagamentos_int integer,
    data1ofup_dat date,
    data_envio_dat timestamp without time zone,
    valor_total_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    pago_str character varying(1),
    tipo_contato_str character varying(1),
    parcelamento_str character varying(10),
    valor_total_proje_num real,
    honorarios_proje_num real,
    comissionamento_proje_num real,
    emissao_tim timestamp without time zone,
    uf_str character varying(2),
    etapa_str character varying(50),
    bordero_int bigint,
    data_pagamento_dat date,
    vencimento_carta_dat date,
    regua_str character varying(60),
    motivoinadimplencia_str character varying(100),
    distribparcela_dat date,
    numero_solicitacao_str character varying(10),
    id_cbsitcontato_int integer,
    enviado_str character varying(1)
);

--
-- TOC entry 1484 (class 1259 OID 41172)
-- Name: re189tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re189tmp (
    chave_str character varying(25),
    id_cbcontrato_int bigint,
    id_essantandereventos_int bigint,
    descricao_evento_str character varying(80),
    id_essantanderfases_int bigint,
    descricao_fase_str character varying(80),
    data_ult_evento_dat date,
    numero_dossie_str character varying(30),
    dias_atraso_int integer,
    login_benner_str character varying(60),
    id_gebancoevento_int bigint,
    id_gebancofase_int bigint,
    numero_pasta_str character varying(20)
);

--
-- TOC entry 1485 (class 1259 OID 41178)
-- Name: re191tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re191tmp (
    chave_str character varying(20),
    id_syslogtempo_int bigint,
    id_systempo_int bigint,
    id_systipotempo_int bigint,
    id_syscampanha_int bigint,
    id_syscobrancacontrato_int bigint,
    codigo_tempo_str character varying(60),
    codigo_tipotempo_str character varying(60),
    codigo_campanha_str character varying(60),
    data_inicial_dat date,
    hora_inicial_tme timestamp without time zone,
    data_final_dat date,
    hora_final_tme timestamp without time zone,
    diferenca_str character varying(20),
    diferenca_seg_num numeric,
    id_sysusuario_int bigint,
    logon_str character varying(20),
    nome_str character varying(60),
    codigo_tpn_str character varying(5),
    contrato_str character varying(30),
    id_cbcontrato_int bigint,
    id_syscliente_int bigint
);

--
-- TOC entry 1486 (class 1259 OID 41193)
-- Name: re191tmp_classe; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re191tmp_classe (
    chave_str character varying(20),
    id_systempoacionamento_int bigint,
    id_syslogtempo_int bigint,
    id_systempo_int bigint,
    codigo_classetipotempo_str character varying(60),
    data_inicial_dat date,
    hora_inicial_tme timestamp without time zone,
    data_final_dat date,
    hora_final_tme timestamp without time zone,
    diferenca_str character varying(20),
    diferenca_seg_int numeric,
    id_sysclassetipotempo_int bigint,
    manual_str character varying(1)
);

--
-- TOC entry 1487 (class 1259 OID 41206)
-- Name: re191tmp_totais; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re191tmp_totais (
    chave_str character varying(20),
    id_sysusuario_int bigint,
    fechou_corretamente_int bigint,
    fechou_incorretamente_int bigint,
    tempo_casa_int bigint,
    turno_str character varying(1),
    funcao_str character varying(255),
    primeiro_login_tme timestamp without time zone,
    ultimo_login_tme timestamp without time zone,
    id_syscliente_int bigint,
    horas_trabalho_int smallint
);

--
-- TOC entry 1488 (class 1259 OID 41215)
-- Name: re191tmp_totaiscarteira; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re191tmp_totaiscarteira (
    chave_str character varying(20),
    id_syscliente_int bigint,
    qtde_pas_int bigint,
    qtde_pas_usados_int bigint,
    codigo_str character varying(20),
    nome_str character varying(60)
);

--
-- TOC entry 1489 (class 1259 OID 41226)
-- Name: re202tmp_sitcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re202tmp_sitcontato (
    id_gecliente_int bigint,
    id_cbsitcontato_int character varying
);

--
-- TOC entry 1490 (class 1259 OID 41244)
-- Name: re205tmp_analitico_192_168_1_30_1195_530; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re205tmp_analitico_192_168_1_30_1195_530 (
    tipo_rela_str character(1),
    geusuario_nome_str character varying(40),
    id_cbitembordero_int bigint,
    cbtiponegocio_codigo_str character varying(3),
    id_cbtiponegocio_int bigint,
    id_gefilial_int bigint,
    id_esregua_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    cpf_str character varying(20),
    bordero_int integer,
    nosso_numero_str character varying(30),
    emissao_dat date,
    vencimento_bole_dat date,
    vencimento_parc_dat date,
    principal_num double precision,
    data_dat date,
    juros_num double precision,
    multa_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    cp_num double precision,
    despesa_np_num double precision,
    retido_num double precision,
    desconto_num double precision,
    total_num double precision,
    id_geusuario_int bigint,
    estado_str character(2),
    fa_str character varying(40),
    pago_str character(1),
    pagamento_dat date,
    notificacao_num double precision,
    despesa_banco_num double precision,
    data_repasse_dat date,
    valor_repasse_num double precision,
    honocomis_repasse_num double precision,
    id_cbcontrato_int bigint,
    info_adic_txt text,
    saldo_num double precision,
    qtde_follows_int character varying(80),
    qtde_contratos_int character varying(80),
    boleto_gravacao_tim timestamp without time zone
);

--
-- TOC entry 1491 (class 1259 OID 41260)
-- Name: re205tmp_usuario_192_168_1_119_1195_530; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re205tmp_usuario_192_168_1_119_1195_530 (
    tipo_rela_str character(1),
    id_geusuario_int bigint,
    horas_trabalho_int integer,
    ramal_int integer,
    turno_str character varying(30),
    tipo_contato_str character(1),
    data_nasc_dat date,
    admissao_dat date,
    faixa_atuacao_str character varying(30),
    atuacao_str character varying(30),
    gecodigo_str character varying(15),
    genome_str character varying(80),
    id_gecliente_int bigint,
    codigo_cliente_str character varying(7),
    nome_cliente_str character varying(60)
);

--
-- TOC entry 1492 (class 1259 OID 41268)
-- Name: re205tmp_usuario_192_168_1_30_1195_530; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re205tmp_usuario_192_168_1_30_1195_530 (
    tipo_rela_str character(1),
    id_geusuario_int bigint,
    horas_trabalho_int integer,
    ramal_int integer,
    turno_str character varying(30),
    tipo_contato_str character(1),
    data_nasc_dat date,
    admissao_dat date,
    faixa_atuacao_str character varying(30),
    atuacao_str character varying(30),
    gecodigo_str character varying(15),
    genome_str character varying(80),
    id_gecliente_int bigint,
    codigo_cliente_str character varying(7),
    nome_cliente_str character varying(60)
);

--
-- TOC entry 1493 (class 1259 OID 41281)
-- Name: re213tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re213tmp (
    chave_str character varying(20),
    id_cbcontrato_int integer,
    id_cbparcela_int integer,
    id_cbpagamento_int integer,
    id_cbsituacaocontrato_int smallint,
    cpf_str character varying(30),
    cartao_str character varying(30),
    principal_num double precision,
    vecto_cartao_dat date,
    dias_atraso_int integer,
    data_pagamento_dat date,
    vecto_boleto_dat date,
    parcelamento_str character varying(10),
    caixa_num double precision,
    acordo_num double precision,
    emissao_dat date,
    comissionamento_num double precision,
    data_inclusao_dat date,
    operador_str character varying(60),
    tipo_contato_str character varying(1)
);

--
-- TOC entry 1494 (class 1259 OID 41294)
-- Name: re999tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.re999tmp (
    chave_str character varying(20),
    tela_str character varying(10),
    incio_dat timestamp with time zone,
    fim_dat timestamp with time zone
);

--
-- TOC entry 1495 (class 1259 OID 41302)
-- Name: reembolsobradescotmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reembolsobradescotmp (
    chave_str character varying(20),
    cbcontrato_id_cbcontrato_int bigint,
    cbcontrato_contrato_str character varying(30),
    cbcontrato_carteira_str character varying(3),
    cbcontrato_conta_str character varying(8),
    cbcontrato_agencia_int bigint,
    data_vencimento_dat date,
    data_lancamento_dat date,
    valor_num double precision,
    cbtipodespesa_codigo_int bigint,
    cbtipodespesa_descricao_str character varying(60),
    data_movimentacao_dat date,
    sequencia_int bigint,
    cbcontrato_nome_str character varying(60)
);

--
-- TOC entry 1496 (class 1259 OID 41309)
-- Name: rege108stmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rege108stmp (
    chave_str character varying(20),
    carteira_str character varying(60),
    tot_env_int double precision,
    tot_ret_int double precision,
    qtd_bol_ger_int double precision,
    val_bol_ger_num double precision,
    qtd_pag_int double precision,
    val_pag_num double precision,
    val_ho__num double precision
);

--
-- TOC entry 1497 (class 1259 OID 41319)
-- Name: rege108tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rege108tmp (
    id_rege108tmp_int bigint DEFAULT nextval(('"rel_sms_seq"'::text)::regclass) NOT NULL,
    chave_str character varying(20),
    id_gecliente_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    data_envio_dat date,
    data_retorno_dat date,
    data_venc_boleto_dat date,
    valor_boleto_num double precision,
    data_pagto_dat date,
    valor_pagto_num double precision,
    honorarios_num double precision,
    faixa_atraso_str character varying(60),
    da_int bigint,
    uf_str character varying(2),
    valor_total_contrato_num double precision,
    id_cbetapa_int bigint,
    desc_etapa_str character varying(60),
    carteira_str character varying(60),
    total_retornados_int bigint,
    total_enviados_int bigint,
    codigo_tn_str character varying(3)
);

--
-- TOC entry 1498 (class 1259 OID 41325)
-- Name: rejuridico_tmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rejuridico_tmp (
    chave_str bigint,
    id_cbcontrato_int bigint,
    id_gecliente_int bigint,
    estado_str character varying(2),
    estado_trabalho_str character varying(2),
    id_cbsituacaocontrato_int bigint,
    id_cbfiatret_int bigint,
    codigo_registro_int bigint
);

--
-- TOC entry 1499 (class 1259 OID 41335)
-- Name: rel_sms_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.rel_sms_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1500 (class 1259 OID 41339)
-- Name: remanutencao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.remanutencao (
    relatorio_str character varying(50) NOT NULL,
    data_dat date NOT NULL
);

--
-- TOC entry 1501 (class 1259 OID 41349)
-- Name: repapeleta; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.repapeleta (
    chave_str character varying(20),
    id_gecliente_int bigint,
    id_cbpagamento_int bigint,
    id_cbparcelapagamento_int bigint,
    valor_total_num double precision,
    valor_repasse_num double precision,
    historico_str character varying(1000)
);

--
-- TOC entry 1502 (class 1259 OID 41359)
-- Name: repl_conf; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.repl_conf (
    ip character varying(15),
    hostname text,
    pgsqlver character varying(8),
    so character varying(30)
);

--
-- TOC entry 1503 (class 1259 OID 41367)
-- Name: repl_hosts; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.repl_hosts (
    ip character varying(15),
    hostname text,
    pg_porta character varying(5),
    banco character varying(10),
    login text,
    senha text,
    atualizado character varying(1),
    tstamp timestamp without time zone
);

--
-- TOC entry 1504 (class 1259 OID 41380)
-- Name: replica_tabelas; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.replica_tabelas (
    replica_tabela_id integer,
    tabela text,
    chave text
);

--
-- TOC entry 1505 (class 1259 OID 41392)
-- Name: represtacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.represtacao (
    chave_str character varying(20),
    id_gecliente_int bigint,
    id_cbpagamento_int bigint,
    id_cbparcelapagamento_int bigint,
    valor_total_num double precision,
    valor_repasse_num double precision,
    observacao_boleto_str character varying(100),
    id_cbbordero_int bigint,
    da_int smallint,
    data_pre_dat date,
    valor_banco_num double precision,
    valor_assessoria_num double precision,
    valor_depesa_num double precision,
    valor_retido_num double precision,
    id_cbtiponegocio_int bigint,
    sequencia_int bigint,
    valor_acordo_num double precision,
    honorarios_acordo_num real,
    comissioanamento_acordo_num real,
    qtde_parcelas_acordo_int integer
);

--
-- TOC entry 1506 (class 1259 OID 41398)
-- Name: represtacao_bradescocrdimob; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.represtacao_bradescocrdimob (
    chave_str character varying(20),
    id_gecliente_int bigint,
    contrato_str character varying(30),
    nome_str character varying(60),
    parcela_int bigint,
    multa_num double precision,
    tipo_baixa_str character varying(20),
    recibo_str character varying(15),
    valor_total_num double precision,
    valor_repasse_num double precision,
    observacao_boleto_str character varying(100),
    data_pagto_dat date,
    data_inicial_dat date,
    data_final_dat date,
    data_vencimento_dat date,
    da_int smallint,
    data_pre_dat date
);

--
-- TOC entry 1507 (class 1259 OID 41406)
-- Name: represtacao_novacao; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.represtacao_novacao (
    chave_str character varying(20),
    id_cbpagamento_int bigint,
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    obs_str character varying(1000)
);

--
-- TOC entry 1508 (class 1259 OID 41415)
-- Name: reselect; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.reselect (
    id_cbcontrato_int bigint,
    produto_str character varying(15),
    vencimento_dat date,
    dias_atraso_str character varying(60),
    uf_str character varying(2),
    da_int bigint,
    banco_str character varying(20),
    principal_num double precision,
    situacao_int bigint
);

--
-- TOC entry 1509 (class 1259 OID 41420)
-- Name: retcartoriobmc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retcartoriobmc (
    tpregistro_int bigint,
    remessa_int bigint,
    dtprocesso_dat date,
    sitprocesso_str character varying(1),
    motivo_str character varying(50),
    cpf_int bigint,
    carteira_int bigint,
    contrato_str character varying(20),
    parcela_int bigint,
    sitnotificacao_str character varying(1),
    obs_str character varying(60),
    geracao_dat date,
    tpmov_str character varying(3),
    notificacao_dat date,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    data_dat date,
    id_gecliente_int bigint
);

--
-- TOC entry 1510 (class 1259 OID 41429)
-- Name: retnotif_fiat; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retnotif_fiat (
    vlr_inicial_str character varying(1),
    ar_str character varying(20),
    contrato_str character varying(30),
    data_ar_dat date,
    data_envio_dat date,
    data_notif_dat date,
    data_retorno_dat date,
    livro_protocolo_str character varying(5),
    livro_registro_str character varying(5),
    notificado_str character varying(1),
    parcela_final_int bigint,
    parcela_inicial_int bigint,
    protocolo_int bigint,
    registro_int bigint,
    tipo_negocio_int bigint
);

--
-- TOC entry 1511 (class 1259 OID 41435)
-- Name: retnotif_honda; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retnotif_honda (
    vlr_inicial_str character varying(1),
    ar_str character varying(20),
    contrato_str character varying(30),
    data_ar_dat date,
    data_envio_dat date,
    data_notif_dat date,
    data_retorno_dat date,
    livro_protocolo_str character varying(5),
    livro_registro_str character varying(5),
    notificado_str character varying(1),
    parcela_final_int bigint,
    parcela_inicial_int bigint,
    protocolo_int bigint,
    registro_int bigint,
    tipo_negocio_int bigint
);

--
-- TOC entry 1512 (class 1259 OID 41438)
-- Name: retornoaudac; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retornoaudac (
    id_cbbordero_int bigint,
    codigo_cli_int bigint,
    contrato_str character varying(20),
    nosso_numero_num character varying(11),
    valor_vista_num double precision,
    valor_plano_um_num double precision,
    valor_plano_dois_num double precision,
    parcelas_plano_um_num character varying(2),
    parcelas_plano_dois_num character varying(2),
    data_vencimento_dat date,
    data_geracao_dat date,
    negociacao_vista_num character varying(7),
    tipo_vista_num character varying(1),
    negociacao_plano_um_num character varying(7),
    tipo_plano_um_num character varying(1),
    negociacao_plano_dois_num character varying(7),
    tipo_plano_dois_num character varying(1),
    faixa_desc_vista_num character varying(1),
    faixa_desc_plano_um_num character varying(1),
    faixa_desc_plano_dois_num character varying(1),
    data_contrato_dat date,
    hora_contrato_tms timestamp with time zone,
    tipo_historico_str character varying(1),
    historico_str character varying(100),
    telefone_contato_str character varying(22),
    nome_contato_str character varying(20),
    tipo_telefone_str character varying(2),
    tipo_pessoa_str character varying(2),
    status_ligacao_str character varying(1),
    deb_parc_orig_str character varying(2),
    deb_dt_referencia_dat date,
    deb_venc_parc_orig_dat date,
    deb_vl_princ_num double precision,
    deb_vl_juros_num double precision,
    deb_vl_multa_num double precision,
    deb_vl_desconto_num double precision,
    deb_vl_desc_juro_num double precision,
    deb_vl_desc_multa_num double precision,
    deb_valor_liq_num double precision,
    deb_cod_autorizacao_str character varying(10),
    parc_num_acordo_str character varying(2),
    parc_total_str character varying(2),
    parc_data_dat date,
    parc_dt_vencimento_dt date,
    parc_data_pagamento_dat date,
    parc_tipo_pagamento_str character varying(1),
    parc_banco_str character varying(3),
    parc_agencia_str character varying(5),
    parc_cheque_str character varying(7),
    parc_vl_princ_num double precision,
    parc_vl_juro_num double precision,
    parc_vl_multa_num double precision,
    parc_vl_desconto_num double precision,
    parc_vl_liquido_num double precision,
    parc_cod_autorizacao_str character varying(10),
    tipo_registro character varying(2),
    numero_acordo_int bigint,
    id_cbcontrato_int bigint
);

--
-- TOC entry 1513 (class 1259 OID 41448)
-- Name: retornocartorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retornocartorio (
    tipo_registro_int bigint,
    contrato_int character varying(30),
    iddespesa_str character varying(40),
    dtnotificacao_dat date,
    numero_ar_str character varying(20),
    dtar_dat date,
    protocolo_int bigint,
    livro_protocolo_str character varying(6),
    registro_int bigint,
    livro_registro_str character varying(6),
    sit_notificacao_str character varying(3),
    dtretnotif_dat date,
    brancos character varying(240),
    seq_registro_int bigint
);

--
-- TOC entry 1514 (class 1259 OID 41455)
-- Name: retornoitaufup; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.retornoitaufup (
    id_retorno_int bigint DEFAULT nextval(('retornoitaufup_seq'::text)::regclass),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    parcela_int bigint,
    sitcontato_int bigint,
    vencimento_dat date,
    tipo_str character varying(1),
    envio_retorno_dat date,
    id_gecliente_int bigint,
    data_evento_dat date
);

--
-- TOC entry 1515 (class 1259 OID 41462)
-- Name: retornoitaufup_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.retornoitaufup_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1516 (class 1259 OID 41468)
-- Name: rollback_desconhece_cliente; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rollback_desconhece_cliente (
    id_geqlcontato_int bigint,
    contato_str character varying(256),
    classificacao_str character varying(15),
    observacao_str character varying(1000)
);

--
-- TOC entry 1517 (class 1259 OID 41477)
-- Name: rpa_filaboletoelevalog; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.rpa_filaboletoelevalog (
    id_logfila_int bigint NOT NULL,
    id_filaboletoeleva_int bigint NOT NULL,
    inserido_date timestamp without time zone,
    evento_str character varying(10),
    metodo_str character varying(50),
    descricao_str text
);

--
-- TOC entry 1518 (class 1259 OID 41497)
-- Name: rpa_filaboletoelevalog_id_logfila_int_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.rpa_filaboletoelevalog_id_logfila_int_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12069 (class 0 OID 0)
-- Dependencies: 1518
-- Name: rpa_filaboletoelevalog_id_logfila_int_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.rpa_filaboletoelevalog_id_logfila_int_seq OWNED BY public.rpa_filaboletoelevalog.id_logfila_int;

--
-- TOC entry 1519 (class 1259 OID 41516)
-- Name: statusitautmp; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.statusitautmp (
    id_gecliente_int bigint,
    data_importacao date,
    nome_arquivo character varying(30),
    status_registro character varying(2),
    empresa_itau character varying(2),
    codigo_operacao character varying(5),
    contrato character varying(15),
    cpf character varying(14),
    nome character varying(30),
    parcela bigint
);

--
-- TOC entry 1520 (class 1259 OID 41524)
-- Name: tamp_diego_14_12_2021; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tamp_diego_14_12_2021 (
    contrato character varying(100)
);

--
-- TOC entry 1521 (class 1259 OID 41531)
-- Name: telefone_bloqueado_improdutivo_final_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.telefone_bloqueado_improdutivo_final_386 (
    carteira bigint,
    telefone character varying(256),
    cpf text,
    id_geqlcontato_int bigint,
    bloqueado_bit bit(1),
    excluido_bit bit(1),
    classificacao_str text,
    observacao_str text,
    id_geqlcliente_int bigint,
    data_inibicao_tel_suspeito_tstamp timestamp without time zone,
    obs_inibicao_tel_suspeito_str text,
    tstamp timestamp(0) without time zone,
    acao text
);

--
-- TOC entry 1522 (class 1259 OID 41546)
-- Name: telefone_bloqueado_improdutivo_full_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.telefone_bloqueado_improdutivo_full_386 (
    contato_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1523 (class 1259 OID 41562)
-- Name: telefone_bloqueado_recorrente_final_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.telefone_bloqueado_recorrente_final_386 (
    carteira bigint,
    telefone character varying(256),
    cpf text,
    id_geqlcontato_int bigint,
    bloqueado_bit bit(1),
    excluido_bit bit(1),
    classificacao_str text,
    observacao_str text,
    id_geqlcliente_int bigint,
    data_inibicao_tel_suspeito_tstamp timestamp without time zone,
    obs_inibicao_tel_suspeito_str text,
    tstamp timestamp(0) without time zone,
    acao text
);

--
-- TOC entry 1524 (class 1259 OID 41576)
-- Name: telefone_bloqueado_recorrente_full_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.telefone_bloqueado_recorrente_full_386 (
    contato_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1525 (class 1259 OID 41593)
-- Name: telefonesuspeitoclassificacoes; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.telefonesuspeitoclassificacoes (
    id_geqlcontato_int bigint,
    data_bloqueio_dat date,
    classificacao_antiga_str character varying(15)
);

--
-- TOC entry 1526 (class 1259 OID 41605)
-- Name: temp_cbobito_full; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_cbobito_full (
    id_cbobito_int bigint NOT NULL,
    cpf character varying(50),
    data_dat date,
    identificador_int character varying(100),
    registro_str character varying(100),
    tstamp timestamp with time zone
);

--
-- TOC entry 1527 (class 1259 OID 41617)
-- Name: temp_telefone_suspeito_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_telefone_suspeito_386 (
    contato_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1528 (class 1259 OID 41635)
-- Name: temp_telefone_suspeito_bloqueados_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_telefone_suspeito_bloqueados_386 (
    carteira bigint,
    telefone character varying(256),
    cpf text,
    id_geqlcontato_int bigint,
    bloqueado_bit bit(1),
    excluido_bit bit(1),
    classificacao_str text,
    observacao_str text,
    id_geqlcliente_int bigint,
    data_inibicao_tel_suspeito_tstamp timestamp without time zone,
    obs_inibicao_tel_suspeito_str text,
    tstamp timestamp(0) without time zone,
    acao text
);

--
-- TOC entry 1529 (class 1259 OID 41651)
-- Name: temp_telefone_suspeito_bloqueados_relatoriofinaldiario_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_telefone_suspeito_bloqueados_relatoriofinaldiario_386 (
    carteira bigint,
    telefone character varying(256),
    cpf text,
    id_geqlcontato_int bigint,
    excluido_bit bit(1),
    bloqueado_bit bit(1),
    classificacao_str character varying(15),
    observacao_str character varying(1000),
    id_geqlcliente_int bigint,
    data_inibicao_tel_suspeito_tstamp timestamp with time zone,
    obs_inibicao_tel_suspeito_str character varying(300),
    tstamp timestamp(0) without time zone
);

--
-- TOC entry 1530 (class 1259 OID 41663)
-- Name: temp_telefone_suspeito_cpc_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_telefone_suspeito_cpc_386 (
    contato_str character varying,
    cpf_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1531 (class 1259 OID 41680)
-- Name: temp_telefone_suspeito_desbloqueados_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_telefone_suspeito_desbloqueados_386 (
    carteira bigint,
    telefone character varying(256),
    cpf character varying(30),
    id_geqlcontato_int bigint,
    bloqueado_bit bit(1),
    excluido_bit bit(1),
    classificacao_str character varying,
    observacao_str character varying(1000),
    id_geqlcliente_int bigint,
    data_inibicao_tel_suspeito_tstamp timestamp without time zone,
    obs_inibicao_tel_suspeito_str text,
    tstamp timestamp(0) without time zone,
    acao text
);

--
-- TOC entry 1532 (class 1259 OID 41693)
-- Name: temp_validacao_score_values_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.temp_validacao_score_values_386 (
    id_geqlcontato_int bigint,
    score_int integer,
    data_score_dat date,
    tstamp_data_score timestamp(0) without time zone
);

--
-- TOC entry 1533 (class 1259 OID 41705)
-- Name: tempacoesdigitaisfull; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempacoesdigitaisfull (
    tempitemborderoacoesdigitais_id_cbitembordero_int bigint,
    tempitemborderoacoesdigitais_id_cbbordero_int bigint,
    tempitemborderoacoesdigitais_id_cbcontrato_int bigint,
    tempitemborderoacoesdigitais_nosso_numero_int character(30),
    tempitemborderoacoesdigitais_comando_str character varying(2),
    tempitemborderoacoesdigitais_id_cbinstrucao1_int bigint,
    tempitemborderoacoesdigitais_id_cbinstrucao2_int bigint,
    tempitemborderoacoesdigitais_valor_desconto_num double precision,
    tempitemborderoacoesdigitais_data_desconto_dat date,
    tempitemborderoacoesdigitais_vencimento_dat date,
    tempitemborderoacoesdigitais_emissao_dat date,
    tempitemborderoacoesdigitais_principal_num double precision,
    tempitemborderoacoesdigitais_cp_num double precision,
    tempitemborderoacoesdigitais_multa_num double precision,
    tempitemborderoacoesdigitais_notificacao_num double precision,
    tempitemborderoacoesdigitais_despesa_banco_num double precision,
    tempitemborderoacoesdigitais_desconto_num double precision,
    tempitemborderoacoesdigitais_abatimento_num double precision,
    tempitemborderoacoesdigitais_juros_mora_num double precision,
    tempitemborderoacoesdigitais_honorarios_num double precision,
    tempitemborderoacoesdigitais_comissionamento_num double precision,
    tempitemborderoacoesdigitais_valor_total_num double precision,
    tempitemborderoacoesdigitais_retido_num double precision,
    tempitemborderoacoesdigitais_destino_str character varying(100),
    tempitemborderoacoesdigitais_boleto_int smallint,
    tempitemborderoacoesdigitais_nosso_numero_str character varying(30),
    tempitemborderoacoesdigitais_linha_digitavel_str character varying(60),
    tempitemborderoacoesdigitais_cod_barra_str character varying(200),
    tempitemborderoacoesdigitais_barra_str text,
    tempitemborderoacoesdigitais_dv_int character varying(3),
    tempitemborderoacoesdigitais_id_geusuario_int bigint,
    tempitemborderoacoesdigitais_timestamp timestamp with time zone,
    tempitemborderoacoesdigitais_instrucao_1_str character varying(40),
    tempitemborderoacoesdigitais_instrucao_2_str character varying(40),
    tempitemborderoacoesdigitais_parcelamento_str character varying(7),
    tempitemborderoacoesdigitais_pago_str character varying(1),
    tempitemborderoacoesdigitais_acrescimo_num double precision,
    tempitemborderoacoesdigitais_id_geusuario_boleto_int bigint,
    tempitemborderoacoesdigitais_acrescimo_np_num double precision,
    tempitemborderoacoesdigitais_acordo_int bigint,
    tempitemborderoacoesdigitais_quitacao_str character varying(1),
    tempitemborderoacoesdigitais_data_boleto_dat date,
    tempitemborderoacoesdigitais_hora_boleto_tim timestamp with time zone,
    tempitemborderoacoesdigitais_observacao_boleto_str character varying(100),
    tempitemborderoacoesdigitais_tipo_destino_str character varying(1),
    tempitemborderoacoesdigitais_boleto_gravacao_tim timestamp without time zone,
    tempitemborderoacoesdigitais_perc_desc_num double precision,
    tempitemborderoacoesdigitais_principal_original_num double precision,
    tempitemborderoacoesdigitais_boleto_parcelamento_str character varying(3),
    tempitemborderoacoesdigitais_id_geqlcontato_int bigint,
    tempitemborderoacoesdigitais_id_geqlendereco_int bigint,
    tempitemborderoacoesdigitais_cp_original_num double precision,
    tempitemborderoacoesdigitais_desconto_original_num double precision,
    tempitemborderoacoesdigitais_acordo_formalizado_int bigint,
    tempitemborderoacoesdigitais_id_gecidade_int bigint,
    tempitemborderoacoesdigitais_data_envio_dat date,
    tempitemborderoacoesdigitais_data_reenvio_dat date,
    tempitemborderoacoesdigitais_arquivo_terc_str character varying(60),
    tempitemborderoacoesdigitais_tipo_geracao_str character varying(2),
    tempitemborderoacoesdigitais_tstamp timestamp without time zone,
    tempitemborderoacoesdigitais_envio_jpg_str character varying(1),
    tempitemborderoacoesdigitais_pc_ho_num double precision,
    tempitemborderoacoesdigitais_pc_comissionamento_num double precision,
    tempitemborderoacoesdigitais_tstamp_mdm_inclusao timestamp(0) without time zone,
    tempitemborderoacoesdigitais_tstamp_mdm_alteracao timestamp(0) without time zone,
    tempitemborderoacoesdigitais_id_boletoeleva_str character varying,
    tempitemborderoacoesdigitais_id_ref_cbitembordero_old_int bigint,
    tempitemborderoacoesdigitais_origem_ws_int integer,
    cbbordero_id_cbbordero_int bigint,
    cbbordero_id_geempresa_int bigint,
    cbbordero_id_gefilial_int bigint,
    cbbordero_id_gecliente_int bigint,
    cbbordero_bordero_int bigint,
    cbbordero_data_dat date,
    cbbordero_id_fibanco_int bigint,
    cbbordero_id_ficcbanco_int bigint,
    cbbordero_situacao_int integer,
    cbbordero_total_num double precision,
    cbbordero_id_cbtipopagamento_int bigint,
    cbbordero_itens_int bigint,
    cbbordero_arquivo_str character varying(60),
    cbbordero_carteira_int integer,
    cbbordero_id_cbtiponegocio_int bigint,
    cbbordero_gerado_str character varying(1),
    cbbordero_followup_str character varying(1),
    cbbordero_modelo_carta_int smallint,
    cbbordero_tipo_nosso_numero_int smallint,
    cbbordero_repete_contrato_str character varying(1),
    cbbordero_id_geusuario_int bigint,
    cbbordero_timestamp timestamp with time zone,
    cbbordero_quitacao_str character varying(1),
    cbbordero_id_cbconvenio_int bigint,
    cbbordero_tipo_bordero_str character varying(1),
    cbbordero_origem_str character varying(1),
    cbbordero_tstamp timestamp without time zone,
    cbbordero_id_geusuario_execut_int bigint,
    cbcontratoeleva_id_cbcontrato_int bigint,
    cbcontratoeleva_id_gecliente_int bigint,
    cbcontratoeleva_id_cbtiponegocio_int bigint,
    cbcontratoeleva_id_cbdistribuidorcliente_int bigint,
    cbcontratoeleva_contrato_str character varying(30),
    cbcontratoeleva_codigo_concessionaria_str character varying(7),
    cbcontratoeleva_nome_concessionaria_str character varying(30),
    cbcontratoeleva_nome_str character varying(60),
    cbcontratoeleva_cpf_str character varying(20),
    cbcontratoeleva_rg_str character varying(20),
    cbcontratoeleva_org_exp_rg_str character varying(3),
    cbcontratoeleva_dt_exp_rg_dat date,
    cbcontratoeleva_uf_rg_str character varying(2),
    cbcontratoeleva_dt_nascimento_dat date,
    cbcontratoeleva_cidade_nascimento_str character varying(30),
    cbcontratoeleva_pai_str character varying(60),
    cbcontratoeleva_mae_str character varying(60),
    cbcontratoeleva_endereco_str character varying(60),
    cbcontratoeleva_complemento_str character varying(60),
    cbcontratoeleva_bairro_str character varying(40),
    cbcontratoeleva_cep_str character varying(10),
    cbcontratoeleva_cidade_str character varying(30),
    cbcontratoeleva_estado_str character varying(2),
    cbcontratoeleva_ddd_str character varying(5),
    cbcontratoeleva_telefone_str character varying(20),
    cbcontratoeleva_ramal_str character varying(5),
    cbcontratoeleva_ddd_cel_str character varying(5),
    cbcontratoeleva_telefone_cel_str character varying(20),
    cbcontratoeleva_ddd_fax_str character varying(5),
    cbcontratoeleva_telefone_fax_str character varying(20),
    cbcontratoeleva_local_trabalho_str character varying(60),
    cbcontratoeleva_profissao_str character varying(40),
    cbcontratoeleva_endereco_trabalho_str character varying(60),
    cbcontratoeleva_bairro_trabalho_str character varying(30),
    cbcontratoeleva_cep_trabalho_str character varying(10),
    cbcontratoeleva_cidade_trabalho_str character varying(30),
    cbcontratoeleva_estado_trabalho_str character varying(2),
    cbcontratoeleva_ddd_trabalho_str character varying(5),
    cbcontratoeleva_telefone_trabalho_str character varying(20),
    cbcontratoeleva_ramal_trabalho_str character varying(5),
    cbcontratoeleva_salario_num double precision,
    cbcontratoeleva_tipo_pessoa_str character varying(1),
    cbcontratoeleva_estado_civil_str character varying(1),
    cbcontratoeleva_nome_conjuge_str character varying(60),
    cbcontratoeleva_nome_avalista1_str character varying(60),
    cbcontratoeleva_cpf_avalista1_str character varying(20),
    cbcontratoeleva_endereco_avalista1_str character varying(60),
    cbcontratoeleva_bairro_avalista1_str character varying(30),
    cbcontratoeleva_cidade_avalista1_str character varying(30),
    cbcontratoeleva_estado_avalista1_str character varying(2),
    cbcontratoeleva_cep_avalista1_str character varying(10),
    cbcontratoeleva_ddd_avalista1_str character varying(5),
    cbcontratoeleva_fone_avalista1_str character varying(20),
    cbcontratoeleva_local_trab_avalista1_str character varying(40),
    cbcontratoeleva_endereco_trab_avalista1_str character varying(60),
    cbcontratoeleva_bairro_trab_avalista1_str character varying(30),
    cbcontratoeleva_cidade_trab_avalista1_str character varying(30),
    cbcontratoeleva_estado_trab_avalista1_str character varying(2),
    cbcontratoeleva_cep_trab_avalista1_str character varying(10),
    cbcontratoeleva_ddd_trab_avalista1_str character varying(5),
    cbcontratoeleva_fone_trab_avalista1_str character varying(20),
    cbcontratoeleva_ramal_trab_avalista1_str character varying(5),
    cbcontratoeleva_ddd_fax_avalista1_str character varying(5),
    cbcontratoeleva_fax_avalista1_str character varying(20),
    cbcontratoeleva_tipo_pessoa_avalista1_str character varying(1),
    cbcontratoeleva_nome_avalista2_str character varying(60),
    cbcontratoeleva_cpf_avalista2_str character varying(20),
    cbcontratoeleva_endereco_avalista2_str character varying(60),
    cbcontratoeleva_bairro_avalista2_str character varying(30),
    cbcontratoeleva_cidade_avalista2_str character varying(30),
    cbcontratoeleva_estado_avalista2_str character varying(2),
    cbcontratoeleva_cep_avalista2_str character varying(10),
    cbcontratoeleva_ddd_avalista2_str character varying(5),
    cbcontratoeleva_fone_avalista2_str character varying(20),
    cbcontratoeleva_local_trab_avalista2_str character varying(40),
    cbcontratoeleva_endereco_trab_avalista2_str character varying(60),
    cbcontratoeleva_bairro_trab_avalista2_str character varying(30),
    cbcontratoeleva_cidade_trab_avalista2_str character varying(30),
    cbcontratoeleva_estado_trab_avalista2_str character varying(2),
    cbcontratoeleva_cep_trab_avalista2_str character varying(10),
    cbcontratoeleva_ddd_trab_avalista2_str character varying(5),
    cbcontratoeleva_fone_trab_avalista2_str character varying(20),
    cbcontratoeleva_ramal_trab_avalista2_str character varying(5),
    cbcontratoeleva_ddd_fax_avalista2_str character varying(5),
    cbcontratoeleva_fax_avalista2_str character varying(20),
    cbcontratoeleva_tipo_pessoa_avalista2_str character varying(1),
    cbcontratoeleva_produto_str character varying(30),
    cbcontratoeleva_marca_str character varying(30),
    cbcontratoeleva_modelo_str character varying(30),
    cbcontratoeleva_cor_str character varying(25),
    cbcontratoeleva_ano_str character varying(5),
    cbcontratoeleva_chassis_str character varying(25),
    cbcontratoeleva_placa_str character varying(8),
    cbcontratoeleva_combustivel_str character varying(1),
    cbcontratoeleva_numero_dut_str character varying(16),
    cbcontratoeleva_renavam_str character varying(10),
    cbcontratoeleva_numero_total_parcelas_int integer,
    cbcontratoeleva_data_contrato_dat date,
    cbcontratoeleva_dias_atraso_ult_parc_int integer,
    cbcontratoeleva_valor_montante_num double precision,
    cbcontratoeleva_comissao_perm_num double precision,
    cbcontratoeleva_prazo_solucao_dat date,
    cbcontratoeleva_id_fimoeda_int bigint,
    cbcontratoeleva_despesas_finan_num double precision,
    cbcontratoeleva_id_cbsituacaocontrato_int bigint,
    cbcontratoeleva_data_stand_by_dat date,
    cbcontratoeleva_data_contato_dat date,
    cbcontratoeleva_data_primeira_distrib_dat date,
    cbcontratoeleva_data_ultima_distrib_dat date,
    cbcontratoeleva_notificacao_str character varying(1),
    cbcontratoeleva_protesto_str character varying(1),
    cbcontratoeleva_documento_str character varying(1),
    cbcontratoeleva_alterado_edi_str character varying(1),
    cbcontratoeleva_id_gefilial_int bigint,
    cbcontratoeleva_obs_banco_txt text,
    cbcontratoeleva_obs_pasc_txt text,
    cbcontratoeleva_id_geusuario_int bigint,
    cbcontratoeleva_tstamp timestamp with time zone,
    cbcontratoeleva_id_geempresa_int bigint,
    cbcontratoeleva_observacao_str text,
    cbcontratoeleva_sexo_str character varying(1),
    cbcontratoeleva_id_cbetapa_int bigint,
    cbcontratoeleva_email_str character varying(50),
    cbcontratoeleva_data_envio_dat date,
    cbcontratoeleva_data_notificacao_dat date,
    cbcontratoeleva_data_protesto_dat date,
    cbcontratoeleva_data_recebimento_dat date,
    cbcontratoeleva_data_solicitacao_dat date,
    cbcontratoeleva_id_gefilial_ajuiz_int bigint,
    cbcontratoeleva_id_gemotivonaoajuizamento_int bigint,
    cbcontratoeleva_taxa_juridico_num double precision,
    cbcontratoeleva_grupo_str character varying(10),
    cbcontratoeleva_cota_str character varying(10),
    cbcontratoeleva_provisionamento_dat date,
    cbcontratoeleva_flag_pdd character varying(1),
    cbcontratoeleva_data_ar_dat date,
    cbcontratoeleva_vl_cdesc_avista_num double precision,
    cbcontratoeleva_perc_maxdesc_num double precision,
    cbcontratoeleva_liberacao_dat date,
    cbcontratoeleva_data_ajuizamento_dat date,
    cbcontratoeleva_envio_tratamento timestamp with time zone,
    cbcontratoeleva_retorno_tratamento_dat date,
    cbcontratoeleva_solicitacao_tratamento_tmz timestamp with time zone,
    cbcontratoeleva_conclusao_tratamento_tmz timestamp with time zone,
    cbcontratoeleva_status_tratamento_str character varying(1),
    cbcontratoeleva_data_devolucao_documento_dat date,
    cbcontratoeleva_lote_str character varying(20),
    cbcontratoeleva_data_ult_evento_dat date,
    cbcontratoeleva_cliente_localizado_bit bit(1),
    cbcontratoeleva_id_gebancoevento_int bigint,
    cbcontratoeleva_id_gebancofase_int bigint,
    cbcontratoeleva_data_localizado_dat date,
    cbcontratoeleva_id_esbancoeventos_int bigint,
    cbcontratoeleva_id_esbancofases_int bigint,
    cbcontratoeleva_ultima_situacao_str character varying(2),
    cbcontratoeleva_data_base_dat date,
    cbcontratoeleva_trava_gestor_str character varying(1),
    cbcontratoeleva_ultimo_id_cbsitcontato_int bigint,
    cbcontratoeleva_ultima_data_contato_dat date,
    cbcontratoeleva_ultimo_contato_manual_data_dat date,
    cbcontratoeleva_ultimo_contato_manual_id_cbsitcontato_int integer,
    cbcontratoeleva_cobranca_piloto_str character varying(1),
    cbcontratoeleva_cod_cc character varying(30),
    cbcontratoeleva_dsc_cc character varying(60),
    cbcontratoeleva_dsc_fam_prod character varying(60),
    cbcontratoeleva_dsc_fx_atraso character varying(40),
    cbcontratoeleva_dsc_fx_principal character varying(40),
    cbcontratoeleva_dsc_fx_sld_dev character varying(40),
    cbcontratoeleva_dsc_status character varying(30),
    cbcontratoeleva_dsc_regua character varying(60),
    cbcontratoeleva_dsc_sit_parcela character varying(30),
    cbcontratoeleva_dt_venc_parc date,
    cbcontratoeleva_num_parcela bigint,
    cbcontratoeleva_vlr_sld_dev double precision,
    cbcontratoeleva_vlr_principal double precision,
    cbcontratoeleva_vlr_tot_res double precision,
    cbcontratoeleva_qtde_parcelas bigint,
    cbcontratoeleva_tstampbi timestamp without time zone,
    cbcontratoeleva_codigo_loja_str character varying(5),
    cbcontratoeleva_nome_loja_str character varying(30),
    cbcontratoeleva_codigo_cobradora_str character varying(4),
    cbcontratoeleva_rg_avalista1_str character varying(10),
    cbcontratoeleva_dt_nascimento_avalista1_dat date,
    cbcontratoeleva_contrato_original_str character varying(30),
    cbcontratoeleva_numero_placa_str character varying(10),
    cbcontratoeleva_data_devolucao_dat date,
    cbcontratoeleva_complemento_trabalho_str character varying(20),
    cbcontratoeleva_dia_medio_pgto_int bigint,
    cbcontratoeleva_cod_cliente_str character varying(10),
    cbcontratoeleva_nome_func_str character varying(60),
    cbcontratoeleva_cod_func_str character varying(10),
    cbcontratoeleva_cod_filial_str character varying(10),
    cbcontratoeleva_descricao_filial_str character varying(60),
    cbcontratoeleva_cod_faturamento_str character varying(10),
    cbcontratoeleva_descricao_faturamento_str character varying(60),
    cbcontratoeleva_cobranca_str character varying(100),
    cbcontratoeleva_batimento_str character varying(1),
    cbcontratoeleva_contato_loja_str character varying(20),
    cbcontratoeleva_cidade_loja_str character varying(60),
    cbcontratoeleva_estado_loja_str character varying(2),
    cbcontratoeleva_contato_loja_adm_str character varying(60),
    cbcontratoeleva_tipo_str character varying(10),
    cbcontratoeleva_id_geterceiro_int integer,
    cbcontratoeleva_pasta_str character varying(40),
    cbcontratoeleva_tipo_acao_str character varying(40),
    cbcontratoeleva_numero_processo_str character varying(40),
    cbcontratoeleva_data_operacao_dat date,
    cbcontratoeleva_acao_indenizatoria_str character varying(10),
    cbcontratoeleva_nome_orgao_str character varying(10),
    cbcontratoeleva_nome_advogado_contrario_str character varying(10),
    cbcontratoeleva_codigo_operacao_str character varying(10),
    cbcontratoeleva_endereco_not_str character varying(100),
    cbcontratoeleva_complemento_not_str character varying(60),
    cbcontratoeleva_bairro_not_str character varying(60),
    cbcontratoeleva_cep_not_str character varying(10),
    cbcontratoeleva_cidade_not_str character varying(60),
    cbcontratoeleva_estado_not_str character varying(2),
    cbcontratoeleva_fonte_score_str character varying(50),
    cbcontratoeleva_score_str character varying(50),
    cbcontratoeleva_black_list_ouvidoria_int integer,
    cbcontratoeleva_ddd_adicional_str character varying(3),
    cbcontratoeleva_telefone_adicional_str character varying(20),
    cbcontratoeleva_tstamp_mdm_inclusao timestamp(0) without time zone,
    cbcontratoeleva_tstamp_mdm_alteracao timestamp(0) without time zone,
    cbcontratoeleva_data_obito_dat date,
    cbcontratoeleva_nome_fantasia_devedor_str character varying,
    geusuario_id_geusuario_int bigint,
    geusuario_codigo_str character varying(7),
    geusuario_nomecompleto_str character varying(60),
    geusuario_ativo_str character varying(1),
    geusuario_nomelogin_str character varying(20),
    geusuario_senha_str character varying(20),
    geusuario_usuarioadm_str character varying(1),
    geusuario_id_geempresa_int bigint,
    geusuario_id_gefilial_int bigint,
    geusuario_automatico_str character varying(1),
    geusuario_usuario_int bigint,
    geusuario_tstamp timestamp with time zone,
    geusuario_qtde_fup_int bigint,
    geusuario_usuario_externo_str character varying(1),
    geusuario_recebe_email_str character varying(1),
    geusuario_observacao_str text,
    geusuario_email_str character varying(60),
    geusuario_sit_contrato_str character varying(32),
    geusuario_admissao_dat date,
    geusuario_funcao_str character varying(120),
    geusuario_data_nasc_dat date,
    geusuario_controla_ramal_str character varying(1),
    geusuario_escolaridade_str character varying(100),
    geusuario_id_gedepartamento_int bigint,
    geusuario_agenda_str character varying(1),
    geusuario_fila_automatica_str character varying(1),
    geusuario_cpf_str character varying(14),
    geusuario_sincronizangs_str character varying(1),
    geusuario_apenas_cb002_new2_str character varying(1),
    geusuario_discagem_manual_str character varying(1),
    geusuario_id_getipousuario_int integer,
    geusuario_codigo_rh_str character varying(10),
    geusuario_codigo_externo_str character varying(10),
    geusuario_id_geatuacao01_int integer,
    geusuario_id_geatuacao02_int integer,
    geusuario_id_geatuacao03_int integer,
    geusuario_id_geclassificacaocontao_int integer,
    geusuario_anotacao_txt text,
    geusuario_tstamp_ultimo_logou_npcob timestamp without time zone,
    geusuario_normalizado_bi_str character varying(1),
    geusuario_controla_softphone_str character varying(1),
    geusuario_login_alpheratz_str character varying(20),
    geusuario_id_sysfuncionario_int bigint,
    geusuario_id_sysusuario_int bigint,
    geusuario_genero_int integer,
    geusuario_situacao_ci_int integer,
    geusuario_loginbanco_str character varying(20),
    geusuario_senhabanco_str character varying(20),
    geusuario_campanha_obrigatoria_str character varying(1),
    geusuario_situacao_ci_1_int integer,
    geusuario_supervisor_experiencia_bit bit(1),
    geusuario_tstamp_mdm_inclusao timestamp(0) without time zone,
    geusuario_tstamp_mdm_alteracao timestamp(0) without time zone,
    geusuario_funcao_old_str character varying(120),
    geusuario_consultordigital_str character varying(1),
    geqlcliente_id_geqlcliente_int bigint,
    geqlcliente_cpf_str character varying(30),
    geqlcliente_rg_str character varying(15),
    geqlcliente_org_exp_str character varying(15),
    geqlcliente_uf_rg_str character varying(2),
    geqlcliente_data_exp_dat date,
    geqlcliente_nome_str character varying(60),
    geqlcliente_id_geusuario_int bigint,
    geqlcliente_tstamp timestamp with time zone,
    geqlcliente_observacao_str character varying(1000),
    geqlcliente_ccf_int smallint,
    geqlcliente_cpf_provisorio_bit bit(1),
    geqlcliente_id_pessoa_int bigint,
    tempfollowallacoesdigitais_id_cbfollowup_int bigint,
    tempfollowallacoesdigitais_id_cbcontrato_int bigint,
    tempfollowallacoesdigitais_id_cbparcela_int bigint,
    tempfollowallacoesdigitais_data_dat date,
    tempfollowallacoesdigitais_historico_str character varying(1000),
    tempfollowallacoesdigitais_id_geusuario_int bigint,
    tempfollowallacoesdigitais_coloca_stand_str character varying(1),
    tempfollowallacoesdigitais_data_stand_by_dat date,
    tempfollowallacoesdigitais_id_cbsitcontato_int bigint,
    tempfollowallacoesdigitais_alterado_str character varying(1),
    tempfollowallacoesdigitais_data_cobranca_dat date,
    tempfollowallacoesdigitais_hora_cobranca_tim timestamp with time zone,
    tempfollowallacoesdigitais_hora_tim timestamp with time zone,
    tempfollowallacoesdigitais_tstamp timestamp with time zone,
    tempfollowallacoesdigitais_tipo_contato_str character varying(1),
    tempfollowallacoesdigitais_status_registro_str character varying(2),
    tempfollowallacoesdigitais_data_evento_dat date,
    tempfollowallacoesdigitais_cobranca_inicio_tim timestamp with time zone,
    tempfollowallacoesdigitais_cobranca_final_tim timestamp with time zone,
    tempfollowallacoesdigitais_id_geqlcontato_int bigint,
    tempfollowallacoesdigitais_call_key_str character varying(60),
    tempfollowallacoesdigitais_instancia_str character varying(20),
    tempfollowallacoesdigitais_tempo_ligacao_tim time without time zone,
    tempfollowallacoesdigitais_tstamp_mdm_inclusao timestamp(0) without time zone,
    tempfollowallacoesdigitais_tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 1534 (class 1259 OID 41722)
-- Name: tempblocklist; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklist (
    cpf_str character varying(20),
    telefone_str character varying(20),
    databloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    tstamp_blocklist timestamp(0) without time zone,
    classificacao_antiga_str character varying(30),
    classificacao_nova_str character varying(30),
    rodou_bln boolean DEFAULT false
);

--
-- TOC entry 1535 (class 1259 OID 41736)
-- Name: tempblocklist386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklist386 (
    cpf_str character varying(20),
    telefone_str character varying(20),
    databloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20),
    rodou_bln boolean DEFAULT false
);

--
-- TOC entry 1536 (class 1259 OID 41750)
-- Name: tempblocklistfinal; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistfinal (
    id_geqlcontato_int bigint,
    databloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(15),
    classificacao_nova_str character varying(30),
    rodou_bln boolean
);

--
-- TOC entry 1537 (class 1259 OID 41763)
-- Name: tempblocklistfinal386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistfinal386 (
    id_geqlcontato_int bigint,
    databloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(15),
    classificacao_nova_str character varying(20),
    rodou_bln boolean
);

--
-- TOC entry 1538 (class 1259 OID 41779)
-- Name: tempblocklistlote; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistlote (
    id_geqlcontato_int bigint,
    datebloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20)
);

--
-- TOC entry 1539 (class 1259 OID 41787)
-- Name: tempblocklistlote386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistlote386 (
    id_geqlcontato_int bigint,
    datebloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20)
);

--
-- TOC entry 1540 (class 1259 OID 41800)
-- Name: tempblocklistlotebloquear; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistlotebloquear (
    id_geqlcontato_int bigint,
    datebloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20)
);

--
-- TOC entry 1541 (class 1259 OID 41814)
-- Name: tempblocklistlotebloquear386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistlotebloquear386 (
    id_geqlcontato_int bigint,
    datebloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20)
);

--
-- TOC entry 1542 (class 1259 OID 41825)
-- Name: tempblocklistlotedesbloquear; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistlotedesbloquear (
    id_geqlcontato_int bigint,
    datebloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20)
);

--
-- TOC entry 1543 (class 1259 OID 41837)
-- Name: tempblocklistlotedesbloquear386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempblocklistlotedesbloquear386 (
    id_geqlcontato_int bigint,
    datebloqueio_dat date,
    status_char character varying(2),
    bloqueio_def_int integer,
    classificacao_antiga_str character varying(20),
    classificacao_nova_str character varying(20)
);

--
-- TOC entry 1544 (class 1259 OID 41848)
-- Name: tempbloqueadosblocklistdesccli; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempbloqueadosblocklistdesccli (
    contato_str character varying(20),
    cpf_str character varying(20),
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1545 (class 1259 OID 41864)
-- Name: tempbloqueadostelsuspeito; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempbloqueadostelsuspeito (
    contato_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1546 (class 1259 OID 41881)
-- Name: tempcpfcarteira; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempcpfcarteira (
    cpf character varying
);

--
-- TOC entry 1547 (class 1259 OID 41898)
-- Name: tempdesbloqueadosblocklistdesccli; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempdesbloqueadosblocklistdesccli (
    contato_str character varying,
    tstamp timestamp(0) without time zone DEFAULT CURRENT_TIMESTAMP
);

--
-- TOC entry 1548 (class 1259 OID 41914)
-- Name: tempfollowallacoesdigitais; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempfollowallacoesdigitais (
    id_cbfollowup_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    data_dat date,
    historico_str character varying(1000),
    id_geusuario_int bigint,
    coloca_stand_str character varying(1),
    data_stand_by_dat date,
    id_cbsitcontato_int bigint,
    alterado_str character varying(1),
    data_cobranca_dat date,
    hora_cobranca_tim timestamp with time zone,
    hora_tim timestamp with time zone,
    tstamp timestamp with time zone,
    tipo_contato_str character varying(1),
    status_registro_str character varying(2),
    data_evento_dat date,
    cobranca_inicio_tim timestamp with time zone,
    cobranca_final_tim timestamp with time zone,
    id_geqlcontato_int bigint,
    call_key_str character varying(60),
    instancia_str character varying(20),
    tempo_ligacao_tim time without time zone,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone
);

--
-- TOC entry 1549 (class 1259 OID 41925)
-- Name: tempgeqlcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempgeqlcontato (
    cpf_str character varying,
    telefone_str character varying,
    geqltipocontato_str character varying
);

--
-- TOC entry 1550 (class 1259 OID 41940)
-- Name: tempitemborderoacoesdigitais; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempitemborderoacoesdigitais (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    nosso_numero_int character(30),
    comando_str character varying(2),
    id_cbinstrucao1_int bigint,
    id_cbinstrucao2_int bigint,
    valor_desconto_num double precision,
    data_desconto_dat date,
    vencimento_dat date,
    emissao_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    destino_str character varying(100),
    boleto_int smallint,
    nosso_numero_str character varying(30),
    linha_digitavel_str character varying(60),
    cod_barra_str character varying(200),
    barra_str text,
    dv_int character varying(3),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    instrucao_1_str character varying(40),
    instrucao_2_str character varying(40),
    parcelamento_str character varying(7),
    pago_str character varying(1),
    acrescimo_num double precision,
    id_geusuario_boleto_int bigint,
    acrescimo_np_num double precision,
    acordo_int bigint,
    quitacao_str character varying(1),
    data_boleto_dat date,
    hora_boleto_tim timestamp with time zone,
    observacao_boleto_str character varying(100),
    tipo_destino_str character varying(1),
    boleto_gravacao_tim timestamp without time zone,
    perc_desc_num double precision,
    principal_original_num double precision,
    boleto_parcelamento_str character varying(3),
    id_geqlcontato_int bigint,
    id_geqlendereco_int bigint,
    cp_original_num double precision,
    desconto_original_num double precision,
    acordo_formalizado_int bigint,
    id_gecidade_int bigint,
    data_envio_dat date,
    data_reenvio_dat date,
    arquivo_terc_str character varying(60),
    tipo_geracao_str character varying(2),
    tstamp timestamp without time zone,
    envio_jpg_str character varying(1),
    pc_ho_num double precision,
    pc_comissionamento_num double precision,
    tstamp_mdm_inclusao timestamp(0) without time zone,
    tstamp_mdm_alteracao timestamp(0) without time zone,
    id_boletoeleva_str character varying,
    id_ref_cbitembordero_old_int bigint,
    origem_ws_int integer
);

--
-- TOC entry 1551 (class 1259 OID 41952)
-- Name: tempscore; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscore (
    cpf_str character varying,
    telefone_str character varying,
    score_int integer,
    data_score_dat date,
    datahora_execucao timestamp without time zone,
    rodou_bln boolean DEFAULT false
);

--
-- TOC entry 1552 (class 1259 OID 41969)
-- Name: tempscorefinal; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscorefinal (
    id_geqlcontato_int bigint,
    score_int integer,
    data_score_dat date,
    rodou_bln boolean
);

--
-- TOC entry 1553 (class 1259 OID 41981)
-- Name: tempscorefinal_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscorefinal_386 (
    cpf character varying,
    telefone character varying,
    pontos integer,
    data_score date,
    datahora_execucao timestamp without time zone,
    id_geqlcontato_int bigint
);

--
-- TOC entry 1554 (class 1259 OID 41995)
-- Name: tempscorefinal_completa_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscorefinal_completa_386 (
    cpf character varying,
    telefone character varying,
    pontos integer,
    data_score date,
    datahora_execucao timestamp without time zone,
    id_geqlcontato_int bigint
);

--
-- TOC entry 1555 (class 1259 OID 42009)
-- Name: tempscorefull_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscorefull_386 (
    cpf character varying,
    telefone character varying,
    pontos integer,
    data_score date,
    datahora_execucao timestamp without time zone
);

--
-- TOC entry 1556 (class 1259 OID 42022)
-- Name: tempscorefull_completa_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscorefull_completa_386 (
    cpf character varying,
    telefone character varying,
    pontos integer,
    data_score date,
    datahora_execucao timestamp without time zone
);

--
-- TOC entry 1557 (class 1259 OID 42047)
-- Name: tempscorelote; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tempscorelote (
    id_geqlcontato_int bigint,
    score_int integer,
    data_score_dat date
);

--
-- TOC entry 1558 (class 1259 OID 42050)
-- Name: test; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.test (
    y integer,
    x xml
);

--
-- TOC entry 1559 (class 1259 OID 42062)
-- Name: teste_casdt; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.teste_casdt (
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    id_esregua_int integer,
    data_vencimento_dat date,
    valor_principal_num double precision,
    tipo_str text,
    valor_original_documento_num double precision,
    valor_abatimento_num double precision,
    valor_custa_protesto_num double precision,
    cpf_cnpj_grupo_economico_str character varying(255),
    codigo_credor_str character varying(255),
    razao_social_credor_str character varying(255),
    tipo_documento_str character varying(255),
    produto_str character varying(255),
    segmento_str character varying(255),
    numero_unico_str character varying(255),
    observacao_str character varying(255),
    info_adicional_1_str character varying(255),
    info_adicional_2_str character varying(255),
    info_adicional_3_str character varying(255),
    info_adicional_4_str character varying(255),
    info_adicional_5_str character varying(255),
    info_adicional_6_str character varying(255),
    info_adicional_7_str character varying(255),
    info_adicional_8_str character varying(255),
    info_adicional_9_str character varying(255),
    info_adicional_10_str character varying(255),
    info_adicional_11_str character varying(255),
    info_adicional_12_str character varying(255),
    info_adicional_13_str character varying(255),
    info_adicional_14_str character varying(255),
    info_adicional_15_str character varying(255),
    info_adicional_16_str character varying(255),
    info_adicional_17_str character varying(255),
    info_adicional_18_str character varying(255),
    desconto_minimo_a_aplicar_str character varying(255),
    desconto_maximo_a_aplicar_str character varying(255),
    juros_a_aplicar_ao_mes_prorata_dia_str character varying(255),
    multa_a_aplicar_str character varying(255),
    situacao_int integer,
    data_primeira_distrib_dat date,
    data_ultima_distrib_dat date,
    id_geusuario_int integer,
    tstamp timestamp with time zone,
    parcela_int integer,
    inclui_altera_parcela text
);

--
-- TOC entry 1560 (class 1259 OID 42076)
-- Name: teste_cbitembordero_10_101_41_100_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.teste_cbitembordero_10_101_41_100_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    retido_num double precision,
    bordero_int bigint,
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 1561 (class 1259 OID 42087)
-- Name: teste_cbitembordero_10_101_41_55_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.teste_cbitembordero_10_101_41_55_32 (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    id_geusuario_boleto_int bigint,
    valor_total_num double precision,
    acordo_int bigint,
    nosso_numero_str character varying(30),
    parcelamento_str character varying(7),
    emissao_dat date,
    boleto_gravacao_tim timestamp without time zone,
    vencimento_dat date,
    pago_str character varying(1),
    honorarios_num double precision,
    comissionamento_num double precision,
    retido_num double precision,
    bordero_int bigint,
    tipo_bordero_str character varying(1),
    id_gecliente_int bigint,
    id_gefilial_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbsituacaocontrato_int bigint,
    contrato_str character varying(30),
    cpf_str character varying(20),
    nome_str character varying(60),
    cidade_str character varying(30),
    estado_str character varying(2),
    numero_total_parcelas_int integer,
    data_primeira_distrib_dat date
);

--
-- TOC entry 1562 (class 1259 OID 42096)
-- Name: tmp_cbitembordero_vw; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmp_cbitembordero_vw (
    id_cbitembordero_int bigint,
    id_cbbordero_int bigint,
    id_cbcontrato_int bigint,
    nosso_numero_int character(30),
    comando_str character varying(2),
    id_cbinstrucao1_int bigint,
    id_cbinstrucao2_int bigint,
    valor_desconto_num double precision,
    data_desconto_dat date,
    vencimento_dat date,
    emissao_dat date,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    destino_str character varying(100),
    boleto_int smallint,
    nosso_numero_str character varying(30),
    linha_digitavel_str character varying(60),
    cod_barra_str character varying(200),
    barra_str text,
    dv_int character varying(3),
    id_geusuario_int bigint,
    "timestamp" timestamp with time zone,
    instrucao_1_str character varying(40),
    instrucao_2_str character varying(40),
    parcelamento_str character varying(7),
    pago_str character varying(1),
    acrescimo_num double precision,
    id_geusuario_boleto_int bigint,
    acrescimo_np_num double precision,
    acordo_int bigint,
    quitacao_str character varying(1),
    data_boleto_dat date,
    hora_boleto_tim timestamp with time zone,
    observacao_boleto_str character varying(100),
    tipo_destino_str character varying(1),
    boleto_gravacao_tim timestamp without time zone,
    perc_desc_num double precision,
    principal_original_num double precision,
    boleto_parcelamento_str character varying(3),
    id_geqlcontato_int bigint,
    id_geqlendereco_int bigint,
    cp_original_num double precision,
    desconto_original_num double precision,
    acordo_formalizado_int bigint,
    id_gecidade_int bigint,
    data_envio_dat date,
    data_reenvio_dat date,
    arquivo_terc_str character varying(60),
    tipo_geracao_str character varying(2),
    tstamp timestamp without time zone,
    envio_jpg_str character varying(1)
);

--
-- TOC entry 1563 (class 1259 OID 42105)
-- Name: tmp_geqlcontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmp_geqlcontato (
    cpf_str character varying(30),
    contato_str character varying(256),
    geqltipocontato_str character varying(10),
    score_int integer,
    data_score_dat date
);

--
-- TOC entry 1564 (class 1259 OID 42108)
-- Name: tmp_logistica_reversa_1_10_101_41_197_32; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmp_logistica_reversa_1_10_101_41_197_32 (
    id_cbitemborderoretorno_int bigint,
    id_cbitembordero_int bigint,
    status_envio_str character varying(2),
    descricao_critica_str character varying(531),
    data_dat date,
    id_geusuario_int bigint,
    tela_str character varying,
    endereco_str character varying(100),
    complemento_str character varying(60),
    bairro_str character varying(60),
    cep_str character varying(10),
    cidade_str character varying(60),
    estado_str character varying(2)
);

--
-- TOC entry 1565 (class 1259 OID 42120)
-- Name: tmp_pj010; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmp_pj010 (
    tpn character varying(50),
    contrato character varying(30),
    cpf character varying(18),
    nome character varying(80),
    id_getipodocumento_int bigint,
    documento character varying(80),
    grupo character varying(32),
    email character varying(255)
);

--
-- TOC entry 1566 (class 1259 OID 42129)
-- Name: tmp_wellington; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmp_wellington (
    contrato_str character varying
);

--
-- TOC entry 1567 (class 1259 OID 42135)
-- Name: tmpacertaclicontato; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpacertaclicontato (
    id_geqlcontato_int bigint,
    carteira_origem integer
);

--
-- TOC entry 1568 (class 1259 OID 42140)
-- Name: tmpacertacliemail; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpacertacliemail (
    id_geqlemail_int bigint,
    carteira_origem integer
);

--
-- TOC entry 1569 (class 1259 OID 42145)
-- Name: tmpbatimentocredibel_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.tmpbatimentocredibel_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1570 (class 1259 OID 42154)
-- Name: tmpbatimentocredibel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpbatimentocredibel (
    contrato_str character varying(30),
    parcela_int smallint,
    envio_dat date,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    situacao_int smallint,
    id_cbsituacaocontrato_int integer,
    status_str character(30),
    data_pagamento_dat date,
    novo_status character varying(60),
    id_ bigint DEFAULT nextval('public.tmpbatimentocredibel_seq'::regclass)
);

--
-- TOC entry 1571 (class 1259 OID 42159)
-- Name: tmpblboletagem; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpblboletagem (
    id_tmpblboletagem_int bigint DEFAULT nextval(('"tmpboletagem_seq"'::text)::regclass) NOT NULL,
    chave_str character varying(30),
    id_cbblconfiguracaoitem_int integer,
    id_cbblbase_int integer,
    id_cbcontrato_int bigint,
    total_original_num double precision,
    entrada_num double precision,
    parcela_num double precision,
    valor_desconto_num double precision,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    perc_desc_num double precision,
    principal_original_num double precision,
    cp_original_num double precision,
    desconto_original_num double precision,
    parcelas_int smallint,
    chave_calculo_sauc_str character varying(60),
    comissionamento_parcelado_num double precision
);

--
-- TOC entry 1572 (class 1259 OID 42166)
-- Name: tmpblboletagem_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.tmpblboletagem_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1573 (class 1259 OID 42170)
-- Name: tmpblboletagemparcela; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpblboletagemparcela (
    id_tmpblboletagem_int bigint,
    chave_str character varying(30),
    id_cbparcela_int bigint,
    total_original_num double precision,
    entrada_num double precision,
    parcela_num double precision,
    valor_desconto_num double precision,
    principal_num double precision,
    cp_num double precision,
    multa_num double precision,
    notificacao_num double precision,
    despesa_banco_num double precision,
    desconto_num double precision,
    abatimento_num double precision,
    juros_mora_num double precision,
    honorarios_num double precision,
    comissionamento_num double precision,
    valor_total_num double precision,
    retido_num double precision,
    acrescimo_num double precision,
    acrescimo_np_num double precision,
    perc_desc_num double precision,
    principal_original_num double precision,
    cp_original_num double precision,
    desconto_original_num double precision,
    data_vencimento_dat date,
    data_arquivo_dat date,
    comissionamento_parcelado_num double precision
);

--
-- TOC entry 1574 (class 1259 OID 42175)
-- Name: tmpblcalculosauc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpblcalculosauc (
    chave_str character varying(20),
    id_calculosauc bigint NOT NULL,
    id_cbcontrato bigint NOT NULL,
    id_cbparcela bigint NOT NULL,
    tipo_registro integer,
    status character varying(1),
    valor_principal double precision,
    vencimento_primeiro date,
    data_base_pgto date,
    valor_total double precision,
    total_devedor double precision,
    total_parcelas integer,
    taxa_desconto double precision,
    num_parcelas integer,
    valor_entrada double precision,
    valor_parcelas double precision,
    chave_validacao character varying(60),
    critica text,
    saldo_devedor double precision,
    desconto double precision,
    perc_desconto double precision,
    valor_atualizado double precision,
    comissionamento_parcelado_num double precision,
    comissionamento_num double precision,
    pc_comis_vista_num double precision,
    pc_comis_prazo_num double precision
);

--
-- TOC entry 1575 (class 1259 OID 42186)
-- Name: tmpcredibelbaixa; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpcredibelbaixa (
    id_cbparcela_int integer,
    contrato_str character varying(30),
    parcela_int smallint,
    data_vencimento_dat date,
    dias_int integer
);

--
-- TOC entry 1576 (class 1259 OID 42191)
-- Name: tmpdespesacalculo_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.tmpdespesacalculo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1577 (class 1259 OID 42195)
-- Name: tmpes120select; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpes120select (
    chave_str character varying(30),
    contrato_str character varying(30)
);

--
-- TOC entry 1578 (class 1259 OID 42198)
-- Name: tmpfollowsretornoasm_386; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpfollowsretornoasm_386 (
    id_retornoasm_int bigint,
    codprocessamento bigint,
    idtn bigint,
    id character varying,
    telefone character varying(40),
    statustelefonia bigint,
    datahoratelefonia timestamp without time zone,
    nomecampanha character varying(40),
    inseriufollowup bit(1),
    tstamp bigint,
    ip_str character varying(50),
    base_str character varying(50),
    followsegmentado bigint,
    id_geusuariofup_int bigint,
    id_cbsitcontato_int bigint,
    historico_str text,
    data_hora text,
    data text
);

--
-- TOC entry 1579 (class 1259 OID 42208)
-- Name: tmpgestorvirtual; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpgestorvirtual (
    id_gecliente_int integer,
    contrato character varying(30),
    cpf character varying(30),
    nome character varying(60),
    email character varying(300),
    email_classificacao character varying(20),
    celular character varying(30),
    celular_classificacao character varying(20),
    endereco character varying(300),
    classificacao_endereco character varying(20),
    data_distribuicao date,
    localizado_carteiras character varying(60),
    primeira_vez character varying(1),
    media_dia_pagamento integer,
    valor_principal double precision,
    media_valor_pagamento double precision,
    qtde_pagamento integer,
    desconto_concedido_pagamento double precision,
    desconto_previsto double precision,
    destino_ultimo_boleto_pago character varying(30),
    prazo_solucao_contrato date,
    data_ultimo_pagamento date,
    quantidade_acionamentos_positivo_antes_pagamento integer,
    quantidade_acionamentos_positivo_apos_pagamento integer,
    nivel smallint,
    acao character varying(60),
    id_cbcontrato_int bigint,
    id_cbpagamento_int bigint,
    id_geqlcliente_int bigint
);

--
-- TOC entry 1580 (class 1259 OID 42213)
-- Name: tmpgestorvirtual70; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpgestorvirtual70 (
    id_gecliente_int integer,
    contrato character varying(30),
    cpf character varying(30),
    nome character varying(60),
    email character varying(300),
    email_classificacao character varying(20),
    celular character varying(30),
    celular_classificacao character varying(20),
    endereco character varying(300),
    classificacao_endereco character varying(20),
    data_distribuicao date,
    localizado_carteiras character varying(60),
    primeira_vez character varying(1),
    media_dia_pagamento integer,
    valor_principal double precision,
    media_valor_pagamento double precision,
    qtde_pagamento integer,
    desconto_concedido_pagamento double precision,
    desconto_previsto double precision,
    destino_ultimo_boleto_pago character varying(30),
    prazo_solucao_contrato date,
    data_ultimo_pagamento date,
    quantidade_acionamentos_positivo_antes_pagamento integer,
    quantidade_acionamentos_positivo_apos_pagamento integer,
    nivel smallint,
    acao character varying(60),
    id_cbcontrato_int bigint,
    id_cbpagamento_int bigint,
    id_geqlcliente_int bigint
);

--
-- TOC entry 1581 (class 1259 OID 42216)
-- Name: tmpgestorvirtual70select; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpgestorvirtual70select (
    cpf character varying(30)
);

--
-- TOC entry 1582 (class 1259 OID 42222)
-- Name: tmpgestorvirtual8; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpgestorvirtual8 (
    id_gecliente_int integer,
    contrato character varying(30),
    cpf character varying(30),
    nome character varying(60),
    email character varying(300),
    email_classificacao character varying(20),
    celular character varying(30),
    celular_classificacao character varying(20),
    endereco character varying(300),
    classificacao_endereco character varying(20),
    data_distribuicao date,
    localizado_carteiras character varying(60),
    primeira_vez character varying(1),
    media_dia_pagamento integer,
    valor_principal double precision,
    media_valor_pagamento double precision,
    qtde_pagamento integer,
    desconto_concedido_pagamento double precision,
    desconto_previsto double precision,
    destino_ultimo_boleto_pago character varying(30),
    prazo_solucao_contrato date,
    data_ultimo_pagamento date,
    quantidade_acionamentos_positivo_antes_pagamento integer,
    quantidade_acionamentos_positivo_apos_pagamento integer,
    nivel smallint,
    acao character varying(60),
    id_cbcontrato_int bigint,
    id_cbpagamento_int bigint,
    id_geqlcliente_int bigint
);

--
-- TOC entry 1583 (class 1259 OID 42227)
-- Name: tmpgestorvirtual8select; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpgestorvirtual8select (
    cpf character varying(30)
);

--
-- TOC entry 1584 (class 1259 OID 42230)
-- Name: tmpgestorvirtualselect; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpgestorvirtualselect (
    cpf character varying(30)
);

--
-- TOC entry 1585 (class 1259 OID 42236)
-- Name: tmpj002_calc; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpj002_calc (
    chave_str character varying(30),
    id_cbparcela_int bigint,
    id_cbcontrato_int bigint,
    data_vencimento_dat date,
    principal_num real,
    cp_num real,
    multa_num real,
    notificacao_num real,
    despesa_banco_num real,
    desconto_num real,
    abatimento_num real,
    juros_mora_num real,
    honorarios_num real,
    comissionamento_num real,
    valor_total_num real,
    retido_num real,
    selecionado_int bigint,
    id_geusuario_int bigint,
    tstamp timestamp without time zone,
    acrescimo_num real,
    acrescimo_np_num real,
    percentual_desconto_num real,
    valor_parcela_num real,
    cp_original_num real,
    desconto_original_num real
);

--
-- TOC entry 1586 (class 1259 OID 42246)
-- Name: tmpjcg; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpjcg (
    id_cbcontrato_int bigint,
    cpf_str character varying(30)
);

--
-- TOC entry 1587 (class 1259 OID 42253)
-- Name: tmpmapeamentobaseitau; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpmapeamentobaseitau (
    cpf character varying(30)
);

--
-- TOC entry 1588 (class 1259 OID 42262)
-- Name: tmpmapfreendereco; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpmapfreendereco (
    cpf character varying(30),
    tipo character varying(20),
    endereco character varying(120),
    bairro character varying(120),
    cidade character varying(120),
    cep character varying(20),
    estado character varying(2),
    complemento character varying(120),
    score character varying(1),
    id_geqlcliente_int integer,
    id_geqltipoendereco_int integer,
    id_geqlendereco_int integer,
    id_cbcontrato_int bigint,
    id_cbetapa_int integer,
    nome character varying(60),
    classificacao character varying(30),
    contrato_str character varying(30)
);

--
-- TOC entry 1589 (class 1259 OID 42271)
-- Name: tmppagtos; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmppagtos (
    id_cbpagamento_int bigint,
    id_cbcontrato_int bigint,
    id_cbbordero_int bigint,
    acordo_int bigint,
    parcelamento_str character varying(7)
);

--
-- TOC entry 1590 (class 1259 OID 42274)
-- Name: tmppccredibel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmppccredibel (
    chave_str character varying(20),
    cod_assessoria_str character varying(3),
    cod_historico_str character varying(3),
    contrato_str character varying(15),
    data_bordero_dat date,
    data_geracao_dat date,
    data_pagamento_dat date,
    data_vencimento_dat date,
    empresa_str character varying(20),
    honorarios_num double precision,
    hora_geracao_tim timestamp without time zone,
    local_recebimento_str character varying(5),
    mora_num double precision,
    multa_num double precision,
    nome_cliente_str character varying(30),
    nome_operador_str character varying(20),
    notificacao_num double precision,
    operacao_str character varying(2),
    parcela_int integer,
    sequencia_int integer,
    tipo_arquivo_int integer,
    tipo_registro_int integer,
    total_baixa_num double precision,
    total_registro_int integer,
    total_vl_comissao_num double precision,
    total_vl_despesa1_num double precision,
    total_vl_despesa2_num double precision,
    total_vl_mora_num double precision,
    total_vl_multa_num double precision,
    total_vl_notificacao_num double precision,
    total_vl_parcela_num double precision,
    total_vl_recebido_num double precision,
    total_vl_total_baixa_num double precision,
    tp_despesa1_str character varying(3),
    tp_despesa2_str character varying(3),
    valor_despesa1_num double precision,
    valor_despesa2_num double precision,
    valor_parcela_num double precision,
    valor_recebido_num double precision
);

--
-- TOC entry 1591 (class 1259 OID 42279)
-- Name: tmpprestacaocredibel_novo; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpprestacaocredibel_novo (
    chave_str character varying(25),
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    cod_financeiro character varying(3),
    cod_pos_venda character varying(3),
    cod_recebedor character varying(5),
    contrato character varying(20),
    data_baixa date,
    data_gravacao date,
    data_remessa date,
    identificacao_arq character varying(22),
    num_parcela bigint,
    seq bigint,
    tipo_baixa character varying(1),
    tipo_movimento character varying(2),
    tipo_registro character varying(1),
    valor_baixa double precision,
    seq_total bigint,
    hora_geracao character varying(6),
    data_bordero date,
    nome_cli character varying(60),
    data_vencimento date,
    valor_parcela double precision,
    cod_historico character varying(3),
    local_receb character varying(5),
    valor_recebido double precision,
    mora double precision,
    multa double precision,
    notif double precision,
    honorario_assessoria double precision,
    tipo_despesa character varying(3),
    valor_despesa double precision,
    operador character varying(60),
    tot_reg double precision,
    tot_vl_recebido double precision,
    tot_vl_principal double precision,
    tot_vl_mora double precision,
    tot_vl_multa double precision,
    tot_vl_notif double precision,
    tot_vl_hon double precision,
    tot_vl_desp1 double precision,
    tot_vl_desp2 double precision,
    tot_vl_baixa double precision
);

--
-- TOC entry 1592 (class 1259 OID 42284)
-- Name: tmprelnpjurnpcob; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmprelnpjurnpcob (
    chave_str character varying(20),
    id_gecliente_int bigint,
    id_cbcontrato_int bigint,
    tipo_negocio_str character varying(50),
    contrato_str character varying(30),
    nome_str character varying(60),
    banco_str character varying(30),
    sitcontrato_antiga_str character varying(50),
    sitcontrato_nova_str character varying(50)
);

--
-- TOC entry 1593 (class 1259 OID 42291)
-- Name: tmpremessacartorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpremessacartorio (
    tipo_registro_int smallint,
    contrato_str character varying(30),
    data_contrato_dat date,
    cli_nome_str character varying(40),
    cli_endereco_str character varying(100),
    cli_complemento_str character varying(20),
    cli_cidade_str character varying(100),
    cli_uf_str character varying(2),
    cli_cep_str character varying(10),
    cli_bairro_str character varying(100),
    cli_cpf_str character varying(14),
    empr_nome_str character varying(40),
    empr_endereco_str character varying(60),
    empr_complemento_str character varying(20),
    empr_cidade_str character varying(30),
    empr_uf_str character varying(2),
    empr_cep_str character varying(8),
    empr_telefone_str character varying(20),
    empr_bairro_str character varying(40),
    empr_fax_str character varying(20),
    empr_cnpj_str character varying(14),
    codigo_divida_str character varying(6),
    id_esdespesa_int bigint,
    fil_codigo_str character varying(7),
    fil_nome_str character varying(40),
    fil_endereco_str character varying(50),
    fil_bairro_str character varying(40),
    fil_cep_str character varying(8),
    fil_cidade_str character varying(30),
    fil_uf_str character varying(2),
    fil_telefone_str character varying(14),
    tipo_parcela_int character varying(1),
    parcela_int bigint,
    valor_comissao_num double precision,
    valor_multa_num double precision,
    data_vencimento_dat date,
    valor_principal_num double precision,
    data_despesa_dat date,
    valor_percentual_num double precision,
    chave_str character varying(40),
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    id_cbdistribuidorcliente_int bigint,
    id_cbcontrato_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbdespesa_int bigint,
    nome_codigodivida_str character varying(40),
    fil_fax_str character varying(14),
    id_cbparcela_int bigint,
    tipo_contrato_str character varying(20),
    direct_codigo_str character varying(6),
    direct_nome_str character varying(30),
    empr_codigo_str character varying(7),
    numero_documento_str character varying(15),
    valor_documento_num double precision,
    mensagem_str character varying(120),
    contrato_int bigint,
    registro_int bigint,
    cli_tiponegocio_str character varying(30),
    parcela_inicial_int integer,
    parcela_final_int integer,
    plano_int integer,
    valor_parcela_num double precision,
    vencimento_parcela_inicial_dat date,
    vencimento_parcela_final_dat date,
    nome_cedente_str character varying(30),
    apolice_str character varying(30),
    linha_digitavel_str character varying(60),
    cli_email_str character varying(50),
    cli_endereco2_str character varying(100),
    cli_complemento2_str character varying(20),
    cli_uf2_str character varying(2),
    cli_cep2_str character varying(10),
    cli_email2_str character varying(50),
    cli_endereco3_str character varying(100),
    cli_complemento3_str character varying(20),
    cli_cep3_str character varying(10),
    cli_uf3_str character varying(2),
    cli_email3_str character varying(50),
    cli_bairro2_str character varying(60),
    cli_cidade2_str character varying(60),
    cli_bairro3_str character varying(60),
    cli_cidade3_str character varying(60),
    neg_razao_str character varying(50),
    neg_cnpj_str character varying(50),
    neg_endereco_str character varying(80),
    neg_bairro_str character varying(60),
    neg_cidade_str character varying(60),
    neg_estado_str character varying(2),
    neg_cep_str character varying(10),
    neg_descricao_str character varying(40),
    cli_telefone_str character varying(10),
    filial_banco_origem_str character varying(40),
    vencimentos_str character varying(40),
    valor_montante_num double precision,
    id_cbetapa_int bigint,
    id_cbitembordero_int bigint
);

--
-- TOC entry 1594 (class 1259 OID 42297)
-- Name: tmpremessacredibel_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.tmpremessacredibel_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 1595 (class 1259 OID 42301)
-- Name: tmpremessacredibel; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpremessacredibel (
    linha integer,
    tipo_registro integer,
    avalista_bairro character varying(25),
    avalista_cep character varying(8),
    avalista_cidade character varying(25),
    codigo_contrato_original character varying(25),
    avalista_cpf character varying(14),
    avalista_endereco character varying(50),
    avalista_nascimento date,
    avalista_nome character varying(40),
    avalista_rg character varying(10),
    avalista_telefone character varying(13),
    avalista_uf character varying(2),
    bem_ano character varying(4),
    bem_cor character varying(10),
    bem_marca character varying(20),
    bem_modelo character varying(20),
    bem_placa character varying(10),
    brancos character varying(1000),
    cheque_agencia character varying(5),
    cheque_banco integer,
    codigo_backoffice character varying(2),
    cheque_conta character varying(20),
    cheque_nr_comp integer,
    cheque_numero integer,
    codigo_cobradora integer,
    codigo_contrato character varying(15),
    codigo_loja integer,
    codigo_produto integer,
    delimitador character varying(1),
    data_final date,
    data_inicial date,
    data_sistema date,
    devedor_bairro character varying(25),
    devedor_cep character varying(8),
    devedor_cidade character varying(25),
    devedor_cpf character varying(14),
    devedor_endereco character varying(50),
    devedor_estado_civil character varying(1),
    devedor_nascimento date,
    devedor_nome character varying(40),
    devedor_rg character varying(10),
    devedor_telefone character varying(13),
    devedor_uf character varying(2),
    empresa_bairro character varying(25),
    empresa_cargo character varying(25),
    empresa_cep character varying(8),
    empresa_cidade character varying(25),
    empresa_endereco character varying(50),
    empresa_nome character varying(40),
    empresa_telefone character varying(13),
    empresa_uf character varying(2),
    nome_loja character varying(30),
    numero_parcela integer,
    quantidade_parcelas integer,
    saldo_parcela double precision,
    sequencial integer,
    situacao_parcela integer,
    valor_multa double precision,
    valor_parcela double precision,
    vencimento_contrato date,
    vencimento_parcela date,
    inclui_altera character varying(1),
    inclui_altera_parcela character varying(1),
    promotora_codigo character varying(6),
    promotora_descricao character varying(20),
    cpf_str character varying(14),
    id_cbparcela_int bigint,
    parcela_int bigint,
    situacao_int smallint,
    id_cbdistribuidorcliente_int bigint,
    id_fimoeda_int bigint,
    id_gecliente_int bigint,
    id_cbtiponegocio_int bigint,
    id_cbetapa_int bigint,
    id_cbcontrato_int bigint,
    contrato_str character varying(30),
    rg_str character varying(30),
    org_exp_rg_str character varying(1),
    dt_exp_rg_dat date,
    uf_rg_str character varying(2),
    nome_str character varying(60),
    nome_referencia1 character varying(25),
    ddd_referencia1 integer,
    telefone_referencia1 character varying(15),
    nome_referencia2 character varying(25),
    ddd_referencia2 integer,
    telefone_referencia2 character varying(15),
    chassi character varying(20),
    renavam character varying(10),
    pai character varying(40),
    mae character varying(40),
    id_esregua_int bigint,
    cpf_original character varying(30),
    _id bigint DEFAULT nextval('public.tmpremessacredibel_seq'::regclass),
    tipo_parcela integer
);

--
-- TOC entry 1596 (class 1259 OID 42314)
-- Name: tmpremessafibra; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpremessafibra (
    tipo_registro integer,
    operacao integer,
    literal_remessa character varying(7),
    codigo_servico integer,
    literal_servico character varying(15),
    codigo_empresa bigint,
    brancos text,
    nome_empresa character varying(30),
    codigo_banco integer,
    nome_banco character varying(15),
    data_geracao date,
    sequencial bigint,
    codigo_inscricao integer,
    codigo_inscricao_sacado integer,
    numero_inscricao bigint,
    numero_inscricao_sacado bigint,
    uso_empresa character varying(25),
    nosso_numero bigint,
    qtde_moeda double precision,
    uso_banco character varying(24),
    carteira character varying(1),
    cod_ocorrencia integer,
    seu_numero character varying(10),
    vencimento character varying(6),
    valor_titulo double precision,
    agencia_cobradora integer,
    dac_agencia_cobradora integer,
    especie character varying(2),
    aceite character varying(1),
    data_emissao character varying(6),
    instrucao_1 integer,
    instrucao_2 integer,
    juros double precision,
    desnto_ate bigint,
    valor_desconto double precision,
    valor_iof double precision,
    abatimento double precision,
    nome character varying(30),
    logradouro character varying(40),
    bairro character varying(12),
    cep bigint,
    cidade character varying(15),
    estado character varying(2),
    sacador_avalista character varying(30),
    data_mora character varying(6),
    prazo integer,
    codigo_moeda integer,
    zero integer,
    mensagem_1 character varying(69),
    mensagem_2 character varying(69),
    mensagem_3 character varying(69),
    mensagem_4 character varying(69),
    mensagem_5 character varying(69),
    chave_str character varying(20),
    dv_int integer
);

--
-- TOC entry 1597 (class 1259 OID 42324)
-- Name: tmpretornocartorio; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpretornocartorio (
    tipo_registro_int smallint,
    contrato_str character varying(30),
    id_despesa_int bigint,
    data_notif_dat date,
    data_ar_dat date,
    protocolo_int bigint,
    livro_protocolo_str character varying(6),
    registro_int bigint,
    livro_registro_str character varying(6),
    situacao_notificacao_str character varying(3),
    data_retorno_dat date,
    parcela_int bigint,
    observacao_str character varying(60),
    cpf_str character varying(14),
    carteira_int smallint,
    id_geusuario_int bigint,
    id_gecliente_int bigint,
    tstamp timestamp without time zone,
    brancos character varying(240),
    seq_registro_int bigint,
    numero_ar_int character varying(60),
    erro_str character varying(200),
    cliente_str character varying(40),
    empresa_str character varying(40),
    cod_empresa_int bigint,
    id_cbcontrato_int bigint,
    id_cbparcela_int bigint,
    chave_str character varying(40),
    id_esdocfisico_int bigint,
    processado_int smallint,
    via_postagem_int integer,
    data_venc_parcela_dat date,
    numero_selo_str character varying(8)
);

--
-- TOC entry 1598 (class 1259 OID 42329)
-- Name: tmpvwdns; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.tmpvwdns (
    nome character varying(10) NOT NULL,
    ip_servidor character varying(20) NOT NULL
);

--
-- TOC entry 1599 (class 1259 OID 42333)
-- Name: vatuacao01; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vatuacao01 AS
 SELECT geatuacao01.id_geatuacao01_int AS idatuacao,
    geatuacao01.codigo_int AS codigo,
    geatuacao01.id_gecliente_int AS idcliente,
    geatuacao01.id_carteira_int AS idcarteira,
    upper((geatuacao01.descricao_str)::text) AS descricao,
    geatuacao01.status_int AS status
   FROM public.geatuacao01
  ORDER BY geatuacao01.descricao_str;

--
-- TOC entry 1600 (class 1259 OID 42341)
-- Name: vatuacao02; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vatuacao02 AS
 SELECT geatuacao02.id_geatuacao02_int AS idatuacao,
    geatuacao02.codigo_int AS codigo,
    geatuacao02.id_gecliente_int AS idcliente,
    geatuacao02.id_carteira_int AS idcarteira,
    upper((geatuacao02.descricao_str)::text) AS descricao,
    geatuacao02.status_int AS status
   FROM public.geatuacao02
  ORDER BY geatuacao02.descricao_str;

--
-- TOC entry 1601 (class 1259 OID 42350)
-- Name: vatuacao03; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vatuacao03 AS
 SELECT geatuacao03.id_geatuacao03_int AS idatuacao,
    geatuacao03.codigo_int AS codigo,
    geatuacao03.id_gecliente_int AS idcliente,
    geatuacao03.id_carteira_int AS idcarteira,
    upper((geatuacao03.descricao_str)::text) AS descricao,
    geatuacao03.status_int AS status
   FROM public.geatuacao03
  ORDER BY geatuacao03.descricao_str;

--
-- TOC entry 1602 (class 1259 OID 42360)
-- Name: vclogtable; Type: TABLE; Schema: public; Owner: -
--

CREATE TABLE public.vclogtable (
    id integer NOT NULL,
    dataexecucao timestamp without time zone,
    baseconectada character varying,
    schemacorrente character varying,
    usuariologado character varying,
    ipdousuario character varying,
    queryexecutada text
);

--
-- TOC entry 1603 (class 1259 OID 42366)
-- Name: vclogtable_id_seq; Type: SEQUENCE; Schema: public; Owner: -
--

CREATE SEQUENCE public.vclogtable_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;

--
-- TOC entry 12070 (class 0 OID 0)
-- Dependencies: 1603
-- Name: vclogtable_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: -
--

ALTER SEQUENCE public.vclogtable_id_seq OWNED BY public.vclogtable.id;

--
-- TOC entry 1604 (class 1259 OID 42374)
-- Name: vetapa; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vetapa AS
 SELECT cbetapa.id_cbetapa_int AS idetapa,
    cbetapa.id_gecliente_int AS idcliente,
    upper((cbetapa.descricao_str)::text) AS descricao
   FROM public.cbetapa
  ORDER BY cbetapa.descricao_str;

--
-- TOC entry 1605 (class 1259 OID 42381)
-- Name: vgrupocomissao; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vgrupocomissao AS
 SELECT geclassificacaocontato.id_geclassificacaocontato_int AS idgrupocomissao,
    geclassificacaocontato.codigo_int AS codigo,
    geclassificacaocontato.id_gecliente_int AS idcliente,
    geclassificacaocontato.id_carteira_int AS idcarteira,
    upper((geclassificacaocontato.descricao_str)::text) AS descricao,
    geclassificacaocontato.status_int AS status
   FROM public.geclassificacaocontato
  ORDER BY geclassificacaocontato.descricao_str;

--
-- TOC entry 1606 (class 1259 OID 42385)
-- Name: view_estoque; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_estoque AS
 SELECT t.id_gecliente_int AS carteira,
    t.codigo_str AS tiponegocio,
    p.numero_unico_str AS numero_contrato,
    c.contrato_str AS numerocontrato,
    c.cpf_str AS cpf,
    s.descricao_str AS situacaocontrato,
    s.codigo_str AS codigocontrato,
    c.nome_str AS nomecliente,
    p.parcela_int AS numeroparcela,
    p.nome_produto_str AS produto,
    p.data_vencimento_dat AS vencimento,
    p.situacao_int AS situacaoparcela,
    e.descricao_str AS etapa,
    re.descricao_str AS regua,
    p.data_ultima_distrib_dat AS dtultimadistrib,
        CASE
            WHEN ((( SELECT en1.estado_str
               FROM public.geqlendereco en1
              WHERE ((en1.id_geqlcliente_int = ge.id_geqlcliente_int) AND ((en1.excluido_bit)::text = '0'::text))
              ORDER BY en1.classificacao_str
             LIMIT 1) IS NULL) OR ((( SELECT en1.estado_str
               FROM public.geqlendereco en1
              WHERE ((en1.id_geqlcliente_int = ge.id_geqlcliente_int) AND ((en1.excluido_bit)::text = '0'::text))
              ORDER BY en1.classificacao_str
             LIMIT 1))::text = ''::text)) THEN c.estado_str
            ELSE ( SELECT en1.estado_str
               FROM public.geqlendereco en1
              WHERE (en1.id_geqlcliente_int = ge.id_geqlcliente_int)
              ORDER BY en1.classificacao_str
             LIMIT 1)
        END AS estado,
        CASE
            WHEN ((( SELECT en.cidade_str
               FROM public.geqlendereco en
              WHERE ((en.id_geqlcliente_int = ge.id_geqlcliente_int) AND ((en.excluido_bit)::text = '0'::text))
              ORDER BY en.classificacao_str
             LIMIT 1) IS NULL) OR ((( SELECT en.cidade_str
               FROM public.geqlendereco en
              WHERE ((en.id_geqlcliente_int = ge.id_geqlcliente_int) AND ((en.excluido_bit)::text = '0'::text))
              ORDER BY en.classificacao_str
             LIMIT 1))::text = ''::text)) THEN ((c.cidade_str)::text)::character varying
            ELSE ( SELECT en.cidade_str
               FROM public.geqlendereco en
              WHERE (en.id_geqlcliente_int = ge.id_geqlcliente_int)
              ORDER BY en.classificacao_str
             LIMIT 1)
        END AS cidade,
    p.data_limite_retorno_dat AS dtlimiteretorno,
    p.nome_portador_str AS negativacao,
    p.desc_indice_str AS campanha,
    p.saldo_maximo_num AS valormaximo,
    g.nome_str AS filial,
    d.data_pre_distrib_dat AS predistrib
   FROM (((((((((public.cbcontratocredibel c
     LEFT JOIN public.cbparcela p ON ((c.id_cbcontrato_int = p.id_cbcontrato_int)))
     LEFT JOIN public.gefilial g ON ((g.id_gefilial_int = c.id_gefilial_int)))
     LEFT JOIN public.geuf u ON ((upper((c.estado_str)::text) = (u.uf_str)::text)))
     LEFT JOIN public.esregua re ON ((re.id_esregua_int = p.id_esregua_int)))
     JOIN public.cbsituacaocontrato s ON ((s.id_cbsituacaocontrato_int = c.id_cbsituacaocontrato_int)))
     JOIN public.cbtiponegocio t ON ((t.id_cbtiponegocio_int = c.id_cbtiponegocio_int)))
     LEFT JOIN public.cbetapa e ON ((e.id_cbetapa_int = c.id_cbetapa_int)))
     LEFT JOIN public.geqlcontrato ge ON ((ge.id_cbcontrato_int = c.id_cbcontrato_int)))
     LEFT JOIN public.cbdistribparcela d ON ((p.id_cbparcela_int = d.id_cbparcela_int)));

--
-- TOC entry 1607 (class 1259 OID 42396)
-- Name: view_estoque_eleva_re155; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_estoque_eleva_re155 AS
 SELECT DISTINCT ON (c.contrato_str) c.contrato_str AS contrato,
    c.estado_str AS estado,
    u.regiao_str AS regiao,
    p.data_vencimento_dat AS vencimento,
    (('now'::text)::date - p.data_vencimento_dat) AS da,
    p.valor_principal_num AS valor_principal,
    ( SELECT sum(p1.valor_principal_num) AS sum
           FROM public.cbparcela p1
          WHERE ((p1.id_cbcontrato_int = c.id_cbcontrato_int) AND (p1.situacao_int <> ALL (ARRAY[4, 6])))) AS salto_total_contrato,
    c.produto_str AS produto,
    p.parcela_int AS numero_parcela,
    c.numero_total_parcelas_int AS total_parcelas,
    c.nome_str AS nome,
    c.cpf_str AS cpf,
    c.data_primeira_distrib_dat AS primeira_distribuicao,
    c.data_ultima_distrib_dat AS ultima_distribuicao,
    t.codigo_str AS tpn,
    re.codigo_int AS regua,
    p.contrato_int AS cartao,
    p.numero_unico_str AS conta_cartao,
    p.data_pagamento_dat AS data_pgto,
    e.codigo_str AS etapa,
    ''::text AS data_ultimo_followup,
    s.codigo_str AS situacao_contrato,
    p.info_adicional_11_str AS info_escola,
    p.info_adicional_8_str AS ano_letivo
   FROM ((((((public.cbcontratoeleva c
     LEFT JOIN public.cbparcela p ON ((c.id_cbcontrato_int = p.id_cbcontrato_int)))
     LEFT JOIN public.geuf u ON ((upper((c.estado_str)::text) = (u.uf_str)::text)))
     LEFT JOIN public.esregua re ON ((re.id_esregua_int = p.id_esregua_int)))
     JOIN public.cbsituacaocontrato s ON ((s.id_cbsituacaocontrato_int = c.id_cbsituacaocontrato_int)))
     JOIN public.cbtiponegocio t ON ((t.id_cbtiponegocio_int = c.id_cbtiponegocio_int)))
     LEFT JOIN public.cbetapa e ON ((e.id_cbetapa_int = c.id_cbetapa_int)))
  WHERE ((c.id_cbsituacaocontrato_int = ANY (ARRAY['1'::bigint, '6'::bigint, '2'::bigint])) AND (p.situacao_int = ANY (ARRAY['0'::smallint, '1'::smallint, '7'::smallint])))
  ORDER BY c.contrato_str, p.data_vencimento_dat;

--
-- TOC entry 1608 (class 1259 OID 42407)
-- Name: view_estoque_padrao314; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_estoque_padrao314 AS
 SELECT DISTINCT ON (c.id_cbcontrato_int) (c.id_gecliente_int)::character varying AS carteira,
    t.codigo_str AS tipo_de_negocio,
    t.descricao_str AS desc_tpneg,
    c.contrato_str AS contrato,
    c.nome_str AS nome,
    c.cpf_str AS cpf,
    c.produto_str AS produto,
    e.codigo_str AS etapa,
    e.descricao_str AS desc_etapa,
    ''::character varying AS segmento,
    s.codigo_str AS situacao_contrato,
    (p.situacao_int)::character varying AS situacao_parcela,
    (p.data_vencimento_dat)::character varying AS vencimento_pc_mais_antiga,
    ((('now'::text)::date - p.data_vencimento_dat))::character varying AS dias_de_atraso,
    (p.parcela_int)::character varying AS parcela,
    (c.numero_total_parcelas_int)::character varying AS prazo,
    ''::character varying AS qtde_pc_atraso,
    (d.data_pre_distrib_dat)::character varying AS dt_pre_distrib,
    (p.data_primeira_distrib_dat)::character varying AS dt_prim_distrib,
    (p.data_ultima_distrib_dat)::character varying AS dt_ult_distrib,
    u.regiao_str AS regiao,
    u.uf_str AS estado,
    c.cidade_str AS cidade,
    f.nome_str AS filial,
    ''::character varying AS risco,
    ''::character varying AS saldo_devedor,
    (p.valor_principal_num)::character varying AS vlr_principal,
    (r.codigo_int)::character varying AS regua,
    ''::character varying AS binding_do_ctt,
    ''::character varying AS grupo_operacao,
    ''::character varying AS fx_atraso,
    ''::character varying AS fpd,
    (p.data_performance_dat)::character varying AS prazo_de_solucao,
    ''::character varying AS consolidador,
    ''::character varying AS cod_cessao,
    ''::character varying AS data_cessao,
    ''::character varying AS marcacao,
    ''::character varying AS inibe_caixa,
    ''::character varying AS status_gv,
    ''::character varying AS codigo_loja,
    ''::character varying AS nome_loja,
    ''::character varying AS saldo_parcelado,
    ''::character varying AS saldo_minimo,
    ''::character varying AS saldo_utilizado_fatura,
    ''::character varying AS atraso_bcsul,
    ''::character varying AS contrato_gestao,
    ''::character varying AS grupo,
    ''::character varying AS cota,
    ''::character varying AS motivo_nao_ajuizamento,
    ''::character varying AS marca,
    ''::character varying AS modelo,
    ''::character varying AS chassi,
    ''::character varying AS ano_fabricacao,
    ''::character varying AS ano_modelo,
    ''::character varying AS placa,
    ''::character varying AS renavam,
    ''::character varying AS cor,
    ''::character varying AS desc_tipo_veiculo,
    ''::character varying AS seguro_cardif,
    ''::character varying AS ajuizado,
    ''::character varying AS tipo_contrato,
    ''::character varying AS venc_boleto,
    ''::character varying AS valorminimo,
    ''::character varying AS valormaximo,
    ''::character varying AS valor_renegociado_boletagem,
    ''::character varying AS valor_desconto_boletagem,
    ''::character varying AS valor_atualizado_boletagem,
    ''::character varying AS valor_a_vista,
    ''::character varying AS valor_a_prazo,
    ''::character varying AS renda_eleita_br,
    ''::character varying AS radarspc,
    ''::character varying AS origem_radar,
    ''::character varying AS numero_contrato,
    ''::character varying AS mercado,
    ''::character varying AS fx_renda,
    ''::character varying AS flag_digital_granular,
    ''::character varying AS flag_digital,
    ''::character varying AS data_radar,
    ''::character varying AS data_nascimento,
    ''::character varying AS corren,
    ''::character varying AS contador_radar,
    ''::character varying AS cod_barras_vista,
    ''::character varying AS cod_barras_parc,
    ''::character varying AS avap,
    ''::character varying AS status,
    ''::character varying AS qtde_parc2_inicial_int,
    ''::character varying AS qtde_parc2_final_int,
    ''::character varying AS qtde_parc1_inicial_int,
    ''::character varying AS qtde_parc1_inicia5_int,
    ''::character varying AS qtde_parc1_inicia4_int,
    ''::character varying AS qtde_parc1_inicia3_int,
    ''::character varying AS qtde_parc1_final_int,
    ''::character varying AS qtde_parc1_fina5_int,
    ''::character varying AS qtde_parc1_fina4_int,
    ''::character varying AS qtde_parc1_fina3_int,
    ''::character varying AS perc_desc_vista_num,
    ''::character varying AS perc_desc_parc5_num,
    ''::character varying AS perc_desc_parc4_num,
    ''::character varying AS perc_desc_parc3_num,
    ''::character varying AS perc_desc_parc2_num,
    ''::character varying AS perc_desc_parc1_num,
    ''::character varying AS pec_min_entrada5_num,
    ''::character varying AS pec_min_entrada4_num,
    ''::character varying AS pec_min_entrada3_num,
    ''::character varying AS pec_min_entrada2_num,
    ''::character varying AS pec_min_entrada1_num,
    ''::character varying AS campanha,
    ''::character varying AS agencia,
    ''::character varying AS conta_cliente,
    ''::character varying AS tipo_de_pessoa,
    ''::character varying AS distribuidor,
    ''::character varying AS observacoes,
    ''::character varying AS cp_parcela,
    ''::character varying AS concessionaria,
    ''::character varying AS lote,
    ''::character varying AS valor_menor_vista,
    ''::character varying AS valor_medio_vista,
    ''::character varying AS valor_maior_vista,
    ''::character varying AS liberacao,
    ''::character varying AS score,
    ''::character varying AS valor_do_bem,
    ''::character varying AS descricao_do_bem,
    ''::character varying AS perc_amortizado,
    ''::character varying AS perc_amort_mensal,
    ''::character varying AS vl_categoria,
    ''::character varying AS perc_negociado,
    ''::character varying AS perc_cont_vencer,
    ''::character varying AS bens,
    ''::character varying AS praca,
    ''::character varying AS pc_performace,
    ''::character varying AS da_travada,
    ''::character varying AS faixa_travada,
    ''::character varying AS ano,
    ''::character varying AS mci,
    ''::character varying AS cartao,
    ''::character varying AS pagto,
    ''::character varying AS valor_pg,
    ''::character varying AS data_performance,
    ''::character varying AS alterado_edi_str,
    ''::character varying AS prazo_solucao,
    ''::character varying AS data_limite_retorno,
    ''::character varying AS vlclser,
    ''::character varying AS prazo_saida,
    ''::character varying AS cluster_novo,
    ''::character varying AS melhor_oferta,
    ''::character varying AS cliente_digital,
    ''::character varying AS prioridade_boleto,
    ''::character varying AS propensao,
    ''::character varying AS n_de_um_documento_da_conta_corrente_contratual,
    ''::character varying AS item_de_cobranca,
    ''::character varying AS n_parceiro_de_negocios,
    ''::character varying AS n_da_conta_de_contrato,
    ''::character varying AS montante_em_moeda_de_transacao_com_sinal_batch_input,
    ''::character varying AS numero_do_formulario_de_pagamento,
    ''::character varying AS instalacao,
    ''::character varying AS n_do_documento_de_referencia_fatura,
    ''::character varying AS data_de_lancamento_no_documento,
    ''::character varying AS data_de_vencimento_liquido,
    ''::character varying AS status_de_instalacao,
    ''::character varying AS classe_subclasse,
    ''::character varying AS tipo_de_carteira,
    ''::character varying AS data_de_pagamento,
    ''::character varying AS marcacao_de_negativado,
    ''::character varying AS marcacao_de_protestado,
    ''::character varying AS codigo_de_barras,
    ''::character varying AS tipo_de_cobranca,
    ''::character varying AS area_responsavel,
    ''::character varying AS entorno,
    ''::character varying AS area_risco
   FROM ((((((((public.cbcontratopirelli c
     JOIN public.cbparcela p ON ((c.id_cbcontrato_int = p.id_cbcontrato_int)))
     JOIN public.cbtiponegocio t ON ((c.id_cbtiponegocio_int = t.id_cbtiponegocio_int)))
     JOIN public.cbsituacaocontrato s ON ((c.id_cbsituacaocontrato_int = s.id_cbsituacaocontrato_int)))
     LEFT JOIN public.cbdistribparcela d ON ((p.id_cbparcela_int = d.id_cbparcela_int)))
     LEFT JOIN public.cbetapa e ON ((c.id_cbetapa_int = e.id_cbetapa_int)))
     LEFT JOIN public.esregua r ON ((p.id_esregua_int = r.id_esregua_int)))
     LEFT JOIN public.geuf u ON ((upper((c.estado_str)::text) = (u.uf_str)::text)))
     LEFT JOIN public.gefilial f ON ((c.id_gefilial_int = f.id_gefilial_int)))
  WHERE ((c.id_cbsituacaocontrato_int <> 6) AND (p.situacao_int = ANY (ARRAY[0, 1])))
  ORDER BY c.id_cbcontrato_int, p.data_vencimento_dat, p.tipo_str, p.id_cbparcela_int;

--
-- TOC entry 1609 (class 1259 OID 42414)
-- Name: view_mdm_boleto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_boleto AS
 SELECT i.id_cbitembordero_int AS id_boleto,
    c.id_gecliente_int AS id_carteira,
    i.id_cbcontrato_int AS id_contrato,
    (COALESCE((i.tstamp_mdm_inclusao)::timestamp with time zone, i."timestamp"))::timestamp without time zone AS data_inclusao,
    (COALESCE((i.tstamp_mdm_alteracao)::timestamp with time zone, i."timestamp"))::timestamp without time zone AS data_alteracao,
    (i.emissao_dat - ( SELECT min(p.data_vencimento_dat) AS min
           FROM (public.cbparcela p
             JOIN public.cbparcelaitembordero pb ON ((p.id_cbparcela_int = pb.id_cbparcela_int)))
          WHERE (pb.id_cbitembordero_int = i.id_cbitembordero_int))) AS da,
    i.emissao_dat AS data_emissao,
    i.boleto_gravacao_tim AS hora_emissao,
    i.vencimento_dat AS vencimento_boleto,
    i.acordo_int AS acordo,
    i.nosso_numero_str AS nosso_numero,
    i.parcelamento_str AS parcelamento,
    b.tipo_bordero_str AS tipo_bordero,
    NULL::text AS qtde_parc_bordero,
    u.nomecompleto_str AS nome_operador,
    u.nomelogin_str AS login,
    i.valor_total_num AS valor_boleto,
    COALESCE((((i.valor_total_num - i.honorarios_num) - i.comissionamento_num) - i.retido_num), (0)::double precision) AS valor_repasse,
    COALESCE(i.principal_num, (0)::double precision) AS principal,
    COALESCE(i.cp_num, (0)::double precision) AS cp,
    COALESCE(i.honorarios_num, (0)::double precision) AS honorarios,
    i.comissionamento_num AS comissionamento,
    i.desconto_num AS desconto,
    i.abatimento_num AS abatimento,
    i.juros_mora_num AS juros_mora,
    i.retido_num AS retido,
    i.acrescimo_num AS acrescimo,
    i.acrescimo_np_num AS despesas,
    i.multa_num AS multa,
    i.notificacao_num AS notificacao,
    COALESCE(i.despesa_banco_num, (0)::double precision) AS despesa_banco,
    NULL::text AS juros,
    i.desconto_original_num AS desconto_original,
    i.cp_original_num AS cp_original,
    NULL::text AS ddiv,
    COALESCE(i.pago_str, 'N'::character varying) AS pago,
    ( SELECT sum(ibcp.honorarios_num) AS sum
           FROM public.cbitemborderocalculoparcela ibcp
          WHERE (ibcp.id_cbitembordero_int = i.id_cbitembordero_int)) AS ho_original,
    NULL::text AS valor_refin,
    ( SELECT tp.obs_str
           FROM public.cbtipopagamento tp
          WHERE (tp.id_cbtipopagamento_int = b.id_cbtipopagamento_int)) AS obs_tipo_pagamento,
    i.linha_digitavel_str,
    NULL::text AS acordo_algar,
    NULL::text AS colchao_status,
    NULL::text AS coringa1,
    NULL::text AS coringa2,
    NULL::text AS coringa3,
    NULL::text AS coringa4,
    NULL::text AS coringa5,
    NULL::text AS coringa6,
    NULL::text AS coringa7,
    NULL::text AS coringa8,
    NULL::text AS coringa9,
    NULL::text AS coringa10
   FROM (((public.cbitembordero i
     JOIN public.cbcontrato c ON ((c.id_cbcontrato_int = i.id_cbcontrato_int)))
     JOIN public.cbbordero b ON ((b.id_cbbordero_int = i.id_cbbordero_int)))
     JOIN public.geusuario u ON ((u.id_geusuario_int = i.id_geusuario_boleto_int)));

--
-- TOC entry 1610 (class 1259 OID 42423)
-- Name: view_mdm_contrato314; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_contrato314 AS
 SELECT c.id_cbcontrato_int AS id_contrato,
    qc.id_geqlcliente_int AS id_cliente,
    c.id_gecliente_int AS id_carteira,
    COALESCE(c.tstamp_mdm_inclusao, (c.data_primeira_distrib_dat)::timestamp without time zone) AS data_inclusao,
    (COALESCE((c.tstamp_mdm_alteracao)::timestamp with time zone, c.tstamp))::timestamp(0) without time zone AS data_alteracao,
    t.codigo_str AS tipo_de_negocio,
    t.descricao_str AS desc_tpneg,
    c.contrato_str AS contrato,
    c.nome_str AS nome,
    public.abs_cpf((c.cpf_str)::text) AS cpf,
    c.produto_str AS produto,
    e.codigo_str AS etapa,
    e.descricao_str AS desc_etapa,
    NULL::text AS segmento,
    s.codigo_str AS situacao_contrato,
    NULL::text AS dias_de_atraso,
    c.numero_total_parcelas_int AS prazo,
    ( SELECT count(1) AS count
           FROM public.cbparcela p
          WHERE ((p.id_cbcontrato_int = c.id_cbcontrato_int) AND (p.situacao_int = ANY (ARRAY[0, 1])))) AS qtde_pc_atraso,
    NULL::text AS dt_pre_distrib,
    c.data_primeira_distrib_dat AS dt_prim_distrib,
    c.data_ultima_distrib_dat AS dt_ult_distrib,
    u.regiao_str AS regiao,
    u.uf_str AS estado,
    c.cidade_str AS cidade,
    f.nome_str AS filial,
    ( SELECT sum(p.valor_principal_num) AS sum
           FROM public.cbparcela p
          WHERE (p.id_cbcontrato_int = c.id_cbcontrato_int)) AS risco,
    ( SELECT sum(p.valor_principal_num) AS sum
           FROM public.cbparcela p
          WHERE ((p.id_cbcontrato_int = c.id_cbcontrato_int) AND (p.situacao_int = ANY (ARRAY[0, 1])))) AS saldo_devedor,
    NULL::text AS vlr_principal,
    NULL::text AS regua,
    NULL::text AS binding_do_ctt,
    NULL::text AS grupo_operacao,
    NULL::text AS fx_atraso,
    NULL::text AS prazo_de_solucao,
    NULL::text AS consolidador,
    NULL::text AS cod_cessao,
    NULL::text AS data_cessao,
    NULL::text AS marcacao,
    NULL::text AS inibe_caixa,
    NULL::text AS status_gv,
    NULL::text AS codigo_loja,
    NULL::text AS nome_loja,
    NULL::text AS saldo_parcelado,
    NULL::text AS saldo_minimo,
    NULL::text AS saldo_utilizado_fatura,
    NULL::text AS atraso_bcsul,
    NULL::text AS contrato_gestao,
    NULL::text AS grupo,
    NULL::text AS cota,
    NULL::text AS motivo_nao_ajuizamento,
    NULL::text AS marca,
    NULL::text AS modelo,
    NULL::text AS chassi,
    NULL::text AS ano_fabricacao,
    NULL::text AS ano_modelo,
    NULL::text AS placa,
    NULL::text AS renavam,
    NULL::text AS cor,
    NULL::text AS desc_tipo_veiculo,
    NULL::text AS seguro_cardif,
    NULL::text AS ajuizado,
    NULL::text AS tipo_contrato,
    NULL::text AS venc_boleto,
    NULL::text AS valorminimo,
    NULL::text AS valormaximo,
    NULL::text AS valor_renegociado_boletagem,
    NULL::text AS valor_desconto_boletagem,
    NULL::text AS valor_atualizado_boletagem,
    NULL::text AS valor_a_vista,
    NULL::text AS valor_a_prazo,
    NULL::text AS renda_eleita_br,
    NULL::text AS radarspc,
    NULL::text AS origem_radar,
    NULL::text AS numero_contrato,
    NULL::text AS mercado,
    NULL::text AS fx_renda,
    NULL::text AS flag_digital_granular,
    NULL::text AS flag_digital,
    NULL::text AS data_radar,
    NULL::text AS data_nascimento,
    NULL::text AS corren,
    NULL::text AS contador_radar,
    NULL::text AS cod_barras_vista,
    NULL::text AS cod_barras_parc,
    NULL::text AS avap,
    NULL::text AS status,
    NULL::text AS qtde_parc2_inicial_int,
    NULL::text AS qtde_parc2_final_int,
    NULL::text AS qtde_parc1_inicial_int,
    NULL::text AS qtde_parc1_inicia5_int,
    NULL::text AS qtde_parc1_inicia4_int,
    NULL::text AS qtde_parc1_inicia3_int,
    NULL::text AS qtde_parc1_final_int,
    NULL::text AS qtde_parc1_fina5_int,
    NULL::text AS qtde_parc1_fina4_int,
    NULL::text AS qtde_parc1_fina3_int,
    NULL::text AS perc_desc_vista_num,
    NULL::text AS perc_desc_parc5_num,
    NULL::text AS perc_desc_parc4_num,
    NULL::text AS perc_desc_parc3_num,
    NULL::text AS perc_desc_parc2_num,
    NULL::text AS perc_desc_parc1_num,
    NULL::text AS pec_min_entrada5_num,
    NULL::text AS pec_min_entrada4_num,
    NULL::text AS pec_min_entrada3_num,
    NULL::text AS pec_min_entrada2_num,
    NULL::text AS pec_min_entrada1_num,
    NULL::text AS campanha,
    NULL::text AS agencia,
    NULL::text AS conta_cliente,
    NULL::text AS tipo_de_pessoa,
    NULL::text AS distribuidor,
    NULL::text AS concessionaria,
    NULL::text AS lote,
    NULL::text AS valor_menor_vista,
    NULL::text AS valor_medio_vista,
    NULL::text AS valor_maior_vista,
    NULL::text AS score,
    NULL::text AS valor_do_bem,
    NULL::text AS descricao_do_bem,
    NULL::text AS perc_amortizado,
    NULL::text AS perc_amort_mensal,
    NULL::text AS vl_categoria,
    NULL::text AS perc_negociado,
    NULL::text AS perc_cont_vencer,
    NULL::text AS bens,
    NULL::text AS praca,
    NULL::text AS pc_performace,
    NULL::text AS da_travada,
    NULL::text AS faixa_travada,
    NULL::text AS ano,
    NULL::text AS mci,
    NULL::text AS cartao,
    NULL::text AS pagto,
    NULL::text AS valor_pg,
    NULL::text AS data_performance,
    NULL::text AS alterado_edi_str,
    NULL::text AS prazo_solucao,
    NULL::text AS data_limite_retorno,
    NULL::text AS vlclser,
    NULL::text AS prazo_saida,
    NULL::text AS cluster_novo,
    NULL::text AS melhor_oferta,
    NULL::text AS cliente_digital,
    NULL::text AS prioridade_boleto,
    NULL::text AS propensao,
    NULL::text AS item_de_cobranca,
    NULL::text AS n_parceiro_de_negocios,
    NULL::text AS classe_subclasse,
    NULL::text AS data_de_pagamento,
    NULL::text AS codigo_de_barras,
    NULL::text AS tipo_de_cobranca,
    NULL::text AS contrato_inadimplencia,
    NULL::text AS operacao,
    NULL::text AS seguro,
    NULL::text AS ultima_reabertura_contrato,
    NULL::text AS da_travado,
    NULL::text AS saldo,
    NULL::text AS marcacao_kg,
    NULL::text AS data_cadastro,
    NULL::text AS data_redistrib_contrato,
    NULL::text AS data_saida_contrato,
    NULL::text AS data_atual_fluxo,
    NULL::text AS situacao,
    NULL::text AS anterior_ctt,
    NULL::text AS data_ult_motivoinadim,
    NULL::text AS perc_atraso,
    NULL::text AS area_funcional_cacs,
    NULL::text AS averbado,
    NULL::text AS cod_sub_segmento,
    NULL::text AS cod_tipo_veiculo,
    NULL::text AS codcobranca,
    NULL::text AS codigo_contrato,
    NULL::text AS collector,
    NULL::text AS complemento_state,
    NULL::text AS contrato_parcela,
    NULL::text AS data_baixa,
    NULL::text AS data_enquadramento,
    NULL::text AS data_inibicao,
    NULL::text AS data_status,
    NULL::text AS data_venc_ultima_parcela,
    NULL::text AS descricao_fase,
    NULL::text AS divisao,
    NULL::text AS dt_contrato,
    NULL::text AS eleg_ajuiz,
    NULL::text AS emp,
    NULL::text AS entrega_amigavel,
    NULL::text AS estado_civil,
    NULL::text AS etapa_da,
    NULL::text AS idcontrato,
    NULL::text AS loan_id,
    NULL::text AS mascara_contrato,
    NULL::text AS motivo_inadimplencia,
    NULL::text AS numero_conta,
    NULL::text AS numero_endereco_entrega,
    NULL::text AS numerounico,
    NULL::text AS numproduto,
    NULL::text AS pagamento_mes,
    NULL::text AS pedras,
    NULL::text AS prioridade,
    NULL::text AS publico,
    NULL::text AS qtd_camp_ativa,
    NULL::text AS qtde_pagas,
    NULL::text AS qtde_parcelas,
    NULL::text AS regiao2,
    NULL::text AS saldo_parcelas,
    NULL::text AS saldo_vencido,
    NULL::text AS score_banco,
    NULL::text AS setor,
    NULL::text AS sexo,
    NULL::text AS shopping,
    NULL::text AS soma_parc,
    NULL::text AS tot_negociado,
    NULL::text AS ult_num_camp_ativo,
    NULL::text AS val_inibicao,
    NULL::text AS valor_negociavel,
    NULL::text AS valor_liquido,
    NULL::text AS valor_molicar,
    NULL::text AS vista_desconto,
    NULL::text AS cod_cliente,
    NULL::text AS id_titulo,
    NULL::text AS nr_titulo,
    NULL::text AS metodo_pagamento,
    NULL::text AS tipo_titulo,
    NULL::text AS codigo_curso,
    NULL::text AS nome_curso,
    NULL::text AS situacao_matricula,
    NULL::text AS cod_faculdade,
    NULL::text AS nome_faculdade,
    NULL::text AS email_faculdade,
    NULL::text AS data_standby,
    NULL::text AS num_proposta,
    NULL::text AS contrato_fase,
    NULL::text AS etapa_2,
    NULL::text AS modelo_2,
    NULL::text AS dt_ult_acio,
    NULL::text AS cod_ult_acio,
    NULL::text AS obito,
    c.mae_str AS nome_mae,
    c.pai_str AS nome_pai,
    c.rg_str AS numero_rg,
    c.org_exp_rg_str AS orgao_expedidor_rg,
    c.dt_exp_rg_dat AS data_emissao_rg,
    c.uf_rg_str AS uf_rg,
    c.cidade_nascimento_str AS cidade_nascimento,
    c.local_trabalho_str AS local_trabalho,
    c.profissao_str AS profissao,
    cor.coringa1_txt AS coringa1,
    cor.coringa2_txt AS coringa2,
    cor.coringa3_txt AS coringa3,
    cor.coringa4_txt AS coringa4,
    cor.coringa5_txt AS coringa5,
    cor.coringa6_txt AS coringa6,
    cor.coringa7_txt AS coringa7,
    cor.coringa8_txt AS coringa8,
    cor.coringa9_txt AS coringa9,
    cor.coringa10_txt AS coringa10,
    cor.coringa11_txt AS coringa11,
    cor.coringa12_txt AS coringa12,
    cor.coringa13_txt AS coringa13,
    cor.coringa14_txt AS coringa14,
    cor.coringa15_txt AS coringa15,
    cor.coringa16_txt AS coringa16,
    cor.coringa17_txt AS coringa17,
    cor.coringa18_txt AS coringa18,
    cor.coringa19_txt AS coringa19,
    cor.coringa20_txt AS coringa20,
    cor.coringa21_txt AS coringa21,
    cor.coringa22_txt AS coringa22,
    cor.coringa23_txt AS coringa23,
    cor.coringa24_txt AS coringa24,
    cor.coringa25_txt AS coringa25,
    cor.coringa26_txt AS coringa26,
    cor.coringa27_txt AS coringa27,
    cor.coringa28_txt AS coringa28,
    cor.coringa29_txt AS coringa29,
    cor.coringa30_txt AS coringa30,
    cor.coringa31_txt AS coringa31,
    cor.coringa32_txt AS coringa32,
    cor.coringa33_txt AS coringa33,
    cor.coringa34_txt AS coringa34,
    cor.coringa35_txt AS coringa35,
    cor.coringa36_txt AS coringa36,
    cor.coringa37_txt AS coringa37,
    cor.coringa38_txt AS coringa38,
    cor.coringa39_txt AS coringa39,
    cor.coringa40_txt AS coringa40,
    cor.coringa41_txt AS coringa41,
    cor.coringa42_txt AS coringa42,
    cor.coringa43_txt AS coringa43,
    cor.coringa44_txt AS coringa44,
    cor.coringa45_txt AS coringa45,
    cor.coringa46_txt AS coringa46,
    cor.coringa47_txt AS coringa47,
    cor.coringa48_txt AS coringa48,
    cor.coringa49_txt AS coringa49,
    cor.coringa50_txt AS coringa50
   FROM (((((((public.cbcontratopirelli c
     JOIN public.geqlcontrato qc ON ((qc.id_cbcontrato_int = c.id_cbcontrato_int)))
     JOIN public.cbtiponegocio t ON ((t.id_cbtiponegocio_int = c.id_cbtiponegocio_int)))
     JOIN public.cbsituacaocontrato s ON ((s.id_cbsituacaocontrato_int = c.id_cbsituacaocontrato_int)))
     LEFT JOIN public.cbetapa e ON ((e.id_cbetapa_int = c.id_cbetapa_int)))
     LEFT JOIN public.geuf u ON ((upper((c.estado_str)::text) = upper((u.uf_str)::text))))
     LEFT JOIN public.gefilial f ON ((c.id_gefilial_int = f.id_gefilial_int)))
     LEFT JOIN public.coringacbcontratomd2 cor ON ((cor.id_cbcontrato_int = c.id_cbcontrato_int)));

--
-- TOC entry 1611 (class 1259 OID 42430)
-- Name: view_mdm_email; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_email AS
 SELECT qe.id_geqlemail_int AS id_email,
    qe.id_geqlcliente_int AS id_cliente,
    qc.id_gecliente_int AS id_carteira,
    COALESCE((qe.tstamp_mdm_inclusao)::timestamp with time zone, qe.tstamp) AS data_inclusao,
    COALESCE((qe.tstamp_mdm_alteracao)::timestamp with time zone, qe.tstamp) AS data_alteracao,
    qte.codigo_str AS tipo_contato,
    qe.email_str AS email,
    qe.classificacao_str AS classificacao,
    qe.score_int AS score,
        CASE
            WHEN ((qe.tabela_origem_str)::text ~~ 'ge070tmp%'::text) THEN 'T'::text
            WHEN ((qe.tabela_origem_str)::text = 'PR002'::text) THEN 'T'::text
            WHEN ((qe.tabela_origem_str)::text = 'GE212'::text) THEN 'T'::text
            WHEN ((qe.tabela_origem_str)::text = 'CB002'::text) THEN 'M'::text
            WHEN ((qe.tabela_origem_str)::text = 'tmppesquisaquali'::text) THEN 'B'::text
            WHEN (upper((qe.tabela_origem_str)::text) ~~ 'BASAO%'::text) THEN 'B'::text
            WHEN ((qe.tabela_origem_str)::text ~~ 'ge069tmp%'::text) THEN 'I'::text
            ELSE 'O'::text
        END AS origem,
    qr.descricao_str AS fornecedor,
        CASE
            WHEN (qe.contatopagoufacil_bit = (1)::bit(1)) THEN 'S'::text
            ELSE 'N'::text
        END AS pagou_facil,
        CASE
            WHEN (cbc.id_cbblacklistcliente_int IS NULL) THEN 'N'::text
            ELSE 'S'::text
        END AS black_list,
    cbc.data_inclusao_dat AS data_black_list,
    COALESCE(qe.excluido_bit, (0)::bit(1)) AS excluido,
    cor.coringa1_txt AS coringa1,
    cor.coringa2_txt AS coringa2,
    cor.coringa3_txt AS coringa3,
    cor.coringa4_txt AS coringa4,
    cor.coringa5_txt AS coringa5,
    cor.coringa6_txt AS coringa6,
    cor.coringa7_txt AS coringa7,
    cor.coringa8_txt AS coringa8,
    cor.coringa9_txt AS coringa9,
    cor.coringa10_txt AS coringa10
   FROM (((((((public.geqlemail qe
     JOIN public.geqlcontrato qc ON ((qc.id_geqlcliente_int = qe.id_geqlcliente_int)))
     JOIN public.geqltipoemail qte ON ((qte.id_geqltipoemail_int = qe.id_geqltipoemail_int)))
     LEFT JOIN public.geqltratamento qt ON ((qt.id_geqltratamento_int = qe.id_geqltratamento_int)))
     LEFT JOIN public.geqlresponsavel qr ON ((qr.id_geqlresponsavel_int = qt.id_geqlresponsavel_int)))
     LEFT JOIN public.cbblacklist cb ON ((((cb.contato_str)::text = (qe.email_str)::text) AND (cb.tipo_contato_str = 'E'::bpchar))))
     LEFT JOIN public.cbblacklistcliente cbc ON (((cbc.id_cbblacklist_int = cb.id_cbblacklist_int) AND (cbc.situacao_str = 'I'::bpchar))))
     LEFT JOIN public.coringageqlemailmd2 cor ON ((cor.id_geqlemail_int = qe.id_geqlemail_int)));

--
-- TOC entry 1612 (class 1259 OID 42437)
-- Name: view_mdm_endereco; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_endereco AS
 SELECT qe.id_geqlendereco_int AS id_endereco,
    qe.id_geqlcliente_int AS id_cliente,
    qc.id_gecliente_int AS id_carteira,
    COALESCE((COALESCE(qe.tstamp_mdm_inclusao, qe.tstamp_inclusao))::timestamp with time zone, qe.tstamp) AS data_inclusao,
    COALESCE((qe.tstamp_mdm_alteracao)::timestamp with time zone, qe.tstamp) AS data_alteracao,
    qte.codigo_str AS tipo_contato,
    qe.endereco_str AS endereco,
    qe.complemento_str AS complemento,
    qe.bairro_str AS bairro,
    qe.cep_str AS cep,
    qe.cidade_str AS cidade,
    qe.estado_str AS estado,
    NULL::text AS pais,
    qe.classificacao_str AS classificacao,
    NULL::text AS score,
        CASE
            WHEN ((qe.tabela_origem_str)::text ~~ 'ge070tmp%'::text) THEN 'T'::text
            WHEN ((qe.tabela_origem_str)::text = 'PR002'::text) THEN 'T'::text
            WHEN ((qe.tabela_origem_str)::text = 'GE212'::text) THEN 'T'::text
            WHEN ((qe.tabela_origem_str)::text = 'CB002'::text) THEN 'M'::text
            WHEN ((qe.tabela_origem_str)::text = 'tmppesquisaquali'::text) THEN 'B'::text
            WHEN (upper((qe.tabela_origem_str)::text) ~~ 'BASAO%'::text) THEN 'B'::text
            WHEN ((qe.tabela_origem_str)::text ~~ 'ge069tmp%'::text) THEN 'I'::text
            ELSE 'O'::text
        END AS origem,
    qr.descricao_str AS fornecedor,
    'N'::text AS black_list,
    NULL::text AS data_black_list,
    COALESCE(qe.excluido_bit, (0)::bit(1)) AS excluido,
    cor.coringa1_txt AS coringa1,
    cor.coringa2_txt AS coringa2,
    cor.coringa3_txt AS coringa3,
    cor.coringa4_txt AS coringa4,
    cor.coringa5_txt AS coringa5,
    cor.coringa6_txt AS coringa6,
    cor.coringa7_txt AS coringa7,
    cor.coringa8_txt AS coringa8,
    cor.coringa9_txt AS coringa9,
    cor.coringa10_txt AS coringa10
   FROM (((((public.geqlendereco qe
     JOIN public.geqlcontrato qc ON ((qc.id_geqlcliente_int = qe.id_geqlcliente_int)))
     JOIN public.geqltipoendereco qte ON ((qte.id_geqltipoendereco_int = qe.id_geqltipoendereco_int)))
     LEFT JOIN public.geqltratamento qt ON ((qt.id_geqltratamento_int = qe.id_geqltratamento_int)))
     LEFT JOIN public.geqlresponsavel qr ON ((qr.id_geqlresponsavel_int = qt.id_geqlresponsavel_int)))
     LEFT JOIN public.coringageqlenderecomd2 cor ON ((cor.id_geqlendereco_int = qe.id_geqlendereco_int)));

--
-- TOC entry 1613 (class 1259 OID 42442)
-- Name: view_mdm_follow; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_follow AS
 SELECT f.id_cbfollowup_int AS id_follow,
    f.id_cbcontrato_int AS id_contrato,
    c.id_gecliente_int AS id_carteira,
    (COALESCE((f.tstamp_mdm_inclusao)::timestamp with time zone, f.tstamp))::timestamp without time zone AS data_inclusao,
    (COALESCE((f.tstamp_mdm_alteracao)::timestamp with time zone, f.tstamp))::timestamp without time zone AS data_alteracao,
    u.nomelogin_str AS login,
    s.codigo_int AS cod_follow,
    s.descricao_str AS desc_follow,
    f.data_dat AS data,
    (f.cobranca_inicio_tim)::time(0) without time zone AS inicio,
    (f.cobranca_final_tim)::time(0) without time zone AS final,
    ((f.cobranca_final_tim - f.cobranca_inicio_tim))::time(0) without time zone AS tempo,
    f.historico_str AS observacao_follow,
    NULL::text AS coringa1,
    NULL::text AS coringa2,
    NULL::text AS coringa3,
    NULL::text AS coringa4,
    NULL::text AS coringa5,
    NULL::text AS coringa6,
    NULL::text AS coringa7,
    NULL::text AS coringa8,
    NULL::text AS coringa9,
    NULL::text AS coringa10
   FROM (((public.cbfollowup f
     JOIN public.cbcontrato c ON ((c.id_cbcontrato_int = f.id_cbcontrato_int)))
     JOIN public.geusuario u ON ((u.id_geusuario_int = f.id_geusuario_int)))
     JOIN public.cbsitcontato s ON ((s.id_cbsitcontato_int = f.id_cbsitcontato_int)));

--
-- TOC entry 1614 (class 1259 OID 42449)
-- Name: view_mdm_pagamento; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_pagamento AS
 SELECT pg.id_cbpagamento_int AS id_pagamento,
    pg.id_cbitembordero_int AS id_boleto,
    (COALESCE((pg.tstamp_mdm_inclusao)::timestamp with time zone, pg.tstamp))::timestamp without time zone AS data_inclusao,
    (COALESCE((pg.tstamp_mdm_alteracao)::timestamp with time zone, pg.tstamp))::timestamp without time zone AS data_alteracao,
    pg.data_pagamento_dat AS data_pagamento,
    epg.data_repasse_dat AS data_repasse,
    COALESCE(epg.valor_deposito_num, (0)::double precision) AS valor_repasse,
    NULL::text AS tipo_pagamento,
    COALESCE(pg.situacao_str, NULL::character varying) AS situacao_pagamento_boleto,
        CASE
            WHEN ((pg.situacao_str)::text = 'E'::text) THEN pg.valor_total_num
            ELSE NULL::double precision
        END AS valor_pago,
    COALESCE(pg.principal_num, (0)::double precision) AS principal,
    COALESCE(pg.cp_num, (0)::double precision) AS cp,
    pg.multa_num AS multa,
    pg.notificacao_num AS notificacao,
    COALESCE(pg.despesa_banco_num, (0)::double precision) AS despesa_banco,
    pg.desconto_num AS desconto,
    pg.abatimento_num AS abatimento,
    pg.juros_mora_num AS juros_mora,
    COALESCE(pg.honorarios_num, (0)::double precision) AS honorarios,
    pg.comissionamento_num AS comissionamento,
    pg.valor_total_num AS valor_boleto,
    pg.retido_num AS retido,
    pg.acrescimo_num AS acrescimo,
    pg.acrescimo_np_num AS despesas,
    NULL::text AS coringa1,
    NULL::text AS coringa2,
    NULL::text AS coringa3,
    NULL::text AS coringa4,
    NULL::text AS coringa5,
    NULL::text AS coringa6,
    NULL::text AS coringa7,
    NULL::text AS coringa8,
    NULL::text AS coringa9,
    NULL::text AS coringa10
   FROM (public.cbpagamento pg
     LEFT JOIN public.cbespeciepagamento epg ON ((epg.id_cbpagamento_int = pg.id_cbpagamento_int)));

--
-- TOC entry 1615 (class 1259 OID 42456)
-- Name: view_mdm_parcela314; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_parcela314 AS
 SELECT p.id_cbparcela_int AS id_parcela,
    p.id_cbcontrato_int AS id_contrato,
    qc.id_geqlcliente_int AS id_cliente,
    COALESCE(p.tstamp_mdm_inclusao, (p.data_primeira_distrib_dat)::timestamp without time zone) AS data_inclusao,
    COALESCE((p.tstamp_mdm_alteracao)::timestamp with time zone, p.tstamp) AS data_alteracao,
    NULL::text AS produto,
    NULL::text AS etapa,
    NULL::text AS desc_etapa,
    NULL::text AS segmento,
    p.situacao_int AS situacao_parcela,
    p.data_vencimento_dat AS vencimento_parcela,
    (('now'::text)::date - p.data_vencimento_dat) AS dias_de_atraso,
    p.parcela_int AS parcela,
    d.data_pre_distrib_dat AS dt_pre_distrib,
    p.data_primeira_distrib_dat AS dt_prim_distrib,
    p.data_ultima_distrib_dat AS dt_ult_distrib,
    NULL::text AS regiao,
    NULL::text AS estado,
    NULL::text AS cidade,
    NULL::text AS filial,
    p.valor_principal_num AS vlr_principal,
    r.codigo_int AS regua,
    NULL::text AS binding_do_ctt,
    NULL::text AS grupo_operacao,
    NULL::text AS fx_atraso,
    NULL::text AS prazo_de_solucao,
    NULL::text AS venc_boleto,
    NULL::text AS valorminimo,
    NULL::text AS valormaximo,
    NULL::text AS valor_renegociado_boletagem,
    NULL::text AS valor_desconto_boletagem,
    NULL::text AS valor_atualizado_boletagem,
    NULL::text AS valor_a_vista,
    NULL::text AS valor_a_prazo,
    NULL::text AS renda_eleita_br,
    NULL::text AS radarspc,
    NULL::text AS origem_radar,
    NULL::text AS numero_contrato,
    NULL::text AS mercado,
    NULL::text AS fx_renda,
    NULL::text AS flag_digital_granular,
    NULL::text AS flag_digital,
    NULL::text AS data_radar,
    NULL::text AS data_nascimento,
    NULL::text AS corren,
    NULL::text AS contador_radar,
    NULL::text AS cod_barras_vista,
    NULL::text AS cod_barras_parc,
    NULL::text AS avap,
    NULL::text AS qtde_parc2_inicial_int,
    NULL::text AS qtde_parc2_final_int,
    NULL::text AS qtde_parc1_inicial_int,
    NULL::text AS qtde_parc1_inicia5_int,
    NULL::text AS qtde_parc1_inicia4_int,
    NULL::text AS qtde_parc1_inicia3_int,
    NULL::text AS qtde_parc1_final_int,
    NULL::text AS qtde_parc1_fina5_int,
    NULL::text AS qtde_parc1_fina4_int,
    NULL::text AS qtde_parc1_fina3_int,
    NULL::text AS perc_desc_vista_num,
    NULL::text AS perc_desc_parc5_num,
    NULL::text AS perc_desc_parc4_num,
    NULL::text AS perc_desc_parc3_num,
    NULL::text AS perc_desc_parc2_num,
    NULL::text AS perc_desc_parc1_num,
    NULL::text AS pec_min_entrada5_num,
    NULL::text AS pec_min_entrada4_num,
    NULL::text AS pec_min_entrada3_num,
    NULL::text AS pec_min_entrada2_num,
    NULL::text AS pec_min_entrada1_num,
    NULL::text AS campanha,
    NULL::text AS agencia,
    NULL::text AS observacoes,
    NULL::text AS cp_parcela,
    NULL::text AS liberacao,
    NULL::text AS data_performance,
    NULL::text AS n_de_um_documento_da_conta_corrente_contratual,
    NULL::text AS n_da_conta_de_contrato,
    NULL::text AS montante_em_moeda_de_transacao_com_sinal_batch_input,
    NULL::text AS numero_do_formulario_de_pagamento,
    NULL::text AS instalacao,
    NULL::text AS n_do_documento_de_referencia_fatura,
    NULL::text AS data_de_lancamento_no_documento,
    NULL::text AS data_de_vencimento_liquido,
    NULL::text AS status_de_instalacao,
    NULL::text AS tipo_de_carteira,
    NULL::text AS marcacao_de_negativado,
    NULL::text AS marcacao_de_protestado,
    NULL::text AS codigo_de_barras,
    NULL::text AS tipo_de_cobranca,
    NULL::text AS area_responsavel,
    NULL::text AS area_risco,
    NULL::text AS data_distrib_operacao,
    NULL::text AS data_ult_distrib_oper_contrato,
    NULL::text AS valor_parcela,
    NULL::text AS validacao_parcela,
    NULL::text AS cod_sub_segmento,
    NULL::text AS parc_inibida,
    NULL::text AS dt_venc_pc,
    NULL::text AS flag_misc,
    NULL::text AS miscellaneous,
    NULL::text AS observacoes_da_parcela,
    NULL::text AS prioridade,
    NULL::text AS publico,
    NULL::text AS qtde_parcelas,
    NULL::text AS cod_cliente,
    NULL::text AS id_titulo,
    NULL::text AS nr_titulo,
    NULL::text AS metodo_pagamento,
    NULL::text AS tipo_titulo,
    NULL::text AS codigo_curso,
    NULL::text AS nome_curso,
    NULL::text AS situacao_matricula,
    NULL::text AS cod_faculdade,
    NULL::text AS nome_faculdade,
    NULL::text AS email_faculdade,
    NULL::text AS data_standby,
    NULL::text AS num_proposta,
    NULL::text AS contrato_fase,
    NULL::text AS etapa_2,
    NULL::text AS modelo_2,
    NULL::text AS dt_ult_acio,
    NULL::text AS cod_ult_acio,
    cor.coringa1_txt AS coringa1,
    cor.coringa2_txt AS coringa2,
    cor.coringa3_txt AS coringa3,
    cor.coringa4_txt AS coringa4,
    cor.coringa5_txt AS coringa5,
    cor.coringa6_txt AS coringa6,
    cor.coringa7_txt AS coringa7,
    cor.coringa8_txt AS coringa8,
    cor.coringa9_txt AS coringa9,
    cor.coringa10_txt AS coringa10,
    cor.coringa11_txt AS coringa11,
    cor.coringa12_txt AS coringa12,
    cor.coringa13_txt AS coringa13,
    cor.coringa14_txt AS coringa14,
    cor.coringa15_txt AS coringa15,
    cor.coringa16_txt AS coringa16,
    cor.coringa17_txt AS coringa17,
    cor.coringa18_txt AS coringa18,
    cor.coringa19_txt AS coringa19,
    cor.coringa20_txt AS coringa20
   FROM (((((public.cbcontratopirelli c
     JOIN public.cbparcela p ON ((p.id_cbcontrato_int = c.id_cbcontrato_int)))
     JOIN public.geqlcontrato qc ON ((qc.id_cbcontrato_int = c.id_cbcontrato_int)))
     JOIN public.esregua r ON ((r.id_esregua_int = p.id_esregua_int)))
     LEFT JOIN public.cbdistribparcela d ON ((d.id_cbparcela_int = p.id_cbparcela_int)))
     LEFT JOIN public.coringacbparcelamd2 cor ON ((cor.id_cbparcela_int = p.id_cbparcela_int)));

--
-- TOC entry 1616 (class 1259 OID 42465)
-- Name: view_mdm_parcelaboleto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_parcelaboleto AS
 SELECT pib.id_cbparcelaitembordero_int AS id_parcelaboleto,
    pib.id_cbitembordero_int AS id_boleto,
    pib.id_cbparcela_int AS id_parcela,
    (COALESCE((pib.tstamp_mdm_inclusao)::timestamp with time zone, pib."timestamp"))::timestamp without time zone AS data_inclusao,
    (COALESCE((pib.tstamp_mdm_alteracao)::timestamp with time zone, pib."timestamp"))::timestamp without time zone AS data_alteracao,
    COALESCE(pib.principal_num, (0)::double precision) AS principal,
    COALESCE(pib.cp_num, (0)::double precision) AS cp,
    pib.multa_num AS multa,
    pib.notificacao_num AS notificacao,
    COALESCE(pib.despesa_banco_num, (0)::double precision) AS despesa_banco,
    pib.desconto_num AS desconto,
    pib.abatimento_num AS abatimento,
    pib.juros_mora_num AS juros_mora,
    COALESCE(pib.honorarios_num, (0)::double precision) AS honorarios,
    pib.comissionamento_num AS comissionamento,
    pib.valor_total_num AS valor_boleto,
    pib.retido_num AS retido,
    pib.acrescimo_num AS acrescimo,
    pib.acrescimo_np_num AS despesas,
    pib.cp_original_num AS cp_original,
    pib.desconto_original_num AS desconto_original,
    NULL::text AS coringa1,
    NULL::text AS coringa2,
    NULL::text AS coringa3,
    NULL::text AS coringa4,
    NULL::text AS coringa5,
    NULL::text AS coringa6,
    NULL::text AS coringa7,
    NULL::text AS coringa8,
    NULL::text AS coringa9,
    NULL::text AS coringa10
   FROM public.cbparcelaitembordero pib;

--
-- TOC entry 1617 (class 1259 OID 42470)
-- Name: view_mdm_parcelapagamento; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_parcelapagamento AS
 SELECT ppg.id_cbparcelapagamento_int AS id_parcelapagamento,
    ppg.id_cbpagamento_int AS id_pagamento,
    ppg.id_cbparcela_int AS id_parcela,
    (COALESCE((ppg.tstamp_mdm_inclusao)::timestamp with time zone, ppg.tstamp))::timestamp without time zone AS data_inclusao,
    (COALESCE((ppg.tstamp_mdm_alteracao)::timestamp with time zone, ppg.tstamp))::timestamp without time zone AS data_alteracao,
    COALESCE((((ppg.valor_total_num - ppg.honorarios_num) - ppg.comissionamento_num) - ppg.retido_num), (0)::double precision) AS valor_repasse,
    COALESCE(ppg.principal_num, (0)::double precision) AS principal,
    COALESCE(ppg.cp_num, (0)::double precision) AS cp,
    ppg.multa_num AS multa,
    ppg.notificacao_num AS notificacao,
    COALESCE(ppg.despesa_banco_num, (0)::double precision) AS despesa_banco,
    ppg.desconto_num AS desconto,
    ppg.abatimento_num AS abatimento,
    ppg.juros_mora_num AS juros_mora,
    COALESCE(ppg.honorarios_num, (0)::double precision) AS honorarios,
    ppg.comissionamento_num AS comissionamento,
    ppg.valor_total_num AS valor_boleto,
    ppg.retido_num AS retido,
    ppg.acrescimo_num AS acrescimo,
    ppg.acrescimo_np_num AS despesas,
    NULL::text AS coringa1,
    NULL::text AS coringa2,
    NULL::text AS coringa3,
    NULL::text AS coringa4,
    NULL::text AS coringa5,
    NULL::text AS coringa6,
    NULL::text AS coringa7,
    NULL::text AS coringa8,
    NULL::text AS coringa9,
    NULL::text AS coringa10
   FROM public.cbparcelapagamento ppg;

--
-- TOC entry 1618 (class 1259 OID 42477)
-- Name: view_mdm_telefone; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.view_mdm_telefone AS
 SELECT tel.id_geqlcontato_int AS id_telefone,
    tel.id_geqlcliente_int AS id_cliente,
    qc.id_gecliente_int AS id_carteira,
    COALESCE((COALESCE(tel.tstamp_mdm_inclusao, tel.tstamp_inclusao))::timestamp with time zone, tel.tstamp) AS data_inclusao,
    COALESCE((tel.tstamp_mdm_alteracao)::timestamp with time zone, tel.tstamp) AS data_alteracao,
    qtc.codigo_str AS tipo_contato,
    NULL::text AS ddd,
    tel.contato_str AS telefone,
    tel.classificacao_str AS classificacao,
    tel.score,
        CASE
            WHEN ((tel.tabela_origem_str)::text ~~ 'ge070tmp%'::text) THEN 'T'::text
            WHEN ((tel.tabela_origem_str)::text = 'PR002'::text) THEN 'T'::text
            WHEN ((tel.tabela_origem_str)::text = 'GE212'::text) THEN 'T'::text
            WHEN ((tel.tabela_origem_str)::text = 'CB002'::text) THEN 'M'::text
            WHEN ((tel.tabela_origem_str)::text = 'tmppesquisaquali'::text) THEN 'B'::text
            WHEN (upper((tel.tabela_origem_str)::text) ~~ 'BASAO%'::text) THEN 'B'::text
            WHEN ((tel.tabela_origem_str)::text ~~ 'ge069tmp%'::text) THEN 'I'::text
            WHEN ((tel.tabela_origem_str)::text = 'robocaj'::text) THEN 'R'::text
            WHEN ((tel.tabela_origem_str)::text = 'caj'::text) THEN 'R'::text
            WHEN ((tel.tabela_origem_str)::text = 'robocacs'::text) THEN 'R'::text
            ELSE 'O'::text
        END AS origem,
    qr.descricao_str AS fornecedor,
    tel.whatsapp_str AS whatsapp,
        CASE
            WHEN (tel.contatopagoufacil_bit = (1)::bit(1)) THEN 'S'::text
            ELSE 'N'::text
        END AS pagou_facil,
        CASE
            WHEN (cbl.id_cbblacklistcliente_int IS NULL) THEN 'N'::text
            ELSE 'S'::text
        END AS black_list,
    cbl.data_inclusao_dat AS data_black_list,
    COALESCE(tel.excluido_bit, (0)::bit(1)) AS excluido,
    cor.coringa1_txt AS coringa1,
    cor.coringa2_txt AS coringa2,
    cor.coringa3_txt AS coringa3,
    cor.coringa4_txt AS coringa4,
    cor.coringa5_txt AS coringa5,
    cor.coringa6_txt AS coringa6,
    cor.coringa7_txt AS coringa7,
    cor.coringa8_txt AS coringa8,
    cor.coringa9_txt AS coringa9,
    cor.coringa10_txt AS coringa10
   FROM (((((((public.geqlcontato tel
     JOIN public.geqlcontrato qc ON ((qc.id_geqlcliente_int = tel.id_geqlcliente_int)))
     JOIN public.geqltipocontato qtc ON ((qtc.id_geqltipocontato_int = tel.id_geqltipocontato_int)))
     LEFT JOIN public.geqltratamento qt ON ((qt.id_geqltratamento_int = tel.id_geqltratamento_int)))
     LEFT JOIN public.geqlresponsavel qr ON ((qr.id_geqlresponsavel_int = qt.id_geqlresponsavel_int)))
     LEFT JOIN public.cbblacklist cb ON ((((cb.contato_str)::text = (tel.contato_str)::text) AND (cb.tipo_contato_str = 'T'::bpchar))))
     LEFT JOIN public.cbblacklistcliente cbl ON (((cbl.id_cbblacklist_int = cb.id_cbblacklist_int) AND (cbl.situacao_str = 'I'::bpchar))))
     LEFT JOIN public.coringageqlcontatomd2 cor ON ((cor.id_geqlcontato_int = tel.id_geqlcontato_int)));

--
-- TOC entry 1619 (class 1259 OID 42484)
-- Name: vmaxminboleto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vmaxminboleto AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    max(ib.valor_total_num) AS maior_boleto,
    min(ib.valor_total_num) AS menor_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1620 (class 1259 OID 42494)
-- Name: vqtdeboleto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdeboleto AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    count(DISTINCT ib.id_cbitembordero_int) AS qtde_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1621 (class 1259 OID 42500)
-- Name: vqtdeboletoemissao; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdeboletoemissao AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    ib.vencimento_dat,
    count(DISTINCT ib.id_cbitembordero_int) AS qtde_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text))
  GROUP BY us.id_geusuario_int, us.nomelogin_str, ib.vencimento_dat;

--
-- TOC entry 1622 (class 1259 OID 42507)
-- Name: vqtdeboletoexccan; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdeboletoexccan AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    count(DISTINCT ib.id_cbitembordero_int) AS qtde_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text) AND ((ib.pago_str IS NULL) OR ((ib.pago_str)::text <> ALL (ARRAY[('C'::character varying)::text, ('X'::character varying)::text]))))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1623 (class 1259 OID 42513)
-- Name: vqtdebolpagos; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdebolpagos AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    ib.vencimento_dat,
    count(*) AS qtde_boleto_pago,
    sum(ib.valor_total_num) AS total_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.vencimento_dat >= (('now'::text)::date - 20)) AND ((ib.pago_str)::text = 'S'::text))
  GROUP BY us.id_geusuario_int, us.nomelogin_str, ib.vencimento_dat;

--
-- TOC entry 1624 (class 1259 OID 42521)
-- Name: vqtdebolvencto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdebolvencto AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    ib.vencimento_dat,
    count(*) AS qtde_boleto,
    sum(ib.valor_total_num) AS total_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.vencimento_dat >= (('now'::text)::date - 20)) AND ((ib.pago_str IS NULL) OR ((ib.pago_str)::text <> ALL (ARRAY[('C'::character varying)::text, ('X'::character varying)::text]))))
  GROUP BY us.id_geusuario_int, us.nomelogin_str, ib.vencimento_dat;

--
-- TOC entry 1625 (class 1259 OID 42534)
-- Name: vqtdecontrato; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdecontrato AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    count(DISTINCT fu.id_cbcontrato_int) AS qtde_contrato
   FROM (public.geusuario us
     LEFT JOIN public.cbfollowup fu ON ((fu.id_geusuario_int = us.id_geusuario_int)))
  WHERE (fu.data_dat = ('now'::text)::date)
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1626 (class 1259 OID 42539)
-- Name: vqtdefup; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vqtdefup AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    sc.codigo_int,
    count(DISTINCT fu.id_cbcontrato_int) AS qtde_contrato
   FROM ((public.geusuario us
     LEFT JOIN public.cbfollowup fu ON ((fu.id_geusuario_int = us.id_geusuario_int)))
     JOIN public.cbsitcontato sc ON ((sc.id_cbsitcontato_int = fu.id_cbsitcontato_int)))
  WHERE (fu.data_dat = ('now'::text)::date)
  GROUP BY us.id_geusuario_int, us.nomelogin_str, sc.codigo_int;

--
-- TOC entry 1627 (class 1259 OID 42547)
-- Name: vregua; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vregua AS
 SELECT esregua.id_esregua_int AS idregua,
    esregua.id_gecliente_int AS idcliente,
    upper((esregua.descricao_str)::text) AS descricao
   FROM public.esregua
  ORDER BY esregua.descricao_str;

--
-- TOC entry 1628 (class 1259 OID 42552)
-- Name: vtiponegocio; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vtiponegocio AS
 SELECT cbtiponegocio.id_cbtiponegocio_int AS idtiponegocio,
    cbtiponegocio.id_gecliente_int AS idcliente,
    upper((cbtiponegocio.descricao_str)::text) AS descricao
   FROM public.cbtiponegocio
  ORDER BY cbtiponegocio.descricao_str;

--
-- TOC entry 1629 (class 1259 OID 42557)
-- Name: vusuario; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vusuario AS
 SELECT geusuario.id_geusuario_int AS idusuario,
    upper((geusuario.nomecompleto_str)::text) AS nome,
    geusuario.nomelogin_str AS login,
    geusuario.senha_str AS senha,
    geusuario.id_geclassificacaocontao_int AS idgrupocomissao,
    geusuario.id_geatuacao01_int AS idatuacao01,
    geusuario.id_geatuacao02_int AS idatuacao02,
    geusuario.id_geatuacao02_int AS idatuacao03,
    geusuario.ativo_str AS status
   FROM public.geusuario;

--
-- TOC entry 1630 (class 1259 OID 42563)
-- Name: vusuariocliente; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vusuariocliente AS
 SELECT DISTINCT geusuario.id_geusuario_int,
    upper((geusuario.nomecompleto_str)::text) AS nome,
    geusuario.nomelogin_str AS login,
    geusuario.codigo_rh_str AS nc,
    d.centrocusto_str AS centrocusto,
    geusuariocliente.id_gecliente_int AS idcliente,
    geusuariocliente.id_geclassificacaocontato_int AS idgrupocomissao,
    geusuariocliente.id_geatuacao01_int AS idatuacao01,
    geusuariocliente.id_geatuacao02_int AS idatuacao02,
    geusuariocliente.id_geatuacao03_int AS idatuacao03
   FROM (((public.geusuario
     JOIN public.gedepartamento ON ((gedepartamento.id_gedepartamento_int = geusuario.id_gedepartamento_int)))
     JOIN public.dblink('dbname=plngs port=5432 host=10.20.10.204 user=postgres password=c4Poqdkn'::text, 'select sysusuario.logon_str,
                 sysdepartamentocliente.id_syscliente_int,
                 sysfuncionario.centrocusto_str
            from sysusuario
                 inner join sysfuncionario on (sysfuncionario.id_sysfuncionario_int = sysusuario.id_sysfuncionario_int)
                 inner join sysdepartamento on (sysdepartamento.nome_str = sysfuncionario.centrocusto_str)
                 inner join sysdepartamentocliente on (sysdepartamentocliente.id_sysdepartamento_int = sysdepartamento.id_sysdepartamento_int)
                 inner join syshistoricofuncionario on
                         (syshistoricofuncionario.id_sysfuncionario_int =
                          sysfuncionario.id_sysfuncionario_int and
                          syshistoricofuncionario.data_demissao_dat is null)
           where sysfuncionario.datademissao_dat is null'::text) d(logon_str character varying, id_syscliente_int integer, centrocusto_str character varying) ON ((btrim((d.logon_str)::text) = btrim((geusuario.nomelogin_str)::text))))
     JOIN public.geusuariocliente ON ((geusuariocliente.id_geusuario_int = geusuario.id_geusuario_int)))
  WHERE (((geusuario.ativo_str)::text = '1'::text) AND (((gedepartamento.nome_str)::text = 'OPERAï¿½ï¿½O COBRANï¿½A'::text) OR ((gedepartamento.nome_str)::text = 'OPERAï¿½ï¿½O COBRANï¿½A PILOTO'::text)) AND (d.id_syscliente_int = geusuariocliente.id_gecliente_int))
  ORDER BY (upper((geusuario.nomecompleto_str)::text));

--
-- TOC entry 1631 (class 1259 OID 42571)
-- Name: vusuarioclientehist; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vusuarioclientehist AS
 SELECT DISTINCT geusuario.id_geusuario_int,
    upper((geusuario.nomecompleto_str)::text) AS nome,
    geusuario.nomelogin_str AS login,
    geusuario.codigo_rh_str AS nc,
    d.centrocusto_str AS centrocusto,
    geusuariocliente.id_gecliente_int AS idcliente,
    geusuariocliente.id_geclassificacaocontato_int AS idgrupocomissao,
    geusuariocliente.id_geatuacao01_int AS idatuacao01,
    geusuariocliente.id_geatuacao02_int AS idatuacao02,
    geusuariocliente.id_geatuacao03_int AS idatuacao03,
    d.data_admissao AS dataadmissao,
    d.data_demissao AS datademissao
   FROM (((public.geusuario
     JOIN public.gedepartamento ON ((gedepartamento.id_gedepartamento_int = geusuario.id_gedepartamento_int)))
     JOIN public.dblink('dbname=plngs port=5432 host=10.20.10.204 user=postgres password=c4Poqdkn'::text, 'select sysusuario.logon_str, syshistoricofuncionario.data_admissao_dat,
                 syshistoricofuncionario.data_demissao_dat,
                 sysdepartamentocliente.id_syscliente_int,
                 sysdepartamento.nome_str
            from sysusuario
                 inner join syshistoricofuncionario on (syshistoricofuncionario.id_sysfuncionario_int = sysusuario.id_sysfuncionario_int)
                 inner join sysdepartamento on (sysdepartamento.id_sysdepartamento_int = syshistoricofuncionario.id_sysdepartamento_int)
                 inner join sysdepartamentocliente on (sysdepartamentocliente.id_sysdepartamento_int = sysdepartamento.id_sysdepartamento_int)'::text) d(logon_str character varying, data_admissao date, data_demissao date, id_syscliente_int integer, centrocusto_str character varying) ON ((btrim((d.logon_str)::text) = btrim((geusuario.nomelogin_str)::text))))
     JOIN public.geusuariocliente ON ((geusuariocliente.id_geusuario_int = geusuario.id_geusuario_int)))
  WHERE (((geusuario.ativo_str)::text = '1'::text) AND (((gedepartamento.nome_str)::text = 'OPERAï¿½ï¿½O COBRANï¿½A'::text) OR ((gedepartamento.nome_str)::text = 'OPERAï¿½ï¿½O COBRANï¿½A PILOTO'::text)) AND (d.id_syscliente_int = geusuariocliente.id_gecliente_int) AND ((d.data_demissao IS NULL) OR (d.data_demissao >= (('now'::text)::date - 15))))
  ORDER BY (upper((geusuario.nomecompleto_str)::text));

--
-- TOC entry 1632 (class 1259 OID 42582)
-- Name: vvlrhonorarios; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vvlrhonorarios AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    (sum(ib.honorarios_num) + sum(ib.comissionamento_num)) AS honorarios
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1633 (class 1259 OID 42587)
-- Name: vvlrhonorariosexccan; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vvlrhonorariosexccan AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    (sum(ib.honorarios_num) + sum(ib.comissionamento_num)) AS honorarios
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text) AND ((ib.pago_str IS NULL) OR ((ib.pago_str)::text <> ALL (ARRAY[('C'::character varying)::text, ('X'::character varying)::text]))))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1634 (class 1259 OID 42598)
-- Name: vvlrtotalboleto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vvlrtotalboleto AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    sum(ib.valor_total_num) AS total_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1635 (class 1259 OID 42603)
-- Name: vvlrtotalboletoexccan; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vvlrtotalboletoexccan AS
 SELECT us.id_geusuario_int,
    us.nomelogin_str AS login,
    sum(ib.valor_total_num) AS total_boleto
   FROM (public.geusuario us
     LEFT JOIN public.cbitembordero ib ON ((ib.id_geusuario_boleto_int = us.id_geusuario_int)))
  WHERE ((ib.emissao_dat = ('now'::text)::date) AND ((ib.boleto_parcelamento_str)::text = '001'::text) AND ((ib.pago_str IS NULL) OR ((ib.pago_str)::text <> ALL (ARRAY[('C'::character varying)::text, ('X'::character varying)::text]))))
  GROUP BY us.id_geusuario_int, us.nomelogin_str;

--
-- TOC entry 1636 (class 1259 OID 42614)
-- Name: vw_4006; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_4006 AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    ('now'::text)::date AS data_evento_dat,
    fup.data_evento_dat AS data_evento_real,
    '4006'::text AS codigo_situacao_int,
    'ENVIADA CARTA EM (INFORMAR DATA DO EVENTO)'::text AS situacao_contato_str,
    '11/01/2005'::text AS data_dat,
    '1700'::text AS hora_tim,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    fup.id_cbsitcontato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int,
    par.situacao_int,
    fup.id_geusuario_int
   FROM ((((((((public.cbcontratoitaubanco ita
     JOIN public.cbfollowup fup ON ((ita.id_cbcontrato_int = fup.id_cbcontrato_int)))
     JOIN public.cbparcela par ON (((par.id_cbcontrato_int = fup.id_cbcontrato_int) AND (par.id_cbparcela_int = fup.id_cbparcela_int))))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbsitcontato sit ON ((sit.id_cbsitcontato_int = fup.id_cbsitcontato_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12071 (class 0 OID 0)
-- Dependencies: 1636
-- Name: VIEW vw_4006; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_4006 IS 'Arquivo 4006';

--
-- TOC entry 1637 (class 1259 OID 42625)
-- Name: vw_4006_2; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_4006_2 AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    ('now'::text)::date AS data_evento_dat,
    fup.data_evento_dat AS data_evento_real,
    '4006'::text AS codigo_situacao_int,
    'ENVIADA CARTA EM (INFORMAR DATA DO EVENTO)'::text AS situacao_contato_str,
    '11/01/2005'::text AS data_dat,
    '1700'::text AS hora_tim,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    '0'::text AS parcela_int,
    '0'::text AS vencimento_dat,
    ita.id_cbcontrato_int,
    fup.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    fup.id_cbsitcontato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int,
    '0'::text AS situacao_int,
    fup.id_geusuario_int
   FROM (((((((public.cbcontratoitaubanco ita
     JOIN public.cbfollowup fup ON ((ita.id_cbcontrato_int = fup.id_cbcontrato_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbsitcontato sit ON ((sit.id_cbsitcontato_int = fup.id_cbsitcontato_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12072 (class 0 OID 0)
-- Dependencies: 1637
-- Name: VIEW vw_4006_2; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_4006_2 IS 'Arquivo 4006';

--
-- TOC entry 1638 (class 1259 OID 42633)
-- Name: vw_baixabradrestr; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_baixabradrestr AS
 SELECT DISTINCT ON (bp.acordo_int, ct.id_cbcontrato_int) ct.contrato_str,
    ct.cpf_str,
    ct.nome_str,
    bp.data_pagamento_dat,
        CASE
            WHEN (substr((ib.parcelamento_str)::text, 1, 3) = '000'::text) THEN ib.valor_total_num
            ELSE NULL::double precision
        END AS valor_entrada,
        CASE
            WHEN (substr((ib.parcelamento_str)::text, 1, 3) = '000'::text) THEN ib.vencimento_dat
            ELSE NULL::date
        END AS data_entrada,
    substr((ib.parcelamento_str)::text, 5, 3) AS total_parcelas,
        CASE
            WHEN ((substr((ib.parcelamento_str)::text, 1, 3) <> '000'::text) OR (ib.parcelamento_str IS NULL)) THEN ib.valor_total_num
            ELSE NULL::double precision
        END AS valor_parcela,
        CASE
            WHEN ((substr((ib.parcelamento_str)::text, 1, 3) = '001'::text) OR (ib.parcelamento_str IS NULL)) THEN ib.vencimento_dat
            ELSE NULL::date
        END AS vencimento_primeira,
    ct.id_cbcontrato_int,
    bp.acordo_int,
    bp.enviado_str,
    ib.id_cbbordero_int,
    ib.id_cbitembordero_int,
    re.grupo_str
   FROM ((((((((public.cbboletopagamento bp
     JOIN public.cbitembordero ib ON ((bp.id_cbitembordero_int = ib.id_cbitembordero_int)))
     JOIN public.cbparcelaitembordero pi ON ((ib.id_cbitembordero_int = pi.id_cbitembordero_int)))
     JOIN public.cbparcela pa ON ((pi.id_cbparcela_int = pa.id_cbparcela_int)))
     JOIN public.esregua re ON ((pa.id_esregua_int = re.id_esregua_int)))
     JOIN public.cbcontratobradescocartao ct ON ((ib.id_cbcontrato_int = ct.id_cbcontrato_int)))
     JOIN public.cbbordero bo ON ((bo.id_cbbordero_int = ib.id_cbbordero_int)))
     JOIN public.cbconvenio co ON ((bo.id_cbconvenio_int = co.id_cbconvenio_int)))
     JOIN public.gefilial fl ON ((ct.id_gefilial_int = fl.id_gefilial_int)))
  WHERE (((bp.enviado_str)::text = ('N'::character varying)::text) AND (NOT (bp.id_cbcontrato_int IN ( SELECT DISTINCT cbboletopagamento.id_cbcontrato_int
           FROM public.cbboletopagamento
          WHERE ((cbboletopagamento.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbboletopagamento.acordo_int = bp.acordo_int) AND ((cbboletopagamento.enviado_str)::text = ('S'::character varying)::text))
          ORDER BY cbboletopagamento.id_cbcontrato_int))))
  ORDER BY bp.acordo_int, ct.id_cbcontrato_int;

--
-- TOC entry 12073 (class 0 OID 0)
-- Dependencies: 1638
-- Name: VIEW vw_baixabradrestr; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_baixabradrestr IS 'Baixa de restriï¿½ï¿½es - BRADESCO CARTOES';

--
-- TOC entry 1639 (class 1259 OID 42648)
-- Name: vw_batimentopan; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_batimentopan AS
 SELECT DISTINCT ON (c.id_cbcontrato_int) c.id_cbcontrato_int,
    c.contrato_str,
    c.nome_str,
    p.parcela_int,
    p.situacao_int,
    d.data_pre_distrib_dat,
    f.codigo_str AS reg_cobranca,
    c.id_cbsituacaocontrato_int,
    ('now'::text)::date AS data_geracao
   FROM (((public.cbcontratopan c
     JOIN public.gefilial f ON ((c.id_gefilial_int = f.id_gefilial_int)))
     JOIN public.cbparcela p ON ((c.id_cbcontrato_int = p.id_cbcontrato_int)))
     JOIN public.cbdistribparcela d ON ((p.id_cbparcela_int = d.id_cbparcela_int)))
  ORDER BY c.id_cbcontrato_int, p.id_cbparcela_int;

--
-- TOC entry 12074 (class 0 OID 0)
-- Dependencies: 1639
-- Name: VIEW vw_batimentopan; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_batimentopan IS 'Remessa para batimento do Panamericano PIC';

--
-- TOC entry 1640 (class 1259 OID 42659)
-- Name: vw_batimentopanam; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_batimentopanam AS
 SELECT DISTINCT ON (c.id_cbcontrato_int) c.id_cbcontrato_int,
    c.contrato_str,
    c.nome_str,
    p.parcela_int,
    p.situacao_int,
    d.data_pre_distrib_dat,
    f.codigo_str AS reg_cobranca,
    c.id_cbsituacaocontrato_int,
    ('now'::text)::date AS data_geracao
   FROM (((public.cbcontratopanam c
     JOIN public.gefilial f ON ((c.id_gefilial_int = f.id_gefilial_int)))
     JOIN public.cbparcela p ON ((c.id_cbcontrato_int = p.id_cbcontrato_int)))
     JOIN public.cbdistribparcela d ON ((p.id_cbparcela_int = d.id_cbparcela_int)))
  ORDER BY c.id_cbcontrato_int, p.id_cbparcela_int;

--
-- TOC entry 12075 (class 0 OID 0)
-- Dependencies: 1640
-- Name: VIEW vw_batimentopanam; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_batimentopanam IS 'Remessa para batimento da carteira 13-Panamericano';

--
-- TOC entry 1641 (class 1259 OID 42670)
-- Name: vw_blocklist_telefonesuspeito_386; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_blocklist_telefonesuspeito_386 AS
 SELECT ctr.contrato_str,
    386 AS carteira_int,
    ctn.id_geqlcontato_int,
    ctn.id_geqlcliente_int,
    ctn.id_geqltipocontato_int,
    ctn.contato_str,
    ctn.classificacao_str,
    ctn.tabela_origem_str,
    ctn.id_geqlendereco_int,
    ctn.id_geusuario_int,
    ctn.tstamp,
    ctn.observacao_str,
    ctn.ramal_str,
    ctn.nome_contato_str,
    ctn.cpf_str,
    ctn.id_geqltratamento_int,
    ctn.tstamp_inclusao,
    ctn.id_geqltratamentocontato_int,
    ctn.id_geusuario_inclusao_int,
    ctn.id_geqlcontrato_int,
    ctn.excluido_bit,
    ctn.score,
    ctn.tipo_pessoa_str,
    ctn.whatsapp_str,
    ctn.trava_feriado_str,
    ctn.id_gecliente_original_int,
    ctn.motivo_str,
    ctn.score_int,
    ctn.data_score_dat,
    ctn.id_pessoa_telefone_int,
    ctn.tstamp_envio,
    ctn.tstamp_retorno,
    ctn.contatopagoufacil_bit,
    ctn.tstamp_mdm_inclusao,
    ctn.tstamp_mdm_alteracao,
    ctn.ranking_lemit_int,
    ctn.data_alteracao_ranking_dat,
    ctn.score_lemit_int,
    ctn.data_alteracao_score_dat
   FROM (public.geqlcontato ctn
     JOIN public.geqlcontrato ctr ON ((ctn.id_geqlcliente_int = ctr.id_geqlcliente_int)))
  WHERE ((ctn.observacao_str)::text ~~ '%TELEFONE SUSPEITO%'::text)
  ORDER BY ctn.tstamp DESC;

--
-- TOC entry 1642 (class 1259 OID 42677)
-- Name: vw_cbitembordero; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_cbitembordero AS
 SELECT cbitembordero.id_cbitembordero_int,
    cbitembordero.id_cbbordero_int,
    cbitembordero.id_cbcontrato_int,
    cbitembordero.id_geusuario_boleto_int,
    cbitembordero.emissao_dat,
    (cbitembordero.boleto_gravacao_tim)::character varying AS boleto_gravacao_tim,
    date_part('HOUR'::text, cbitembordero.boleto_gravacao_tim) AS faixa_hora
   FROM public.cbitembordero;

--
-- TOC entry 1643 (class 1259 OID 42685)
-- Name: vw_custaspanam; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_custaspanam AS
 SELECT ('now'::text)::date AS data_mov,
    cbcontratopanam.id_cbcontrato_int,
    '326'::text AS codigo_assessoria,
    geempresa.codigo_str,
    geempresa.nome_str AS empresa,
    cbtipodespesa.codigo_int,
    cbreembolso.data_lancamento_dat,
    cbcontratopanam.nome_str,
    cbcontratopanam.cpf_str,
    cbcontratopanam.contrato_str,
    cbcontratopanam.numero_total_parcelas_int AS plano,
    cbreembolso.data_vencimento_dat,
    cbreembolso.parcela_int,
    cbreembolso.valor_num,
    cbcontratopanam.id_cbtiponegocio_int,
    cbtipodespesa.id_cbtipodespesa_int,
    cbreembolso.id_cbreembolso_int,
    cbreembolso.id_cbparcela_int,
    cbreembolso.data_comprov_dat
   FROM (((public.cbreembolso
     JOIN public.cbtipodespesa ON ((cbreembolso.id_cbtipodespesa_int = cbtipodespesa.id_cbtipodespesa_int)))
     JOIN public.cbcontratopanam ON ((cbreembolso.id_cbcontrato_int = cbcontratopanam.id_cbcontrato_int)))
     JOIN public.geempresa ON ((cbcontratopanam.id_geempresa_int = cbcontratopanam.id_geempresa_int)));

--
-- TOC entry 12076 (class 0 OID 0)
-- Dependencies: 1643
-- Name: VIEW vw_custaspanam; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_custaspanam IS 'Custas de Assessoria';

--
-- TOC entry 1644 (class 1259 OID 42692)
-- Name: vw_directrio; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_directrio AS
 SELECT cbconvenio.codigo_emissao_str AS codigo_empresa_directrio,
    cbconvenio.codigo_servico_str AS codigo_servico,
    geempresa.nome_str AS nome_empresa_str,
    ('now'::text)::date AS data_geracao_dat,
    ('now'::text)::time(6) with time zone AS hora_geracao_tim,
    cbconvenio.rzsocial_cedente_str AS nome_cedente,
    cbconvenio.cgc_cnpj_str AS cgc_cedente,
    gefilial.endereco1_str AS endereco_cedente,
    gefilial.endereco2_str AS bairro_cedente,
    gecidade.nome_str AS cidade_cedente,
    gecidade.uf_str AS uf_cedente,
    gefilial.cep_str AS cep_cedente,
    fibanco.cod_banco_str AS codigo_banco,
    ficcbanco.agencia_str,
    (((ficcbanco.agencia_str)::text || ('/'::character varying)::text) || (cbconvenio.cedente_str)::text) AS codigo_cedente,
    cbconvenio.cedente_str AS codigo_cedente_2,
    cbconvenio.login_web_str AS login_web,
    cbitembordero.vencimento_dat AS data_vencimento,
    cbitembordero.emissao_dat AS data_emissao,
    cbcontrato.contrato_str AS numero_documento,
    cbconvenio.especie_str,
    cbconvenio.aceite_str,
    (((((cbconvenio.carteira_str)::text || ('/'::character varying)::text) || btrim(to_char(to_number((cbitembordero.nosso_numero_str)::text, '00000000'::text), '00000000'::text))) || '-'::text) || btrim((cbitembordero.dv_int)::text)) AS nosso_numero,
    (((((cbconvenio.carteira_str)::text || ('/'::character varying)::text) || btrim(to_char(to_number((cbitembordero.nosso_numero_str)::text, '0000000000'::text), '0000000000'::text))) || '-'::text) || btrim((cbitembordero.dv_int)::text)) AS nosso_numero_panam,
    (((cbitembordero.nosso_numero_str)::text || ('-'::character varying)::text) || btrim((cbitembordero.dv_int)::text)) AS nosso_numero_honda,
    cbitembordero.nosso_numero_str AS nosso_numero_bb,
    (((((cbconvenio.carteira_str)::text || ('/'::character varying)::text) || btrim(to_char(to_number((cbitembordero.nosso_numero_str)::text, '00000000000'::text), '00000000000'::text))) || '-'::text) || btrim((cbitembordero.dv_int)::text)) AS nosso_numero_bradcartoes,
    (((((cbconvenio.carteira_str)::text || ('/'::character varying)::text) || btrim(to_char(to_number((cbitembordero.nosso_numero_str)::text, '00000000000'::text), '00000000000'::text))) || '-'::text) || btrim((cbitembordero.dv_int)::text)) AS nosso_numero_bmcbrad,
    cbconvenio.carteira_str,
    cbitembordero.valor_total_num AS valor_documento,
    cbcontrato.nome_str,
    cbcontrato.cpf_str,
        CASE
            WHEN ((cbcontrato.endereco_str IS NOT NULL) AND (btrim((cbcontrato.endereco_str)::text) <> ''::text)) THEN cbcontrato.endereco_str
            WHEN ((cbcontrato.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontrato.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontrato.endereco_trabalho_str
            ELSE NULL::character varying
        END AS endereco_str,
        CASE
            WHEN ((cbcontrato.endereco_str IS NOT NULL) AND (btrim((cbcontrato.endereco_str)::text) <> ''::text)) THEN cbcontrato.bairro_str
            WHEN ((cbcontrato.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontrato.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontrato.bairro_trabalho_str
            ELSE NULL::character varying
        END AS bairro_str,
    cbcontrato.complemento_str,
        CASE
            WHEN ((cbcontrato.endereco_str IS NOT NULL) AND (btrim((cbcontrato.endereco_str)::text) <> ''::text)) THEN cbcontrato.cidade_str
            WHEN ((cbcontrato.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontrato.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontrato.cidade_trabalho_str
            ELSE NULL::character varying
        END AS cidade_str,
        CASE
            WHEN ((cbcontrato.endereco_str IS NOT NULL) AND (btrim((cbcontrato.endereco_str)::text) <> ''::text)) THEN cbcontrato.estado_str
            WHEN ((cbcontrato.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontrato.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontrato.estado_trabalho_str
            ELSE NULL::character varying
        END AS estado_str,
        CASE
            WHEN ((cbcontrato.endereco_str IS NOT NULL) AND ((cbcontrato.endereco_str)::text <> (''::character varying)::text)) THEN cbcontrato.cep_str
            WHEN ((cbcontrato.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontrato.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontrato.cep_trabalho_str
            ELSE NULL::character varying
        END AS cep_str,
    cbcontrato.nome_avalista1_str,
    cbcontrato.cpf_avalista1_str,
    substr((cbitembordero.cod_barra_str)::text, 20, 25) AS cod_barra_str,
    cbitembordero.cod_barra_str AS codigo_barra_str,
    substr((cbitembordero.cod_barra_str)::text, 31, 1) AS digitao_real_str,
    cbconvenio.dias_perm_web_int AS dias_permanencia_web,
        CASE
            WHEN (cbitembordero.valor_desconto_num > (0)::double precision) THEN ((('Conceder desconto de '::text || replace(btrim(to_char(cbitembordero.valor_desconto_num, '999,999,990.00'::text)), '.'::text, ','::text)) || ' se pago atï¿½ '::text) || to_char((cbitembordero.data_desconto_dat)::timestamp with time zone, 'DD/MM/YYYY'::text))
            ELSE NULL::text
        END AS instrucao_1_ficha_str,
    ('Nï¿½o receber apï¿½s o vencimento em: '::text || to_char((cbitembordero.vencimento_dat)::timestamp with time zone, 'DD/MM/YYYY'::text)) AS instrucao_2_ficha_str,
    cbconvenio.instrucao_3_ficha_str,
    cbconvenio.instrucao_4_ficha_str,
    cbitembordero.instrucao_1_str AS instrucao_5_ficha_str,
    cbitembordero.instrucao_2_str AS instrucao_6_ficha_str,
    ('Contrato: '::text || btrim((cbcontrato.contrato_str)::text)) AS instrucao_7_ficha_str,
    'Parcela: '::text AS instrucao_8_ficha_str,
        CASE
            WHEN (cbitembordero.valor_desconto_num > (0)::double precision) THEN ((('Conceder desconto de '::text || replace(btrim(to_char(cbitembordero.valor_desconto_num, '999,999,990.00'::text)), '.'::text, ','::text)) || ' se pago atï¿½ '::text) || to_char((cbitembordero.data_desconto_dat)::timestamp with time zone, 'DD/MM/YYYY'::text))
            ELSE NULL::text
        END AS instrucao_1_recibo_str,
    cbconvenio.instrucao_2_recibo_str,
    ('Nï¿½o receber apï¿½s o vencimento em: '::text || to_char((cbitembordero.vencimento_dat)::timestamp with time zone, 'DD/MM/YYYY'::text)) AS instrucao_3_recibo_str,
    cbconvenio.instrucao_4_recibo_str,
    ('Contrato: '::text || btrim((cbcontrato.contrato_str)::text)) AS instrucao_5_recibo_str,
    'Parcela: '::text AS instrucao_6_recibo_str,
    cbconvenio.instrucao_7_recibo_str,
    cbitembordero.instrucao_1_str AS instrucao_8_recibo_str,
    cbitembordero.instrucao_2_str AS instrucao_9_recibo_str,
    ('Destino: '::text || btrim((cbitembordero.destino_str)::text)) AS instrucao_10_recibo_str,
    geempresa.id_geempresa_int,
    gefilial.id_gefilial_int,
    cbtiponegocio.id_cbtiponegocio_int,
    cbbordero.data_dat AS data_bordero_dat,
    fibanco.cod_banco_str,
    ficcbanco.conta_str,
    cbbordero.gerado_str,
    cbbordero.id_cbbordero_int,
    cbconvenio.id_cbconvenio_int,
    cbcontrato.tipo_pessoa_str,
    cbcontrato.tipo_pessoa_avalista1_str,
    cbitembordero.id_cbitembordero_int,
    cbcontrato.numero_total_parcelas_int,
    cbconvenio.local_pagamento_str,
    ''::text AS msg_adicional1,
    ''::text AS msg_adicional2,
    cbtiponegocio.mostra_parcela_str,
    cbitembordero.linha_digitavel_str
   FROM ((((((((((public.cbconvenio
     JOIN public.cbbordero ON ((cbconvenio.id_cbconvenio_int = cbbordero.id_cbconvenio_int)))
     JOIN public.fibanco ON (((fibanco.id_fibanco_int = cbbordero.id_fibanco_int) AND (fibanco.id_fibanco_int = cbconvenio.id_fibanco_int))))
     JOIN public.ficcbanco ON (((ficcbanco.id_fibanco_int = fibanco.id_fibanco_int) AND (ficcbanco.id_ficcbanco_int = cbconvenio.id_ficcbanco_int))))
     JOIN public.cbitembordero ON ((cbbordero.id_cbbordero_int = cbitembordero.id_cbbordero_int)))
     JOIN public.cbcontrato ON ((cbitembordero.id_cbcontrato_int = cbcontrato.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbcontrato.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int)))
     JOIN public.gecliente ON ((gecliente.id_gecliente_int = cbcontrato.id_gecliente_int)))
     JOIN public.geempresa ON ((geempresa.id_geempresa_int = cbcontrato.id_geempresa_int)))
     JOIN public.gefilial ON ((gefilial.id_gefilial_int = cbbordero.id_gefilial_int)))
     JOIN public.gecidade ON ((gefilial.id_gecidade_int = gecidade.id_gecidade_int)));

--
-- TOC entry 12077 (class 0 OID 0)
-- Dependencies: 1644
-- Name: VIEW vw_directrio; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_directrio IS 'Usado para remessa borderï¿½ terceirizada pela DirectRio';

--
-- TOC entry 1645 (class 1259 OID 42709)
-- Name: vw_estoque_geral; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_estoque_geral AS
 SELECT vw_g.id_cbcontrato_int AS vw_id_cbcontrato_int,
    vw_g.id_cbparcela_int AS vw_id_cbparcela_int,
    vw_g.cidade AS vw_cidade,
    vw_g.estado AS vw_estado,
    vw_g.regiao AS vw_regiao,
    vw_g.data_stand_by AS vw_data_stand_by,
    vw_g.score AS vw_score,
    vw_g.produto AS vw_produto,
    vw_g.lote AS vw_lote,
    vw_g.data_permanencia AS vw_data_permanencia,
    vw_g.da AS vw_da,
    vw_g.saldo_devedor AS vw_saldo_devedor,
        CASE
            WHEN ((vw_g.da >= 40) AND (vw_g.da <= 60)) THEN '7.5%'::text
            WHEN ((vw_g.da > 60) AND (vw_g.da <= 90)) THEN '20%'::text
            WHEN ((vw_g.da > 90) AND (vw_g.da <= 120)) THEN '20%'::text
            WHEN ((vw_g.da > 120) AND (vw_g.da <= 180)) THEN '30%'::text
            WHEN ((vw_g.da > 180) AND (vw_g.da <= 270)) THEN '50%'::text
            WHEN ((vw_g.da > 270) AND (vw_g.da <= 360)) THEN '50%'::text
            WHEN ((vw_g.da > 360) AND (vw_g.da <= 540)) THEN '70%'::text
            WHEN ((vw_g.da > 540) AND (vw_g.da <= 720)) THEN '70%'::text
            WHEN ((vw_g.da > 720) AND (vw_g.da <= 1101)) THEN '80%'::text
            WHEN (vw_g.da > 1101) THEN '80%'::text
            ELSE NULL::text
        END AS vw_porcentagem_a_vista,
    vw_g.cod_regua AS vw_cod_regua,
    vw_g.desc_regua AS vw_desc_regua,
    vw_g.primeira_distrib AS vw_primeira_distrib,
    vw_g.data_contrato AS vw_data_contrato,
    vw_g.data_ultimo_contato_operador AS vw_data_ultimo_contato_operacao,
    vw_g.data_limite_retorno AS vw_data_limite_retorno,
    vw_g.negativacao AS vw_negativacao,
    vw_g.campanha AS vw_campanha,
    vw_g.valor_maximo AS vw_valor_maximo,
    vw_g.qtde_boletos AS vw_qtde_boletos,
    vw_g.valor_liquido AS vw_valor_liquido,
    vw_g.agencia AS vw_agencia,
    vw_g.data_pagamento AS vw_data_pagamento,
    vw_g.telefone_classificado AS vw_telefone_classificado,
    vw_g.cod_tipo_veiculo AS vw_cod_tipo_veiculo,
    vw_g.desc_tipo_veiculo AS vw_desc_tipo_veiculo,
    vw_g.parcela01_valor_total AS vw_parcela01_valor_total,
    vw_g.parcela03_valor_total AS vw_parcela03_valor_total,
    vw_g.parcela12_valor_total AS vw_parcela12_valor_total,
    vw_g.parcela24_valor_total AS vw_parcela24_valor_total,
    vw_g.parcela36_valor_total AS vw_parcela36_valor_total,
    vw_g.vlrcl AS vw_vlrcl,
    vw_g.qtdiasatr AS vw_qtdiasatr,
    vw_g.cdorg AS vw_cdorg,
    vw_g.cdfase AS vw_cdfase,
    vw_g.dtfila AS vw_dtfila,
    vw_g.hragend AS vw_hragend,
    vw_g.cdcliente AS vw_cdcliente,
    vw_g.idmaiscontr AS vw_idmaiscontr,
    vw_g.sgsistcontr AS vw_sgsistcontr,
    vw_g.idseraymo AS vw_idseraymo,
    vw_g.idsermerc AS vw_idsermerc,
    vw_g.idcrb AS vw_idcrb,
    vw_g.idappscore AS vw_idappscore,
    vw_g.idcolecscore AS vw_idcolecscore,
    vw_g.nvrisco AS vw_nvrisco,
    vw_g.fxplacontr AS vw_fxplacontr,
    vw_g.fxparatraso AS vw_fxparatraso,
    vw_g.fxperentr AS vw_fxperentr,
    vw_g.fxatraso AS vw_fxatraso,
    vw_g.cdempresa AS vw_cdempresa,
    vw_g.cdsegm AS vw_cdsegm,
    vw_g.cdregiao AS vw_cdregiao,
    vw_g.grsubsegm AS vw_grsubsegm,
    vw_g.scorecobranca AS vw_scorecobranca,
    vw_g.data_baixa AS vw_data_baixa,
    vw_g.score_bvs AS vw_score_bvs,
    vw_g.faixa_etaria AS vw_faixa_etaria,
    vw_g.faixa_score AS vw_faixa_score,
    vw_g.data_org_atraso AS vw_data_org_atraso,
    vw_g.mci AS vw_mci,
    vw_g.qtde_dias_sem_acionamento AS vw_qtde_dias_sem_acionamento,
    vw_g.fgo AS vw_fgo,
    vw_g.prazo_solucao AS vw_prazo_solucao,
    vw_g.valor_montante AS vw_valor_montante,
    vw_g.prazo_carne AS vw_prazo_carne,
    vw_g.concessionaria AS vw_concessionaria,
    vw_g.modelo AS vw_modelo,
    vw_g.data_nascimento AS vw_data_nascimento,
    vw_g.valor_minimo AS vw_valor_minimo,
    vw_g.status AS vw_status,
    vw_g.cod_cobranca AS vw_cod_cobranca,
    vw_g.radarspc AS vw_radarspc,
    vw_g.extra01 AS vw_extra01,
    vw_g.extra02 AS vw_extra02,
    vw_g.extra03 AS vw_extra03,
    vw_g.extra04 AS vw_extra04,
    vw_g.extra05 AS vw_extra05
   FROM ( SELECT vw_c.id_cbcontrato_int,
            vw_p.id_cbparcela_int,
                CASE
                    WHEN ((( SELECT en.cidade_str
                       FROM public.geqlendereco en
                      WHERE ((en.id_geqlcliente_int = vw_qct.id_geqlcliente_int) AND ((en.excluido_bit)::text = '0'::text))
                      ORDER BY en.classificacao_str
                     LIMIT 1) IS NULL) OR ((( SELECT en.cidade_str
                       FROM public.geqlendereco en
                      WHERE ((en.id_geqlcliente_int = vw_qct.id_geqlcliente_int) AND ((en.excluido_bit)::text = '0'::text))
                      ORDER BY en.classificacao_str
                     LIMIT 1))::text = ''::text)) THEN ((vw_c.cidade_str)::text)::character varying
                    ELSE ( SELECT en.cidade_str
                       FROM public.geqlendereco en
                      WHERE (en.id_geqlcliente_int = vw_qct.id_geqlcliente_int)
                      ORDER BY en.classificacao_str
                     LIMIT 1)
                END AS cidade,
                CASE
                    WHEN ((( SELECT en1.estado_str
                       FROM public.geqlendereco en1
                      WHERE ((en1.id_geqlcliente_int = vw_qct.id_geqlcliente_int) AND ((en1.excluido_bit)::text = '0'::text))
                      ORDER BY en1.classificacao_str
                     LIMIT 1) IS NULL) OR ((( SELECT en1.estado_str
                       FROM public.geqlendereco en1
                      WHERE ((en1.id_geqlcliente_int = vw_qct.id_geqlcliente_int) AND ((en1.excluido_bit)::text = '0'::text))
                      ORDER BY en1.classificacao_str
                     LIMIT 1))::text = ''::text)) THEN vw_c.estado_str
                    ELSE ( SELECT en1.estado_str
                       FROM public.geqlendereco en1
                      WHERE (en1.id_geqlcliente_int = vw_qct.id_geqlcliente_int)
                      ORDER BY en1.classificacao_str
                     LIMIT 1)
                END AS estado,
                CASE
                    WHEN (upper((vw_c.estado_str)::text) = ANY (ARRAY['MT'::text, 'MS'::text, 'DF'::text, 'GO'::text])) THEN 'CENTRO OESTE'::text
                    WHEN (upper((vw_c.estado_str)::text) = ANY (ARRAY['SE'::text, 'PE'::text, 'AL'::text, 'PB'::text, 'CE'::text, 'RN'::text, 'PI'::text, 'MA'::text, 'BA'::text])) THEN 'NORDESTE'::text
                    WHEN (upper((vw_c.estado_str)::text) = ANY (ARRAY['PA'::text, 'AM'::text, 'AP'::text, 'RR'::text, 'AC'::text, 'TO'::text, 'RO'::text])) THEN 'NORTE'::text
                    WHEN (upper((vw_c.estado_str)::text) = ANY (ARRAY['RJ'::text, 'SP'::text, 'ES'::text, 'MG'::text])) THEN 'SUDESTE'::text
                    WHEN (upper((vw_c.estado_str)::text) = ANY (ARRAY['PR'::text, 'SC'::text, 'RS'::text])) THEN 'SUL'::text
                    ELSE NULL::text
                END AS regiao,
            vw_c.data_stand_by_dat AS data_stand_by,
            vw_c.produto_str AS produto,
            ''::character varying AS lote,
            vw_p.data_performance_dat AS data_permanencia,
            (('now'::text)::date - vw_p.data_vencimento_dat) AS da,
            (vw_p.valor_principal_num * (( SELECT count(*) AS count
                   FROM public.cbparcela vw_p2
                  WHERE ((vw_p2.id_cbcontrato_int = vw_c.id_cbcontrato_int) AND (vw_p2.data_vencimento_dat < ('now'::text)::date) AND (vw_p2.situacao_int <> ALL (ARRAY[4, 6])))))::double precision) AS saldo_devedor,
            COALESCE(vw_r.codigo_int, (0)::bigint) AS cod_regua,
            COALESCE(vw_r.descricao_str, ''::character varying) AS desc_regua,
            vw_d.data_pre_distrib_dat AS primeira_distrib,
            vw_c.data_contrato_dat AS data_contrato,
            NULL::date AS data_ultimo_contato_operador,
            NULL::date AS data_limite_retorno,
            ''::character varying AS negativacao,
            ''::character varying AS campanha,
            (0.00)::double precision AS valor_maximo,
            0 AS qtde_boletos,
            (0.00)::double precision AS valor_liquido,
            ''::character varying AS agencia,
            NULL::date AS data_pagamento,
            ''::character varying AS telefone_classificado,
            ''::character varying AS cod_tipo_veiculo,
            ''::character varying AS desc_tipo_veiculo,
            (0.00)::double precision AS parcela01_valor_total,
            (0.00)::double precision AS parcela03_valor_total,
            (0.00)::double precision AS parcela12_valor_total,
            (0.00)::double precision AS parcela24_valor_total,
            (0.00)::double precision AS parcela36_valor_total,
            (0.00)::double precision AS vlrcl,
            0 AS qtdiasatr,
            ''::character varying AS cdorg,
            ''::character varying AS cdfase,
            NULL::date AS dtfila,
            ''::character varying AS hragend,
            ''::character varying AS cdcliente,
            ''::character varying AS idmaiscontr,
            ''::character varying AS sgsistcontr,
            ''::character varying AS idseraymo,
            ''::character varying AS idsermerc,
            ''::character varying AS idcrb,
            ''::character varying AS idappscore,
            ''::character varying AS idcolecscore,
            ''::character varying AS nvrisco,
            ''::character varying AS fxplacontr,
            ''::character varying AS fxparatraso,
            ''::character varying AS fxperentr,
            ''::character varying AS fxatraso,
            ''::character varying AS cdempresa,
            ''::character varying AS cdsegm,
            ''::character varying AS cdregiao,
            ''::character varying AS grsubsegm,
            ''::character varying AS scorecobranca,
            NULL::date AS data_baixa,
            ''::character varying AS score_bvs,
            ''::character varying AS faixa_etaria,
            ''::character varying AS score,
            ''::character varying AS faixa_score,
            NULL::date AS data_org_atraso,
            0 AS mci,
            0 AS qtde_dias_sem_acionamento,
            (0)::bit(1) AS fgo,
            NULL::date AS prazo_solucao,
            (0.00)::double precision AS valor_montante,
            NULL::character varying AS prazo_carne,
            ''::character varying AS concessionaria,
            ''::character varying AS modelo,
            vw_c.dt_nascimento_dat AS data_nascimento,
            (0.00)::double precision AS valor_minimo,
            ''::character varying AS status,
            ''::character varying AS cod_cobranca,
            ''::character varying AS radarspc,
            0 AS extra01,
            0 AS extra02,
            0 AS extra03,
            0 AS extra04,
            0 AS extra05
           FROM (((((public.cbcontrato vw_c
             JOIN public.cbparcela vw_p ON ((vw_p.id_cbcontrato_int = vw_c.id_cbcontrato_int)))
             LEFT JOIN public.esregua vw_r ON ((vw_r.id_esregua_int = vw_p.id_esregua_int)))
             LEFT JOIN public.geqlcontrato vw_qct ON ((vw_qct.id_cbcontrato_int = vw_c.id_cbcontrato_int)))
             LEFT JOIN public.cbdistribparcela vw_d ON ((vw_d.id_cbparcela_int = vw_p.id_cbparcela_int)))
             LEFT JOIN public.cbetapa vw_e ON ((vw_e.id_cbetapa_int = vw_c.id_cbetapa_int)))
          WHERE ((vw_c.id_cbsituacaocontrato_int <> 6) AND (vw_p.situacao_int <> ALL (ARRAY[4, 6])))) vw_g;

--
-- TOC entry 1646 (class 1259 OID 42714)
-- Name: vw_insereabertobanco; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_insereabertobanco AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
        CASE
            WHEN ((ret.sitcontato_int = (4006)::bigint) OR (ret.sitcontato_int = (4007)::bigint) OR (ret.sitcontato_int = (4071)::bigint) OR ((ret.sitcontato_int >= (4014)::bigint) AND (ret.sitcontato_int <= (4017)::bigint))) THEN ('now'::text)::date
            ELSE
            CASE
                WHEN ((ret.sitcontato_int = (4008)::bigint) OR (ret.sitcontato_int = (4032)::bigint) OR (ret.sitcontato_int = (4035)::bigint)) THEN (('now'::text)::date + 2)
                ELSE NULL::date
            END
        END AS data_evento_dat,
    ret.sitcontato_int AS codigo_situacao_int,
    ' '::text AS situacao_contato_str,
    ('now'::text)::date AS data_dat,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    ret.parcela_int,
    ret.vencimento_dat,
    ita.id_cbcontrato_int,
    ret.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM ((((((public.cbcontratoitaubanco ita
     JOIN public.retornoitaufup ret ON ((ret.id_cbcontrato_int = ita.id_cbcontrato_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)))
  WHERE ((ret.tipo_str)::text = ('3'::character varying)::text);

--
-- TOC entry 12078 (class 0 OID 0)
-- Dependencies: 1646
-- Name: VIEW vw_insereabertobanco; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_insereabertobanco IS 'Fup Parcelas em Aberto - ITAUBANCO';

--
-- TOC entry 1647 (class 1259 OID 42722)
-- Name: vw_insereabertoitau; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_insereabertoitau AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
        CASE
            WHEN ((ret.sitcontato_int = (4006)::bigint) OR (ret.sitcontato_int = (4007)::bigint) OR (ret.sitcontato_int = (4071)::bigint) OR ((ret.sitcontato_int >= (4014)::bigint) AND (ret.sitcontato_int <= (4017)::bigint))) THEN ('now'::text)::date
            ELSE
            CASE
                WHEN ((ret.sitcontato_int = (4008)::bigint) OR (ret.sitcontato_int = (4032)::bigint) OR (ret.sitcontato_int = (4035)::bigint)) THEN (('now'::text)::date + 2)
                ELSE NULL::date
            END
        END AS data_evento_dat,
    ret.sitcontato_int AS codigo_situacao_int,
    ' '::text AS situacao_contato_str,
    ('now'::text)::date AS data_dat,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    ret.parcela_int,
    ret.vencimento_dat,
    ita.id_cbcontrato_int,
    ret.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM ((((((public.cbcontratoitau ita
     JOIN public.retornoitaufup ret ON ((ret.id_cbcontrato_int = ita.id_cbcontrato_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)))
  WHERE ((ret.tipo_str)::text = ('3'::character varying)::text);

--
-- TOC entry 12079 (class 0 OID 0)
-- Dependencies: 1647
-- Name: VIEW vw_insereabertoitau; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_insereabertoitau IS 'Fup Parcelas em Aberto - Itaï¿½';

--
-- TOC entry 1648 (class 1259 OID 42732)
-- Name: vw_insereabertopic; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_insereabertopic AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    ret.data_evento_dat,
    ret.sitcontato_int AS codigo_situacao_int,
    ' '::text AS situacao_contato_str,
    ('now'::text)::date AS data_dat,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    ret.parcela_int,
    ret.vencimento_dat,
    ita.id_cbcontrato_int,
    ret.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM ((((((public.cbcontratoitaupic ita
     JOIN public.retornoitaufup ret ON ((ret.id_cbcontrato_int = ita.id_cbcontrato_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)))
  WHERE ((ret.tipo_str)::text = ('3'::character varying)::text);

--
-- TOC entry 12080 (class 0 OID 0)
-- Dependencies: 1648
-- Name: VIEW vw_insereabertopic; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_insereabertopic IS 'Fup Parcelas em Aberto - PIC';

--
-- TOC entry 1649 (class 1259 OID 42741)
-- Name: vw_itau; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_itau AS
 SELECT geempresa.nome_str AS nome_cedente,
    geempresa.cgc_str AS cgc_cedente,
    gefilial.codigo_str AS filial,
        CASE
            WHEN (cbbordero.modelo_carta_int = 4) THEN 9
            WHEN ((cbbordero.modelo_carta_int = 0) OR (cbbordero.modelo_carta_int = 1) OR (cbbordero.modelo_carta_int = 2) OR (cbbordero.modelo_carta_int = 3)) THEN int4(cbbordero.modelo_carta_int)
            ELSE '-1'::integer
        END AS modelo_carta_int,
    cbbordero.data_dat AS data_bordero_dat,
    cbitembordero.id_cbitembordero_int,
    cbitembordero.nosso_numero_str,
    cbitembordero.vencimento_dat,
    cbitembordero.comando_str,
    cbitembordero.valor_total_num,
    to_char(('now'::text)::timestamp(6) with time zone, 'dd/mm/yyyy'::text) AS data_dat,
    cbitembordero.valor_desconto_num AS desconto_num,
        CASE
            WHEN (cbitembordero.data_desconto_dat IS NULL) THEN to_char(0, '0'::text)
            ELSE to_char(timestamptz(cbitembordero.data_desconto_dat), 'dd/mm/yyyy'::text)
        END AS data_desconto_dat,
    ( SELECT count(cbitembordero_1.id_cbitembordero_int) AS count
           FROM public.cbitembordero cbitembordero_1
          WHERE (cbitembordero_1.id_cbbordero_int = cbbordero.id_cbbordero_int)) AS quantidade,
    ( SELECT sum(cbitembordero_1.valor_total_num) AS sum
           FROM public.cbitembordero cbitembordero_1
          WHERE (cbitembordero_1.id_cbbordero_int = cbbordero.id_cbbordero_int)) AS valor_total,
    fibanco.cod_banco_str,
    fibanco.nome_str AS nome_banco,
    cbconvenio.carteira_str,
    cbconvenio.especie_str,
    cbconvenio.aceite_str,
    fibanco.mensagem1_str,
        CASE
            WHEN (fibanco.mensagem1_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem1_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local1,
    (('Destino: '::character varying)::text || (cbitembordero.destino_str)::text) AS mensagem2,
    '3'::text AS local2,
    fibanco.mensagem3_str,
        CASE
            WHEN (fibanco.mensagem3_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem3_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local3,
    fibanco.mensagem4_str,
        CASE
            WHEN (fibanco.mensagem4_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem4_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local4,
    '3'::text AS local5,
    ficcbanco.conta_str,
    ficcbanco.agencia_str,
    cbcontratoitau.contrato_str AS campo_especial,
    cbcontratoitau.nome_str AS nome_sacado,
        CASE
            WHEN ((cbcontratoitau.endereco_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_str)::text) <> ''::text)) THEN cbcontratoitau.endereco_str
            WHEN ((cbcontratoitau.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratoitau.endereco_trabalho_str
            ELSE NULL::character varying
        END AS endereco_sacado,
        CASE
            WHEN ((cbcontratoitau.endereco_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_str)::text) <> ''::text)) THEN cbcontratoitau.bairro_str
            WHEN ((cbcontratoitau.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratoitau.bairro_trabalho_str
            ELSE NULL::character varying
        END AS bairro_sacado,
        CASE
            WHEN ((cbcontratoitau.endereco_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_str)::text) <> ''::text)) THEN cbcontratoitau.cep_str
            WHEN ((cbcontratoitau.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratoitau.cep_trabalho_str
            ELSE NULL::character varying
        END AS cep_sacado,
        CASE
            WHEN ((cbcontratoitau.endereco_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_str)::text) <> ''::text)) THEN cbcontratoitau.cidade_str
            WHEN ((cbcontratoitau.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratoitau.cidade_trabalho_str
            ELSE NULL::character varying
        END AS cidade_sacado,
        CASE
            WHEN ((cbcontratoitau.endereco_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_str)::text) <> ''::text)) THEN cbcontratoitau.estado_str
            WHEN ((cbcontratoitau.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratoitau.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratoitau.estado_trabalho_str
            ELSE NULL::character varying
        END AS estado_sacado,
    ('now'::text)::date AS data_geracao_dat,
    cbcontratoitau.cpf_str,
    cbcontratoitau.cpf_avalista1_str,
    cbcontratoitau.nome_avalista1_str,
    cbcontratoitau.endereco_avalista1_str,
    cbcontratoitau.bairro_avalista1_str,
    cbcontratoitau.cep_avalista1_str,
    cbcontratoitau.cidade_avalista1_str,
    cbcontratoitau.estado_avalista1_str,
    cbbordero.id_cbbordero_int,
    cbcontratoitau.id_geempresa_int,
    cbcontratoitau.id_gefilial_int,
    cbcontratoitau.numero_total_parcelas_int,
    cbtiponegocio.id_cbtiponegocio_int,
    cbbordero.gerado_str,
    cbbordero.id_cbconvenio_int
   FROM (((((((((public.cbbordero
     JOIN public.cbconvenio ON ((cbconvenio.id_cbconvenio_int = cbbordero.id_cbconvenio_int)))
     JOIN public.fibanco ON ((fibanco.id_fibanco_int = cbbordero.id_fibanco_int)))
     JOIN public.ficcbanco ON ((ficcbanco.id_ficcbanco_int = cbbordero.id_ficcbanco_int)))
     JOIN public.cbitembordero ON ((cbitembordero.id_cbbordero_int = cbbordero.id_cbbordero_int)))
     JOIN public.cbcontratoitau ON ((cbitembordero.id_cbcontrato_int = cbcontratoitau.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbcontratoitau.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int)))
     JOIN public.gecliente ON ((gecliente.id_gecliente_int = cbcontratoitau.id_gecliente_int)))
     JOIN public.geempresa ON ((geempresa.id_geempresa_int = cbcontratoitau.id_geempresa_int)))
     JOIN public.gefilial ON ((gefilial.id_gefilial_int = cbcontratoitau.id_gefilial_int)));

--
-- TOC entry 12081 (class 0 OID 0)
-- Dependencies: 1649
-- Name: VIEW vw_itau; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_itau IS 'Remessa borderï¿½ Itaï¿½';

--
-- TOC entry 1650 (class 1259 OID 42751)
-- Name: vw_marcafilialitau; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_marcafilialitau AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    '0'::text AS data_evento_dat,
    '4013'::text AS codigo_situacao_int,
    'ATUALIZACAO DE FILIAL'::text AS situacao_contato_str,
    dis.data_pre_distrib_dat AS data_dat,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM (((((((public.cbcontratoitau ita
     JOIN public.cbdistribparcela dis ON ((dis.id_cbcontrato_int = ita.id_cbcontrato_int)))
     JOIN public.cbparcela par ON ((par.id_cbparcela_int = dis.id_cbparcela_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12082 (class 0 OID 0)
-- Dependencies: 1650
-- Name: VIEW vw_marcafilialitau; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_marcafilialitau IS 'Marcaï¿½ï¿½o de Filial Itaï¿½ - FUP';

--
-- TOC entry 1651 (class 1259 OID 42760)
-- Name: vw_marcafilialitau2; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_marcafilialitau2 AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    '0'::text AS data_evento_dat,
    '4013'::text AS codigo_situacao_int,
    'ATUALIZACAO DE FILIAL'::text AS situacao_contato_str,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    ita.id_cbcontrato_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM (((((public.cbcontratoitau ita
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12083 (class 0 OID 0)
-- Dependencies: 1651
-- Name: VIEW vw_marcafilialitau2; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_marcafilialitau2 IS 'Marca Filial Fiat Retro - Itaï¿½';

--
-- TOC entry 1652 (class 1259 OID 42769)
-- Name: vw_marcafilialitaubanco; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_marcafilialitaubanco AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    '0'::text AS data_evento_dat,
    '4013'::text AS codigo_situacao_int,
    'ATUALIZACAO DE FILIAL'::text AS situacao_contato_str,
    dis.data_pre_distrib_dat AS data_dat,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM (((((((public.cbcontratoitaubanco ita
     JOIN public.cbdistribparcela dis ON ((dis.id_cbcontrato_int = ita.id_cbcontrato_int)))
     JOIN public.cbparcela par ON ((par.id_cbparcela_int = dis.id_cbparcela_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12084 (class 0 OID 0)
-- Dependencies: 1652
-- Name: VIEW vw_marcafilialitaubanco; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_marcafilialitaubanco IS 'Marcaï¿½ï¿½o de Filial ITAUBANCO - FUP';

--
-- TOC entry 1653 (class 1259 OID 42778)
-- Name: vw_marcafilialpic; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_marcafilialpic AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    '0'::text AS data_evento_dat,
    '4013'::text AS codigo_situacao_int,
    'ATUALIZACAO DE FILIAL'::text AS situacao_contato_str,
    dis.data_pre_distrib_dat AS data_dat,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM (((((((public.cbcontratoitaupic ita
     JOIN public.cbdistribparcela dis ON ((dis.id_cbcontrato_int = ita.id_cbcontrato_int)))
     JOIN public.cbparcela par ON ((par.id_cbparcela_int = dis.id_cbparcela_int)))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12085 (class 0 OID 0)
-- Dependencies: 1653
-- Name: VIEW vw_marcafilialpic; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_marcafilialpic IS 'Marcaï¿½ï¿½o de Filial Itaï¿½ PIC - FUP';

--
-- TOC entry 1654 (class 1259 OID 42796)
-- Name: vw_marcafilialpic2; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_marcafilialpic2 AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
    '0'::text AS data_evento_dat,
    '4013'::text AS codigo_situacao_int,
    'ATUALIZACAO DE FILIAL'::text AS situacao_contato_str,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    ita.id_cbcontrato_int,
    ita.id_gecliente_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM (((((public.cbcontratoitaupic ita
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12086 (class 0 OID 0)
-- Dependencies: 1654
-- Name: VIEW vw_marcafilialpic2; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_marcafilialpic2 IS 'Marca Filial Fiat Retro - PIC';

--
-- TOC entry 1655 (class 1259 OID 42804)
-- Name: vw_npjur; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_npjur AS
 SELECT DISTINCT ON (cbcontrato.id_cbcontrato_int) cbcontrato.id_cbcontrato_int,
    cbparcela.parcela_int,
    ( SELECT cbparcela_1.parcela_int
           FROM public.cbparcela cbparcela_1
          WHERE ((cbparcela_1.id_cbcontrato_int = cbcontrato.id_cbcontrato_int) AND ((cbparcela_1.situacao_int = (0)::smallint) OR (cbparcela_1.situacao_int = (1)::smallint) OR (cbparcela_1.situacao_int = (2)::smallint) OR (cbparcela_1.situacao_int = (3)::smallint)))
          ORDER BY cbcontrato.id_cbcontrato_int, cbparcela_1.data_vencimento_dat DESC
         LIMIT 1) AS ultima_parcela,
    cbparcela.data_vencimento_dat,
    gecliente.id_gecliente_int,
    gecliente.cgc_str,
    cbcontrato.data_recebimento_dat,
    cbcontrato.nome_str,
    cbcontrato.tipo_pessoa_str,
    cbcontrato.profissao_str,
    cbcontrato.sexo_str,
    cbcontrato.cpf_str,
    cbcontrato.rg_str,
    cbcontrato.estado_civil_str,
    cbcontrato.endereco_str,
    cbcontrato.bairro_str,
    cbcontrato.cidade_str,
    cbcontrato.estado_str,
    cbcontrato.cep_str,
    cbcontrato.contrato_str,
    cbtiponegocio.descricao_str AS tiponegocio,
    fimoeda.descricao_str AS moeda,
    cbcontrato.data_contato_dat,
    ( SELECT gefilial.nome_str
           FROM public.gefilial
          WHERE (gefilial.id_gefilial_int = cbcontrato.id_gefilial_ajuiz_int)) AS filialajuiz,
    ( SELECT sum(cbparcela_1.valor_principal_num) AS sum
           FROM public.cbparcela cbparcela_1
          WHERE ((cbparcela_1.id_cbcontrato_int = cbcontrato.id_cbcontrato_int) AND ((cbparcela_1.situacao_int = (0)::smallint) OR (cbparcela_1.situacao_int = (1)::smallint) OR (cbparcela_1.situacao_int = (2)::smallint) OR (cbparcela_1.situacao_int = (3)::smallint)))) AS valor_causa,
    cbcontrato.cidade_str AS comarca,
    ('Encaminhado p/ jurï¿½dico - '::text || to_char((cbcontratohonda.data_contrato_dat)::timestamp with time zone, 'DD/MM/YYYY'::text)) AS data_procassamento,
    cbcontrato.taxa_juridico_num,
        CASE
            WHEN (cbcontrato.nome_avalista1_str IS NULL) THEN 'S'::text
            ELSE 'N'::text
        END AS avalista,
    cbparcela.valor_principal_num,
    cbcontrato.numero_total_parcelas_int,
    cbpagamento.juros_mora_num,
    cbpagamento.multa_num,
    cbcontrato.marca_str,
    cbcontrato.modelo_str,
    cbcontrato.chassis_str,
    cbcontrato.ano_str AS anomodelo,
    cbcontrato.ano_str AS anofabricacao,
    cbcontrato.cor_str,
    cbcontrato.placa_str,
    cbcontrato.renavam_str
   FROM ((((public.cbparcela
     JOIN public.cbcontrato ON ((cbparcela.id_cbcontrato_int = cbcontrato.id_cbcontrato_int)))
     JOIN public.gecliente ON ((gecliente.id_gecliente_int = cbcontrato.id_gecliente_int)))
     JOIN public.cbtiponegocio ON ((cbcontrato.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int)))
     JOIN public.cbpagamento ON ((cbcontrato.id_cbcontrato_int = cbpagamento.id_cbcontrato_int))),
    ONLY public.fimoeda,
    ONLY public.cbcontratohonda
  WHERE ((cbparcela.situacao_int = (0)::smallint) OR (cbparcela.situacao_int = (1)::smallint) OR (cbparcela.situacao_int = (2)::smallint) OR (cbparcela.situacao_int = (3)::smallint))
  ORDER BY cbcontrato.id_cbcontrato_int, cbparcela.data_vencimento_dat;

--
-- TOC entry 12087 (class 0 OID 0)
-- Dependencies: 1655
-- Name: VIEW vw_npjur; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_npjur IS 'Usado no Arquivo importaï¿½ï¿½o NPJUR ';

--
-- TOC entry 1656 (class 1259 OID 42815)
-- Name: vw_pg_geral; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_pg_geral AS
 SELECT vw_c.id_cbcontrato_int,
    vw_i.id_cbitembordero_int,
    vw_pg.id_cbpagamento_int,
    vw_epg.id_cbespeciepagamento_int,
    vw_ppg.id_cbparcelapagamento_int,
    vw_p.id_cbparcela_int,
    COALESCE(vw_e.codigo_str, ''::character varying) AS vw_codigo_etapa,
    COALESCE(vw_e.descricao_str, ''::character varying) AS vw_descricao_etapa,
    ''::character varying(30) AS vw_contrato_gestao,
    ''::character varying(30) AS vw_produto,
    ''::character varying(30) AS vw_campanha,
    ''::character varying(50) AS vw_regiao,
    ''::character varying(20) AS vw_codigo_regiao,
    0 AS vw_ddiv,
    vw_p.parcela_int AS vw_parcela,
    ''::character varying(5) AS vw_grupo,
    ''::character varying(5) AS vw_sequencia,
    ''::character varying(5) AS vw_cota,
    vw_r.codigo_int AS vw_cod_regua,
    vw_r.descricao_str AS vw_desc_regua,
    (('now'::text)::date - vw_p.data_vencimento_dat) AS vw_da,
    vw_c.data_ultima_distrib_dat AS vw_ultima_distrib,
    ''::character varying(20) AS vw_codigo_cessao,
    ''::character varying(10) AS vw_data_cessao,
    0 AS vw_qtde_parc_bordero,
    0 AS vw_qtde_parc,
    ( SELECT count(*) AS count
           FROM public.cbparcela vw_p2
          WHERE ((vw_p2.id_cbcontrato_int = vw_c.id_cbcontrato_int) AND (vw_p2.data_vencimento_dat < ('now'::text)::date) AND (vw_p2.situacao_int <> ALL (ARRAY[4, 6])))) AS vw_qtde_parc_venc,
    ''::character varying(20) AS vw_parcelamento,
    ''::character varying(30) AS vw_mercado,
    ''::character varying(30) AS vw_faixa,
    ''::character varying(30) AS vw_segmento,
    0 AS vw_saldo,
    0 AS vw_risco,
    vw_pib.data_vencimento_dat AS vw_vencimento_parcela,
    COALESCE((((vw_pib.valor_total_num - vw_pib.honorarios_num) - vw_pib.comissionamento_num) - vw_pib.retido_num), (0)::double precision) AS vw_valor_repasse,
    COALESCE(vw_pib.principal_num, (0)::double precision) AS vw_principal,
    COALESCE(vw_pib.honorarios_num, (0)::double precision) AS vw_honorarios,
    COALESCE(vw_pib.comissionamento_num, (0)::double precision) AS vw_comissionamento,
    COALESCE(vw_pib.desconto_num, (0)::double precision) AS vw_desconto,
    COALESCE(vw_pib.retido_num, (0)::double precision) AS vw_retido,
    vw_pg.data_pagamento_dat AS vw_data_pagamento,
    vw_pg.acrescimo_np_num AS vw_despesas,
    vw_ppg.multa_num AS vw_multa,
    vw_ppg.notificacao_num AS vw_notificacao,
    vw_i.desconto_original_num AS vw_desconto_original,
    vw_i.cp_original_num AS vw_cp_original,
    0.00 AS vw_estoque_pdd,
    0.00 AS vw_pdd_potencial,
    0 AS vw_juros,
    vw_epg.data_repasse_dat AS vw_data_repasse,
    ''::character varying AS vw_tipo_pagamento,
    ''::character varying AS vw_regiao_pan,
    ''::character varying AS vw_agencia,
    ''::character varying AS vw_cod_produto,
    COALESCE(vw_pg.situacao_str, ''::character varying) AS vw_situacao_pagamento_boleto,
    ( SELECT sum(cbitemborderocalculoparcela.honorarios_num) AS sum
           FROM public.cbitemborderocalculoparcela
          WHERE (cbitemborderocalculoparcela.id_cbitembordero_int = vw_i.id_cbitembordero_int)) AS vw_extra01,
    ( SELECT cbtipopagamento.obs_str
           FROM public.cbtipopagamento
          WHERE (cbtipopagamento.id_cbtipopagamento_int = vw_b.id_cbtipopagamento_int)) AS vw_extra02,
    0 AS vw_extra03,
    0 AS vw_extra04,
    0 AS vw_extra05,
    NULL::date AS data_primeiro_pagamento
   FROM (((((((((public.cbitembordero vw_i
     JOIN public.cbcontratopirelli vw_c ON ((vw_c.id_cbcontrato_int = vw_i.id_cbcontrato_int)))
     JOIN public.cbbordero vw_b ON ((vw_b.id_cbbordero_int = vw_i.id_cbbordero_int)))
     JOIN public.cbparcelaitembordero vw_pib ON ((vw_pib.id_cbitembordero_int = vw_i.id_cbitembordero_int)))
     JOIN public.cbparcela vw_p ON ((vw_p.id_cbparcela_int = vw_pib.id_cbparcela_int)))
     LEFT JOIN public.esregua vw_r ON ((vw_r.id_esregua_int = vw_p.id_esregua_int)))
     LEFT JOIN public.cbetapa vw_e ON ((vw_e.id_cbetapa_int = vw_c.id_cbetapa_int)))
     LEFT JOIN public.cbpagamento vw_pg ON ((vw_pg.id_cbitembordero_int = vw_i.id_cbitembordero_int)))
     LEFT JOIN public.cbespeciepagamento vw_epg ON ((vw_epg.id_cbpagamento_int = vw_pg.id_cbpagamento_int)))
     LEFT JOIN public.cbparcelapagamento vw_ppg ON ((vw_ppg.id_cbpagamento_int = vw_pg.id_cbpagamento_int)));

--
-- TOC entry 1657 (class 1259 OID 42822)
-- Name: vw_prestacaobmc; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_prestacaobmc AS
 SELECT ('now'::text)::date AS data_geracao,
    ('now'::text)::time(6) with time zone AS hora_geracao,
    cbespeciepagamento.data_repasse_dat,
    cbcontratobmc.nome_str,
    cbcontratobmc.contrato_str,
    cbparcela.parcela_int,
    cbparcela.data_vencimento_dat,
    cbpagamento.data_pagamento_dat,
    cbparcelapagamento.valor_total_num,
    cbparcelapagamento.multa_num,
    (cbparcelapagamento.notificacao_num + cbparcelapagamento.acrescimo_num) AS despesa_num,
        CASE
            WHEN ((cbpagamento.id_cbtipopagamento_int <> (178)::bigint) AND (cbpagamento.id_cbtipopagamento_int <> (179)::bigint) AND (cbpagamento.id_cbtipopagamento_int <> (262)::bigint)) THEN (cbparcelapagamento.cp_num - cbparcelapagamento.desconto_num)
            ELSE cbparcelapagamento.cp_num
        END AS cp_num,
        CASE
            WHEN ((cbpagamento.id_cbtipopagamento_int = (178)::bigint) OR (cbpagamento.id_cbtipopagamento_int = (179)::bigint)) THEN (cbparcelapagamento.principal_num - cbparcelapagamento.desconto_num)
            ELSE cbparcelapagamento.principal_num
        END AS valor_principal_num,
    cbparcelapagamento.notificacao_num,
    cbparcelapagamento.honorarios_num,
    (cbparcelapagamento.valor_total_num - cbparcelapagamento.honorarios_num) AS total_deposito,
    (((cbparcelapagamento.principal_num + cbparcelapagamento.cp_num) + cbparcelapagamento.multa_num) + cbparcelapagamento.juros_mora_num) AS valor_baixa,
    cbespeciepagamento.id_fibanco_int,
    cbespeciepagamento.id_ficcbanco_int,
    geusuario.nomecompleto_str,
    cbitembordero.observacao_boleto_str
   FROM ((((((public.cbpagamento
     JOIN public.cbparcelapagamento ON ((cbparcelapagamento.id_cbpagamento_int = cbpagamento.id_cbpagamento_int)))
     JOIN public.cbespeciepagamento ON ((cbespeciepagamento.id_cbpagamento_int = cbpagamento.id_cbpagamento_int)))
     JOIN public.cbparcela ON ((cbparcela.id_cbparcela_int = cbparcelapagamento.id_cbparcela_int)))
     JOIN public.cbcontratobmc ON ((cbcontratobmc.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
     JOIN public.cbitembordero ON ((cbitembordero.id_cbitembordero_int = cbpagamento.id_cbitembordero_int)))
     JOIN public.geusuario ON ((geusuario.id_geusuario_int = cbitembordero.id_geusuario_int)))
  WHERE ((cbpagamento.id_gecliente_int = (7)::bigint) AND ((cbpagamento.situacao_str)::text = ('E'::character varying)::text))
  ORDER BY cbcontratobmc.nome_str, cbparcela.parcela_int;

--
-- TOC entry 12088 (class 0 OID 0)
-- Dependencies: 1657
-- Name: VIEW vw_prestacaobmc; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_prestacaobmc IS 'Usado na Prestaï¿½ï¿½o de Contas Eletrï¿½nica BMC (Arquivo Magnï¿½tico)';

--
-- TOC entry 1658 (class 1259 OID 42833)
-- Name: vw_prestacaocifra; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_prestacaocifra AS
 SELECT DISTINCT ON (cbcontratocsc.nome_str, cbpagamento.id_cbpagamento_int,
        CASE
            WHEN (((cbtipopagamento.codigo_pag_str)::text = ('25'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('26'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('27'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('28'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('29'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('30'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('31'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('32'::character varying)::text)) THEN (((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || ('000'::character varying)::text)
            WHEN (cbitembordero.parcelamento_str IS NULL) THEN (((((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || to_char(cbparcela.parcela_int, (999)::text)))::character varying)::text
            ELSE (((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || (cbitembordero.parcelamento_str)::text)
        END) cbcontratocsc.contrato_str,
    cbcontratocsc.nome_str,
    cbpagamento.id_cbpagamento_int,
    cbtipopagamento.codigo_pag_str,
        CASE
            WHEN (((cbtipopagamento.codigo_pag_str)::text = ('25'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('26'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('27'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('28'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('29'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('30'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('31'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('32'::character varying)::text)) THEN (((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || ('000'::character varying)::text)
            WHEN (cbitembordero.parcelamento_str IS NULL) THEN (((((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || to_char(cbparcela.parcela_int, (999)::text)))::character varying)::text
            ELSE (((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || (cbitembordero.parcelamento_str)::text)
        END AS pagamento_str,
        CASE
            WHEN (cbitembordero.parcelamento_str IS NULL) THEN cbparcela.data_vencimento_dat
            ELSE cbespeciepagamento.data_repasse_dat
        END AS vencimento_parcela_dat,
        CASE
            WHEN ((cbitembordero.parcelamento_str IS NULL) AND (NOT (((cbtipopagamento.codigo_pag_str)::text = ('25'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('26'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('27'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('28'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('29'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('30'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('31'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('32'::character varying)::text)))) THEN ((cbparcelapagamento.valor_total_num - cbparcelapagamento.honorarios_num) - cbparcelapagamento.comissionamento_num)
            ELSE ((cbpagamento.valor_total_num - cbpagamento.honorarios_num) - cbpagamento.comissionamento_num)
        END AS valor_movimento_num,
    cbparcela.data_vencimento_dat AS parcela_vencimento_dat,
    cbespeciepagamento.data_repasse_dat,
    cbitembordero.parcelamento_str
   FROM ((((((public.cbespeciepagamento
     JOIN public.cbpagamento ON ((cbespeciepagamento.id_cbpagamento_int = cbpagamento.id_cbpagamento_int)))
     JOIN public.cbtipopagamento ON ((cbpagamento.id_cbtipopagamento_int = cbtipopagamento.id_cbtipopagamento_int)))
     JOIN public.cbcontratocsc ON ((cbpagamento.id_cbcontrato_int = cbcontratocsc.id_cbcontrato_int)))
     JOIN public.cbparcelapagamento ON ((cbpagamento.id_cbpagamento_int = cbparcelapagamento.id_cbpagamento_int)))
     JOIN public.cbparcela ON ((cbparcelapagamento.id_cbparcela_int = cbparcela.id_cbparcela_int)))
     LEFT JOIN public.cbitembordero ON (((cbpagamento.id_cbcontrato_int = cbitembordero.id_cbcontrato_int) AND (cbpagamento.data_calculo_dat = cbitembordero.vencimento_dat) AND ((cbitembordero.pago_str)::text = ('S'::character varying)::text))))
  WHERE ((cbpagamento.situacao_str)::text = ('E'::character varying)::text)
  ORDER BY cbcontratocsc.nome_str, cbpagamento.id_cbpagamento_int,
        CASE
            WHEN (((cbtipopagamento.codigo_pag_str)::text = ('25'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('26'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('27'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('28'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('29'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('30'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('31'::character varying)::text) OR ((cbtipopagamento.codigo_pag_str)::text = ('32'::character varying)::text)) THEN (((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || ('000'::character varying)::text)
            WHEN (cbitembordero.parcelamento_str IS NULL) THEN (((((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || to_char(cbparcela.parcela_int, (999)::text)))::character varying)::text
            ELSE (((cbcontratocsc.contrato_str)::text || ('_'::character varying)::text) || (cbitembordero.parcelamento_str)::text)
        END;

--
-- TOC entry 12089 (class 0 OID 0)
-- Dependencies: 1658
-- Name: VIEW vw_prestacaocifra; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_prestacaocifra IS 'Usado na Prestaï¿½ï¿½o de Contas Eletrï¿½nica CSC/CIFRA ';

--
-- TOC entry 1659 (class 1259 OID 42850)
-- Name: vw_prestacaoitau; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_prestacaoitau AS
 SELECT cbcontratoitau.numero_lote_int,
    cbcontratoitau.codigo_operacao_str,
    cbcontratoitau.contrato_str,
        CASE
            WHEN (cbparcelapagamento.desconto_num <> (0)::double precision) THEN 3002
            ELSE 3001
        END AS parecer,
    cbpagamento.data_cadastro_dat AS data_parecer,
    cbpagamento.data_pagamento_dat,
    cbespeciepagamento.data_repasse_dat,
    ((((cbparcelapagamento.principal_num + cbparcelapagamento.cp_num) + cbparcelapagamento.multa_num) +
        CASE
            WHEN (cbparcelapagamento.acrescimo_num IS NOT NULL) THEN cbparcelapagamento.acrescimo_num
            WHEN (0 IS NOT NULL) THEN (0)::double precision
            ELSE NULL::double precision
        END) - cbparcelapagamento.desconto_num) AS valor_pago,
    gefilial.codigo_str AS codigo_filial,
    gefilial.nome_str AS nome_filial,
    gefilial.endereco1_str,
    gefilial.endereco2_str AS bairro_filial,
    gecidade.nome_str AS cidade_filial,
    gecidade.uf_str AS uf_filial,
    gefilial.cep_str AS cep_filial,
    gefilial.telefone_str AS telefone_filial,
    cbparcela.parcela_int,
    cbparcelapagamento.desconto_num,
    ((cbparcelapagamento.cp_num + cbparcelapagamento.multa_num) +
        CASE
            WHEN (cbparcelapagamento.acrescimo_num IS NOT NULL) THEN cbparcelapagamento.acrescimo_num
            WHEN (0 IS NOT NULL) THEN (0)::double precision
            ELSE NULL::double precision
        END) AS valor_juros,
    cbparcelapagamento.notificacao_num,
    cbparcela.id_cbparcela_int,
    cbpagamento.data_retorno_banco_dat,
    cbpagamento.id_cbpagamento_int,
    cbparcelapagamento.cp_num,
    cbparcelapagamento.multa_num,
        CASE
            WHEN (cbparcelapagamento.acrescimo_num IS NOT NULL) THEN cbparcelapagamento.acrescimo_num
            WHEN (0 IS NOT NULL) THEN (0)::double precision
            ELSE NULL::double precision
        END AS acrescimo_num,
    cbpagamento.data_cadastro_dat
   FROM ((((((public.cbpagamento
     JOIN public.cbcontratoitau ON ((cbcontratoitau.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
     JOIN public.cbespeciepagamento ON ((cbpagamento.id_cbpagamento_int = cbespeciepagamento.id_cbpagamento_int)))
     JOIN public.cbparcelapagamento ON ((cbpagamento.id_cbpagamento_int = cbparcelapagamento.id_cbpagamento_int)))
     JOIN public.cbparcela ON ((cbparcelapagamento.id_cbparcela_int = cbparcela.id_cbparcela_int)))
     JOIN public.gefilial ON ((cbcontratoitau.id_gefilial_int = gefilial.id_gefilial_int)))
     JOIN public.gecidade ON ((gecidade.id_gecidade_int = gefilial.id_gecidade_int)))
  ORDER BY cbpagamento.id_cbpagamento_int, cbparcela.id_cbparcela_int;

--
-- TOC entry 12090 (class 0 OID 0)
-- Dependencies: 1659
-- Name: VIEW vw_prestacaoitau; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_prestacaoitau IS 'Usado na Geraï¿½ï¿½o da Prestaï¿½ï¿½o de Contas Itaï¿½ ';

--
-- TOC entry 1660 (class 1259 OID 42865)
-- Name: vw_prestacaoitaubanco; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_prestacaoitaubanco AS
 SELECT cbcontratoitaubanco.numero_lote_int,
    cbcontratoitaubanco.codigo_operacao_str,
    cbcontratoitaubanco.contrato_str,
        CASE
            WHEN (cbparcelapagamento.desconto_num <> (0)::double precision) THEN 3002
            ELSE 3001
        END AS parecer,
    cbpagamento.data_cadastro_dat AS data_parecer,
    cbpagamento.data_pagamento_dat,
    cbespeciepagamento.data_repasse_dat,
    ((((cbparcelapagamento.principal_num + cbparcelapagamento.cp_num) + cbparcelapagamento.multa_num) +
        CASE
            WHEN (cbparcelapagamento.acrescimo_num IS NOT NULL) THEN cbparcelapagamento.acrescimo_num
            WHEN (0 IS NOT NULL) THEN (0)::double precision
            ELSE NULL::double precision
        END) - cbparcelapagamento.desconto_num) AS valor_pago,
    gefilial.codigo_str AS codigo_filial,
    gefilial.nome_str AS nome_filial,
    gefilial.endereco1_str,
    gefilial.endereco2_str AS bairro_filial,
    gecidade.nome_str AS cidade_filial,
    gecidade.uf_str AS uf_filial,
    gefilial.cep_str AS cep_filial,
    gefilial.telefone_str AS telefone_filial,
    cbparcela.parcela_int,
    cbparcelapagamento.desconto_num,
    ((cbparcelapagamento.cp_num + cbparcelapagamento.multa_num) +
        CASE
            WHEN (cbparcelapagamento.acrescimo_num IS NOT NULL) THEN cbparcelapagamento.acrescimo_num
            WHEN (0 IS NOT NULL) THEN (0)::double precision
            ELSE NULL::double precision
        END) AS valor_juros,
    cbparcelapagamento.notificacao_num,
    cbparcela.id_cbparcela_int,
    cbpagamento.data_retorno_banco_dat,
    cbpagamento.id_cbpagamento_int,
    cbparcelapagamento.cp_num,
    cbparcelapagamento.multa_num,
        CASE
            WHEN (cbparcelapagamento.acrescimo_num IS NOT NULL) THEN cbparcelapagamento.acrescimo_num
            WHEN (0 IS NOT NULL) THEN (0)::double precision
            ELSE NULL::double precision
        END AS acrescimo_num,
    cbpagamento.data_cadastro_dat
   FROM ((((((public.cbpagamento
     JOIN public.cbcontratoitaubanco ON ((cbcontratoitaubanco.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
     JOIN public.cbespeciepagamento ON ((cbpagamento.id_cbpagamento_int = cbespeciepagamento.id_cbpagamento_int)))
     JOIN public.cbparcelapagamento ON ((cbpagamento.id_cbpagamento_int = cbparcelapagamento.id_cbpagamento_int)))
     JOIN public.cbparcela ON ((cbparcelapagamento.id_cbparcela_int = cbparcela.id_cbparcela_int)))
     JOIN public.gefilial ON ((cbcontratoitaubanco.id_gefilial_int = gefilial.id_gefilial_int)))
     JOIN public.gecidade ON ((gecidade.id_gecidade_int = gefilial.id_gecidade_int)))
  ORDER BY cbpagamento.id_cbpagamento_int, cbparcela.id_cbparcela_int;

--
-- TOC entry 12091 (class 0 OID 0)
-- Dependencies: 1660
-- Name: VIEW vw_prestacaoitaubanco; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_prestacaoitaubanco IS 'Usada na Geraï¿½ï¿½o da Prestaï¿½ï¿½o de Contas do Itaï¿½ Banco ';

--
-- TOC entry 1661 (class 1259 OID 42887)
-- Name: vw_prestacaopan; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_prestacaopan AS
 SELECT ('now'::text)::date AS data_mov,
    cbespeciepagamento.data_repasse_dat,
    cbformapagamento.codigo_str,
    cbpagamento.id_cbpagamento_int,
    geempresa.nome_str AS nome_assessoria,
    geempresa.cgc_str,
    cbcontratopan.nome_str AS nome_cliente,
    cbcontratopan.cpf_str,
    cbcontratopan.contrato_str,
    ((cbdistribuidorcliente.codigo_str)::text || (cbdistribuidorcliente.nome_fantasia_str)::text) AS regional,
    cbcontratopan.produto_str,
    cbparcela.parcela_int,
    cbcontratopan.numero_total_parcelas_int AS plano_contrato,
    cbparcela.data_vencimento_dat,
    (cbespeciepagamento.data_deposito_dat - cbparcela.data_vencimento_dat) AS dias_atraso_par,
    cbespeciepagamento.situacao_int,
    cbparcela.data_pagamento_dat AS data_pgto_parcela,
    cbparcelapagamento.valor_total_num,
    cbparcelapagamento.principal_num,
    cbparcelapagamento.juros_mora_num,
    cbparcelapagamento.multa_num,
    cbparcelapagamento.cp_num,
    cbparcelapagamento.desconto_num,
    '0'::text AS despesa_num,
    cbparcelapagamento.notificacao_num,
    cbparcelapagamento.retido_num,
    cbparcelapagamento.honorarios_num,
    ((cbparcelapagamento.valor_total_num - cbparcelapagamento.honorarios_num) - cbparcelapagamento.despesa_banco_num) AS valor_repasse,
    cbcontratopan.codigo_empresa_str,
    cbcontratopan.empresa_str,
    cbpagamento.recibo_num,
    cbpagamento.data_pagamento_dat AS data_liquidacao,
    cbcontratopan.fase_cobranca_str,
    cbpagamento.data_cadastro_dat,
    gefilial.id_gefilial_int,
    gefilial.codigo_str AS codigo_filial,
    gefilial.nome_str AS nome_filial,
    cbtiponegocio.id_cbtiponegocio_int,
    cbtipopagamento.codigo_pag_str,
    cbtipopagamento.descricao_pag_str
   FROM (((((((((((public.cbpagamento
     JOIN public.cbcontratopan ON ((cbcontratopan.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbtiponegocio.id_cbtiponegocio_int = cbcontratopan.id_cbtiponegocio_int)))
     JOIN public.gefilial ON ((gefilial.id_gefilial_int = cbcontratopan.id_gefilial_int)))
     LEFT JOIN public.cbdistribuidorcliente ON ((cbdistribuidorcliente.id_cbdistribuidorcliente_int = cbcontratopan.id_cbdistribuidorcliente_int)))
     JOIN public.cbespeciepagamento ON ((cbpagamento.id_cbpagamento_int = cbespeciepagamento.id_cbpagamento_int)))
     JOIN public.cbparcelapagamento ON ((cbpagamento.id_cbpagamento_int = cbparcelapagamento.id_cbpagamento_int)))
     JOIN public.cbparcela ON ((cbparcelapagamento.id_cbparcela_int = cbparcela.id_cbparcela_int)))
     JOIN public.gecliente ON ((cbcontratopan.id_gecliente_int = gecliente.id_gecliente_int)))
     JOIN public.geempresa ON ((cbcontratopan.id_geempresa_int = geempresa.id_geempresa_int)))
     JOIN public.cbformapagamento ON ((cbespeciepagamento.id_cbformapagamento_int = cbformapagamento.id_cbformapagamento_int)))
     JOIN public.cbtipopagamento ON ((cbtipopagamento.id_cbtipopagamento_int = cbpagamento.id_cbtipopagamento_int)))
  WHERE ((cbpagamento.situacao_str)::text = ('E'::character varying)::text)
  ORDER BY cbpagamento.id_cbpagamento_int;

--
-- TOC entry 12092 (class 0 OID 0)
-- Dependencies: 1661
-- Name: VIEW vw_prestacaopan; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_prestacaopan IS 'Usado na Prestaï¿½ï¿½o de Contas PAN PIC';

--
-- TOC entry 1662 (class 1259 OID 42894)
-- Name: vw_prestacaopanam; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_prestacaopanam AS
 SELECT ('now'::text)::date AS data_mov,
    cbespeciepagamento.data_repasse_dat,
    cbformapagamento.codigo_str,
    cbpagamento.id_cbpagamento_int,
    geempresa.nome_str AS nome_assessoria,
    geempresa.cgc_str,
    cbcontratopanam.nome_str AS nome_cliente,
    cbcontratopanam.cpf_str,
    cbcontratopanam.contrato_str,
    ((cbdistribuidorcliente.codigo_str)::text || (cbdistribuidorcliente.nome_fantasia_str)::text) AS regional,
    cbcontratopanam.produto_str,
    cbparcela.parcela_int,
    cbcontratopanam.numero_total_parcelas_int AS plano_contrato,
    cbparcela.data_vencimento_dat,
    (cbespeciepagamento.data_deposito_dat - cbparcela.data_vencimento_dat) AS dias_atraso_par,
    cbespeciepagamento.situacao_int,
    cbpagamento.data_pagamento_dat AS data_pgto_parcela,
    cbparcelapagamento.valor_total_num,
    cbparcelapagamento.principal_num,
    cbparcelapagamento.multa_num,
    cbparcelapagamento.cp_num,
    cbparcelapagamento.desconto_num,
    '0'::text AS juros_mora_num,
    cbparcelapagamento.juros_mora_num AS despesa_num,
    cbparcelapagamento.notificacao_num,
    (cbparcelapagamento.juros_mora_num + cbparcelapagamento.notificacao_num) AS total_despesa,
    cbparcelapagamento.acrescimo_num,
        CASE
            WHEN ((cbparcelapagamento.comissionamento_num IS NULL) OR (cbparcelapagamento.comissionamento_num = (0)::double precision)) THEN cbparcelapagamento.retido_num
            ELSE cbparcelapagamento.comissionamento_num
        END AS retido_num,
    cbparcelapagamento.honorarios_num,
    ((((cbparcelapagamento.valor_total_num - cbparcelapagamento.honorarios_num) - cbparcelapagamento.comissionamento_num) - cbparcelapagamento.retido_num) - cbparcelapagamento.acrescimo_num) AS valor_repasse,
    cbtiponegocio.codigo_str AS codigo_empresa_str,
    cbtiponegocio.descricao_str AS empresa_str,
    cbpagamento.recibo_num,
    cbpagamento.data_pagamento_dat AS data_liquidacao,
    cbcontratopanam.fase_cobranca_str,
    cbpagamento.data_cadastro_dat,
    gefilial.codigo_str AS codigo_filial,
    gefilial.nome_str AS nome_filial,
    gefilial.id_gefilial_int,
    cbtiponegocio.id_cbtiponegocio_int,
    cbtipopagamento.codigo_pag_str,
    cbtipopagamento.descricao_pag_str,
        CASE
            WHEN (cbparcelapagamento.retido_num <> (0)::double precision) THEN
            CASE
                WHEN (cbparcelapagamento.cp_num > cbparcelapagamento.retido_num) THEN (cbparcelapagamento.cp_num - cbparcelapagamento.retido_num)
                ELSE cbparcelapagamento.retido_num
            END
            ELSE
            CASE
                WHEN (cbparcelapagamento.cp_num > cbparcelapagamento.comissionamento_num) THEN (cbparcelapagamento.cp_num - cbparcelapagamento.comissionamento_num)
                ELSE cbparcelapagamento.comissionamento_num
            END
        END AS valor_banco_num,
    (cbparcelapagamento.valor_total_num - (((cbparcelapagamento.valor_total_num - cbparcelapagamento.honorarios_num) - cbparcelapagamento.retido_num) - cbparcelapagamento.comissionamento_num)) AS total_assessoria_num,
    cbcontratopanam.id_cbcontrato_int,
    cbparcela.id_cbparcela_int
   FROM (((((((((((public.cbpagamento
     JOIN public.cbcontratopanam ON ((cbcontratopanam.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbtiponegocio.id_cbtiponegocio_int = cbcontratopanam.id_cbtiponegocio_int)))
     JOIN public.gefilial ON ((gefilial.id_gefilial_int = cbcontratopanam.id_gefilial_int)))
     LEFT JOIN public.cbdistribuidorcliente ON ((cbdistribuidorcliente.id_cbdistribuidorcliente_int = cbcontratopanam.id_cbdistribuidorcliente_int)))
     JOIN public.cbespeciepagamento ON ((cbpagamento.id_cbpagamento_int = cbespeciepagamento.id_cbpagamento_int)))
     JOIN public.cbparcelapagamento ON ((cbpagamento.id_cbpagamento_int = cbparcelapagamento.id_cbpagamento_int)))
     JOIN public.cbparcela ON ((cbparcelapagamento.id_cbparcela_int = cbparcela.id_cbparcela_int)))
     JOIN public.gecliente ON ((cbcontratopanam.id_gecliente_int = gecliente.id_gecliente_int)))
     JOIN public.geempresa ON ((cbcontratopanam.id_geempresa_int = geempresa.id_geempresa_int)))
     JOIN public.cbformapagamento ON ((cbespeciepagamento.id_cbformapagamento_int = cbformapagamento.id_cbformapagamento_int)))
     JOIN public.cbtipopagamento ON ((cbtipopagamento.id_cbtipopagamento_int = cbpagamento.id_cbtipopagamento_int)))
  WHERE ((cbpagamento.situacao_str)::text = ('E'::character varying)::text)
  ORDER BY cbpagamento.id_cbpagamento_int;

--
-- TOC entry 12093 (class 0 OID 0)
-- Dependencies: 1662
-- Name: VIEW vw_prestacaopanam; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_prestacaopanam IS 'Usado na Prestaï¿½ï¿½o de Contas PAN Veiculos e Massificados';

--
-- TOC entry 1663 (class 1259 OID 42913)
-- Name: vw_qtde_cpf_contrato; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_qtde_cpf_contrato AS
 SELECT max(c.id_gecliente_int) AS carteira,
    count(DISTINCT c.cpf_str) AS qtde_cpf,
    count(DISTINCT c.contrato_str) AS qtde_contrato
   FROM public.cbcontratopirelli c
  WHERE (c.id_cbsituacaocontrato_int <> 6);

--
-- TOC entry 1664 (class 1259 OID 42922)
-- Name: vw_re011; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_re011 AS
 SELECT count(*) AS pagas,
    cbcontrato.id_cbcontrato_int,
    cbcontrato.id_gecliente_int,
    cbcontrato.id_cbtiponegocio_int,
    cbpagamento.situacao_str
   FROM (public.cbcontrato
     JOIN ((public.cbpagamento
     JOIN public.cbespeciepagamento ON ((cbpagamento.id_cbpagamento_int = cbespeciepagamento.id_cbpagamento_int)))
     JOIN public.cbparcelapagamento ON ((cbpagamento.id_cbpagamento_int = cbparcelapagamento.id_cbpagamento_int))) ON ((cbcontrato.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
  GROUP BY cbcontrato.id_cbcontrato_int, cbcontrato.id_gecliente_int, cbcontrato.id_cbtiponegocio_int, cbpagamento.situacao_str;

--
-- TOC entry 12094 (class 0 OID 0)
-- Dependencies: 1664
-- Name: VIEW vw_re011; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_re011 IS 'Usado no Rel. Relaï¿½ï¿½o de pagamentos';

--
-- TOC entry 1665 (class 1259 OID 42938)
-- Name: vw_re064; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_re064 AS
 SELECT f.id_cbfollowup_int,
    f.id_cbcontrato_int,
    f.id_cbparcela_int,
    f.data_dat,
    f.historico_str,
    f.id_geusuario_int,
    f.coloca_stand_str,
    f.data_stand_by_dat,
    f.id_cbsitcontato_int,
    f.alterado_str,
    f.data_cobranca_dat,
    f.hora_cobranca_tim,
    f.hora_tim,
    f.tstamp,
    f.tipo_contato_str,
    p.parcela_int,
    p.data_vencimento_dat,
    u.nomecompleto_str,
    c.id_gecliente_int,
    c.contrato_str,
    c.nome_str,
    n.codigo_str,
    n.descricao_str
   FROM ((((public.cbfollowup f
     JOIN public.cbcontrato c ON ((f.id_cbcontrato_int = c.id_cbcontrato_int)))
     LEFT JOIN public.cbparcela p ON ((f.id_cbparcela_int = p.id_cbparcela_int)))
     JOIN public.geusuario u ON ((f.id_geusuario_int = u.id_geusuario_int)))
     JOIN public.cbtiponegocio n ON ((c.id_cbtiponegocio_int = n.id_cbtiponegocio_int)));

--
-- TOC entry 1666 (class 1259 OID 42949)
-- Name: vw_re071; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_re071 AS
 SELECT DISTINCT ON (con.id_cbcontrato_int) con.id_cbcontrato_int,
    con.id_cbtiponegocio_int,
    con.id_cbsituacaocontrato_int,
    neg.codigo_str,
    con.contrato_str,
    con.nome_str,
    par.data_vencimento_dat,
    par.parcela_int,
    con.numero_total_parcelas_int,
    con.id_cbetapa_int,
    (('now'::text)::date - par.data_vencimento_dat) AS atraso_int,
    par.valor_principal_num,
    ret.data_cumprimento_interrup_dat,
        CASE
            WHEN (con.estado_str IS NULL) THEN con.estado_trabalho_str
            ELSE con.estado_str
        END AS estado_str
   FROM (((public.esretornofiat ret
     JOIN public.cbcontratofiat con ON ((ret.id_cbcontrato_int = con.id_cbcontrato_int)))
     JOIN public.cbparcela par ON ((con.id_cbcontrato_int = par.id_cbcontrato_int)))
     JOIN public.cbtiponegocio neg ON ((con.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
  WHERE ((ret.codigo_int = (20)::smallint) AND ((ret.tipo_interrupcao_str)::text = ('PRPRC'::character varying)::text) AND ((par.situacao_int = (0)::smallint) OR (par.situacao_int = (1)::smallint) OR (par.situacao_int = (2)::smallint) OR (par.situacao_int = (3)::smallint)))
  ORDER BY con.id_cbcontrato_int, par.parcela_int;

--
-- TOC entry 1667 (class 1259 OID 42960)
-- Name: vw_re072; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_re072 AS
 SELECT DISTINCT ON (pag.id_cbpagamento_int, pg.id_cbparcelapagamento_int) con.id_cbcontrato_int,
    con.contrato_str,
    con.nome_str,
    par.id_cbparcela_int,
    par.parcela_int,
    con.numero_total_parcelas_int,
    par.valor_principal_num,
    par.data_vencimento_dat,
    pag.data_pagamento_dat,
    pg.cp_num,
    pg.juros_mora_num,
    (((pg.cp_num + pg.juros_mora_num) + pg.despesa_banco_num) + pg.multa_num) AS encargos_num,
    pg.desconto_num,
    pg.valor_total_num,
    pg.honorarios_num,
    pg.notificacao_num,
    pg.comissionamento_num,
    esp.data_repasse_dat,
    esp.valor_num,
    esp.id_cbespeciepagamento_int
   FROM ((((public.cbcontratopecunia con
     JOIN public.cbpagamento pag ON ((con.id_cbcontrato_int = pag.id_cbcontrato_int)))
     JOIN public.cbespeciepagamento esp ON ((pag.id_cbpagamento_int = esp.id_cbpagamento_int)))
     JOIN public.cbparcelapagamento pg ON ((pag.id_cbpagamento_int = pg.id_cbpagamento_int)))
     JOIN public.cbparcela par ON ((pg.id_cbparcela_int = par.id_cbparcela_int)))
  WHERE ((pag.situacao_str)::text = ('E'::character varying)::text)
  ORDER BY pag.id_cbpagamento_int, pg.id_cbparcelapagamento_int;

--
-- TOC entry 1668 (class 1259 OID 42971)
-- Name: vw_re072_loc; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_re072_loc AS
 SELECT cbcontrato.id_cbcontrato_int,
    (cbcontrato.cliente_localizado_bit)::integer AS cliente_localizado_2_bit
   FROM public.cbcontrato;

--
-- TOC entry 1669 (class 1259 OID 42978)
-- Name: vw_remessabmc; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessabmc AS
 SELECT b.id_geempresa_int,
    b.id_gefilial_int,
    b.data_dat AS data_bordero_dat,
    b.gerado_str,
    ('now'::text)::date AS data_geracao_dat,
    c.contrato_str,
    p.parcela_int,
    i.nosso_numero_str,
    i.emissao_dat,
    i.vencimento_dat,
    i.principal_num,
    i.multa_num,
    i.juros_mora_num,
    i.cp_num,
    i.despesa_banco_num,
    i.desconto_num,
    i.valor_total_num
   FROM ((((public.cbcontratobmc c
     JOIN public.cbitembordero i ON ((c.id_cbcontrato_int = i.id_cbcontrato_int)))
     JOIN public.cbbordero b ON ((i.id_cbbordero_int = b.id_cbbordero_int)))
     JOIN public.cbparcelaitembordero pi ON ((i.id_cbitembordero_int = pi.id_cbitembordero_int)))
     JOIN public.cbparcela p ON ((pi.id_cbparcela_int = p.id_cbparcela_int)));

--
-- TOC entry 12095 (class 0 OID 0)
-- Dependencies: 1669
-- Name: VIEW vw_remessabmc; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessabmc IS 'Usado para remessa p/ banco BMC';

--
-- TOC entry 1670 (class 1259 OID 42990)
-- Name: vw_remessabrasilia; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessabrasilia AS
 SELECT ('now'::text)::date AS envio_arquivo_dat,
    to_char(('now'::text)::timestamp(6) with time zone, 'hh24miss'::text) AS hora_envio_tim,
    ((((replace((ct.contrato_str)::text, '.'::text, ' '::text) || '/'::text) || (tn.codigo_str)::text) || ' '::text) || (tn.descricao_str)::text) AS contrato_str,
    ct.nome_str AS nome_cliente,
    ct.cpf_str,
    ct.data_primeira_distrib_dat AS data_distrib_ctr,
    ct.endereco_str,
    ct.complemento_str,
    ct.bairro_str,
    ct.estado_str AS estado_cli,
    ct.cep_str,
    ct.cidade_str AS cidade_cli,
    ct.endereco_trabalho_str,
    ct.estado_trabalho_str,
    ct.bairro_trabalho_str,
    ct.cep_trabalho_str,
    ct.cidade_trabalho_str,
    ct.valor_montante_num,
        CASE
            WHEN (char_length((ct.cpf_str)::text) <= 11) THEN 2
            ELSE 1
        END AS tipo_pessoa_str,
    tn.descricao_str AS desc_tpneg_str,
    tn.mostra_parcela_str,
    pr.parcela_int,
    pr.data_vencimento_dat AS vencimento_parcela_dat,
    pr.valor_principal_num AS principal_parcela_num,
    em.nome_str AS nome_empresa,
    em.endereco1_str AS endereco_empresa_str,
    em.endereco2_str AS bairro_empresa_str,
    em.cgc_str AS cgc_empresa,
    substr((em.telefone_str)::text, 1, 2) AS ddd_empresa_str,
    substr((em.telefone_str)::text, 3, char_length((em.telefone_str)::text)) AS fone_empresa_str,
    substr((em.fax_str)::text, 3, char_length((em.fax_str)::text)) AS fax_empresa_str,
    em.email_str,
    ci.nome_str AS cidade_empresa_str,
    em.cep_str AS cep_empresa_str,
    ci.uf_str AS uf_empresa_str,
    de.id_cbvalortipodespesa_int,
    de.data_dat,
    de.data_envio_dat,
    de.situacao_str,
    de.id_cbdespesa_int,
    ct.id_cbsituacaocontrato_int,
    ct.id_cbcontrato_int
   FROM (((((((public.cbdespesa de
     JOIN public.cbcontratopanam ct ON ((de.id_cbcontrato_int = ct.id_cbcontrato_int)))
     JOIN public.cbparceladespesa pd ON ((pd.id_cbdespesa_int = de.id_cbdespesa_int)))
     JOIN public.cbparcela pr ON ((pr.id_cbparcela_int = pd.id_cbparcela_int)))
     JOIN public.cbtiponegocio tn ON ((tn.id_cbtiponegocio_int = ct.id_cbtiponegocio_int)))
     JOIN public.gefilial fl ON ((fl.id_gefilial_int = ct.id_gefilial_int)))
     JOIN public.geempresa em ON ((em.id_geempresa_int = ct.id_geempresa_int)))
     JOIN public.gecidade ci ON ((ci.id_gecidade_int = em.id_gecidade_int)));

--
-- TOC entry 1671 (class 1259 OID 43001)
-- Name: vw_remessacartoriobmc; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessacartoriobmc AS
 SELECT em.nome_str AS nome_empresa,
    em.endereco1_str AS endereco_empresa,
    em.endereco2_str AS endereco_empresa_2,
    ''::text AS complemento_empresa_str,
    ci.nome_str AS cidade_empresa,
    em.cep_str AS cep_empresa,
    ci.uf_str AS uf_empresa,
    em.telefone_str AS telefone_empresa,
    em.endereco2_str AS bairro_empresa,
    em.fax_str AS fax_empresa,
    ct.nome_str AS nome_cliente,
    ct.contrato_str,
    ct.cpf_str AS cpf_cliente,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.endereco_trabalho_str
            ELSE ct.endereco_str
        END AS endereco_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.bairro_trabalho_str
            ELSE ct.bairro_str
        END AS bairro_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.cep_trabalho_str
            ELSE ct.cep_str
        END AS cep_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.cidade_trabalho_str
            ELSE ct.cidade_str
        END AS cidade_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.estado_trabalho_str
            ELSE ct.estado_str
        END AS estado_cli,
    pa.parcela_int,
    pa.data_vencimento_dat AS venc_parcela,
    pa.valor_principal_num AS valor_parcela,
    pa.id_cbparcela_int,
    ct.id_cbsituacaocontrato_int,
    ct.data_contrato_dat,
    ct.id_cbcontrato_int,
    ct.id_cbetapa_int,
    de.id_cbdespesa_int,
    de.id_cbvalortipodespesa_int,
    de.data_dat,
    de.data_envio_dat,
    de.situacao_str,
    ct.id_gefilial_int,
    ('now'::text)::date AS data_geracao,
    ('now'::text)::time(6) with time zone AS hora_geracao
   FROM (((((public.cbcontratobmc ct
     JOIN public.geempresa em ON ((ct.id_geempresa_int = em.id_geempresa_int)))
     JOIN public.gecidade ci ON ((em.id_gecidade_int = ci.id_gecidade_int)))
     JOIN public.cbparcela pa ON ((ct.id_cbcontrato_int = pa.id_cbcontrato_int)))
     JOIN public.cbparceladespesa pd ON ((pa.id_cbparcela_int = pd.id_cbparcela_int)))
     JOIN public.cbdespesa de ON ((pd.id_cbdespesa_int = de.id_cbdespesa_int)));

--
-- TOC entry 12096 (class 0 OID 0)
-- Dependencies: 1671
-- Name: VIEW vw_remessacartoriobmc; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessacartoriobmc IS 'Remessa Cartorio - BMC';

--
-- TOC entry 1672 (class 1259 OID 43012)
-- Name: vw_remessacartoriobmcflori; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessacartoriobmcflori AS
 SELECT 'PASCHOALOTTO RECUPERAï¿½ï¿½O DE CRï¿½DITOS'::text AS nome_empresa,
    'AV. PREFEITO OSMAR CUNHA, 251 SALAS 1001, 1002 - 10ï¿½ ANDAR'::text AS endereco_empresa,
    ''::text AS endereco_empresa_2,
    'EDIF. Pï¿½ROLA NEGRA'::text AS complemento_empresa_str,
    'FLORIANï¿½POLIS'::text AS cidade_empresa,
    '88015100'::text AS cep_empresa,
    'SC'::text AS uf_empresa,
    '(48)3223-0152'::text AS telefone_empresa,
    'CENTRO'::text AS bairro_empresa,
    '(48)3223-0152'::text AS fax_empresa,
    ct.nome_str AS nome_cliente,
    ct.contrato_str,
    ct.cpf_str AS cpf_cliente,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.endereco_trabalho_str
            ELSE ct.endereco_str
        END AS endereco_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.bairro_trabalho_str
            ELSE ct.bairro_str
        END AS bairro_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.cep_trabalho_str
            ELSE ct.cep_str
        END AS cep_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.cidade_trabalho_str
            ELSE ct.cidade_str
        END AS cidade_cli,
        CASE
            WHEN ((btrim((ct.endereco_str)::text) = ''::text) OR (ct.endereco_str IS NULL)) THEN ct.estado_trabalho_str
            ELSE ct.estado_str
        END AS estado_cli,
    pa.parcela_int,
    pa.data_vencimento_dat AS venc_parcela,
    pa.valor_principal_num AS valor_parcela,
    pa.id_cbparcela_int,
    ct.id_cbsituacaocontrato_int,
    ct.data_contrato_dat,
    ct.id_cbcontrato_int,
    ct.id_cbetapa_int,
    de.id_cbdespesa_int,
    de.id_cbvalortipodespesa_int,
    de.data_dat,
    de.data_envio_dat,
    de.situacao_str,
    ct.id_gefilial_int,
    ('now'::text)::date AS data_geracao,
    ('now'::text)::time(6) with time zone AS hora_geracao
   FROM (((((public.cbcontratobmc ct
     JOIN public.geempresa em ON ((ct.id_geempresa_int = em.id_geempresa_int)))
     JOIN public.gecidade ci ON ((em.id_gecidade_int = ci.id_gecidade_int)))
     JOIN public.cbparcela pa ON ((ct.id_cbcontrato_int = pa.id_cbcontrato_int)))
     JOIN public.cbparceladespesa pd ON ((pa.id_cbparcela_int = pd.id_cbparcela_int)))
     JOIN public.cbdespesa de ON ((pd.id_cbdespesa_int = de.id_cbdespesa_int)));

--
-- TOC entry 12097 (class 0 OID 0)
-- Dependencies: 1672
-- Name: VIEW vw_remessacartoriobmcflori; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessacartoriobmcflori IS 'Remessa Cartorio - BMC';

--
-- TOC entry 1673 (class 1259 OID 43023)
-- Name: vw_remessacifra; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessacifra AS
 SELECT p.data_pagamento_dat,
    e.data_repasse_dat,
    p.data_calculo_dat,
    i.vencimento_dat,
    b.id_cbbordero_int,
    i.id_cbitembordero_int,
    i.parcelamento_str,
    i.id_cbcontrato_int,
    c.contrato_str,
    i.juros_mora_num,
    i.cp_num,
    i.multa_num,
    i.notificacao_num,
    i.honorarios_num,
    i.desconto_num,
    b.data_dat,
    b.gerado_str,
    i.emissao_dat,
    i.pago_str,
    i.valor_total_num,
    ( SELECT sum(((cbitembordero.valor_total_num - cbitembordero.comissionamento_num) - cbitembordero.honorarios_num)) AS sum
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = i.id_cbcontrato_int) AND (cbitembordero.id_cbbordero_int = i.id_cbbordero_int))) AS saldo_parcelas_int,
    ( SELECT count(cbitembordero.id_cbitembordero_int) AS count
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = i.id_cbcontrato_int) AND (cbitembordero.id_cbbordero_int = i.id_cbbordero_int))) AS qtde_parcelas_int,
        CASE
            WHEN ((i.parcelamento_str IS NULL) OR ((i.parcelamento_str)::text = (''::character varying)::text)) THEN (0)::numeric
            ELSE to_number(substr((i.parcelamento_str)::text, 5, 3), (999)::text)
        END AS parcelas,
        CASE
            WHEN ((i.parcelamento_str IS NULL) OR ((i.parcelamento_str)::text = (''::character varying)::text)) THEN (0)::numeric
            ELSE to_number(substr((i.parcelamento_str)::text, 1, 3), (999)::text)
        END AS parcela_acordo
   FROM ((((public.cbespeciepagamento e
     JOIN public.cbpagamento p ON ((e.id_cbpagamento_int = p.id_cbpagamento_int)))
     JOIN public.cbcontratocsc c ON ((p.id_cbcontrato_int = c.id_cbcontrato_int)))
     JOIN public.cbitembordero i ON (((p.id_cbcontrato_int = i.id_cbcontrato_int) AND (p.data_calculo_dat = i.vencimento_dat))))
     JOIN public.cbbordero b ON ((i.id_cbbordero_int = b.id_cbbordero_int)))
  ORDER BY c.nome_str, c.contrato_str, i.vencimento_dat;

--
-- TOC entry 12098 (class 0 OID 0)
-- Dependencies: 1673
-- Name: VIEW vw_remessacifra; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessacifra IS 'Usado na Remessa de Boletos CSC/CIFRA ';

--
-- TOC entry 1674 (class 1259 OID 43034)
-- Name: vw_remessaitau; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessaitau AS
 SELECT geempresa.nome_str AS nome_cedente,
    geempresa.cgc_str AS cgc_cedente,
    gefilial.codigo_str AS filial,
        CASE
            WHEN (cbbordero.modelo_carta_int = 4) THEN 9
            WHEN ((cbbordero.modelo_carta_int = 0) OR (cbbordero.modelo_carta_int = 1) OR (cbbordero.modelo_carta_int = 2) OR (cbbordero.modelo_carta_int = 3)) THEN int4(cbbordero.modelo_carta_int)
            ELSE '-1'::integer
        END AS modelo_carta_int,
    cbbordero.data_dat AS data_bordero_dat,
    cbitembordero.id_cbitembordero_int,
    cbitembordero.nosso_numero_str,
    cbitembordero.vencimento_dat,
    cbitembordero.comando_str,
    cbitembordero.valor_total_num,
    to_char(('now'::text)::timestamp(6) with time zone, 'dd/mm/yyyy'::text) AS data_dat,
    cbitembordero.valor_desconto_num AS desconto_num,
        CASE
            WHEN (cbitembordero.data_desconto_dat IS NULL) THEN to_char(0, '0'::text)
            ELSE to_char(timestamptz(cbitembordero.data_desconto_dat), 'dd/mm/yyyy'::text)
        END AS data_desconto_dat,
    ( SELECT count(cbitembordero_1.id_cbitembordero_int) AS count
           FROM public.cbitembordero cbitembordero_1
          WHERE (cbitembordero_1.id_cbbordero_int = cbbordero.id_cbbordero_int)) AS quantidade,
    ( SELECT sum(cbitembordero_1.valor_total_num) AS sum
           FROM public.cbitembordero cbitembordero_1
          WHERE (cbitembordero_1.id_cbbordero_int = cbbordero.id_cbbordero_int)) AS valor_total,
    fibanco.cod_banco_str,
    fibanco.nome_str AS nome_banco,
    cbconvenio.carteira_str,
    cbconvenio.especie_str,
    cbconvenio.aceite_str,
    fibanco.mensagem1_str,
        CASE
            WHEN (fibanco.mensagem1_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem1_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local1,
    (('Destino: '::character varying)::text || (cbitembordero.destino_str)::text) AS mensagem2,
    '3'::text AS local2,
    fibanco.mensagem3_str,
        CASE
            WHEN (fibanco.mensagem3_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem3_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local3,
    fibanco.mensagem4_str,
        CASE
            WHEN (fibanco.mensagem4_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem4_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local4,
    '3'::text AS local5,
    ficcbanco.conta_str,
    ficcbanco.agencia_str,
    cbcontratofiat.contrato_str AS campo_especial,
    cbcontratofiat.nome_str AS nome_sacado,
        CASE
            WHEN ((cbcontratofiat.endereco_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_str)::text) <> ''::text)) THEN cbcontratofiat.endereco_str
            WHEN ((cbcontratofiat.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratofiat.endereco_trabalho_str
            ELSE NULL::character varying
        END AS endereco_sacado,
        CASE
            WHEN ((cbcontratofiat.endereco_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_str)::text) <> ''::text)) THEN cbcontratofiat.bairro_str
            WHEN ((cbcontratofiat.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratofiat.bairro_trabalho_str
            ELSE NULL::character varying
        END AS bairro_sacado,
        CASE
            WHEN ((cbcontratofiat.endereco_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_str)::text) <> ''::text)) THEN cbcontratofiat.cep_str
            WHEN ((cbcontratofiat.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratofiat.cep_trabalho_str
            ELSE NULL::character varying
        END AS cep_sacado,
        CASE
            WHEN ((cbcontratofiat.endereco_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_str)::text) <> ''::text)) THEN cbcontratofiat.cidade_str
            WHEN ((cbcontratofiat.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratofiat.cidade_trabalho_str
            ELSE NULL::character varying
        END AS cidade_sacado,
        CASE
            WHEN ((cbcontratofiat.endereco_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_str)::text) <> ''::text)) THEN cbcontratofiat.estado_str
            WHEN ((cbcontratofiat.endereco_trabalho_str IS NOT NULL) AND (btrim((cbcontratofiat.endereco_trabalho_str)::text) <> ''::text)) THEN cbcontratofiat.estado_trabalho_str
            ELSE NULL::character varying
        END AS estado_sacado,
    ('now'::text)::date AS data_geracao_dat,
    cbcontratofiat.cpf_str,
    cbcontratofiat.cpf_avalista1_str,
    cbcontratofiat.nome_avalista1_str,
    cbcontratofiat.endereco_avalista1_str,
    cbcontratofiat.bairro_avalista1_str,
    cbcontratofiat.cep_avalista1_str,
    cbcontratofiat.cidade_avalista1_str,
    cbcontratofiat.estado_avalista1_str,
    cbbordero.id_cbbordero_int,
    cbcontratofiat.id_geempresa_int,
    cbcontratofiat.id_gefilial_int,
    cbcontratofiat.numero_total_parcelas_int,
    cbtiponegocio.id_cbtiponegocio_int,
    cbbordero.gerado_str,
    cbbordero.id_cbconvenio_int
   FROM (((((((((public.cbbordero
     JOIN public.cbconvenio ON ((cbconvenio.id_cbconvenio_int = cbbordero.id_cbconvenio_int)))
     JOIN public.fibanco ON ((fibanco.id_fibanco_int = cbbordero.id_fibanco_int)))
     JOIN public.ficcbanco ON ((ficcbanco.id_ficcbanco_int = cbbordero.id_ficcbanco_int)))
     JOIN public.cbitembordero ON ((cbitembordero.id_cbbordero_int = cbbordero.id_cbbordero_int)))
     JOIN public.cbcontratofiat ON ((cbitembordero.id_cbcontrato_int = cbcontratofiat.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbcontratofiat.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int)))
     JOIN public.gecliente ON ((gecliente.id_gecliente_int = cbcontratofiat.id_gecliente_int)))
     JOIN public.geempresa ON ((geempresa.id_geempresa_int = cbcontratofiat.id_geempresa_int)))
     JOIN public.gefilial ON ((gefilial.id_gefilial_int = cbcontratofiat.id_gefilial_int)));

--
-- TOC entry 12099 (class 0 OID 0)
-- Dependencies: 1674
-- Name: VIEW vw_remessaitau; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessaitau IS 'Usado para remessa borderï¿½ banco Itaï¿½';

--
-- TOC entry 1675 (class 1259 OID 43041)
-- Name: vw_remessaitaucred02; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessaitaucred02 AS
 SELECT cc.conta_str,
    cc.agencia_str,
    ct.contrato_str,
    ct.nome_str,
    ct.id_cbplataforma_int,
    fl.codigo_str,
    ct.cpf_str,
    ct.estado_str,
        CASE
            WHEN ((ct.tipo_pessoa_str)::text = ('F'::character varying)::text) THEN 'F'::text
            ELSE 'J'::text
        END AS tipo_pessoa,
    ct.codigo_escritorio_str,
    ct.codigo_operacao_str,
    (to_char((('now'::text)::date)::timestamp with time zone, 'yyyymmdd'::text) || to_char(('now'::text)::timestamp(6) with time zone, 'hh24mi'::text)) AS numero_lote_int,
    eb.nosso_numero_str,
    eb.dv_int,
    eb.vencimento_dat AS vencimento_boleto_dat,
    eb.emissao_dat,
    (eb.valor_total_num - eb.despesa_banco_num) AS total_boleto_num,
    eb.honorarios_num AS hon_boleto_num,
    eb.comissionamento_num AS comiss_boleto_num,
    eb.cod_barra_str,
    replace((eb.linha_digitavel_str)::text, '  '::text, ' '::text) AS linha_digitavel_str,
    ep.parcela_int,
    ep.vencimento_dat AS vencimento_parcela_dat,
    ep.principal_num AS principal_parcela_num,
    ep.multa_num AS multa_parcela_num,
    (ep.cp_num + ep.acrescimo_num) AS cp_parcela_num,
    ep.notificacao_num AS notif_parcela_num,
    ep.desconto_num AS desconto_parcela_num,
    ((ep.valor_total_num - ep.honorarios_num) - ep.despesa_banco_num) AS total_parcela_num,
    to_char((('now'::text)::date)::timestamp with time zone, 'yyyy/mm/dd'::text) AS data_lote_dat,
    to_char(('now'::text)::timestamp(6) with time zone, 'hh24mi'::text) AS hora_lote_tim,
    bo.id_cbtiponegocio_int,
    bo.data_dat AS data_bordero_dat,
    fi.cod_banco_str,
    bo.gerado_str,
    fl.id_gefilial_int,
    co.id_cbconvenio_int,
    fl.id_geempresa_int,
    eb.id_cbitembordero_int,
    eb.data_envio_dat,
    eb.status_str AS status_boleto_int,
    eb.enviado_str,
    eb.quitacao_str
   FROM (((((((public.esboletoincon eb
     JOIN public.esboletoincon ep ON (((ep.cbitembordero_int = eb.id_cbitembordero_int) AND (eb.cbitembordero_int IS NULL))))
     JOIN public.cbcontratoitau ct ON ((ct.id_cbcontrato_int = ep.id_cbcontrato_int)))
     JOIN public.gefilial fl ON ((fl.id_gefilial_int = ct.id_gefilial_int)))
     JOIN public.cbbordero bo ON ((bo.id_cbbordero_int = eb.id_cbbordero_int)))
     JOIN public.cbconvenio co ON ((bo.id_cbconvenio_int = co.id_cbconvenio_int)))
     JOIN public.fibanco fi ON (((fi.id_fibanco_int = bo.id_fibanco_int) AND (fi.id_fibanco_int = co.id_fibanco_int))))
     JOIN public.ficcbanco cc ON (((cc.id_fibanco_int = fi.id_fibanco_int) AND (cc.id_ficcbanco_int = co.id_ficcbanco_int))));

--
-- TOC entry 12100 (class 0 OID 0)
-- Dependencies: 1675
-- Name: VIEW vw_remessaitaucred02; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessaitaucred02 IS 'Remessa de boletos a ser enviados como alteraï¿½ï¿½o - ITAUCRED';

--
-- TOC entry 1676 (class 1259 OID 43051)
-- Name: vw_remessaitaucred02quit; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessaitaucred02quit AS
 SELECT cc.conta_str,
    cc.agencia_str,
    ct.contrato_str,
    ct.nome_str,
    ct.id_cbplataforma_int,
    fl.codigo_str,
    ct.cpf_str,
    ct.estado_str,
        CASE
            WHEN ((ct.tipo_pessoa_str)::text = ('F'::character varying)::text) THEN 'F'::text
            ELSE 'J'::text
        END AS tipo_pessoa,
    ct.codigo_escritorio_str,
    ct.codigo_operacao_str,
    (to_char((('now'::text)::date)::timestamp with time zone, 'yyyymmdd'::text) || to_char(('now'::text)::timestamp(6) with time zone, 'hh24mi'::text)) AS numero_lote_int,
    eb.nosso_numero_str,
    eb.dv_int,
    eb.vencimento_dat AS vencimento_boleto_dat,
    eb.emissao_dat,
    (eb.valor_total_num - eb.despesa_banco_num) AS total_boleto_num,
    eb.honorarios_num AS hon_boleto_num,
    eb.comissionamento_num AS comiss_boleto_num,
    eb.cod_barra_str,
    replace((eb.linha_digitavel_str)::text, '  '::text, ' '::text) AS linha_digitavel_str,
    '000'::text AS parcela_int,
    NULL::text AS vencimento_parcela_dat,
    eb.principal_num AS principal_parcela_num,
    eb.multa_num AS multa_parcela_num,
    (eb.cp_num + eb.acrescimo_num) AS cp_parcela_num,
    eb.notificacao_num AS notif_parcela_num,
    eb.desconto_num AS desconto_parcela_num,
    ((eb.valor_total_num - eb.honorarios_num) - eb.despesa_banco_num) AS total_parcela_num,
    to_char((('now'::text)::date)::timestamp with time zone, 'yyyy/mm/dd'::text) AS data_lote_dat,
    to_char(('now'::text)::timestamp(6) with time zone, 'hh24mi'::text) AS hora_lote_tim,
    bo.id_cbtiponegocio_int,
    bo.data_dat AS data_bordero_dat,
    fi.cod_banco_str,
    bo.gerado_str,
    fl.id_gefilial_int,
    co.id_cbconvenio_int,
    fl.id_geempresa_int,
    eb.id_cbitembordero_int,
    eb.data_envio_dat,
    eb.status_str AS status_boleto_int,
    eb.enviado_str,
    eb.quitacao_str
   FROM ((((((public.esboletoincon eb
     JOIN public.cbcontratoitau ct ON ((ct.id_cbcontrato_int = eb.id_cbcontrato_int)))
     JOIN public.gefilial fl ON ((fl.id_gefilial_int = ct.id_gefilial_int)))
     JOIN public.cbbordero bo ON ((bo.id_cbbordero_int = eb.id_cbbordero_int)))
     JOIN public.cbconvenio co ON ((bo.id_cbconvenio_int = co.id_cbconvenio_int)))
     JOIN public.fibanco fi ON (((fi.id_fibanco_int = bo.id_fibanco_int) AND (fi.id_fibanco_int = co.id_fibanco_int))))
     JOIN public.ficcbanco cc ON (((cc.id_fibanco_int = fi.id_fibanco_int) AND (cc.id_ficcbanco_int = co.id_ficcbanco_int))))
  WHERE ((eb.cbitembordero_int IS NULL) AND ((eb.quitacao_str)::text = ('S'::character varying)::text));

--
-- TOC entry 12101 (class 0 OID 0)
-- Dependencies: 1676
-- Name: VIEW vw_remessaitaucred02quit; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessaitaucred02quit IS 'Remessa de boletos QUITACAO a enviar como alteraï¿½ï¿½o - ITAUCRED';

--
-- TOC entry 1677 (class 1259 OID 43065)
-- Name: vw_remessapan; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessapan AS
 SELECT ('now'::text)::date AS data_geracao_dat,
    to_char(now(), 'HH24MI'::text) AS hora_geracao_tim,
    pan.contrato_str,
    pan.nome_str,
    pan.cpf_str AS cpf_sacado_str,
        CASE
            WHEN (upper((pan.tipo_pessoa_str)::text) = 'F'::text) THEN '1'::text
            WHEN (upper((pan.tipo_pessoa_str)::text) = 'J'::text) THEN '2'::text
            ELSE '0'::text
        END AS tipo_inscricao_int,
        CASE
            WHEN ((btrim((pan.endereco_str)::text) <> ''::text) AND (pan.endereco_str IS NOT NULL)) THEN (((pan.endereco_str)::text || ' '::text) || (pan.numero_str)::text)
            ELSE (((pan.endereco_trabalho_str)::text || ' '::text) || (pan.numero_trabalho_str)::text)
        END AS endereco_str,
        CASE
            WHEN ((btrim((pan.endereco_str)::text) <> ''::text) AND (pan.endereco_str IS NOT NULL)) THEN pan.complemento_str
            ELSE pan.complemento_trabalho_str
        END AS complemento_str,
        CASE
            WHEN ((btrim((pan.endereco_str)::text) <> ''::text) AND (pan.endereco_str IS NOT NULL)) THEN pan.bairro_str
            ELSE pan.bairro_trabalho_str
        END AS bairro_str,
        CASE
            WHEN ((btrim((pan.endereco_str)::text) <> ''::text) AND (pan.endereco_str IS NOT NULL)) THEN pan.cep_str
            ELSE pan.cep_trabalho_str
        END AS cep_str,
        CASE
            WHEN ((btrim((pan.endereco_str)::text) <> ''::text) AND (pan.endereco_str IS NOT NULL)) THEN pan.cidade_str
            ELSE pan.cidade_trabalho_str
        END AS cidade_str,
        CASE
            WHEN ((btrim((pan.endereco_str)::text) <> ''::text) AND (pan.endereco_str IS NOT NULL)) THEN pan.estado_str
            ELSE pan.estado_trabalho_str
        END AS estado_str,
    pan.nome_avalista1_str AS avalista_str,
    pan.cpf_avalista1_str,
    con.convenio_banco_str,
    emp.cgc_str AS cgc_empresa,
    emp.nome_str AS nome_empresa,
    ban.cod_banco_str,
    ban.nome_str AS nome_banco,
    substr((cta.conta_str)::text, 1, (char_length((cta.conta_str)::text) - 2)) AS conta_str,
    substr((cta.agencia_str)::text, 1, (char_length((cta.agencia_str)::text) - 2)) AS agencia_str,
    substr((cta.conta_str)::text, char_length((cta.conta_str)::text), 1) AS digito_conta_str,
    substr((cta.agencia_str)::text, char_length((cta.agencia_str)::text), 1) AS digito_agencia_str,
    ite.nosso_numero_str AS nosso_numero,
    con.carteira_str,
    con.especie_str,
    con.aceite_str,
    ite.emissao_dat AS emissao_titulo_dat,
    ite.vencimento_dat,
    ite.valor_total_num,
    ite.desconto_num,
    ite.data_desconto_dat,
    ite.abatimento_num,
    ite.despesa_banco_num AS tarifa_num,
    ite.juros_mora_num,
    bor.id_geempresa_int,
    bor.id_gefilial_int,
    bor.gerado_str,
    con.id_cbtiponegocio_int,
    bor.data_dat AS data_bordero_dat,
    con.id_cbconvenio_int,
    bor.id_cbbordero_int
   FROM ((((((public.cbbordero bor
     JOIN public.cbitembordero ite ON ((bor.id_cbbordero_int = ite.id_cbbordero_int)))
     JOIN public.cbconvenio con ON ((bor.id_cbconvenio_int = con.id_cbconvenio_int)))
     JOIN public.cbcontratopan pan ON ((ite.id_cbcontrato_int = pan.id_cbcontrato_int)))
     JOIN public.fibanco ban ON ((con.id_fibanco_int = ban.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((con.id_ficcbanco_int = cta.id_ficcbanco_int)))
     JOIN public.geempresa emp ON ((emp.id_geempresa_int = bor.id_geempresa_int)));

--
-- TOC entry 12102 (class 0 OID 0)
-- Dependencies: 1677
-- Name: VIEW vw_remessapan; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessapan IS 'Remessa Panamericano';

--
-- TOC entry 1678 (class 1259 OID 43080)
-- Name: vw_remessareal; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_remessareal AS
 SELECT geempresa.nome_str AS nome_cedente,
    geempresa.cgc_str AS cgc_cedente,
        CASE
            WHEN (cbbordero.modelo_carta_int = (4)::smallint) THEN (9)::smallint
            WHEN ((cbbordero.modelo_carta_int = (0)::smallint) OR (cbbordero.modelo_carta_int = (1)::smallint) OR (cbbordero.modelo_carta_int = (2)::smallint) OR (cbbordero.modelo_carta_int = (3)::smallint)) THEN cbbordero.modelo_carta_int
            ELSE (- (1)::smallint)
        END AS modelo_carta_int,
    cbitembordero.id_cbitembordero_int,
    cbitembordero.nosso_numero_str,
    cbitembordero.vencimento_dat,
    cbitembordero.comando_str,
    cbitembordero.valor_total_num,
    to_char(cbitembordero."timestamp", 'dd/mm/yyyy'::text) AS data_dat,
    cbitembordero.valor_desconto_num AS desconto_num,
        CASE
            WHEN (cbitembordero.data_desconto_dat IS NULL) THEN to_char(0, '0'::text)
            ELSE to_char((cbitembordero.data_desconto_dat)::timestamp with time zone, 'dd/mm/yyyy'::text)
        END AS data_desconto_dat,
    ( SELECT count(cbitembordero_1.id_cbitembordero_int) AS count
           FROM public.cbitembordero cbitembordero_1
          WHERE (cbitembordero_1.id_cbbordero_int = cbbordero.id_cbbordero_int)) AS quantidade,
    ( SELECT sum(cbitembordero_1.valor_total_num) AS sum
           FROM public.cbitembordero cbitembordero_1
          WHERE (cbitembordero_1.id_cbbordero_int = cbbordero.id_cbbordero_int)) AS valor_total,
    fibanco.cod_banco_str,
    fibanco.nome_str AS nome_banco,
    fibanco.mensagem1_str,
        CASE
            WHEN (fibanco.mensagem1_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem1_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local1,
    ('Destino: '::text || btrim((cbitembordero.destino_str)::text)) AS mensagem2,
    '3'::text AS local2,
    fibanco.mensagem3_str,
        CASE
            WHEN (fibanco.mensagem3_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem3_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local3,
    fibanco.mensagem4_str,
        CASE
            WHEN (fibanco.mensagem4_str IS NULL) THEN ' '::text
            WHEN (btrim((fibanco.mensagem4_str)::text) = ''::text) THEN ' '::text
            ELSE '3'::text
        END AS local4,
    '3'::text AS local5,
    ficcbanco.conta_str,
    ficcbanco.agencia_str,
    cbcontratobmc.contrato_str AS campo_especial,
    cbcontratobmc.nome_str AS nome_sacado,
        CASE
            WHEN (cbcontratobmc.endereco_str IS NOT NULL) THEN cbcontratobmc.endereco_str
            WHEN (cbcontratobmc.endereco_trabalho_str IS NOT NULL) THEN cbcontratobmc.endereco_trabalho_str
            ELSE NULL::character varying
        END AS endereco_sacado,
        CASE
            WHEN (cbcontratobmc.bairro_str IS NOT NULL) THEN cbcontratobmc.bairro_str
            WHEN (cbcontratobmc.bairro_trabalho_str IS NOT NULL) THEN cbcontratobmc.bairro_trabalho_str
            ELSE NULL::character varying
        END AS bairro_sacado,
        CASE
            WHEN (cbcontratobmc.cep_str IS NOT NULL) THEN cbcontratobmc.cep_str
            WHEN (cbcontratobmc.cep_trabalho_str IS NOT NULL) THEN cbcontratobmc.cep_trabalho_str
            ELSE NULL::character varying
        END AS cep_sacado,
        CASE
            WHEN (cbcontratobmc.cidade_str IS NOT NULL) THEN cbcontratobmc.cidade_str
            WHEN (cbcontratobmc.cidade_trabalho_str IS NOT NULL) THEN cbcontratobmc.cidade_trabalho_str
            ELSE NULL::character varying
        END AS cidade_sacado,
        CASE
            WHEN (cbcontratobmc.estado_str IS NOT NULL) THEN cbcontratobmc.estado_str
            WHEN (cbcontratobmc.estado_trabalho_str IS NOT NULL) THEN cbcontratobmc.estado_trabalho_str
            ELSE NULL::character varying
        END AS estado_sacado,
    ('now'::text)::date AS data_emissao,
    cbbordero.id_cbbordero_int,
    cbbordero.data_dat AS data_bordero_dat,
    cbbordero.gerado_str,
    cbbordero.id_gecliente_int,
    cbcontratobmc.id_geempresa_int,
    cbcontratobmc.id_cbtiponegocio_int
   FROM (((((((public.cbbordero
     JOIN public.cbconvenio ON ((cbconvenio.id_cbconvenio_int = cbbordero.id_cbconvenio_int)))
     JOIN public.fibanco ON ((fibanco.id_fibanco_int = cbbordero.id_fibanco_int)))
     JOIN public.ficcbanco ON ((ficcbanco.id_ficcbanco_int = cbbordero.id_ficcbanco_int)))
     JOIN public.cbitembordero ON ((cbitembordero.id_cbbordero_int = cbbordero.id_cbbordero_int)))
     JOIN public.cbcontratobmc ON ((cbitembordero.id_cbcontrato_int = cbcontratobmc.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbcontratobmc.id_cbtiponegocio_int = cbtiponegocio.id_cbtiponegocio_int)))
     JOIN public.geempresa ON ((geempresa.id_geempresa_int = cbcontratobmc.id_geempresa_int)));

--
-- TOC entry 12103 (class 0 OID 0)
-- Dependencies: 1678
-- Name: VIEW vw_remessareal; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_remessareal IS 'Usado no Retorno do Banco Real - Borderï¿½';

--
-- TOC entry 1679 (class 1259 OID 43094)
-- Name: vw_retbradescoacordo; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retbradescoacordo AS
 SELECT bo.data_dat AS emissao_dat,
    ct.despesas_finan_num AS saldo_atual_num,
    pa.saldo_devedor_num,
    ib.valor_desconto_num AS desconto_boleto_num,
        CASE
            WHEN (substr((ib.parcelamento_str)::text, 1, 3) = '000'::text) THEN (0)::bigint
            ELSE pa.parcela_int
        END AS parcela_int,
    pa.data_vencimento_dat AS vencimento_original_parcela,
    bp.data_pagamento_dat AS data_pagamento_boleto,
    pi.valor_total_num AS total_parcela,
    bp.valor_pagamento_num AS valor_pago,
    bp.valor_pagamento_num AS valor_repasse,
    pi.comissionamento_num AS comissao_num,
    pi.honorarios_num,
    ib.vencimento_dat AS vencimento_boleto,
    ib.valor_total_num AS total_boleto,
        CASE
            WHEN (ib.parcelamento_str IS NULL) THEN ''::text
            ELSE substr((ib.parcelamento_str)::text, 2, 2)
        END AS nparcela_parcelamento,
    ( SELECT
                CASE
                    WHEN (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text) THEN 1
                    ELSE 0
                END AS "case"
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS com_entrada,
    ( SELECT cbitembordero.valor_total_num
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS valor_entrada,
    ( SELECT cbitembordero.vencimento_dat
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS data_entrada,
    ( SELECT cbitembordero.valor_total_num
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '001'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS valor_primeira,
    ( SELECT cbitembordero.vencimento_dat
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '001'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS data_primeira,
    ( SELECT sum(cbitembordero.valor_total_num) AS sum
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int))) AS total_acordo,
    pi.desconto_num AS desconto_parcela_num,
    pi.percentual_desconto_num AS perc_desc_parcela_num,
    substr((ib.parcelamento_str)::text, 6, 2) AS total_parcelas,
    ib.principal_num AS principal_boleto_num,
    ct.data_primeira_distrib_dat AS data_recebimento,
    ct.contrato_str,
    ct.nome_str,
    ct.cpf_str,
    ct.endereco_str,
    ct.bairro_str,
    ct.cidade_str,
    ct.cep_str,
    ct.estado_str,
    ct.endereco_trabalho_str,
    ct.bairro_trabalho_str,
    ct.cep_trabalho_str,
    replace((ct.telefone_str)::text, ' '::text, ''::text) AS telefone_str,
    replace((ct.telefone_trabalho_str)::text, ' '::text, ''::text) AS telefone_trabalho_str,
    ct.cidade_trabalho_str,
    ct.estado_trabalho_str,
        CASE
            WHEN ((ct.tipo_pessoa_str)::text = ('F'::character varying)::text) THEN 'F'::text
            ELSE 'J'::text
        END AS tipo_pessoa,
    to_char((('now'::text)::date)::timestamp with time zone, 'yyyymmdd'::text) AS data_geracao,
    fl.sigla_filial_str,
    to_char(('now'::text)::timestamp(6) with time zone, 'hh24mi'::text) AS hora_geracao,
    ib.acordo_int,
    bo.id_cbtiponegocio_int,
    ct.id_cbcontrato_int,
    ib.id_cbitembordero_int,
    substr((re.abrev_str)::text, 2, 2) AS meses_atraso,
    bp.enviado_str,
    fi.cod_banco_str,
    bo.gerado_str,
    ct.id_gefilial_int,
    co.id_cbconvenio_int,
    re.grupo_str
   FROM ((((((((((public.cbboletopagamento bp
     JOIN public.cbitembordero ib ON ((bp.id_cbitembordero_int = ib.id_cbitembordero_int)))
     JOIN public.cbcontratobradescocartao ct ON ((ib.id_cbcontrato_int = ct.id_cbcontrato_int)))
     JOIN public.cbbordero bo ON ((ib.id_cbbordero_int = bo.id_cbbordero_int)))
     JOIN public.cbparcelaitembordero pi ON ((ib.id_cbitembordero_int = pi.id_cbitembordero_int)))
     JOIN public.cbparcela pa ON ((pi.id_cbparcela_int = pa.id_cbparcela_int)))
     JOIN public.esregua re ON ((pa.id_esregua_int = re.id_esregua_int)))
     JOIN public.cbconvenio co ON ((bo.id_cbconvenio_int = co.id_cbconvenio_int)))
     JOIN public.fibanco fi ON (((fi.id_fibanco_int = bo.id_fibanco_int) AND (fi.id_fibanco_int = co.id_fibanco_int))))
     JOIN public.ficcbanco cc ON (((cc.id_fibanco_int = fi.id_fibanco_int) AND (cc.id_ficcbanco_int = co.id_ficcbanco_int))))
     JOIN public.gefilial fl ON ((ct.id_gefilial_int = fl.id_gefilial_int)))
  WHERE (NOT (bp.id_cbcontrato_int IN ( SELECT DISTINCT cbboletopagamento.id_cbcontrato_int
           FROM public.cbboletopagamento
          WHERE ((cbboletopagamento.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbboletopagamento.acordo_int = bp.acordo_int) AND ((cbboletopagamento.enviado_str)::text = ('S'::character varying)::text))
          ORDER BY cbboletopagamento.id_cbcontrato_int)));

--
-- TOC entry 12104 (class 0 OID 0)
-- Dependencies: 1679
-- Name: VIEW vw_retbradescoacordo; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retbradescoacordo IS 'Retorno de acordos - BRADESCO CARTOES';

--
-- TOC entry 1680 (class 1259 OID 43105)
-- Name: vw_retbradescocorpacordo; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retbradescocorpacordo AS
 SELECT cbbordero.id_cbbordero_int,
    cbitembordero.id_cbcontrato_int,
    ('now'::text)::date AS data_movimento,
    ('now'::text)::date AS data_geracao,
    now() AS hora_geracao,
    contrato.contrato_str,
    cbitembordero.acordo_int,
    ('now'::text)::date AS data_envio,
    cbitembordero.parcelamento_str,
    cbitembordero.vencimento_dat,
    cbpagamento.data_pagamento_dat,
        CASE
            WHEN (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text) THEN ( SELECT i.vencimento_dat
               FROM public.cbitembordero i
              WHERE ((i.acordo_int = cbitembordero.acordo_int) AND (i.id_cbcontrato_int = cbitembordero.id_cbcontrato_int) AND (substr((i.parcelamento_str)::text, 1, 3) = '001'::text)))
            WHEN (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '001'::text) THEN ( SELECT i.vencimento_dat
               FROM public.cbitembordero i
              WHERE ((i.acordo_int = cbitembordero.acordo_int) AND (i.id_cbcontrato_int = cbitembordero.id_cbcontrato_int) AND (substr((i.parcelamento_str)::text, 1, 3) = '002'::text)))
            WHEN (cbitembordero.vencimento_dat < cbpagamento.data_pagamento_dat) THEN cbpagamento.data_pagamento_dat
            ELSE cbitembordero.vencimento_dat
        END AS primeiro_vencimento_dat,
        CASE
            WHEN ((cbitembordero.parcelamento_str IS NULL) OR ((cbitembordero.parcelamento_str)::text = ''::text)) THEN '001'::text
            WHEN (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text) THEN substr((cbitembordero.parcelamento_str)::text, 5, 3)
            ELSE to_char((to_number(substr((cbitembordero.parcelamento_str)::text, 5, 3), (999)::text) - (1)::numeric), (999)::text)
        END AS qtd_parcelas,
        CASE
            WHEN (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text) THEN ( SELECT sum(i.valor_total_num) AS sum
               FROM public.cbitembordero i
              WHERE ((i.id_cbbordero_int = cbitembordero.id_cbbordero_int) AND (i.id_cbcontrato_int = cbitembordero.id_cbcontrato_int) AND (substr((i.parcelamento_str)::text, 1, 3) = '001'::text)))
            ELSE cbitembordero.valor_total_num
        END AS valor_total_num,
        CASE
            WHEN ((cbitembordero.parcelamento_str IS NULL) OR ((cbitembordero.parcelamento_str)::text = ''::text)) THEN (0)::double precision
            ELSE cbitembordero.valor_total_num
        END AS valor_entrada,
        CASE
            WHEN ((cbitembordero.parcelamento_str IS NULL) OR ((cbitembordero.parcelamento_str)::text = ''::text)) THEN NULL::date
            ELSE cbpagamento.data_pagamento_dat
        END AS vencimento_entrada,
    ( SELECT sum(i.valor_total_num) AS sum
           FROM public.cbitembordero i
          WHERE ((i.id_cbbordero_int = cbitembordero.id_cbbordero_int) AND (i.id_cbcontrato_int = cbitembordero.id_cbcontrato_int))) AS total_acordo,
        CASE
            WHEN ((cbitembordero.parcelamento_str IS NULL) OR ((cbitembordero.parcelamento_str)::text = ''::text)) THEN 'N'::text
            ELSE 'S'::text
        END AS vista_prazo,
    cbbordero.gerado_str,
    cbbordero.data_dat,
    cbitembordero.id_cbitembordero_int,
    cbbordero.id_cbconvenio_int,
    cbespeciepagamento.data_repasse_dat,
    cbpagamento.situacao_str,
    cbitembordero.pago_str
   FROM ((((public.cbespeciepagamento
     JOIN public.cbpagamento ON ((cbespeciepagamento.id_cbpagamento_int = cbpagamento.id_cbpagamento_int)))
     JOIN public.cbitembordero ON ((cbpagamento.id_cbitembordero_int = cbitembordero.id_cbitembordero_int)))
     JOIN public.cbbordero ON ((cbitembordero.id_cbbordero_int = cbbordero.id_cbbordero_int)))
     JOIN public.cbcontratobradescocorporativo contrato ON ((contrato.id_cbcontrato_int = cbitembordero.id_cbcontrato_int)));

--
-- TOC entry 12105 (class 0 OID 0)
-- Dependencies: 1680
-- Name: VIEW vw_retbradescocorpacordo; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retbradescocorpacordo IS 'View utilizada na remessa de acordos do Bradesco Corporativo';

--
-- TOC entry 1681 (class 1259 OID 43115)
-- Name: vw_retbradescocorppagto; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retbradescocorppagto AS
 SELECT ('now'::text)::date AS data_geracao,
    ('now'::text)::timestamp(6) with time zone AS hora_geracao,
    cbcontratobradescocorporativo.id_cbcontrato_int,
    cbpagamento.id_cbpagamento_int,
    cbcontratobradescocorporativo.contrato_str,
    cbpagamento.valor_total_num,
    cbpagamento.data_pagamento_dat,
    cbespeciepagamento.data_repasse_dat,
    cbpagamento.situacao_str
   FROM ((public.cbespeciepagamento
     JOIN public.cbpagamento ON ((cbespeciepagamento.id_cbpagamento_int = cbpagamento.id_cbpagamento_int)))
     JOIN public.cbcontratobradescocorporativo ON ((cbcontratobradescocorporativo.id_cbcontrato_int = cbpagamento.id_cbcontrato_int)))
  ORDER BY cbcontratobradescocorporativo.nome_str, cbpagamento.id_cbpagamento_int;

--
-- TOC entry 12106 (class 0 OID 0)
-- Dependencies: 1681
-- Name: VIEW vw_retbradescocorppagto; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retbradescocorppagto IS 'Usado na remessa de pagamentos';

--
-- TOC entry 1682 (class 1259 OID 43129)
-- Name: vw_retbradescolote; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retbradescolote AS
 SELECT '000015'::text AS nautorizacao_int,
    '237'::text AS banco_cheque,
    ('now'::text)::date AS data_envio,
    ('now'::text)::date AS data_inclusao;

--
-- TOC entry 12107 (class 0 OID 0)
-- Dependencies: 1682
-- Name: VIEW vw_retbradescolote; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retbradescolote IS 'Retorno de Lotes - BRADESCO CARTï¿½ES';

--
-- TOC entry 1683 (class 1259 OID 43139)
-- Name: vw_retbradescoparcela; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retbradescoparcela AS
 SELECT bo.data_dat AS emissao_dat,
    ct.despesas_finan_num AS saldo_atual_num,
    pa.saldo_devedor_num,
    ib.valor_desconto_num AS desconto_boleto_num,
        CASE
            WHEN (substr((ib.parcelamento_str)::text, 1, 3) = '000'::text) THEN (0)::bigint
            ELSE pa.parcela_int
        END AS parcela_int,
    pa.data_vencimento_dat AS vencimento_original_parcela,
    bp.data_pagamento_dat AS data_pagamento_boleto,
    pi.valor_total_num AS total_parcela,
    bp.valor_pagamento_num AS valor_pago,
    bp.valor_pagamento_num AS valor_repasse,
    pi.comissionamento_num AS comissao_num,
    pi.honorarios_num,
    ib.vencimento_dat AS vencimento_boleto,
    ib.valor_total_num AS total_boleto,
        CASE
            WHEN (ib.parcelamento_str IS NULL) THEN ''::text
            ELSE substr((ib.parcelamento_str)::text, 2, 2)
        END AS nparcela_parcelamento,
    ( SELECT
                CASE
                    WHEN (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text) THEN 1
                    ELSE 0
                END AS "case"
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS com_entrada,
    ( SELECT cbitembordero.valor_total_num
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS valor_entrada,
    ( SELECT cbitembordero.vencimento_dat
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '000'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS data_entrada,
    ( SELECT cbitembordero.valor_total_num
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '001'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS valor_primeira,
    ( SELECT cbitembordero.vencimento_dat
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int) AND (substr((cbitembordero.parcelamento_str)::text, 1, 3) = '001'::text))
          ORDER BY cbitembordero.vencimento_dat DESC
         LIMIT 1) AS data_primeira,
    ( SELECT sum(cbitembordero.valor_total_num) AS sum
           FROM public.cbitembordero
          WHERE ((cbitembordero.id_cbcontrato_int = ct.id_cbcontrato_int) AND (cbitembordero.acordo_int = ib.acordo_int))) AS total_acordo,
    pi.desconto_num AS desconto_parcela_num,
    pi.percentual_desconto_num AS perc_desc_parcela_num,
    substr((ib.parcelamento_str)::text, 6, 2) AS total_parcelas,
    ib.principal_num AS principal_boleto_num,
    ct.data_primeira_distrib_dat AS data_recebimento,
    ct.contrato_str,
    ct.nome_str,
    ct.cpf_str,
    ct.endereco_str,
    ct.bairro_str,
    ct.cidade_str,
    ct.cep_str,
    ct.estado_str,
    ct.endereco_trabalho_str,
    ct.bairro_trabalho_str,
    ct.cep_trabalho_str,
    replace((ct.telefone_str)::text, ' '::text, ''::text) AS telefone_str,
    replace((ct.telefone_trabalho_str)::text, ' '::text, ''::text) AS telefone_trabalho_str,
    ct.cidade_trabalho_str,
    ct.estado_trabalho_str,
        CASE
            WHEN ((ct.tipo_pessoa_str)::text = ('F'::character varying)::text) THEN 'F'::text
            ELSE 'J'::text
        END AS tipo_pessoa,
    to_char((('now'::text)::date)::timestamp with time zone, 'yyyymmdd'::text) AS data_geracao,
    fl.sigla_filial_str,
    to_char(('now'::text)::timestamp(6) with time zone, 'hh24mi'::text) AS hora_geracao,
    ib.acordo_int,
    bo.id_cbtiponegocio_int,
    ct.id_cbcontrato_int,
    ib.id_cbitembordero_int,
    substr((re.abrev_str)::text, 2, 2) AS meses_atraso,
    bp.enviado_str,
    fi.cod_banco_str,
    bo.gerado_str,
    ct.id_gefilial_int,
    co.id_cbconvenio_int,
    re.grupo_str
   FROM ((((((((((public.cbboletopagamento bp
     JOIN public.cbitembordero ib ON ((bp.id_cbitembordero_int = ib.id_cbitembordero_int)))
     JOIN public.cbcontratobradescocartao ct ON ((ib.id_cbcontrato_int = ct.id_cbcontrato_int)))
     JOIN public.cbbordero bo ON ((ib.id_cbbordero_int = bo.id_cbbordero_int)))
     JOIN public.cbparcelaitembordero pi ON ((ib.id_cbitembordero_int = pi.id_cbitembordero_int)))
     JOIN public.cbparcela pa ON ((pi.id_cbparcela_int = pa.id_cbparcela_int)))
     JOIN public.esregua re ON ((pa.id_esregua_int = re.id_esregua_int)))
     JOIN public.cbconvenio co ON ((bo.id_cbconvenio_int = co.id_cbconvenio_int)))
     JOIN public.fibanco fi ON (((fi.id_fibanco_int = bo.id_fibanco_int) AND (fi.id_fibanco_int = co.id_fibanco_int))))
     JOIN public.ficcbanco cc ON (((cc.id_fibanco_int = fi.id_fibanco_int) AND (cc.id_ficcbanco_int = co.id_ficcbanco_int))))
     JOIN public.gefilial fl ON ((ct.id_gefilial_int = fl.id_gefilial_int)));

--
-- TOC entry 12108 (class 0 OID 0)
-- Dependencies: 1683
-- Name: VIEW vw_retbradescoparcela; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retbradescoparcela IS 'Retorno de parcelas - BRADESCO CARTOES';

--
-- TOC entry 1684 (class 1259 OID 43152)
-- Name: vw_retornoalianca; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornoalianca AS
 SELECT ('now'::text)::date AS data_atual,
    ct.codigo_segmento_str,
    ct.grupo_str,
    ct.cota_str,
    ct.nome_str,
    it.valor_total_num,
    it.vencimento_dat,
    pa.parcela_int,
    ('now'::text)::date AS data_remessa,
    it.nosso_numero_str,
    it.boleto_int,
    pi.principal_num,
    pi.juros_mora_num,
    pi.multa_num,
    pi.desconto_num,
    pi.comissionamento_num,
    bo.data_dat AS data_bordero_dat,
    fi.cod_banco_str,
    cc.conta_str,
    bo.gerado_str,
    co.id_cbconvenio_int,
    ge.id_geempresa_int
   FROM ((((((((public.cbitembordero it
     JOIN public.cbcontratoalianca ct ON ((it.id_cbcontrato_int = ct.id_cbcontrato_int)))
     JOIN public.geempresa ge ON ((ct.id_geempresa_int = ge.id_geempresa_int)))
     JOIN public.cbbordero bo ON ((it.id_cbbordero_int = bo.id_cbbordero_int)))
     JOIN public.cbconvenio co ON ((bo.id_cbconvenio_int = co.id_cbconvenio_int)))
     JOIN public.fibanco fi ON ((co.id_fibanco_int = fi.id_fibanco_int)))
     JOIN public.ficcbanco cc ON (((co.id_ficcbanco_int = cc.id_ficcbanco_int) AND (cc.id_fibanco_int = fi.id_fibanco_int))))
     JOIN public.cbparcelaitembordero pi ON ((it.id_cbitembordero_int = pi.id_cbitembordero_int)))
     JOIN public.cbparcela pa ON ((pi.id_cbparcela_int = pa.id_cbparcela_int)));

--
-- TOC entry 12109 (class 0 OID 0)
-- Dependencies: 1684
-- Name: VIEW vw_retornoalianca; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornoalianca IS 'Retorno de Boletos - ALIANCA';

--
-- TOC entry 1685 (class 1259 OID 43163)
-- Name: vw_retornobancofup; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornobancofup AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
        CASE
            WHEN ((sit.codigo_int = (4006)::bigint) OR (sit.codigo_int = (4007)::bigint) OR (sit.codigo_int = (4071)::bigint) OR ((sit.codigo_int >= (4014)::bigint) AND (sit.codigo_int <= (4017)::bigint))) THEN ('now'::text)::date
            ELSE
            CASE
                WHEN ((sit.codigo_int = (4008)::bigint) OR (sit.codigo_int = (4032)::bigint) OR (sit.codigo_int = (4035)::bigint) OR (sit.codigo_int = (101)::bigint)) THEN (('now'::text)::date + 2)
                ELSE NULL::date
            END
        END AS data_evento_dat,
    fup.data_evento_dat AS data_evento_real,
        CASE
            WHEN (sit.codigo_int = (101)::bigint) THEN (4008)::bigint
            ELSE sit.codigo_int
        END AS codigo_situacao_int,
        CASE
            WHEN (sit.codigo_int = (101)::bigint) THEN 'AGENDADO PAGAMENTO P/ (INFORMAR DATA DO EVENTO)'::character varying
            ELSE sit.descricao_str
        END AS situacao_contato_str,
    fup.data_dat,
    fup.hora_tim,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    fup.id_cbfollowup_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int,
    par.situacao_int
   FROM ((((((((public.cbcontratoitaubanco ita
     JOIN public.cbfollowup fup ON ((ita.id_cbcontrato_int = fup.id_cbcontrato_int)))
     JOIN public.cbparcela par ON (((par.id_cbcontrato_int = fup.id_cbcontrato_int) AND (par.id_cbparcela_int = fup.id_cbparcela_int))))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbsitcontato sit ON ((sit.id_cbsitcontato_int = fup.id_cbsitcontato_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12110 (class 0 OID 0)
-- Dependencies: 1685
-- Name: VIEW vw_retornobancofup; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornobancofup IS 'Arquivo de retorno para o ITAUBANCO - FUP';

--
-- TOC entry 1686 (class 1259 OID 43180)
-- Name: vw_retornofiat; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornofiat AS
 SELECT geempresa.codigo_str AS codigo_empresa,
    geempresa.nome_str AS nome_empresa,
    cbtiponegocio.codigo_str AS tipo_negocio,
    cbcontratofiat.contrato_str AS num_contrato,
    esretornofiat.id_esretornofiat_int
   FROM (((public.esretornofiat
     JOIN public.cbcontratofiat ON ((cbcontratofiat.id_cbcontrato_int = esretornofiat.id_cbcontrato_int)))
     JOIN public.cbtiponegocio ON ((cbtiponegocio.id_cbtiponegocio_int = cbcontratofiat.id_cbtiponegocio_int)))
     JOIN public.geempresa ON ((geempresa.id_geempresa_int = cbcontratofiat.id_geempresa_int)));

--
-- TOC entry 12111 (class 0 OID 0)
-- Dependencies: 1686
-- Name: VIEW vw_retornofiat; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornofiat IS 'Usado no Retorno da Fiat - CAJU';

--
-- TOC entry 1687 (class 1259 OID 43197)
-- Name: vw_retornoitaufup; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornoitaufup AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
        CASE
            WHEN ((sit.codigo_int = (4006)::bigint) OR (sit.codigo_int = (4007)::bigint) OR (sit.codigo_int = (4071)::bigint) OR ((sit.codigo_int >= (4014)::bigint) AND (sit.codigo_int <= (4017)::bigint))) THEN ('now'::text)::date
            ELSE
            CASE
                WHEN ((sit.codigo_int = (4008)::bigint) OR (sit.codigo_int = (4032)::bigint) OR (sit.codigo_int = (4035)::bigint)) THEN (('now'::text)::date + 2)
                ELSE NULL::date
            END
        END AS data_evento_dat,
    fup.data_evento_dat AS data_evento_real,
    sit.codigo_int AS codigo_situacao_int,
    sit.descricao_str AS situacao_contato_str,
    fup.data_dat,
    fup.hora_tim,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    fup.id_cbfollowup_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int,
    par.situacao_int
   FROM ((((((((public.cbcontratoitau ita
     JOIN public.cbfollowup fup ON ((ita.id_cbcontrato_int = fup.id_cbcontrato_int)))
     JOIN public.cbparcela par ON (((par.id_cbcontrato_int = fup.id_cbcontrato_int) AND (par.id_cbparcela_int = fup.id_cbparcela_int))))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbsitcontato sit ON ((sit.id_cbsitcontato_int = fup.id_cbsitcontato_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12112 (class 0 OID 0)
-- Dependencies: 1687
-- Name: VIEW vw_retornoitaufup; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornoitaufup IS 'Arquivo de retorno para o Itaï¿½ - FUP';

--
-- TOC entry 1688 (class 1259 OID 43208)
-- Name: vw_retornomercantil; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornomercantil AS
 SELECT cbcontratomercantil.contrato_str,
    cbcontratomercantil.sisogm_str,
    cbcontratomercantil.identi_operacao,
    cbcontratomercantil.identi_terceirizada_str,
    cbsitcontato.codigo_int,
    cbsitcontato.id_cbsitcontato_int,
    cbsitcontato.descricao_str,
    cbfollowup.data_dat,
    cbfollowup.id_cbfollowup_int,
    cbfollowup.id_cbcontrato_int
   FROM ((public.cbfollowup
     JOIN public.cbcontratomercantil ON ((cbcontratomercantil.id_cbcontrato_int = cbfollowup.id_cbcontrato_int)))
     JOIN public.cbsitcontato ON ((cbsitcontato.id_cbsitcontato_int = cbfollowup.id_cbsitcontato_int)))
  ORDER BY cbcontratomercantil.contrato_str;

--
-- TOC entry 12113 (class 0 OID 0)
-- Dependencies: 1688
-- Name: VIEW vw_retornomercantil; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornomercantil IS 'Retorno Mercantil';

--
-- TOC entry 1689 (class 1259 OID 43216)
-- Name: vw_retornopicfup; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornopicfup AS
 SELECT ita.codigo_escritorio_str AS escritorio_str,
    cta.agencia_str,
    cta.conta_str,
    ita.numero_lote_int AS num_lote_int,
    ita.codigo_operacao_str AS operacao_str,
    ita.contrato_str,
        CASE
            WHEN ((sit.codigo_int = (4006)::bigint) OR (sit.codigo_int = (4007)::bigint) OR (sit.codigo_int = (4071)::bigint) OR ((sit.codigo_int >= (4014)::bigint) AND (sit.codigo_int <= (4017)::bigint))) THEN ('now'::text)::date
            ELSE
            CASE
                WHEN ((sit.codigo_int = (4008)::bigint) OR (sit.codigo_int = (4032)::bigint) OR (sit.codigo_int = (4035)::bigint)) THEN (('now'::text)::date + 2)
                ELSE NULL::date
            END
        END AS data_evento_dat,
    fup.data_evento_dat AS data_evento_real,
    sit.codigo_int AS codigo_situacao_int,
    sit.descricao_str AS situacao_contato_str,
    fup.data_dat,
    fup.hora_tim,
    ita.endereco_str,
    ita.complemento_str,
    ita.bairro_str,
    ita.cidade_str,
    ita.cep_str,
    ita.estado_str,
    ita.ddd_str,
    ita.telefone_str,
    ita.ramal_str,
    ita.endereco_trabalho_str,
    ita.bairro_trabalho_str,
    ita.cidade_trabalho_str,
    ita.estado_trabalho_str,
    ita.cep_trabalho_str,
    ita.ddd_trabalho_str,
    ita.telefone_trabalho_str,
    ita.ramal_trabalho_str,
    ita.complemento_trabalho_str,
    fil.codigo_str AS cod_filial_str,
    fil.nome_str AS nome_filial_str,
    fil.endereco1_str AS endereco_filial_str,
    fil.endereco2_str AS bairro_filial_str,
    cid.nome_str AS cidade_filial_str,
    cid.uf_str AS uf_filial_str,
    fil.cep_str AS cep_filial_str,
    fil.telefone_str AS telefone_filial_str,
    par.parcela_int,
    par.data_vencimento_dat AS vencimento_dat,
    ita.id_cbcontrato_int,
    par.id_cbparcela_int,
    ita.id_gecliente_int,
    fup.id_cbfollowup_int,
    ita.id_cbsituacaocontrato_int,
    ita.id_cbplataforma_int,
    ita.id_cbetapa_int
   FROM ((((((((public.cbcontratoitaupic ita
     JOIN public.cbfollowup fup ON ((ita.id_cbcontrato_int = fup.id_cbcontrato_int)))
     JOIN public.cbparcela par ON (((par.id_cbcontrato_int = fup.id_cbcontrato_int) AND (par.id_cbparcela_int = fup.id_cbparcela_int))))
     JOIN public.gefilial fil ON ((fil.id_gefilial_int = ita.id_gefilial_int)))
     JOIN public.gecidade cid ON ((fil.id_gecidade_int = cid.id_gecidade_int)))
     JOIN public.cbsitcontato sit ON ((sit.id_cbsitcontato_int = fup.id_cbsitcontato_int)))
     JOIN public.cbtiponegocio neg ON ((ita.id_cbtiponegocio_int = neg.id_cbtiponegocio_int)))
     JOIN public.fibanco ban ON ((ban.id_fibanco_int = neg.id_fibanco_int)))
     JOIN public.ficcbanco cta ON ((cta.id_ficcbanco_int = neg.id_ficcbanco_int)));

--
-- TOC entry 12114 (class 0 OID 0)
-- Dependencies: 1689
-- Name: VIEW vw_retornopicfup; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornopicfup IS 'Arquivo de retorno para o Itaï¿½ PIC - FUP';

--
-- TOC entry 1690 (class 1259 OID 43224)
-- Name: vw_retornozogbi; Type: VIEW; Schema: public; Owner: -
--

CREATE VIEW public.vw_retornozogbi AS
 SELECT ('now'::text)::date AS data_mov,
    geempresa.nome_str AS nome_assessoria,
    gecliente.nome_str AS nome_banco,
    cbdistribuidorcliente.codigo_str AS loja,
    cbcontratozogbi.contrato_str,
    cbcontratozogbi.produto_str,
    cbcontratozogbi.id_cbsituacaocontrato_int,
    cbparcela.parcela_int,
    cbfollowup.data_dat,
    cbsitcontato.codigo_int,
    cbsitcontato.descricao_str,
    cbfollowup.historico_str,
    geusuario.nomecompleto_str,
    cbfollowup.id_cbfollowup_int,
    cbfollowup.id_cbcontrato_int
   FROM (((((((public.cbfollowup
     JOIN public.cbcontratozogbi ON ((cbcontratozogbi.id_cbcontrato_int = cbfollowup.id_cbcontrato_int)))
     JOIN public.cbsitcontato ON ((cbsitcontato.id_cbsitcontato_int = cbfollowup.id_cbsitcontato_int)))
     JOIN public.geempresa ON ((cbcontratozogbi.id_geempresa_int = geempresa.id_geempresa_int)))
     JOIN public.gecliente ON ((cbcontratozogbi.id_gecliente_int = gecliente.id_gecliente_int)))
     JOIN public.cbparcela ON ((cbparcela.id_cbparcela_int = cbfollowup.id_cbparcela_int)))
     JOIN public.cbdistribuidorcliente ON ((cbdistribuidorcliente.id_cbdistribuidorcliente_int = cbcontratozogbi.id_cbdistribuidorcliente_int)))
     JOIN public.geusuario ON ((geusuario.id_geusuario_int = cbfollowup.id_geusuario_int)))
  WHERE ((cbcontratozogbi.id_cbcontrato_int = cbfollowup.id_cbcontrato_int) AND ((cbsitcontato.fup_banco_str)::text = ('S'::character varying)::text) AND (cbdistribuidorcliente.codigo_str IS NOT NULL))
  ORDER BY cbfollowup.id_cbfollowup_int DESC;

--
-- TOC entry 12115 (class 0 OID 0)
-- Dependencies: 1690
-- Name: VIEW vw_retornozogbi; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON VIEW public.vw_retornozogbi IS 'Retorno Administrativo Zogbi-Promovel';

--
-- TOC entry 8801 (class 2604 OID 43235)
-- Name: cbacompanhamentocontrato id_cbacompanhamentocontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbacompanhamentocontrato ALTER COLUMN id_cbacompanhamentocontrato_int SET DEFAULT nextval('public.cbacompanhamentocontrato_id_cbacompanhamentocontrato_int_seq'::regclass);

--
-- TOC entry 8804 (class 2604 OID 43236)
-- Name: cbatalhositcontato id_cbatalhositcontato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbatalhositcontato ALTER COLUMN id_cbatalhositcontato_int SET DEFAULT nextval('public.cbatalhositcontato_id_cbatalhositcontato_int_seq'::regclass);

--
-- TOC entry 8807 (class 2604 OID 43240)
-- Name: cbblacklist id_cbblacklist_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblacklist ALTER COLUMN id_cbblacklist_int SET DEFAULT nextval('public.cbblacklist_id_cbblacklist_int_seq'::regclass);

--
-- TOC entry 8810 (class 2604 OID 43244)
-- Name: cbblacklistcliente id_cbblacklistcliente_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblacklistcliente ALTER COLUMN id_cbblacklistcliente_int SET DEFAULT nextval('public.cbblacklistcliente_id_cbblacklistcliente_int_seq'::regclass);

--
-- TOC entry 8852 (class 2604 OID 43248)
-- Name: cbcontratoalianca id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoalianca ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8854 (class 2604 OID 43252)
-- Name: cbcontratobancopaulista id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobancopaulista ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8856 (class 2604 OID 43256)
-- Name: cbcontratobic id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobic ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8857 (class 2604 OID 43261)
-- Name: cbcontratobidoia id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobidoia ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8858 (class 2604 OID 43264)
-- Name: cbcontratobmc id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobmc ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8859 (class 2604 OID 43268)
-- Name: cbcontratobradesco id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradesco ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8860 (class 2604 OID 43269)
-- Name: cbcontratobradescocartao id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocartao ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8861 (class 2604 OID 43273)
-- Name: cbcontratobradescocomercial id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocomercial ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8862 (class 2604 OID 43274)
-- Name: cbcontratobradescocorporativo id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocorporativo ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8863 (class 2604 OID 43280)
-- Name: cbcontratobradescocredimob id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocredimob ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8864 (class 2604 OID 43281)
-- Name: cbcontratocaixa id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocaixa ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8865 (class 2604 OID 43284)
-- Name: cbcontratoconfianca id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoconfianca ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8866 (class 2604 OID 43285)
-- Name: cbcontratocredibel id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocredibel ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8867 (class 2604 OID 43286)
-- Name: cbcontratocredigy id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocredigy ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8868 (class 2604 OID 43290)
-- Name: cbcontratocsc id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocsc ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8870 (class 2604 OID 43291)
-- Name: cbcontratoeleva id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoeleva ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8871 (class 2604 OID 43294)
-- Name: cbcontratofiat id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratofiat ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8872 (class 2604 OID 43295)
-- Name: cbcontratohonda id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratohonda ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8873 (class 2604 OID 43296)
-- Name: cbcontratoitau id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitau ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8874 (class 2604 OID 43303)
-- Name: cbcontratoitauacaoadv id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauacaoadv ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8875 (class 2604 OID 43304)
-- Name: cbcontratoitauadversa id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauadversa ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8876 (class 2604 OID 43307)
-- Name: cbcontratoitaubanco id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaubanco ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8877 (class 2604 OID 43308)
-- Name: cbcontratoitaucredimob id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaucredimob ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8878 (class 2604 OID 43309)
-- Name: cbcontratoitaupic id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaupic ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8879 (class 2604 OID 43313)
-- Name: cbcontratomercantil id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratomercantil ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8880 (class 2604 OID 43314)
-- Name: cbcontratopan id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopan ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8881 (class 2604 OID 43317)
-- Name: cbcontratopanam id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopanam ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8882 (class 2604 OID 43318)
-- Name: cbcontratopecunia id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopecunia ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8883 (class 2604 OID 43319)
-- Name: cbcontratopirelli id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopirelli ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8884 (class 2604 OID 43323)
-- Name: cbcontratosantander id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratosantander ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8887 (class 2604 OID 43324)
-- Name: cbcontratotelefonica id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratotelefonica ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8888 (class 2604 OID 43327)
-- Name: cbcontratounibanco id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratounibanco ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8889 (class 2604 OID 43328)
-- Name: cbcontratovw id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratovw ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8890 (class 2604 OID 43329)
-- Name: cbcontratozogbi id_cbcontrato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratozogbi ALTER COLUMN id_cbcontrato_int SET DEFAULT nextval(('"cbcontrato_seq"'::text)::regclass);

--
-- TOC entry 8941 (class 2604 OID 43336)
-- Name: cbitemborderofile id_cbitemborderofile_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderofile ALTER COLUMN id_cbitemborderofile_int SET DEFAULT nextval('public.cbitemborderofile_id_cbitemborderofile_int_seq'::regclass);

--
-- TOC entry 9033 (class 2604 OID 43337)
-- Name: coringacbcontratomd2 id_coringacbcontratomd2_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringacbcontratomd2 ALTER COLUMN id_coringacbcontratomd2_int SET DEFAULT nextval('public.coringacbcontratomd2_id_coringacbcontratomd2_int_seq'::regclass);

--
-- TOC entry 9034 (class 2604 OID 43340)
-- Name: coringacbparcelamd2 id_coringacbparcelamd2_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringacbparcelamd2 ALTER COLUMN id_coringacbparcelamd2_int SET DEFAULT nextval('public.coringacbparcelamd2_id_coringacbparcelamd2_int_seq'::regclass);

--
-- TOC entry 9035 (class 2604 OID 43341)
-- Name: coringageqlcontatomd2 id_coringageqlcontatomd2_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringageqlcontatomd2 ALTER COLUMN id_coringageqlcontatomd2_int SET DEFAULT nextval('public.coringageqlcontatomd2_id_coringageqlcontatomd2_int_seq'::regclass);

--
-- TOC entry 9036 (class 2604 OID 43342)
-- Name: coringageqlemailmd2 id_coringageqlemailmd2_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringageqlemailmd2 ALTER COLUMN id_coringageqlemailmd2_int SET DEFAULT nextval('public.coringageqlemailmd2_id_coringageqlemailmd2_int_seq'::regclass);

--
-- TOC entry 9037 (class 2604 OID 43346)
-- Name: coringageqlenderecomd2 id_coringageqlenderecomd2_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringageqlenderecomd2 ALTER COLUMN id_coringageqlenderecomd2_int SET DEFAULT nextval('public.coringageqlenderecomd2_id_coringageqlenderecomd2_int_seq'::regclass);

--
-- TOC entry 9038 (class 2604 OID 43353)
-- Name: cth id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cth ALTER COLUMN id SET DEFAULT nextval('public.cth_id_seq'::regclass);

--
-- TOC entry 9061 (class 2604 OID 43360)
-- Name: eslogconsultamdm id_eslogconsultamdm_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.eslogconsultamdm ALTER COLUMN id_eslogconsultamdm_int SET DEFAULT nextval('public.eslogconsultamdm_id_eslogconsultamdm_int_seq'::regclass);

--
-- TOC entry 9074 (class 2604 OID 43361)
-- Name: esretornostatustelefone id_esretornostatustelefone_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esretornostatustelefone ALTER COLUMN id_esretornostatustelefone_int SET DEFAULT nextval('public.esretornostatustelefone_id_esretornostatustelefone_int_seq'::regclass);

--
-- TOC entry 9104 (class 2604 OID 43365)
-- Name: geatuacao01 id_geatuacao01_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geatuacao01 ALTER COLUMN id_geatuacao01_int SET DEFAULT nextval('public.geatuacao01_id_geatuacao01_int_seq'::regclass);

--
-- TOC entry 9105 (class 2604 OID 43366)
-- Name: geatuacao02 id_geatuacao02_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geatuacao02 ALTER COLUMN id_geatuacao02_int SET DEFAULT nextval('public.geatuacao02_id_geatuacao02_int_seq'::regclass);

--
-- TOC entry 9106 (class 2604 OID 43373)
-- Name: geatuacao03 id_geatuacao03_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geatuacao03 ALTER COLUMN id_geatuacao03_int SET DEFAULT nextval('public.geatuacao03_id_geatuacao03_int_seq'::regclass);

--
-- TOC entry 9111 (class 2604 OID 43374)
-- Name: gebloqueiotelefonecontato id_gebloqueiotelefonecontato_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontato ALTER COLUMN id_gebloqueiotelefonecontato_int SET DEFAULT nextval('public.gebloqueiotelefonecontato_id_gebloqueiotelefonecontato_int_seq'::regclass);

--
-- TOC entry 9112 (class 2604 OID 43378)
-- Name: gebloqueiotelefonecontatoanterior id_gebloqueiotelefonecontatoanterior_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontatoanterior ALTER COLUMN id_gebloqueiotelefonecontatoanterior_int SET DEFAULT nextval('public.gebloqueiotelefonecontatoante_id_gebloqueiotelefonecontatoa_seq'::regclass);

--
-- TOC entry 9164 (class 2604 OID 43382)
-- Name: geintegracao id_geintegracao_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geintegracao ALTER COLUMN id_geintegracao_int SET DEFAULT nextval('public.geintegracao_id_geintegracao_int_seq'::regclass);

--
-- TOC entry 9172 (class 2604 OID 43383)
-- Name: gemodeloimpressao id_gemodeloimpressao_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemodeloimpressao ALTER COLUMN id_gemodeloimpressao_int SET DEFAULT nextval('public.gemodeloimpressao_id_gemodeloimpressao_int_seq'::regclass);

--
-- TOC entry 9241 (class 2604 OID 43390)
-- Name: geregrabloqueiotelefone id_geregrabloqueiotelefone_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geregrabloqueiotelefone ALTER COLUMN id_geregrabloqueiotelefone_int SET DEFAULT nextval('public.geregrabloqueiotelefone_id_geregrabloqueiotelefone_int_seq'::regclass);

--
-- TOC entry 9275 (class 2604 OID 43391)
-- Name: geusuariointegracao id_geusuariointegracao_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariointegracao ALTER COLUMN id_geusuariointegracao_int SET DEFAULT nextval('public.geusuariointegracao_id_geusuariointegracao_int_seq'::regclass);

--
-- TOC entry 8912 (class 2604 OID 43398)
-- Name: rpa_filaboletoeleva id_filaboletoeleva_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rpa_filaboletoeleva ALTER COLUMN id_filaboletoeleva_int SET DEFAULT nextval('public.cbfilaboletoeleva_id_filaboletoeleva_int_seq'::regclass);

--
-- TOC entry 9290 (class 2604 OID 43405)
-- Name: rpa_filaboletoelevalog id_logfila_int; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rpa_filaboletoelevalog ALTER COLUMN id_logfila_int SET DEFAULT nextval('public.rpa_filaboletoelevalog_id_logfila_int_seq'::regclass);

--
-- TOC entry 9304 (class 2604 OID 43406)
-- Name: vclogtable id; Type: DEFAULT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.vclogtable ALTER COLUMN id SET DEFAULT nextval('public.vclogtable_id_seq'::regclass);

--
-- TOC entry 9316 (class 2606 OID 67554)
-- Name: Foo Foo_pkey; Type: CONSTRAINT; Schema: MySchema; Owner: -
--

ALTER TABLE ONLY "MySchema"."Foo"
    ADD CONSTRAINT "Foo_pkey" PRIMARY KEY (f1, f2);

--
-- TOC entry 11331 (class 2606 OID 67272671)
-- Name: pipeline_run pipeline_run_pkey; Type: CONSTRAINT; Schema: etl_control; Owner: -
--

ALTER TABLE ONLY etl_control.pipeline_run
    ADD CONSTRAINT pipeline_run_pkey PRIMARY KEY (pipeline_name, table_name, logical_date);

--
-- TOC entry 11333 (class 2606 OID 67272685)
-- Name: pipeline_state pipeline_state_pkey; Type: CONSTRAINT; Schema: etl_control; Owner: -
--

ALTER TABLE ONLY etl_control.pipeline_state
    ADD CONSTRAINT pipeline_state_pkey PRIMARY KEY (pipeline_name, table_name, key_column);

--
-- TOC entry 9344 (class 2606 OID 63712)
-- Name: cbblacklist c_uniquecontato; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblacklist
    ADD CONSTRAINT c_uniquecontato UNIQUE (contato_str);

--
-- TOC entry 9328 (class 2606 OID 67599)
-- Name: cbacompanhamentocontrato cbacompanhamentocontrato_seq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbacompanhamentocontrato
    ADD CONSTRAINT cbacompanhamentocontrato_seq PRIMARY KEY (id_cbacompanhamentocontrato_int);

--
-- TOC entry 9332 (class 2606 OID 67601)
-- Name: cbagenciacontrato cbagenciacontrato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbagenciacontrato
    ADD CONSTRAINT cbagenciacontrato_pkey PRIMARY KEY (id_cbagenciacontrato_int);

--
-- TOC entry 9334 (class 2606 OID 67603)
-- Name: cbapreensao cbapreensao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbapreensao
    ADD CONSTRAINT cbapreensao_pkey PRIMARY KEY (id_cbapreensao_int);

--
-- TOC entry 9336 (class 2606 OID 67609)
-- Name: cbatalhositcontato cbatalhositcontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbatalhositcontato
    ADD CONSTRAINT cbatalhositcontato_pkey PRIMARY KEY (id_cbatalhositcontato_int);

--
-- TOC entry 9339 (class 2606 OID 45852)
-- Name: cbatrasocontrato cbatrasocontrato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbatrasocontrato
    ADD CONSTRAINT cbatrasocontrato_pkey PRIMARY KEY (id_cbatrasocontrato_int);

--
-- TOC entry 9342 (class 2606 OID 67613)
-- Name: cbatualizacaoendereco cbatualizacaoendereco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbatualizacaoendereco
    ADD CONSTRAINT cbatualizacaoendereco_pkey PRIMARY KEY (id_cbatualizacaoendereco_int);

--
-- TOC entry 9349 (class 2606 OID 63725)
-- Name: cbblacklist cbblacklist_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblacklist
    ADD CONSTRAINT cbblacklist_pkey PRIMARY KEY (id_cbblacklist_int);

--
-- TOC entry 9355 (class 2606 OID 45424)
-- Name: cbblacklistcliente cbblacklistcliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblacklistcliente
    ADD CONSTRAINT cbblacklistcliente_pkey PRIMARY KEY (id_cbblacklistcliente_int);

--
-- TOC entry 9357 (class 2606 OID 67617)
-- Name: cbblbase cbblbase_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbase
    ADD CONSTRAINT cbblbase_pkey PRIMARY KEY (id_cbblbase_int);

--
-- TOC entry 9359 (class 2606 OID 67616)
-- Name: cbblbaseendereco cbblbaseendereco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbaseendereco
    ADD CONSTRAINT cbblbaseendereco_pkey PRIMARY KEY (id_cbblbaseendereco_int);

--
-- TOC entry 9362 (class 2606 OID 67631)
-- Name: cbblbaseregistro cbblbaseregistro_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbaseregistro
    ADD CONSTRAINT cbblbaseregistro_pkey PRIMARY KEY (id_cbblbaseregistro_int);

--
-- TOC entry 9364 (class 2606 OID 67627)
-- Name: cbblbaseregistroparcela cbblbaseregistroparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbaseregistroparcela
    ADD CONSTRAINT cbblbaseregistroparcela_pkey PRIMARY KEY (id_cbblbaseregistroparcela_int);

--
-- TOC entry 9366 (class 2606 OID 67629)
-- Name: cbblboletagem cbblboletagem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblboletagem
    ADD CONSTRAINT cbblboletagem_pkey PRIMARY KEY (id_cbblboletagem_int);

--
-- TOC entry 9368 (class 2606 OID 67655)
-- Name: cbblboletagemprocessamento cbblboletagemprocessamento_pk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblboletagemprocessamento
    ADD CONSTRAINT cbblboletagemprocessamento_pk PRIMARY KEY (id_cbblboletagemprocessamento_int);

--
-- TOC entry 9370 (class 2606 OID 67658)
-- Name: cbblconfiguracao cbblconfiguracao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblconfiguracao
    ADD CONSTRAINT cbblconfiguracao_pkey PRIMARY KEY (id_cbblconfiguracao_int);

--
-- TOC entry 9372 (class 2606 OID 67661)
-- Name: cbblconfiguracaoitem cbblconfiguracaoitem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblconfiguracaoitem
    ADD CONSTRAINT cbblconfiguracaoitem_pkey PRIMARY KEY (id_cbblconfiguracaoitem_int);

--
-- TOC entry 9375 (class 2606 OID 67696)
-- Name: cbboletagem cbboletagem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbboletagem
    ADD CONSTRAINT cbboletagem_pkey PRIMARY KEY (id_cbboletagem_int);

--
-- TOC entry 9378 (class 2606 OID 67711)
-- Name: cbboletagembaixa cbboletagembaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbboletagembaixa
    ADD CONSTRAINT cbboletagembaixa_pkey PRIMARY KEY (id_cbboletagembaixa_int);

--
-- TOC entry 9382 (class 2606 OID 67720)
-- Name: cbboletagemparcela cbboletagemparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbboletagemparcela
    ADD CONSTRAINT cbboletagemparcela_pkey PRIMARY KEY (id_cbboletagemparcela_int);

--
-- TOC entry 9389 (class 2606 OID 63926)
-- Name: cbbordero cbbordero_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbbordero
    ADD CONSTRAINT cbbordero_pkey PRIMARY KEY (id_cbbordero_int);

--
-- TOC entry 9392 (class 2606 OID 67737)
-- Name: cbborderosauc cbborderosaucpk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbborderosauc
    ADD CONSTRAINT cbborderosaucpk PRIMARY KEY (id_cbborderosauc_int);

--
-- TOC entry 9394 (class 2606 OID 67740)
-- Name: cbcalculocomissao cbcalculocomissao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculocomissao
    ADD CONSTRAINT cbcalculocomissao_pkey PRIMARY KEY (id_cbcalculocomissao_int);

--
-- TOC entry 9396 (class 2606 OID 67744)
-- Name: cbcalculocomissaofaixa cbcalculocomissaofaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculocomissaofaixa
    ADD CONSTRAINT cbcalculocomissaofaixa_pkey PRIMARY KEY (id_cbcalculocomissaofaixa_int);

--
-- TOC entry 9398 (class 2606 OID 67043)
-- Name: cbcalculodesconto cbcalculodesconto_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodesconto
    ADD CONSTRAINT cbcalculodesconto_pkey PRIMARY KEY (id_cbcalculodesconto_int);

--
-- TOC entry 9400 (class 2606 OID 66902)
-- Name: cbcalculodescontofaixa cbcalculodescontofaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodescontofaixa
    ADD CONSTRAINT cbcalculodescontofaixa_pkey PRIMARY KEY (id_cbcalculodescontofaixa_int);

--
-- TOC entry 9402 (class 2606 OID 67763)
-- Name: cbcalculodescontofaixaregua cbcalculodescontofaixaregua_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodescontofaixaregua
    ADD CONSTRAINT cbcalculodescontofaixaregua_pkey PRIMARY KEY (id_cbcalculodescontofaixaregua_int);

--
-- TOC entry 9404 (class 2606 OID 67766)
-- Name: cbcalculodescontofator cbcalculodescontofator_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodescontofator
    ADD CONSTRAINT cbcalculodescontofator_pkey PRIMARY KEY (id_cbcalculodescontofator_int);

--
-- TOC entry 9410 (class 2606 OID 67773)
-- Name: cbcalculotabela cbcalculotabela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculotabela
    ADD CONSTRAINT cbcalculotabela_pkey PRIMARY KEY (id_cbcalculotabela_int);

--
-- TOC entry 9412 (class 2606 OID 67775)
-- Name: cbcalculotabelafaixa cbcalculotabelafaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculotabelafaixa
    ADD CONSTRAINT cbcalculotabelafaixa_pkey PRIMARY KEY (id_cbcalculotabelafaixa_int);

--
-- TOC entry 9414 (class 2606 OID 67046)
-- Name: cbcampanha cbcampanha_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanha
    ADD CONSTRAINT cbcampanha_pkey PRIMARY KEY (id_cbcampanha_int);

--
-- TOC entry 9417 (class 2606 OID 67036)
-- Name: cbcampanhacalculo cbcampanhacalculo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhacalculo
    ADD CONSTRAINT cbcampanhacalculo_pkey PRIMARY KEY (id_cbcampanhacalculo_int);

--
-- TOC entry 9419 (class 2606 OID 67181)
-- Name: cbcampanhateste cbcampanhateste_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhateste
    ADD CONSTRAINT cbcampanhateste_pkey PRIMARY KEY (id_cbcampanhateste_int);

--
-- TOC entry 9421 (class 2606 OID 67803)
-- Name: cbcampanhatesteautorizado cbcampanhatesteautorizado_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteautorizado
    ADD CONSTRAINT cbcampanhatesteautorizado_pkey PRIMARY KEY (id_cbcampanhateste_int, id_geusuario_int);

--
-- TOC entry 9423 (class 2606 OID 67823)
-- Name: cbcampanhatesteitembordero cbcampanhatesteitembordero_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteitembordero
    ADD CONSTRAINT cbcampanhatesteitembordero_pkey PRIMARY KEY (id_cbcampanhatesteitembordero_int);

--
-- TOC entry 9425 (class 2606 OID 67801)
-- Name: cbcampanhausuario cbcampanhausuario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhausuario
    ADD CONSTRAINT cbcampanhausuario_pkey PRIMARY KEY (id_cbcampanhausuario_int);

--
-- TOC entry 9427 (class 2606 OID 66858)
-- Name: cbcartorio cbcartorio_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcartorio
    ADD CONSTRAINT cbcartorio_pkey PRIMARY KEY (id_cbcartorio_int);

--
-- TOC entry 9430 (class 2606 OID 67808)
-- Name: cbcartorioaviso cbcartorioaviso_pky; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcartorioaviso
    ADD CONSTRAINT cbcartorioaviso_pky PRIMARY KEY (id_cbcartorioaviso_int);

--
-- TOC entry 9440 (class 2606 OID 67814)
-- Name: cbcobrancaautomaticaboleto cbcobrancaautomaticaboleto_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcobrancaautomaticaboleto
    ADD CONSTRAINT cbcobrancaautomaticaboleto_pkey PRIMARY KEY (id_cbcobrancaautomaticaboleto_int);

--
-- TOC entry 9442 (class 2606 OID 67825)
-- Name: cbcodigodivida cbcodigodivida_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcodigodivida
    ADD CONSTRAINT cbcodigodivida_pkey PRIMARY KEY (id_cbcodigodivida_int);

--
-- TOC entry 9444 (class 2606 OID 67827)
-- Name: cbcodigodividaparametros cbcodigodividaparametros_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcodigodividaparametros
    ADD CONSTRAINT cbcodigodividaparametros_pkey PRIMARY KEY (id_cbcodigodividaparametros_int);

--
-- TOC entry 9447 (class 2606 OID 67846)
-- Name: cbcontrato cbcontrato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontrato
    ADD CONSTRAINT cbcontrato_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9455 (class 2606 OID 67862)
-- Name: cbcontratoalianca cbcontratoalianca_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoalianca
    ADD CONSTRAINT cbcontratoalianca_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9457 (class 2606 OID 67868)
-- Name: cbcontratoalianca cbcontratoalianca_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoalianca
    ADD CONSTRAINT cbcontratoalianca_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9461 (class 2606 OID 67866)
-- Name: cbcontratoaudac cbcontratoaudac_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoaudac
    ADD CONSTRAINT cbcontratoaudac_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9463 (class 2606 OID 67874)
-- Name: cbcontratoaudac cbcontratoaudac_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoaudac
    ADD CONSTRAINT cbcontratoaudac_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9465 (class 2606 OID 67864)
-- Name: cbcontratobancopaulista cbcontratobancopaulista_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobancopaulista
    ADD CONSTRAINT cbcontratobancopaulista_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9468 (class 2606 OID 67880)
-- Name: cbcontratobbjur cbcontratobbjur_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobbjur
    ADD CONSTRAINT cbcontratobbjur_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9470 (class 2606 OID 67885)
-- Name: cbcontratobbjur cbcontratobbjur_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobbjur
    ADD CONSTRAINT cbcontratobbjur_unq UNIQUE (id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9473 (class 2606 OID 67893)
-- Name: cbcontratobic cbcontratobic_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobic
    ADD CONSTRAINT cbcontratobic_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9475 (class 2606 OID 67898)
-- Name: cbcontratobic cbcontratobic_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobic
    ADD CONSTRAINT cbcontratobic_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9477 (class 2606 OID 67888)
-- Name: cbcontratobidoia cbcontratobidoia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobidoia
    ADD CONSTRAINT cbcontratobidoia_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9479 (class 2606 OID 67895)
-- Name: cbcontratobidoia cbcontratobidoia_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobidoia
    ADD CONSTRAINT cbcontratobidoia_unq UNIQUE (contrato_str, id_cbtiponegocio_int);

--
-- TOC entry 9487 (class 2606 OID 67911)
-- Name: cbcontratobmc cbcontratobmc_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobmc
    ADD CONSTRAINT cbcontratobmc_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9489 (class 2606 OID 67915)
-- Name: cbcontratobmc cbcontratobmc_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobmc
    ADD CONSTRAINT cbcontratobmc_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9497 (class 2606 OID 67927)
-- Name: cbcontratobradesco cbcontratobradesco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradesco
    ADD CONSTRAINT cbcontratobradesco_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9499 (class 2606 OID 67935)
-- Name: cbcontratobradesco cbcontratobradesco_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradesco
    ADD CONSTRAINT cbcontratobradesco_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9504 (class 2606 OID 67929)
-- Name: cbcontratobradescocartao cbcontratobradescocartao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocartao
    ADD CONSTRAINT cbcontratobradescocartao_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9506 (class 2606 OID 67933)
-- Name: cbcontratobradescocartao cbcontratobradescocartao_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocartao
    ADD CONSTRAINT cbcontratobradescocartao_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9508 (class 2606 OID 67931)
-- Name: cbcontratobradescocomercial cbcontratobradescocomercial_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocomercial
    ADD CONSTRAINT cbcontratobradescocomercial_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9510 (class 2606 OID 67942)
-- Name: cbcontratobradescocomercial cbcontratobradescocomercial_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocomercial
    ADD CONSTRAINT cbcontratobradescocomercial_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9516 (class 2606 OID 67960)
-- Name: cbcontratobradescocorporativo cbcontratobradescocorporativo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocorporativo
    ADD CONSTRAINT cbcontratobradescocorporativo_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9518 (class 2606 OID 67964)
-- Name: cbcontratobradescocorporativo cbcontratobradescocorporativo_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocorporativo
    ADD CONSTRAINT cbcontratobradescocorporativo_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9521 (class 2606 OID 67962)
-- Name: cbcontratobradescocredimob cbcontratobradescocredimobiliario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocredimob
    ADD CONSTRAINT cbcontratobradescocredimobiliario_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9523 (class 2606 OID 67966)
-- Name: cbcontratobradescocredimob cbcontratobradescocredimobiliario_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratobradescocredimob
    ADD CONSTRAINT cbcontratobradescocredimobiliario_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9526 (class 2606 OID 67975)
-- Name: cbcontratocaixa cbcontratocaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocaixa
    ADD CONSTRAINT cbcontratocaixa_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9528 (class 2606 OID 67979)
-- Name: cbcontratocaixa cbcontratocaixa_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocaixa
    ADD CONSTRAINT cbcontratocaixa_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9533 (class 2606 OID 67984)
-- Name: cbcontratoconfianca cbcontratoconfianca_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoconfianca
    ADD CONSTRAINT cbcontratoconfianca_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9541 (class 2606 OID 67996)
-- Name: cbcontratocredibel cbcontratocredibel_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocredibel
    ADD CONSTRAINT cbcontratocredibel_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9543 (class 2606 OID 68001)
-- Name: cbcontratocredibel cbcontratocredibel_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocredibel
    ADD CONSTRAINT cbcontratocredibel_unq UNIQUE (id_gecliente_int, id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9545 (class 2606 OID 67998)
-- Name: cbcontratocredigy cbcontratocredigy_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocredigy
    ADD CONSTRAINT cbcontratocredigy_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9547 (class 2606 OID 68003)
-- Name: cbcontratocredigy cbcontratocredigy_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocredigy
    ADD CONSTRAINT cbcontratocredigy_unq UNIQUE (id_geempresa_int, id_gecliente_int, id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9552 (class 2606 OID 68014)
-- Name: cbcontratocsc cbcontratocsc_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratocsc
    ADD CONSTRAINT cbcontratocsc_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9560 (class 2606 OID 63742)
-- Name: cbcontratoeleva cbcontratoeleva_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoeleva
    ADD CONSTRAINT cbcontratoeleva_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9562 (class 2606 OID 63744)
-- Name: cbcontratoeleva cbcontratoeleva_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoeleva
    ADD CONSTRAINT cbcontratoeleva_unq UNIQUE (id_gecliente_int, id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9569 (class 2606 OID 68032)
-- Name: cbcontratofiat cbcontratofiat_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratofiat
    ADD CONSTRAINT cbcontratofiat_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9580 (class 2606 OID 68046)
-- Name: cbcontratohonda cbcontratohonda_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratohonda
    ADD CONSTRAINT cbcontratohonda_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9589 (class 2606 OID 68057)
-- Name: cbcontratoitau cbcontratoitau_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitau
    ADD CONSTRAINT cbcontratoitau_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9591 (class 2606 OID 68062)
-- Name: cbcontratoitau cbcontratoitau_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitau
    ADD CONSTRAINT cbcontratoitau_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9596 (class 2606 OID 68064)
-- Name: cbcontratoitauacaoadv cbcontratoitauacaoadv_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauacaoadv
    ADD CONSTRAINT cbcontratoitauacaoadv_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9598 (class 2606 OID 68070)
-- Name: cbcontratoitauacaoadv cbcontratoitauacaoadv_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauacaoadv
    ADD CONSTRAINT cbcontratoitauacaoadv_unq UNIQUE (contrato_str, id_cbtiponegocio_int);

--
-- TOC entry 9603 (class 2606 OID 68074)
-- Name: cbcontratoitauadversa cbcontratoitauadversa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauadversa
    ADD CONSTRAINT cbcontratoitauadversa_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9605 (class 2606 OID 68080)
-- Name: cbcontratoitauadversa cbcontratoitauadversa_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauadversa
    ADD CONSTRAINT cbcontratoitauadversa_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9610 (class 2606 OID 68088)
-- Name: cbcontratoitaubanco cbcontratoitaubanco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaubanco
    ADD CONSTRAINT cbcontratoitaubanco_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9612 (class 2606 OID 68093)
-- Name: cbcontratoitaubanco cbcontratoitaubanco_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaubanco
    ADD CONSTRAINT cbcontratoitaubanco_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9615 (class 2606 OID 68090)
-- Name: cbcontratoitaucredimob cbcontratoitaucredimob_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaucredimob
    ADD CONSTRAINT cbcontratoitaucredimob_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9617 (class 2606 OID 68095)
-- Name: cbcontratoitaucredimob cbcontratoitaucredimob_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaucredimob
    ADD CONSTRAINT cbcontratoitaucredimob_unq UNIQUE (contrato_str, id_cbtiponegocio_int);

--
-- TOC entry 9623 (class 2606 OID 68103)
-- Name: cbcontratoitaupic cbcontratoitaupic_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaupic
    ADD CONSTRAINT cbcontratoitaupic_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9625 (class 2606 OID 68108)
-- Name: cbcontratoitaupic cbcontratoitaupic_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaupic
    ADD CONSTRAINT cbcontratoitaupic_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9630 (class 2606 OID 68117)
-- Name: cbcontratomercantil cbcontratomercantil_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratomercantil
    ADD CONSTRAINT cbcontratomercantil_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9632 (class 2606 OID 68124)
-- Name: cbcontratomercantil cbcontratomercantil_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratomercantil
    ADD CONSTRAINT cbcontratomercantil_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int);

--
-- TOC entry 9637 (class 2606 OID 68122)
-- Name: cbcontratopan cbcontratopan_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopan
    ADD CONSTRAINT cbcontratopan_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9639 (class 2606 OID 68127)
-- Name: cbcontratopan cbcontratopan_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopan
    ADD CONSTRAINT cbcontratopan_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9647 (class 2606 OID 68140)
-- Name: cbcontratopanam cbcontratopanam_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopanam
    ADD CONSTRAINT cbcontratopanam_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9649 (class 2606 OID 68144)
-- Name: cbcontratopanam cbcontratopanam_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopanam
    ADD CONSTRAINT cbcontratopanam_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9653 (class 2606 OID 68149)
-- Name: cbcontratopecunia cbcontratopecunia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopecunia
    ADD CONSTRAINT cbcontratopecunia_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9661 (class 2606 OID 68162)
-- Name: cbcontratopirelli cbcontratopirelli_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopirelli
    ADD CONSTRAINT cbcontratopirelli_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9663 (class 2606 OID 68168)
-- Name: cbcontratopirelli cbcontratopirelli_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopirelli
    ADD CONSTRAINT cbcontratopirelli_unq UNIQUE (id_gecliente_int, id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9667 (class 2606 OID 68164)
-- Name: cbcontratosantander cbcontratosantander_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratosantander
    ADD CONSTRAINT cbcontratosantander_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9669 (class 2606 OID 68170)
-- Name: cbcontratosantander cbcontratosantander_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratosantander
    ADD CONSTRAINT cbcontratosantander_unq UNIQUE (id_geempresa_int, id_gecliente_int, id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9671 (class 2606 OID 68166)
-- Name: cbcontratosantanderole cbcontratosantanderole_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratosantanderole
    ADD CONSTRAINT cbcontratosantanderole_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9673 (class 2606 OID 68172)
-- Name: cbcontratosantanderole cbcontratosantanderole_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratosantanderole
    ADD CONSTRAINT cbcontratosantanderole_unq UNIQUE (id_geempresa_int, id_gecliente_int, id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9675 (class 2606 OID 68182)
-- Name: cbcontratoschahin cbcontratoschahin_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoschahin
    ADD CONSTRAINT cbcontratoschahin_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9677 (class 2606 OID 68188)
-- Name: cbcontratoschahin cbcontratoschahin_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoschahin
    ADD CONSTRAINT cbcontratoschahin_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9679 (class 2606 OID 68190)
-- Name: cbcontratounibanco cbcontratounibanco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratounibanco
    ADD CONSTRAINT cbcontratounibanco_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9681 (class 2606 OID 68196)
-- Name: cbcontratounibanco cbcontratounibanco_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratounibanco
    ADD CONSTRAINT cbcontratounibanco_unq UNIQUE (id_cbtiponegocio_int, contrato_str);

--
-- TOC entry 9689 (class 2606 OID 68209)
-- Name: cbcontratovw cbcontratovw_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratovw
    ADD CONSTRAINT cbcontratovw_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9691 (class 2606 OID 68214)
-- Name: cbcontratovw cbcontratovw_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratovw
    ADD CONSTRAINT cbcontratovw_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9695 (class 2606 OID 68212)
-- Name: cbcontratozogbi cbcontratozogbi_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratozogbi
    ADD CONSTRAINT cbcontratozogbi_pkey PRIMARY KEY (id_cbcontrato_int);

--
-- TOC entry 9697 (class 2606 OID 68221)
-- Name: cbcontratozogbi cbcontratozogbi_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratozogbi
    ADD CONSTRAINT cbcontratozogbi_unq UNIQUE (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9699 (class 2606 OID 67115)
-- Name: cbconvenio cbconvenio_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenio
    ADD CONSTRAINT cbconvenio_pkey PRIMARY KEY (id_geempresa_int, id_gefilial_int, id_gecliente_int, id_cbconvenio_int);

--
-- TOC entry 9701 (class 2606 OID 67133)
-- Name: cbconvenio cbconvenio_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenio
    ADD CONSTRAINT cbconvenio_unq UNIQUE (id_cbconvenio_int);

--
-- TOC entry 9703 (class 2606 OID 68245)
-- Name: cbconvenioetapa cbconvenioetapa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenioetapa
    ADD CONSTRAINT cbconvenioetapa_pkey PRIMARY KEY (id_cbconvenioetapa_int);

--
-- TOC entry 9705 (class 2606 OID 68257)
-- Name: cbconvenioetapa cbconvenioetapa_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenioetapa
    ADD CONSTRAINT cbconvenioetapa_unq UNIQUE (id_cbconvenio_int, id_cbetapa_int);

--
-- TOC entry 9707 (class 2606 OID 68273)
-- Name: cbconveniofaixaatraso cbconveniofaixaatraso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniofaixaatraso
    ADD CONSTRAINT cbconveniofaixaatraso_pkey PRIMARY KEY (id_cbconveniofaixaatraso_int);

--
-- TOC entry 9709 (class 2606 OID 68281)
-- Name: cbconveniofaixaatraso cbconveniofaixaatraso_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniofaixaatraso
    ADD CONSTRAINT cbconveniofaixaatraso_unq UNIQUE (id_cbconvenio_int, id_gefaixaatraso_int);

--
-- TOC entry 9711 (class 2606 OID 68283)
-- Name: cbconveniotiponegocio cbconveniotiponegocio_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniotiponegocio
    ADD CONSTRAINT cbconveniotiponegocio_pkey PRIMARY KEY (id_cbconveniotiponegocio_int);

--
-- TOC entry 9713 (class 2606 OID 68291)
-- Name: cbconveniotiponegocio cbconveniotiponegocio_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniotiponegocio
    ADD CONSTRAINT cbconveniotiponegocio_unq UNIQUE (id_cbconvenio_int, id_cbtiponegocio_int);

--
-- TOC entry 9719 (class 2606 OID 68294)
-- Name: cbdespesa cbdespesa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdespesa
    ADD CONSTRAINT cbdespesa_pkey PRIMARY KEY (id_cbdespesa_int);

--
-- TOC entry 9723 (class 2606 OID 68296)
-- Name: cbdespesaaut cbdespesaaut_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdespesaaut
    ADD CONSTRAINT cbdespesaaut_pkey PRIMARY KEY (id_cbdespesaaut_int);

--
-- TOC entry 9728 (class 2606 OID 66222)
-- Name: cbdetalhelay cbdetalhelay_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdetalhelay
    ADD CONSTRAINT cbdetalhelay_pkey PRIMARY KEY (id_cbdetalhelay_int);

--
-- TOC entry 9735 (class 2606 OID 68320)
-- Name: cbdistribuidorcliente cbdistribuidorcliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdistribuidorcliente
    ADD CONSTRAINT cbdistribuidorcliente_pkey PRIMARY KEY (id_cbdistribuidorcliente_int);

--
-- TOC entry 9738 (class 2606 OID 68346)
-- Name: cbentradalay cbentradalay_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbentradalay
    ADD CONSTRAINT cbentradalay_pkey PRIMARY KEY (id_cbentradalay_int);

--
-- TOC entry 9742 (class 2606 OID 65896)
-- Name: cbespeciepagamento cbespeciepagamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbespeciepagamento
    ADD CONSTRAINT cbespeciepagamento_pkey PRIMARY KEY (id_cbespeciepagamento_int);

--
-- TOC entry 9745 (class 2606 OID 66281)
-- Name: cbestacionamento cbestacionamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestacionamento
    ADD CONSTRAINT cbestacionamento_pkey PRIMARY KEY (id_cbestacionamento_int);

--
-- TOC entry 9747 (class 2606 OID 68339)
-- Name: cbestacionamentoapreensao cbestacionamentoapreensao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestacionamentoapreensao
    ADD CONSTRAINT cbestacionamentoapreensao_pkey PRIMARY KEY (id_cbestacionamento_int, id_cbapreensao_int);

--
-- TOC entry 9752 (class 2606 OID 68369)
-- Name: cbestoque cbestoque_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestoque
    ADD CONSTRAINT cbestoque_pkey PRIMARY KEY (id_cbestoque_int);

--
-- TOC entry 9754 (class 2606 OID 67459)
-- Name: cbetapa cbetapa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbetapa
    ADD CONSTRAINT cbetapa_pkey PRIMARY KEY (id_cbetapa_int);

--
-- TOC entry 9757 (class 2606 OID 66071)
-- Name: cbfatorhlog cbfatorhlog_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfatorhlog
    ADD CONSTRAINT cbfatorhlog_pkey PRIMARY KEY (id_cbfatorhlog_int);

--
-- TOC entry 9759 (class 2606 OID 68359)
-- Name: cbfiatret cbfiatret_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfiatret
    ADD CONSTRAINT cbfiatret_pkey PRIMARY KEY (id_cbfiatret_int);

--
-- TOC entry 9763 (class 2606 OID 68391)
-- Name: cbfilialcliente cbfilialcliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfilialcliente
    ADD CONSTRAINT cbfilialcliente_pkey PRIMARY KEY (id_cbfilialcliente_int);

--
-- TOC entry 9770 (class 2606 OID 45452)
-- Name: cbfollowup cbfollowup_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfollowup
    ADD CONSTRAINT cbfollowup_pkey PRIMARY KEY (id_cbfollowup_int);

--
-- TOC entry 9776 (class 2606 OID 67282)
-- Name: cbformapagamento cbformapagamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbformapagamento
    ADD CONSTRAINT cbformapagamento_pkey PRIMARY KEY (id_cbformapagamento_int);

--
-- TOC entry 9779 (class 2606 OID 66849)
-- Name: cbfuncaoboleto cbfuncaoboleto_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfuncaoboleto
    ADD CONSTRAINT cbfuncaoboleto_unq UNIQUE (funcao_str);

--
-- TOC entry 9783 (class 2606 OID 68389)
-- Name: cbgarantia cbgarantia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgarantia
    ADD CONSTRAINT cbgarantia_pkey PRIMARY KEY (id_cbgarantia_int);

--
-- TOC entry 9785 (class 2606 OID 68404)
-- Name: cbgravacao cbgravacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgravacao
    ADD CONSTRAINT cbgravacao_pkey PRIMARY KEY (id_cbgravacao_int);

--
-- TOC entry 9790 (class 2606 OID 68423)
-- Name: cbgravacaofollowup cbgravacaofollowup_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgravacaofollowup
    ADD CONSTRAINT cbgravacaofollowup_pkey PRIMARY KEY (id_cbgravacaofollowup_int);

--
-- TOC entry 9794 (class 2606 OID 67514)
-- Name: cbgrupolayout cbgrupolayout_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgrupolayout
    ADD CONSTRAINT cbgrupolayout_pkey PRIMARY KEY (id_cbgrupolayout_int);

--
-- TOC entry 9796 (class 2606 OID 68425)
-- Name: cbinconsistencia cbinconsistencia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinconsistencia
    ADD CONSTRAINT cbinconsistencia_pkey PRIMARY KEY (id_cbinconsistencia_int);

--
-- TOC entry 9798 (class 2606 OID 68435)
-- Name: cbinstrucao cbinstrucao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinstrucao
    ADD CONSTRAINT cbinstrucao_pkey PRIMARY KEY (id_cbinstrucao_int);

--
-- TOC entry 9801 (class 2606 OID 68452)
-- Name: cbinstrucaobanco cbinstrucaobanco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinstrucaobanco
    ADD CONSTRAINT cbinstrucaobanco_pkey PRIMARY KEY (id_cbinstrucaobanco_int);

--
-- TOC entry 9804 (class 2606 OID 68454)
-- Name: cbinstrucaocobranca cbinstrucaocobranca_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinstrucaocobranca
    ADD CONSTRAINT cbinstrucaocobranca_pkey PRIMARY KEY (id_cbinstrucaocobranca_int);

--
-- TOC entry 10256 (class 2606 OID 68516)
-- Name: cbitemborderoboletagem cbitemborderoboletagem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderoboletagem
    ADD CONSTRAINT cbitemborderoboletagem_pkey PRIMARY KEY (id_cbitemborderoboletagem_int);

--
-- TOC entry 10259 (class 2606 OID 68534)
-- Name: cbitemborderoboletagemparcela cbitemborderoboletagemparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderoboletagemparcela
    ADD CONSTRAINT cbitemborderoboletagemparcela_pkey PRIMARY KEY (id_cbitemborderoboletagemparcela_int);

--
-- TOC entry 10264 (class 2606 OID 68539)
-- Name: cbitemborderocalculoparcela cbitemborderocalculoparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderocalculoparcela
    ADD CONSTRAINT cbitemborderocalculoparcela_pkey PRIMARY KEY (id_cbitemborderocalculoparcela_int);

--
-- TOC entry 10269 (class 2606 OID 68554)
-- Name: cbitemborderocusta cbitemborderocusta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderocusta
    ADD CONSTRAINT cbitemborderocusta_pkey PRIMARY KEY (id_cbitemborderocusta_int);

--
-- TOC entry 10280 (class 2606 OID 68750)
-- Name: cbitemborderostatus cbitemborderostatus_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderostatus
    ADD CONSTRAINT cbitemborderostatus_pkey PRIMARY KEY (id_cbitemborderostatus_int);

--
-- TOC entry 10283 (class 2606 OID 63959)
-- Name: cbitemlay cbitemlay_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemlay
    ADD CONSTRAINT cbitemlay_pkey PRIMARY KEY (id_cbitemlay_int);

--
-- TOC entry 10290 (class 2606 OID 66279)
-- Name: cbmodlayout cbmodlayout_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmodlayout
    ADD CONSTRAINT cbmodlayout_pkey PRIMARY KEY (id_cbmodlayout_int);

--
-- TOC entry 10293 (class 2606 OID 67543)
-- Name: cbmodlayoutagrupados cbmodlayoutagrupados_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmodlayoutagrupados
    ADD CONSTRAINT cbmodlayoutagrupados_pkey PRIMARY KEY (id_cbmodlayout_int, id_cbgrupolayout_int);

--
-- TOC entry 10295 (class 2606 OID 69158)
-- Name: cbmotivobanco cbmotivobanco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmotivobanco
    ADD CONSTRAINT cbmotivobanco_pkey PRIMARY KEY (id_cbmotivobanco_int);

--
-- TOC entry 10298 (class 2606 OID 69356)
-- Name: cbnotifcodigodivida cbnotifcodigodivida_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodivida
    ADD CONSTRAINT cbnotifcodigodivida_pkey PRIMARY KEY (id_cbnotifcodigodivida_int);

--
-- TOC entry 10300 (class 2606 OID 69748)
-- Name: cbnotifcodigodivida cbnotifcodigodivida_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodivida
    ADD CONSTRAINT cbnotifcodigodivida_unq UNIQUE (id_gecliente_int, codigo_str);

--
-- TOC entry 10302 (class 2606 OID 69739)
-- Name: cbnotifcodigodividaparam cbnotifcodigodividaparam_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT cbnotifcodigodividaparam_pkey PRIMARY KEY (id_cbnotifcodigodividaparam_int);

--
-- TOC entry 10304 (class 2606 OID 69783)
-- Name: cbnotifcodigodividaparam cbnotifcodigodividaparam_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT cbnotifcodigodividaparam_unq UNIQUE (id_gecliente_int, id_cbnotifcodigodivida_int, descricao_str);

--
-- TOC entry 10306 (class 2606 OID 69805)
-- Name: cbnotifmarcaparcela cbnotifmarcaparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifmarcaparcela
    ADD CONSTRAINT cbnotifmarcaparcela_pkey PRIMARY KEY (id_cbnotifmarcaparcela_int);

--
-- TOC entry 10308 (class 2606 OID 71083)
-- Name: cbnotifparametros cbnotifparametros_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbnotifparametros_pkey PRIMARY KEY (id_cbnotifparametros_int);

--
-- TOC entry 10310 (class 2606 OID 71137)
-- Name: cbnotifparametros cbnotifparametros_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbnotifparametros_unq UNIQUE (id_gecliente_int);

--
-- TOC entry 10312 (class 2606 OID 69905)
-- Name: cbnotifparametrosda cbnotifparametrosda_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosda
    ADD CONSTRAINT cbnotifparametrosda_pkey PRIMARY KEY (id_cbnotifparametrosda_int);

--
-- TOC entry 10314 (class 2606 OID 70763)
-- Name: cbnotiftiporemessa cbnotiftiporemessa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotiftiporemessa
    ADD CONSTRAINT cbnotiftiporemessa_pkey PRIMARY KEY (id_cbnotiftiporemessa_int);

--
-- TOC entry 10316 (class 2606 OID 71034)
-- Name: cbnotifvalor cbnotifvalor_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifvalor
    ADD CONSTRAINT cbnotifvalor_pkey PRIMARY KEY (id_cbnotifvalor_int);

--
-- TOC entry 10318 (class 2606 OID 45770)
-- Name: cbobito cbobito_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbobito
    ADD CONSTRAINT cbobito_pkey PRIMARY KEY (id_cbobito_int);

--
-- TOC entry 10325 (class 2606 OID 71109)
-- Name: cbordemlay cbordemlay_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbordemlay
    ADD CONSTRAINT cbordemlay_pkey PRIMARY KEY (id_cbordemlay_int);

--
-- TOC entry 10334 (class 2606 OID 65782)
-- Name: cbpagamento cbpagamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbpagamento
    ADD CONSTRAINT cbpagamento_pkey PRIMARY KEY (id_cbpagamento_int);

--
-- TOC entry 10338 (class 2606 OID 67353)
-- Name: cbparamclifilial cbparamclifilial_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparamclifilial
    ADD CONSTRAINT cbparamclifilial_pkey PRIMARY KEY (id_cbparamclifilial_int);

--
-- TOC entry 10345 (class 2606 OID 45831)
-- Name: cbparcela cbparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcela
    ADD CONSTRAINT cbparcela_pkey PRIMARY KEY (id_cbparcela_int);

--
-- TOC entry 10351 (class 2606 OID 71440)
-- Name: cbparceladespesa cbparceladespesa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparceladespesa
    ADD CONSTRAINT cbparceladespesa_pkey PRIMARY KEY (id_cbparceladespesa_int);

--
-- TOC entry 10361 (class 2606 OID 65816)
-- Name: cbparcelapagamento cbparcelapagamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelapagamento
    ADD CONSTRAINT cbparcelapagamento_pkey PRIMARY KEY (id_cbparcelapagamento_int);

--
-- TOC entry 10365 (class 2606 OID 71359)
-- Name: cbparcelaproposta cbparcelaproposta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelaproposta
    ADD CONSTRAINT cbparcelaproposta_pkey PRIMARY KEY (id_cbparcelaproposta_int);

--
-- TOC entry 10367 (class 2606 OID 71495)
-- Name: cbparcelatransf cbparcelatransf_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelatransf
    ADD CONSTRAINT cbparcelatransf_pkey PRIMARY KEY (id_cbparcelatransf_int);

--
-- TOC entry 10370 (class 2606 OID 71506)
-- Name: cbpergunta cbpergunta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbpergunta
    ADD CONSTRAINT cbpergunta_pkey PRIMARY KEY (id_cbpergunta_int);

--
-- TOC entry 10372 (class 2606 OID 71508)
-- Name: cbperguntarespondida cbperguntarespondida_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbperguntarespondida
    ADD CONSTRAINT cbperguntarespondida_pkey PRIMARY KEY (id_cbperguntarespondidaint);

--
-- TOC entry 10374 (class 2606 OID 71599)
-- Name: cbperguntaresposta cbperguntaresposta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbperguntaresposta
    ADD CONSTRAINT cbperguntaresposta_pkey PRIMARY KEY (id_cbperguntaresposta_int);

--
-- TOC entry 10376 (class 2606 OID 71945)
-- Name: cbplataforma cbplataforma_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbplataforma
    ADD CONSTRAINT cbplataforma_pkey PRIMARY KEY (id_cbplataforma_int);

--
-- TOC entry 10378 (class 2606 OID 72052)
-- Name: cbplataforma cbplataforma_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbplataforma
    ADD CONSTRAINT cbplataforma_unq UNIQUE (id_gecliente_int, codigo_int);

--
-- TOC entry 10380 (class 2606 OID 72277)
-- Name: cbproduto cbproduto_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbproduto
    ADD CONSTRAINT cbproduto_pkey PRIMARY KEY (id_cbproduto_int);

--
-- TOC entry 10382 (class 2606 OID 72405)
-- Name: cbproduto cbproduto_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbproduto
    ADD CONSTRAINT cbproduto_unq UNIQUE (codigo_str, id_gecliente_int);

--
-- TOC entry 10384 (class 2606 OID 72011)
-- Name: cbprodutocliente cbprodutocliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT cbprodutocliente_pkey PRIMARY KEY (id_cbprodutocliente_int);

--
-- TOC entry 10386 (class 2606 OID 72076)
-- Name: cbprodutocliente cbprodutocliente_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT cbprodutocliente_unq UNIQUE (codigo_produto_cliente_str, id_cbproduto_int, id_gecliente_int);

--
-- TOC entry 10388 (class 2606 OID 72270)
-- Name: cbprodutocliente cbprodutocliente_unq1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT cbprodutocliente_unq1 UNIQUE (codigo_produto, id_gecliente_int);

--
-- TOC entry 10390 (class 2606 OID 72468)
-- Name: cbproposta cbproposta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbproposta
    ADD CONSTRAINT cbproposta_pkey PRIMARY KEY (id_cbproposta_int);

--
-- TOC entry 10397 (class 2606 OID 72891)
-- Name: cbreceptivoretornotipo cbreceptivoretornotipo_pky; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbreceptivoretornotipo
    ADD CONSTRAINT cbreceptivoretornotipo_pky PRIMARY KEY (id_cbreceptivoretornotipo_int);

--
-- TOC entry 10399 (class 2606 OID 73099)
-- Name: cbregionalcliente cbregionalcliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbregionalcliente
    ADD CONSTRAINT cbregionalcliente_pkey PRIMARY KEY (id_cbregionalcliente_int);

--
-- TOC entry 10402 (class 2606 OID 73162)
-- Name: cbregistroboletoapi cbregistroboleto_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbregistroboletoapi
    ADD CONSTRAINT cbregistroboleto_pkey PRIMARY KEY (id_cbregistroboleto_int);

--
-- TOC entry 10405 (class 2606 OID 73418)
-- Name: cbregistroboletoapilog cbregistroboletoapilog_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbregistroboletoapilog
    ADD CONSTRAINT cbregistroboletoapilog_pkey PRIMARY KEY (id_cbregistroboletoapilog_int);

--
-- TOC entry 10410 (class 2606 OID 66408)
-- Name: cbsitcontato cbsitcontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsitcontato
    ADD CONSTRAINT cbsitcontato_pkey PRIMARY KEY (id_cbsitcontato_int);

--
-- TOC entry 10414 (class 2606 OID 73724)
-- Name: cbsituacaocontatoemail cbsituacaocontatoemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontatoemail
    ADD CONSTRAINT cbsituacaocontatoemail_pkey PRIMARY KEY (id_cbsituacaocontatoemail_int);

--
-- TOC entry 10416 (class 2606 OID 66955)
-- Name: cbsituacaocontrato cbsituacaocontrato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontrato
    ADD CONSTRAINT cbsituacaocontrato_pkey PRIMARY KEY (id_cbsituacaocontrato_int);

--
-- TOC entry 10420 (class 2606 OID 63772)
-- Name: cbsituacaocontratohistorico cbsituacaocontratohistorico_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontratohistorico
    ADD CONSTRAINT cbsituacaocontratohistorico_pkey PRIMARY KEY (id_cbsituacaocontratohistorico_int);

--
-- TOC entry 10425 (class 2606 OID 45849)
-- Name: cbsituacaoparcelahistorico cbsituacaoparcelahistorico_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaoparcelahistorico
    ADD CONSTRAINT cbsituacaoparcelahistorico_pkey PRIMARY KEY (id_cbsituacaoparcelahistorico_int);

--
-- TOC entry 10427 (class 2606 OID 66690)
-- Name: cbsubformula cbsubformula_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsubformula
    ADD CONSTRAINT cbsubformula_pkey PRIMARY KEY (id_cbsubformula_int);

--
-- TOC entry 10429 (class 2606 OID 66706)
-- Name: cbsubformula cbsubformula_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsubformula
    ADD CONSTRAINT cbsubformula_unq UNIQUE (codigo_subformula_str, data_inicio_dat, id_gecliente_int);

--
-- TOC entry 10431 (class 2606 OID 66668)
-- Name: cbtipodespesa cbtipodespesa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipodespesa
    ADD CONSTRAINT cbtipodespesa_pkey PRIMARY KEY (id_cbtipodespesa_int);

--
-- TOC entry 10435 (class 2606 OID 73723)
-- Name: cbtipodespesavalida cbtipodespesavalida_pky; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipodespesavalida
    ADD CONSTRAINT cbtipodespesavalida_pky PRIMARY KEY (id_cbtipodespesavalida_int);

--
-- TOC entry 10437 (class 2606 OID 73914)
-- Name: cbtipoestacionamento cbtipoestacionamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipoestacionamento
    ADD CONSTRAINT cbtipoestacionamento_pkey PRIMARY KEY (id_cbtipoestacionamento_int);

--
-- TOC entry 10439 (class 2606 OID 73907)
-- Name: cbtipogarantia cbtipogarantia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipogarantia
    ADD CONSTRAINT cbtipogarantia_pkey PRIMARY KEY (id_cbtipogarantia_int);

--
-- TOC entry 10442 (class 2606 OID 67457)
-- Name: cbtiponegocio cbtiponegocio_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegocio
    ADD CONSTRAINT cbtiponegocio_pkey PRIMARY KEY (id_cbtiponegocio_int);

--
-- TOC entry 10445 (class 2606 OID 74307)
-- Name: cbtiponegociocartorio cbtiponegociocartorio_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegociocartorio
    ADD CONSTRAINT cbtiponegociocartorio_pkey PRIMARY KEY (id_cbtiponegociocartorio_int);

--
-- TOC entry 10448 (class 2606 OID 74088)
-- Name: cbtiponegocioimportacao cbtiponegocioimportacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegocioimportacao
    ADD CONSTRAINT cbtiponegocioimportacao_pkey PRIMARY KEY (id_cbtiponegocioimportacao_int);

--
-- TOC entry 10450 (class 2606 OID 66995)
-- Name: cbtipopagamento cbtipopagamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamento
    ADD CONSTRAINT cbtipopagamento_pkey PRIMARY KEY (id_cbtipopagamento_int);

--
-- TOC entry 10453 (class 2606 OID 74364)
-- Name: cbtipopagamentoabat cbtipopagamentoabat_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoabat
    ADD CONSTRAINT cbtipopagamentoabat_pkey PRIMARY KEY (id_cbtipopagamentoabat_int);

--
-- TOC entry 10456 (class 2606 OID 74569)
-- Name: cbtipopagamentocampo cbtipopagamentocampo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentocampo
    ADD CONSTRAINT cbtipopagamentocampo_pkey PRIMARY KEY (id_cbtipopagamentocampo_int);

--
-- TOC entry 10458 (class 2606 OID 74695)
-- Name: cbtipopagamentoestdes cbtipopagamentoestdes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoestdes
    ADD CONSTRAINT cbtipopagamentoestdes_pkey PRIMARY KEY (id_cbtipopagamentoestdes_int);

--
-- TOC entry 10461 (class 2606 OID 74933)
-- Name: cbtipopagamentoetapa cbtipopagamentoetapa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoetapa
    ADD CONSTRAINT cbtipopagamentoetapa_pkey PRIMARY KEY (id_cbtipopagamentoetapa_int);

--
-- TOC entry 10463 (class 2606 OID 75008)
-- Name: cbtipopagamentoetapa cbtipopagamentoetapa_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoetapa
    ADD CONSTRAINT cbtipopagamentoetapa_unq UNIQUE (id_cbtipopagamento_int, id_cbetapa_int);

--
-- TOC entry 10465 (class 2606 OID 75242)
-- Name: cbtipopagamentofilial cbtipopagamentofilial_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentofilial
    ADD CONSTRAINT cbtipopagamentofilial_pkey PRIMARY KEY (id_cbtipopagamentofilial_int);

--
-- TOC entry 10467 (class 2606 OID 75277)
-- Name: cbtipopagamentofilial cbtipopagamentofilial_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentofilial
    ADD CONSTRAINT cbtipopagamentofilial_unq UNIQUE (id_cbtipopagamento_int, id_gefilial_int);

--
-- TOC entry 10469 (class 2606 OID 75056)
-- Name: cbtipopagamentoparcela cbtipopagamentoparcela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoparcela
    ADD CONSTRAINT cbtipopagamentoparcela_pkey PRIMARY KEY (id_cbtipopagamentoparcela_int);

--
-- TOC entry 10471 (class 2606 OID 75195)
-- Name: cbtipopagamentoparcelamento cbtipopagamentoparcelamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoparcelamento
    ADD CONSTRAINT cbtipopagamentoparcelamento_pkey PRIMARY KEY (id_cbtipopagamentoparcelamento_int);

--
-- TOC entry 10473 (class 2606 OID 75308)
-- Name: cbtipopagamentoregua cbtipopagamentoregua_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoregua
    ADD CONSTRAINT cbtipopagamentoregua_pkey PRIMARY KEY (id_cbtipopagamentoregua_int);

--
-- TOC entry 10475 (class 2606 OID 75457)
-- Name: cbtipopagamentoregua cbtipopagamentoregua_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoregua
    ADD CONSTRAINT cbtipopagamentoregua_unq UNIQUE (id_cbtipopagamento_int, id_esregua_int);

--
-- TOC entry 10477 (class 2606 OID 75273)
-- Name: cbtipopagamentositdes cbtipopagamentositdes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentositdes
    ADD CONSTRAINT cbtipopagamentositdes_pkey PRIMARY KEY (id_cbtipopagamentositdes_int);

--
-- TOC entry 10480 (class 2606 OID 67284)
-- Name: cbtipopagamentotaxaparc cbtipopagamentotaxaparc_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentotaxaparc
    ADD CONSTRAINT cbtipopagamentotaxaparc_pkey PRIMARY KEY (id_cbtipopagamentotaxaparc_int);

--
-- TOC entry 10482 (class 2606 OID 67411)
-- Name: cbtipopagamentotipneg cbtipopagamentotipneg_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentotipneg
    ADD CONSTRAINT cbtipopagamentotipneg_pkey PRIMARY KEY (id_cbtipopagamentotipneg_int);

--
-- TOC entry 10484 (class 2606 OID 67419)
-- Name: cbtipopagamentotipneg cbtipopagamentotipneg_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentotipneg
    ADD CONSTRAINT cbtipopagamentotipneg_unq UNIQUE (id_cbtipopagamento_int, id_cbtiponegocio_int);

--
-- TOC entry 10486 (class 2606 OID 75515)
-- Name: cbtipopagamentouf cbtipopagamentouf_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentouf
    ADD CONSTRAINT cbtipopagamentouf_pkey PRIMARY KEY (id_cbtipopagamentouf_int);

--
-- TOC entry 10489 (class 2606 OID 66884)
-- Name: cbunidadevalor cbunidadevalor_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbunidadevalor
    ADD CONSTRAINT cbunidadevalor_pkey PRIMARY KEY (id_cbunidadevalor_int);

--
-- TOC entry 10492 (class 2606 OID 66921)
-- Name: cbvalortipodespesa cbvalortipodespesa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbvalortipodespesa
    ADD CONSTRAINT cbvalortipodespesa_pkey PRIMARY KEY (id_cbvalortipodespesa_int);

--
-- TOC entry 10495 (class 2606 OID 75459)
-- Name: cbwhatsapp cbwhatsapp_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbwhatsapp
    ADD CONSTRAINT cbwhatsapp_pkey PRIMARY KEY (id_cbwhatsapp_int);

--
-- TOC entry 10871 (class 2606 OID 63763)
-- Name: geqlbasaofila cgeqlbasaofila_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlbasaofila
    ADD CONSTRAINT cgeqlbasaofila_pkey PRIMARY KEY (id_geqlbasaofila_int);

--
-- TOC entry 10497 (class 2606 OID 75687)
-- Name: cnt cnt_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cnt
    ADD CONSTRAINT cnt_pkey PRIMARY KEY (id_cnt);

--
-- TOC entry 10501 (class 2606 OID 75895)
-- Name: coringacbcontratomd2 coringacbcontratomd2_id_cbcontrato_int_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringacbcontratomd2
    ADD CONSTRAINT coringacbcontratomd2_id_cbcontrato_int_key UNIQUE (id_cbcontrato_int);

--
-- TOC entry 10504 (class 2606 OID 75949)
-- Name: coringacbparcelamd2 coringacbparcelamd2_id_cbparcela_int_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringacbparcelamd2
    ADD CONSTRAINT coringacbparcelamd2_id_cbparcela_int_key UNIQUE (id_cbparcela_int);

--
-- TOC entry 10507 (class 2606 OID 76016)
-- Name: coringageqlcontatomd2 coringageqlcontatomd2_id_geqlcontato_int_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringageqlcontatomd2
    ADD CONSTRAINT coringageqlcontatomd2_id_geqlcontato_int_key UNIQUE (id_geqlcontato_int);

--
-- TOC entry 10510 (class 2606 OID 76167)
-- Name: coringageqlemailmd2 coringageqlemailmd2_id_geqlemail_int_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringageqlemailmd2
    ADD CONSTRAINT coringageqlemailmd2_id_geqlemail_int_key UNIQUE (id_geqlemail_int);

--
-- TOC entry 10513 (class 2606 OID 76331)
-- Name: coringageqlenderecomd2 coringageqlenderecomd2_id_geqlendereco_int_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.coringageqlenderecomd2
    ADD CONSTRAINT coringageqlenderecomd2_id_geqlendereco_int_key UNIQUE (id_geqlendereco_int);

--
-- TOC entry 10522 (class 2606 OID 45847)
-- Name: es_telefone_suspeito_bloqueados es_telefone_suspeito_bloqueados_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.es_telefone_suspeito_bloqueados
    ADD CONSTRAINT es_telefone_suspeito_bloqueados_pkey PRIMARY KEY (contato_str);

--
-- TOC entry 10525 (class 2606 OID 76786)
-- Name: esacordo esacordo_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esacordo
    ADD CONSTRAINT esacordo_unq UNIQUE (id_gecliente_int, acordo_int);

--
-- TOC entry 10527 (class 2606 OID 76854)
-- Name: esagenciabradesco esagenciabradesco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esagenciabradesco
    ADD CONSTRAINT esagenciabradesco_pkey PRIMARY KEY (id_esagenciabradesco_int);

--
-- TOC entry 10533 (class 2606 OID 65864)
-- Name: esagendamentofidelizado esagendamentofidelizado_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esagendamentofidelizado
    ADD CONSTRAINT esagendamentofidelizado_pkey PRIMARY KEY (id_esagendamentofidelizado_int);

--
-- TOC entry 10535 (class 2606 OID 77014)
-- Name: esbancoeventos esbancoeventos_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esbancoeventos
    ADD CONSTRAINT esbancoeventos_pkey PRIMARY KEY (id_esbancoeventos_int);

--
-- TOC entry 10537 (class 2606 OID 77125)
-- Name: esbancofases esbancofases_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esbancofases
    ADD CONSTRAINT esbancofases_pkey PRIMARY KEY (id_esbancofases_int);

--
-- TOC entry 10545 (class 2606 OID 77459)
-- Name: escidadeferiado escidadeferiado_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escidadeferiado
    ADD CONSTRAINT escidadeferiado_pkey PRIMARY KEY (id_escidadeferiado_int);

--
-- TOC entry 10547 (class 2606 OID 77507)
-- Name: escomissaobb escomissaobb_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escomissaobb
    ADD CONSTRAINT escomissaobb_pkey PRIMARY KEY (id_escomissaobb_int);

--
-- TOC entry 10549 (class 2606 OID 77511)
-- Name: escontratofinaustria escontratofinaustria_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escontratofinaustria
    ADD CONSTRAINT escontratofinaustria_pkey PRIMARY KEY (id_escontratofinaustria_int);

--
-- TOC entry 10551 (class 2606 OID 77664)
-- Name: escontratofinaustria escontratofinaustria_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escontratofinaustria
    ADD CONSTRAINT escontratofinaustria_unq UNIQUE (contrato_str, carteira_int, filial_int);

--
-- TOC entry 10554 (class 2606 OID 66233)
-- Name: escontrolelimpafilaaspect escontrolelimpafilaaspect_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escontrolelimpafilaaspect
    ADD CONSTRAINT escontrolelimpafilaaspect_pkey PRIMARY KEY (id_escontrolelimpafilaaspect_int);

--
-- TOC entry 10556 (class 2606 OID 77784)
-- Name: esdistribsenhavw esdistribsenhavw_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esdistribsenhavw
    ADD CONSTRAINT esdistribsenhavw_pkey PRIMARY KEY (id_esdistribsenhavw_int);

--
-- TOC entry 10558 (class 2606 OID 78077)
-- Name: esdocfisico esdocfisico_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esdocfisico
    ADD CONSTRAINT esdocfisico_pkey PRIMARY KEY (id_esdocfisico_int);

--
-- TOC entry 10561 (class 2606 OID 78165)
-- Name: esfechamento esfechamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esfechamento
    ADD CONSTRAINT esfechamento_pkey PRIMARY KEY (id_esfechamento_int);

--
-- TOC entry 10563 (class 2606 OID 78543)
-- Name: esinstrucao esinstrucao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esinstrucao
    ADD CONSTRAINT esinstrucao_pkey PRIMARY KEY (id_esinstrucao_int);

--
-- TOC entry 10571 (class 2606 OID 78985)
-- Name: esnumeracaoacordo esnumeracaoacordo_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esnumeracaoacordo
    ADD CONSTRAINT esnumeracaoacordo_unq UNIQUE (id_gecliente_int, acordo_int);

--
-- TOC entry 10574 (class 2606 OID 79234)
-- Name: espropostabb espropostabb_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.espropostabb
    ADD CONSTRAINT espropostabb_pkey PRIMARY KEY (id_espropostabb_int);

--
-- TOC entry 10576 (class 2606 OID 67476)
-- Name: esregua esregua_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esregua
    ADD CONSTRAINT esregua_pkey PRIMARY KEY (id_esregua_int);

--
-- TOC entry 10578 (class 2606 OID 67484)
-- Name: esregua esregua_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esregua
    ADD CONSTRAINT esregua_unq UNIQUE (id_gecliente_int, codigo_int);

--
-- TOC entry 10580 (class 2606 OID 79336)
-- Name: esreguafaixaatraso esreguafaixaatraso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguafaixaatraso
    ADD CONSTRAINT esreguafaixaatraso_pkey PRIMARY KEY (id_esregua_int, id_gefaixaatraso_int);

--
-- TOC entry 10582 (class 2606 OID 79246)
-- Name: esreguanotificacao esreguanotificacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguanotificacao
    ADD CONSTRAINT esreguanotificacao_pkey PRIMARY KEY (id_esreguanotificacao_int);

--
-- TOC entry 10584 (class 2606 OID 79341)
-- Name: esreguanotificacaofaixa esreguanotificacaofaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguanotificacaofaixa
    ADD CONSTRAINT esreguanotificacaofaixa_pkey PRIMARY KEY (id_esreguanotificacaofaixa_int);

--
-- TOC entry 10586 (class 2606 OID 79344)
-- Name: esretornofiat esretornofiat_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esretornofiat
    ADD CONSTRAINT esretornofiat_pkey PRIMARY KEY (id_esretornofiat_int);

--
-- TOC entry 10590 (class 2606 OID 79356)
-- Name: esretornostatustelefone esretornostatustelefone_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esretornostatustelefone
    ADD CONSTRAINT esretornostatustelefone_pkey PRIMARY KEY (id_esretornostatustelefone_int);

--
-- TOC entry 10594 (class 2606 OID 79383)
-- Name: essenhavw essenhavw_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.essenhavw
    ADD CONSTRAINT essenhavw_pkey PRIMARY KEY (id_essenhavw_int);

--
-- TOC entry 10597 (class 2606 OID 79365)
-- Name: essubclassificacao essubclassificacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.essubclassificacao
    ADD CONSTRAINT essubclassificacao_pkey PRIMARY KEY (id_essubclassificacao_int);

--
-- TOC entry 10599 (class 2606 OID 79385)
-- Name: estransferenciaacordo estransferenciaacordo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.estransferenciaacordo
    ADD CONSTRAINT estransferenciaacordo_pkey PRIMARY KEY (id_estransferenciaacordo_int);

--
-- TOC entry 10601 (class 2606 OID 79388)
-- Name: estratamentodados estratamentodados_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.estratamentodados
    ADD CONSTRAINT estratamentodados_pkey PRIMARY KEY (id_estratamentodados_int);

--
-- TOC entry 10604 (class 2606 OID 67503)
-- Name: ficcbanco ficcbanco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficcbanco
    ADD CONSTRAINT ficcbanco_pkey PRIMARY KEY (id_ficcbanco_int);

--
-- TOC entry 10608 (class 2606 OID 79412)
-- Name: ficheque ficheque_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficheque
    ADD CONSTRAINT ficheque_pkey PRIMARY KEY (id_ficheque_int);

--
-- TOC entry 10611 (class 2606 OID 79402)
-- Name: fichequedevolvido fichequedevolvido_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fichequedevolvido
    ADD CONSTRAINT fichequedevolvido_pkey PRIMARY KEY (id_fichequedevolvido_int);

--
-- TOC entry 10614 (class 2606 OID 79410)
-- Name: ficoeficiente ficoeficiente_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficoeficiente
    ADD CONSTRAINT ficoeficiente_unq UNIQUE (id_gecliente_int, taxa_str, parcelas_int, tipo_entrada_str);

--
-- TOC entry 10616 (class 2606 OID 79444)
-- Name: ficontacliente ficontacliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficontacliente
    ADD CONSTRAINT ficontacliente_pkey PRIMARY KEY (id_ficontacliente_int);

--
-- TOC entry 10619 (class 2606 OID 79441)
-- Name: fidescindicebanco fidescindicebanco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fidescindicebanco
    ADD CONSTRAINT fidescindicebanco_pkey PRIMARY KEY (id_fidescindicebanco_int);

--
-- TOC entry 10622 (class 2606 OID 79466)
-- Name: fidesconto fidesconto1_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fidesconto
    ADD CONSTRAINT fidesconto1_unq UNIQUE (id_gecliente_int, id_cbtiponegocio_int, faixa_atraso_str);

--
-- TOC entry 10624 (class 2606 OID 65756)
-- Name: fiindicemoeda fiindicemoeda_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fiindicemoeda
    ADD CONSTRAINT fiindicemoeda_pkey PRIMARY KEY (id_fiindicemoeda_int);

--
-- TOC entry 10627 (class 2606 OID 67227)
-- Name: fimoeda fimoeda_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fimoeda
    ADD CONSTRAINT fimoeda_pkey PRIMARY KEY (id_fimoeda_int);

--
-- TOC entry 10630 (class 2606 OID 79464)
-- Name: foo foo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.foo
    ADD CONSTRAINT foo_pkey PRIMARY KEY (f1, f2);

--
-- TOC entry 10652 (class 2606 OID 65754)
-- Name: geacesso geacesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geacesso
    ADD CONSTRAINT geacesso_pkey PRIMARY KEY (id_geacesso_int);

--
-- TOC entry 10657 (class 2606 OID 79520)
-- Name: geacessogrid geacessogrid_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geacessogrid
    ADD CONSTRAINT geacessogrid_pkey PRIMARY KEY (id_geacessogrid_int);

--
-- TOC entry 10660 (class 2606 OID 79518)
-- Name: geagendamentorelatorio geagendamentorelatorio_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geagendamentorelatorio
    ADD CONSTRAINT geagendamentorelatorio_pkey PRIMARY KEY (id_geagendamentorelatorio_int);

--
-- TOC entry 10662 (class 2606 OID 79525)
-- Name: gealinea gealinea_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gealinea
    ADD CONSTRAINT gealinea_pkey PRIMARY KEY (id_gealinea_int);

--
-- TOC entry 10665 (class 2606 OID 66150)
-- Name: geaplicacao geaplicacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geaplicacao
    ADD CONSTRAINT geaplicacao_pkey PRIMARY KEY (id_geaplicacao_int);

--
-- TOC entry 10668 (class 2606 OID 63755)
-- Name: geaplicacaolog geaplicacaolog_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geaplicacaolog
    ADD CONSTRAINT geaplicacaolog_pkey PRIMARY KEY (id_geaplicacaolog_int);

--
-- TOC entry 10670 (class 2606 OID 79541)
-- Name: gebancoevento gebancoevento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebancoevento
    ADD CONSTRAINT gebancoevento_pkey PRIMARY KEY (id_gebancoevento_int);

--
-- TOC entry 10672 (class 2606 OID 79550)
-- Name: gebancofase gebancofase_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebancofase
    ADD CONSTRAINT gebancofase_pkey PRIMARY KEY (id_gebancofase_int);

--
-- TOC entry 10674 (class 2606 OID 79590)
-- Name: gebloqueiotelefonecontato gebloqueiotelefonecontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontato
    ADD CONSTRAINT gebloqueiotelefonecontato_pkey PRIMARY KEY (id_gebloqueiotelefonecontato_int);

--
-- TOC entry 10676 (class 2606 OID 79574)
-- Name: gebloqueiotelefonecontatoanterior gebloqueiotelefonecontatoanterior_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontatoanterior
    ADD CONSTRAINT gebloqueiotelefonecontatoanterior_pkey PRIMARY KEY (id_gebloqueiotelefonecontatoanterior_int);

--
-- TOC entry 10678 (class 2606 OID 66090)
-- Name: gecampotabela gecampotabela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecampotabela
    ADD CONSTRAINT gecampotabela_pkey PRIMARY KEY (id_gecampotabela_int);

--
-- TOC entry 10682 (class 2606 OID 66627)
-- Name: gecargaacesso gecargaacesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecargaacesso
    ADD CONSTRAINT gecargaacesso_pkey PRIMARY KEY (id_gecargaacesso_int);

--
-- TOC entry 10685 (class 2606 OID 79576)
-- Name: gecartapreajuizamento gecartapreajuizamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecartapreajuizamento
    ADD CONSTRAINT gecartapreajuizamento_pkey PRIMARY KEY (id_gecartapreajuizamento_int);

--
-- TOC entry 10687 (class 2606 OID 65714)
-- Name: gecidade gecidade_npjur_unk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecidade
    ADD CONSTRAINT gecidade_npjur_unk UNIQUE (id_gemunic_npjur_int);

--
-- TOC entry 10689 (class 2606 OID 65716)
-- Name: gecidade gecidade_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecidade
    ADD CONSTRAINT gecidade_pkey PRIMARY KEY (id_gecidade_int);

--
-- TOC entry 10692 (class 2606 OID 67409)
-- Name: geclassificacaocontato geclassificacaocontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclassificacaocontato
    ADD CONSTRAINT geclassificacaocontato_pkey PRIMARY KEY (id_geclassificacaocontato_int);

--
-- TOC entry 10695 (class 2606 OID 67273)
-- Name: geclassificacaopreanalise geclassificacaopreanalise_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclassificacaopreanalise
    ADD CONSTRAINT geclassificacaopreanalise_pkey PRIMARY KEY (id_geclassificacaopreanalise_int);

--
-- TOC entry 10697 (class 2606 OID 66138)
-- Name: gecliente gecliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecliente
    ADD CONSTRAINT gecliente_pkey PRIMARY KEY (id_gecliente_int);

--
-- TOC entry 10700 (class 2606 OID 66618)
-- Name: geclienteservidor geclienteservidor_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclienteservidor
    ADD CONSTRAINT geclienteservidor_pkey PRIMARY KEY (id_geclienteservidor_int);

--
-- TOC entry 10702 (class 2606 OID 66621)
-- Name: geclienteservidor geclienteservidor_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclienteservidor
    ADD CONSTRAINT geclienteservidor_unq UNIQUE (id_gecliente_int, id_geparametroservidor_int);

--
-- TOC entry 10704 (class 2606 OID 65862)
-- Name: gecomarca gecomarca_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecomarca
    ADD CONSTRAINT gecomarca_pkey PRIMARY KEY (id_gecomarca_int);

--
-- TOC entry 10706 (class 2606 OID 67072)
-- Name: geconclusaopreajuizamento geconclusaopreajuizamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geconclusaopreajuizamento
    ADD CONSTRAINT geconclusaopreajuizamento_pkey PRIMARY KEY (id_geconclusaopreajuizamento_int);

--
-- TOC entry 10708 (class 2606 OID 79610)
-- Name: gecontrolepa gecontrolepa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecontrolepa
    ADD CONSTRAINT gecontrolepa_pkey PRIMARY KEY (id_gecontrolepa_int);

--
-- TOC entry 10710 (class 2606 OID 67165)
-- Name: gecriticanotificacao gecriticanotificacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecriticanotificacao
    ADD CONSTRAINT gecriticanotificacao_pkey PRIMARY KEY (id_gecriticanotificacao_int);

--
-- TOC entry 10712 (class 2606 OID 79608)
-- Name: gecriticas gecriticas_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecriticas
    ADD CONSTRAINT gecriticas_pkey PRIMARY KEY (id_gecriticas_int);

--
-- TOC entry 10714 (class 2606 OID 67087)
-- Name: gedepartamento gedepartamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gedepartamento
    ADD CONSTRAINT gedepartamento_pkey PRIMARY KEY (id_gedepartamento_int);

--
-- TOC entry 10716 (class 2606 OID 67230)
-- Name: geempresa geempresa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geempresa
    ADD CONSTRAINT geempresa_pkey PRIMARY KEY (id_geempresa_int);

--
-- TOC entry 10719 (class 2606 OID 66810)
-- Name: geentradausuario geentradausuario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geentradausuario
    ADD CONSTRAINT geentradausuario_pkey PRIMARY KEY (id_geentradausuario_int);

--
-- TOC entry 10723 (class 2606 OID 79626)
-- Name: geenvioemail geenvioemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geenvioemail
    ADD CONSTRAINT geenvioemail_pkey PRIMARY KEY (id_geenvioemail_int);

--
-- TOC entry 10725 (class 2606 OID 66386)
-- Name: geerrosys geerrosys_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geerrosys
    ADD CONSTRAINT geerrosys_pkey PRIMARY KEY (id_geerrosys_int);

--
-- TOC entry 10728 (class 2606 OID 67033)
-- Name: gefaixaatraso gefaixaatraso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefaixaatraso
    ADD CONSTRAINT gefaixaatraso_pkey PRIMARY KEY (id_gefaixaatraso_int);

--
-- TOC entry 10731 (class 2606 OID 67438)
-- Name: gefasesolicitacao gefasesolicitacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefasesolicitacao
    ADD CONSTRAINT gefasesolicitacao_pkey PRIMARY KEY (id_gefasesolicitacao_int);

--
-- TOC entry 10733 (class 2606 OID 66795)
-- Name: geferiado geferiado_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geferiado
    ADD CONSTRAINT geferiado_pkey PRIMARY KEY (id_geferiado_int);

--
-- TOC entry 10736 (class 2606 OID 79620)
-- Name: geferiadobradescocredimob geferiadobradescocredimob_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geferiadobradescocredimob
    ADD CONSTRAINT geferiadobradescocredimob_pkey PRIMARY KEY (id_geferiado_int);

--
-- TOC entry 10738 (class 2606 OID 79625)
-- Name: geferiadobradescocredimob geferiadobradescocredimob_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geferiadobradescocredimob
    ADD CONSTRAINT geferiadobradescocredimob_unq UNIQUE (data_dat);

--
-- TOC entry 10743 (class 2606 OID 79635)
-- Name: gefilacobrancaconfiguracoes gefilacobrancaconfiguracoes_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefilacobrancaconfiguracoes
    ADD CONSTRAINT gefilacobrancaconfiguracoes_pkey PRIMARY KEY (id_gefilacobrancaconfiguracoes_int);

--
-- TOC entry 10745 (class 2606 OID 66472)
-- Name: gefilial gefilial_npjur_unk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefilial
    ADD CONSTRAINT gefilial_npjur_unk UNIQUE (id_gefilial_npjur_int);

--
-- TOC entry 10747 (class 2606 OID 66475)
-- Name: gefilial gefilial_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefilial
    ADD CONSTRAINT gefilial_pkey PRIMARY KEY (id_gefilial_int);

--
-- TOC entry 10750 (class 2606 OID 66670)
-- Name: gefilialgrupo gefilialgrupo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefilialgrupo
    ADD CONSTRAINT gefilialgrupo_pkey PRIMARY KEY (id_gefilialgrupo_int);

--
-- TOC entry 10753 (class 2606 OID 66088)
-- Name: geflashback geflashback_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geflashback
    ADD CONSTRAINT geflashback_pkey PRIMARY KEY (id_geflashback_int);

--
-- TOC entry 11056 (class 2606 OID 67188)
-- Name: geviewcampo gegeviewcampo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewcampo
    ADD CONSTRAINT gegeviewcampo_pkey PRIMARY KEY (id_geviewcampo_int);

--
-- TOC entry 11058 (class 2606 OID 80834)
-- Name: geviewcondicao gegeviewcondicao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewcondicao
    ADD CONSTRAINT gegeviewcondicao_pkey PRIMARY KEY (id_geviewcondicao_int);

--
-- TOC entry 11060 (class 2606 OID 80827)
-- Name: geviewordem gegeviewordem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewordem
    ADD CONSTRAINT gegeviewordem_pkey PRIMARY KEY (id_geviewordem_int);

--
-- TOC entry 11062 (class 2606 OID 67402)
-- Name: geviewsistema gegeviewsistema_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewsistema
    ADD CONSTRAINT gegeviewsistema_pkey PRIMARY KEY (id_geviewsistema_int);

--
-- TOC entry 11064 (class 2606 OID 67344)
-- Name: geviewtabela gegeviewtabela_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewtabela
    ADD CONSTRAINT gegeviewtabela_pkey PRIMARY KEY (id_geviewtabela_int);

--
-- TOC entry 10759 (class 2606 OID 79638)
-- Name: gegrupoespnotificacao gegrupoespnotificacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupoespnotificacao
    ADD CONSTRAINT gegrupoespnotificacao_pkey PRIMARY KEY (id_gegrupoespnotificacao_int);

--
-- TOC entry 10762 (class 2606 OID 79654)
-- Name: gegrupoetapa gegrupoetapa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupoetapa
    ADD CONSTRAINT gegrupoetapa_pkey PRIMARY KEY (id_gegrupoetapa_int);

--
-- TOC entry 10765 (class 2606 OID 67382)
-- Name: gegrupofaixaatraso gegrupofaixaatraso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupofaixaatraso
    ADD CONSTRAINT gegrupofaixaatraso_pkey PRIMARY KEY (id_gegrupofaixaatraso_int);

--
-- TOC entry 10768 (class 2606 OID 66532)
-- Name: gegrupoparametro gegrupoparametro_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupoparametro
    ADD CONSTRAINT gegrupoparametro_pkey PRIMARY KEY (id_gegrupoparametro_int);

--
-- TOC entry 10771 (class 2606 OID 66762)
-- Name: gegrupoprocesso gegrupoprocesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupoprocesso
    ADD CONSTRAINT gegrupoprocesso_pkey PRIMARY KEY (id_gegrupoprocesso_int);

--
-- TOC entry 10773 (class 2606 OID 79652)
-- Name: gegrupotipodocumento gegrupotipodocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupotipodocumento
    ADD CONSTRAINT gegrupotipodocumento_pkey PRIMARY KEY (id_gegrupotipodocumento_int);

--
-- TOC entry 10776 (class 2606 OID 66302)
-- Name: gegrupousuario gegrupousuario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupousuario
    ADD CONSTRAINT gegrupousuario_pkey PRIMARY KEY (id_gegrupousuario_int);

--
-- TOC entry 10779 (class 2606 OID 65892)
-- Name: gehistorico gehistorico_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistorico
    ADD CONSTRAINT gehistorico_pkey PRIMARY KEY (id_gehistorico_int);

--
-- TOC entry 10781 (class 2606 OID 79670)
-- Name: gehistoricocamponline gehistoricocomponline; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistoricocamponline
    ADD CONSTRAINT gehistoricocomponline PRIMARY KEY (id_historicocamponline_int);

--
-- TOC entry 10786 (class 2606 OID 45723)
-- Name: gehistoricousuario gehistoricousuario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistoricousuario
    ADD CONSTRAINT gehistoricousuario_pkey PRIMARY KEY (id_gehistoricousuario_int);

--
-- TOC entry 10788 (class 2606 OID 79702)
-- Name: geinstrucaobaixa geinstrucaobaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinstrucaobaixa
    ADD CONSTRAINT geinstrucaobaixa_pkey PRIMARY KEY (id_geinstrucaobaixa_int);

--
-- TOC entry 10791 (class 2606 OID 79698)
-- Name: geinstrucaobaixacritica geinstrucaobaixacritica_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinstrucaobaixacritica
    ADD CONSTRAINT geinstrucaobaixacritica_pkey PRIMARY KEY (id_geinstrucaobaixacritica_int);

--
-- TOC entry 10793 (class 2606 OID 79700)
-- Name: geintegracao geintegracao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geintegracao
    ADD CONSTRAINT geintegracao_pkey PRIMARY KEY (id_geintegracao_int);

--
-- TOC entry 10795 (class 2606 OID 66575)
-- Name: geitemprocesso geitemprocesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geitemprocesso
    ADD CONSTRAINT geitemprocesso_pkey PRIMARY KEY (id_geitemprocesso_int);

--
-- TOC entry 10797 (class 2606 OID 79707)
-- Name: gekitdocumento gekitdocumento_codigo_str_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gekitdocumento
    ADD CONSTRAINT gekitdocumento_codigo_str_key UNIQUE (codigo_str);

--
-- TOC entry 10799 (class 2606 OID 79710)
-- Name: gekitdocumento gekitdocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gekitdocumento
    ADD CONSTRAINT gekitdocumento_pkey PRIMARY KEY (id_gekitdocumento_int);

--
-- TOC entry 10805 (class 2606 OID 79721)
-- Name: gelogdiscador gelogdiscador_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gelogdiscador
    ADD CONSTRAINT gelogdiscador_pkey PRIMARY KEY (id_gelogdiscador_int);

--
-- TOC entry 10807 (class 2606 OID 79723)
-- Name: gelogeventodiscador gelogeventodiscador_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gelogeventodiscador
    ADD CONSTRAINT gelogeventodiscador_pkey PRIMARY KEY (id_getipologeventodiscador_int, id_gelogdiscador_int);

--
-- TOC entry 10809 (class 2606 OID 79725)
-- Name: gelogsys gelogsys_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gelogsys
    ADD CONSTRAINT gelogsys_pkey PRIMARY KEY (id_gelogsys_int);

--
-- TOC entry 10812 (class 2606 OID 66148)
-- Name: gemenu gemenu_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemenu
    ADD CONSTRAINT gemenu_pkey PRIMARY KEY (id_gemenu_int);

--
-- TOC entry 10815 (class 2606 OID 79734)
-- Name: gemeta gemeta_codigo_str_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemeta
    ADD CONSTRAINT gemeta_codigo_str_key UNIQUE (codigo_str);

--
-- TOC entry 10817 (class 2606 OID 79738)
-- Name: gemeta gemeta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemeta
    ADD CONSTRAINT gemeta_pkey PRIMARY KEY (id_gemeta_int);

--
-- TOC entry 10819 (class 2606 OID 79736)
-- Name: gemetasitcontato gemetasitcontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemetasitcontato
    ADD CONSTRAINT gemetasitcontato_pkey PRIMARY KEY (id_cbsitcontato_int, id_gemeta_int);

--
-- TOC entry 10821 (class 2606 OID 67384)
-- Name: gemotivobaixa gemotivobaixa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivobaixa
    ADD CONSTRAINT gemotivobaixa_pkey PRIMARY KEY (id_gemotivobaixa_int);

--
-- TOC entry 10825 (class 2606 OID 66841)
-- Name: gemotivoinadimplencia gemotivoinadimplencia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivoinadimplencia
    ADD CONSTRAINT gemotivoinadimplencia_pkey PRIMARY KEY (id_gemotivoinadimplencia_int);

--
-- TOC entry 10827 (class 2606 OID 79752)
-- Name: gemotivonajuizamento gemotivonajuizamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivonajuizamento
    ADD CONSTRAINT gemotivonajuizamento_pkey PRIMARY KEY (id_gemotivonajuizamento_int);

--
-- TOC entry 10830 (class 2606 OID 79760)
-- Name: gemotivonajuizamentocliente gemotivonajuizamentocliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivonajuizamentocliente
    ADD CONSTRAINT gemotivonajuizamentocliente_pkey PRIMARY KEY (id_gecliente_int, id_gemotivonajuizamento_int);

--
-- TOC entry 10832 (class 2606 OID 79795)
-- Name: gemotivoresultadotriagem gemotivoresultadotriagem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivoresultadotriagem
    ADD CONSTRAINT gemotivoresultadotriagem_pkey PRIMARY KEY (id_gemotivoresultadotriagem_int);

--
-- TOC entry 10834 (class 2606 OID 79779)
-- Name: georgaotriagem georgaotriagem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.georgaotriagem
    ADD CONSTRAINT georgaotriagem_pkey PRIMARY KEY (id_georgaotriagem_int);

--
-- TOC entry 10836 (class 2606 OID 66567)
-- Name: geparamemail geparamemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparamemail
    ADD CONSTRAINT geparamemail_pkey PRIMARY KEY (id_geparamemail_int);

--
-- TOC entry 10838 (class 2606 OID 79791)
-- Name: geparamenvioemail geparamenvioemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparamenvioemail
    ADD CONSTRAINT geparamenvioemail_pkey PRIMARY KEY (id_geparamenvioemail_int);

--
-- TOC entry 10842 (class 2606 OID 66060)
-- Name: geparametro geparametro_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametro
    ADD CONSTRAINT geparametro_pkey PRIMARY KEY (id_geparametro_int);

--
-- TOC entry 10845 (class 2606 OID 66828)
-- Name: geparametroaplic geparametroaplic_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametroaplic
    ADD CONSTRAINT geparametroaplic_pkey PRIMARY KEY (id_geparametroaplic_int);

--
-- TOC entry 10847 (class 2606 OID 79797)
-- Name: geparametrofilacobranca geparametrofilacobranca_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametrofilacobranca
    ADD CONSTRAINT geparametrofilacobranca_pkey PRIMARY KEY (id_geparametrofilacobranca_int);

--
-- TOC entry 10849 (class 2606 OID 67075)
-- Name: geparametroid geparametroid_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametroid
    ADD CONSTRAINT geparametroid_pkey PRIMARY KEY (id_geparametroid_int);

--
-- TOC entry 10852 (class 2606 OID 66236)
-- Name: geparametroservidor geparametroservidor_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametroservidor
    ADD CONSTRAINT geparametroservidor_pkey PRIMARY KEY (id_geparametroservidor_int);

--
-- TOC entry 10854 (class 2606 OID 66239)
-- Name: geparametroservidor geparametroservidor_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametroservidor
    ADD CONSTRAINT geparametroservidor_unq UNIQUE (ip_str, banco_str);

--
-- TOC entry 10856 (class 2606 OID 79839)
-- Name: gepreanalise gepreanalise_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalise
    ADD CONSTRAINT gepreanalise_pkey PRIMARY KEY (id_gepreanalise_int);

--
-- TOC entry 10858 (class 2606 OID 79814)
-- Name: gepreanalisefollowup gepreanalisefollowup_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalisefollowup
    ADD CONSTRAINT gepreanalisefollowup_pkey PRIMARY KEY (id_gepreanalise_int, id_cbfollowup_int);

--
-- TOC entry 10860 (class 2606 OID 79816)
-- Name: gepreanaliseveiculo gepreanaliseveiculo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanaliseveiculo
    ADD CONSTRAINT gepreanaliseveiculo_pkey PRIMARY KEY (id_gepreanalise_int, id_cbgarantia_int);

--
-- TOC entry 10862 (class 2606 OID 66997)
-- Name: geprocesso geprocesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geprocesso
    ADD CONSTRAINT geprocesso_pkey PRIMARY KEY (id_geprocesso_int);

--
-- TOC entry 10867 (class 2606 OID 63813)
-- Name: geprocessocontrato geprocessocontrato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geprocessocontrato
    ADD CONSTRAINT geprocessocontrato_pkey PRIMARY KEY (id_geprocessocontrato_int);

--
-- TOC entry 10869 (class 2606 OID 79848)
-- Name: geprotocoloimportacao geprotocoloimportacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geprotocoloimportacao
    ADD CONSTRAINT geprotocoloimportacao_pkey PRIMARY KEY (id_geprotocoloimportacao_int);

--
-- TOC entry 10880 (class 2606 OID 63837)
-- Name: geqlcliente geqlcliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcliente
    ADD CONSTRAINT geqlcliente_pkey PRIMARY KEY (id_geqlcliente_int);

--
-- TOC entry 10882 (class 2606 OID 66839)
-- Name: geqlconfiguracaocontato geqlconfiguracaocontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaocontato
    ADD CONSTRAINT geqlconfiguracaocontato_pkey PRIMARY KEY (id_geqlconfiguracaocontato_int);

--
-- TOC entry 10884 (class 2606 OID 67224)
-- Name: geqlconfiguracaoemail geqlconfiguracaoemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaoemail
    ADD CONSTRAINT geqlconfiguracaoemail_pkey PRIMARY KEY (id_geqlconfiguracaoemail_int);

--
-- TOC entry 10886 (class 2606 OID 66696)
-- Name: geqlconfiguracaoendereco geqlconfiguracaoendereco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaoendereco
    ADD CONSTRAINT geqlconfiguracaoendereco_pkey PRIMARY KEY (id_geqlconfiguracaoendereco_int);

--
-- TOC entry 10888 (class 2606 OID 67324)
-- Name: geqlconfiguracaotratamento geqlconfiguracaotratamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaotratamento
    ADD CONSTRAINT geqlconfiguracaotratamento_pkey PRIMARY KEY (id_geqlconfiguracaotratamento_int);

--
-- TOC entry 10900 (class 2606 OID 63844)
-- Name: geqlcontato_bloqueiohistorico geqlcontato_bloqueiohistorico_pk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontato_bloqueiohistorico
    ADD CONSTRAINT geqlcontato_bloqueiohistorico_pk PRIMARY KEY (id_geqlcontato_bloqueiohistorico_int);

--
-- TOC entry 10897 (class 2606 OID 63701)
-- Name: geqlcontato geqlcontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontato
    ADD CONSTRAINT geqlcontato_pkey PRIMARY KEY (id_geqlcontato_int);

--
-- TOC entry 10906 (class 2606 OID 63877)
-- Name: geqlcontrato geqlcontrato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontrato
    ADD CONSTRAINT geqlcontrato_pkey PRIMARY KEY (id_geqlcontrato_int);

--
-- TOC entry 10910 (class 2606 OID 63825)
-- Name: geqlemail geqlemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlemail
    ADD CONSTRAINT geqlemail_pkey PRIMARY KEY (id_geqlemail_int);

--
-- TOC entry 10914 (class 2606 OID 79957)
-- Name: geqlemailbloqueado geqlemailbloqueado_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlemailbloqueado
    ADD CONSTRAINT geqlemailbloqueado_pkey PRIMARY KEY (id_geqlemailbloqueado_int);

--
-- TOC entry 10917 (class 2606 OID 79951)
-- Name: geqlemaildominiobloqueado geqlemaildominiobloqueado_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlemaildominiobloqueado
    ADD CONSTRAINT geqlemaildominiobloqueado_pkey PRIMARY KEY (id_geqlemaildominiobloqueado_int);

--
-- TOC entry 10920 (class 2606 OID 79959)
-- Name: geqlemailexcecao geqlemailexcecao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlemailexcecao
    ADD CONSTRAINT geqlemailexcecao_pkey PRIMARY KEY (id_geqlemailexcecao_int);

--
-- TOC entry 10923 (class 2606 OID 63787)
-- Name: geqlendereco geqlendereco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlendereco
    ADD CONSTRAINT geqlendereco_pkey PRIMARY KEY (id_geqlendereco_int);

--
-- TOC entry 10926 (class 2606 OID 80106)
-- Name: geqlgrupotipocontato geqlgrupotipocontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlgrupotipocontato
    ADD CONSTRAINT geqlgrupotipocontato_pkey PRIMARY KEY (id_geqlgrupotipocontato_int);

--
-- TOC entry 10929 (class 2606 OID 66891)
-- Name: geqlresponsavel geqlresponsavel_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlresponsavel
    ADD CONSTRAINT geqlresponsavel_pkey PRIMARY KEY (id_geqlresponsavel_int);

--
-- TOC entry 10931 (class 2606 OID 80159)
-- Name: geqlresponsavelemail geqlresponsavelemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlresponsavelemail
    ADD CONSTRAINT geqlresponsavelemail_pkey PRIMARY KEY (id_geqlresponsavelemail_int);

--
-- TOC entry 10933 (class 2606 OID 67190)
-- Name: geqlsituacao geqlsituacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlsituacao
    ADD CONSTRAINT geqlsituacao_pkey PRIMARY KEY (id_geqlsituacao_int);

--
-- TOC entry 10935 (class 2606 OID 80209)
-- Name: geqlskipping geqlskipping_pky; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlskipping
    ADD CONSTRAINT geqlskipping_pky PRIMARY KEY (id_geqlskipping_int);

--
-- TOC entry 10937 (class 2606 OID 66798)
-- Name: geqltipocontato geqltipocontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltipocontato
    ADD CONSTRAINT geqltipocontato_pkey PRIMARY KEY (id_geqltipocontato_int);

--
-- TOC entry 10939 (class 2606 OID 80178)
-- Name: geqltipocontatogrupotipocontato geqltipocontatogrupotipocontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltipocontatogrupotipocontato
    ADD CONSTRAINT geqltipocontatogrupotipocontato_pkey PRIMARY KEY (id_geqltipocontatogrupotipocontato_int);

--
-- TOC entry 10941 (class 2606 OID 66813)
-- Name: geqltipoemail geqltipoemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltipoemail
    ADD CONSTRAINT geqltipoemail_pkey PRIMARY KEY (id_geqltipoemail_int);

--
-- TOC entry 10943 (class 2606 OID 66963)
-- Name: geqltipoendereco geqltipoendereco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltipoendereco
    ADD CONSTRAINT geqltipoendereco_pkey PRIMARY KEY (id_geqltipoendereco_int);

--
-- TOC entry 10946 (class 2606 OID 65735)
-- Name: geqltratamento geqltratamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamento
    ADD CONSTRAINT geqltratamento_pkey PRIMARY KEY (id_geqltratamento_int);

--
-- TOC entry 10948 (class 2606 OID 66073)
-- Name: geqltratamentocontato geqltratamentocontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentocontato
    ADD CONSTRAINT geqltratamentocontato_pkey PRIMARY KEY (id_geqltratamentocontato_int);

--
-- TOC entry 10951 (class 2606 OID 80559)
-- Name: geqltratamentoemail geqltratamentoemail_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentoemail
    ADD CONSTRAINT geqltratamentoemail_pkey PRIMARY KEY (id_geqltratamentoemail_int);

--
-- TOC entry 10953 (class 2606 OID 80433)
-- Name: geqltratamentoendereco geqltratamentoendereco_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentoendereco
    ADD CONSTRAINT geqltratamentoendereco_pkey PRIMARY KEY (id_geqltratamentoendereco_int);

--
-- TOC entry 10955 (class 2606 OID 67257)
-- Name: geqltratamentolote geqltratamentolote_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentolote
    ADD CONSTRAINT geqltratamentolote_pkey PRIMARY KEY (id_geqltratamentolote_int);

--
-- TOC entry 10957 (class 2606 OID 80558)
-- Name: geramal geramal_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geramal
    ADD CONSTRAINT geramal_pkey PRIMARY KEY (id_geramal_int);

--
-- TOC entry 10959 (class 2606 OID 80563)
-- Name: geregrabloqueiotelefone geregrabloqueiotelefone_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geregrabloqueiotelefone
    ADD CONSTRAINT geregrabloqueiotelefone_pkey PRIMARY KEY (id_geregrabloqueiotelefone_int);

--
-- TOC entry 10965 (class 2606 OID 80597)
-- Name: geretornocma geretornocma_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geretornocma
    ADD CONSTRAINT geretornocma_pkey PRIMARY KEY (id_geretornocma_int);

--
-- TOC entry 10970 (class 2606 OID 63865)
-- Name: geretornosms geretornosms_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geretornosms
    ADD CONSTRAINT geretornosms_pkey PRIMARY KEY (id_geretornosms_int);

--
-- TOC entry 10972 (class 2606 OID 67506)
-- Name: gesequencia gesequencia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesequencia
    ADD CONSTRAINT gesequencia_pkey PRIMARY KEY (id_gesequencia_int);

--
-- TOC entry 10974 (class 2606 OID 67540)
-- Name: gesequenciaitem gesequenciaitem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesequenciaitem
    ADD CONSTRAINT gesequenciaitem_pkey PRIMARY KEY (id_gesequenciaitem_int);

--
-- TOC entry 10976 (class 2606 OID 66607)
-- Name: gesititemprocesso gesititemprocesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesititemprocesso
    ADD CONSTRAINT gesititemprocesso_pkey PRIMARY KEY (id_gesititemprocesso_int);

--
-- TOC entry 10978 (class 2606 OID 80599)
-- Name: gesolicitacaocustas gesolicitacaocustas_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaocustas
    ADD CONSTRAINT gesolicitacaocustas_pkey PRIMARY KEY (id_gesolicitacaocustas_int);

--
-- TOC entry 10981 (class 2606 OID 80634)
-- Name: gesolicitacaodocumento gesolicitacaodocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gesolicitacaodocumento_pkey PRIMARY KEY (id_gesolicitacaodocumento_int);

--
-- TOC entry 10983 (class 2606 OID 80636)
-- Name: gesolicitacaodocumentonotificacao gesolicitacaodocumentonotificacao_gesolicitacaodocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumentonotificacao
    ADD CONSTRAINT gesolicitacaodocumentonotificacao_gesolicitacaodocumento_pkey PRIMARY KEY (id_gesolicitacaodocumentonotificacao_int);

--
-- TOC entry 10985 (class 2606 OID 80630)
-- Name: gesolicitacaotipodocumento gesolicitacaotipodocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaotipodocumento
    ADD CONSTRAINT gesolicitacaotipodocumento_pkey PRIMARY KEY (id_getipodocumento_int, id_gesolicitacaodocumento_int);

--
-- TOC entry 10987 (class 2606 OID 65940)
-- Name: gestatusdespesa gestatusdespesa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusdespesa
    ADD CONSTRAINT gestatusdespesa_pkey PRIMARY KEY (id_gestatusdespesa_int);

--
-- TOC entry 10991 (class 2606 OID 63829)
-- Name: gestatusimporta gestatusimporta_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusimporta
    ADD CONSTRAINT gestatusimporta_pkey PRIMARY KEY (id_gestatusimporta_int);

--
-- TOC entry 10993 (class 2606 OID 80670)
-- Name: gestatustriagem gestatustriagem_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatustriagem
    ADD CONSTRAINT gestatustriagem_pkey PRIMARY KEY (id_gestatustriagem_int);

--
-- TOC entry 10995 (class 2606 OID 67545)
-- Name: gesubcarteira gesubcarteira_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesubcarteira
    ADD CONSTRAINT gesubcarteira_pkey PRIMARY KEY (id_gesubcarteira_int);

--
-- TOC entry 10997 (class 2606 OID 80696)
-- Name: geterceiro geterceiro_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geterceiro
    ADD CONSTRAINT geterceiro_pkey PRIMARY KEY (id_geterceiro_int);

--
-- TOC entry 10999 (class 2606 OID 80704)
-- Name: geterceiro geterceiro_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geterceiro
    ADD CONSTRAINT geterceiro_unq UNIQUE (id_cbcontrato_int);

--
-- TOC entry 11001 (class 2606 OID 66899)
-- Name: getipodocumento getipodocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipodocumento
    ADD CONSTRAINT getipodocumento_pkey PRIMARY KEY (id_getipodocumento_int);

--
-- TOC entry 11003 (class 2606 OID 80718)
-- Name: getipodocumentokitdocumento getipodocumentokitdocumento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipodocumentokitdocumento
    ADD CONSTRAINT getipodocumentokitdocumento_pkey PRIMARY KEY (id_getipodocumento_int, id_gekitdocumento_int);

--
-- TOC entry 11005 (class 2606 OID 80725)
-- Name: getipogarantia getipogarantia_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipogarantia
    ADD CONSTRAINT getipogarantia_pkey PRIMARY KEY (id_getipogarantia_int);

--
-- TOC entry 11008 (class 2606 OID 80735)
-- Name: getipologeventodiscador getipologeventodiscador_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipologeventodiscador
    ADD CONSTRAINT getipologeventodiscador_pkey PRIMARY KEY (id_getipologeventodiscador_int);

--
-- TOC entry 11010 (class 2606 OID 67494)
-- Name: getipometa getipometa_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipometa
    ADD CONSTRAINT getipometa_pkey PRIMARY KEY (id_getipometa_int);

--
-- TOC entry 11013 (class 2606 OID 67372)
-- Name: getiponotificacao getiponotificacao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getiponotificacao
    ADD CONSTRAINT getiponotificacao_pkey PRIMARY KEY (id_getiponotificacao_int);

--
-- TOC entry 11015 (class 2606 OID 67298)
-- Name: getipopendencianaojuizamento getipopendencianaojuizamento_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipopendencianaojuizamento
    ADD CONSTRAINT getipopendencianaojuizamento_pkey PRIMARY KEY (id_getipopendencianaojuizamento_int);

--
-- TOC entry 11018 (class 2606 OID 67435)
-- Name: getipousuario getipousuario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipousuario
    ADD CONSTRAINT getipousuario_pkey PRIMARY KEY (id_getipousuario_int);

--
-- TOC entry 11020 (class 2606 OID 80761)
-- Name: getriagemveiculo getriagemveiculo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculo
    ADD CONSTRAINT getriagemveiculo_pkey PRIMARY KEY (id_getriagemveiculo_int);

--
-- TOC entry 11022 (class 2606 OID 80759)
-- Name: getriagemveiculostatus getriagemveiculostatus_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculostatus
    ADD CONSTRAINT getriagemveiculostatus_pkey PRIMARY KEY (id_getriagemveiculo_int, id_gestatustriagem_int);

--
-- TOC entry 11024 (class 2606 OID 80785)
-- Name: geturno geturno_codigo_str_key; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geturno
    ADD CONSTRAINT geturno_codigo_str_key UNIQUE (codigo_str);

--
-- TOC entry 11026 (class 2606 OID 80792)
-- Name: geturno geturno_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geturno
    ADD CONSTRAINT geturno_pkey PRIMARY KEY (id_geturno_int);

--
-- TOC entry 11028 (class 2606 OID 66993)
-- Name: geuf geuf_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geuf
    ADD CONSTRAINT geuf_pkey PRIMARY KEY (id_geuf_int);

--
-- TOC entry 11033 (class 2606 OID 63914)
-- Name: geusuario geusuario_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuario
    ADD CONSTRAINT geusuario_pkey PRIMARY KEY (id_geusuario_int);

--
-- TOC entry 11036 (class 2606 OID 63967)
-- Name: geusuario geusuario_unq1; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuario
    ADD CONSTRAINT geusuario_unq1 UNIQUE (codigo_str);

--
-- TOC entry 11041 (class 2606 OID 63945)
-- Name: geusuariocliente geusuariocliente_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariocliente
    ADD CONSTRAINT geusuariocliente_pkey PRIMARY KEY (id_geusuariocliente_int);

--
-- TOC entry 11045 (class 2606 OID 66540)
-- Name: geusuariogrupoprocesso geusuariogrupoprocesso_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariogrupoprocesso
    ADD CONSTRAINT geusuariogrupoprocesso_pkey PRIMARY KEY (id_geusuariogrupoprocesso_int);

--
-- TOC entry 11047 (class 2606 OID 80805)
-- Name: geusuariointegracao geusuariointegracao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariointegracao
    ADD CONSTRAINT geusuariointegracao_pkey PRIMARY KEY (id_geusuariointegracao_int);

--
-- TOC entry 11049 (class 2606 OID 80807)
-- Name: geusuarioramal geusuarioramal_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuarioramal
    ADD CONSTRAINT geusuarioramal_pkey PRIMARY KEY (id_geusuarioramal_int);

--
-- TOC entry 11051 (class 2606 OID 66103)
-- Name: gevalorparametro gevalorparametro_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT gevalorparametro_pkey PRIMARY KEY (id_gevalorparametro_int);

--
-- TOC entry 11053 (class 2606 OID 66105)
-- Name: gevalorparametro gevalorparametro_unq; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT gevalorparametro_unq UNIQUE (id_gegrupoparametro_int, id_geparametro_int, id_geempresa_int, id_gefilial_int, id_gecliente_int, valor_str);

--
-- TOC entry 9438 (class 2606 OID 63811)
-- Name: cbcobrancaautomatica id_cbcobrancaautomatica_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcobrancaautomatica
    ADD CONSTRAINT id_cbcobrancaautomatica_pkey PRIMARY KEY (id_cbcobrancaautomatica_int);

--
-- TOC entry 9726 (class 2606 OID 68304)
-- Name: cbdespesavirtual id_cbdespesavirtual_int_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdespesavirtual
    ADD CONSTRAINT id_cbdespesavirtual_int_pkey PRIMARY KEY (id_cbdespesavirtual_int);

--
-- TOC entry 9781 (class 2606 OID 66856)
-- Name: cbfuncaoboleto id_cbfuncaoboleto_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfuncaoboleto
    ADD CONSTRAINT id_cbfuncaoboleto_pkey UNIQUE (id_cbfuncaoboleto_int);

--
-- TOC entry 10757 (class 2606 OID 67117)
-- Name: gegrupo id_gegrupo_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupo
    ADD CONSTRAINT id_gegrupo_pkey PRIMARY KEY (id_gegrupo_int);

--
-- TOC entry 10802 (class 2606 OID 66631)
-- Name: geliberasitcontato id_geliberasitcontato_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geliberasitcontato
    ADD CONSTRAINT id_geliberasitcontato_pkey PRIMARY KEY (id_geliberasitcontato_int);

--
-- TOC entry 11079 (class 2606 OID 80916)
-- Name: lp lp_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lp
    ADD CONSTRAINT lp_pkey PRIMARY KEY (id_lp);

--
-- TOC entry 11252 (class 2606 OID 67380)
-- Name: remanutencao remanutencao_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.remanutencao
    ADD CONSTRAINT remanutencao_pkey PRIMARY KEY (relatorio_str, data_dat);

--
-- TOC entry 9761 (class 2606 OID 63874)
-- Name: rpa_filaboletoeleva rpa_filaboletoeleva_pk; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rpa_filaboletoeleva
    ADD CONSTRAINT rpa_filaboletoeleva_pk PRIMARY KEY (id_filaboletoeleva_int);

--
-- TOC entry 11266 (class 2606 OID 46235)
-- Name: temp_cbobito_full temp_cbobito_full_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.temp_cbobito_full
    ADD CONSTRAINT temp_cbobito_full_pkey PRIMARY KEY (id_cbobito_int);

--
-- TOC entry 11320 (class 2606 OID 81292)
-- Name: tmpvwdns tmpvwdns_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.tmpvwdns
    ADD CONSTRAINT tmpvwdns_pkey PRIMARY KEY (nome);

--
-- TOC entry 11322 (class 2606 OID 63671)
-- Name: vclogtable vclogtable_pkey; Type: CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.vclogtable
    ADD CONSTRAINT vclogtable_pkey PRIMARY KEY (id);

--
-- TOC entry 11328 (class 1259 OID 67272673)
-- Name: ix_pipeline_run_started_at; Type: INDEX; Schema: etl_control; Owner: -
--

CREATE INDEX ix_pipeline_run_started_at ON etl_control.pipeline_run USING btree (started_at);

--
-- TOC entry 11329 (class 1259 OID 67272672)
-- Name: ix_pipeline_run_status; Type: INDEX; Schema: etl_control; Owner: -
--

CREATE INDEX ix_pipeline_run_status ON etl_control.pipeline_run USING btree (status);

--
-- TOC entry 9318 (class 1259 OID 66541)
-- Name: _telefones_nao_perturbe_geqlcontato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX _telefones_nao_perturbe_geqlcontato_idx1 ON public._telefones_nao_perturbe_geqlcontato USING btree (contato_str);

--
-- TOC entry 9317 (class 1259 OID 45817)
-- Name: _telefones_nao_perturbe_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX _telefones_nao_perturbe_idx2 ON public._telefones_nao_perturbe USING btree (telefone);

--
-- TOC entry 9319 (class 1259 OID 67556)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx0 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 9320 (class 1259 OID 67557)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx1 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_cbbordero_int);

--
-- TOC entry 9321 (class 1259 OID 67558)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx2 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 9322 (class 1259 OID 67559)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx3 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9323 (class 1259 OID 67560)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx4 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_gecliente_int);

--
-- TOC entry 9324 (class 1259 OID 67561)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx5 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_gefilial_int);

--
-- TOC entry 9325 (class 1259 OID 67562)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx6 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9326 (class 1259 OID 67563)
-- Name: agenda_cbitembordero_10_101_41_55_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX agenda_cbitembordero_10_101_41_55_32_idx7 ON public.agenda_cbitembordero_10_101_41_55_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9337 (class 1259 OID 45850)
-- Name: cbatrasocontrato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbatrasocontrato_idx1 ON public.cbatrasocontrato USING btree (id_cbcontrato_int);

--
-- TOC entry 9340 (class 1259 OID 45853)
-- Name: cbatrasocontrato_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbatrasocontrato_unq ON public.cbatrasocontrato USING btree (data_hoje_dat, id_cbcontrato_int);

--
-- TOC entry 9345 (class 1259 OID 63717)
-- Name: cbblacklist_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklist_idx1 ON public.cbblacklist USING btree (id_cbblacklist_int);

--
-- TOC entry 9346 (class 1259 OID 63719)
-- Name: cbblacklist_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklist_idx2 ON public.cbblacklist USING btree (contato_str);

--
-- TOC entry 9347 (class 1259 OID 63721)
-- Name: cbblacklist_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklist_idx3 ON public.cbblacklist USING btree (tipo_contato_str);

--
-- TOC entry 9350 (class 1259 OID 45276)
-- Name: cbblacklistcliente_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklistcliente_idx1 ON public.cbblacklistcliente USING btree (id_cbblacklist_int);

--
-- TOC entry 9351 (class 1259 OID 45317)
-- Name: cbblacklistcliente_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklistcliente_idx2 ON public.cbblacklistcliente USING btree (id_cbblacklistcliente_int);

--
-- TOC entry 9352 (class 1259 OID 45323)
-- Name: cbblacklistcliente_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklistcliente_idx3 ON public.cbblacklistcliente USING btree (id_gecliente_int);

--
-- TOC entry 9353 (class 1259 OID 45364)
-- Name: cbblacklistcliente_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblacklistcliente_idx4 ON public.cbblacklistcliente USING btree (situacao_str);

--
-- TOC entry 9360 (class 1259 OID 67625)
-- Name: cbblbaseregistro_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbblbaseregistro_idx1 ON public.cbblbaseregistro USING btree (id_cbblbase_int, id_cbcontrato_int);

--
-- TOC entry 9373 (class 1259 OID 67693)
-- Name: cbbolategem_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbbolategem_idx1 ON public.cbboletagem USING btree (id_cbitembordero_int);

--
-- TOC entry 9376 (class 1259 OID 67702)
-- Name: cbboletagembaixa_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbboletagembaixa_idx1 ON public.cbboletagembaixa USING btree (id_cbitembordero_int);

--
-- TOC entry 9379 (class 1259 OID 67709)
-- Name: cbboletagemparcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbboletagemparcela_idx1 ON public.cbboletagemparcela USING btree (id_cbboletagem_int);

--
-- TOC entry 9380 (class 1259 OID 67717)
-- Name: cbboletagemparcela_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbboletagemparcela_idx2 ON public.cbboletagemparcela USING btree (id_cbparcela_int);

--
-- TOC entry 9383 (class 1259 OID 67723)
-- Name: cbboletoajustado_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbboletoajustado_idx1 ON public.cbboletoajustado USING btree (id_cbitembordero_int);

--
-- TOC entry 9384 (class 1259 OID 67734)
-- Name: cbboletopagamento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbboletopagamento_idx1 ON public.cbboletopagamento USING btree (id_cbitembordero_int);

--
-- TOC entry 9385 (class 1259 OID 67735)
-- Name: cbboletopagamento_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbboletopagamento_idx2 ON public.cbboletopagamento USING btree (id_cbcontrato_int);

--
-- TOC entry 9386 (class 1259 OID 63921)
-- Name: cbbordero_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbbordero_idx1 ON public.cbbordero USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9387 (class 1259 OID 63922)
-- Name: cbbordero_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbbordero_idx3 ON public.cbbordero USING btree (data_dat);

--
-- TOC entry 9390 (class 1259 OID 63923)
-- Name: cbbordero_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbbordero_unq ON public.cbbordero USING btree (bordero_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9405 (class 1259 OID 67764)
-- Name: cbcalculodescontofatorusuario_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcalculodescontofatorusuario_idx1 ON public.cbcalculodescontofatorusuario USING btree (id_geusuario_int, id_cbcalculodescontofator_int);

--
-- TOC entry 9406 (class 1259 OID 67307)
-- Name: cbcalculoparcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcalculoparcela_idx1 ON public.cbcalculoparcela USING btree (id_cbcalculoparcela_int, id_cbparcela_int);

--
-- TOC entry 9407 (class 1259 OID 67770)
-- Name: cbcalculoparcelaparcelamento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcalculoparcelaparcelamento_idx1 ON public.cbcalculoparcelaparcelamento USING btree (id_cbcalculoparcelaparcelamento_int);

--
-- TOC entry 9408 (class 1259 OID 67771)
-- Name: cbcalculoparcelaparcelamento_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcalculoparcelaparcelamento_idx2 ON public.cbcalculoparcelaparcelamento USING btree (id_cbcalculoparcela_int);

--
-- TOC entry 9415 (class 1259 OID 67053)
-- Name: cbcampanha_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcampanha_unq ON public.cbcampanha USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 9428 (class 1259 OID 66864)
-- Name: cbcartorio_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcartorio_unq ON public.cbcartorio USING btree (codigo_int);

--
-- TOC entry 9431 (class 1259 OID 63801)
-- Name: cbcobrancaautomatica_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcobrancaautomatica_idx1 ON public.cbcobrancaautomatica USING btree (id_cbcontrato_int);

--
-- TOC entry 9432 (class 1259 OID 63802)
-- Name: cbcobrancaautomatica_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcobrancaautomatica_idx2 ON public.cbcobrancaautomatica USING btree (data_retorno_dat);

--
-- TOC entry 9433 (class 1259 OID 63803)
-- Name: cbcobrancaautomatica_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcobrancaautomatica_idx3 ON public.cbcobrancaautomatica USING btree (id_gegrupo_fila_cobranca_int);

--
-- TOC entry 9434 (class 1259 OID 63804)
-- Name: cbcobrancaautomatica_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcobrancaautomatica_idx4 ON public.cbcobrancaautomatica USING btree (id_cbsitcontato_int, id_gegrupo_fila_cobranca_int, data_resolucao_dat, id_geusuario_fila_cobranca_int, data_retorno_dat);

--
-- TOC entry 9435 (class 1259 OID 63805)
-- Name: cbcobrancaautomatica_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcobrancaautomatica_idx5 ON public.cbcobrancaautomatica USING btree (id_gegrupo_fila_cobranca_int, id_cbcontrato_int) WHERE (data_resolucao_dat IS NULL);

--
-- TOC entry 9436 (class 1259 OID 63806)
-- Name: cbcobrancaautomatica_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcobrancaautomatica_idx6 ON public.cbcobrancaautomatica USING btree (id_cbcontrato_int) WHERE (data_resolucao_dat IS NULL);

--
-- TOC entry 9582 (class 1259 OID 68047)
-- Name: cbcontrato_idx101; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx101 ON public.cbcontratoitau USING btree (cpf_str);

--
-- TOC entry 9490 (class 1259 OID 67912)
-- Name: cbcontrato_idx103; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx103 ON public.cbcontratobradesco USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int, nome_str);

--
-- TOC entry 9491 (class 1259 OID 67913)
-- Name: cbcontrato_idx104; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx104 ON public.cbcontratobradesco USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9492 (class 1259 OID 67916)
-- Name: cbcontrato_idx106; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx106 ON public.cbcontratobradesco USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9529 (class 1259 OID 67976)
-- Name: cbcontrato_idx11; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx11 ON public.cbcontratoconfianca USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9682 (class 1259 OID 68200)
-- Name: cbcontrato_idx111; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx111 ON public.cbcontratovw USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9683 (class 1259 OID 68201)
-- Name: cbcontrato_idx113; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx113 ON public.cbcontratovw USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9684 (class 1259 OID 68202)
-- Name: cbcontrato_idx114; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx114 ON public.cbcontratovw USING btree (id_cbcontrato_int, id_cbtiponegocio_int, id_gecliente_int);

--
-- TOC entry 9640 (class 1259 OID 68125)
-- Name: cbcontrato_idx117; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx117 ON public.cbcontratopanam USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9641 (class 1259 OID 68128)
-- Name: cbcontrato_idx119; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx119 ON public.cbcontratopanam USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9642 (class 1259 OID 68129)
-- Name: cbcontrato_idx120; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx120 ON public.cbcontratopanam USING btree (id_cbcontrato_int, id_cbtiponegocio_int, id_gecliente_int);

--
-- TOC entry 9692 (class 1259 OID 68206)
-- Name: cbcontrato_idx125; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx125 ON public.cbcontratozogbi USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9626 (class 1259 OID 68109)
-- Name: cbcontrato_idx137; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx137 ON public.cbcontratomercantil USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9627 (class 1259 OID 68110)
-- Name: cbcontrato_idx139; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx139 ON public.cbcontratomercantil USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9451 (class 1259 OID 67856)
-- Name: cbcontrato_idx143; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx143 ON public.cbcontratoalianca USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9452 (class 1259 OID 67857)
-- Name: cbcontrato_idx145; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx145 ON public.cbcontratoalianca USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9606 (class 1259 OID 68075)
-- Name: cbcontrato_idx149; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx149 ON public.cbcontratoitaubanco USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9607 (class 1259 OID 68081)
-- Name: cbcontrato_idx151; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx151 ON public.cbcontratoitaubanco USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9500 (class 1259 OID 67920)
-- Name: cbcontrato_idx156; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx156 ON public.cbcontratobradescocartao USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9501 (class 1259 OID 67921)
-- Name: cbcontrato_idx158; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx158 ON public.cbcontratobradescocartao USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9599 (class 1259 OID 68065)
-- Name: cbcontrato_idx168; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx168 ON public.cbcontratoitauadversa USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9600 (class 1259 OID 68066)
-- Name: cbcontrato_idx170; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx170 ON public.cbcontratoitauadversa USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9548 (class 1259 OID 67999)
-- Name: cbcontrato_idx18; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx18 ON public.cbcontratocsc USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9549 (class 1259 OID 68004)
-- Name: cbcontrato_idx21; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx21 ON public.cbcontratocsc USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9571 (class 1259 OID 68028)
-- Name: cbcontrato_idx23; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx23 ON public.cbcontratohonda USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9572 (class 1259 OID 68029)
-- Name: cbcontrato_idx25; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx25 ON public.cbcontratohonda USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int, nome_str);

--
-- TOC entry 9573 (class 1259 OID 68030)
-- Name: cbcontrato_idx30; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx30 ON public.cbcontratohonda USING btree (id_cbcontrato_int, id_cbtiponegocio_int, id_gecliente_int);

--
-- TOC entry 9574 (class 1259 OID 68033)
-- Name: cbcontrato_idx42; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx42 ON public.cbcontratohonda USING btree (data_stand_by_dat, id_cbsituacaocontrato_int);

--
-- TOC entry 9650 (class 1259 OID 68141)
-- Name: cbcontrato_idx52; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx52 ON public.cbcontratopecunia USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9651 (class 1259 OID 68142)
-- Name: cbcontrato_idx57; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx57 ON public.cbcontratopecunia USING btree (id_cbtiponegocio_int, id_fimoeda_int, estado_str);

--
-- TOC entry 9565 (class 1259 OID 68023)
-- Name: cbcontrato_idx60; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx60 ON public.cbcontratofiat USING btree (id_gecliente_int);

--
-- TOC entry 9480 (class 1259 OID 67896)
-- Name: cbcontrato_idx68; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx68 ON public.cbcontratobmc USING btree (nome_str);

--
-- TOC entry 9481 (class 1259 OID 67899)
-- Name: cbcontrato_idx69; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx69 ON public.cbcontratobmc USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9482 (class 1259 OID 67900)
-- Name: cbcontrato_idx71; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx71 ON public.cbcontratobmc USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9633 (class 1259 OID 68113)
-- Name: cbcontrato_idx74; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx74 ON public.cbcontratopan USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9634 (class 1259 OID 68114)
-- Name: cbcontrato_idx76; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx76 ON public.cbcontratopan USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9583 (class 1259 OID 68048)
-- Name: cbcontrato_idx79; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx79 ON public.cbcontratoitau USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int, nome_str);

--
-- TOC entry 9584 (class 1259 OID 68049)
-- Name: cbcontrato_idx80; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx80 ON public.cbcontratoitau USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9585 (class 1259 OID 68050)
-- Name: cbcontrato_idx82; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx82 ON public.cbcontratoitau USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9618 (class 1259 OID 68091)
-- Name: cbcontrato_idx87; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx87 ON public.cbcontratoitaupic USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9619 (class 1259 OID 68096)
-- Name: cbcontrato_idx89; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx89 ON public.cbcontratoitaupic USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9530 (class 1259 OID 67977)
-- Name: cbcontrato_idx9; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx9 ON public.cbcontratoconfianca USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9620 (class 1259 OID 68097)
-- Name: cbcontrato_idx90; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idx90 ON public.cbcontratoitaupic USING btree (id_cbcontrato_int, id_cbtiponegocio_int, id_gecliente_int);

--
-- TOC entry 9445 (class 1259 OID 67837)
-- Name: cbcontrato_idxabs_cpf; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontrato_idxabs_cpf ON public.cbcontrato USING btree (public.abs_cpf((cpf_str)::text));

--
-- TOC entry 9448 (class 1259 OID 67838)
-- Name: cbcontrato_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcontrato_unq ON public.cbcontrato USING btree (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9453 (class 1259 OID 67858)
-- Name: cbcontratoalianca_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoalianca_idx1 ON public.cbcontratoalianca USING btree (cpf_str);

--
-- TOC entry 9458 (class 1259 OID 67859)
-- Name: cbcontratoaudac_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoaudac_idx1 ON public.cbcontratoaudac USING btree (codigo_cli_int);

--
-- TOC entry 9459 (class 1259 OID 67860)
-- Name: cbcontratoaudac_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoaudac_idx2 ON public.cbcontratoaudac USING btree (cpf_str);

--
-- TOC entry 9466 (class 1259 OID 67873)
-- Name: cbcontratobbjur_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobbjur_idx1 ON public.cbcontratobbjur USING btree (cpf_str);

--
-- TOC entry 9471 (class 1259 OID 67886)
-- Name: cbcontratobic_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobic_idx1 ON public.cbcontratobic USING btree (cpf_str);

--
-- TOC entry 9483 (class 1259 OID 67901)
-- Name: cbcontratobmc_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobmc_idx1 ON public.cbcontratobmc USING btree (data_envio_dat);

--
-- TOC entry 9484 (class 1259 OID 67902)
-- Name: cbcontratobmc_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobmc_idx2 ON public.cbcontratobmc USING btree (data_recebimento_dat);

--
-- TOC entry 9485 (class 1259 OID 67903)
-- Name: cbcontratobmc_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobmc_idx3 ON public.cbcontratobmc USING btree (cpf_str);

--
-- TOC entry 9493 (class 1259 OID 67917)
-- Name: cbcontratobradesco_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradesco_idx1 ON public.cbcontratobradesco USING btree (data_envio_dat);

--
-- TOC entry 9494 (class 1259 OID 67918)
-- Name: cbcontratobradesco_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradesco_idx2 ON public.cbcontratobradesco USING btree (data_recebimento_dat);

--
-- TOC entry 9495 (class 1259 OID 67919)
-- Name: cbcontratobradesco_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradesco_idx3 ON public.cbcontratobradesco USING btree (cpf_str);

--
-- TOC entry 9502 (class 1259 OID 67922)
-- Name: cbcontratobradescocartao_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradescocartao_idx3 ON public.cbcontratobradescocartao USING btree (cpf_str);

--
-- TOC entry 9511 (class 1259 OID 67948)
-- Name: cbcontratobradescocorporativo_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradescocorporativo_idx1 ON public.cbcontratobradescocorporativo USING btree (cpf_str);

--
-- TOC entry 9512 (class 1259 OID 67949)
-- Name: cbcontratobradescocorporativo_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradescocorporativo_idx2 ON public.cbcontratobradescocorporativo USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9513 (class 1259 OID 67951)
-- Name: cbcontratobradescocorporativo_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradescocorporativo_idx4 ON public.cbcontratobradescocorporativo USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9514 (class 1259 OID 67953)
-- Name: cbcontratobradescocorporativo_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradescocorporativo_idx6 ON public.cbcontratobradescocorporativo USING btree (contrato_str);

--
-- TOC entry 9519 (class 1259 OID 67955)
-- Name: cbcontratobradescocredimob_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratobradescocredimob_idx1 ON public.cbcontratobradescocredimob USING btree (cpf_str);

--
-- TOC entry 9524 (class 1259 OID 67967)
-- Name: cbcontratocaixa_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocaixa_idx1 ON public.cbcontratocaixa USING btree (cpf_str);

--
-- TOC entry 9531 (class 1259 OID 67980)
-- Name: cbcontratoconfianca_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoconfianca_idx1 ON public.cbcontratoconfianca USING btree (cpf_str);

--
-- TOC entry 9534 (class 1259 OID 67981)
-- Name: cbcontratoconfianca_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcontratoconfianca_unq ON public.cbcontratoconfianca USING btree (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9449 (class 1259 OID 67839)
-- Name: cbcontratocpf_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocpf_idx1 ON public.cbcontrato USING btree (cpf_str);

--
-- TOC entry 9535 (class 1259 OID 67982)
-- Name: cbcontratocredibel_abs_cpf_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocredibel_abs_cpf_idx ON public.cbcontratocredibel USING btree (public.abs_cpf((cpf_str)::text));

--
-- TOC entry 9536 (class 1259 OID 67985)
-- Name: cbcontratocredibel_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocredibel_idx1 ON public.cbcontratocredibel USING btree (nome_str);

--
-- TOC entry 9537 (class 1259 OID 67986)
-- Name: cbcontratocredibel_idx10; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocredibel_idx10 ON public.cbcontratocredibel USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9538 (class 1259 OID 67987)
-- Name: cbcontratocredibel_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocredibel_idx2 ON public.cbcontratocredibel USING btree (cpf_str);

--
-- TOC entry 9539 (class 1259 OID 67988)
-- Name: cbcontratocredibel_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocredibel_idx3 ON public.cbcontratocredibel USING btree (contrato_str);

--
-- TOC entry 9550 (class 1259 OID 68005)
-- Name: cbcontratocsc_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratocsc_idx1 ON public.cbcontratocsc USING btree (cpf_str);

--
-- TOC entry 9553 (class 1259 OID 68006)
-- Name: cbcontratocsc_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcontratocsc_unq ON public.cbcontratocsc USING btree (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9554 (class 1259 OID 63722)
-- Name: cbcontratoeleva_abs_cpf_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_abs_cpf_idx ON public.cbcontratoeleva USING btree (public.abs_cpf((cpf_str)::text));

--
-- TOC entry 11324 (class 1259 OID 66749201)
-- Name: cbcontratoeleva_fila_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_fila_idx1 ON public.cbcontratoeleva_fila USING btree (id_cbcontrato_int);

--
-- TOC entry 11325 (class 1259 OID 66749202)
-- Name: cbcontratoeleva_fila_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_fila_idx2 ON public.cbcontratoeleva_fila USING btree (id_cbtiponegocio_int);

--
-- TOC entry 11326 (class 1259 OID 66749203)
-- Name: cbcontratoeleva_fila_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_fila_idx3 ON public.cbcontratoeleva_fila USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 11327 (class 1259 OID 66749204)
-- Name: cbcontratoeleva_fila_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_fila_idx4 ON public.cbcontratoeleva_fila USING btree (contrato_str);

--
-- TOC entry 9555 (class 1259 OID 63727)
-- Name: cbcontratoeleva_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_idx1 ON public.cbcontratoeleva USING btree (nome_str);

--
-- TOC entry 9556 (class 1259 OID 63729)
-- Name: cbcontratoeleva_idx10; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_idx10 ON public.cbcontratoeleva USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9557 (class 1259 OID 63736)
-- Name: cbcontratoeleva_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_idx2 ON public.cbcontratoeleva USING btree (cpf_str);

--
-- TOC entry 9558 (class 1259 OID 63738)
-- Name: cbcontratoeleva_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoeleva_idx3 ON public.cbcontratoeleva USING btree (contrato_str);

--
-- TOC entry 9566 (class 1259 OID 68024)
-- Name: cbcontratofiat_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratofiat_idx1 ON public.cbcontratofiat USING btree (cpf_str);

--
-- TOC entry 9567 (class 1259 OID 68025)
-- Name: cbcontratofiat_idx42; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratofiat_idx42 ON public.cbcontratofiat USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9570 (class 1259 OID 68026)
-- Name: cbcontratofiat_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcontratofiat_unq ON public.cbcontratofiat USING btree (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9575 (class 1259 OID 68034)
-- Name: cbcontratohonda_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratohonda_idx1 ON public.cbcontratohonda USING btree (data_envio_dat);

--
-- TOC entry 9576 (class 1259 OID 68035)
-- Name: cbcontratohonda_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratohonda_idx2 ON public.cbcontratohonda USING btree (data_recebimento_dat);

--
-- TOC entry 9577 (class 1259 OID 68036)
-- Name: cbcontratohonda_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratohonda_idx3 ON public.cbcontratohonda USING btree (cpf_str);

--
-- TOC entry 9578 (class 1259 OID 68037)
-- Name: cbcontratohonda_idx41; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratohonda_idx41 ON public.cbcontratohonda USING btree (id_cbtiponegocio_int, id_fimoeda_int, estado_str);

--
-- TOC entry 9581 (class 1259 OID 68038)
-- Name: cbcontratohonda_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcontratohonda_unq ON public.cbcontratohonda USING btree (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9586 (class 1259 OID 68051)
-- Name: cbcontratoitau_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitau_idx1 ON public.cbcontratoitau USING btree (data_envio_dat);

--
-- TOC entry 9587 (class 1259 OID 68052)
-- Name: cbcontratoitau_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitau_idx2 ON public.cbcontratoitau USING btree (data_recebimento_dat);

--
-- TOC entry 9592 (class 1259 OID 68053)
-- Name: cbcontratoitauacaoadv_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitauacaoadv_idx1 ON public.cbcontratoitauacaoadv USING btree (cpf_str);

--
-- TOC entry 9593 (class 1259 OID 68054)
-- Name: cbcontratoitauacaoadv_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitauacaoadv_idx2 ON public.cbcontratoitauacaoadv USING btree (id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9594 (class 1259 OID 68055)
-- Name: cbcontratoitauacaoadv_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitauacaoadv_idx4 ON public.cbcontratoitauacaoadv USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9601 (class 1259 OID 68067)
-- Name: cbcontratoitauadversa_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitauadversa_idx1 ON public.cbcontratoitauadversa USING btree (cpf_str);

--
-- TOC entry 9608 (class 1259 OID 68082)
-- Name: cbcontratoitaubanco_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitaubanco_idx1 ON public.cbcontratoitaubanco USING btree (contrato_str);

--
-- TOC entry 9613 (class 1259 OID 68083)
-- Name: cbcontratoitaucredimob_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitaucredimob_idx1 ON public.cbcontratoitaucredimob USING btree (cpf_str);

--
-- TOC entry 9621 (class 1259 OID 68098)
-- Name: cbcontratoitaupic_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratoitaupic_idx1 ON public.cbcontratoitaupic USING btree (cpf_str);

--
-- TOC entry 9628 (class 1259 OID 68112)
-- Name: cbcontratomercantil_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratomercantil_idx1 ON public.cbcontratomercantil USING btree (cpf_str);

--
-- TOC entry 9635 (class 1259 OID 68115)
-- Name: cbcontratopan_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopan_idx1 ON public.cbcontratopan USING btree (cpf_str);

--
-- TOC entry 9643 (class 1259 OID 68130)
-- Name: cbcontratopanam_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopanam_idx1 ON public.cbcontratopanam USING btree (data_envio_dat);

--
-- TOC entry 9644 (class 1259 OID 68131)
-- Name: cbcontratopanam_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopanam_idx3 ON public.cbcontratopanam USING btree (nome_str);

--
-- TOC entry 9645 (class 1259 OID 68132)
-- Name: cbcontratopanam_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopanam_idx4 ON public.cbcontratopanam USING btree (cpf_str);

--
-- TOC entry 9654 (class 1259 OID 68145)
-- Name: cbcontratopecunia_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbcontratopecunia_unq ON public.cbcontratopecunia USING btree (contrato_str, id_cbtiponegocio_int, id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 9655 (class 1259 OID 68146)
-- Name: cbcontratopirelli_abs_cpf_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopirelli_abs_cpf_idx ON public.cbcontratopirelli USING btree (public.abs_cpf((cpf_str)::text));

--
-- TOC entry 9656 (class 1259 OID 68147)
-- Name: cbcontratopirelli_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopirelli_idx1 ON public.cbcontratopirelli USING btree (nome_str);

--
-- TOC entry 9657 (class 1259 OID 68150)
-- Name: cbcontratopirelli_idx10; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopirelli_idx10 ON public.cbcontratopirelli USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9658 (class 1259 OID 68151)
-- Name: cbcontratopirelli_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopirelli_idx2 ON public.cbcontratopirelli USING btree (cpf_str);

--
-- TOC entry 9659 (class 1259 OID 68152)
-- Name: cbcontratopirelli_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratopirelli_idx3 ON public.cbcontratopirelli USING btree (contrato_str);

--
-- TOC entry 9685 (class 1259 OID 68203)
-- Name: cbcontratosantander_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratosantander_idx1 ON public.cbcontratovw USING btree (cpf_str);

--
-- TOC entry 9686 (class 1259 OID 68204)
-- Name: cbcontratosantander_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratosantander_idx2 ON public.cbcontratovw USING btree (nome_str);

--
-- TOC entry 9687 (class 1259 OID 68205)
-- Name: cbcontratovw_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratovw_idx1 ON public.cbcontratovw USING btree (cpf_str);

--
-- TOC entry 9693 (class 1259 OID 68207)
-- Name: cbcontratozogbi_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbcontratozogbi_idx1 ON public.cbcontratozogbi USING btree (cpf_str);

--
-- TOC entry 9714 (class 1259 OID 68284)
-- Name: cbdespesa_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdespesa_idx2 ON public.cbdespesa USING btree (id_cbvalortipodespesa_int, data_envio_dat, situacao_str, id_cbcontrato_int);

--
-- TOC entry 9715 (class 1259 OID 68285)
-- Name: cbdespesa_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdespesa_idx3 ON public.cbdespesa USING btree (id_cbcontrato_int, situacao_str);

--
-- TOC entry 9716 (class 1259 OID 68286)
-- Name: cbdespesa_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdespesa_idx4 ON public.cbdespesa USING btree (data_ar_dat);

--
-- TOC entry 9717 (class 1259 OID 68287)
-- Name: cbdespesa_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdespesa_idx5 ON public.cbdespesa USING btree (data_retorno_dat);

--
-- TOC entry 9720 (class 1259 OID 68288)
-- Name: cbdespesa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbdespesa_unq ON public.cbdespesa USING btree (data_dat, id_cbcontrato_int, id_cbvalortipodespesa_int);

--
-- TOC entry 9724 (class 1259 OID 68302)
-- Name: cbdespesaendereco_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdespesaendereco_idx1 ON public.cbdespesaendereco USING btree (id_cbdespesa_int);

--
-- TOC entry 9729 (class 1259 OID 66231)
-- Name: cbdetalhelay_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbdetalhelay_unq ON public.cbdetalhelay USING btree (id_cbmodlayout_int, codigo_str, registro_str);

--
-- TOC entry 9730 (class 1259 OID 63773)
-- Name: cbdistribparcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdistribparcela_idx1 ON public.cbdistribparcela USING btree (data_pre_distrib_dat);

--
-- TOC entry 9731 (class 1259 OID 63774)
-- Name: cbdistribparcela_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbdistribparcela_idx2 ON public.cbdistribparcela USING btree (id_cbparcela_int);

--
-- TOC entry 9736 (class 1259 OID 68327)
-- Name: cbdistribuidorcliente_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbdistribuidorcliente_unq ON public.cbdistribuidorcliente USING btree (codigo_str, id_gecliente_int);

--
-- TOC entry 9732 (class 1259 OID 63775)
-- Name: cbdistrparcela_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbdistrparcela_unq ON public.cbdistribparcela USING btree (id_cbcontrato_int, id_cbparcela_int, data_pre_distrib_dat);

--
-- TOC entry 9739 (class 1259 OID 65880)
-- Name: cbespeciepagamento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbespeciepagamento_idx1 ON public.cbespeciepagamento USING btree (data_deposito_dat);

--
-- TOC entry 9740 (class 1259 OID 65884)
-- Name: cbespeciepagamento_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbespeciepagamento_idx2 ON public.cbespeciepagamento USING btree (data_repasse_dat, situacao_int, id_cbpagamento_int);

--
-- TOC entry 9743 (class 1259 OID 65890)
-- Name: cbespeciepagamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbespeciepagamento_unq ON public.cbespeciepagamento USING btree (id_cbpagamento_int, sequencia_int);

--
-- TOC entry 9748 (class 1259 OID 68353)
-- Name: cbestoque_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbestoque_idx1 ON public.cbestoque USING btree (data_dat);

--
-- TOC entry 9749 (class 1259 OID 68355)
-- Name: cbestoque_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbestoque_idx2 ON public.cbestoque USING btree (id_cbparcela_int);

--
-- TOC entry 9750 (class 1259 OID 68356)
-- Name: cbestoque_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbestoque_idx3 ON public.cbestoque USING btree (id_cbcontrato_int);

--
-- TOC entry 9755 (class 1259 OID 67482)
-- Name: cbetapa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbetapa_unq ON public.cbetapa USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 9764 (class 1259 OID 68394)
-- Name: cbfilialcliente_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbfilialcliente_unq ON public.cbfilialcliente USING btree (codigo_str, id_gecliente_int);

--
-- TOC entry 9765 (class 1259 OID 45365)
-- Name: cbfollowup_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbfollowup_idx1 ON public.cbfollowup USING btree (id_cbcontrato_int);

--
-- TOC entry 9766 (class 1259 OID 45391)
-- Name: cbfollowup_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbfollowup_idx2 ON public.cbfollowup USING btree (id_cbcontrato_int, id_cbsitcontato_int);

--
-- TOC entry 9767 (class 1259 OID 45417)
-- Name: cbfollowup_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbfollowup_idx3 ON public.cbfollowup USING btree (id_cbparcela_int);

--
-- TOC entry 9768 (class 1259 OID 45440)
-- Name: cbfollowup_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbfollowup_idx4 ON public.cbfollowup USING btree (data_dat, tipo_contato_str);

--
-- TOC entry 9774 (class 1259 OID 68374)
-- Name: cbfollowupcliente_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbfollowupcliente_idx1 ON public.cbfollowupcliente USING btree (id_cbcontrato_int);

--
-- TOC entry 9777 (class 1259 OID 67296)
-- Name: cbformapagamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbformapagamento_unq ON public.cbformapagamento USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 9786 (class 1259 OID 68418)
-- Name: cbgravacaofollowup_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbgravacaofollowup_idx1 ON public.cbgravacaofollowup USING btree (id_cbfollowup_int);

--
-- TOC entry 9787 (class 1259 OID 68419)
-- Name: cbgravacaofollowup_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbgravacaofollowup_idx2 ON public.cbgravacaofollowup USING btree (id_cbgravacao_int);

--
-- TOC entry 9788 (class 1259 OID 68420)
-- Name: cbgravacaofollowup_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbgravacaofollowup_idx3 ON public.cbgravacaofollowup USING btree (id_cbfollowup_int, id_cbgravacao_int);

--
-- TOC entry 9791 (class 1259 OID 68412)
-- Name: cbgravacaosiga_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbgravacaosiga_idx1 ON public.cbgravacaosiga USING btree (id_cbgravacaosiga_int);

--
-- TOC entry 9792 (class 1259 OID 68421)
-- Name: cbgravacaosiga_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbgravacaosiga_idx2 ON public.cbgravacaosiga USING btree (id_cbfollowup_int);

--
-- TOC entry 9799 (class 1259 OID 68462)
-- Name: cbinstrucao_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbinstrucao_unq ON public.cbinstrucao USING btree (codigo_str);

--
-- TOC entry 9802 (class 1259 OID 68455)
-- Name: cbinstrucaobanco_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbinstrucaobanco_unq ON public.cbinstrucaobanco USING btree (id_fibanco_int, comando_str);

--
-- TOC entry 9805 (class 1259 OID 68463)
-- Name: cbinstrucaocobranca_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbinstrucaocobranca_unq ON public.cbinstrucaocobranca USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 9814 (class 1259 OID 68464)
-- Name: cbitembordero_10_101_41_100_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx0 ON public.cbitembordero_10_101_41_100_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 9815 (class 1259 OID 68465)
-- Name: cbitembordero_10_101_41_100_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx1 ON public.cbitembordero_10_101_41_100_32 USING btree (id_cbbordero_int);

--
-- TOC entry 9816 (class 1259 OID 68466)
-- Name: cbitembordero_10_101_41_100_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx2 ON public.cbitembordero_10_101_41_100_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 9817 (class 1259 OID 68467)
-- Name: cbitembordero_10_101_41_100_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx3 ON public.cbitembordero_10_101_41_100_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9818 (class 1259 OID 68468)
-- Name: cbitembordero_10_101_41_100_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx4 ON public.cbitembordero_10_101_41_100_32 USING btree (id_gecliente_int);

--
-- TOC entry 9819 (class 1259 OID 68469)
-- Name: cbitembordero_10_101_41_100_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx5 ON public.cbitembordero_10_101_41_100_32 USING btree (id_gefilial_int);

--
-- TOC entry 9820 (class 1259 OID 68470)
-- Name: cbitembordero_10_101_41_100_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx6 ON public.cbitembordero_10_101_41_100_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9821 (class 1259 OID 68471)
-- Name: cbitembordero_10_101_41_100_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_100_32_idx7 ON public.cbitembordero_10_101_41_100_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9822 (class 1259 OID 68477)
-- Name: cbitembordero_10_101_41_165_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx0 ON public.cbitembordero_10_101_41_165_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 9823 (class 1259 OID 68478)
-- Name: cbitembordero_10_101_41_165_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx1 ON public.cbitembordero_10_101_41_165_32 USING btree (id_cbbordero_int);

--
-- TOC entry 9824 (class 1259 OID 68479)
-- Name: cbitembordero_10_101_41_165_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx2 ON public.cbitembordero_10_101_41_165_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 9825 (class 1259 OID 68480)
-- Name: cbitembordero_10_101_41_165_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx3 ON public.cbitembordero_10_101_41_165_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9826 (class 1259 OID 68481)
-- Name: cbitembordero_10_101_41_165_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx4 ON public.cbitembordero_10_101_41_165_32 USING btree (id_gecliente_int);

--
-- TOC entry 9827 (class 1259 OID 68482)
-- Name: cbitembordero_10_101_41_165_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx5 ON public.cbitembordero_10_101_41_165_32 USING btree (id_gefilial_int);

--
-- TOC entry 9828 (class 1259 OID 68483)
-- Name: cbitembordero_10_101_41_165_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx6 ON public.cbitembordero_10_101_41_165_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9829 (class 1259 OID 68484)
-- Name: cbitembordero_10_101_41_165_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_165_32_idx7 ON public.cbitembordero_10_101_41_165_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9830 (class 1259 OID 68476)
-- Name: cbitembordero_10_101_41_169_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx0 ON public.cbitembordero_10_101_41_169_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 9831 (class 1259 OID 68485)
-- Name: cbitembordero_10_101_41_169_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx1 ON public.cbitembordero_10_101_41_169_32 USING btree (id_cbbordero_int);

--
-- TOC entry 9832 (class 1259 OID 68486)
-- Name: cbitembordero_10_101_41_169_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx2 ON public.cbitembordero_10_101_41_169_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 9833 (class 1259 OID 68487)
-- Name: cbitembordero_10_101_41_169_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx3 ON public.cbitembordero_10_101_41_169_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9834 (class 1259 OID 68488)
-- Name: cbitembordero_10_101_41_169_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx4 ON public.cbitembordero_10_101_41_169_32 USING btree (id_gecliente_int);

--
-- TOC entry 9835 (class 1259 OID 68489)
-- Name: cbitembordero_10_101_41_169_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx5 ON public.cbitembordero_10_101_41_169_32 USING btree (id_gefilial_int);

--
-- TOC entry 9836 (class 1259 OID 68490)
-- Name: cbitembordero_10_101_41_169_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx6 ON public.cbitembordero_10_101_41_169_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9837 (class 1259 OID 68491)
-- Name: cbitembordero_10_101_41_169_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_169_32_idx7 ON public.cbitembordero_10_101_41_169_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9838 (class 1259 OID 68495)
-- Name: cbitembordero_10_101_41_25_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx0 ON public.cbitembordero_10_101_41_25_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 9839 (class 1259 OID 68496)
-- Name: cbitembordero_10_101_41_25_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx1 ON public.cbitembordero_10_101_41_25_32 USING btree (id_cbbordero_int);

--
-- TOC entry 9840 (class 1259 OID 68497)
-- Name: cbitembordero_10_101_41_25_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx2 ON public.cbitembordero_10_101_41_25_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 9841 (class 1259 OID 68498)
-- Name: cbitembordero_10_101_41_25_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx3 ON public.cbitembordero_10_101_41_25_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9842 (class 1259 OID 68499)
-- Name: cbitembordero_10_101_41_25_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx4 ON public.cbitembordero_10_101_41_25_32 USING btree (id_gecliente_int);

--
-- TOC entry 9843 (class 1259 OID 68500)
-- Name: cbitembordero_10_101_41_25_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx5 ON public.cbitembordero_10_101_41_25_32 USING btree (id_gefilial_int);

--
-- TOC entry 9844 (class 1259 OID 68503)
-- Name: cbitembordero_10_101_41_25_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx6 ON public.cbitembordero_10_101_41_25_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9845 (class 1259 OID 68504)
-- Name: cbitembordero_10_101_41_25_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_25_32_idx7 ON public.cbitembordero_10_101_41_25_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9846 (class 1259 OID 68505)
-- Name: cbitembordero_10_101_41_55_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx0 ON public.cbitembordero_10_101_41_55_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 9847 (class 1259 OID 68506)
-- Name: cbitembordero_10_101_41_55_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx1 ON public.cbitembordero_10_101_41_55_32 USING btree (id_cbbordero_int);

--
-- TOC entry 9848 (class 1259 OID 68507)
-- Name: cbitembordero_10_101_41_55_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx2 ON public.cbitembordero_10_101_41_55_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 9849 (class 1259 OID 68508)
-- Name: cbitembordero_10_101_41_55_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx3 ON public.cbitembordero_10_101_41_55_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9850 (class 1259 OID 68509)
-- Name: cbitembordero_10_101_41_55_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx4 ON public.cbitembordero_10_101_41_55_32 USING btree (id_gecliente_int);

--
-- TOC entry 9851 (class 1259 OID 68510)
-- Name: cbitembordero_10_101_41_55_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx5 ON public.cbitembordero_10_101_41_55_32 USING btree (id_gefilial_int);

--
-- TOC entry 9852 (class 1259 OID 68511)
-- Name: cbitembordero_10_101_41_55_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx6 ON public.cbitembordero_10_101_41_55_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9853 (class 1259 OID 68512)
-- Name: cbitembordero_10_101_41_55_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_10_101_41_55_32_idx7 ON public.cbitembordero_10_101_41_55_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9854 (class 1259 OID 65867)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx0 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_cbitembordero_int);

--
-- TOC entry 9855 (class 1259 OID 65868)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx1 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_cbbordero_int);

--
-- TOC entry 9856 (class 1259 OID 65869)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx2 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_cbcontrato_int);

--
-- TOC entry 9857 (class 1259 OID 65870)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx3 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9858 (class 1259 OID 65871)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx4 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_gecliente_int);

--
-- TOC entry 9859 (class 1259 OID 65872)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx5 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_gefilial_int);

--
-- TOC entry 9860 (class 1259 OID 65873)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx6 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9861 (class 1259 OID 65879)
-- Name: cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_108_8_138_32_45_2_2782_idx7 ON public.cbitembordero_emissao_10_108_8_138_32_45_2_2782 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9862 (class 1259 OID 81369)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx0 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_cbitembordero_int);

--
-- TOC entry 9863 (class 1259 OID 81370)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx1 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_cbbordero_int);

--
-- TOC entry 9864 (class 1259 OID 81371)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx2 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_cbcontrato_int);

--
-- TOC entry 9865 (class 1259 OID 81372)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx3 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9866 (class 1259 OID 81373)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx4 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_gecliente_int);

--
-- TOC entry 9867 (class 1259 OID 81374)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx5 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_gefilial_int);

--
-- TOC entry 9868 (class 1259 OID 81375)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx6 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9869 (class 1259 OID 81376)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_11_11521_idx7 ON public.cbitembordero_emissao_10_114_25_31_32_0_11_11521 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9870 (class 1259 OID 81361)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx0 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_cbitembordero_int);

--
-- TOC entry 9871 (class 1259 OID 81362)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx1 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_cbbordero_int);

--
-- TOC entry 9872 (class 1259 OID 81363)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx2 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_cbcontrato_int);

--
-- TOC entry 9873 (class 1259 OID 81364)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx3 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9874 (class 1259 OID 81365)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx4 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_gecliente_int);

--
-- TOC entry 9875 (class 1259 OID 81366)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx5 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_gefilial_int);

--
-- TOC entry 9876 (class 1259 OID 81367)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx6 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9877 (class 1259 OID 81368)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13024_idx7 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13024 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9878 (class 1259 OID 81377)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx0 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_cbitembordero_int);

--
-- TOC entry 9879 (class 1259 OID 81378)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx1 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_cbbordero_int);

--
-- TOC entry 9880 (class 1259 OID 81379)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx2 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_cbcontrato_int);

--
-- TOC entry 9881 (class 1259 OID 81380)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx3 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9882 (class 1259 OID 81381)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx4 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_gecliente_int);

--
-- TOC entry 9883 (class 1259 OID 81382)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx5 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_gefilial_int);

--
-- TOC entry 9884 (class 1259 OID 81383)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx6 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9885 (class 1259 OID 81384)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_13_13232_idx7 ON public.cbitembordero_emissao_10_114_25_31_32_0_13_13232 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9886 (class 1259 OID 81345)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx0 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_cbitembordero_int);

--
-- TOC entry 9887 (class 1259 OID 81346)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx1 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_cbbordero_int);

--
-- TOC entry 9888 (class 1259 OID 81347)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx2 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_cbcontrato_int);

--
-- TOC entry 9889 (class 1259 OID 81348)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx3 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9890 (class 1259 OID 81349)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx4 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_gecliente_int);

--
-- TOC entry 9891 (class 1259 OID 81350)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx5 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_gefilial_int);

--
-- TOC entry 9892 (class 1259 OID 81351)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx6 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9893 (class 1259 OID 81352)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9172_idx7 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9172 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9894 (class 1259 OID 81353)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx0 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_cbitembordero_int);

--
-- TOC entry 9895 (class 1259 OID 81354)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx1 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_cbbordero_int);

--
-- TOC entry 9896 (class 1259 OID 81355)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx2 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_cbcontrato_int);

--
-- TOC entry 9897 (class 1259 OID 81356)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx3 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9898 (class 1259 OID 81357)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx4 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_gecliente_int);

--
-- TOC entry 9899 (class 1259 OID 81358)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx5 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_gefilial_int);

--
-- TOC entry 9900 (class 1259 OID 81359)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx6 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9901 (class 1259 OID 81360)
-- Name: cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_114_25_31_32_0_9_9504_idx7 ON public.cbitembordero_emissao_10_114_25_31_32_0_9_9504 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9902 (class 1259 OID 66942)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx0 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_cbitembordero_int);

--
-- TOC entry 9903 (class 1259 OID 66944)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx1 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_cbbordero_int);

--
-- TOC entry 9904 (class 1259 OID 66945)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx2 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_cbcontrato_int);

--
-- TOC entry 9905 (class 1259 OID 66946)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx3 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9906 (class 1259 OID 66947)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx4 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_gecliente_int);

--
-- TOC entry 9907 (class 1259 OID 66948)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx5 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_gefilial_int);

--
-- TOC entry 9908 (class 1259 OID 66949)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx6 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9909 (class 1259 OID 66950)
-- Name: cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_14_13_13769_idx7 ON public.cbitembordero_emissao_10_130_61_13_32_14_13_13769 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9910 (class 1259 OID 66442)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx0 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_cbitembordero_int);

--
-- TOC entry 9911 (class 1259 OID 66443)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx1 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_cbbordero_int);

--
-- TOC entry 9912 (class 1259 OID 66444)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx2 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_cbcontrato_int);

--
-- TOC entry 9913 (class 1259 OID 66445)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx3 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9914 (class 1259 OID 66446)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx4 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_gecliente_int);

--
-- TOC entry 9915 (class 1259 OID 66447)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx5 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_gefilial_int);

--
-- TOC entry 9916 (class 1259 OID 66452)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx6 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9917 (class 1259 OID 66453)
-- Name: cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_22_29_29390_idx7 ON public.cbitembordero_emissao_10_130_61_13_32_22_29_29390 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9918 (class 1259 OID 66454)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx0 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_cbitembordero_int);

--
-- TOC entry 9919 (class 1259 OID 66455)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx1 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_cbbordero_int);

--
-- TOC entry 9920 (class 1259 OID 66456)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx2 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_cbcontrato_int);

--
-- TOC entry 9921 (class 1259 OID 66457)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx3 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9922 (class 1259 OID 66458)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx4 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_gecliente_int);

--
-- TOC entry 9923 (class 1259 OID 66459)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx5 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_gefilial_int);

--
-- TOC entry 9924 (class 1259 OID 66460)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx6 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9925 (class 1259 OID 66461)
-- Name: cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_27_9_9199_idx7 ON public.cbitembordero_emissao_10_130_61_13_32_27_9_9199 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9926 (class 1259 OID 66242)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx0 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_cbitembordero_int);

--
-- TOC entry 9927 (class 1259 OID 66243)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx1 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_cbbordero_int);

--
-- TOC entry 9928 (class 1259 OID 66244)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx2 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_cbcontrato_int);

--
-- TOC entry 9929 (class 1259 OID 66251)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx3 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9930 (class 1259 OID 66252)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx4 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_gecliente_int);

--
-- TOC entry 9931 (class 1259 OID 66253)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx5 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_gefilial_int);

--
-- TOC entry 9932 (class 1259 OID 66254)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx6 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9933 (class 1259 OID 66255)
-- Name: cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_38_37_37561_idx7 ON public.cbitembordero_emissao_10_130_61_13_32_38_37_37561 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9934 (class 1259 OID 66128)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx0 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_cbitembordero_int);

--
-- TOC entry 9935 (class 1259 OID 66129)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx1 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_cbbordero_int);

--
-- TOC entry 9936 (class 1259 OID 66130)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx2 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_cbcontrato_int);

--
-- TOC entry 9937 (class 1259 OID 66131)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx3 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9938 (class 1259 OID 66132)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx4 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_gecliente_int);

--
-- TOC entry 9939 (class 1259 OID 66134)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx5 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_gefilial_int);

--
-- TOC entry 9940 (class 1259 OID 66135)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx6 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9941 (class 1259 OID 66136)
-- Name: cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_13_32_46_43_43764_idx7 ON public.cbitembordero_emissao_10_130_61_13_32_46_43_43764 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9942 (class 1259 OID 65898)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx0 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_cbitembordero_int);

--
-- TOC entry 9943 (class 1259 OID 65899)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx1 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_cbbordero_int);

--
-- TOC entry 9944 (class 1259 OID 65900)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx2 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_cbcontrato_int);

--
-- TOC entry 9945 (class 1259 OID 65901)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx3 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9946 (class 1259 OID 65902)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx4 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_gecliente_int);

--
-- TOC entry 9947 (class 1259 OID 65903)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx5 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_gefilial_int);

--
-- TOC entry 9948 (class 1259 OID 65904)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx6 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9949 (class 1259 OID 65905)
-- Name: cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_29_25_25614_idx7 ON public.cbitembordero_emissao_10_130_61_165_32_29_25_25614 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9950 (class 1259 OID 66305)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx0 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_cbitembordero_int);

--
-- TOC entry 9951 (class 1259 OID 66306)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx1 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_cbbordero_int);

--
-- TOC entry 9952 (class 1259 OID 66307)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx2 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_cbcontrato_int);

--
-- TOC entry 9953 (class 1259 OID 66308)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx3 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9954 (class 1259 OID 66310)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx4 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_gecliente_int);

--
-- TOC entry 9955 (class 1259 OID 66311)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx5 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_gefilial_int);

--
-- TOC entry 9956 (class 1259 OID 66312)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx6 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9957 (class 1259 OID 66313)
-- Name: cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_40_57_57083_idx7 ON public.cbitembordero_emissao_10_130_61_165_32_40_57_57083 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9958 (class 1259 OID 66314)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx0 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_cbitembordero_int);

--
-- TOC entry 9959 (class 1259 OID 66315)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx1 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_cbbordero_int);

--
-- TOC entry 9960 (class 1259 OID 66316)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx2 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_cbcontrato_int);

--
-- TOC entry 9961 (class 1259 OID 66317)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx3 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9962 (class 1259 OID 66318)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx4 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_gecliente_int);

--
-- TOC entry 9963 (class 1259 OID 66319)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx5 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_gefilial_int);

--
-- TOC entry 9964 (class 1259 OID 66320)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx6 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9965 (class 1259 OID 66321)
-- Name: cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_44_31_31345_idx7 ON public.cbitembordero_emissao_10_130_61_165_32_44_31_31345 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9966 (class 1259 OID 66322)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx0 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_cbitembordero_int);

--
-- TOC entry 9967 (class 1259 OID 66323)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx1 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_cbbordero_int);

--
-- TOC entry 9968 (class 1259 OID 66324)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx2 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_cbcontrato_int);

--
-- TOC entry 9969 (class 1259 OID 66326)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx3 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9970 (class 1259 OID 66327)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx4 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_gecliente_int);

--
-- TOC entry 9971 (class 1259 OID 66334)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx5 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_gefilial_int);

--
-- TOC entry 9972 (class 1259 OID 66335)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx6 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9973 (class 1259 OID 66336)
-- Name: cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_49_52_52324_idx7 ON public.cbitembordero_emissao_10_130_61_165_32_49_52_52324 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9974 (class 1259 OID 65914)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx0 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_cbitembordero_int);

--
-- TOC entry 9975 (class 1259 OID 65915)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx1 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_cbbordero_int);

--
-- TOC entry 9976 (class 1259 OID 65916)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx2 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_cbcontrato_int);

--
-- TOC entry 9977 (class 1259 OID 65917)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx3 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9978 (class 1259 OID 65922)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx4 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_gecliente_int);

--
-- TOC entry 9979 (class 1259 OID 65923)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx5 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_gefilial_int);

--
-- TOC entry 9980 (class 1259 OID 65924)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx6 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9981 (class 1259 OID 65925)
-- Name: cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_165_32_55_16_16438_idx7 ON public.cbitembordero_emissao_10_130_61_165_32_55_16_16438 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9982 (class 1259 OID 81325)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx0 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_cbitembordero_int);

--
-- TOC entry 9983 (class 1259 OID 81326)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx1 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_cbbordero_int);

--
-- TOC entry 9984 (class 1259 OID 81327)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx2 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_cbcontrato_int);

--
-- TOC entry 9985 (class 1259 OID 81329)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx3 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9986 (class 1259 OID 81330)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx4 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_gecliente_int);

--
-- TOC entry 9987 (class 1259 OID 81331)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx5 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_gefilial_int);

--
-- TOC entry 9988 (class 1259 OID 81332)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx6 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9989 (class 1259 OID 81333)
-- Name: cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_166_32_26_34_34799_idx7 ON public.cbitembordero_emissao_10_130_61_166_32_26_34_34799 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9990 (class 1259 OID 66786)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx0 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_cbitembordero_int);

--
-- TOC entry 9991 (class 1259 OID 66787)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx1 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_cbbordero_int);

--
-- TOC entry 9992 (class 1259 OID 66788)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx2 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_cbcontrato_int);

--
-- TOC entry 9993 (class 1259 OID 66789)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx3 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 9994 (class 1259 OID 66790)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx4 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_gecliente_int);

--
-- TOC entry 9995 (class 1259 OID 66791)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx5 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_gefilial_int);

--
-- TOC entry 9996 (class 1259 OID 66792)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx6 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 9997 (class 1259 OID 66793)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_25_25021_idx7 ON public.cbitembordero_emissao_10_130_61_17_32_16_25_25021 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9998 (class 1259 OID 66776)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx0 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_cbitembordero_int);

--
-- TOC entry 9999 (class 1259 OID 66777)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx1 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_cbbordero_int);

--
-- TOC entry 10000 (class 1259 OID 66778)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx2 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_cbcontrato_int);

--
-- TOC entry 10001 (class 1259 OID 66779)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx3 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10002 (class 1259 OID 66780)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx4 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_gecliente_int);

--
-- TOC entry 10003 (class 1259 OID 66781)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx5 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_gefilial_int);

--
-- TOC entry 10004 (class 1259 OID 66782)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx6 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10005 (class 1259 OID 66783)
-- Name: cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_16_37_37969_idx7 ON public.cbitembordero_emissao_10_130_61_17_32_16_37_37969 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10006 (class 1259 OID 65952)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx0 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_cbitembordero_int);

--
-- TOC entry 10007 (class 1259 OID 65953)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx1 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_cbbordero_int);

--
-- TOC entry 10008 (class 1259 OID 65954)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx2 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_cbcontrato_int);

--
-- TOC entry 10009 (class 1259 OID 65955)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx3 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10010 (class 1259 OID 65956)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx4 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_gecliente_int);

--
-- TOC entry 10011 (class 1259 OID 65957)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx5 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_gefilial_int);

--
-- TOC entry 10012 (class 1259 OID 65958)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx6 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10013 (class 1259 OID 65959)
-- Name: cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_130_61_17_32_18_9_9431_idx7 ON public.cbitembordero_emissao_10_130_61_17_32_18_9_9431 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10014 (class 1259 OID 65964)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx0 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_cbitembordero_int);

--
-- TOC entry 10015 (class 1259 OID 65965)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx1 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_cbbordero_int);

--
-- TOC entry 10016 (class 1259 OID 65966)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx2 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_cbcontrato_int);

--
-- TOC entry 10017 (class 1259 OID 65967)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx3 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10018 (class 1259 OID 65969)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx4 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_gecliente_int);

--
-- TOC entry 10019 (class 1259 OID 65970)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx5 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_gefilial_int);

--
-- TOC entry 10020 (class 1259 OID 65971)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx6 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10021 (class 1259 OID 65977)
-- Name: cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_15_32_59_54_54660_idx7 ON public.cbitembordero_emissao_10_50_25_15_32_59_54_54660 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10022 (class 1259 OID 66432)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_cbitembordero_int);

--
-- TOC entry 10023 (class 1259 OID 66433)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_cbbordero_int);

--
-- TOC entry 10024 (class 1259 OID 66434)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_cbcontrato_int);

--
-- TOC entry 10025 (class 1259 OID 66435)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10026 (class 1259 OID 66436)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_gecliente_int);

--
-- TOC entry 10027 (class 1259 OID 66439)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_gefilial_int);

--
-- TOC entry 10028 (class 1259 OID 66440)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10029 (class 1259 OID 66441)
-- Name: cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_12_56_56942_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_12_56_56942 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10030 (class 1259 OID 66367)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_cbitembordero_int);

--
-- TOC entry 10031 (class 1259 OID 66370)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_cbbordero_int);

--
-- TOC entry 10032 (class 1259 OID 66371)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_cbcontrato_int);

--
-- TOC entry 10033 (class 1259 OID 66372)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10034 (class 1259 OID 66373)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_gecliente_int);

--
-- TOC entry 10035 (class 1259 OID 66374)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_gefilial_int);

--
-- TOC entry 10036 (class 1259 OID 66375)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10037 (class 1259 OID 66376)
-- Name: cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_17_9_9438_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_17_9_9438 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10038 (class 1259 OID 66913)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_cbitembordero_int);

--
-- TOC entry 10039 (class 1259 OID 66935)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_cbbordero_int);

--
-- TOC entry 10040 (class 1259 OID 66936)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_cbcontrato_int);

--
-- TOC entry 10041 (class 1259 OID 66937)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10042 (class 1259 OID 66938)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_gecliente_int);

--
-- TOC entry 10043 (class 1259 OID 66939)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_gefilial_int);

--
-- TOC entry 10044 (class 1259 OID 66940)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10045 (class 1259 OID 66941)
-- Name: cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_19_28_28539_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_19_28_28539 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10046 (class 1259 OID 66462)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_cbitembordero_int);

--
-- TOC entry 10047 (class 1259 OID 66464)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_cbbordero_int);

--
-- TOC entry 10048 (class 1259 OID 66465)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_cbcontrato_int);

--
-- TOC entry 10049 (class 1259 OID 66466)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10050 (class 1259 OID 66467)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_gecliente_int);

--
-- TOC entry 10051 (class 1259 OID 66468)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_gefilial_int);

--
-- TOC entry 10052 (class 1259 OID 66469)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10053 (class 1259 OID 66470)
-- Name: cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_38_56_56387_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_38_56_56387 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10054 (class 1259 OID 66919)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_cbitembordero_int);

--
-- TOC entry 10055 (class 1259 OID 66922)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_cbbordero_int);

--
-- TOC entry 10056 (class 1259 OID 66928)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_cbcontrato_int);

--
-- TOC entry 10057 (class 1259 OID 66930)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10058 (class 1259 OID 66931)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_gecliente_int);

--
-- TOC entry 10059 (class 1259 OID 66932)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_gefilial_int);

--
-- TOC entry 10060 (class 1259 OID 66933)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10061 (class 1259 OID 66934)
-- Name: cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_46_47_47210_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_46_47_47210 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10062 (class 1259 OID 66653)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_cbitembordero_int);

--
-- TOC entry 10063 (class 1259 OID 66654)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_cbbordero_int);

--
-- TOC entry 10064 (class 1259 OID 66661)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_cbcontrato_int);

--
-- TOC entry 10065 (class 1259 OID 66662)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10066 (class 1259 OID 66663)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_gecliente_int);

--
-- TOC entry 10067 (class 1259 OID 66664)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_gefilial_int);

--
-- TOC entry 10068 (class 1259 OID 66665)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10069 (class 1259 OID 66666)
-- Name: cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_4_18_18742_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_4_18_18742 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10070 (class 1259 OID 66356)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_cbitembordero_int);

--
-- TOC entry 10071 (class 1259 OID 66360)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_cbbordero_int);

--
-- TOC entry 10072 (class 1259 OID 66361)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_cbcontrato_int);

--
-- TOC entry 10073 (class 1259 OID 66362)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10074 (class 1259 OID 66363)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_gecliente_int);

--
-- TOC entry 10075 (class 1259 OID 66364)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_gefilial_int);

--
-- TOC entry 10076 (class 1259 OID 66365)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10077 (class 1259 OID 66366)
-- Name: cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_51_58_58861_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_51_58_58861 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10078 (class 1259 OID 66399)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_cbitembordero_int);

--
-- TOC entry 10079 (class 1259 OID 66404)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_cbbordero_int);

--
-- TOC entry 10080 (class 1259 OID 66405)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_cbcontrato_int);

--
-- TOC entry 10081 (class 1259 OID 66406)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10082 (class 1259 OID 66409)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_gecliente_int);

--
-- TOC entry 10083 (class 1259 OID 66410)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_gefilial_int);

--
-- TOC entry 10084 (class 1259 OID 66416)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10085 (class 1259 OID 66417)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18269_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18269 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10086 (class 1259 OID 66643)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_cbitembordero_int);

--
-- TOC entry 10087 (class 1259 OID 66644)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_cbbordero_int);

--
-- TOC entry 10088 (class 1259 OID 66645)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_cbcontrato_int);

--
-- TOC entry 10089 (class 1259 OID 66646)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10090 (class 1259 OID 66647)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_gecliente_int);

--
-- TOC entry 10091 (class 1259 OID 66648)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_gefilial_int);

--
-- TOC entry 10092 (class 1259 OID 66649)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10093 (class 1259 OID 66650)
-- Name: cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_55_18_18323_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_55_18_18323 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10094 (class 1259 OID 65906)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_cbitembordero_int);

--
-- TOC entry 10095 (class 1259 OID 65907)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_cbbordero_int);

--
-- TOC entry 10096 (class 1259 OID 65908)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_cbcontrato_int);

--
-- TOC entry 10097 (class 1259 OID 65909)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10098 (class 1259 OID 65910)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_gecliente_int);

--
-- TOC entry 10099 (class 1259 OID 65911)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_gefilial_int);

--
-- TOC entry 10100 (class 1259 OID 65912)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10101 (class 1259 OID 65913)
-- Name: cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_56_21_21976_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_56_21_21976 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10102 (class 1259 OID 66419)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_cbitembordero_int);

--
-- TOC entry 10103 (class 1259 OID 66420)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_cbbordero_int);

--
-- TOC entry 10104 (class 1259 OID 66426)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_cbcontrato_int);

--
-- TOC entry 10105 (class 1259 OID 66427)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10106 (class 1259 OID 66428)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_gecliente_int);

--
-- TOC entry 10107 (class 1259 OID 66429)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_gefilial_int);

--
-- TOC entry 10108 (class 1259 OID 66430)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10109 (class 1259 OID 66431)
-- Name: cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_5_40_40902_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_5_40_40902 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10110 (class 1259 OID 66635)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx0 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_cbitembordero_int);

--
-- TOC entry 10111 (class 1259 OID 66636)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx1 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_cbbordero_int);

--
-- TOC entry 10112 (class 1259 OID 66637)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx2 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_cbcontrato_int);

--
-- TOC entry 10113 (class 1259 OID 66638)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx3 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10114 (class 1259 OID 66639)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx4 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_gecliente_int);

--
-- TOC entry 10115 (class 1259 OID 66640)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx5 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_gefilial_int);

--
-- TOC entry 10116 (class 1259 OID 66641)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx6 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10117 (class 1259 OID 66642)
-- Name: cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_30_32_9_33_33031_idx7 ON public.cbitembordero_emissao_10_50_25_30_32_9_33_33031 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10118 (class 1259 OID 66756)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx0 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_cbitembordero_int);

--
-- TOC entry 10119 (class 1259 OID 66763)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx1 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_cbbordero_int);

--
-- TOC entry 10120 (class 1259 OID 66764)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx2 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_cbcontrato_int);

--
-- TOC entry 10121 (class 1259 OID 66765)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx3 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10122 (class 1259 OID 66771)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx4 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_gecliente_int);

--
-- TOC entry 10123 (class 1259 OID 66772)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx5 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_gefilial_int);

--
-- TOC entry 10124 (class 1259 OID 66773)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx6 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10125 (class 1259 OID 66775)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_21_21507_idx7 ON public.cbitembordero_emissao_10_50_25_89_32_0_21_21507 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10126 (class 1259 OID 66342)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx0 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_cbitembordero_int);

--
-- TOC entry 10127 (class 1259 OID 66343)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx1 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_cbbordero_int);

--
-- TOC entry 10128 (class 1259 OID 66344)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx2 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_cbcontrato_int);

--
-- TOC entry 10129 (class 1259 OID 66345)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx3 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10130 (class 1259 OID 66346)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx4 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_gecliente_int);

--
-- TOC entry 10131 (class 1259 OID 66347)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx5 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_gefilial_int);

--
-- TOC entry 10132 (class 1259 OID 66348)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx6 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10133 (class 1259 OID 66349)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_26_26216_idx7 ON public.cbitembordero_emissao_10_50_25_89_32_0_26_26216 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10134 (class 1259 OID 66714)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx0 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_cbitembordero_int);

--
-- TOC entry 10135 (class 1259 OID 66715)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx1 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_cbbordero_int);

--
-- TOC entry 10136 (class 1259 OID 66716)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx2 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_cbcontrato_int);

--
-- TOC entry 10137 (class 1259 OID 66717)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx3 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10138 (class 1259 OID 66718)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx4 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_gecliente_int);

--
-- TOC entry 10139 (class 1259 OID 66719)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx5 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_gefilial_int);

--
-- TOC entry 10140 (class 1259 OID 66720)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx6 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10141 (class 1259 OID 66721)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_35_35136_idx7 ON public.cbitembordero_emissao_10_50_25_89_32_0_35_35136 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10142 (class 1259 OID 81334)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx0 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_cbitembordero_int);

--
-- TOC entry 10143 (class 1259 OID 81335)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx1 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_cbbordero_int);

--
-- TOC entry 10144 (class 1259 OID 81336)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx2 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_cbcontrato_int);

--
-- TOC entry 10145 (class 1259 OID 81337)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx3 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10146 (class 1259 OID 81338)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx4 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_gecliente_int);

--
-- TOC entry 10147 (class 1259 OID 81339)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx5 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_gefilial_int);

--
-- TOC entry 10148 (class 1259 OID 81340)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx6 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10149 (class 1259 OID 81341)
-- Name: cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_25_89_32_0_8_8855_idx7 ON public.cbitembordero_emissao_10_50_25_89_32_0_8_8855 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10150 (class 1259 OID 67078)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx0 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_cbitembordero_int);

--
-- TOC entry 10151 (class 1259 OID 67079)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx1 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_cbbordero_int);

--
-- TOC entry 10152 (class 1259 OID 67080)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx2 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_cbcontrato_int);

--
-- TOC entry 10153 (class 1259 OID 67081)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx3 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10154 (class 1259 OID 67082)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx4 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_gecliente_int);

--
-- TOC entry 10155 (class 1259 OID 67083)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx5 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_gefilial_int);

--
-- TOC entry 10156 (class 1259 OID 67084)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx6 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10157 (class 1259 OID 67085)
-- Name: cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_50_27_10_32_20_37_37666_idx7 ON public.cbitembordero_emissao_10_50_27_10_32_20_37_37666 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10158 (class 1259 OID 66578)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx0 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_cbitembordero_int);

--
-- TOC entry 10159 (class 1259 OID 66584)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx1 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_cbbordero_int);

--
-- TOC entry 10160 (class 1259 OID 66585)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx2 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_cbcontrato_int);

--
-- TOC entry 10161 (class 1259 OID 66586)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx3 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10162 (class 1259 OID 66587)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx4 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_gecliente_int);

--
-- TOC entry 10163 (class 1259 OID 66589)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx5 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_gefilial_int);

--
-- TOC entry 10164 (class 1259 OID 66590)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx6 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10165 (class 1259 OID 66591)
-- Name: cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_emissao_10_66_12_116_32_53_12_12252_idx7 ON public.cbitembordero_emissao_10_66_12_116_32_53_12_12252 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9806 (class 1259 OID 48282)
-- Name: cbitembordero_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_idx1 ON public.cbitembordero USING btree (id_cbcontrato_int);

--
-- TOC entry 9807 (class 1259 OID 53745)
-- Name: cbitembordero_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_idx2 ON public.cbitembordero USING btree (nosso_numero_str);

--
-- TOC entry 9808 (class 1259 OID 55708)
-- Name: cbitembordero_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_idx5 ON public.cbitembordero USING btree (id_cbbordero_int);

--
-- TOC entry 9809 (class 1259 OID 56679)
-- Name: cbitembordero_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_idx6 ON public.cbitembordero USING btree (emissao_dat);

--
-- TOC entry 9810 (class 1259 OID 57248)
-- Name: cbitembordero_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_idx7 ON public.cbitembordero USING btree (vencimento_dat);

--
-- TOC entry 9811 (class 1259 OID 59259)
-- Name: cbitembordero_idx8; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_idx8 ON public.cbitembordero USING btree (acordo_int);

--
-- TOC entry 10166 (class 1259 OID 66106)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx0 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_cbitembordero_int);

--
-- TOC entry 10167 (class 1259 OID 66108)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx1 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_cbbordero_int);

--
-- TOC entry 10168 (class 1259 OID 66109)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx2 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_cbcontrato_int);

--
-- TOC entry 10169 (class 1259 OID 66111)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx3 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10170 (class 1259 OID 66112)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx4 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_gecliente_int);

--
-- TOC entry 10171 (class 1259 OID 66113)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx5 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_gefilial_int);

--
-- TOC entry 10172 (class 1259 OID 66114)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx6 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10173 (class 1259 OID 66115)
-- Name: cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_35_34_34185_idx7 ON public.cbitembordero_pagamento_10_116_160_17_32_35_34_34185 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10174 (class 1259 OID 66116)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx0 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_cbitembordero_int);

--
-- TOC entry 10175 (class 1259 OID 66117)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx1 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_cbbordero_int);

--
-- TOC entry 10176 (class 1259 OID 66118)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx2 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_cbcontrato_int);

--
-- TOC entry 10177 (class 1259 OID 66119)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx3 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10178 (class 1259 OID 66120)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx4 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_gecliente_int);

--
-- TOC entry 10179 (class 1259 OID 66121)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx5 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_gefilial_int);

--
-- TOC entry 10180 (class 1259 OID 66122)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx6 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10181 (class 1259 OID 66123)
-- Name: cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_4_52_52557_idx7 ON public.cbitembordero_pagamento_10_116_160_17_32_4_52_52557 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10182 (class 1259 OID 81309)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx0 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_cbitembordero_int);

--
-- TOC entry 10183 (class 1259 OID 81310)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx1 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_cbbordero_int);

--
-- TOC entry 10184 (class 1259 OID 81311)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx2 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_cbcontrato_int);

--
-- TOC entry 10185 (class 1259 OID 81312)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx3 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10186 (class 1259 OID 81313)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx4 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_gecliente_int);

--
-- TOC entry 10187 (class 1259 OID 81314)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx5 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_gefilial_int);

--
-- TOC entry 10188 (class 1259 OID 81315)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx6 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10189 (class 1259 OID 81316)
-- Name: cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_116_160_17_32_8_7_7769_idx7 ON public.cbitembordero_pagamento_10_116_160_17_32_8_7_7769 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10190 (class 1259 OID 81390)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx0 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_cbitembordero_int);

--
-- TOC entry 10191 (class 1259 OID 81391)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx1 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_cbbordero_int);

--
-- TOC entry 10192 (class 1259 OID 81392)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx2 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_cbcontrato_int);

--
-- TOC entry 10193 (class 1259 OID 81393)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx3 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10194 (class 1259 OID 81394)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx4 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_gecliente_int);

--
-- TOC entry 10195 (class 1259 OID 81395)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx5 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_gefilial_int);

--
-- TOC entry 10196 (class 1259 OID 81396)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx6 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10197 (class 1259 OID 81397)
-- Name: cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_25_60_32_42_32_32496_idx7 ON public.cbitembordero_pagamento_10_130_25_60_32_42_32_32496 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10198 (class 1259 OID 81317)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx0 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_cbitembordero_int);

--
-- TOC entry 10199 (class 1259 OID 81318)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx1 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_cbbordero_int);

--
-- TOC entry 10200 (class 1259 OID 81319)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx2 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_cbcontrato_int);

--
-- TOC entry 10201 (class 1259 OID 81320)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx3 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10202 (class 1259 OID 81321)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx4 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_gecliente_int);

--
-- TOC entry 10203 (class 1259 OID 81322)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx5 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_gefilial_int);

--
-- TOC entry 10204 (class 1259 OID 81323)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx6 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10205 (class 1259 OID 81324)
-- Name: cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_130_61_41_32_0_17_17864_idx7 ON public.cbitembordero_pagamento_10_130_61_41_32_0_17_17864 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10206 (class 1259 OID 66704)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx0 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_cbitembordero_int);

--
-- TOC entry 10207 (class 1259 OID 66707)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx1 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_cbbordero_int);

--
-- TOC entry 10208 (class 1259 OID 66708)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx2 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_cbcontrato_int);

--
-- TOC entry 10209 (class 1259 OID 66709)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx3 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10210 (class 1259 OID 66710)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx4 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_gecliente_int);

--
-- TOC entry 10211 (class 1259 OID 66711)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx5 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_gefilial_int);

--
-- TOC entry 10212 (class 1259 OID 66712)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx6 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10213 (class 1259 OID 66713)
-- Name: cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_25_25_32_27_24_24021_idx7 ON public.cbitembordero_pagamento_10_50_25_25_32_27_24_24021 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10214 (class 1259 OID 67044)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx0 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_cbitembordero_int);

--
-- TOC entry 10215 (class 1259 OID 67052)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx1 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_cbbordero_int);

--
-- TOC entry 10216 (class 1259 OID 67054)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx2 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_cbcontrato_int);

--
-- TOC entry 10217 (class 1259 OID 67056)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx3 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10218 (class 1259 OID 67058)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx4 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_gecliente_int);

--
-- TOC entry 10219 (class 1259 OID 67059)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx5 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_gefilial_int);

--
-- TOC entry 10220 (class 1259 OID 67060)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx6 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10221 (class 1259 OID 67061)
-- Name: cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_21_33_33810_idx7 ON public.cbitembordero_pagamento_10_50_27_10_32_21_33_33810 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10222 (class 1259 OID 81293)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx0 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_cbitembordero_int);

--
-- TOC entry 10223 (class 1259 OID 81294)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx1 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_cbbordero_int);

--
-- TOC entry 10224 (class 1259 OID 81295)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx2 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_cbcontrato_int);

--
-- TOC entry 10225 (class 1259 OID 81296)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx3 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10226 (class 1259 OID 81297)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx4 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_gecliente_int);

--
-- TOC entry 10227 (class 1259 OID 81298)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx5 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_gefilial_int);

--
-- TOC entry 10228 (class 1259 OID 81299)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx6 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10229 (class 1259 OID 81300)
-- Name: cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_10_32_28_0_757_idx7 ON public.cbitembordero_pagamento_10_50_27_10_32_28_0_757 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10230 (class 1259 OID 81301)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx0 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_cbitembordero_int);

--
-- TOC entry 10231 (class 1259 OID 81302)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx1 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_cbbordero_int);

--
-- TOC entry 10232 (class 1259 OID 81303)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx2 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_cbcontrato_int);

--
-- TOC entry 10233 (class 1259 OID 81304)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx3 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10234 (class 1259 OID 81305)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx4 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_gecliente_int);

--
-- TOC entry 10235 (class 1259 OID 81306)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx5 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_gefilial_int);

--
-- TOC entry 10236 (class 1259 OID 81307)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx6 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10237 (class 1259 OID 81308)
-- Name: cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_50_27_6_32_7_10_10948_idx7 ON public.cbitembordero_pagamento_10_50_27_6_32_7_10_10948 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10238 (class 1259 OID 67196)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx0 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_cbitembordero_int);

--
-- TOC entry 10239 (class 1259 OID 67198)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx1 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_cbbordero_int);

--
-- TOC entry 10240 (class 1259 OID 67199)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx2 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_cbcontrato_int);

--
-- TOC entry 10241 (class 1259 OID 67200)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx3 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10242 (class 1259 OID 67201)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx4 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_gecliente_int);

--
-- TOC entry 10243 (class 1259 OID 67202)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx5 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_gefilial_int);

--
-- TOC entry 10244 (class 1259 OID 67203)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx6 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10245 (class 1259 OID 67204)
-- Name: cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_19_17_17202_idx7 ON public.cbitembordero_pagamento_10_66_12_100_32_19_17_17202 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 10246 (class 1259 OID 67205)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx0 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_cbitembordero_int);

--
-- TOC entry 10247 (class 1259 OID 67206)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx1 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_cbbordero_int);

--
-- TOC entry 10248 (class 1259 OID 67207)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx2 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_cbcontrato_int);

--
-- TOC entry 10249 (class 1259 OID 67208)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx3 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10250 (class 1259 OID 67209)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx4 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_gecliente_int);

--
-- TOC entry 10251 (class 1259 OID 67211)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx5 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_gefilial_int);

--
-- TOC entry 10252 (class 1259 OID 67212)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx6 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 10253 (class 1259 OID 67213)
-- Name: cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitembordero_pagamento_10_66_12_100_32_9_34_34154_idx7 ON public.cbitembordero_pagamento_10_66_12_100_32_9_34_34154 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 9812 (class 1259 OID 61604)
-- Name: cbitembordero_pkey; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbitembordero_pkey ON public.cbitembordero USING btree (id_cbitembordero_int);

--
-- TOC entry 10254 (class 1259 OID 68513)
-- Name: cbitemborderoboletagem_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderoboletagem_idx1 ON public.cbitemborderoboletagem USING btree (id_cbitembordero_int);

--
-- TOC entry 10257 (class 1259 OID 68517)
-- Name: cbitemborderoboletagemcusta_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderoboletagemcusta_idx1 ON public.cbitemborderoboletagemcusta USING btree (id_cbitemborderoboletagem_int);

--
-- TOC entry 10260 (class 1259 OID 68530)
-- Name: cbitemborderocalculoparcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderocalculoparcela_idx1 ON public.cbitemborderocalculoparcela USING btree (id_cbitemborderocalculoparcela_int);

--
-- TOC entry 10261 (class 1259 OID 68531)
-- Name: cbitemborderocalculoparcela_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderocalculoparcela_idx2 ON public.cbitemborderocalculoparcela USING btree (id_cbitembordero_int);

--
-- TOC entry 10262 (class 1259 OID 68532)
-- Name: cbitemborderocalculoparcela_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderocalculoparcela_idx3 ON public.cbitemborderocalculoparcela USING btree (id_cbcontrato_int);

--
-- TOC entry 10265 (class 1259 OID 68552)
-- Name: cbitemborderocomprovantepgto_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderocomprovantepgto_idx1 ON public.cbitemborderocomprovantepgto USING btree (id_cbitemborderocomprovantepgto_int);

--
-- TOC entry 10266 (class 1259 OID 68556)
-- Name: cbitemborderocomprovantepgto_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderocomprovantepgto_idx2 ON public.cbitemborderocomprovantepgto USING btree (id_cbitembordero_int);

--
-- TOC entry 10267 (class 1259 OID 68557)
-- Name: cbitemborderocomprovantepgto_pkey; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbitemborderocomprovantepgto_pkey ON public.cbitemborderocomprovantepgto USING btree (id_cbitemborderocomprovantepgto_int);

--
-- TOC entry 10270 (class 1259 OID 68559)
-- Name: cbitemborderoenvio_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderoenvio_idx0 ON public.cbitemborderoenvio USING btree (id_cbitembordero_int);

--
-- TOC entry 10271 (class 1259 OID 68561)
-- Name: cbitemborderoenvio_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderoenvio_idx1 ON public.cbitemborderoenvio USING btree (tipo_destino_str);

--
-- TOC entry 10272 (class 1259 OID 64783832)
-- Name: cbitemborderofile_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderofile_idx1 ON public.cbitemborderofile USING btree (id_cbitembordero_int);

--
-- TOC entry 10276 (class 1259 OID 68591)
-- Name: cbitemborderoregistroservico_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderoregistroservico_idx1 ON public.cbitemborderoregistroservico USING btree (id_cbitembordero_int);

--
-- TOC entry 10277 (class 1259 OID 68593)
-- Name: cbitemborderoretorno_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemborderoretorno_idx1 ON public.cbitemborderoretorno USING btree (id_cbitembordero_int);

--
-- TOC entry 10281 (class 1259 OID 63956)
-- Name: cbitemlay_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitemlay_idx1 ON public.cbitemlay USING btree (id_cbdetalhelay_int);

--
-- TOC entry 10284 (class 1259 OID 63965)
-- Name: cbitemlay_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbitemlay_unq ON public.cbitemlay USING btree (id_cbdetalhelay_int, num_seq_int);

--
-- TOC entry 10285 (class 1259 OID 68635)
-- Name: cbitmbordero_10_101_41_55_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitmbordero_10_101_41_55_32_idx0 ON public.cbitmbordero_10_101_41_55_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 10286 (class 1259 OID 68817)
-- Name: cbitmbordero_10_101_41_55_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitmbordero_10_101_41_55_32_idx1 ON public.cbitmbordero_10_101_41_55_32 USING btree (id_cbbordero_int);

--
-- TOC entry 10287 (class 1259 OID 68864)
-- Name: cbitmbordero_10_101_41_55_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbitmbordero_10_101_41_55_32_idx2 ON public.cbitmbordero_10_101_41_55_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 10288 (class 1259 OID 69115)
-- Name: cblotebordero_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cblotebordero_unq ON public.cblotebordero USING btree (id_cblotebordero_int);

--
-- TOC entry 10291 (class 1259 OID 66292)
-- Name: cbmodlayout_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbmodlayout_unq ON public.cbmodlayout USING btree (codigo_str);

--
-- TOC entry 10296 (class 1259 OID 69298)
-- Name: cbmotivobanco_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbmotivobanco_unq ON public.cbmotivobanco USING btree (codigo_str);

--
-- TOC entry 10326 (class 1259 OID 65764)
-- Name: cbpagamento_idx10; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx10 ON public.cbpagamento USING btree (id_cbitembordero_int);

--
-- TOC entry 10327 (class 1259 OID 65765)
-- Name: cbpagamento_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx2 ON public.cbpagamento USING btree (id_gecliente_int);

--
-- TOC entry 10328 (class 1259 OID 65766)
-- Name: cbpagamento_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx3 ON public.cbpagamento USING btree (id_cbcontrato_int);

--
-- TOC entry 10329 (class 1259 OID 65767)
-- Name: cbpagamento_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx4 ON public.cbpagamento USING btree (data_pagamento_dat);

--
-- TOC entry 10330 (class 1259 OID 65768)
-- Name: cbpagamento_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx5 ON public.cbpagamento USING btree (data_cadastro_dat);

--
-- TOC entry 10331 (class 1259 OID 65769)
-- Name: cbpagamento_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx7 ON public.cbpagamento USING btree (id_geempresa_int, id_gecliente_int, sequencia_int);

--
-- TOC entry 10332 (class 1259 OID 65770)
-- Name: cbpagamento_idx8; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbpagamento_idx8 ON public.cbpagamento USING btree (sequencia_int);

--
-- TOC entry 10335 (class 1259 OID 65771)
-- Name: cbpagamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbpagamento_unq ON public.cbpagamento USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int, sequencia_int);

--
-- TOC entry 10339 (class 1259 OID 67359)
-- Name: cbparamclifilial_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparamclifilial_unq ON public.cbparamclifilial USING btree (id_gecliente_int, id_geempresa_int, id_gefilial_int);

--
-- TOC entry 10340 (class 1259 OID 45826)
-- Name: cbparcela_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcela_idx4 ON public.cbparcela USING btree (id_cbcontrato_int);

--
-- TOC entry 10341 (class 1259 OID 45827)
-- Name: cbparcela_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcela_idx5 ON public.cbparcela USING btree (data_primeira_distrib_dat);

--
-- TOC entry 10342 (class 1259 OID 45828)
-- Name: cbparcela_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcela_idx7 ON public.cbparcela USING btree (id_cbcontrato_int, parcela_int);

--
-- TOC entry 10343 (class 1259 OID 45829)
-- Name: cbparcela_idx8; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcela_idx8 ON public.cbparcela USING btree (info_adicional_10_str);

--
-- TOC entry 10346 (class 1259 OID 45837)
-- Name: cbparcela_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparcela_unq ON public.cbparcela USING btree (id_cbcontrato_int, parcela_int, numero_unico_str);

--
-- TOC entry 10348 (class 1259 OID 71219)
-- Name: cbparceladespesa_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparceladespesa_idx1 ON public.cbparceladespesa USING btree (id_cbdespesa_int);

--
-- TOC entry 10349 (class 1259 OID 71267)
-- Name: cbparceladespesa_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparceladespesa_idx2 ON public.cbparceladespesa USING btree (id_cbparcela_int);

--
-- TOC entry 10352 (class 1259 OID 71330)
-- Name: cbparceladespesa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparceladespesa_unq ON public.cbparceladespesa USING btree (id_cbdespesa_int, id_cbparcela_int);

--
-- TOC entry 10353 (class 1259 OID 63695)
-- Name: cbparcelaitembordero_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcelaitembordero_idx2 ON public.cbparcelaitembordero USING btree (id_cbparcela_int);

--
-- TOC entry 10354 (class 1259 OID 63696)
-- Name: cbparcelaitembordero_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcelaitembordero_idx3 ON public.cbparcelaitembordero USING btree (id_cbitembordero_int);

--
-- TOC entry 10355 (class 1259 OID 63697)
-- Name: cbparcelaitembordero_pkey; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparcelaitembordero_pkey ON public.cbparcelaitembordero USING btree (id_cbparcelaitembordero_int);

--
-- TOC entry 10356 (class 1259 OID 63698)
-- Name: cbparcelaitembordero_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparcelaitembordero_unq ON public.cbparcelaitembordero USING btree (id_cbitembordero_int, id_cbparcela_int);

--
-- TOC entry 10358 (class 1259 OID 65791)
-- Name: cbparcelapagamento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcelapagamento_idx1 ON public.cbparcelapagamento USING btree (id_cbpagamento_int);

--
-- TOC entry 10359 (class 1259 OID 65794)
-- Name: cbparcelapagamento_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbparcelapagamento_idx2 ON public.cbparcelapagamento USING btree (id_cbparcela_int);

--
-- TOC entry 10362 (class 1259 OID 65795)
-- Name: cbparcelapagamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparcelapagamento_unq ON public.cbparcelapagamento USING btree (id_cbpagamento_int, id_cbparcela_int);

--
-- TOC entry 10368 (class 1259 OID 71520)
-- Name: cbparcelatransf_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbparcelatransf_unq ON public.cbparcelatransf USING btree (id_cbparcela_int, data_transferencia_dat);

--
-- TOC entry 10391 (class 1259 OID 72644)
-- Name: cbreceptivoretorno_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbreceptivoretorno_idx1 ON public.cbreceptivoretorno USING btree (id_cbcontrato_int);

--
-- TOC entry 10392 (class 1259 OID 72683)
-- Name: cbreceptivoretorno_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbreceptivoretorno_idx2 ON public.cbreceptivoretorno USING btree (data_hora_tim);

--
-- TOC entry 10393 (class 1259 OID 72728)
-- Name: cbreceptivoretorno_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbreceptivoretorno_idx3 ON public.cbreceptivoretorno USING btree (id_cbreceptivoretornotipo_int);

--
-- TOC entry 10394 (class 1259 OID 72777)
-- Name: cbreceptivoretornotipo_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbreceptivoretornotipo_idx1 ON public.cbreceptivoretornotipo USING btree (codigo_str);

--
-- TOC entry 10395 (class 1259 OID 72785)
-- Name: cbreceptivoretornotipo_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbreceptivoretornotipo_idx2 ON public.cbreceptivoretornotipo USING btree (id_gecliente_int);

--
-- TOC entry 10400 (class 1259 OID 73199)
-- Name: cbregionalcliente_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbregionalcliente_unq ON public.cbregionalcliente USING btree (codigo_str);

--
-- TOC entry 10403 (class 1259 OID 73367)
-- Name: cbregistroboletoapilog_idx02; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbregistroboletoapilog_idx02 ON public.cbregistroboletoapilog USING btree (id_cbitembordero_int);

--
-- TOC entry 10406 (class 1259 OID 66400)
-- Name: cbsitcontato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsitcontato_idx1 ON public.cbsitcontato USING btree (id_cbsitcontato_int, agendamento_str, agendamento_por_str);

--
-- TOC entry 10407 (class 1259 OID 66401)
-- Name: cbsitcontato_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsitcontato_idx2 ON public.cbsitcontato USING btree (id_cbsitcontato_int, agendamento_str, agendamento_por_str) WHERE ((agendamento_por_str)::text = 'G'::text);

--
-- TOC entry 10408 (class 1259 OID 66402)
-- Name: cbsitcontato_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsitcontato_idx3 ON public.cbsitcontato USING btree (id_cbsitcontato_int, agendamento_str, agendamento_por_str) WHERE ((agendamento_por_str)::text = 'U'::text);

--
-- TOC entry 10411 (class 1259 OID 66403)
-- Name: cbsitcontato_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbsitcontato_unq ON public.cbsitcontato USING btree (id_gecliente_int, codigo_int);

--
-- TOC entry 10412 (class 1259 OID 73541)
-- Name: cbsitcontatousuario_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsitcontatousuario_idx1 ON public.cbsitcontatousuario USING btree (id_geusuario_int, id_cbsitcontato_int);

--
-- TOC entry 10417 (class 1259 OID 66977)
-- Name: cbsituacaocontrato_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbsituacaocontrato_unq ON public.cbsituacaocontrato USING btree (codigo_str);

--
-- TOC entry 10418 (class 1259 OID 64783825)
-- Name: cbsituacaocontratohistorico_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsituacaocontratohistorico_idx1 ON public.cbsituacaocontratohistorico USING btree (id_cbcontrato_int);

--
-- TOC entry 10421 (class 1259 OID 45840)
-- Name: cbsituacaoparcelahistorico_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsituacaoparcelahistorico_idx1 ON public.cbsituacaoparcelahistorico USING btree (tstamp);

--
-- TOC entry 10422 (class 1259 OID 45842)
-- Name: cbsituacaoparcelahistorico_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsituacaoparcelahistorico_idx2 ON public.cbsituacaoparcelahistorico USING btree (situacao_int);

--
-- TOC entry 10423 (class 1259 OID 45844)
-- Name: cbsituacaoparcelahistorico_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbsituacaoparcelahistorico_idx3 ON public.cbsituacaoparcelahistorico USING btree (id_cbparcela_int);

--
-- TOC entry 10432 (class 1259 OID 66673)
-- Name: cbtipodespesa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipodespesa_unq ON public.cbtipodespesa USING btree (codigo_int);

--
-- TOC entry 10433 (class 1259 OID 73720)
-- Name: cbtipodespesamodalidade_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipodespesamodalidade_unq ON public.cbtipodespesamodalidade USING btree (codigo_str);

--
-- TOC entry 10440 (class 1259 OID 73934)
-- Name: cbtipogarantiafiltro_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cbtipogarantiafiltro_idx1 ON public.cbtipogarantiafiltro USING btree (id_cbtipogarantia_int);

--
-- TOC entry 10443 (class 1259 OID 67485)
-- Name: cbtiponegocio_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtiponegocio_unq ON public.cbtiponegocio USING btree (codigo_str, id_gecliente_int);

--
-- TOC entry 10446 (class 1259 OID 74378)
-- Name: cbtiponegociocartorio_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtiponegociocartorio_unq ON public.cbtiponegociocartorio USING btree (id_gefilial_int, id_cbtiponegocio_int, id_cbcartorio_int);

--
-- TOC entry 10451 (class 1259 OID 67020)
-- Name: cbtipopagamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipopagamento_unq ON public.cbtipopagamento USING btree (id_gecliente_int, codigo_pag_str);

--
-- TOC entry 10454 (class 1259 OID 74380)
-- Name: cbtipopagamentoabat_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipopagamentoabat_unq ON public.cbtipopagamentoabat USING btree (id_cbtipopagamento_int, tipo_un_str);

--
-- TOC entry 10459 (class 1259 OID 74826)
-- Name: cbtipopagamentoestdes_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipopagamentoestdes_unq ON public.cbtipopagamentoestdes USING btree (id_cbtipopagamento_int, id_cbtipopagamentoestdes_int);

--
-- TOC entry 10478 (class 1259 OID 75348)
-- Name: cbtipopagamentositdespesa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipopagamentositdespesa_unq ON public.cbtipopagamentositdes USING btree (id_cbtipopagamento_int, id_cbsituacaocontrato_int);

--
-- TOC entry 10487 (class 1259 OID 75604)
-- Name: cbtipopagamentouf_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbtipopagamentouf_unq ON public.cbtipopagamentouf USING btree (id_cbtipopagamento_int, id_geuf_int);

--
-- TOC entry 10490 (class 1259 OID 66888)
-- Name: cbunidadevalor_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbunidadevalor_unq ON public.cbunidadevalor USING btree (codigo_un_str, data_inicio_dat, id_gecliente_int);

--
-- TOC entry 10493 (class 1259 OID 66929)
-- Name: cbvalortipodespesa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX cbvalortipodespesa_unq ON public.cbvalortipodespesa USING btree (data_inicio_dat, id_cbcartorio_int, id_cbtipodespesa_int);

--
-- TOC entry 10840 (class 1259 OID 66054)
-- Name: codigo_str_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX codigo_str_idx0 ON public.geparametro USING btree (codigo_str);

--
-- TOC entry 10498 (class 1259 OID 65731)
-- Name: contrato_abs_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX contrato_abs_idx1 ON public.contrato_abs USING btree (id_cbcontrato_int);

--
-- TOC entry 10499 (class 1259 OID 65733)
-- Name: contrato_abs_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX contrato_abs_idx2 ON public.contrato_abs USING btree (abs_cpf_str);

--
-- TOC entry 11260 (class 1259 OID 45854)
-- Name: cpf_full_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cpf_full_idx2 ON public.temp_cbobito_full USING btree (cpf);

--
-- TOC entry 10319 (class 1259 OID 45777)
-- Name: cpf_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX cpf_idx2 ON public.cbobito USING btree (cpf);

--
-- TOC entry 11261 (class 1259 OID 45855)
-- Name: data_dat_full_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX data_dat_full_idx3 ON public.temp_cbobito_full USING btree (data_dat);

--
-- TOC entry 10320 (class 1259 OID 45791)
-- Name: data_dat_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX data_dat_idx3 ON public.cbobito USING btree (data_dat);

--
-- TOC entry 10515 (class 1259 OID 44569)
-- Name: es_blocklist_desconhece_bloqueados_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX es_blocklist_desconhece_bloqueados_idx1 ON public.es_blocklist_desconhece_bloqueados USING btree (contato_str);

--
-- TOC entry 10516 (class 1259 OID 44720)
-- Name: es_blocklist_desconhece_bloqueados_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX es_blocklist_desconhece_bloqueados_idx2 ON public.es_blocklist_desconhece_bloqueados USING btree (COALESCE(cpf_str, ''::character varying));

--
-- TOC entry 10517 (class 1259 OID 44766)
-- Name: es_blocklist_desconhece_bloqueados_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX es_blocklist_desconhece_bloqueados_idx3 ON public.es_blocklist_desconhece_bloqueados USING btree (COALESCE(id_geqlcliente_int, (0)::bigint));

--
-- TOC entry 10518 (class 1259 OID 44828)
-- Name: es_blocklist_desconhece_bloqueados_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX es_blocklist_desconhece_bloqueados_unq ON public.es_blocklist_desconhece_bloqueados USING btree (contato_str, COALESCE(cpf_str, ''::character varying), COALESCE(id_geqlcliente_int, (0)::bigint));

--
-- TOC entry 10519 (class 1259 OID 65763)
-- Name: es_telefone_suspeito_386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX es_telefone_suspeito_386_idx1 ON public.es_telefone_suspeito_386 USING btree (contato_str);

--
-- TOC entry 10520 (class 1259 OID 63821)
-- Name: es_telefone_suspeito_386_log_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX es_telefone_suspeito_386_log_idx1 ON public.es_telefone_suspeito_386_log USING btree (contato_str);

--
-- TOC entry 10523 (class 1259 OID 65723)
-- Name: es_telefone_suspeito_cpc_386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX es_telefone_suspeito_cpc_386_idx1 ON public.es_telefone_suspeito_cpc_386 USING btree (contato_str);

--
-- TOC entry 10528 (class 1259 OID 77050)
-- Name: esagenciabradesco_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX esagenciabradesco_unq ON public.esagenciabradesco USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 10529 (class 1259 OID 65853)
-- Name: esagendamentofidelizado_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esagendamentofidelizado_idx1 ON public.esagendamentofidelizado USING btree (id_cbcontrato_int);

--
-- TOC entry 10530 (class 1259 OID 65859)
-- Name: esagendamentofidelizado_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esagendamentofidelizado_idx2 ON public.esagendamentofidelizado USING btree (discador_str);

--
-- TOC entry 10531 (class 1259 OID 65860)
-- Name: esagendamentofidelizado_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esagendamentofidelizado_idx3 ON public.esagendamentofidelizado USING btree (datahora_tim);

--
-- TOC entry 10538 (class 1259 OID 77186)
-- Name: esboletoincon_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esboletoincon_idx1 ON public.esboletoincon USING btree (id_cbitembordero_int);

--
-- TOC entry 10539 (class 1259 OID 77232)
-- Name: escidadeferiado_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX escidadeferiado_idx1 ON public.escidadeferiado USING btree (id_escidadeferiado_int);

--
-- TOC entry 10540 (class 1259 OID 77265)
-- Name: escidadeferiado_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX escidadeferiado_idx2 ON public.escidadeferiado USING btree (data_feriado_dat);

--
-- TOC entry 10541 (class 1259 OID 77279)
-- Name: escidadeferiado_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX escidadeferiado_idx3 ON public.escidadeferiado USING btree (cep_inicial_str, cep_final_str);

--
-- TOC entry 10542 (class 1259 OID 77292)
-- Name: escidadeferiado_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX escidadeferiado_idx4 ON public.escidadeferiado USING btree (municipio_str);

--
-- TOC entry 10543 (class 1259 OID 77303)
-- Name: escidadeferiado_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX escidadeferiado_idx5 ON public.escidadeferiado USING btree (uf_str);

--
-- TOC entry 10552 (class 1259 OID 65712)
-- Name: escontrolefilaaspect_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX escontrolefilaaspect_idx1 ON public.escontrolefilaaspect USING btree (id_cbcontrato_int);

--
-- TOC entry 10559 (class 1259 OID 78124)
-- Name: esfechamento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esfechamento_idx1 ON public.esfechamento USING btree (data_dat);

--
-- TOC entry 10564 (class 1259 OID 65826)
-- Name: eslogarquivoblacklist_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX eslogarquivoblacklist_idx1 ON public.eslogarquivoblacklist USING btree (id_cbcontrato_int);

--
-- TOC entry 10565 (class 1259 OID 65833)
-- Name: eslogarquivoblacklist_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX eslogarquivoblacklist_idx2 ON public.eslogarquivoblacklist USING btree (tstamp);

--
-- TOC entry 10566 (class 1259 OID 65835)
-- Name: eslogarquivoblacklist_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX eslogarquivoblacklist_idx3 ON public.eslogarquivoblacklist USING btree (comando_d_str);

--
-- TOC entry 10567 (class 1259 OID 65836)
-- Name: eslogarquivoblacklist_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX eslogarquivoblacklist_idx4 ON public.eslogarquivoblacklist USING btree (acao_str);

--
-- TOC entry 10568 (class 1259 OID 65839)
-- Name: eslogarquivoblacklist_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX eslogarquivoblacklist_idx5 ON public.eslogarquivoblacklist USING btree (data_final_tim);

--
-- TOC entry 10569 (class 1259 OID 78747)
-- Name: esmanutencaofila_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esmanutencaofila_idx1 ON public.esmanutencaofila USING btree (campanha_str);

--
-- TOC entry 10572 (class 1259 OID 81342)
-- Name: espagoufacil_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX espagoufacil_idx1 ON public.espagoufacil USING btree (id_espagoufacil_int);

--
-- TOC entry 10587 (class 1259 OID 79350)
-- Name: esretornostatustelefone_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esretornostatustelefone_idx1 ON public.esretornostatustelefone USING btree (cpf_str);

--
-- TOC entry 10588 (class 1259 OID 79351)
-- Name: esretornostatustelefone_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esretornostatustelefone_idx2 ON public.esretornostatustelefone USING btree (telefone_str);

--
-- TOC entry 10591 (class 1259 OID 66350)
-- Name: esroboblacklist_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esroboblacklist_idx1 ON public.esroboblacklist USING btree (ultimageracao_tim);

--
-- TOC entry 10592 (class 1259 OID 79353)
-- Name: esscore_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX esscore_idx1 ON public.esscore USING btree (id_cbcontrato_int, id_esscore_int);

--
-- TOC entry 10595 (class 1259 OID 79386)
-- Name: essenhavw_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX essenhavw_unq ON public.essenhavw USING btree (id_gecliente_int, senha_str);

--
-- TOC entry 10605 (class 1259 OID 67522)
-- Name: ficcbanco_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX ficcbanco_unq ON public.ficcbanco USING btree (id_fibanco_int, agencia_str, conta_str);

--
-- TOC entry 10606 (class 1259 OID 79407)
-- Name: ficheque_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ficheque_idx1 ON public.ficheque USING btree (numero_int);

--
-- TOC entry 10609 (class 1259 OID 79408)
-- Name: ficheque_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX ficheque_unq ON public.ficheque USING btree (id_fibanco_int, agencia_str, conta_str, numero_int);

--
-- TOC entry 10612 (class 1259 OID 79442)
-- Name: fichequedevolvido_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX fichequedevolvido_unq ON public.fichequedevolvido USING btree (id_fibanco_int, agencia_str, conta_str, num_cheque_int);

--
-- TOC entry 10617 (class 1259 OID 79446)
-- Name: ficontacliente_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX ficontacliente_unq ON public.ficontacliente USING btree (id_ficcbanco_int, id_gecliente_int);

--
-- TOC entry 10620 (class 1259 OID 79445)
-- Name: fidescindicebanco_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX fidescindicebanco_unq ON public.fidescindicebanco USING btree (id_gecliente_int, codigo_int);

--
-- TOC entry 10625 (class 1259 OID 65762)
-- Name: fiindicemoeda_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX fiindicemoeda_unq ON public.fiindicemoeda USING btree (id_fimoeda_int, data_dat);

--
-- TOC entry 10628 (class 1259 OID 67235)
-- Name: fimoeda_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX fimoeda_unq ON public.fimoeda USING btree (codigo_int);

--
-- TOC entry 10278 (class 1259 OID 68595)
-- Name: fki_cbitembordero_fkey; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX fki_cbitembordero_fkey ON public.cbitemborderoretorno USING btree (id_cbitembordero_int);

--
-- TOC entry 10631 (class 1259 OID 79476)
-- Name: ge083tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge083tmp_idx1 ON public.ge083tmp USING btree (chave_str, tipo_registro);

--
-- TOC entry 10632 (class 1259 OID 79486)
-- Name: ge202tmp_baixa_pirelli_contrato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_baixa_pirelli_contrato_idx1 ON public.ge202tmp_baixa_pirelli_contrato USING btree (id_cbcontrato_int);

--
-- TOC entry 10633 (class 1259 OID 65846)
-- Name: ge202tmp_bx_eleva_cbbaixa_parcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_bx_eleva_cbbaixa_parcela_idx1 ON public.ge202tmp_bx_eleva_cbbaixa_parcela USING btree (id_cbparcela_int);

--
-- TOC entry 10634 (class 1259 OID 67316)
-- Name: ge202tmp_imp_fup_massa_fup_cbsitcontato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_fup_massa_fup_cbsitcontato_idx1 ON public.ge202tmp_imp_fup_massa_fup_cbsitcontato USING btree (id_cbsitcontato_int);

--
-- TOC entry 10635 (class 1259 OID 79496)
-- Name: ge202tmp_imp_pirelli_contrato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_pirelli_contrato_idx1 ON public.ge202tmp_imp_pirelli_contrato USING btree (contrato_str);

--
-- TOC entry 10636 (class 1259 OID 79497)
-- Name: ge202tmp_imp_pirelli_contrato_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_pirelli_contrato_idx2 ON public.ge202tmp_imp_pirelli_contrato USING btree (id_cbcontrato_int);

--
-- TOC entry 10637 (class 1259 OID 79498)
-- Name: ge202tmp_imp_pirelli_contrato_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_pirelli_contrato_idx3 ON public.ge202tmp_imp_pirelli_contrato USING btree (inclui_altera_contrato_str);

--
-- TOC entry 10638 (class 1259 OID 67096)
-- Name: ge202tmp_imp_rem_eleva_cbcontrato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_cbcontrato_idx1 ON public.ge202tmp_imp_rem_eleva_cbcontrato USING btree (id_cbcontrato_int);

--
-- TOC entry 10639 (class 1259 OID 67021)
-- Name: ge202tmp_imp_rem_eleva_cbparcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_cbparcela_idx1 ON public.ge202tmp_imp_rem_eleva_cbparcela USING btree (id_cbparcela_int);

--
-- TOC entry 10640 (class 1259 OID 81404)
-- Name: ge202tmp_imp_rem_eleva_qualidadeemail_com_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadeemail_com_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadeemail_com USING btree (cpf_str);

--
-- TOC entry 10641 (class 1259 OID 81405)
-- Name: ge202tmp_imp_rem_eleva_qualidadeemail_out_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadeemail_out_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadeemail_out USING btree (cpf_str);

--
-- TOC entry 10642 (class 1259 OID 81403)
-- Name: ge202tmp_imp_rem_eleva_qualidadeemail_res_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadeemail_res_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadeemail_res USING btree (cpf_str);

--
-- TOC entry 10643 (class 1259 OID 67113)
-- Name: ge202tmp_imp_rem_eleva_qualidadeend_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadeend_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadeend USING btree (id_cbcontrato_int);

--
-- TOC entry 10644 (class 1259 OID 81406)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_cel_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadetel_cel_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadetel_cel USING btree (cpf_str);

--
-- TOC entry 10645 (class 1259 OID 67215)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_com_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadetel_com_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadetel_com USING btree (cpf_str);

--
-- TOC entry 10646 (class 1259 OID 81408)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_fax_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadetel_fax_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadetel_fax USING btree (cpf_str);

--
-- TOC entry 10647 (class 1259 OID 81407)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_out_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadetel_out_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadetel_out USING btree (cpf_str);

--
-- TOC entry 10648 (class 1259 OID 67171)
-- Name: ge202tmp_imp_rem_eleva_qualidadetel_res_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX ge202tmp_imp_rem_eleva_qualidadetel_res_idx1 ON public.ge202tmp_imp_rem_eleva_qualidadetel_res USING btree (cpf_str);

--
-- TOC entry 10649 (class 1259 OID 65746)
-- Name: geacesso_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geacesso_idx2 ON public.geacesso USING btree (tipo_str, id_geaplicacao_int, id_gegrupo_int);

--
-- TOC entry 10650 (class 1259 OID 65747)
-- Name: geacesso_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geacesso_idx3 ON public.geacesso USING btree (id_geaplicacao_int);

--
-- TOC entry 10653 (class 1259 OID 65748)
-- Name: geacesso_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geacesso_unq ON public.geacesso USING btree (id_gegrupo_int, id_geaplicacao_int, tagobjeto_str);

--
-- TOC entry 10654 (class 1259 OID 79514)
-- Name: geacessogrid_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geacessogrid_idx1 ON public.geacessogrid USING btree (id_geaplicacao_int, id_gegrupo_int);

--
-- TOC entry 10655 (class 1259 OID 79515)
-- Name: geacessogrid_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geacessogrid_idx2 ON public.geacessogrid USING btree (id_geaplicacao_int);

--
-- TOC entry 10658 (class 1259 OID 79516)
-- Name: geacessogrid_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geacessogrid_unq ON public.geacessogrid USING btree (id_gegrupo_int, id_geaplicacao_int, grid_str, coluna_str);

--
-- TOC entry 10663 (class 1259 OID 79533)
-- Name: gealinea_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gealinea_unq ON public.gealinea USING btree (codigo_str);

--
-- TOC entry 10666 (class 1259 OID 66173)
-- Name: geaplicacao_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geaplicacao_unq ON public.geaplicacao USING btree (codigo_str);

--
-- TOC entry 10679 (class 1259 OID 66095)
-- Name: gecampotabela_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gecampotabela_unq ON public.gecampotabela USING btree (tabela_str, campo_str);

--
-- TOC entry 10680 (class 1259 OID 66622)
-- Name: gecargaacesso_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gecargaacesso_idx1 ON public.gecargaacesso USING btree (tagobjeto_str, tipo_str);

--
-- TOC entry 10683 (class 1259 OID 66623)
-- Name: gecargaacesso_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gecargaacesso_unq ON public.gecargaacesso USING btree (tagobjeto_str);

--
-- TOC entry 10690 (class 1259 OID 65722)
-- Name: gecidade_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gecidade_unq ON public.gecidade USING btree (codigo_str);

--
-- TOC entry 10698 (class 1259 OID 66224)
-- Name: gecliente_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gecliente_unq ON public.gecliente USING btree (codigo_str);

--
-- TOC entry 10717 (class 1259 OID 67254)
-- Name: geempresa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geempresa_unq ON public.geempresa USING btree (codigo_str);

--
-- TOC entry 10720 (class 1259 OID 79617)
-- Name: geenvioemail_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geenvioemail_idx1 ON public.geenvioemail USING btree (email_str);

--
-- TOC entry 10721 (class 1259 OID 79621)
-- Name: geenvioemail_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geenvioemail_idx2 ON public.geenvioemail USING btree (tstamp);

--
-- TOC entry 10726 (class 1259 OID 66388)
-- Name: geerrosys_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geerrosys_unq ON public.geerrosys USING btree (cod_erro);

--
-- TOC entry 10729 (class 1259 OID 67037)
-- Name: gefaixaatraso_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gefaixaatraso_unq ON public.gefaixaatraso USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 10734 (class 1259 OID 66796)
-- Name: geferiado_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geferiado_unq ON public.geferiado USING btree (data_dat);

--
-- TOC entry 10739 (class 1259 OID 79622)
-- Name: gefilacobranca_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gefilacobranca_idx1 ON public.gefilacobranca USING btree (id_gecliente_int, id_grupo_usuario_vinculado_int);

--
-- TOC entry 10740 (class 1259 OID 79627)
-- Name: gefilacobranca_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gefilacobranca_idx2 ON public.gefilacobranca USING btree (id_cbtiponegocio_int, id_cbcontrato_int);

--
-- TOC entry 10741 (class 1259 OID 79628)
-- Name: gefilacobranca_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gefilacobranca_idx3 ON public.gefilacobranca USING btree (_sequencia_int);

--
-- TOC entry 11323 (class 1259 OID 66749167)
-- Name: gefilacobrancaimporta_idcontrato; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gefilacobrancaimporta_idcontrato ON public.gefilacobrancaimporta USING btree (id_cbcontrato_int);

--
-- TOC entry 10748 (class 1259 OID 66510)
-- Name: gefilial_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gefilial_unq ON public.gefilial USING btree (id_geempresa_int, codigo_str);

--
-- TOC entry 10751 (class 1259 OID 66671)
-- Name: gefilialgrupo_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gefilialgrupo_unq ON public.gefilialgrupo USING btree (id_gegrupo_int, id_gefilial_int);

--
-- TOC entry 10754 (class 1259 OID 67106)
-- Name: gegrupo_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gegrupo_idx1 ON public.gegrupo USING btree (id_gegrupo_int);

--
-- TOC entry 10755 (class 1259 OID 67108)
-- Name: gegrupo_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gegrupo_unq ON public.gegrupo USING btree (id_gecliente_int, codigo_str);

--
-- TOC entry 10760 (class 1259 OID 79641)
-- Name: gegrupoespnotificacao_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gegrupoespnotificacao_unq ON public.gegrupoespnotificacao USING btree (codigo_str);

--
-- TOC entry 10763 (class 1259 OID 79663)
-- Name: gegrupoetapa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gegrupoetapa_unq ON public.gegrupoetapa USING btree (id_gegrupo_int, id_cbetapa_int);

--
-- TOC entry 10766 (class 1259 OID 66526)
-- Name: gegrupoparametro_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gegrupoparametro_idx0 ON public.gegrupoparametro USING btree (codigo_str);

--
-- TOC entry 10769 (class 1259 OID 66527)
-- Name: gegrupoparametro_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gegrupoparametro_unq ON public.gegrupoparametro USING btree (codigo_str);

--
-- TOC entry 10774 (class 1259 OID 66299)
-- Name: gegrupousuario_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gegrupousuario_idx1 ON public.gegrupousuario USING btree (id_geusuario_int, ativo_str);

--
-- TOC entry 10777 (class 1259 OID 66300)
-- Name: gegrupousuario_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gegrupousuario_unq ON public.gegrupousuario USING btree (id_gegrupo_int, id_geusuario_int);

--
-- TOC entry 10782 (class 1259 OID 45692)
-- Name: gehistoricousuario_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gehistoricousuario_idx1 ON public.gehistoricousuario USING btree (id_geusuario_int);

--
-- TOC entry 10783 (class 1259 OID 45698)
-- Name: gehistoricousuario_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gehistoricousuario_idx2 ON public.gehistoricousuario USING btree (data_hora_dat);

--
-- TOC entry 10784 (class 1259 OID 45704)
-- Name: gehistoricousuario_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gehistoricousuario_idx4 ON public.gehistoricousuario USING btree (contrato_str);

--
-- TOC entry 10789 (class 1259 OID 79705)
-- Name: geinstrucaobaixa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geinstrucaobaixa_unq ON public.geinstrucaobaixa USING btree (id_fibanco_int, id_gemotivobaixa_int, comando_str);

--
-- TOC entry 10800 (class 1259 OID 66628)
-- Name: geliberasitcontato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geliberasitcontato_idx1 ON public.geliberasitcontato USING btree (id_gecliente_int, id_gedepartamento_int, id_cbsitcontato_int);

--
-- TOC entry 10803 (class 1259 OID 79708)
-- Name: gelogdiscador_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gelogdiscador_idx1 ON public.gelogdiscador USING btree (id_geqlcontato_int, id_cbcontrato_int);

--
-- TOC entry 10810 (class 1259 OID 66139)
-- Name: gemenu_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gemenu_idx1 ON public.gemenu USING btree (id_geaplicacao_int);

--
-- TOC entry 10813 (class 1259 OID 66145)
-- Name: gemenu_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gemenu_unq ON public.gemenu USING btree (estrutura_str);

--
-- TOC entry 10822 (class 1259 OID 67392)
-- Name: gemotivobaixa_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gemotivobaixa_unq ON public.gemotivobaixa USING btree (codigo_str);

--
-- TOC entry 10823 (class 1259 OID 66834)
-- Name: gemotivoinadimplencia_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gemotivoinadimplencia_idx1 ON public.gemotivoinadimplencia USING btree (codigo_str);

--
-- TOC entry 10828 (class 1259 OID 79758)
-- Name: gemotivonajuizamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX gemotivonajuizamento_unq ON public.gemotivonajuizamento USING btree (codigo_int);

--
-- TOC entry 10839 (class 1259 OID 79793)
-- Name: geparamenvioemail_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geparamenvioemail_unq ON public.geparamenvioemail USING btree (remetente_str);

--
-- TOC entry 10843 (class 1259 OID 66055)
-- Name: geparametro_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geparametro_unq ON public.geparametro USING btree (id_gegrupoparametro_int, codigo_str);

--
-- TOC entry 10850 (class 1259 OID 67076)
-- Name: geparametroid_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geparametroid_unq ON public.geparametroid USING btree (tabela_str);

--
-- TOC entry 10863 (class 1259 OID 63807)
-- Name: geprocessocontrato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geprocessocontrato_idx1 ON public.geprocessocontrato USING btree (id_geitemprocesso_int, id_gegrupoprocesso_int);

--
-- TOC entry 10864 (class 1259 OID 63808)
-- Name: geprocessocontrato_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geprocessocontrato_idx2 ON public.geprocessocontrato USING btree (id_cbcontrato_int);

--
-- TOC entry 10865 (class 1259 OID 63809)
-- Name: geprocessocontrato_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geprocessocontrato_idx3 ON public.geprocessocontrato USING btree (id_gegrupoprocesso_int, id_geitemprocesso_int, prazo_dat);

--
-- TOC entry 10872 (class 1259 OID 63764)
-- Name: geqlbasaofila_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlbasaofila_idx1 ON public.geqlbasaofila USING btree (id_geqlcliente_int);

--
-- TOC entry 10873 (class 1259 OID 63765)
-- Name: geqlbasaofila_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlbasaofila_idx2 ON public.geqlbasaofila USING btree (cpf_str);

--
-- TOC entry 10874 (class 1259 OID 63766)
-- Name: geqlbasaofila_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlbasaofila_idx3 ON public.geqlbasaofila USING btree (cpf_tratado_str);

--
-- TOC entry 10875 (class 1259 OID 63767)
-- Name: geqlbasaofila_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlbasaofila_idx4 ON public.geqlbasaofila USING btree (id_transmite_str);

--
-- TOC entry 10876 (class 1259 OID 63768)
-- Name: geqlbasaofila_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlbasaofila_idx5 ON public.geqlbasaofila USING btree (lote_int);

--
-- TOC entry 10877 (class 1259 OID 63830)
-- Name: geqlcliente_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geqlcliente_idx1 ON public.geqlcliente USING btree (cpf_str);

--
-- TOC entry 10878 (class 1259 OID 63833)
-- Name: geqlcliente_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcliente_idx3 ON public.geqlcliente USING btree (public.abs_cpf((cpf_str)::text));

--
-- TOC entry 10889 (class 1259 OID 63679)
-- Name: geqlcontato_feriado; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_feriado ON public.geqlcontato USING btree (trava_feriado_str);

--
-- TOC entry 10890 (class 1259 OID 63684)
-- Name: geqlcontato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_idx1 ON public.geqlcontato USING btree (id_geqlcliente_int);

--
-- TOC entry 10891 (class 1259 OID 63690)
-- Name: geqlcontato_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_idx2 ON public.geqlcontato USING btree (id_geqlendereco_int);

--
-- TOC entry 10892 (class 1259 OID 63691)
-- Name: geqlcontato_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_idx3 ON public.geqlcontato USING btree (contato_str);

--
-- TOC entry 10893 (class 1259 OID 63692)
-- Name: geqlcontato_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_idx4 ON public.geqlcontato USING btree (score_int);

--
-- TOC entry 10894 (class 1259 OID 63693)
-- Name: geqlcontato_idx_excluido; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_idx_excluido ON public.geqlcontato USING btree (excluido_bit);

--
-- TOC entry 10901 (class 1259 OID 45713)
-- Name: geqlcontato_improdutivo_block_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_improdutivo_block_idx1 ON public.geqlcontato_improdutivo_block USING btree (contato_str);

--
-- TOC entry 10895 (class 1259 OID 63694)
-- Name: geqlcontato_number_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_number_idx ON public.geqlcontato USING btree (public.to_number(('0'::text || (contato_str)::text), '99999999999999999999'::text));

--
-- TOC entry 10902 (class 1259 OID 79859)
-- Name: geqlcontato_old_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontato_old_idx1 ON public.geqlcontato_old USING btree (id_geqlcontato_int);

--
-- TOC entry 10903 (class 1259 OID 63871)
-- Name: geqlcontrato_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontrato_idx1 ON public.geqlcontrato USING btree (id_geqlcliente_int);

--
-- TOC entry 10904 (class 1259 OID 63872)
-- Name: geqlcontrato_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlcontrato_idx2 ON public.geqlcontrato USING btree (id_cbcontrato_int);

--
-- TOC entry 10907 (class 1259 OID 63818)
-- Name: geqlemail_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlemail_idx1 ON public.geqlemail USING btree (id_geqlcliente_int);

--
-- TOC entry 10908 (class 1259 OID 63819)
-- Name: geqlemail_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlemail_idx3 ON public.geqlemail USING btree (email_str);

--
-- TOC entry 10912 (class 1259 OID 79863)
-- Name: geqlemailbloqueado_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlemailbloqueado_idx1 ON public.geqlemailbloqueado USING btree (email_str);

--
-- TOC entry 10915 (class 1259 OID 79916)
-- Name: geqlemaildominiobloqueado_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlemaildominiobloqueado_idx1 ON public.geqlemaildominiobloqueado USING btree (dominio_str);

--
-- TOC entry 10918 (class 1259 OID 79937)
-- Name: geqlemailexcecao_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlemailexcecao_idx1 ON public.geqlemailexcecao USING btree (email_str);

--
-- TOC entry 10921 (class 1259 OID 63783)
-- Name: geqlendereco_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlendereco_idx1 ON public.geqlendereco USING btree (id_geqlcliente_int);

--
-- TOC entry 10927 (class 1259 OID 63769)
-- Name: geqlhistorico_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqlhistorico_idx1 ON public.geqlhistorico USING btree (id_geqlcliente_int);

--
-- TOC entry 10944 (class 1259 OID 65732)
-- Name: geqltratamento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqltratamento_idx1 ON public.geqltratamento USING btree (id_geqlcliente_int);

--
-- TOC entry 10949 (class 1259 OID 80397)
-- Name: geqltratamentoemail_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geqltratamentoemail_idx3 ON public.geqltratamentoemail USING btree (id_geqltratamento_int);

--
-- TOC entry 10960 (class 1259 OID 80571)
-- Name: geretornocma_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornocma_idx ON public.geretornocma USING btree (id_cbitembordero_int);

--
-- TOC entry 10961 (class 1259 OID 80582)
-- Name: geretornocma_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornocma_idx2 ON public.geretornocma USING btree (chave_cma_str);

--
-- TOC entry 10962 (class 1259 OID 80588)
-- Name: geretornocma_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornocma_idx3 ON public.geretornocma USING btree (id_cbitembordero_int);

--
-- TOC entry 10963 (class 1259 OID 80589)
-- Name: geretornocma_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornocma_idx4 ON public.geretornocma USING btree (venc_boleto_dat);

--
-- TOC entry 10966 (class 1259 OID 63857)
-- Name: geretornosms_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornosms_idx4 ON public.geretornosms USING btree (id_gecliente_int);

--
-- TOC entry 10967 (class 1259 OID 63858)
-- Name: geretornosms_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornosms_idx5 ON public.geretornosms USING btree (id_gecliente_int, data_agendamento_dat, tipo_registro_str);

--
-- TOC entry 10968 (class 1259 OID 63859)
-- Name: geretornosms_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geretornosms_idx6 ON public.geretornosms USING btree (id_gecliente_int, tipo_registro_str, id_cbcontrato_int);

--
-- TOC entry 10979 (class 1259 OID 80631)
-- Name: gesolicitacaodocumento_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gesolicitacaodocumento_idx1 ON public.gesolicitacaodocumento USING btree (id_cbcontrato_int);

--
-- TOC entry 10988 (class 1259 OID 63822)
-- Name: gestatusimporta_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gestatusimporta_idx2 ON public.gestatusimporta USING btree (data_importacao_dat);

--
-- TOC entry 10989 (class 1259 OID 63823)
-- Name: gestatusimporta_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX gestatusimporta_idx3 ON public.gestatusimporta USING btree (id_gecliente_int);

--
-- TOC entry 11006 (class 1259 OID 80727)
-- Name: getipogarantia_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX getipogarantia_unq ON public.getipogarantia USING btree (codigo_str);

--
-- TOC entry 11016 (class 1259 OID 67308)
-- Name: getipopendencianaojuizamento_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX getipopendencianaojuizamento_unq ON public.getipopendencianaojuizamento USING btree (codigo_str);

--
-- TOC entry 11029 (class 1259 OID 67009)
-- Name: geuf_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geuf_unq ON public.geuf USING btree (uf_str);

--
-- TOC entry 11030 (class 1259 OID 63905)
-- Name: geusuario_idx_bi1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geusuario_idx_bi1 ON public.geusuario USING btree (codigo_rh_str);

--
-- TOC entry 11031 (class 1259 OID 63906)
-- Name: geusuario_idx_bi2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX geusuario_idx_bi2 ON public.geusuario USING btree (cpf_str);

--
-- TOC entry 11034 (class 1259 OID 63907)
-- Name: geusuario_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geusuario_unq ON public.geusuario USING btree (nomelogin_str);

--
-- TOC entry 11037 (class 1259 OID 63908)
-- Name: geusuario_unq_bi; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geusuario_unq_bi ON public.geusuario USING btree (cpf_str);

--
-- TOC entry 11042 (class 1259 OID 63949)
-- Name: geusuariocliente_unq; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX geusuariocliente_unq ON public.geusuariocliente USING btree (id_geusuario_int, id_gecliente_int);

--
-- TOC entry 11072 (class 1259 OID 80873)
-- Name: honda_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX honda_idx1 ON public.importahondatmp USING btree (vlr_inicial_str);

--
-- TOC entry 11073 (class 1259 OID 80874)
-- Name: honda_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX honda_idx2 ON public.importahondatmp USING btree (vlr_inicial_str, inclui_altera);

--
-- TOC entry 11074 (class 1259 OID 80875)
-- Name: honda_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX honda_idx3 ON public.importahondatmp USING btree (vlr_inicial_str, inclui_altera_parc);

--
-- TOC entry 9721 (class 1259 OID 68289)
-- Name: id_cbdespesa_pkey; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX id_cbdespesa_pkey ON public.cbdespesa USING btree (id_cbdespesa_int);

--
-- TOC entry 11262 (class 1259 OID 45856)
-- Name: id_cbobito_int_full_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX id_cbobito_int_full_idx1 ON public.temp_cbobito_full USING btree (id_cbobito_int);

--
-- TOC entry 10321 (class 1259 OID 45797)
-- Name: id_cbobito_int_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX id_cbobito_int_idx1 ON public.cbobito USING btree (id_cbobito_int);

--
-- TOC entry 10602 (class 1259 OID 66530)
-- Name: id_fibanco_pkey; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX id_fibanco_pkey ON public.fibanco USING btree (id_fibanco_int);

--
-- TOC entry 11054 (class 1259 OID 66107)
-- Name: id_gevalorparametro_int_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX id_gevalorparametro_int_idx0 ON public.gevalorparametro USING btree (id_gevalorparametro_int);

--
-- TOC entry 11263 (class 1259 OID 45857)
-- Name: identificador_int_full_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX identificador_int_full_idx4 ON public.temp_cbobito_full USING btree (identificador_int);

--
-- TOC entry 10322 (class 1259 OID 45810)
-- Name: identificador_int_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX identificador_int_idx4 ON public.cbobito USING btree (identificador_int);

--
-- TOC entry 9771 (class 1259 OID 45464)
-- Name: idx2_cbfollowup; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx2_cbfollowup ON public.cbfollowup USING btree (id_cbcontrato_int, id_cbparcela_int);

--
-- TOC entry 9772 (class 1259 OID 45471)
-- Name: idx3_cbfollowup; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx3_cbfollowup ON public.cbfollowup USING btree (id_cbparcela_int, id_cbsitcontato_int);

--
-- TOC entry 9450 (class 1259 OID 67840)
-- Name: idx_bi_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_bi_01 ON public.cbcontrato USING btree (tstamp);

--
-- TOC entry 9329 (class 1259 OID 67605)
-- Name: idx_cbacompanhamentocontrato_1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_cbacompanhamentocontrato_1 ON public.cbacompanhamentocontrato USING btree (codigo_sequencia_int, campanha_str, data_hora_tim);

--
-- TOC entry 9330 (class 1259 OID 67606)
-- Name: idx_cbacompanhamentocontrato_2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_cbacompanhamentocontrato_2 ON public.cbacompanhamentocontrato USING btree (id_cbcontrato_int);

--
-- TOC entry 9733 (class 1259 OID 63776)
-- Name: idx_cbdistribparcela_id_cbcontrato_int; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_cbdistribparcela_id_cbcontrato_int ON public.cbdistribparcela USING btree (id_cbcontrato_int);

--
-- TOC entry 10502 (class 1259 OID 75980)
-- Name: idx_coringacbcontratomd2_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_coringacbcontratomd2_01 ON public.coringacbcontratomd2 USING btree (id_cbcontrato_int);

--
-- TOC entry 10505 (class 1259 OID 76166)
-- Name: idx_coringacbparcelamd2_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_coringacbparcelamd2_01 ON public.coringacbparcelamd2 USING btree (id_cbparcela_int);

--
-- TOC entry 10508 (class 1259 OID 76102)
-- Name: idx_coringageqlcontatomd2_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_coringageqlcontatomd2_01 ON public.coringageqlcontatomd2 USING btree (id_geqlcontato_int);

--
-- TOC entry 10511 (class 1259 OID 76290)
-- Name: idx_coringageqlemailmd2_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_coringageqlemailmd2_01 ON public.coringageqlemailmd2 USING btree (id_geqlemail_int);

--
-- TOC entry 10514 (class 1259 OID 76439)
-- Name: idx_coringageqlenderecomd2_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_coringageqlenderecomd2_01 ON public.coringageqlenderecomd2 USING btree (id_geqlendereco_int);

--
-- TOC entry 11011 (class 1259 OID 67501)
-- Name: idx_getipometa_idx_01; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_getipometa_idx_01 ON public.getipometa USING btree (codigo_int);

--
-- TOC entry 10273 (class 1259 OID 68580)
-- Name: idx_id_cbcontrato_int; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_id_cbcontrato_int ON public.cbitemborderohistoricogeusuario USING btree (id_cbcontrato_int);

--
-- TOC entry 10274 (class 1259 OID 68582)
-- Name: idx_id_geusuario_int; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_id_geusuario_int ON public.cbitemborderohistoricogeusuario USING btree (id_geusuario_int);

--
-- TOC entry 10275 (class 1259 OID 68590)
-- Name: idx_id_geusuario_old_int; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_id_geusuario_old_int ON public.cbitemborderohistoricogeusuario USING btree (id_geusuario_old_int);

--
-- TOC entry 9664 (class 1259 OID 68153)
-- Name: idx_mdm_cbcontrato; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbcontrato ON public.cbcontratopirelli USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 9563 (class 1259 OID 63747)
-- Name: idx_mdm_cbcontratoeleva; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbcontratoeleva ON public.cbcontratoeleva USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 9773 (class 1259 OID 45482)
-- Name: idx_mdm_cbfollowup; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbfollowup ON public.cbfollowup USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 9813 (class 1259 OID 62432)
-- Name: idx_mdm_cbitembordero; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbitembordero ON public.cbitembordero USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10336 (class 1259 OID 65772)
-- Name: idx_mdm_cbpagamento; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbpagamento ON public.cbpagamento USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10347 (class 1259 OID 45838)
-- Name: idx_mdm_cbparcela; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbparcela ON public.cbparcela USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10357 (class 1259 OID 63699)
-- Name: idx_mdm_cbparcelaitembordero; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbparcelaitembordero ON public.cbparcelaitembordero USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10363 (class 1259 OID 65796)
-- Name: idx_mdm_cbparcelapagamento; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_cbparcelapagamento ON public.cbparcelapagamento USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10693 (class 1259 OID 67417)
-- Name: idx_mdm_geclassificacaocontato; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_geclassificacaocontato ON public.geclassificacaocontato USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10898 (class 1259 OID 63704)
-- Name: idx_mdm_geqlcontato; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_geqlcontato ON public.geqlcontato USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10911 (class 1259 OID 63820)
-- Name: idx_mdm_geqlemail; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_geqlemail ON public.geqlemail USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 10924 (class 1259 OID 63784)
-- Name: idx_mdm_geqlendereco; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_geqlendereco ON public.geqlendereco USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 11038 (class 1259 OID 63909)
-- Name: idx_mdm_gestatusimporta; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_gestatusimporta ON public.geusuario USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 11039 (class 1259 OID 63910)
-- Name: idx_mdm_geusuario; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_geusuario ON public.geusuario USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 11043 (class 1259 OID 63955)
-- Name: idx_mdm_geusuariocliente; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_mdm_geusuariocliente ON public.geusuariocliente USING btree (tstamp_mdm_alteracao);

--
-- TOC entry 9665 (class 1259 OID 68154)
-- Name: idx_tstamp; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_tstamp ON public.cbcontratopirelli USING btree (tstamp);

--
-- TOC entry 9564 (class 1259 OID 63748)
-- Name: idx_tstamp_cbcontratoeleva; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX idx_tstamp_cbcontratoeleva ON public.cbcontratoeleva USING btree (tstamp);

--
-- TOC entry 11065 (class 1259 OID 80858)
-- Name: importabradescotmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx1 ON public.importabradescotmp USING btree (agencia, conta);

--
-- TOC entry 11066 (class 1259 OID 80859)
-- Name: importabradescotmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx2 ON public.importabradescotmp USING btree (num_contrato);

--
-- TOC entry 11067 (class 1259 OID 80860)
-- Name: importabradescotmp_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx3 ON public.importabradescotmp USING btree (id_cbtiponegocio);

--
-- TOC entry 11068 (class 1259 OID 80861)
-- Name: importabradescotmp_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx4 ON public.importabradescotmp USING btree (num_parcela);

--
-- TOC entry 11069 (class 1259 OID 80862)
-- Name: importabradescotmp_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx5 ON public.importabradescotmp USING btree (inclui_altera);

--
-- TOC entry 11070 (class 1259 OID 80863)
-- Name: importabradescotmp_idx8; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx8 ON public.importabradescotmp USING btree (inclui_altera_parcela, num_contrato, tipo_negocio);

--
-- TOC entry 11071 (class 1259 OID 80864)
-- Name: importabradescotmp_idx9; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importabradescotmp_idx9 ON public.importabradescotmp USING btree (inclui_altera_parcela, num_parcela, num_contrato, tipo_negocio);

--
-- TOC entry 11075 (class 1259 OID 80882)
-- Name: importaitaubancotmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importaitaubancotmp_idx1 ON public.importaitaubancotmp USING btree (cpf_cli);

--
-- TOC entry 11076 (class 1259 OID 80900)
-- Name: importapantmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importapantmp_idx1 ON public.importapantmp USING btree (tipo_registro, inclui_altera);

--
-- TOC entry 11077 (class 1259 OID 80901)
-- Name: importapantmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX importapantmp_idx2 ON public.importapantmp USING btree (tipo_registro, inclui_altera_parcela);

--
-- TOC entry 11080 (class 1259 OID 66874)
-- Name: re001tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re001tmp_idx1 ON public.re001tmp USING btree (chave_str);

--
-- TOC entry 11081 (class 1259 OID 80954)
-- Name: re002tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re002tmp_idx1 ON public.re002tmp USING btree (chave_str);

--
-- TOC entry 11082 (class 1259 OID 80956)
-- Name: re008tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re008tmp_idx1 ON public.re008tmp USING btree (chave_str);

--
-- TOC entry 11083 (class 1259 OID 80959)
-- Name: re009tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re009tmp_idx1 ON public.re009tmp USING btree (chave_str);

--
-- TOC entry 11084 (class 1259 OID 81386)
-- Name: re011tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re011tmp_idx1 ON public.re011tmp USING btree (chave_str, id_cbcontrato_int);

--
-- TOC entry 11085 (class 1259 OID 80961)
-- Name: re013tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re013tmp_idx1 ON public.re013tmp USING btree (chave_str);

--
-- TOC entry 11086 (class 1259 OID 80963)
-- Name: re014mp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re014mp_idx1 ON public.re014tmp USING btree (chave_str);

--
-- TOC entry 11087 (class 1259 OID 81398)
-- Name: re017tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re017tmp_idx1 ON public.re017tmp USING btree (chave_str);

--
-- TOC entry 11088 (class 1259 OID 80969)
-- Name: re021tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re021tmp_idx1 ON public.re021tmp USING btree (chave_str);

--
-- TOC entry 11089 (class 1259 OID 66007)
-- Name: re023tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re023tmp_idx1 ON public.re023tmp USING btree (chave_str);

--
-- TOC entry 11090 (class 1259 OID 66009)
-- Name: re023tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re023tmp_idx2 ON public.re023tmp USING btree (chave_str, geusuario_id_geusuario_int);

--
-- TOC entry 11091 (class 1259 OID 66015)
-- Name: re023tmp_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re023tmp_idx3 ON public.re023tmp USING btree (chave_str, cbcontrato_id_cbcontrato_int, cbsitcontato_codigo_int);

--
-- TOC entry 11092 (class 1259 OID 80981)
-- Name: re030tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re030tmp_idx1 ON public.re030tmp USING btree (chave_str);

--
-- TOC entry 11093 (class 1259 OID 80983)
-- Name: re033tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re033tmp_idx1 ON public.re033tmp USING btree (chave_str);

--
-- TOC entry 11094 (class 1259 OID 80982)
-- Name: re034tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re034tmp_idx1 ON public.re034tmp USING btree (chave_str);

--
-- TOC entry 11095 (class 1259 OID 80992)
-- Name: re041mp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re041mp_idx2 ON public.re041tmp USING btree (chave_str, cbcontrato_id_cbcontrato_int);

--
-- TOC entry 11096 (class 1259 OID 80995)
-- Name: re047tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re047tmp_idx1 ON public.re047tmp USING btree (chave_str);

--
-- TOC entry 11097 (class 1259 OID 80998)
-- Name: re052mp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re052mp_idx1 ON public.re052tmp USING btree (chave_str);

--
-- TOC entry 11098 (class 1259 OID 81002)
-- Name: re053mp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re053mp_idx1 ON public.re053tmp USING btree (chave_str);

--
-- TOC entry 11099 (class 1259 OID 81003)
-- Name: re055tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re055tmp_idx1 ON public.re055tmp USING btree (chave_str);

--
-- TOC entry 11100 (class 1259 OID 81024)
-- Name: re072tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re072tmp_idx1 ON public.re072tmp USING btree (chave_str);

--
-- TOC entry 11101 (class 1259 OID 81026)
-- Name: re075tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re075tmp_idx1 ON public.re075tmp USING btree (chave_str);

--
-- TOC entry 11103 (class 1259 OID 81032)
-- Name: re081tmp_grafico_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re081tmp_grafico_idx1 ON public.re081tmp_grafico USING btree (chave_str);

--
-- TOC entry 11102 (class 1259 OID 81030)
-- Name: re081tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re081tmp_idx1 ON public.re081tmp USING btree (chave_str);

--
-- TOC entry 11104 (class 1259 OID 81036)
-- Name: re081tmp_pan_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re081tmp_pan_idx1 ON public.re081tmp_pan USING btree (chave_str);

--
-- TOC entry 11105 (class 1259 OID 81037)
-- Name: re081tmp_total_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re081tmp_total_idx1 ON public.re081tmp_total USING btree (chave_str);

--
-- TOC entry 11106 (class 1259 OID 81040)
-- Name: re084tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re084tmp_idx1 ON public.re084tmp USING btree (chave_str);

--
-- TOC entry 11107 (class 1259 OID 81044)
-- Name: re088tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re088tmp_idx1 ON public.re088tmp USING btree (chave_str);

--
-- TOC entry 11108 (class 1259 OID 81048)
-- Name: re092tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re092tmp_idx1 ON public.re092tmp USING btree (chave_str);

--
-- TOC entry 11109 (class 1259 OID 81049)
-- Name: re093tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re093tmp_idx1 ON public.re093tmp USING btree (chave_str);

--
-- TOC entry 11110 (class 1259 OID 81058)
-- Name: re102mp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re102mp_idx1 ON public.re102tmp USING btree (chave_str);

--
-- TOC entry 11111 (class 1259 OID 81064)
-- Name: re115mp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re115mp_idx1 ON public.re115tmp USING btree (chave_str);

--
-- TOC entry 11112 (class 1259 OID 81067)
-- Name: re117mp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re117mp_idx1 ON public.re117tmp USING btree (chave_str);

--
-- TOC entry 11113 (class 1259 OID 81110)
-- Name: re154tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re154tmp_idx1 ON public.re154tmp USING btree (chave_str, id_cbcontrato_int);

--
-- TOC entry 11114 (class 1259 OID 81399)
-- Name: re155tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re155tmp_idx1 ON public.re155tmp USING btree (chave_str);

--
-- TOC entry 11115 (class 1259 OID 81400)
-- Name: re155tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re155tmp_idx2 ON public.re155tmp USING btree (id_cbtiponegocio_int);

--
-- TOC entry 11116 (class 1259 OID 81401)
-- Name: re155tmp_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re155tmp_idx3 ON public.re155tmp USING btree (id_cbcontrato_int);

--
-- TOC entry 11117 (class 1259 OID 81402)
-- Name: re155tmp_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re155tmp_idx4 ON public.re155tmp USING btree (id_cbparcela_int);

--
-- TOC entry 11118 (class 1259 OID 81111)
-- Name: re157tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re157tmp_idx1 ON public.re157tmp USING btree (chave_str, id_cbcontrato_int);

--
-- TOC entry 11119 (class 1259 OID 81112)
-- Name: re158tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re158tmp_idx1 ON public.re158tmp USING btree (chave_str);

--
-- TOC entry 11120 (class 1259 OID 81113)
-- Name: re158tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re158tmp_idx2 ON public.re158tmp USING btree (id_cbcontrato_int, chave_str);

--
-- TOC entry 11122 (class 1259 OID 81119)
-- Name: re161tmp_boletos_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re161tmp_boletos_idx1 ON public.re161tmp_boletos USING btree (chave_str, id_cbcontrato_int);

--
-- TOC entry 11121 (class 1259 OID 81118)
-- Name: re161tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re161tmp_idx1 ON public.re161tmp USING btree (chave_str);

--
-- TOC entry 11123 (class 1259 OID 81121)
-- Name: re164tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re164tmp_idx1 ON public.re164tmp USING btree (chave_str);

--
-- TOC entry 11124 (class 1259 OID 65945)
-- Name: re176tmp_analitico_10_100_49_250_8314_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_100_49_250_8314_idx1 ON public.re176tmp_analitico_10_100_49_250_8314 USING btree (id_cbcontrato_int);

--
-- TOC entry 11125 (class 1259 OID 65946)
-- Name: re176tmp_analitico_10_100_49_250_8314_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_100_49_250_8314_idx2 ON public.re176tmp_analitico_10_100_49_250_8314 USING btree (id_geusuario_int);

--
-- TOC entry 11126 (class 1259 OID 63911)
-- Name: re176tmp_analitico_10_100_50_112_8133_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_100_50_112_8133_idx1 ON public.re176tmp_analitico_10_100_50_112_8133 USING btree (id_cbcontrato_int);

--
-- TOC entry 11127 (class 1259 OID 63912)
-- Name: re176tmp_analitico_10_100_50_112_8133_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_100_50_112_8133_idx2 ON public.re176tmp_analitico_10_100_50_112_8133 USING btree (id_geusuario_int);

--
-- TOC entry 11128 (class 1259 OID 66075)
-- Name: re176tmp_analitico_10_100_50_169_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_100_50_169_8295_idx1 ON public.re176tmp_analitico_10_100_50_169_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11129 (class 1259 OID 66080)
-- Name: re176tmp_analitico_10_100_50_169_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_100_50_169_8295_idx2 ON public.re176tmp_analitico_10_100_50_169_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11130 (class 1259 OID 66511)
-- Name: re176tmp_analitico_10_108_14_160_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_14_160_8104_idx1 ON public.re176tmp_analitico_10_108_14_160_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11131 (class 1259 OID 66513)
-- Name: re176tmp_analitico_10_108_14_160_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_14_160_8104_idx2 ON public.re176tmp_analitico_10_108_14_160_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11132 (class 1259 OID 66528)
-- Name: re176tmp_analitico_10_108_15_168_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_168_8104_idx1 ON public.re176tmp_analitico_10_108_15_168_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11133 (class 1259 OID 66529)
-- Name: re176tmp_analitico_10_108_15_168_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_168_8104_idx2 ON public.re176tmp_analitico_10_108_15_168_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11134 (class 1259 OID 66633)
-- Name: re176tmp_analitico_10_108_15_252_8193_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_252_8193_idx1 ON public.re176tmp_analitico_10_108_15_252_8193 USING btree (id_cbcontrato_int);

--
-- TOC entry 11135 (class 1259 OID 66634)
-- Name: re176tmp_analitico_10_108_15_252_8193_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_252_8193_idx2 ON public.re176tmp_analitico_10_108_15_252_8193 USING btree (id_geusuario_int);

--
-- TOC entry 11136 (class 1259 OID 66081)
-- Name: re176tmp_analitico_10_108_15_51_8376_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_51_8376_idx1 ON public.re176tmp_analitico_10_108_15_51_8376 USING btree (id_cbcontrato_int);

--
-- TOC entry 11137 (class 1259 OID 66082)
-- Name: re176tmp_analitico_10_108_15_51_8376_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_51_8376_idx2 ON public.re176tmp_analitico_10_108_15_51_8376 USING btree (id_geusuario_int);

--
-- TOC entry 11138 (class 1259 OID 65960)
-- Name: re176tmp_analitico_10_108_15_52_8376_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_52_8376_idx1 ON public.re176tmp_analitico_10_108_15_52_8376 USING btree (id_cbcontrato_int);

--
-- TOC entry 11139 (class 1259 OID 65961)
-- Name: re176tmp_analitico_10_108_15_52_8376_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_52_8376_idx2 ON public.re176tmp_analitico_10_108_15_52_8376 USING btree (id_geusuario_int);

--
-- TOC entry 11140 (class 1259 OID 66876)
-- Name: re176tmp_analitico_10_108_15_54_8193_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_54_8193_idx1 ON public.re176tmp_analitico_10_108_15_54_8193 USING btree (id_cbcontrato_int);

--
-- TOC entry 11141 (class 1259 OID 66882)
-- Name: re176tmp_analitico_10_108_15_54_8193_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_54_8193_idx2 ON public.re176tmp_analitico_10_108_15_54_8193 USING btree (id_geusuario_int);

--
-- TOC entry 11142 (class 1259 OID 66508)
-- Name: re176tmp_analitico_10_108_15_54_8220_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_54_8220_idx1 ON public.re176tmp_analitico_10_108_15_54_8220 USING btree (id_cbcontrato_int);

--
-- TOC entry 11143 (class 1259 OID 66509)
-- Name: re176tmp_analitico_10_108_15_54_8220_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_54_8220_idx2 ON public.re176tmp_analitico_10_108_15_54_8220 USING btree (id_geusuario_int);

--
-- TOC entry 11144 (class 1259 OID 66377)
-- Name: re176tmp_analitico_10_108_15_63_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_63_8104_idx1 ON public.re176tmp_analitico_10_108_15_63_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11145 (class 1259 OID 66378)
-- Name: re176tmp_analitico_10_108_15_63_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_15_63_8104_idx2 ON public.re176tmp_analitico_10_108_15_63_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11146 (class 1259 OID 66576)
-- Name: re176tmp_analitico_10_108_17_160_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_17_160_8104_idx1 ON public.re176tmp_analitico_10_108_17_160_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11147 (class 1259 OID 66577)
-- Name: re176tmp_analitico_10_108_17_160_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_17_160_8104_idx2 ON public.re176tmp_analitico_10_108_17_160_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11148 (class 1259 OID 66256)
-- Name: re176tmp_analitico_10_108_228_120_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_120_8295_idx1 ON public.re176tmp_analitico_10_108_228_120_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11149 (class 1259 OID 66257)
-- Name: re176tmp_analitico_10_108_228_120_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_120_8295_idx2 ON public.re176tmp_analitico_10_108_228_120_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11150 (class 1259 OID 66303)
-- Name: re176tmp_analitico_10_108_228_123_8230_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_123_8230_idx1 ON public.re176tmp_analitico_10_108_228_123_8230 USING btree (id_cbcontrato_int);

--
-- TOC entry 11151 (class 1259 OID 66304)
-- Name: re176tmp_analitico_10_108_228_123_8230_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_123_8230_idx2 ON public.re176tmp_analitico_10_108_228_123_8230 USING btree (id_geusuario_int);

--
-- TOC entry 11152 (class 1259 OID 81343)
-- Name: re176tmp_analitico_10_108_228_133_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_133_8295_idx1 ON public.re176tmp_analitico_10_108_228_133_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11153 (class 1259 OID 81344)
-- Name: re176tmp_analitico_10_108_228_133_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_133_8295_idx2 ON public.re176tmp_analitico_10_108_228_133_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11154 (class 1259 OID 66379)
-- Name: re176tmp_analitico_10_108_228_138_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_138_8295_idx1 ON public.re176tmp_analitico_10_108_228_138_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11155 (class 1259 OID 66380)
-- Name: re176tmp_analitico_10_108_228_138_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_138_8295_idx2 ON public.re176tmp_analitico_10_108_228_138_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11156 (class 1259 OID 67247)
-- Name: re176tmp_analitico_10_108_228_13_8039_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_13_8039_idx1 ON public.re176tmp_analitico_10_108_228_13_8039 USING btree (id_cbcontrato_int);

--
-- TOC entry 11157 (class 1259 OID 67253)
-- Name: re176tmp_analitico_10_108_228_13_8039_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_13_8039_idx2 ON public.re176tmp_analitico_10_108_228_13_8039 USING btree (id_geusuario_int);

--
-- TOC entry 11158 (class 1259 OID 66199)
-- Name: re176tmp_analitico_10_108_228_164_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_164_8295_idx1 ON public.re176tmp_analitico_10_108_228_164_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11159 (class 1259 OID 66215)
-- Name: re176tmp_analitico_10_108_228_164_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_164_8295_idx2 ON public.re176tmp_analitico_10_108_228_164_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11160 (class 1259 OID 65962)
-- Name: re176tmp_analitico_10_108_228_172_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_172_8295_idx1 ON public.re176tmp_analitico_10_108_228_172_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11161 (class 1259 OID 65963)
-- Name: re176tmp_analitico_10_108_228_172_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_172_8295_idx2 ON public.re176tmp_analitico_10_108_228_172_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11162 (class 1259 OID 66352)
-- Name: re176tmp_analitico_10_108_228_175_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_175_8295_idx1 ON public.re176tmp_analitico_10_108_228_175_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11163 (class 1259 OID 66353)
-- Name: re176tmp_analitico_10_108_228_175_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_175_8295_idx2 ON public.re176tmp_analitico_10_108_228_175_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11164 (class 1259 OID 67023)
-- Name: re176tmp_analitico_10_108_228_178_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_178_8295_idx1 ON public.re176tmp_analitico_10_108_228_178_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11165 (class 1259 OID 67024)
-- Name: re176tmp_analitico_10_108_228_178_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_178_8295_idx2 ON public.re176tmp_analitico_10_108_228_178_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11166 (class 1259 OID 66094)
-- Name: re176tmp_analitico_10_108_228_179_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_179_8295_idx1 ON public.re176tmp_analitico_10_108_228_179_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11167 (class 1259 OID 66101)
-- Name: re176tmp_analitico_10_108_228_179_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_179_8295_idx2 ON public.re176tmp_analitico_10_108_228_179_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11168 (class 1259 OID 66483)
-- Name: re176tmp_analitico_10_108_228_182_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_182_8295_idx1 ON public.re176tmp_analitico_10_108_228_182_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11169 (class 1259 OID 66497)
-- Name: re176tmp_analitico_10_108_228_182_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_182_8295_idx2 ON public.re176tmp_analitico_10_108_228_182_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11170 (class 1259 OID 66619)
-- Name: re176tmp_analitico_10_108_228_184_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_184_8295_idx1 ON public.re176tmp_analitico_10_108_228_184_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11171 (class 1259 OID 66624)
-- Name: re176tmp_analitico_10_108_228_184_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_184_8295_idx2 ON public.re176tmp_analitico_10_108_228_184_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11172 (class 1259 OID 66865)
-- Name: re176tmp_analitico_10_108_228_186_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_186_8295_idx1 ON public.re176tmp_analitico_10_108_228_186_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11173 (class 1259 OID 66866)
-- Name: re176tmp_analitico_10_108_228_186_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_186_8295_idx2 ON public.re176tmp_analitico_10_108_228_186_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11174 (class 1259 OID 65783)
-- Name: re176tmp_analitico_10_108_228_186_8382_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_186_8382_idx1 ON public.re176tmp_analitico_10_108_228_186_8382 USING btree (id_cbcontrato_int);

--
-- TOC entry 11175 (class 1259 OID 65790)
-- Name: re176tmp_analitico_10_108_228_186_8382_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_186_8382_idx2 ON public.re176tmp_analitico_10_108_228_186_8382 USING btree (id_geusuario_int);

--
-- TOC entry 11176 (class 1259 OID 67031)
-- Name: re176tmp_analitico_10_108_228_187_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_187_8295_idx1 ON public.re176tmp_analitico_10_108_228_187_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11177 (class 1259 OID 67034)
-- Name: re176tmp_analitico_10_108_228_187_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_187_8295_idx2 ON public.re176tmp_analitico_10_108_228_187_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11178 (class 1259 OID 66814)
-- Name: re176tmp_analitico_10_108_228_188_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_188_8295_idx1 ON public.re176tmp_analitico_10_108_228_188_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11179 (class 1259 OID 66822)
-- Name: re176tmp_analitico_10_108_228_188_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_188_8295_idx2 ON public.re176tmp_analitico_10_108_228_188_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11180 (class 1259 OID 66291)
-- Name: re176tmp_analitico_10_108_228_189_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_189_8295_idx1 ON public.re176tmp_analitico_10_108_228_189_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11181 (class 1259 OID 66293)
-- Name: re176tmp_analitico_10_108_228_189_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_189_8295_idx2 ON public.re176tmp_analitico_10_108_228_189_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11182 (class 1259 OID 66597)
-- Name: re176tmp_analitico_10_108_228_190_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_190_8295_idx1 ON public.re176tmp_analitico_10_108_228_190_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11183 (class 1259 OID 66598)
-- Name: re176tmp_analitico_10_108_228_190_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_190_8295_idx2 ON public.re176tmp_analitico_10_108_228_190_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11184 (class 1259 OID 66337)
-- Name: re176tmp_analitico_10_108_228_199_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_199_8295_idx1 ON public.re176tmp_analitico_10_108_228_199_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11185 (class 1259 OID 66338)
-- Name: re176tmp_analitico_10_108_228_199_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_199_8295_idx2 ON public.re176tmp_analitico_10_108_228_199_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11186 (class 1259 OID 66595)
-- Name: re176tmp_analitico_10_108_228_209_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_209_8295_idx1 ON public.re176tmp_analitico_10_108_228_209_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11187 (class 1259 OID 66596)
-- Name: re176tmp_analitico_10_108_228_209_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_209_8295_idx2 ON public.re176tmp_analitico_10_108_228_209_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11188 (class 1259 OID 67069)
-- Name: re176tmp_analitico_10_108_228_219_8039_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_219_8039_idx1 ON public.re176tmp_analitico_10_108_228_219_8039 USING btree (id_cbcontrato_int);

--
-- TOC entry 11189 (class 1259 OID 67070)
-- Name: re176tmp_analitico_10_108_228_219_8039_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_219_8039_idx2 ON public.re176tmp_analitico_10_108_228_219_8039 USING btree (id_geusuario_int);

--
-- TOC entry 11190 (class 1259 OID 66951)
-- Name: re176tmp_analitico_10_108_228_219_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_219_8295_idx1 ON public.re176tmp_analitico_10_108_228_219_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11191 (class 1259 OID 66953)
-- Name: re176tmp_analitico_10_108_228_219_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_219_8295_idx2 ON public.re176tmp_analitico_10_108_228_219_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11192 (class 1259 OID 66476)
-- Name: re176tmp_analitico_10_108_228_225_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_225_8295_idx1 ON public.re176tmp_analitico_10_108_228_225_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11193 (class 1259 OID 66482)
-- Name: re176tmp_analitico_10_108_228_225_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_225_8295_idx2 ON public.re176tmp_analitico_10_108_228_225_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11194 (class 1259 OID 66237)
-- Name: re176tmp_analitico_10_108_228_51_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_51_8295_idx1 ON public.re176tmp_analitico_10_108_228_51_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11195 (class 1259 OID 66240)
-- Name: re176tmp_analitico_10_108_228_51_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_51_8295_idx2 ON public.re176tmp_analitico_10_108_228_51_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11196 (class 1259 OID 66724)
-- Name: re176tmp_analitico_10_108_228_67_8038_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_67_8038_idx1 ON public.re176tmp_analitico_10_108_228_67_8038 USING btree (id_cbcontrato_int);

--
-- TOC entry 11197 (class 1259 OID 66725)
-- Name: re176tmp_analitico_10_108_228_67_8038_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_67_8038_idx2 ON public.re176tmp_analitico_10_108_228_67_8038 USING btree (id_geusuario_int);

--
-- TOC entry 11198 (class 1259 OID 66559)
-- Name: re176tmp_analitico_10_108_228_91_8295_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_91_8295_idx1 ON public.re176tmp_analitico_10_108_228_91_8295 USING btree (id_cbcontrato_int);

--
-- TOC entry 11199 (class 1259 OID 66561)
-- Name: re176tmp_analitico_10_108_228_91_8295_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_228_91_8295_idx2 ON public.re176tmp_analitico_10_108_228_91_8295 USING btree (id_geusuario_int);

--
-- TOC entry 11200 (class 1259 OID 65742)
-- Name: re176tmp_analitico_10_108_8_116_8137_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_116_8137_idx1 ON public.re176tmp_analitico_10_108_8_116_8137 USING btree (id_cbcontrato_int);

--
-- TOC entry 11201 (class 1259 OID 65743)
-- Name: re176tmp_analitico_10_108_8_116_8137_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_116_8137_idx2 ON public.re176tmp_analitico_10_108_8_116_8137 USING btree (id_geusuario_int);

--
-- TOC entry 11202 (class 1259 OID 66174)
-- Name: re176tmp_analitico_10_108_8_125_8325_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_125_8325_idx1 ON public.re176tmp_analitico_10_108_8_125_8325 USING btree (id_cbcontrato_int);

--
-- TOC entry 11203 (class 1259 OID 66186)
-- Name: re176tmp_analitico_10_108_8_125_8325_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_125_8325_idx2 ON public.re176tmp_analitico_10_108_8_125_8325 USING btree (id_geusuario_int);

--
-- TOC entry 11204 (class 1259 OID 66271)
-- Name: re176tmp_analitico_10_108_8_61_8325_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_61_8325_idx1 ON public.re176tmp_analitico_10_108_8_61_8325 USING btree (id_cbcontrato_int);

--
-- TOC entry 11205 (class 1259 OID 66277)
-- Name: re176tmp_analitico_10_108_8_61_8325_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_61_8325_idx2 ON public.re176tmp_analitico_10_108_8_61_8325 USING btree (id_geusuario_int);

--
-- TOC entry 11206 (class 1259 OID 66387)
-- Name: re176tmp_analitico_10_108_8_72_8354_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_72_8354_idx1 ON public.re176tmp_analitico_10_108_8_72_8354 USING btree (id_cbcontrato_int);

--
-- TOC entry 11207 (class 1259 OID 66389)
-- Name: re176tmp_analitico_10_108_8_72_8354_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_108_8_72_8354_idx2 ON public.re176tmp_analitico_10_108_8_72_8354 USING btree (id_geusuario_int);

--
-- TOC entry 11208 (class 1259 OID 66354)
-- Name: re176tmp_analitico_10_135_4_205_8377_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_135_4_205_8377_idx1 ON public.re176tmp_analitico_10_135_4_205_8377 USING btree (id_cbcontrato_int);

--
-- TOC entry 11209 (class 1259 OID 66355)
-- Name: re176tmp_analitico_10_135_4_205_8377_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_135_4_205_8377_idx2 ON public.re176tmp_analitico_10_135_4_205_8377 USING btree (id_geusuario_int);

--
-- TOC entry 11210 (class 1259 OID 66600)
-- Name: re176tmp_analitico_10_135_5_108_8193_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_135_5_108_8193_idx1 ON public.re176tmp_analitico_10_135_5_108_8193 USING btree (id_cbcontrato_int);

--
-- TOC entry 11211 (class 1259 OID 66601)
-- Name: re176tmp_analitico_10_135_5_108_8193_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_135_5_108_8193_idx2 ON public.re176tmp_analitico_10_135_5_108_8193 USING btree (id_geusuario_int);

--
-- TOC entry 11212 (class 1259 OID 66820)
-- Name: re176tmp_analitico_10_135_6_167_8193_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_135_6_167_8193_idx1 ON public.re176tmp_analitico_10_135_6_167_8193 USING btree (id_cbcontrato_int);

--
-- TOC entry 11213 (class 1259 OID 66821)
-- Name: re176tmp_analitico_10_135_6_167_8193_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_135_6_167_8193_idx2 ON public.re176tmp_analitico_10_135_6_167_8193 USING btree (id_geusuario_int);

--
-- TOC entry 11214 (class 1259 OID 66629)
-- Name: re176tmp_analitico_10_66_12_144_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_144_8104_idx1 ON public.re176tmp_analitico_10_66_12_144_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11215 (class 1259 OID 66632)
-- Name: re176tmp_analitico_10_66_12_144_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_144_8104_idx2 ON public.re176tmp_analitico_10_66_12_144_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11216 (class 1259 OID 66727)
-- Name: re176tmp_analitico_10_66_12_44_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_44_8104_idx1 ON public.re176tmp_analitico_10_66_12_44_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11217 (class 1259 OID 66728)
-- Name: re176tmp_analitico_10_66_12_44_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_44_8104_idx2 ON public.re176tmp_analitico_10_66_12_44_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11218 (class 1259 OID 66687)
-- Name: re176tmp_analitico_10_66_12_80_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_80_8104_idx1 ON public.re176tmp_analitico_10_66_12_80_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11219 (class 1259 OID 66688)
-- Name: re176tmp_analitico_10_66_12_80_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_80_8104_idx2 ON public.re176tmp_analitico_10_66_12_80_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11220 (class 1259 OID 66807)
-- Name: re176tmp_analitico_10_66_12_92_8104_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_92_8104_idx1 ON public.re176tmp_analitico_10_66_12_92_8104 USING btree (id_cbcontrato_int);

--
-- TOC entry 11221 (class 1259 OID 66808)
-- Name: re176tmp_analitico_10_66_12_92_8104_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re176tmp_analitico_10_66_12_92_8104_idx2 ON public.re176tmp_analitico_10_66_12_92_8104 USING btree (id_geusuario_int);

--
-- TOC entry 11222 (class 1259 OID 81129)
-- Name: re183_contrato_tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re183_contrato_tmp_idx1 ON public.re183_contrato_tmp USING btree (id_geqlcliente_int);

--
-- TOC entry 11223 (class 1259 OID 81130)
-- Name: re183_ende_anti_tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re183_ende_anti_tmp_idx1 ON public.re183_ende_anti_tmp USING btree (id_geqlcliente_int);

--
-- TOC entry 11224 (class 1259 OID 81137)
-- Name: re186tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re186tmp_idx1 ON public.re186tmp USING btree (chave_str);

--
-- TOC entry 11225 (class 1259 OID 81138)
-- Name: re186tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re186tmp_idx2 ON public.re186tmp USING btree (chave_str, id_cbcontrato_int);

--
-- TOC entry 11230 (class 1259 OID 81147)
-- Name: re191tmp_classe_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_classe_idx1 ON public.re191tmp_classe USING btree (chave_str);

--
-- TOC entry 11231 (class 1259 OID 81148)
-- Name: re191tmp_classe_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_classe_idx2 ON public.re191tmp_classe USING btree (id_systempo_int);

--
-- TOC entry 11232 (class 1259 OID 81149)
-- Name: re191tmp_classe_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_classe_idx3 ON public.re191tmp_classe USING btree (id_syslogtempo_int);

--
-- TOC entry 11226 (class 1259 OID 81143)
-- Name: re191tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_idx1 ON public.re191tmp USING btree (chave_str);

--
-- TOC entry 11227 (class 1259 OID 81144)
-- Name: re191tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_idx2 ON public.re191tmp USING btree (id_syscliente_int);

--
-- TOC entry 11228 (class 1259 OID 81145)
-- Name: re191tmp_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_idx3 ON public.re191tmp USING btree (id_systempo_int);

--
-- TOC entry 11229 (class 1259 OID 81146)
-- Name: re191tmp_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_idx4 ON public.re191tmp USING btree (id_syslogtempo_int);

--
-- TOC entry 11233 (class 1259 OID 81150)
-- Name: re191tmp_totais_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_totais_idx1 ON public.re191tmp_totais USING btree (chave_str);

--
-- TOC entry 11234 (class 1259 OID 81151)
-- Name: re191tmp_totais_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_totais_idx2 ON public.re191tmp_totais USING btree (id_sysusuario_int);

--
-- TOC entry 11235 (class 1259 OID 81152)
-- Name: re191tmp_totais_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_totais_idx3 ON public.re191tmp_totais USING btree (id_sysusuario_int, chave_str);

--
-- TOC entry 11236 (class 1259 OID 81160)
-- Name: re191tmp_totaiscarteira_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_totaiscarteira_idx1 ON public.re191tmp_totaiscarteira USING btree (chave_str);

--
-- TOC entry 11237 (class 1259 OID 81161)
-- Name: re191tmp_totaiscarteira_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_totaiscarteira_idx2 ON public.re191tmp_totaiscarteira USING btree (id_syscliente_int);

--
-- TOC entry 11238 (class 1259 OID 81162)
-- Name: re191tmp_totaiscarteira_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re191tmp_totaiscarteira_idx3 ON public.re191tmp_totaiscarteira USING btree (id_syscliente_int, chave_str);

--
-- TOC entry 11239 (class 1259 OID 81165)
-- Name: re205tmp_analitico_192_168_1_30_1195_530_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re205tmp_analitico_192_168_1_30_1195_530_idx1 ON public.re205tmp_analitico_192_168_1_30_1195_530 USING btree (id_cbcontrato_int);

--
-- TOC entry 11240 (class 1259 OID 81166)
-- Name: re205tmp_analitico_192_168_1_30_1195_530_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re205tmp_analitico_192_168_1_30_1195_530_idx2 ON public.re205tmp_analitico_192_168_1_30_1195_530 USING btree (id_geusuario_int);

--
-- TOC entry 11241 (class 1259 OID 81171)
-- Name: re213tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re213tmp_idx1 ON public.re213tmp USING btree (chave_str);

--
-- TOC entry 11242 (class 1259 OID 81172)
-- Name: re213tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX re213tmp_idx2 ON public.re213tmp USING btree (id_cbparcela_int);

--
-- TOC entry 11243 (class 1259 OID 81173)
-- Name: rege108stmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108stmp_idx1 ON public.rege108stmp USING btree (chave_str);

--
-- TOC entry 11244 (class 1259 OID 81174)
-- Name: rege108stmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108stmp_idx2 ON public.rege108stmp USING btree (carteira_str);

--
-- TOC entry 11245 (class 1259 OID 81178)
-- Name: rege108tmp_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108tmp_idx1 ON public.rege108tmp USING btree (chave_str);

--
-- TOC entry 11246 (class 1259 OID 81179)
-- Name: rege108tmp_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108tmp_idx2 ON public.rege108tmp USING btree (id_gecliente_int);

--
-- TOC entry 11247 (class 1259 OID 81180)
-- Name: rege108tmp_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108tmp_idx3 ON public.rege108tmp USING btree (id_cbcontrato_int);

--
-- TOC entry 11248 (class 1259 OID 81181)
-- Name: rege108tmp_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108tmp_idx4 ON public.rege108tmp USING btree (contrato_str);

--
-- TOC entry 11249 (class 1259 OID 81182)
-- Name: rege108tmp_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108tmp_idx5 ON public.rege108tmp USING btree (data_envio_dat);

--
-- TOC entry 11250 (class 1259 OID 81183)
-- Name: rege108tmp_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX rege108tmp_idx6 ON public.rege108tmp USING btree (data_retorno_dat);

--
-- TOC entry 11264 (class 1259 OID 45858)
-- Name: registro_str_full_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX registro_str_full_idx5 ON public.temp_cbobito_full USING btree (registro_str);

--
-- TOC entry 10323 (class 1259 OID 45812)
-- Name: registro_str_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX registro_str_idx5 ON public.cbobito USING btree (registro_str);

--
-- TOC entry 11253 (class 1259 OID 81184)
-- Name: repapeleta_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX repapeleta_idx1 ON public.repapeleta USING btree (chave_str);

--
-- TOC entry 11254 (class 1259 OID 81197)
-- Name: represtacao_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX represtacao_idx1 ON public.represtacao USING btree (chave_str);

--
-- TOC entry 11255 (class 1259 OID 81207)
-- Name: retornoitaufup_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE UNIQUE INDEX retornoitaufup_idx1 ON public.retornoitaufup USING btree (id_retorno_int);

--
-- TOC entry 11256 (class 1259 OID 81208)
-- Name: retornoitaufup_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX retornoitaufup_idx2 ON public.retornoitaufup USING btree (id_cbcontrato_int);

--
-- TOC entry 11257 (class 1259 OID 81209)
-- Name: retornoitaufup_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX retornoitaufup_idx3 ON public.retornoitaufup USING btree (id_gecliente_int);

--
-- TOC entry 11258 (class 1259 OID 52161)
-- Name: telefone_bloqueado_improdutivo_full_386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX telefone_bloqueado_improdutivo_full_386_idx1 ON public.telefone_bloqueado_improdutivo_full_386 USING btree (contato_str);

--
-- TOC entry 11259 (class 1259 OID 63751)
-- Name: telefone_bloqueado_recorrente_full_386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX telefone_bloqueado_recorrente_full_386_idx1 ON public.telefone_bloqueado_recorrente_full_386 USING btree (contato_str);

--
-- TOC entry 11267 (class 1259 OID 65926)
-- Name: temp_telefone_suspeito_386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX temp_telefone_suspeito_386_idx1 ON public.temp_telefone_suspeito_386 USING btree (contato_str);

--
-- TOC entry 11268 (class 1259 OID 63924)
-- Name: temp_telefone_suspeito_cpc_386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX temp_telefone_suspeito_cpc_386_idx1 ON public.temp_telefone_suspeito_cpc_386 USING btree (contato_str, cpf_str);

--
-- TOC entry 11271 (class 1259 OID 63702)
-- Name: tempblocklist386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempblocklist386_idx1 ON public.tempblocklist386 USING btree (cpf_str);

--
-- TOC entry 11272 (class 1259 OID 63705)
-- Name: tempblocklist386_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempblocklist386_idx2 ON public.tempblocklist386 USING btree (telefone_str);

--
-- TOC entry 11269 (class 1259 OID 81387)
-- Name: tempblocklist_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempblocklist_idx1 ON public.tempblocklist USING btree (cpf_str);

--
-- TOC entry 11270 (class 1259 OID 81388)
-- Name: tempblocklist_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempblocklist_idx2 ON public.tempblocklist USING btree (telefone_str);

--
-- TOC entry 11274 (class 1259 OID 66676)
-- Name: tempblocklistfinal386_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempblocklistfinal386_idx1 ON public.tempblocklistfinal386 USING btree (id_geqlcontato_int);

--
-- TOC entry 11273 (class 1259 OID 81389)
-- Name: tempblocklistfinal_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempblocklistfinal_idx1 ON public.tempblocklistfinal USING btree (id_geqlcontato_int);

--
-- TOC entry 11275 (class 1259 OID 81409)
-- Name: tempbloqueadosblocklistdesccli_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempbloqueadosblocklistdesccli_idx1 ON public.tempbloqueadosblocklistdesccli USING btree (contato_str, cpf_str);

--
-- TOC entry 11276 (class 1259 OID 63968)
-- Name: tempbloqueadostelsuspeito_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempbloqueadostelsuspeito_idx1 ON public.tempbloqueadostelsuspeito USING btree (contato_str);

--
-- TOC entry 11277 (class 1259 OID 81385)
-- Name: tempdesbloqueadosblocklistdesccli_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempdesbloqueadosblocklistdesccli_idx1 ON public.tempdesbloqueadosblocklistdesccli USING btree (contato_str);

--
-- TOC entry 11278 (class 1259 OID 65865)
-- Name: tempgeqlcontato_cpf_str_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempgeqlcontato_cpf_str_idx ON public.tempgeqlcontato USING btree (cpf_str);

--
-- TOC entry 11279 (class 1259 OID 65744)
-- Name: tempscore_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempscore_idx1 ON public.tempscore USING btree (cpf_str);

--
-- TOC entry 11280 (class 1259 OID 65745)
-- Name: tempscore_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempscore_idx2 ON public.tempscore USING btree (telefone_str);

--
-- TOC entry 11282 (class 1259 OID 65935)
-- Name: tempscorefinal_386_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempscorefinal_386_idx ON public.tempscorefinal_386 USING btree (id_geqlcontato_int);

--
-- TOC entry 11283 (class 1259 OID 63850)
-- Name: tempscorefinal_completa_386_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempscorefinal_completa_386_idx ON public.tempscorefinal_completa_386 USING btree (id_geqlcontato_int);

--
-- TOC entry 11281 (class 1259 OID 65897)
-- Name: tempscorefinal_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempscorefinal_idx1 ON public.tempscorefinal USING btree (id_geqlcontato_int);

--
-- TOC entry 11284 (class 1259 OID 66167)
-- Name: tempscorelote_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tempscorelote_idx1 ON public.tempscorelote USING btree (id_geqlcontato_int);

--
-- TOC entry 11285 (class 1259 OID 81210)
-- Name: teste_cbitembordero_10_101_41_100_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx0 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 11286 (class 1259 OID 81211)
-- Name: teste_cbitembordero_10_101_41_100_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx1 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_cbbordero_int);

--
-- TOC entry 11287 (class 1259 OID 81212)
-- Name: teste_cbitembordero_10_101_41_100_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx2 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 11288 (class 1259 OID 81213)
-- Name: teste_cbitembordero_10_101_41_100_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx3 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 11289 (class 1259 OID 81217)
-- Name: teste_cbitembordero_10_101_41_100_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx4 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_gecliente_int);

--
-- TOC entry 11290 (class 1259 OID 81218)
-- Name: teste_cbitembordero_10_101_41_100_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx5 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_gefilial_int);

--
-- TOC entry 11291 (class 1259 OID 81219)
-- Name: teste_cbitembordero_10_101_41_100_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx6 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 11292 (class 1259 OID 81220)
-- Name: teste_cbitembordero_10_101_41_100_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_100_32_idx7 ON public.teste_cbitembordero_10_101_41_100_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 11293 (class 1259 OID 81222)
-- Name: teste_cbitembordero_10_101_41_55_32_idx0; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx0 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_cbitembordero_int);

--
-- TOC entry 11294 (class 1259 OID 81227)
-- Name: teste_cbitembordero_10_101_41_55_32_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx1 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_cbbordero_int);

--
-- TOC entry 11295 (class 1259 OID 81228)
-- Name: teste_cbitembordero_10_101_41_55_32_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx2 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_cbcontrato_int);

--
-- TOC entry 11296 (class 1259 OID 81229)
-- Name: teste_cbitembordero_10_101_41_55_32_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx3 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_geusuario_boleto_int);

--
-- TOC entry 11297 (class 1259 OID 81230)
-- Name: teste_cbitembordero_10_101_41_55_32_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx4 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_gecliente_int);

--
-- TOC entry 11298 (class 1259 OID 81231)
-- Name: teste_cbitembordero_10_101_41_55_32_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx5 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_gefilial_int);

--
-- TOC entry 11299 (class 1259 OID 81232)
-- Name: teste_cbitembordero_10_101_41_55_32_idx6; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx6 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_cbtiponegocio_int);

--
-- TOC entry 11300 (class 1259 OID 81233)
-- Name: teste_cbitembordero_10_101_41_55_32_idx7; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX teste_cbitembordero_10_101_41_55_32_idx7 ON public.teste_cbitembordero_10_101_41_55_32 USING btree (id_cbsituacaocontrato_int);

--
-- TOC entry 11301 (class 1259 OID 81240)
-- Name: tmp_pj010_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmp_pj010_idx1 ON public.tmp_pj010 USING btree (id_getipodocumento_int);

--
-- TOC entry 11302 (class 1259 OID 81244)
-- Name: tmpbatimentocredibel_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpbatimentocredibel_idx1 ON public.tmpbatimentocredibel USING btree (id_cbparcela_int);

--
-- TOC entry 11303 (class 1259 OID 81245)
-- Name: tmpbatimentocredibel_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpbatimentocredibel_idx2 ON public.tmpbatimentocredibel USING btree (id_);

--
-- TOC entry 11304 (class 1259 OID 81246)
-- Name: tmpblboletagem_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpblboletagem_idx1 ON public.tmpblboletagem USING btree (id_tmpblboletagem_int);

--
-- TOC entry 11305 (class 1259 OID 81247)
-- Name: tmpblboletagemparcela_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpblboletagemparcela_idx1 ON public.tmpblboletagemparcela USING btree (id_tmpblboletagem_int, id_cbparcela_int);

--
-- TOC entry 11306 (class 1259 OID 81248)
-- Name: tmpblboletagemparcela_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpblboletagemparcela_idx2 ON public.tmpblboletagemparcela USING btree (id_tmpblboletagem_int);

--
-- TOC entry 11308 (class 1259 OID 81258)
-- Name: tmpgestorvirtual70_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpgestorvirtual70_idx1 ON public.tmpgestorvirtual70 USING btree (cpf);

--
-- TOC entry 11309 (class 1259 OID 81262)
-- Name: tmpgestorvirtual8_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpgestorvirtual8_idx1 ON public.tmpgestorvirtual8 USING btree (cpf);

--
-- TOC entry 11307 (class 1259 OID 81257)
-- Name: tmpgestorvirtual_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpgestorvirtual_idx1 ON public.tmpgestorvirtual USING btree (cpf);

--
-- TOC entry 11310 (class 1259 OID 81269)
-- Name: tmpmapfreendereco_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpmapfreendereco_idx1 ON public.tmpmapfreendereco USING btree (cpf);

--
-- TOC entry 11311 (class 1259 OID 81270)
-- Name: tmppagtos_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmppagtos_idx1 ON public.tmppagtos USING btree (id_cbcontrato_int);

--
-- TOC entry 11312 (class 1259 OID 81279)
-- Name: tmprelnpjurnpcob_idx; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmprelnpjurnpcob_idx ON public.tmprelnpjurnpcob USING btree (id_gecliente_int);

--
-- TOC entry 11313 (class 1259 OID 81280)
-- Name: tmprelnpjurnpcob_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmprelnpjurnpcob_idx2 ON public.tmprelnpjurnpcob USING btree (id_cbcontrato_int);

--
-- TOC entry 11314 (class 1259 OID 81281)
-- Name: tmpremessacredibel_idx1; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpremessacredibel_idx1 ON public.tmpremessacredibel USING btree (devedor_cpf);

--
-- TOC entry 11315 (class 1259 OID 81282)
-- Name: tmpremessacredibel_idx2; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpremessacredibel_idx2 ON public.tmpremessacredibel USING btree (linha);

--
-- TOC entry 11316 (class 1259 OID 81283)
-- Name: tmpremessacredibel_idx3; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpremessacredibel_idx3 ON public.tmpremessacredibel USING btree (cpf_str);

--
-- TOC entry 11317 (class 1259 OID 81284)
-- Name: tmpremessacredibel_idx4; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpremessacredibel_idx4 ON public.tmpremessacredibel USING btree (id_cbparcela_int);

--
-- TOC entry 11318 (class 1259 OID 81285)
-- Name: tmpremessacredibel_idx5; Type: INDEX; Schema: public; Owner: -
--

CREATE INDEX tmpremessacredibel_idx5 ON public.tmpremessacredibel USING btree (id_cbcontrato_int);

--
-- TOC entry 11760 (class 2620 OID 65784)
-- Name: cbpagamento atualiza_timestamp_cbpagamento; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER atualiza_timestamp_cbpagamento BEFORE INSERT OR UPDATE ON public.cbpagamento FOR EACH ROW EXECUTE FUNCTION public.atualiza_timestamp();

--
-- TOC entry 11743 (class 2620 OID 68015)
-- Name: cbcontratocredibel atualiza_tstampbi_cbcontratocredibel; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER atualiza_tstampbi_cbcontratocredibel BEFORE INSERT OR UPDATE ON public.cbcontratocredibel FOR EACH ROW EXECUTE FUNCTION public.atualiza_tstampbi();

--
-- TOC entry 11745 (class 2620 OID 63750)
-- Name: cbcontratoeleva atualiza_tstampbi_cbcontratoeleva; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER atualiza_tstampbi_cbcontratoeleva BEFORE INSERT OR UPDATE ON public.cbcontratoeleva FOR EACH ROW EXECUTE FUNCTION public.atualiza_tstampbi();

--
-- TOC entry 11749 (class 2620 OID 68173)
-- Name: cbcontratopirelli atualiza_tstampbi_cbcontratopirelli; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER atualiza_tstampbi_cbcontratopirelli BEFORE INSERT OR UPDATE ON public.cbcontratopirelli FOR EACH ROW EXECUTE FUNCTION public.atualiza_tstampbi();

--
-- TOC entry 11785 (class 2620 OID 63827)
-- Name: geqlemail basaofila_email_trigger; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER basaofila_email_trigger BEFORE INSERT ON public.geqlemail FOR EACH ROW EXECUTE FUNCTION public.f_basaofila_email_trigger();

--
-- TOC entry 11771 (class 2620 OID 63707)
-- Name: geqlcontato basaofila_telefone_trigger; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER basaofila_telefone_trigger AFTER INSERT ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.f_basaofila_telefone_trigger();

--
-- TOC entry 11746 (class 2620 OID 63752)
-- Name: cbcontratoeleva bloqueiacontratosblacklistouvidoria; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER bloqueiacontratosblacklistouvidoria BEFORE UPDATE ON public.cbcontratoeleva FOR EACH ROW EXECUTE FUNCTION public.blo_atualiza_situacaocontrato();

--
-- TOC entry 11750 (class 2620 OID 68180)
-- Name: cbcontratopirelli bloqueiacontratosblacklistouvidoria; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER bloqueiacontratosblacklistouvidoria BEFORE UPDATE ON public.cbcontratopirelli FOR EACH ROW EXECUTE FUNCTION public.blo_atualiza_situacaocontrato();

--
-- TOC entry 11772 (class 2620 OID 63708)
-- Name: geqlcontato f_trigger_valida_contato_blacklist_bit; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER f_trigger_valida_contato_blacklist_bit BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.f_trigger_valida_contato_blacklist_bit();

--
-- TOC entry 11763 (class 2620 OID 45839)
-- Name: cbparcela fhistoricosituacaoparcela; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER fhistoricosituacaoparcela BEFORE INSERT OR UPDATE ON public.cbparcela FOR EACH ROW EXECUTE FUNCTION public.fhistoricosituacaoparcela();

--
-- TOC entry 11761 (class 2620 OID 65792)
-- Name: cbpagamento ftatualizacbitembordero; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER ftatualizacbitembordero AFTER INSERT OR UPDATE ON public.cbpagamento FOR EACH ROW EXECUTE FUNCTION public.ftatualizacbitembordero();

--
-- TOC entry 11753 (class 2620 OID 63778)
-- Name: cbdistribparcela ftatualizatsbi; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER ftatualizatsbi AFTER INSERT OR UPDATE ON public.cbdistribparcela FOR EACH ROW EXECUTE FUNCTION public.ftatualizatsbi();

ALTER TABLE public.cbdistribparcela DISABLE TRIGGER ftatualizatsbi;

--
-- TOC entry 11754 (class 2620 OID 68373)
-- Name: cbestoque ftatualizatsbi; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER ftatualizatsbi AFTER INSERT OR UPDATE ON public.cbestoque FOR EACH ROW EXECUTE FUNCTION public.ftatualizatsbi();

--
-- TOC entry 11755 (class 2620 OID 45499)
-- Name: cbfollowup ftatualizatsbi; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER ftatualizatsbi AFTER INSERT OR UPDATE ON public.cbfollowup FOR EACH ROW EXECUTE FUNCTION public.ftatualizatsbi();

--
-- TOC entry 11758 (class 2620 OID 63668)
-- Name: cbitembordero ftatualizatsbi; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER ftatualizatsbi AFTER INSERT OR UPDATE ON public.cbitembordero FOR EACH ROW EXECUTE FUNCTION public.ftatualizatsbi();

--
-- TOC entry 11756 (class 2620 OID 45511)
-- Name: cbfollowup fultimofollowup_cbcontrato_cbfollowup; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER fultimofollowup_cbcontrato_cbfollowup AFTER INSERT OR UPDATE ON public.cbfollowup FOR EACH ROW EXECUTE FUNCTION public.fultimofollowup_cbcontrato_cbfollowup();

--
-- TOC entry 11741 (class 2620 OID 63943)
-- Name: cbbordero gera_bordero_cbbordero; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER gera_bordero_cbbordero BEFORE INSERT ON public.cbbordero FOR EACH ROW EXECUTE FUNCTION public.gera_bordero();

--
-- TOC entry 11747 (class 2620 OID 63753)
-- Name: cbcontratoeleva tHistoricoSituacaoContrato; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER "tHistoricoSituacaoContrato" BEFORE INSERT OR UPDATE ON public.cbcontratoeleva FOR EACH ROW EXECUTE FUNCTION public.fhistoricosituacaocontrato();

--
-- TOC entry 11744 (class 2620 OID 68022)
-- Name: cbcontratocredibel tHistoricoSituacaoContrato44; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER "tHistoricoSituacaoContrato44" BEFORE INSERT OR UPDATE ON public.cbcontratocredibel FOR EACH ROW EXECUTE FUNCTION public.fhistoricosituacaocontrato();

--
-- TOC entry 11751 (class 2620 OID 68186)
-- Name: cbcontratopirelli tHistoricoSituacaoContrato44; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER "tHistoricoSituacaoContrato44" BEFORE INSERT OR UPDATE ON public.cbcontratopirelli FOR EACH ROW EXECUTE FUNCTION public.fhistoricosituacaocontrato();

--
-- TOC entry 11739 (class 2620 OID 45458)
-- Name: cbblacklistcliente t_cbblacklistcliente_replicaregistro; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER t_cbblacklistcliente_replicaregistro BEFORE INSERT OR UPDATE ON public.cbblacklistcliente FOR EACH ROW EXECUTE FUNCTION public.ft_cbblacklistcliente_replicaregistro();

--
-- TOC entry 11786 (class 2620 OID 63831)
-- Name: geqlemail t_geqlemail_blacklist; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER t_geqlemail_blacklist BEFORE INSERT OR UPDATE ON public.geqlemail FOR EACH ROW EXECUTE FUNCTION public.ft_geqlemail_blacklist();

--
-- TOC entry 11740 (class 2620 OID 45465)
-- Name: cbblacklistcliente t_preenchesituacao; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER t_preenchesituacao BEFORE INSERT OR UPDATE ON public.cbblacklistcliente FOR EACH ROW EXECUTE FUNCTION public.ft_preenchesituacao();

--
-- TOC entry 11738 (class 2620 OID 63740)
-- Name: cbblacklist t_replicaregistro; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER t_replicaregistro BEFORE INSERT OR UPDATE ON public.cbblacklist FOR EACH ROW EXECUTE FUNCTION public.ft_replicaregistro();

--
-- TOC entry 11764 (class 2620 OID 45841)
-- Name: cbparcela tatualizabi; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tatualizabi AFTER INSERT OR UPDATE ON public.cbparcela FOR EACH ROW EXECUTE FUNCTION public.ftatualizabi();

--
-- TOC entry 12116 (class 0 OID 0)
-- Dependencies: 11764
-- Name: TRIGGER tatualizabi ON cbparcela; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tatualizabi ON public.cbparcela IS 'Atualiza dados do BI';

--
-- TOC entry 11768 (class 2620 OID 63875)
-- Name: ge202tmp_bx_eleva_copy tge202tmp_bx_eleva_copy; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tge202tmp_bx_eleva_copy BEFORE INSERT ON public.ge202tmp_bx_eleva_copy FOR EACH ROW EXECUTE FUNCTION public.fajustecopy();

--
-- TOC entry 11769 (class 2620 OID 66867)
-- Name: ge202tmp_imp_rem_eleva_copy tge202tmp_imp_rem_eleva_copy; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tge202tmp_imp_rem_eleva_copy BEFORE INSERT ON public.ge202tmp_imp_rem_eleva_copy FOR EACH ROW EXECUTE FUNCTION public.fajustecopy();

--
-- TOC entry 11793 (class 2620 OID 66110)
-- Name: gevalorparametro tgevalorparametroflashback; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tgevalorparametroflashback BEFORE UPDATE ON public.gevalorparametro FOR EACH ROW EXECUTE FUNCTION public.fgevalorparametroflashback();

--
-- TOC entry 11773 (class 2620 OID 63709)
-- Name: geqlcontato tr_bloqueio_desconhece_cliente; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tr_bloqueio_desconhece_cliente BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.tr_bloqueio_desconhece_cliente();

--
-- TOC entry 11774 (class 2620 OID 63710)
-- Name: geqlcontato tr_bloqueio_telefone_suspeito; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tr_bloqueio_telefone_suspeito BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.tr_bloqueio_telefone_suspeito();

ALTER TABLE public.geqlcontato DISABLE TRIGGER tr_bloqueio_telefone_suspeito;

--
-- TOC entry 11775 (class 2620 OID 63716)
-- Name: geqlcontato tr_geqlcontato_geqlcontato_historico_after_insert_update; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tr_geqlcontato_geqlcontato_historico_after_insert_update AFTER INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.f_trigger_geqlcontato_geqlcontato_historico_after_insert_update();

--
-- TOC entry 11776 (class 2620 OID 63718)
-- Name: geqlcontato trferiado; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trferiado BEFORE INSERT ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrferiado();

--
-- TOC entry 11777 (class 2620 OID 66746698)
-- Name: geqlcontato trg_valida_bloqueado_bit; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trg_valida_bloqueado_bit BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ft_valida_bloqueado_bit();

--
-- TOC entry 11742 (class 2620 OID 67057)
-- Name: cbcampanha trinserecbcampanhateste; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trinserecbcampanhateste BEFORE INSERT ON public.cbcampanha FOR EACH ROW EXECUTE FUNCTION public.ftrinserecbcampanhateste();

--
-- TOC entry 11778 (class 2620 OID 63720)
-- Name: geqlcontato trtelblacklist; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trtelblacklist AFTER INSERT ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrtelblacklist();

--
-- TOC entry 11779 (class 2620 OID 63723)
-- Name: geqlcontato trtelblacklist_fixo; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trtelblacklist_fixo AFTER INSERT ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrtelblacklist_fixo();

--
-- TOC entry 11780 (class 2620 OID 63726)
-- Name: geqlcontato trtipocelularhot; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trtipocelularhot BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrtipocelularhot();

--
-- TOC entry 11787 (class 2620 OID 63834)
-- Name: geqlemail trvalidaemail; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trvalidaemail BEFORE INSERT OR UPDATE ON public.geqlemail FOR EACH ROW EXECUTE FUNCTION public.ftrvalidaemailqualidade();

--
-- TOC entry 11781 (class 2620 OID 63728)
-- Name: geqlcontato trvalidatelefone; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trvalidatelefone BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrvalidatelefonequalidade();

--
-- TOC entry 11782 (class 2620 OID 63730)
-- Name: geqlcontato trzgeqlcontato_blacklist; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER trzgeqlcontato_blacklist BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrz_geqlcontato_blacklist();

--
-- TOC entry 11748 (class 2620 OID 63756)
-- Name: cbcontratoeleva tstamp_mdm_cbcontratoeleva; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbcontratoeleva BEFORE INSERT OR UPDATE ON public.cbcontratoeleva FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12117 (class 0 OID 0)
-- Dependencies: 11748
-- Name: TRIGGER tstamp_mdm_cbcontratoeleva ON cbcontratoeleva; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbcontratoeleva ON public.cbcontratoeleva IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11752 (class 2620 OID 68191)
-- Name: cbcontratopirelli tstamp_mdm_cbcontratopirelli; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbcontratopirelli BEFORE INSERT OR UPDATE ON public.cbcontratopirelli FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12118 (class 0 OID 0)
-- Dependencies: 11752
-- Name: TRIGGER tstamp_mdm_cbcontratopirelli ON cbcontratopirelli; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbcontratopirelli ON public.cbcontratopirelli IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11757 (class 2620 OID 45517)
-- Name: cbfollowup tstamp_mdm_cbfollowup; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbfollowup BEFORE INSERT OR UPDATE ON public.cbfollowup FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12119 (class 0 OID 0)
-- Dependencies: 11757
-- Name: TRIGGER tstamp_mdm_cbfollowup ON cbfollowup; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbfollowup ON public.cbfollowup IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11759 (class 2620 OID 63669)
-- Name: cbitembordero tstamp_mdm_cbitembordero; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbitembordero BEFORE INSERT OR UPDATE ON public.cbitembordero FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12120 (class 0 OID 0)
-- Dependencies: 11759
-- Name: TRIGGER tstamp_mdm_cbitembordero ON cbitembordero; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbitembordero ON public.cbitembordero IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11762 (class 2620 OID 65804)
-- Name: cbpagamento tstamp_mdm_cbpagamento; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbpagamento BEFORE INSERT OR UPDATE ON public.cbpagamento FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12121 (class 0 OID 0)
-- Dependencies: 11762
-- Name: TRIGGER tstamp_mdm_cbpagamento ON cbpagamento; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbpagamento ON public.cbpagamento IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11765 (class 2620 OID 45843)
-- Name: cbparcela tstamp_mdm_cbparcela; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbparcela BEFORE INSERT OR UPDATE ON public.cbparcela FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12122 (class 0 OID 0)
-- Dependencies: 11765
-- Name: TRIGGER tstamp_mdm_cbparcela ON cbparcela; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbparcela ON public.cbparcela IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11766 (class 2620 OID 63703)
-- Name: cbparcelaitembordero tstamp_mdm_cbparcelaitembordero; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbparcelaitembordero BEFORE INSERT OR UPDATE ON public.cbparcelaitembordero FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12123 (class 0 OID 0)
-- Dependencies: 11766
-- Name: TRIGGER tstamp_mdm_cbparcelaitembordero ON cbparcelaitembordero; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbparcelaitembordero ON public.cbparcelaitembordero IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11767 (class 2620 OID 65834)
-- Name: cbparcelapagamento tstamp_mdm_cbparcelapagamento; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_cbparcelapagamento BEFORE INSERT OR UPDATE ON public.cbparcelapagamento FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12124 (class 0 OID 0)
-- Dependencies: 11767
-- Name: TRIGGER tstamp_mdm_cbparcelapagamento ON cbparcelapagamento; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_cbparcelapagamento ON public.cbparcelapagamento IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11770 (class 2620 OID 67426)
-- Name: geclassificacaocontato tstamp_mdm_geclassificacaocontato; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_geclassificacaocontato BEFORE INSERT OR UPDATE ON public.geclassificacaocontato FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12125 (class 0 OID 0)
-- Dependencies: 11770
-- Name: TRIGGER tstamp_mdm_geclassificacaocontato ON geclassificacaocontato; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_geclassificacaocontato ON public.geclassificacaocontato IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11783 (class 2620 OID 63737)
-- Name: geqlcontato tstamp_mdm_geqlcontato; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_geqlcontato BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12126 (class 0 OID 0)
-- Dependencies: 11783
-- Name: TRIGGER tstamp_mdm_geqlcontato ON geqlcontato; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_geqlcontato ON public.geqlcontato IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11788 (class 2620 OID 63835)
-- Name: geqlemail tstamp_mdm_geqlemail; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_geqlemail BEFORE INSERT OR UPDATE ON public.geqlemail FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12127 (class 0 OID 0)
-- Dependencies: 11788
-- Name: TRIGGER tstamp_mdm_geqlemail ON geqlemail; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_geqlemail ON public.geqlemail IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11789 (class 2620 OID 63800)
-- Name: geqlendereco tstamp_mdm_geqlendereco; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_geqlendereco BEFORE INSERT OR UPDATE ON public.geqlendereco FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12128 (class 0 OID 0)
-- Dependencies: 11789
-- Name: TRIGGER tstamp_mdm_geqlendereco ON geqlendereco; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_geqlendereco ON public.geqlendereco IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11790 (class 2620 OID 63832)
-- Name: gestatusimporta tstamp_mdm_gestatusimporta; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_gestatusimporta BEFORE INSERT OR UPDATE ON public.gestatusimporta FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12129 (class 0 OID 0)
-- Dependencies: 11790
-- Name: TRIGGER tstamp_mdm_gestatusimporta ON gestatusimporta; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_gestatusimporta ON public.gestatusimporta IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11791 (class 2620 OID 65725)
-- Name: geusuario tstamp_mdm_geusuario; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_geusuario BEFORE INSERT OR UPDATE ON public.geusuario FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12130 (class 0 OID 0)
-- Dependencies: 11791
-- Name: TRIGGER tstamp_mdm_geusuario ON geusuario; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_geusuario ON public.geusuario IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11792 (class 2620 OID 63957)
-- Name: geusuariocliente tstamp_mdm_geusuariocliente; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER tstamp_mdm_geusuariocliente BEFORE INSERT OR UPDATE ON public.geusuariocliente FOR EACH ROW EXECUTE FUNCTION public.tstamp_mdm();

--
-- TOC entry 12131 (class 0 OID 0)
-- Dependencies: 11792
-- Name: TRIGGER tstamp_mdm_geusuariocliente ON geusuariocliente; Type: COMMENT; Schema: public; Owner: -
--

COMMENT ON TRIGGER tstamp_mdm_geusuariocliente ON public.geusuariocliente IS 'tstamp de inclusï¿½o e alteraï¿½ï¿½o da MDM';

--
-- TOC entry 11784 (class 2620 OID 63739)
-- Name: geqlcontato ztr_geqlcontato_improdutivo; Type: TRIGGER; Schema: public; Owner: -
--

CREATE TRIGGER ztr_geqlcontato_improdutivo BEFORE INSERT OR UPDATE ON public.geqlcontato FOR EACH ROW EXECUTE FUNCTION public.ftrz_geqlcontato_improdutivo();

ALTER TABLE public.geqlcontato ENABLE ALWAYS TRIGGER ztr_geqlcontato_improdutivo;

--
-- TOC entry 11409 (class 2606 OID 68347)
-- Name: cbestacionamentoapreensao cbapreensao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestacionamentoapreensao
    ADD CONSTRAINT cbapreensao_fkey FOREIGN KEY (id_cbapreensao_int) REFERENCES public.cbapreensao(id_cbapreensao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11343 (class 2606 OID 67640)
-- Name: cbblbaseregistro cbbbase_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbaseregistro
    ADD CONSTRAINT cbbbase_fkey FOREIGN KEY (id_cbblbase_int) REFERENCES public.cbblbase(id_cbblbase_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11340 (class 2606 OID 66140)
-- Name: cbblacklistcliente cbblacklistcliente_id_gecliente_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblacklistcliente
    ADD CONSTRAINT cbblacklistcliente_id_gecliente_int_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int);

--
-- TOC entry 11344 (class 2606 OID 67647)
-- Name: cbblbaseregistroparcela cbblbaseregistro_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbaseregistroparcela
    ADD CONSTRAINT cbblbaseregistro_fkey FOREIGN KEY (id_cbblbaseregistro_int) REFERENCES public.cbblbaseregistro(id_cbblbaseregistro_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11342 (class 2606 OID 67635)
-- Name: cbblbaseendereco cbblboletagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbaseendereco
    ADD CONSTRAINT cbblboletagem_fkey FOREIGN KEY (id_cbblboletagem_int) REFERENCES public.cbblboletagem(id_cbblboletagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11345 (class 2606 OID 67668)
-- Name: cbblconfiguracao cbblboletagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblconfiguracao
    ADD CONSTRAINT cbblboletagem_fkey FOREIGN KEY (id_cbblboletagem_int) REFERENCES public.cbblboletagem(id_cbblboletagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11341 (class 2606 OID 67662)
-- Name: cbblbase cbblconfiguracao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblbase
    ADD CONSTRAINT cbblconfiguracao_fkey FOREIGN KEY (id_cbblconfiguracao_int) REFERENCES public.cbblconfiguracao(id_cbblconfiguracao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11346 (class 2606 OID 67683)
-- Name: cbblconfiguracaoitem cbblconfiguracao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblconfiguracaoitem
    ADD CONSTRAINT cbblconfiguracao_fkey FOREIGN KEY (id_cbblconfiguracao_int) REFERENCES public.cbblconfiguracao(id_cbblconfiguracao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11428 (class 2606 OID 68520)
-- Name: cbitemborderoboletagem cbblconfiguracaoitem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderoboletagem
    ADD CONSTRAINT cbblconfiguracaoitem_fkey FOREIGN KEY (id_cbblconfiguracaoitem_int) REFERENCES public.cbblconfiguracaoitem(id_cbblconfiguracaoitem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11353 (class 2606 OID 67724)
-- Name: cbboletagemparcela cbboletagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbboletagemparcela
    ADD CONSTRAINT cbboletagem_fkey FOREIGN KEY (id_cbboletagem_int) REFERENCES public.cbboletagem(id_cbboletagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11425 (class 2606 OID 63932)
-- Name: cbitembordero cbbordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitembordero
    ADD CONSTRAINT cbbordero_fkey FOREIGN KEY (id_cbbordero_int) REFERENCES public.cbbordero(id_cbbordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11680 (class 2606 OID 80590)
-- Name: gesolicitacaocustas cbbordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaocustas
    ADD CONSTRAINT cbbordero_fkey FOREIGN KEY (id_cbbordero_int) REFERENCES public.cbbordero(id_cbbordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11356 (class 2606 OID 67746)
-- Name: cbcalculocomissaofaixa cbcalculocomissao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculocomissaofaixa
    ADD CONSTRAINT cbcalculocomissao_fkey FOREIGN KEY (id_cbcalculocomissao_int) REFERENCES public.cbcalculocomissao(id_cbcalculocomissao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11357 (class 2606 OID 67047)
-- Name: cbcalculodescontofaixa cbcalculodesconto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodescontofaixa
    ADD CONSTRAINT cbcalculodesconto_fkey FOREIGN KEY (id_cbcalculodesconto_int) REFERENCES public.cbcalculodesconto(id_cbcalculodesconto_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11359 (class 2606 OID 67757)
-- Name: cbcalculodescontofator cbcalculodesconto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodescontofator
    ADD CONSTRAINT cbcalculodesconto_fkey FOREIGN KEY (id_cbcalculodesconto_int) REFERENCES public.cbcalculodesconto(id_cbcalculodesconto_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11362 (class 2606 OID 67172)
-- Name: cbcampanhateste cbcalculodesconto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhateste
    ADD CONSTRAINT cbcalculodesconto_fkey FOREIGN KEY (id_cbcalculodesconto_int) REFERENCES public.cbcalculodesconto(id_cbcalculodesconto_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11358 (class 2606 OID 67751)
-- Name: cbcalculodescontofaixaregua cbcalculodescontofaixa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculodescontofaixaregua
    ADD CONSTRAINT cbcalculodescontofaixa_fkey FOREIGN KEY (id_cbcalculodescontofaixa_int) REFERENCES public.cbcalculodescontofaixa(id_cbcalculodescontofaixa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11361 (class 2606 OID 67778)
-- Name: cbcalculotabelafaixa cbcalculotabela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculotabelafaixa
    ADD CONSTRAINT cbcalculotabela_fkey FOREIGN KEY (id_cbcalculotabela_int) REFERENCES public.cbcalculotabela(id_cbcalculotabela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11363 (class 2606 OID 67166)
-- Name: cbcampanhateste cbcampanha_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhateste
    ADD CONSTRAINT cbcampanha_fkey FOREIGN KEY (id_cbcampanha_int) REFERENCES public.cbcampanha(id_cbcampanha_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11367 (class 2606 OID 67795)
-- Name: cbcampanhatesteautorizado cbcampanhateste_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteautorizado
    ADD CONSTRAINT cbcampanhateste_fkey FOREIGN KEY (id_cbcampanhateste_int) REFERENCES public.cbcampanhateste(id_cbcampanhateste_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11369 (class 2606 OID 67815)
-- Name: cbcampanhatesteitembordero cbcampanhateste_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteitembordero
    ADD CONSTRAINT cbcampanhateste_fkey FOREIGN KEY (id_cbcampanhateste_int) REFERENCES public.cbcampanhateste(id_cbcampanhateste_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11470 (class 2606 OID 70973)
-- Name: cbnotifvalor cbcartorio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifvalor
    ADD CONSTRAINT cbcartorio_fkey FOREIGN KEY (id_cbcartorio_int) REFERENCES public.cbcartorio(id_cbcartorio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11519 (class 2606 OID 74138)
-- Name: cbtiponegociocartorio cbcartorio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegociocartorio
    ADD CONSTRAINT cbcartorio_fkey FOREIGN KEY (id_cbcartorio_int) REFERENCES public.cbcartorio(id_cbcartorio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11546 (class 2606 OID 66914)
-- Name: cbvalortipodespesa cbcartorio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbvalortipodespesa
    ADD CONSTRAINT cbcartorio_fkey FOREIGN KEY (id_cbcartorio_int) REFERENCES public.cbcartorio(id_cbcartorio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11695 (class 2606 OID 66859)
-- Name: gestatusdespesa cbcartorio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusdespesa
    ADD CONSTRAINT cbcartorio_fkey FOREIGN KEY (id_cbcartorio_int) REFERENCES public.cbcartorio(id_cbcartorio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11374 (class 2606 OID 67832)
-- Name: cbcodigodividaparametros cbcodigodivida_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcodigodividaparametros
    ADD CONSTRAINT cbcodigodivida_fkey FOREIGN KEY (id_cbcodigodivida_int) REFERENCES public.cbcodigodivida(id_cbcodigodivida_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11552 (class 2606 OID 77842)
-- Name: esdistribsenhavw cbcontrato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esdistribsenhavw
    ADD CONSTRAINT cbcontrato_fkey FOREIGN KEY (id_cbcontrato_int) REFERENCES public.cbcontrato(id_cbcontrato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11354 (class 2606 OID 67136)
-- Name: cbbordero cbconvenio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbbordero
    ADD CONSTRAINT cbconvenio_fkey FOREIGN KEY (id_cbconvenio_int) REFERENCES public.cbconvenio(id_cbconvenio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11389 (class 2606 OID 68223)
-- Name: cbconvenioetapa cbconvenio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenioetapa
    ADD CONSTRAINT cbconvenio_fkey FOREIGN KEY (id_cbconvenio_int) REFERENCES public.cbconvenio(id_cbconvenio_int) ON UPDATE CASCADE;

--
-- TOC entry 11392 (class 2606 OID 68258)
-- Name: cbconveniofaixaatraso cbconvenio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniofaixaatraso
    ADD CONSTRAINT cbconvenio_fkey FOREIGN KEY (id_cbconvenio_int) REFERENCES public.cbconvenio(id_cbconvenio_int) ON UPDATE CASCADE;

--
-- TOC entry 11395 (class 2606 OID 68235)
-- Name: cbconveniotiponegocio cbconvenio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniotiponegocio
    ADD CONSTRAINT cbconvenio_fkey FOREIGN KEY (id_cbconvenio_int) REFERENCES public.cbconvenio(id_cbconvenio_int) ON UPDATE CASCADE;

--
-- TOC entry 11516 (class 2606 OID 67446)
-- Name: cbtiponegocio cbconvenio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegocio
    ADD CONSTRAINT cbconvenio_fkey FOREIGN KEY (id_cbconvenio_int) REFERENCES public.cbconvenio(id_cbconvenio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11432 (class 2606 OID 68563)
-- Name: cbitemborderocusta cbdespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderocusta
    ADD CONSTRAINT cbdespesa_fkey FOREIGN KEY (id_cbdespesa_int) REFERENCES public.cbdespesa(id_cbdespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11449 (class 2606 OID 69858)
-- Name: cbnotifmarcaparcela cbdespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifmarcaparcela
    ADD CONSTRAINT cbdespesa_fkey FOREIGN KEY (id_cbdespesa_int) REFERENCES public.cbdespesa(id_cbdespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11483 (class 2606 OID 71466)
-- Name: cbparceladespesa cbdespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparceladespesa
    ADD CONSTRAINT cbdespesa_fkey FOREIGN KEY (id_cbdespesa_int) REFERENCES public.cbdespesa(id_cbdespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11553 (class 2606 OID 78215)
-- Name: esdocfisico cbdespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esdocfisico
    ADD CONSTRAINT cbdespesa_fkey FOREIGN KEY (id_cbdespesa_int) REFERENCES public.cbdespesa(id_cbdespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11435 (class 2606 OID 66225)
-- Name: cbitemlay cbdetalhelay_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemlay
    ADD CONSTRAINT cbdetalhelay_fkey FOREIGN KEY (id_cbdetalhelay_int) REFERENCES public.cbdetalhelay(id_cbdetalhelay_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11375 (class 2606 OID 68340)
-- Name: cbcontrato cbdistribuidorcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontrato
    ADD CONSTRAINT cbdistribuidorcliente_fkey FOREIGN KEY (id_cbdistribuidorcliente_int) REFERENCES public.cbdistribuidorcliente(id_cbdistribuidorcliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11401 (class 2606 OID 68306)
-- Name: cbdistribuidorcliente cbdistribuidorcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdistribuidorcliente
    ADD CONSTRAINT cbdistribuidorcliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11548 (class 2606 OID 77575)
-- Name: escomissaobb cbdistribuidorcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escomissaobb
    ADD CONSTRAINT cbdistribuidorcliente_fkey FOREIGN KEY (id_cbdistribuidorcliente_int) REFERENCES public.cbdistribuidorcliente(id_cbdistribuidorcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11554 (class 2606 OID 78665)
-- Name: esinstrucao cbdistribuidorcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esinstrucao
    ADD CONSTRAINT cbdistribuidorcliente_fkey FOREIGN KEY (id_cbdistribuidorcliente_int) REFERENCES public.cbdistribuidorcliente(id_cbdistribuidorcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11410 (class 2606 OID 68328)
-- Name: cbestacionamentoapreensao cbestacionamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestacionamentoapreensao
    ADD CONSTRAINT cbestacionamento_fkey FOREIGN KEY (id_cbestacionamento_int) REFERENCES public.cbestacionamento(id_cbestacionamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11390 (class 2606 OID 68229)
-- Name: cbconvenioetapa cbetapa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenioetapa
    ADD CONSTRAINT cbetapa_fkey FOREIGN KEY (id_cbetapa_int) REFERENCES public.cbetapa(id_cbetapa_int);

--
-- TOC entry 11461 (class 2606 OID 70384)
-- Name: cbnotifparametrosnao cbetapa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosnao
    ADD CONSTRAINT cbetapa_fkey FOREIGN KEY (id_cbetapa_int) REFERENCES public.cbetapa(id_cbetapa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11526 (class 2606 OID 74857)
-- Name: cbtipopagamentoetapa cbetapa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoetapa
    ADD CONSTRAINT cbetapa_fkey FOREIGN KEY (id_cbetapa_int) REFERENCES public.cbetapa(id_cbetapa_int);

--
-- TOC entry 11606 (class 2606 OID 67470)
-- Name: gefaixaatraso cbetapa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefaixaatraso
    ADD CONSTRAINT cbetapa_fkey FOREIGN KEY (id_cbetapa_int) REFERENCES public.cbetapa(id_cbetapa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11613 (class 2606 OID 79646)
-- Name: gegrupoetapa cbetapa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupoetapa
    ADD CONSTRAINT cbetapa_fkey FOREIGN KEY (id_cbetapa_int) REFERENCES public.cbetapa(id_cbetapa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11419 (class 2606 OID 68407)
-- Name: cbgravacaofollowup cbfollowup_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgravacaofollowup
    ADD CONSTRAINT cbfollowup_fkey FOREIGN KEY (id_cbfollowup_int) REFERENCES public.cbfollowup(id_cbfollowup_int) MATCH FULL DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11585 (class 2606 OID 79558)
-- Name: gebloqueiotelefonecontato cbfollowup_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontato
    ADD CONSTRAINT cbfollowup_fkey FOREIGN KEY (id_cbfollowup_int) REFERENCES public.cbfollowup(id_cbfollowup_int);

--
-- TOC entry 11643 (class 2606 OID 79808)
-- Name: gepreanalise cbfollowup_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalise
    ADD CONSTRAINT cbfollowup_fkey FOREIGN KEY (id_cbfollowup_int) REFERENCES public.cbfollowup(id_cbfollowup_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11647 (class 2606 OID 79833)
-- Name: gepreanalisefollowup cbfollowup_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalisefollowup
    ADD CONSTRAINT cbfollowup_fkey FOREIGN KEY (id_cbfollowup_int) REFERENCES public.cbfollowup(id_cbfollowup_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11405 (class 2606 OID 67285)
-- Name: cbespeciepagamento cbformapagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbespeciepagamento
    ADD CONSTRAINT cbformapagamento_fkey FOREIGN KEY (id_cbformapagamento_int) REFERENCES public.cbformapagamento(id_cbformapagamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11338 (class 2606 OID 68393)
-- Name: cbapreensao cbgarantia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbapreensao
    ADD CONSTRAINT cbgarantia_fkey FOREIGN KEY (id_cbgarantia_int) REFERENCES public.cbgarantia(id_cbgarantia_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11649 (class 2606 OID 79828)
-- Name: gepreanaliseveiculo cbgarantia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanaliseveiculo
    ADD CONSTRAINT cbgarantia_fkey FOREIGN KEY (id_cbgarantia_int) REFERENCES public.cbgarantia(id_cbgarantia_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11709 (class 2606 OID 80793)
-- Name: getriagemveiculo cbgarantia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculo
    ADD CONSTRAINT cbgarantia_fkey FOREIGN KEY (id_cbgarantia_int) REFERENCES public.cbgarantia(id_cbgarantia_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11420 (class 2606 OID 68426)
-- Name: cbgravacaofollowup cbgravacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgravacaofollowup
    ADD CONSTRAINT cbgravacao_fkey FOREIGN KEY (id_cbgravacao_int) REFERENCES public.cbgravacao(id_cbgravacao_int) MATCH FULL DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11439 (class 2606 OID 67534)
-- Name: cbmodlayoutagrupados cbgrupolayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmodlayoutagrupados
    ADD CONSTRAINT cbgrupolayout_fkey FOREIGN KEY (id_cbgrupolayout_int) REFERENCES public.cbgrupolayout(id_cbgrupolayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11426 (class 2606 OID 68456)
-- Name: cbitembordero cbinstrucao1_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitembordero
    ADD CONSTRAINT cbinstrucao1_fkey FOREIGN KEY (id_cbinstrucao1_int) REFERENCES public.cbinstrucao(id_cbinstrucao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11427 (class 2606 OID 68441)
-- Name: cbitembordero cbinstrucao2_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitembordero
    ADD CONSTRAINT cbinstrucao2_fkey FOREIGN KEY (id_cbinstrucao2_int) REFERENCES public.cbinstrucao(id_cbinstrucao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11352 (class 2606 OID 67678)
-- Name: cbboletagem cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbboletagem
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11370 (class 2606 OID 67789)
-- Name: cbcampanhatesteitembordero cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteitembordero
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11431 (class 2606 OID 68546)
-- Name: cbitemborderocomprovantepgto cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderocomprovantepgto
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11433 (class 2606 OID 68584)
-- Name: cbitemborderoretorno cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderoretorno
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int);

--
-- TOC entry 11434 (class 2606 OID 68603)
-- Name: cbitemborderostatus cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderostatus
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11476 (class 2606 OID 65757)
-- Name: cbpagamento cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbpagamento
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11485 (class 2606 OID 63685)
-- Name: cbparcelaitembordero cbitembordero_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelaitembordero
    ADD CONSTRAINT cbitembordero_fkey FOREIGN KEY (id_cbitembordero_int) REFERENCES public.cbitembordero(id_cbitembordero_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11429 (class 2606 OID 68540)
-- Name: cbitemborderoboletagemparcela cbitemborderoboletagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderoboletagemparcela
    ADD CONSTRAINT cbitemborderoboletagem_fkey FOREIGN KEY (id_cbitemborderoboletagem_int) REFERENCES public.cbitemborderoboletagem(id_cbitemborderoboletagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11473 (class 2606 OID 70991)
-- Name: cbordemlay cbitemlay_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbordemlay
    ADD CONSTRAINT cbitemlay_fkey FOREIGN KEY (id_cbitemlay_int) REFERENCES public.cbitemlay(id_cbitemlay_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11372 (class 2606 OID 66843)
-- Name: cbcartorio cbmodlayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcartorio
    ADD CONSTRAINT cbmodlayout_fkey FOREIGN KEY (id_cbmodlayout_int) REFERENCES public.cbmodlayout(id_cbmodlayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11399 (class 2606 OID 66285)
-- Name: cbdetalhelay cbmodlayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdetalhelay
    ADD CONSTRAINT cbmodlayout_fkey FOREIGN KEY (id_cbmodlayout_int) REFERENCES public.cbmodlayout(id_cbmodlayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11402 (class 2606 OID 68322)
-- Name: cbentradalay cbmodlayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbentradalay
    ADD CONSTRAINT cbmodlayout_fkey FOREIGN KEY (id_cbmodlayout_int) REFERENCES public.cbmodlayout(id_cbmodlayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11440 (class 2606 OID 67523)
-- Name: cbmodlayoutagrupados cbmodlayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmodlayoutagrupados
    ADD CONSTRAINT cbmodlayout_fkey FOREIGN KEY (id_cbmodlayout_int) REFERENCES public.cbmodlayout(id_cbmodlayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11474 (class 2606 OID 71045)
-- Name: cbordemlay cbmodlayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbordemlay
    ADD CONSTRAINT cbmodlayout_fkey FOREIGN KEY (id_cbmodlayout_int) REFERENCES public.cbmodlayout(id_cbmodlayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11568 (class 2606 OID 67488)
-- Name: ficcbanco cbmodlayout_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficcbanco
    ADD CONSTRAINT cbmodlayout_fkey FOREIGN KEY (id_cbmodlayout_int) REFERENCES public.cbmodlayout(id_cbmodlayout_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11422 (class 2606 OID 69340)
-- Name: cbinstrucaobanco cbmotivobanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinstrucaobanco
    ADD CONSTRAINT cbmotivobanco_fkey FOREIGN KEY (id_cbmotivobanco_int) REFERENCES public.cbmotivobanco(id_cbmotivobanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11443 (class 2606 OID 69825)
-- Name: cbnotifcodigodividaparam cbnotifcodigodivida_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT cbnotifcodigodivida_fkey FOREIGN KEY (id_cbnotifcodigodivida_int) REFERENCES public.cbnotifcodigodivida(id_cbnotifcodigodivida_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11460 (class 2606 OID 71377)
-- Name: cbnotifparametrosda cbnotifparametros_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosda
    ADD CONSTRAINT cbnotifparametros_fkey FOREIGN KEY (id_cbnotifparametros_int) REFERENCES public.cbnotifparametros(id_cbnotifparametros_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11466 (class 2606 OID 70083)
-- Name: cbnotifparametrostn cbnotifparametrosda_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrostn
    ADD CONSTRAINT cbnotifparametrosda_fkey FOREIGN KEY (id_cbnotifparametrosda_int) REFERENCES public.cbnotifparametrosda(id_cbnotifparametrosda_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11406 (class 2606 OID 65874)
-- Name: cbespeciepagamento cbpagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbespeciepagamento
    ADD CONSTRAINT cbpagamento_fkey FOREIGN KEY (id_cbpagamento_int) REFERENCES public.cbpagamento(id_cbpagamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11487 (class 2606 OID 65827)
-- Name: cbparcelapagamento cbpagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelapagamento
    ADD CONSTRAINT cbpagamento_fkey FOREIGN KEY (id_cbpagamento_int) REFERENCES public.cbpagamento(id_cbpagamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11360 (class 2606 OID 67299)
-- Name: cbcalculoparcela cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcalculoparcela
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11413 (class 2606 OID 45832)
-- Name: cbfollowup cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfollowup
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11430 (class 2606 OID 68525)
-- Name: cbitemborderoboletagemparcela cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemborderoboletagemparcela
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11450 (class 2606 OID 69765)
-- Name: cbnotifmarcaparcela cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifmarcaparcela
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11484 (class 2606 OID 71142)
-- Name: cbparceladespesa cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparceladespesa
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11486 (class 2606 OID 63678)
-- Name: cbparcelaitembordero cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelaitembordero
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11488 (class 2606 OID 65785)
-- Name: cbparcelapagamento cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelapagamento
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11499 (class 2606 OID 73011)
-- Name: cbreembolso cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbreembolso
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11556 (class 2606 OID 79193)
-- Name: espropostabb cbparcela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.espropostabb
    ADD CONSTRAINT cbparcela_fkey FOREIGN KEY (id_cbparcela_int) REFERENCES public.cbparcela(id_cbparcela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11376 (class 2606 OID 72101)
-- Name: cbcontratoitau cbplataforma_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitau
    ADD CONSTRAINT cbplataforma_fkey FOREIGN KEY (id_cbplataforma_int) REFERENCES public.cbplataforma(id_cbplataforma_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11379 (class 2606 OID 72244)
-- Name: cbcontratoitaubanco cbplataforma_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaubanco
    ADD CONSTRAINT cbplataforma_fkey FOREIGN KEY (id_cbplataforma_int) REFERENCES public.cbplataforma(id_cbplataforma_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11381 (class 2606 OID 72271)
-- Name: cbcontratoitaupic cbplataforma_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaupic
    ADD CONSTRAINT cbplataforma_fkey FOREIGN KEY (id_cbplataforma_int) REFERENCES public.cbplataforma(id_cbplataforma_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11383 (class 2606 OID 72380)
-- Name: cbcontratoschahin cbplataforma_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoschahin
    ADD CONSTRAINT cbplataforma_fkey FOREIGN KEY (id_cbplataforma_int) REFERENCES public.cbplataforma(id_cbplataforma_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11380 (class 2606 OID 72497)
-- Name: cbcontratoitaubanco cbproduto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitaubanco
    ADD CONSTRAINT cbproduto_fkey FOREIGN KEY (id_cbproduto_int) REFERENCES public.cbproduto(id_cbproduto_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11384 (class 2606 OID 72606)
-- Name: cbcontratounibanco cbproduto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratounibanco
    ADD CONSTRAINT cbproduto_fkey FOREIGN KEY (id_cbproduto_int) REFERENCES public.cbproduto(id_cbproduto_int) ON UPDATE CASCADE;

--
-- TOC entry 11444 (class 2606 OID 72780)
-- Name: cbnotifcodigodividaparam cbproduto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT cbproduto_fkey FOREIGN KEY (id_cbproduto_int) REFERENCES public.cbproduto(id_cbproduto_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11495 (class 2606 OID 72936)
-- Name: cbprodutocliente cbproduto_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT cbproduto_fkey FOREIGN KEY (id_cbproduto_int) REFERENCES public.cbproduto(id_cbproduto_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11385 (class 2606 OID 72331)
-- Name: cbcontratounibanco cbprodutocliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratounibanco
    ADD CONSTRAINT cbprodutocliente_fkey FOREIGN KEY (id_cbprodutocliente_int) REFERENCES public.cbprodutocliente(id_cbprodutocliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11489 (class 2606 OID 72556)
-- Name: cbparcelaproposta cbproposta_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparcelaproposta
    ADD CONSTRAINT cbproposta_fkey FOREIGN KEY (id_cbproposta_int) REFERENCES public.cbproposta(id_cbproposta_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11373 (class 2606 OID 66421)
-- Name: cbcobrancaautomatica cbsitcontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcobrancaautomatica
    ADD CONSTRAINT cbsitcontato_fkey FOREIGN KEY (id_cbsitcontato_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11414 (class 2606 OID 66411)
-- Name: cbfollowup cbsitcontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfollowup
    ADD CONSTRAINT cbsitcontato_fkey FOREIGN KEY (id_cbsitcontato_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11607 (class 2606 OID 67025)
-- Name: gefaixaatraso cbsitcontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefaixaatraso
    ADD CONSTRAINT cbsitcontato_fkey FOREIGN KEY (id_cbsitcontato_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11451 (class 2606 OID 71002)
-- Name: cbnotifparametros cbsitcontato_fkey1; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey1 FOREIGN KEY (sitcontato_rem_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11452 (class 2606 OID 70922)
-- Name: cbnotifparametros cbsitcontato_fkey2; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey2 FOREIGN KEY (sitcontato_df_rem_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11453 (class 2606 OID 70778)
-- Name: cbnotifparametros cbsitcontato_fkey3; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey3 FOREIGN KEY (sitcontato_ret_pos_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11454 (class 2606 OID 70659)
-- Name: cbnotifparametros cbsitcontato_fkey4; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey4 FOREIGN KEY (sitcontato_ret_neg_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11455 (class 2606 OID 70340)
-- Name: cbnotifparametros cbsitcontato_fkey5; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey5 FOREIGN KEY (sitcontato_df_ret_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11456 (class 2606 OID 69984)
-- Name: cbnotifparametros cbsitcontato_fkey6; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey6 FOREIGN KEY (sitcontato_can_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11457 (class 2606 OID 69921)
-- Name: cbnotifparametros cbsitcontato_fkey7; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT cbsitcontato_fkey7 FOREIGN KEY (sitcontato_exc_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11507 (class 2606 OID 73673)
-- Name: cbsituacaocontatoemail cbsituacaocontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontatoemail
    ADD CONSTRAINT cbsituacaocontato_fkey FOREIGN KEY (id_cbsituacaocontato_int) REFERENCES public.cbsitcontato(id_cbsitcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11445 (class 2606 OID 69515)
-- Name: cbnotifcodigodividaparam cbsituacaocontrato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT cbsituacaocontrato_fkey FOREIGN KEY (id_cbsituacaocontrato_int) REFERENCES public.cbsituacaocontrato(id_cbsituacaocontrato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11462 (class 2606 OID 70143)
-- Name: cbnotifparametrosnao cbsituacaocontrato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosnao
    ADD CONSTRAINT cbsituacaocontrato_fkey FOREIGN KEY (id_cbsituacaocontrato_int) REFERENCES public.cbsituacaocontrato(id_cbsituacaocontrato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11509 (class 2606 OID 66964)
-- Name: cbsituacaocontratohistorico cbsituacaocontrato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontratohistorico
    ADD CONSTRAINT cbsituacaocontrato_fkey FOREIGN KEY (id_cbsituacaocontrato_int) REFERENCES public.cbsituacaocontrato(id_cbsituacaocontrato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11510 (class 2606 OID 66957)
-- Name: cbsituacaocontratohistorico cbsituacaocontrato_old_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontratohistorico
    ADD CONSTRAINT cbsituacaocontrato_old_fkey FOREIGN KEY (id_cbsituacaocontrato_old_int) REFERENCES public.cbsituacaocontrato(id_cbsituacaocontrato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11500 (class 2606 OID 73306)
-- Name: cbreembolso cbtipodespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbreembolso
    ADD CONSTRAINT cbtipodespesa_fkey FOREIGN KEY (id_cbtipodespesa_int) REFERENCES public.cbtipodespesa(id_cbtipodespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11547 (class 2606 OID 66908)
-- Name: cbvalortipodespesa cbtipodespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbvalortipodespesa
    ADD CONSTRAINT cbtipodespesa_fkey FOREIGN KEY (id_cbtipodespesa_int) REFERENCES public.cbtipodespesa(id_cbtipodespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11407 (class 2606 OID 73937)
-- Name: cbestacionamento cbtipoestacionamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestacionamento
    ADD CONSTRAINT cbtipoestacionamento_fkey FOREIGN KEY (id_cbtipoestacionamento_int) REFERENCES public.cbtipoestacionamento(id_cbtipoestacionamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11418 (class 2606 OID 73986)
-- Name: cbgarantia cbtipogarantia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbgarantia
    ADD CONSTRAINT cbtipogarantia_fkey FOREIGN KEY (id_cbtipogarantia_int) REFERENCES public.cbtipogarantia(id_cbtipogarantia_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11386 (class 2606 OID 67465)
-- Name: cbconvenio cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenio
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11396 (class 2606 OID 68246)
-- Name: cbconveniotiponegocio cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniotiponegocio
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int);

--
-- TOC entry 11446 (class 2606 OID 69652)
-- Name: cbnotifcodigodividaparam cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11463 (class 2606 OID 70294)
-- Name: cbnotifparametrosnao cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosnao
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11467 (class 2606 OID 70589)
-- Name: cbnotifseparado cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifseparado
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11496 (class 2606 OID 71795)
-- Name: cbprodutocliente cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11501 (class 2606 OID 73388)
-- Name: cbreembolso cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbreembolso
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11520 (class 2606 OID 74212)
-- Name: cbtiponegociocartorio cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegociocartorio
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11539 (class 2606 OID 67477)
-- Name: cbtipopagamentotipneg cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentotipneg
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int);

--
-- TOC entry 11565 (class 2606 OID 79374)
-- Name: essenhavw cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.essenhavw
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11579 (class 2606 OID 79457)
-- Name: fidesconto cbtiponegocio_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fidesconto
    ADD CONSTRAINT cbtiponegocio_fkey FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11355 (class 2606 OID 67004)
-- Name: cbbordero cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbbordero
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11477 (class 2606 OID 67015)
-- Name: cbpagamento cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbpagamento
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11522 (class 2606 OID 74185)
-- Name: cbtipopagamentoabat cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoabat
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11523 (class 2606 OID 74448)
-- Name: cbtipopagamentocampo cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentocampo
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11525 (class 2606 OID 74619)
-- Name: cbtipopagamentoestdes cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoestdes
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11527 (class 2606 OID 74731)
-- Name: cbtipopagamentoetapa cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoetapa
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11529 (class 2606 OID 75207)
-- Name: cbtipopagamentofilial cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentofilial
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11532 (class 2606 OID 74950)
-- Name: cbtipopagamentoparcela cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoparcela
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11534 (class 2606 OID 75167)
-- Name: cbtipopagamentoparcelamento cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoparcelamento
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11535 (class 2606 OID 75258)
-- Name: cbtipopagamentoregua cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoregua
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11538 (class 2606 OID 75298)
-- Name: cbtipopagamentositdes cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentositdes
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11540 (class 2606 OID 67403)
-- Name: cbtipopagamentotipneg cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentotipneg
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11542 (class 2606 OID 75451)
-- Name: cbtipopagamentouf cbtipopagamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentouf
    ADD CONSTRAINT cbtipopagamento_fkey FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11398 (class 2606 OID 68275)
-- Name: cbdespesa cbvalortipodespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdespesa
    ADD CONSTRAINT cbvalortipodespesa_fkey FOREIGN KEY (id_cbvalortipodespesa_int) REFERENCES public.cbvalortipodespesa(id_cbvalortipodespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11504 (class 2606 OID 66923)
-- Name: cbsitcontato cbvalortipodespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsitcontato
    ADD CONSTRAINT cbvalortipodespesa_fkey FOREIGN KEY (id_cbvalortipodespesa_int) REFERENCES public.cbvalortipodespesa(id_cbvalortipodespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11736 (class 2606 OID 80920)
-- Name: lp cnt_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.lp
    ADD CONSTRAINT cnt_fkey FOREIGN KEY (id_cnt) REFERENCES public.cnt(id_cnt) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11408 (class 2606 OID 76959)
-- Name: cbestacionamento esagenciabradesco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbestacionamento
    ADD CONSTRAINT esagenciabradesco_fkey FOREIGN KEY (id_esagenciabradesco_int) REFERENCES public.esagenciabradesco(id_esagenciabradesco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11536 (class 2606 OID 75275)
-- Name: cbtipopagamentoregua esregua_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoregua
    ADD CONSTRAINT esregua_fkey FOREIGN KEY (id_esregua_int) REFERENCES public.esregua(id_esregua_int);

--
-- TOC entry 11559 (class 2606 OID 79298)
-- Name: esreguafaixaatraso esregua_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguafaixaatraso
    ADD CONSTRAINT esregua_fkey FOREIGN KEY (id_esregua_int) REFERENCES public.esregua(id_esregua_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11387 (class 2606 OID 67107)
-- Name: cbconvenio fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenio
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11423 (class 2606 OID 68436)
-- Name: cbinstrucaobanco fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinstrucaobanco
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11480 (class 2606 OID 67345)
-- Name: cbparamclifilial fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparamclifilial
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11517 (class 2606 OID 67439)
-- Name: cbtiponegocio fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegocio
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11569 (class 2606 OID 67496)
-- Name: ficcbanco fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficcbanco
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11570 (class 2606 OID 79395)
-- Name: ficheque fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficheque
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11571 (class 2606 OID 79415)
-- Name: fichequedevolvido fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fichequedevolvido
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11627 (class 2606 OID 79686)
-- Name: geinstrucaobaixa fibanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinstrucaobaixa
    ADD CONSTRAINT fibanco_fkey FOREIGN KEY (id_fibanco_int) REFERENCES public.fibanco(id_fibanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11388 (class 2606 OID 67508)
-- Name: cbconvenio ficcbanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenio
    ADD CONSTRAINT ficcbanco_fkey FOREIGN KEY (id_ficcbanco_int) REFERENCES public.ficcbanco(id_ficcbanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11518 (class 2606 OID 67516)
-- Name: cbtiponegocio ficcbanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegocio
    ADD CONSTRAINT ficcbanco_fkey FOREIGN KEY (id_ficcbanco_int) REFERENCES public.ficcbanco(id_ficcbanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11575 (class 2606 OID 79425)
-- Name: ficontacliente ficcbanco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficontacliente
    ADD CONSTRAINT ficcbanco_fkey FOREIGN KEY (id_ficcbanco_int) REFERENCES public.ficcbanco(id_ficcbanco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11577 (class 2606 OID 79430)
-- Name: fidescindicebanco fimoeda_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fidescindicebanco
    ADD CONSTRAINT fimoeda_fkey FOREIGN KEY (id_fimoeda_int) REFERENCES public.fimoeda(id_fimoeda_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11581 (class 2606 OID 67228)
-- Name: fiindicemoeda fimoeda_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fiindicemoeda
    ADD CONSTRAINT fimoeda_fkey FOREIGN KEY (id_fimoeda_int) REFERENCES public.fimoeda(id_fimoeda_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11336 (class 2606 OID 68007)
-- Name: cbacompanhamentocontrato fk_cbacompanhamentocontrato_cbcontrato; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbacompanhamentocontrato
    ADD CONSTRAINT fk_cbacompanhamentocontrato_cbcontrato FOREIGN KEY (id_cbcontrato_int) REFERENCES public.cbcontratocredibel(id_cbcontrato_int);

--
-- TOC entry 11347 (class 2606 OID 67697)
-- Name: cbblparametros fk_id_cbcampanha_int; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblparametros
    ADD CONSTRAINT fk_id_cbcampanha_int FOREIGN KEY (id_cbcampanha_int) REFERENCES public.cbcampanha(id_cbcampanha_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11348 (class 2606 OID 67704)
-- Name: cbblparametros fk_id_cbconvenio_int; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblparametros
    ADD CONSTRAINT fk_id_cbconvenio_int FOREIGN KEY (id_cbconvenio_int) REFERENCES public.cbconvenio(id_cbconvenio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11349 (class 2606 OID 67712)
-- Name: cbblparametros fk_id_cbtiponegocio_int; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblparametros
    ADD CONSTRAINT fk_id_cbtiponegocio_int FOREIGN KEY (id_cbtiponegocio_int) REFERENCES public.cbtiponegocio(id_cbtiponegocio_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11350 (class 2606 OID 67688)
-- Name: cbblparametros fk_id_cbtipopagamento_int; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblparametros
    ADD CONSTRAINT fk_id_cbtipopagamento_int FOREIGN KEY (id_cbtipopagamento_int) REFERENCES public.cbtipopagamento(id_cbtipopagamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11351 (class 2606 OID 67673)
-- Name: cbblparametros fk_id_gecliente_int; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbblparametros
    ADD CONSTRAINT fk_id_gecliente_int FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11562 (class 2606 OID 79279)
-- Name: esreguanotificacao fkey_esreguanotificacao_geusuario; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguanotificacao
    ADD CONSTRAINT fkey_esreguanotificacao_geusuario FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int);

--
-- TOC entry 11563 (class 2606 OID 79326)
-- Name: esreguanotificacaofaixa fkey_esreguanotificacaofaixa_cbetapa; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguanotificacaofaixa
    ADD CONSTRAINT fkey_esreguanotificacaofaixa_cbetapa FOREIGN KEY (id_cbetapa_int) REFERENCES public.cbetapa(id_cbetapa_int);

--
-- TOC entry 11564 (class 2606 OID 79345)
-- Name: esreguanotificacaofaixa fkey_esreguanotificacaofaixa_esreguanotificacao; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguanotificacaofaixa
    ADD CONSTRAINT fkey_esreguanotificacaofaixa_esreguanotificacao FOREIGN KEY (id_esreguanotificacao_int) REFERENCES public.esreguanotificacao(id_esreguanotificacao_int);

--
-- TOC entry 11572 (class 2606 OID 79546)
-- Name: fichequedevolvido gealinea1_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fichequedevolvido
    ADD CONSTRAINT gealinea1_fkey FOREIGN KEY (id_gealinea1_int) REFERENCES public.gealinea(id_gealinea_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11573 (class 2606 OID 79535)
-- Name: fichequedevolvido gealinea2_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fichequedevolvido
    ADD CONSTRAINT gealinea2_fkey FOREIGN KEY (id_gealinea2_int) REFERENCES public.gealinea(id_gealinea_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11582 (class 2606 OID 66156)
-- Name: geacesso geaplicacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geacesso
    ADD CONSTRAINT geaplicacao_fkey FOREIGN KEY (id_geaplicacao_int) REFERENCES public.geaplicacao(id_geaplicacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11619 (class 2606 OID 66162)
-- Name: gehistorico geaplicacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistorico
    ADD CONSTRAINT geaplicacao_fkey FOREIGN KEY (id_geaplicacao_int) REFERENCES public.geaplicacao(id_geaplicacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11622 (class 2606 OID 66180)
-- Name: gehistoricousuario geaplicacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistoricousuario
    ADD CONSTRAINT geaplicacao_fkey FOREIGN KEY (id_geaplicacao_int) REFERENCES public.geaplicacao(id_geaplicacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11634 (class 2606 OID 66168)
-- Name: gemenu geaplicacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemenu
    ADD CONSTRAINT geaplicacao_fkey FOREIGN KEY (id_geaplicacao_int) REFERENCES public.geaplicacao(id_geaplicacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11677 (class 2606 OID 80577)
-- Name: gerelatorioquebras geaplicacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gerelatorioquebras
    ADD CONSTRAINT geaplicacao_fkey FOREIGN KEY (id_geaplicacao_int) REFERENCES public.geaplicacao(id_geaplicacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11684 (class 2606 OID 80681)
-- Name: gesolicitacaodocumento gebancoevento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gebancoevento_fkey FOREIGN KEY (id_gebancoevento_int) REFERENCES public.gebancoevento(id_gebancoevento_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11685 (class 2606 OID 80671)
-- Name: gesolicitacaodocumento gebancofase_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gebancofase_fkey FOREIGN KEY (id_gebancofase_int) REFERENCES public.gebancofase(id_gebancofase_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11587 (class 2606 OID 79602)
-- Name: gebloqueiotelefonecontatoanterior gebloqueiotelefonecontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontatoanterior
    ADD CONSTRAINT gebloqueiotelefonecontato_fkey FOREIGN KEY (id_gebloqueiotelefonecontato_int) REFERENCES public.gebloqueiotelefonecontato(id_gebloqueiotelefonecontato_int);

--
-- TOC entry 11731 (class 2606 OID 67326)
-- Name: geviewtabela gecampotabela1_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewtabela
    ADD CONSTRAINT gecampotabela1_fkey FOREIGN KEY (id_gecampotabela_relac1_int) REFERENCES public.gecampotabela(id_gecampotabela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11732 (class 2606 OID 67317)
-- Name: geviewtabela gecampotabela2_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewtabela
    ADD CONSTRAINT gecampotabela2_fkey FOREIGN KEY (id_gecampotabela_relac2_int) REFERENCES public.gecampotabela(id_gecampotabela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11364 (class 2606 OID 67149)
-- Name: cbcampanhateste gecampotabela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhateste
    ADD CONSTRAINT gecampotabela_fkey FOREIGN KEY (id_gecampotabela_int) REFERENCES public.gecampotabela(id_gecampotabela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11727 (class 2606 OID 67182)
-- Name: geviewcampo gecampotabela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewcampo
    ADD CONSTRAINT gecampotabela_fkey FOREIGN KEY (id_gecampotabela_int) REFERENCES public.gecampotabela(id_gecampotabela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11733 (class 2606 OID 67311)
-- Name: geviewtabela gecampotabela_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewtabela
    ADD CONSTRAINT gecampotabela_fkey FOREIGN KEY (id_gecampotabela_int) REFERENCES public.gecampotabela(id_gecampotabela_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11591 (class 2606 OID 79591)
-- Name: gecartapreajuizamentoconclusao gecartapreajuizamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecartapreajuizamentoconclusao
    ADD CONSTRAINT gecartapreajuizamento_fkey FOREIGN KEY (id_gecartapreajuizamento_int) REFERENCES public.gecartapreajuizamento(id_gecartapreajuizamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11598 (class 2606 OID 65847)
-- Name: gecomarca gecidade_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecomarca
    ADD CONSTRAINT gecidade_fkey FOREIGN KEY (id_gecidade_int) REFERENCES public.gecidade(id_gecidade_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11593 (class 2606 OID 66998)
-- Name: gecidade gecidade_id_geuf_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecidade
    ADD CONSTRAINT gecidade_id_geuf_int_fkey FOREIGN KEY (id_geuf_int) REFERENCES public.geuf(id_geuf_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11644 (class 2606 OID 79823)
-- Name: gepreanalise geclassificacaopreanalise_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalise
    ADD CONSTRAINT geclassificacaopreanalise_fkey FOREIGN KEY (id_geclassificacaopreanalise_int) REFERENCES public.geclassificacaopreanalise(id_geclassificacaopreanalise_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11334 (class 2606 OID 67569)
-- Name: baixaacumuladaitautmp gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.baixaacumuladaitautmp
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11335 (class 2606 OID 67577)
-- Name: baixadasitautmp gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.baixadasitautmp
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11365 (class 2606 OID 67159)
-- Name: cbcampanhateste gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhateste
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11391 (class 2606 OID 68215)
-- Name: cbconvenioetapa gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconvenioetapa
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11393 (class 2606 OID 68234)
-- Name: cbconveniofaixaatraso gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniofaixaatraso
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11397 (class 2606 OID 68263)
-- Name: cbconveniotiponegocio gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniotiponegocio
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11411 (class 2606 OID 68378)
-- Name: cbfilialcliente gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfilialcliente
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11417 (class 2606 OID 67274)
-- Name: cbformapagamento gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbformapagamento
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11421 (class 2606 OID 68413)
-- Name: cbinconsistencia gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinconsistencia
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11424 (class 2606 OID 68446)
-- Name: cbinstrucaocobranca gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbinstrucaocobranca
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11437 (class 2606 OID 66272)
-- Name: cbmodlayout gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmodlayout
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11441 (class 2606 OID 69566)
-- Name: cbnotifcodigodivida gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodivida
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11447 (class 2606 OID 69334)
-- Name: cbnotifcodigodividaparam gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11458 (class 2606 OID 69877)
-- Name: cbnotifparametros gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11464 (class 2606 OID 69948)
-- Name: cbnotifparametrosnao gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosnao
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11468 (class 2606 OID 70432)
-- Name: cbnotifseparado gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifseparado
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11471 (class 2606 OID 70913)
-- Name: cbnotifvalor gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifvalor
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11478 (class 2606 OID 66191)
-- Name: cbpagamento gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbpagamento
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11481 (class 2606 OID 67327)
-- Name: cbparamclifilial gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparamclifilial
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11490 (class 2606 OID 71751)
-- Name: cbplataforma gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbplataforma
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11493 (class 2606 OID 72143)
-- Name: cbproduto gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbproduto
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11497 (class 2606 OID 71899)
-- Name: cbprodutocliente gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11502 (class 2606 OID 73123)
-- Name: cbreembolso gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbreembolso
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11505 (class 2606 OID 66394)
-- Name: cbsitcontato gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsitcontato
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11513 (class 2606 OID 66682)
-- Name: cbsubformula gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsubformula
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11524 (class 2606 OID 74379)
-- Name: cbtipopagamentocampo gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentocampo
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11528 (class 2606 OID 74656)
-- Name: cbtipopagamentoetapa gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoetapa
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11530 (class 2606 OID 74942)
-- Name: cbtipopagamentofilial gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentofilial
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11533 (class 2606 OID 75146)
-- Name: cbtipopagamentoparcela gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoparcela
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11537 (class 2606 OID 75183)
-- Name: cbtipopagamentoregua gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentoregua
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11541 (class 2606 OID 67394)
-- Name: cbtipopagamentotipneg gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentotipneg
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11543 (class 2606 OID 75400)
-- Name: cbtipopagamentouf gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentouf
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11545 (class 2606 OID 66875)
-- Name: cbunidadevalor gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbunidadevalor
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11551 (class 2606 OID 77753)
-- Name: escontratoitau gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escontratoitau
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11555 (class 2606 OID 78459)
-- Name: esinstrucao gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esinstrucao
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11557 (class 2606 OID 67460)
-- Name: esregua gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esregua
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11566 (class 2606 OID 79359)
-- Name: essenhavw gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.essenhavw
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11574 (class 2606 OID 79400)
-- Name: ficoeficiente gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficoeficiente
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11576 (class 2606 OID 79435)
-- Name: ficontacliente gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.ficontacliente
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11578 (class 2606 OID 79420)
-- Name: fidescindicebanco gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fidescindicebanco
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11580 (class 2606 OID 79452)
-- Name: fidesconto gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.fidesconto
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11594 (class 2606 OID 67263)
-- Name: geclassificacaopreanalise gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclassificacaopreanalise
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11596 (class 2606 OID 66603)
-- Name: geclienteservidor gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclienteservidor
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int);

--
-- TOC entry 11602 (class 2606 OID 67134)
-- Name: gecriticanotificacao gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecriticanotificacao
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11612 (class 2606 OID 67097)
-- Name: gegrupo gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupo
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11615 (class 2606 OID 67373)
-- Name: gegrupofaixaatraso gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupofaixaatraso
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11620 (class 2606 OID 66200)
-- Name: gehistorico gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistorico
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11623 (class 2606 OID 66151)
-- Name: gehistoricousuario gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistoricousuario
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11625 (class 2606 OID 79672)
-- Name: geinconsistencia gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinconsistencia
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11626 (class 2606 OID 79679)
-- Name: geinconsistenciacontrato gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinconsistenciacontrato
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11636 (class 2606 OID 79753)
-- Name: gemotivonajuizamentocliente gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivonajuizamentocliente
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE;

--
-- TOC entry 11638 (class 2606 OID 79780)
-- Name: gemotivoresultadotriagem gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivoresultadotriagem
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11640 (class 2606 OID 79772)
-- Name: georgaotriagem gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.georgaotriagem
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11676 (class 2606 OID 67248)
-- Name: geqltratamentolote gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentolote
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11678 (class 2606 OID 80566)
-- Name: gerelatorioquebras gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gerelatorioquebras
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11696 (class 2606 OID 66210)
-- Name: gestatusdespesa gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusdespesa
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11698 (class 2606 OID 66175)
-- Name: gestatusimporta gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusimporta
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11704 (class 2606 OID 67360)
-- Name: getiponotificacao gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getiponotificacao
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11718 (class 2606 OID 66185)
-- Name: geusuariocliente gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariocliente
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11722 (class 2606 OID 66216)
-- Name: gevalorparametro gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11735 (class 2606 OID 80907)
-- Name: inconsistenciaitautmp gecliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.inconsistenciaitautmp
    ADD CONSTRAINT gecliente_fkey FOREIGN KEY (id_gecliente_int) REFERENCES public.gecliente(id_gecliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11686 (class 2606 OID 80600)
-- Name: gesolicitacaodocumento gecomarca_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gecomarca_fkey FOREIGN KEY (id_gecomarca_int) REFERENCES public.gecomarca(id_gecomarca_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11592 (class 2606 OID 79584)
-- Name: gecartapreajuizamentoconclusao geconclusaopreajuizamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecartapreajuizamentoconclusao
    ADD CONSTRAINT geconclusaopreajuizamento_fkey FOREIGN KEY (id_geconclusaopreajuizamento_int) REFERENCES public.geconclusaopreajuizamento(id_geconclusaopreajuizamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11690 (class 2606 OID 80614)
-- Name: gesolicitacaodocumentonotificacao gecriticanotificacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumentonotificacao
    ADD CONSTRAINT gecriticanotificacao_fkey FOREIGN KEY (id_gecriticanotificacao_int) REFERENCES public.gecriticanotificacao(id_gecriticanotificacao_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11716 (class 2606 OID 67091)
-- Name: geusuario gedepartamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuario
    ADD CONSTRAINT gedepartamento_fkey FOREIGN KEY (id_gedepartamento_int) REFERENCES public.gedepartamento(id_gedepartamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11549 (class 2606 OID 77427)
-- Name: escomissaobb geempresa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escomissaobb
    ADD CONSTRAINT geempresa_fkey FOREIGN KEY (id_geempresa_int) REFERENCES public.geempresa(id_geempresa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11610 (class 2606 OID 67242)
-- Name: gefilial geempresa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefilial
    ADD CONSTRAINT geempresa_fkey FOREIGN KEY (id_geempresa_int) REFERENCES public.geempresa(id_geempresa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11723 (class 2606 OID 67236)
-- Name: gevalorparametro geempresa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT geempresa_fkey FOREIGN KEY (id_geempresa_int) REFERENCES public.geempresa(id_geempresa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11403 (class 2606 OID 68333)
-- Name: cbentradalay geentradausuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbentradalay
    ADD CONSTRAINT geentradausuario_fkey FOREIGN KEY (id_geentradausuario_int) REFERENCES public.geentradausuario(id_geentradausuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11394 (class 2606 OID 68247)
-- Name: cbconveniofaixaatraso gefaixaatraso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbconveniofaixaatraso
    ADD CONSTRAINT gefaixaatraso_fkey FOREIGN KEY (id_gefaixaatraso_int) REFERENCES public.gefaixaatraso(id_gefaixaatraso_int);

--
-- TOC entry 11560 (class 2606 OID 79259)
-- Name: esreguafaixaatraso gefaixaatraso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguafaixaatraso
    ADD CONSTRAINT gefaixaatraso_fkey FOREIGN KEY (id_gefaixaatraso_int) REFERENCES public.gefaixaatraso(id_gefaixaatraso_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11687 (class 2606 OID 80624)
-- Name: gesolicitacaodocumento gefasesolicitacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gefasesolicitacao_fkey FOREIGN KEY (id_gefasesolicitacao_int) REFERENCES public.gefasesolicitacao(id_gefasesolicitacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11479 (class 2606 OID 66485)
-- Name: cbpagamento gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbpagamento
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11482 (class 2606 OID 67337)
-- Name: cbparamclifilial gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbparamclifilial
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11491 (class 2606 OID 71846)
-- Name: cbplataforma gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbplataforma
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11503 (class 2606 OID 73216)
-- Name: cbreembolso gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbreembolso
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11521 (class 2606 OID 74038)
-- Name: cbtiponegociocartorio gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtiponegociocartorio
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11531 (class 2606 OID 75159)
-- Name: cbtipopagamentofilial gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentofilial
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int);

--
-- TOC entry 11567 (class 2606 OID 79366)
-- Name: essenhavw gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.essenhavw
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11599 (class 2606 OID 66498)
-- Name: gecomarca gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecomarca
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11603 (class 2606 OID 67154)
-- Name: gecriticanotificacao gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecriticanotificacao
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11611 (class 2606 OID 66656)
-- Name: gefilialgrupo gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefilialgrupo
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11688 (class 2606 OID 80609)
-- Name: gesolicitacaodocumento gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11717 (class 2606 OID 66477)
-- Name: geusuario gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuario
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11724 (class 2606 OID 66503)
-- Name: gevalorparametro gefilial_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT gefilial_fkey FOREIGN KEY (id_gefilial_int) REFERENCES public.gefilial(id_gefilial_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11614 (class 2606 OID 79640)
-- Name: gegrupoetapa gegrupo_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupoetapa
    ADD CONSTRAINT gegrupo_fkey FOREIGN KEY (id_gegrupo_int) REFERENCES public.gegrupo(id_gegrupo_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11617 (class 2606 OID 67119)
-- Name: gegrupousuario gegrupo_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupousuario
    ADD CONSTRAINT gegrupo_fkey FOREIGN KEY (id_gegrupo_int) REFERENCES public.gegrupo(id_gegrupo_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11608 (class 2606 OID 67385)
-- Name: gefaixaatraso gegrupofaixaatraso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefaixaatraso
    ADD CONSTRAINT gegrupofaixaatraso_fkey FOREIGN KEY (id_gegrupofaixaatraso_int) REFERENCES public.gegrupofaixaatraso(id_gegrupofaixaatraso_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11642 (class 2606 OID 66534)
-- Name: geparametro gegrupoparametro_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geparametro
    ADD CONSTRAINT gegrupoparametro_fkey FOREIGN KEY (id_gegrupoparametro_int) REFERENCES public.gegrupoparametro(id_gegrupoparametro_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11725 (class 2606 OID 66542)
-- Name: gevalorparametro gegrupoparametro_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT gegrupoparametro_fkey FOREIGN KEY (id_gegrupoparametro_int) REFERENCES public.gegrupoparametro(id_gegrupoparametro_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11651 (class 2606 OID 66987)
-- Name: geprocesso gegrupoprocesso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geprocesso
    ADD CONSTRAINT gegrupoprocesso_fkey FOREIGN KEY (id_gegrupoprocesso_int) REFERENCES public.gegrupoprocesso(id_gegrupoprocesso_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11720 (class 2606 OID 66766)
-- Name: geusuariogrupoprocesso gegrupoprocesso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariogrupoprocesso
    ADD CONSTRAINT gegrupoprocesso_fkey FOREIGN KEY (id_gegrupoprocesso_int) REFERENCES public.gegrupoprocesso(id_gegrupoprocesso_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11506 (class 2606 OID 79655)
-- Name: cbsitcontato gegrupotipodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsitcontato
    ADD CONSTRAINT gegrupotipodocumento_fkey FOREIGN KEY (id_gegrupotipodocumento_int) REFERENCES public.gegrupotipodocumento(id_gegrupotipodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11629 (class 2606 OID 79711)
-- Name: geinstrucaobaixacritica geinstrucaobaixa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinstrucaobaixacritica
    ADD CONSTRAINT geinstrucaobaixa_fkey FOREIGN KEY (id_geinstrucaobaixa_int) REFERENCES public.geinstrucaobaixa(id_geinstrucaobaixa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11652 (class 2606 OID 66579)
-- Name: geprocessocontrato geitemprocesso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geprocessocontrato
    ADD CONSTRAINT geitemprocesso_fkey FOREIGN KEY (id_geitemprocesso_int) REFERENCES public.geitemprocesso(id_geitemprocesso_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11631 (class 2606 OID 80810)
-- Name: gelogdiscador gelogdiscador_id_geusuarioramal_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gelogdiscador
    ADD CONSTRAINT gelogdiscador_id_geusuarioramal_int_fkey FOREIGN KEY (id_geusuarioramal_int) REFERENCES public.geusuarioramal(id_geusuarioramal_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11632 (class 2606 OID 79728)
-- Name: gelogeventodiscador gelogeventodiscador_id_gelogdiscador_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gelogeventodiscador
    ADD CONSTRAINT gelogeventodiscador_id_gelogdiscador_int_fkey FOREIGN KEY (id_gelogdiscador_int) REFERENCES public.gelogdiscador(id_gelogdiscador_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11633 (class 2606 OID 80741)
-- Name: gelogeventodiscador gelogeventodiscador_id_getipologeventodiscador_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gelogeventodiscador
    ADD CONSTRAINT gelogeventodiscador_id_getipologeventodiscador_int_fkey FOREIGN KEY (id_getipologeventodiscador_int) REFERENCES public.getipologeventodiscador(id_getipologeventodiscador_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11635 (class 2606 OID 79740)
-- Name: gemetasitcontato gemetasitcontato_id_gemeta_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemetasitcontato
    ADD CONSTRAINT gemetasitcontato_id_gemeta_int_fkey FOREIGN KEY (id_gemeta_int) REFERENCES public.gemeta(id_gemeta_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11628 (class 2606 OID 79692)
-- Name: geinstrucaobaixa gemotivobaixa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geinstrucaobaixa
    ADD CONSTRAINT gemotivobaixa_fkey FOREIGN KEY (id_gemotivobaixa_int) REFERENCES public.gemotivobaixa(id_gemotivobaixa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11339 (class 2606 OID 66850)
-- Name: cbatrasocontrato gemotivoinadimplencia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbatrasocontrato
    ADD CONSTRAINT gemotivoinadimplencia_fkey FOREIGN KEY (id_gemotivoinadimplencia_int) REFERENCES public.gemotivoinadimplencia(id_gemotivoinadimplencia_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11637 (class 2606 OID 79762)
-- Name: gemotivonajuizamentocliente gemotivonajuizamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivonajuizamentocliente
    ADD CONSTRAINT gemotivonajuizamento_fkey FOREIGN KEY (id_gemotivonajuizamento_int) REFERENCES public.gemotivonajuizamento(id_gemotivonajuizamento_int) ON UPDATE CASCADE;

--
-- TOC entry 11689 (class 2606 OID 80664)
-- Name: gesolicitacaodocumento gemotivonajuizamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumento
    ADD CONSTRAINT gemotivonajuizamento_fkey FOREIGN KEY (id_gemotivonajuizamento_int) REFERENCES public.gemotivonajuizamento(id_gemotivonajuizamento_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11710 (class 2606 OID 80786)
-- Name: getriagemveiculo gemotivoresultadotriagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculo
    ADD CONSTRAINT gemotivoresultadotriagem_fkey FOREIGN KEY (id_gemotivoresultadotriagem_int) REFERENCES public.gemotivoresultadotriagem(id_gemotivoresultadotriagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11700 (class 2606 OID 80676)
-- Name: gestatustriagem georgaotriagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatustriagem
    ADD CONSTRAINT georgaotriagem_fkey FOREIGN KEY (id_georgaotriagem_int) REFERENCES public.georgaotriagem(id_georgaotriagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11711 (class 2606 OID 80778)
-- Name: getriagemveiculo georgaotriagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculo
    ADD CONSTRAINT georgaotriagem_fkey FOREIGN KEY (id_georgaotriagem_int) REFERENCES public.georgaotriagem(id_georgaotriagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11726 (class 2606 OID 66096)
-- Name: gevalorparametro geparametro_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gevalorparametro
    ADD CONSTRAINT geparametro_fkey FOREIGN KEY (id_geparametro_int) REFERENCES public.geparametro(id_geparametro_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11597 (class 2606 OID 66611)
-- Name: geclienteservidor geparametroservidor_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclienteservidor
    ADD CONSTRAINT geparametroservidor_fkey FOREIGN KEY (id_geparametroservidor_int) REFERENCES public.geparametroservidor(id_geparametroservidor_int);

--
-- TOC entry 11648 (class 2606 OID 79842)
-- Name: gepreanalisefollowup gepreanalise_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalisefollowup
    ADD CONSTRAINT gepreanalise_fkey FOREIGN KEY (id_gepreanalise_int) REFERENCES public.gepreanalise(id_gepreanalise_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11650 (class 2606 OID 79849)
-- Name: gepreanaliseveiculo gepreanalise_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanaliseveiculo
    ADD CONSTRAINT gepreanalise_fkey FOREIGN KEY (id_gepreanalise_int) REFERENCES public.gepreanalise(id_gepreanalise_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11630 (class 2606 OID 67010)
-- Name: geitemprocesso geprocesso_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geitemprocesso
    ADD CONSTRAINT geprocesso_fkey FOREIGN KEY (id_geprocesso_int) REFERENCES public.geprocesso(id_geprocesso_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11656 (class 2606 OID 63838)
-- Name: geqlcontato geqlcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontato
    ADD CONSTRAINT geqlcliente_fkey FOREIGN KEY (id_geqlcliente_int) REFERENCES public.geqlcliente(id_geqlcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11660 (class 2606 OID 63866)
-- Name: geqlcontrato geqlcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontrato
    ADD CONSTRAINT geqlcliente_fkey FOREIGN KEY (id_geqlcliente_int) REFERENCES public.geqlcliente(id_geqlcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11661 (class 2606 OID 63852)
-- Name: geqlemail geqlcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlemail
    ADD CONSTRAINT geqlcliente_fkey FOREIGN KEY (id_geqlcliente_int) REFERENCES public.geqlcliente(id_geqlcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11663 (class 2606 OID 63845)
-- Name: geqlendereco geqlcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlendereco
    ADD CONSTRAINT geqlcliente_fkey FOREIGN KEY (id_geqlcliente_int) REFERENCES public.geqlcliente(id_geqlcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11668 (class 2606 OID 65726)
-- Name: geqltratamento geqlcliente_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamento
    ADD CONSTRAINT geqlcliente_fkey FOREIGN KEY (id_geqlcliente_int) REFERENCES public.geqlcliente(id_geqlcliente_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11586 (class 2606 OID 79579)
-- Name: gebloqueiotelefonecontato geqlcontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontato
    ADD CONSTRAINT geqlcontato_fkey FOREIGN KEY (id_geqlcontato_int) REFERENCES public.geqlcontato(id_geqlcontato_int);

--
-- TOC entry 11671 (class 2606 OID 66049)
-- Name: geqltratamentocontato geqlcontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentocontato
    ADD CONSTRAINT geqlcontato_fkey FOREIGN KEY (id_geqlcontato_int) REFERENCES public.geqlcontato(id_geqlcontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11673 (class 2606 OID 80274)
-- Name: geqltratamentoemail geqlemail_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentoemail
    ADD CONSTRAINT geqlemail_fkey FOREIGN KEY (id_geqlemail_int) REFERENCES public.geqlemail(id_geqlemail_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11657 (class 2606 OID 63791)
-- Name: geqlcontato geqlendereco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontato
    ADD CONSTRAINT geqlendereco_fkey FOREIGN KEY (id_geqlendereco_int) REFERENCES public.geqlendereco(id_geqlendereco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11681 (class 2606 OID 80572)
-- Name: gesolicitacaocustas geqlendereco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaocustas
    ADD CONSTRAINT geqlendereco_fkey FOREIGN KEY (id_geqlendereco_int) REFERENCES public.geqlendereco(id_geqlendereco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11669 (class 2606 OID 66893)
-- Name: geqltratamento geqlresponsavel_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamento
    ADD CONSTRAINT geqlresponsavel_fkey FOREIGN KEY (id_geqlresponsavel_int) REFERENCES public.geqlresponsavel(id_geqlresponsavel_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11670 (class 2606 OID 67191)
-- Name: geqltratamento geqlsituacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamento
    ADD CONSTRAINT geqlsituacao_fkey FOREIGN KEY (id_geqlsituacao_int) REFERENCES public.geqlsituacao(id_geqlsituacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11667 (class 2606 OID 80165)
-- Name: geqlskipping geqlskipping_fk1; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlskipping
    ADD CONSTRAINT geqlskipping_fk1 FOREIGN KEY (id_geqlcontato_int) REFERENCES public.geqlcontato(id_geqlcontato_int);

--
-- TOC entry 11588 (class 2606 OID 79563)
-- Name: gebloqueiotelefonecontatoanterior geqltipocontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebloqueiotelefonecontatoanterior
    ADD CONSTRAINT geqltipocontato_fkey FOREIGN KEY (id_geqltipocontato_anterior_int) REFERENCES public.geqltipocontato(id_geqltipocontato_int);

--
-- TOC entry 11653 (class 2606 OID 66829)
-- Name: geqlconfiguracaocontato geqltipocontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaocontato
    ADD CONSTRAINT geqltipocontato_fkey FOREIGN KEY (id_geqltipocontato_int) REFERENCES public.geqltipocontato(id_geqltipocontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11658 (class 2606 OID 66799)
-- Name: geqlcontato geqltipocontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontato
    ADD CONSTRAINT geqltipocontato_fkey FOREIGN KEY (id_geqltipocontato_int) REFERENCES public.geqltipocontato(id_geqltipocontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11654 (class 2606 OID 67216)
-- Name: geqlconfiguracaoemail geqltipoemail_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaoemail
    ADD CONSTRAINT geqltipoemail_fkey FOREIGN KEY (id_geqltipoemail_int) REFERENCES public.geqltipoemail(id_geqltipoemail_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11662 (class 2606 OID 66815)
-- Name: geqlemail geqltipoemail_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlemail
    ADD CONSTRAINT geqltipoemail_fkey FOREIGN KEY (id_geqltipoemail_int) REFERENCES public.geqltipoemail(id_geqltipoemail_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11655 (class 2606 OID 66978)
-- Name: geqlconfiguracaoendereco geqltipoendereco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlconfiguracaoendereco
    ADD CONSTRAINT geqltipoendereco_fkey FOREIGN KEY (id_geqltipoendereco_int) REFERENCES public.geqltipoendereco(id_geqltipoendereco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11664 (class 2606 OID 66969)
-- Name: geqlendereco geqltipoendereco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlendereco
    ADD CONSTRAINT geqltipoendereco_fkey FOREIGN KEY (id_geqltipoendereco_int) REFERENCES public.geqltipoendereco(id_geqltipoendereco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11665 (class 2606 OID 65736)
-- Name: geqlendereco geqltratamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlendereco
    ADD CONSTRAINT geqltratamento_fkey FOREIGN KEY (id_geqltratamento_int) REFERENCES public.geqltratamento(id_geqltratamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11672 (class 2606 OID 66061)
-- Name: geqltratamentocontato geqltratamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentocontato
    ADD CONSTRAINT geqltratamento_fkey FOREIGN KEY (id_geqltratamento_int) REFERENCES public.geqltratamento(id_geqltratamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11674 (class 2606 OID 80482)
-- Name: geqltratamentoemail geqltratamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentoemail
    ADD CONSTRAINT geqltratamento_fkey FOREIGN KEY (id_geqltratamento_int) REFERENCES public.geqltratamento(id_geqltratamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11675 (class 2606 OID 80337)
-- Name: geqltratamentoendereco geqltratamento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqltratamentoendereco
    ADD CONSTRAINT geqltratamento_fkey FOREIGN KEY (id_geqltratamento_int) REFERENCES public.geqltratamento(id_geqltratamento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11659 (class 2606 OID 66074)
-- Name: geqlcontato geqltratamentocontato_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlcontato
    ADD CONSTRAINT geqltratamentocontato_fkey FOREIGN KEY (id_geqltratamentocontato_int) REFERENCES public.geqltratamentocontato(id_geqltratamentocontato_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11666 (class 2606 OID 80540)
-- Name: geqlendereco geqltratamentoendereco_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geqlendereco
    ADD CONSTRAINT geqltratamentoendereco_fkey FOREIGN KEY (id_geqltratamentoendereco_int) REFERENCES public.geqltratamentoendereco(id_geqltratamentoendereco_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11679 (class 2606 OID 67529)
-- Name: gesequenciaitem gesequenciaitem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesequenciaitem
    ADD CONSTRAINT gesequenciaitem_fkey FOREIGN KEY (id_gesequencia_int) REFERENCES public.gesequencia(id_gesequencia_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11645 (class 2606 OID 80644)
-- Name: gepreanalise gesolicitacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalise
    ADD CONSTRAINT gesolicitacao_fkey FOREIGN KEY (id_gesolicitacaodocumento_int) REFERENCES public.gesolicitacaodocumento(id_gesolicitacaodocumento_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11589 (class 2606 OID 80638)
-- Name: gecartapreajuizamento gesolicitacaodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecartapreajuizamento
    ADD CONSTRAINT gesolicitacaodocumento_fkey FOREIGN KEY (id_gesolicitacaodocumento_int) REFERENCES public.gesolicitacaodocumento(id_gesolicitacaodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11682 (class 2606 OID 80654)
-- Name: gesolicitacaocustas gesolicitacaodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaocustas
    ADD CONSTRAINT gesolicitacaodocumento_fkey FOREIGN KEY (id_gesolicitacaodocumento_int) REFERENCES public.gesolicitacaodocumento(id_gesolicitacaodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11693 (class 2606 OID 80689)
-- Name: gesolicitacaotipodocumento gesolicitacaodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaotipodocumento
    ADD CONSTRAINT gesolicitacaodocumento_fkey FOREIGN KEY (id_gesolicitacaodocumento_int) REFERENCES public.gesolicitacaodocumento(id_gesolicitacaodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11712 (class 2606 OID 80764)
-- Name: getriagemveiculo gesolicitacaodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculo
    ADD CONSTRAINT gesolicitacaodocumento_fkey FOREIGN KEY (id_gesolicitacaodocumento_int) REFERENCES public.gesolicitacaodocumento(id_gesolicitacaodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11691 (class 2606 OID 80643)
-- Name: gesolicitacaodocumentonotificacao gesolicitacaodocumentonotificacao_cbdespesa_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumentonotificacao
    ADD CONSTRAINT gesolicitacaodocumentonotificacao_cbdespesa_fkey FOREIGN KEY (id_cbdespesa_int) REFERENCES public.cbdespesa(id_cbdespesa_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11706 (class 2606 OID 80763)
-- Name: getiponotificacaosolicitacao gesolicitacaodocumentonotificacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getiponotificacaosolicitacao
    ADD CONSTRAINT gesolicitacaodocumentonotificacao_fkey FOREIGN KEY (id_gesolicitacaodocumentonotificacao_int) REFERENCES public.gesolicitacaodocumentonotificacao(id_gesolicitacaodocumentonotificacao_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11692 (class 2606 OID 80697)
-- Name: gesolicitacaodocumentonotificacao gesolicitacaodocumentonotificacao_gesolicitacaodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaodocumentonotificacao
    ADD CONSTRAINT gesolicitacaodocumentonotificacao_gesolicitacaodocumento_fkey FOREIGN KEY (id_gesolicitacaodocumento_int) REFERENCES public.gesolicitacaodocumento(id_gesolicitacaodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11714 (class 2606 OID 80762)
-- Name: getriagemveiculostatus gestatustriagem_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculostatus
    ADD CONSTRAINT gestatustriagem_fkey FOREIGN KEY (id_gestatustriagem_int) REFERENCES public.gestatustriagem(id_gestatustriagem_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11377 (class 2606 OID 80706)
-- Name: cbcontratoitauacaoadv geterceiro_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauacaoadv
    ADD CONSTRAINT geterceiro_fkey FOREIGN KEY (id_geterceiro_int) REFERENCES public.geterceiro(id_geterceiro_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11378 (class 2606 OID 80719)
-- Name: cbcontratoitauadversa geterceiro_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratoitauadversa
    ADD CONSTRAINT geterceiro_fkey FOREIGN KEY (id_geterceiro_int) REFERENCES public.geterceiro(id_geterceiro_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11605 (class 2606 OID 66903)
-- Name: gedocumento getipodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gedocumento
    ADD CONSTRAINT getipodocumento_fkey FOREIGN KEY (id_getipodocumento_int) REFERENCES public.getipodocumento(id_getipodocumento_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11694 (class 2606 OID 80619)
-- Name: gesolicitacaotipodocumento getipodocumento_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaotipodocumento
    ADD CONSTRAINT getipodocumento_fkey FOREIGN KEY (id_getipodocumento_int) REFERENCES public.getipodocumento(id_getipodocumento_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11702 (class 2606 OID 80728)
-- Name: getipodocumentokitdocumento getipodocumentokitdocumento_id_gekitdocumento_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipodocumentokitdocumento
    ADD CONSTRAINT getipodocumentokitdocumento_id_gekitdocumento_int_fkey FOREIGN KEY (id_gekitdocumento_int) REFERENCES public.gekitdocumento(id_gekitdocumento_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11703 (class 2606 OID 80707)
-- Name: getipodocumentokitdocumento getipodocumentokitdocumento_id_getipodocumento_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipodocumentokitdocumento
    ADD CONSTRAINT getipodocumentokitdocumento_id_getipodocumento_int_fkey FOREIGN KEY (id_getipodocumento_int) REFERENCES public.getipodocumento(id_getipodocumento_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11382 (class 2606 OID 80729)
-- Name: cbcontratopecunia getipogarantia_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcontratopecunia
    ADD CONSTRAINT getipogarantia_fkey FOREIGN KEY (id_getipogarantia_int) REFERENCES public.getipogarantia(id_getipogarantia_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11707 (class 2606 OID 80748)
-- Name: getiponotificacaosolicitacao getiponotificacao_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getiponotificacaosolicitacao
    ADD CONSTRAINT getiponotificacao_fkey FOREIGN KEY (id_getiponotificacao_int) REFERENCES public.getiponotificacao(id_getiponotificacao_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11715 (class 2606 OID 80799)
-- Name: getriagemveiculostatus getriagemveiculo_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculostatus
    ADD CONSTRAINT getriagemveiculo_fkey FOREIGN KEY (id_getriagemveiculo_int) REFERENCES public.getriagemveiculo(id_getriagemveiculo_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11337 (class 2606 OID 67591)
-- Name: cbagenciacontrato geuf_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbagenciacontrato
    ADD CONSTRAINT geuf_fkey FOREIGN KEY (id_geuf_int) REFERENCES public.geuf(id_geuf_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11544 (class 2606 OID 75438)
-- Name: cbtipopagamentouf geuf_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipopagamentouf
    ADD CONSTRAINT geuf_fkey FOREIGN KEY (id_geuf_int) REFERENCES public.geuf(id_geuf_int);

--
-- TOC entry 11366 (class 2606 OID 67135)
-- Name: cbcampanhateste geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhateste
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11368 (class 2606 OID 67783)
-- Name: cbcampanhatesteautorizado geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteautorizado
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11371 (class 2606 OID 67806)
-- Name: cbcampanhatesteitembordero geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbcampanhatesteitembordero
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11400 (class 2606 OID 66205)
-- Name: cbdetalhelay geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbdetalhelay
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11404 (class 2606 OID 68314)
-- Name: cbentradalay geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbentradalay
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11412 (class 2606 OID 68363)
-- Name: cbfilialcliente geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfilialcliente
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11415 (class 2606 OID 63916)
-- Name: cbfollowup geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfollowup
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11416 (class 2606 OID 68383)
-- Name: cbfollowupcliente geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbfollowupcliente
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11436 (class 2606 OID 65707)
-- Name: cbitemlay geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbitemlay
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11438 (class 2606 OID 66266)
-- Name: cbmodlayout geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbmodlayout
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11442 (class 2606 OID 69224)
-- Name: cbnotifcodigodivida geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodivida
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11448 (class 2606 OID 69360)
-- Name: cbnotifcodigodividaparam geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifcodigodividaparam
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11459 (class 2606 OID 69841)
-- Name: cbnotifparametros geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametros
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11465 (class 2606 OID 69912)
-- Name: cbnotifparametrosnao geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifparametrosnao
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11469 (class 2606 OID 70351)
-- Name: cbnotifseparado geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifseparado
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11472 (class 2606 OID 70809)
-- Name: cbnotifvalor geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbnotifvalor
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11475 (class 2606 OID 70934)
-- Name: cbordemlay geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbordemlay
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11492 (class 2606 OID 71643)
-- Name: cbplataforma geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbplataforma
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11494 (class 2606 OID 71788)
-- Name: cbproduto geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbproduto
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11498 (class 2606 OID 72191)
-- Name: cbprodutocliente geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbprodutocliente
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11508 (class 2606 OID 73553)
-- Name: cbsituacaocontatoemail geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontatoemail
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11511 (class 2606 OID 63950)
-- Name: cbsituacaocontratohistorico geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaocontratohistorico
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11512 (class 2606 OID 63933)
-- Name: cbsituacaoparcelahistorico geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbsituacaoparcelahistorico
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11514 (class 2606 OID 73869)
-- Name: cbtipoestacionamento geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipoestacionamento
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11515 (class 2606 OID 73952)
-- Name: cbtipogarantia geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.cbtipogarantia
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11550 (class 2606 OID 77489)
-- Name: escontratofinaustria geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.escontratofinaustria
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11558 (class 2606 OID 67451)
-- Name: esregua geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esregua
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11561 (class 2606 OID 79215)
-- Name: esreguafaixaatraso geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.esreguafaixaatraso
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11583 (class 2606 OID 79528)
-- Name: gebancoevento geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebancoevento
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11584 (class 2606 OID 79534)
-- Name: gebancofase geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gebancofase
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11590 (class 2606 OID 79568)
-- Name: gecartapreajuizamento geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecartapreajuizamento
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11595 (class 2606 OID 67258)
-- Name: geclassificacaopreanalise geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geclassificacaopreanalise
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11600 (class 2606 OID 65840)
-- Name: gecomarca geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecomarca
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11601 (class 2606 OID 67064)
-- Name: geconclusaopreajuizamento geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geconclusaopreajuizamento
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11604 (class 2606 OID 67124)
-- Name: gecriticanotificacao geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gecriticanotificacao
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11609 (class 2606 OID 67428)
-- Name: gefasesolicitacao geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gefasesolicitacao
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11616 (class 2606 OID 67365)
-- Name: gegrupofaixaatraso geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupofaixaatraso
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11618 (class 2606 OID 66294)
-- Name: gegrupousuario geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gegrupousuario
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11621 (class 2606 OID 65885)
-- Name: gehistorico geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistorico
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11624 (class 2606 OID 63927)
-- Name: gehistoricousuario geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gehistoricousuario
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11639 (class 2606 OID 79763)
-- Name: gemotivoresultadotriagem geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gemotivoresultadotriagem
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11641 (class 2606 OID 79785)
-- Name: georgaotriagem geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.georgaotriagem
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11646 (class 2606 OID 79817)
-- Name: gepreanalise geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gepreanalise
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11683 (class 2606 OID 80583)
-- Name: gesolicitacaocustas geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gesolicitacaocustas
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11697 (class 2606 OID 65930)
-- Name: gestatusdespesa geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusdespesa
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11699 (class 2606 OID 63960)
-- Name: gestatusimporta geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatusimporta
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11701 (class 2606 OID 80659)
-- Name: gestatustriagem geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.gestatustriagem
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11705 (class 2606 OID 67354)
-- Name: getiponotificacao geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getiponotificacao
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE RESTRICT DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11708 (class 2606 OID 67290)
-- Name: getipopendencianaojuizamento geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getipopendencianaojuizamento
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11713 (class 2606 OID 80753)
-- Name: getriagemveiculo geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.getriagemveiculo
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11719 (class 2606 OID 65717)
-- Name: geusuariocliente geusuario_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuariocliente
    ADD CONSTRAINT geusuario_fkey FOREIGN KEY (id_geusuario_int) REFERENCES public.geusuario(id_geusuario_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11721 (class 2606 OID 80816)
-- Name: geusuarioramal geusuarioramal_id_geramal_int_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geusuarioramal
    ADD CONSTRAINT geusuarioramal_id_geramal_int_fkey FOREIGN KEY (id_geramal_int) REFERENCES public.geramal(id_geramal_int) ON UPDATE RESTRICT ON DELETE RESTRICT;

--
-- TOC entry 11729 (class 2606 OID 80817)
-- Name: geviewcondicao geviewcampo_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewcondicao
    ADD CONSTRAINT geviewcampo_fkey FOREIGN KEY (id_geviewcampo_int) REFERENCES public.geviewcampo(id_geviewcampo_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11730 (class 2606 OID 80828)
-- Name: geviewordem geviewcampo_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewordem
    ADD CONSTRAINT geviewcampo_fkey FOREIGN KEY (id_geviewcampo_int) REFERENCES public.geviewcampo(id_geviewcampo_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11728 (class 2606 OID 67412)
-- Name: geviewcampo geviewsistema_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewcampo
    ADD CONSTRAINT geviewsistema_fkey FOREIGN KEY (id_geviewsistema_int) REFERENCES public.geviewsistema(id_geviewsistema_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11734 (class 2606 OID 67420)
-- Name: geviewtabela geviewsistema_fkey; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.geviewtabela
    ADD CONSTRAINT geviewsistema_fkey FOREIGN KEY (id_geviewsistema_int) REFERENCES public.geviewsistema(id_geviewsistema_int) ON UPDATE CASCADE DEFERRABLE INITIALLY DEFERRED;

--
-- TOC entry 11737 (class 2606 OID 65947)
-- Name: rpa_filaboletoelevalog rpa_filaboletoelevalog_fk; Type: FK CONSTRAINT; Schema: public; Owner: -
--

ALTER TABLE ONLY public.rpa_filaboletoelevalog
    ADD CONSTRAINT rpa_filaboletoelevalog_fk FOREIGN KEY (id_filaboletoeleva_int) REFERENCES public.rpa_filaboletoeleva(id_filaboletoeleva_int);

--
-- TOC entry 8798 (class 3466 OID 85699)
-- Name: vctrigger; Type: EVENT TRIGGER; Schema: -; Owner: -
--

CREATE EVENT TRIGGER vctrigger ON ddl_command_end
         WHEN TAG IN ('ALTER FUNCTION', 'CREATE FUNCTION', 'DROP FUNCTION', 'CREATE SEQUENCE', 'ALTER SEQUENCE', 'DROP SEQUENCE', 'ALTER TABLE', 'DROP TABLE', 'ALTER TRIGGER', 'CREATE TRIGGER', 'DROP TRIGGER', 'ALTER TYPE', 'CREATE TYPE', 'DROP TYPE', 'ALTER USER MAPPING', 'CREATE USER MAPPING', 'DROP USER MAPPING', 'ALTER VIEW', 'CREATE VIEW', 'DROP VIEW', 'CREATE RULE', 'DROP RULE', 'DROP INDEX')
   EXECUTE FUNCTION public.vcf();

-- Completed on 2026-02-26 18:31:15 UTC

--
-- PostgreSQL database dump complete
--

\unrestrict xeGxYKtAxh6CcFnqWTaJPj3FIp9GVj0yGrz4aWkY6D6SmckWygbBt3rToZkRLQe

